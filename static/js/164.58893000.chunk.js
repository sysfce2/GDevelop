(self.webpackChunkgdevelop_ide=self.webpackChunkgdevelop_ide||[]).push([[164],{96210:function(e,t,n){"use strict";n.d(t,{i:function(){return h},X:function(){return g}});var r=n(29439),i=n(74165),o=n(15861),a=n(28381),s=n(14446),l=n.n(s),c=n(45911),u=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get("".concat(c.bw.baseUrl,"/announcement"));case 2:if(t=e.sent,n=t.data,Array.isArray(n)){e.next=6;break}throw new Error("Invalid response from the announcements API");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get("".concat(c.bw.baseUrl,"/promotion"));case 2:if(t=e.sent,n=t.data,Array.isArray(n)){e.next=6;break}throw new Error("Invalid response from the promotions API");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=n(4900),f=n(29343),h=a.createContext({announcements:null,promotions:null,error:null,fetchAnnouncementsAndPromotions:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),g=function(e){var t=e.children,n=a.useState(null),s=(0,r.Z)(n,2),l=s[0],c=s[1],g=a.useState(null),x=(0,r.Z)(g,2),m=x[0],v=x[1],b=a.useState(null),C=(0,r.Z)(b,2),j=C[0],y=C[1],Z=a.useRef(!1),k=a.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var t,n,o,a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z.current){e.next=2;break}return e.abrupt("return");case 2:return v(null),Z.current=!0,e.prev=4,e.next=7,Promise.all([u(),d()]);case 7:t=e.sent,n=(0,r.Z)(t,2),o=n[0],a=n[1],s=o.filter((function(e){return!a.find((function(t){return t.id===e.id}))})),c(s),y(a),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),console.error("Unable to load the announcements from the api:",e.t0),v(e.t0);case 20:Z.current=!1;case 21:case"end":return e.stop()}}),e,null,[[4,16]])}))),[]);a.useEffect((function(){if(!l&&!Z.current){var e=setTimeout((function(){console.info("Pre-fetching announcements from the api..."),k()}),p.UY);return function(){return clearTimeout(e)}}}),[k,l,Z]);var w=a.useMemo((function(){return{announcements:l,promotions:j,error:m,fetchAnnouncementsAndPromotions:k}}),[l,j,m,k]);return(0,f.jsx)(h.Provider,{value:w,children:t})}},84090:function(e,t,n){"use strict";n.d(t,{KY:function(){return m},po:function(){return j}});var r=n(74165),i=n(15861),o=n(29439),a=n(28381),s=n(84140),l=n(36465),c=n(49819),u=n(39818),d=n(1525),p=n(71106),f=n(6901),h=n(65056),g=n(29343),x={filters:null,publicAssetPacks:null,privateAssetPackListingDatas:null,authors:null,licenses:null,environment:"live",setEnvironment:function(){},assetShortHeadersSearchResults:null,publicAssetPacksSearchResults:null,privateAssetPackListingDatasSearchResults:null,fetchAssetsAndFilters:function(){},error:null,searchText:"",setSearchText:function(){},assetFiltersState:{animatedFilter:new u.FL,setAnimatedFilter:function(e){},viewpointFilter:new u.GI,setViewpointFilter:function(e){},dimensionFilter:new u.C9,setDimensionFilter:function(e){},objectTypeFilter:new u.Jk,setObjectTypeFilter:function(e){},colorFilter:new u.ad,setColorFilter:function(e){},licenseFilter:new u.t3,setLicenseFilter:function(e){}},assetPackFiltersState:{typeFilter:new u.lz({}),setTypeFilter:function(e){}},clearAllFilters:function(){},shopNavigationState:{getCurrentPage:function(){return d.h1},backToPreviousPage:function(){return d.h1},openHome:function(){return d.h1},clearHistory:function(){},clearPreviousPageFromHistory:function(){},openSearchResultPage:function(){},openTagPage:function(e){},openShopCategoryPage:function(e){},openPackPage:function(e){e.assetPack,e.previousSearchText},openAssetDetailPage:function(e){e.assetShortHeader,e.previousSearchText},openPrivateAssetPackInformationPage:function(e){e.privateAssetPackListingData,e.previousSearchText},openPrivateGameTemplateInformationPage:function(e){e.privateGameTemplateListingData,e.previousSearchText},navigateInsideFolder:function(e){},goBackToFolderIndex:function(e){}},currentPage:d.h1,useSearchItem:function(e,t,n,r){return null},setInitialPackUserFriendlySlug:function(e){}},m=a.createContext(x),v=function(e){return e.name+"\n"+e.shortDescription+"\n"+e.tags.join(", ")},b=function(e){return e.name+"\n"+e.tag},C=function(e){return e.name+"\n"+e.description},j=function(e){var t=e.shopNavigationState,n=e.children,d=a.useState(null),x=(0,o.Z)(d,2),j=x[0],y=x[1],Z=a.useState(null),k=(0,o.Z)(Z,2),w=k[0],T=k[1],S=a.useContext(p.ZP),P=S.receivedAssetShortHeaders,E=S.receivedAssetPacks,I=a.useState(null),M=(0,o.Z)(I,2),L=M[0],A=M[1],F=a.useState(null),O=(0,o.Z)(F,2),R=O[0],D=O[1],_=a.useState(null),B=(0,o.Z)(_,2),N=B[0],U=B[1],H=a.useState(null),V=(0,o.Z)(H,2),z=V[0],W=V[1],G=a.useState(null),Y=(0,o.Z)(G,2),q=Y[0],X=Y[1],K=a.useState("live"),J=(0,o.Z)(K,2),Q=J[0],$=J[1],ee=a.useState(null),te=(0,o.Z)(ee,2),ne=te[0],re=te[1],ie=a.useState(null),oe=(0,o.Z)(ie,2),ae=oe[0],se=oe[1],le=a.useRef(!1),ce=(0,h.Z)().showAlert,ue=a.useState(""),de=(0,o.Z)(ue,2),pe=de[0],fe=de[1],he=a.useState(new u.FL),ge=(0,o.Z)(he,2),xe=ge[0],me=ge[1],ve=a.useState(new u.GI),be=(0,o.Z)(ve,2),Ce=be[0],je=be[1],ye=a.useState(new u.C9),Ze=(0,o.Z)(ye,2),ke=Ze[0],we=Ze[1],Te=a.useState(new u.Jk),Se=(0,o.Z)(Te,2),Pe=Se[0],Ee=Se[1],Ie=a.useState(new u.ad),Me=(0,o.Z)(Ie,2),Le=Me[0],Ae=Me[1],Fe=a.useState(new u.t3),Oe=(0,o.Z)(Fe,2),Re=Oe[0],De=Oe[1],_e=a.useMemo((function(){return[xe,Ce,ke,Pe,Le,Re]}),[xe,Ce,ke,Pe,Le,Re]),Be=a.useState(new u.lz({receivedAssetPacks:E})),Ne=(0,o.Z)(Be,2),Ue=Ne[0],He=Ne[1],Ve=a.useMemo((function(){return[Ue]}),[Ue]),ze=a.useCallback((function(){(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i,o,a,c,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return re(null),e.prev=1,e.next=4,(0,s.Xt)({environment:Q});case 4:return t=e.sent,n=t.publicAssetShortHeaders,i=t.publicFilters,o=t.publicAssetPacks,e.next=10,(0,s.Dz)({environment:Q});case 10:return a=e.sent,e.next=13,(0,s.$l)({environment:Q});case 13:return c=e.sent,e.next=16,(0,l.Ab)();case 16:u=e.sent,console.info("Loaded ".concat(n?n.length:0," assets from the asset store.")),D(o),T(n),A(i),W(a),X(c),U(u),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(1),console.error("Unable to load the assets from the asset store:",e.t0),re(e.t0);case 30:case"end":return e.stop()}}),e,null,[[1,26]])})))()}),[Q]);a.useEffect((function(){var e={};w&&w.forEach((function(t){e[t.id]=t})),P&&P.forEach((function(t){e[t.id]=t})),Object.keys(e).length>0&&y(e)}),[w,P]),a.useEffect((function(){if(ae&&!le.current&&R&&E&&N&&ae){le.current=!0;var e=(0,f.WY)({publicAssetPacks:R,receivedAssetPacks:E,userFriendlySlug:ae});if(e)return t.openPackPage({assetPack:e,previousSearchText:pe}),le.current=!1,void se(null);var n=(0,f.Nh)({privateAssetPackListingDatas:N,userFriendlySlug:ae});if(n)return t.openPrivateAssetPackInformationPage({privateAssetPackListingData:n,previousSearchText:pe}),le.current=!1,void se(null);ce({title:{id:"Asset pack not found"},message:{id:"The link to the asset pack you've followed seems outdated. Why not take a look at the other packs in the asset store?"}})}}),[R,E,N,t,ce,ae,pe]),a.useEffect((function(){ze()}),[ze]);var We=a.useMemo((function(){if(!R||!R.starterPacks)return null;var e={};return R.starterPacks.forEach((function(t){var n=t.tag;e[n]&&!t.externalWebLink&&console.warn("Multiple public asset packs with the same tag: ".concat(n)),e[n]=t})),e}),[R]),Ge=a.useMemo((function(){if(!N)return null;var e={};return N.forEach((function(t){var n=t.id;e[n]&&console.warn("Multiple private asset packs with the same id: ".concat(n)),e[n]=t})),e}),[N]),Ye=t.getCurrentPage(),qe=Ye.filtersState,Xe=qe.chosenCategory,Ke=qe.chosenFilters,Je=(0,c.az)(j,v,pe,Xe,Ke,_e),Qe=(0,c.az)(We,b,pe,Xe,null,Ve),$e=(0,c.az)(Ge,C,pe,Xe,null,Ve),et=a.useMemo((function(){return{animatedFilter:xe,setAnimatedFilter:me,viewpointFilter:Ce,setViewpointFilter:je,dimensionFilter:ke,setDimensionFilter:we,objectTypeFilter:Pe,setObjectTypeFilter:Ee,colorFilter:Le,setColorFilter:Ae,licenseFilter:Re,setLicenseFilter:De}}),[xe,me,Ce,je,ke,we,Pe,Ee,Le,Ae,Re,De]),tt=a.useMemo((function(){return{typeFilter:Ue,setTypeFilter:He}}),[Ue,He]),nt=a.useCallback((function(){et.setAnimatedFilter(new u.FL),et.setViewpointFilter(new u.GI),et.setDimensionFilter(new u.C9),et.setObjectTypeFilter(new u.Jk),et.setColorFilter(new u.ad),et.setLicenseFilter(new u.t3),tt.setTypeFilter(new u.lz({}))}),[et,tt]),rt=a.useMemo((function(){return{assetShortHeadersSearchResults:Je,publicAssetPacksSearchResults:Qe,privateAssetPackListingDatasSearchResults:$e,fetchAssetsAndFilters:ze,filters:L,publicAssetPacks:R,privateAssetPackListingDatas:N,authors:z,licenses:q,environment:Q,setEnvironment:$,error:ne,shopNavigationState:t,currentPage:Ye,searchText:pe,setSearchText:fe,assetFiltersState:et,assetPackFiltersState:tt,clearAllFilters:nt,useSearchItem:function(e,t,n,r){return(0,c.az)(j,v,e,t,n,r)},setInitialPackUserFriendlySlug:se}}),[Je,Qe,$e,ze,L,R,N,z,q,Q,$,ne,t,Ye,pe,et,tt,nt,j,se]);return(0,g.jsx)(m.Provider,{value:rt,children:n})}},1525:function(e,t,n){"use strict";n.d(t,{Bd:function(){return p},C$:function(){return u},h1:function(){return l},wA:function(){return d}});var r=n(93433),i=n(1413),o=n(29439),a=n(28381),s={chosenCategory:null,chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},setChosenCategory:function(){}},l={openedAssetShortHeader:null,openedShopCategory:null,openedAssetPack:null,openedPrivateAssetPackListingData:null,openedPrivateGameTemplateListingData:null,selectedFolders:[],filtersState:s,displayAssets:!1},c={openedAssetShortHeader:null,openedShopCategory:null,openedAssetPack:null,openedPrivateAssetPackListingData:null,openedPrivateGameTemplateListingData:null,selectedFolders:[],filtersState:s,displayAssets:!0},u=function(e){return e===l||!e.openedAssetShortHeader&&!e.openedPrivateAssetPackListingData&&!e.openedPrivateGameTemplateListingData&&!e.openedAssetPack&&e.filtersState===s&&!e.displayAssets},d=function(e){return!u(e)&&!e.openedAssetShortHeader&&!e.openedPrivateAssetPackListingData&&!e.openedPrivateGameTemplateListingData},p=function(){var e=a.useState({previousPages:[l]}),t=(0,o.Z)(e,2),n=t[0],u=t[1],p=n.previousPages;return a.useMemo((function(){return{getCurrentPage:function(){return p[p.length-1]},backToPreviousPage:function(){if(p.length>1){var e=p.slice(0,p.length-1),t=e[e.length-1];return u({previousPages:e}),t}return p[0]},openHome:function(){return u({previousPages:[l]}),l},clearHistory:function(){u((function(e){if(e.previousPages.length<=1)return e;var t=e.previousPages[e.previousPages.length-1];return{previousPages:[l,t]}}))},clearPreviousPageFromHistory:function(){u((function(e){return e.previousPages.length<=1?e:{previousPages:e.previousPages.slice(0,e.previousPages.length-1)}}))},openSearchResultPage:function(){u((function(e){var t=e.previousPages[e.previousPages.length-1];return d(t)?e:(0,i.Z)((0,i.Z)({},e),{},{previousPages:[].concat((0,r.Z)(e.previousPages),[c])})}))},openTagPage:function(e){u((function(t){return(0,i.Z)((0,i.Z)({},t),{},{previousPages:[].concat((0,r.Z)(t.previousPages),[{openedAssetShortHeader:null,openedShopCategory:null,openedAssetPack:null,openedPrivateAssetPackListingData:null,openedPrivateGameTemplateListingData:null,displayAssets:!0,filtersState:{chosenCategory:{node:{name:e,allChildrenTags:[],children:[]},parentNodes:[]},chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},setChosenCategory:function(){}},selectedFolders:[e]}])})}))},openShopCategoryPage:function(e){u((function(t){return(0,i.Z)((0,i.Z)({},t),{},{previousPages:[].concat((0,r.Z)(t.previousPages),[{openedAssetShortHeader:null,openedShopCategory:e,openedAssetPack:null,openedPrivateAssetPackListingData:null,openedPrivateGameTemplateListingData:null,filtersState:s,displayAssets:!1,selectedFolders:[]}])})}))},openPackPage:function(e){var t=e.assetPack,n=e.previousSearchText;u((function(e){var o=e.previousPages[e.previousPages.length-1],a=(0,i.Z)((0,i.Z)({},o),{},{searchText:n}),s=e.previousPages.slice(0,e.previousPages.length-1),l=[].concat((0,r.Z)(s),[a]);return(0,i.Z)((0,i.Z)({},e),{},{previousPages:[].concat((0,r.Z)(l),[{openedAssetShortHeader:null,openedShopCategory:o&&o.openedShopCategory||null,openedAssetPack:t,openedPrivateAssetPackListingData:null,openedPrivateGameTemplateListingData:null,displayAssets:!0,filtersState:{chosenCategory:{node:{name:t.tag,allChildrenTags:[],children:[]},parentNodes:[]},chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},setChosenCategory:function(){}},selectedFolders:[t.tag]}])})}))},openPrivateAssetPackInformationPage:function(e){var t=e.privateAssetPackListingData,n=e.previousSearchText;u((function(e){var o=e.previousPages[e.previousPages.length-1],a=(0,i.Z)((0,i.Z)({},o),{},{searchText:n}),l=e.previousPages.slice(0,e.previousPages.length-1),c=[].concat((0,r.Z)(l),[a]);return(0,i.Z)((0,i.Z)({},e),{},{previousPages:[].concat((0,r.Z)(c),[{openedAssetShortHeader:null,openedShopCategory:null,openedAssetPack:null,openedPrivateAssetPackListingData:t,openedPrivateGameTemplateListingData:null,filtersState:s,displayAssets:!1,selectedFolders:[]}])})}))},openAssetDetailPage:function(e){var t=e.assetShortHeader,n=e.previousSearchText;u((function(e){var o=e.previousPages[e.previousPages.length-1],a=(0,i.Z)((0,i.Z)({},o),{},{searchText:n}),l=e.previousPages.slice(0,e.previousPages.length-1),c=[].concat((0,r.Z)(l),[a]);return(0,i.Z)((0,i.Z)({},e),{},{previousPages:[].concat((0,r.Z)(c),[{openedAssetShortHeader:t,openedShopCategory:null,openedAssetPack:null,openedPrivateAssetPackListingData:null,openedPrivateGameTemplateListingData:null,filtersState:s,displayAssets:!1,selectedFolders:[]}])})}))},openPrivateGameTemplateInformationPage:function(e){var t=e.privateGameTemplateListingData,n=e.previousSearchText;u((function(e){var o=e.previousPages[e.previousPages.length-1],a=(0,i.Z)((0,i.Z)({},o),{},{searchText:n}),l=e.previousPages.slice(0,e.previousPages.length-1),c=[].concat((0,r.Z)(l),[a]);return(0,i.Z)((0,i.Z)({},e),{},{previousPages:[].concat((0,r.Z)(c),[{openedAssetShortHeader:null,openedShopCategory:null,openedAssetPack:null,openedPrivateAssetPackListingData:null,openedPrivateGameTemplateListingData:t,filtersState:s,displayAssets:!1,selectedFolders:[]}])})}))},navigateInsideFolder:function(e){u((function(t){var n=t.previousPages[t.previousPages.length-1],o=(0,i.Z)((0,i.Z)({},n),{},{selectedFolders:[].concat((0,r.Z)(n.selectedFolders),[e])}),a=t.previousPages.slice(0,t.previousPages.length-1),s=[].concat((0,r.Z)(a),[o]);return(0,i.Z)((0,i.Z)({},t),{},{previousPages:s})}))},goBackToFolderIndex:function(e){u((function(t){var n=t.previousPages[t.previousPages.length-1],o=(0,i.Z)((0,i.Z)({},n),{},{selectedFolders:n.selectedFolders.slice(0,e+1)}),a=t.previousPages.slice(0,t.previousPages.length-1),s=[].concat((0,r.Z)(a),[o]);return(0,i.Z)((0,i.Z)({},t),{},{previousPages:s})}))}}}),[p])}},39818:function(e,t,n){"use strict";n.d(t,{C9:function(){return g},FL:function(){return h},GI:function(){return u},Jk:function(){return d},ad:function(){return m},cx:function(){return v},lz:function(){return f},t3:function(){return p}});var r=n(37762),i=n(43144),o=n(15671),a=n(60136),s=n(29388),l=n(49819),c=n(11858),u=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return(0,o.Z)(this,n),t.call(this,e)}return(0,i.Z)(n)}(l.hM),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;(0,o.Z)(this,e),this.objectTypes=t}return(0,i.Z)(e,[{key:"getPertinence",value:function(e){return 0===this.objectTypes.size||this.objectTypes.has(e.objectType)?1:0}},{key:"hasFilters",value:function(){return this.objectTypes.size>0}}]),e}(),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,o.Z)(this,e),this.attributionFreeOnly=t}return(0,i.Z)(e,[{key:"getPertinence",value:function(t){return!this.attributionFreeOnly||e.noAttributionLicenses.includes(t.license)?1:0}},{key:"hasFilters",value:function(){return this.attributionFreeOnly}}]),e}();p.noAttributionLicenses=["CC0 (public domain)","Apache 2.0","Trademark of GDevelop Ltd (fair use authorised in GDevelop games)","SIL Open Font License 1.1 (OFL)"];var f=function(){function e(t){var n=t.isFree,r=void 0!==n&&n,i=t.isPremium,a=void 0!==i&&i,s=t.isOwned,l=void 0!==s&&s,c=t.receivedAssetPacks,u=void 0===c?[]:c;(0,o.Z)(this,e),this.isFree=r,this.isPremium=a,this.isOwned=l,this.receivedAssetPacks=u||[]}return(0,i.Z)(e,[{key:"getPertinence",value:function(e){return this.isFree||this.isPremium||this.isOwned?this.isOwned&&e.prices&&this.receivedAssetPacks.map((function(e){return e.id})).includes(e.id)||this.isPremium&&e.prices||this.isFree&&!e.prices?1:0:1}},{key:"hasFilters",value:function(){return this.isFree||this.isPremium||this.isOwned}}]),e}(),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,o.Z)(this,e),this.mustBeAnimated=t,this.mustHaveSeveralState=n}return(0,i.Z)(e,[{key:"getPertinence",value:function(e){var t=e.maxFramesCount>1,n=e.animationsCount>1;return this.mustBeAnimated&&!t||this.mustHaveSeveralState&&!n?0:1}},{key:"hasFilters",value:function(){return this.mustBeAnimated||this.mustHaveSeveralState}}]),e}(),g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.boundMin,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.boundMax;(0,o.Z)(this,e),this.dimensionMin=t,this.dimensionMax=n}return(0,i.Z)(e,[{key:"getPertinence",value:function(t){return t.width&&t.height?(this.dimensionMin===e.boundMin||this.dimensionMin<=t.width)&&(this.dimensionMin===e.boundMax||t.width<=this.dimensionMax)||(this.dimensionMin===e.boundMin||this.dimensionMin<=t.height)&&(this.dimensionMin===e.boundMax||t.height<=this.dimensionMax)?1:0:1}},{key:"hasFilters",value:function(){return this.dimensionMin!==e.boundMin||this.dimensionMax!==e.boundMax}}]),e}();g.boundMin=8,g.boundMax=2048;var x=function(e,t){var n=(0,c.lC)(e.r,e.g,e.b),r=(0,c.lC)(t.r,t.g,t.b),i=n[1],o=r[1];if(0===i){var a=o-i,s=r[2]-n[2];return 1-(a*a+s*s)/2}var l,u=0===o?1:2*Math.abs(((r[0]-n[0]+.5)%(l=1)+l)%l-.5),d=o-i,p=r[2]-n[2];return 1-(4*u*u+d*d+p*p)/6},m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,o.Z)(this,e),this.color=t}return(0,i.Z)(e,[{key:"getPertinence",value:function(e){var t=this.color;if(!t)return 1;var n,i=Number.MIN_VALUE,o=(0,r.Z)(e.dominantColors);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=(0,c.D6)(a),l=x(s,t);i=Math.max(i,l)}}catch(u){o.e(u)}finally{o.f()}return i}},{key:"hasFilters",value:function(){return!!this.color}}]),e}(),v=function(){function e(t){(0,o.Z)(this,e),this.other=t}return(0,i.Z)(e,[{key:"getPertinence",value:function(e){if(this.other===e||this.other.objectType!==e.objectType)return 0;var t=e.maxFramesCount>1,n=e.animationsCount>1,i=this.other.maxFramesCount>1,o=this.other.animationsCount>1;if(t!==i||n!==o)return 0;var a=e.tags.includes("top-down"),s=e.tags.includes("isometric"),l=e.tags.includes("side view"),u=this.other.tags.includes("top-down"),d=this.other.tags.includes("isometric"),p=this.other.tags.includes("side view");if(!(a&&u||s&&d||l&&p||!a&&!s&&!l&&!u&&!d&&!p))return 0;var f=e.width*e.height,h=this.other.width*this.other.height;if(2*Math.min(f,h)<Math.max(f,h))return 0;var g=e.width/e.height,m=this.other.width/this.other.height;if(1.5*Math.min(g,m)<Math.max(g,m))return 0;var v,b=0,C=(0,r.Z)(e.dominantColors);try{for(C.s();!(v=C.n()).done;){var j,y=v.value,Z=(0,c.D6)(y),k=(0,r.Z)(this.other.dominantColors);try{for(k.s();!(j=k.n()).done;){var w=j.value,T=(0,c.D6)(w),S=x(Z,T);b=Math.max(b,S)}}catch(P){k.e(P)}finally{k.f()}}}catch(P){C.e(P)}finally{C.f()}return b}},{key:"hasFilters",value:function(){return!0}}]),e}()},6901:function(e,t,n){"use strict";n.d(t,{Nh:function(){return l},WY:function(){return s},af:function(){return c}});var r=n(37762),i=function(e){return e.toLowerCase().replace(/\xfc/g,"ue").replace(/\xe4/g,"ae").replace(/\xf6/g,"oe").replace(/\xdf/g,"ss").replace(new RegExp("["+[".","=","-"].join("")+"]","g")," ").replace(/-{2,}/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"").replace(/[^\w ]/gi,"").replace(/[ ]/gi,"-")},o=function(e){return"".concat(i(e.name),"-").concat(i(e.tag))},a=function(e){return e.slice(-36)},s=function(e){var t=e.receivedAssetPacks,n=e.publicAssetPacks,i=e.userFriendlySlug,s=a(i),l=t.find((function(e){return s===e.id}));if(l)return l;var c=function(e,t){var n,i=(0,r.Z)(e.starterPacks);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(o(a)===t)return a}}catch(s){i.e(s)}finally{i.f()}return null}(n,i);return c||null},l=function(e){var t=e.privateAssetPackListingDatas,n=e.userFriendlySlug,r=a(n),i=t.find((function(e){return r===e.id}));return i||null},c=function(e){var t=e.privateGameTemplateListingDatas,n=e.userFriendlySlug,r=a(n),i=t.find((function(e){return r===e.id}));return i||null}},8162:function(e,t,n){"use strict";n.d(t,{N:function(){return b},y:function(){return v}});var r=n(93433),i=n(37762),o=n(74165),a=n(15861),s=n(29439),l=n(28381),c=n(81442),u=n(39126),d=n(82069),p=n(36262),f=n(4900),h=n(29343),g=n.g.gd,x=new Set,m=new Set(["community"]),v=l.createContext({filters:null,searchResults:null,fetchBehaviors:function(){},error:null,searchText:"",setSearchText:function(){},allCategories:[],chosenCategory:"",setChosenCategory:function(){},setInstalledBehaviorMetadataList:function(){},behaviorShortHeadersByType:{},filtersState:{chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},chosenCategory:null,setChosenCategory:function(){}}}),b=function(e){var t=e.children,n=e.defaultSearchText,b=l.useState([]),C=(0,s.Z)(b,2),j=C[0],y=C[1],Z=l.useState({}),k=(0,s.Z)(Z,2),w=k[0],T=k[1],S=l.useContext(p.ZP).values.showCommunityExtensions,P=l.useState([]),E=(0,s.Z)(P,2),I=E[0],M=E[1],L=l.useState(null),A=(0,s.Z)(L,2),F=A[0],O=A[1],R=l.useRef(!1),D=l.useState(n||""),_=(0,s.Z)(D,2),B=_[0],N=_[1],U=l.useState(""),H=(0,s.Z)(U,2),V=H[0],z=H[1],W=(0,c.m)(),G=l.useCallback((function(){Object.keys(w).length||R.current||(0,a.Z)((0,o.Z)().mark((function e(){var t,n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(null),R.current=!0,e.prev=2,e.next=5,(0,u.E)();case 5:t=e.sent,n=t.headers,r={},n.forEach((function(e){r[e.type]=e})),console.info("Loaded ".concat(n?n.length:0," behaviors from the extension store.")),T(r),M(t.views.default.firstIds.map((function(e){var t=e.extensionName,n=e.behaviorName;return g.PlatformExtension.getBehaviorFullType(t,n)}))),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.error("Unable to load the behaviors from the extension store:",e.t0),O(e.t0);case 18:R.current=!1;case 19:case"end":return e.stop()}}),e,null,[[2,14]])})))()}),[w,R]);l.useEffect((function(){if(!Object.keys(w).length&&!R.current){var e=setTimeout((function(){console.info("Pre-fetching behaviors from extension store..."),G()}),f.wi);return function(){return clearTimeout(e)}}}),[G,w,R]);var Y=l.useMemo((function(){var e={};for(var t in w)e[t]=w[t];var n,r=(0,i.Z)(j);try{for(r.s();!(n=r.n()).done;){var o=n.value;e[o.type]=o}}catch(a){r.e(a)}finally{r.f()}return e}),[j,w]),q=l.useMemo((function(){var e=new Set;for(var t in Y)e.add(Y[t].category);return(0,r.Z)(e).sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}))}),[Y]),X=l.useMemo((function(){var e=new Set,t=function(){var t=Y[n];t.tags.forEach((function(n){!S&&t.tier&&m.has(t.tier)||e.add(n)}))};for(var n in Y)t();var i=(0,r.Z)(e).sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}));return{allTags:i,defaultTags:i,tagsTree:[]}}),[Y,S]),K=l.useMemo((function(){return[].concat((0,r.Z)(j.map((function(e){return e.type}))),(0,r.Z)(I))}),[I,j]),J=(0,d.qg)(Y,{searchText:B,chosenItemCategory:V,chosenCategory:W.chosenCategory,chosenFilters:W.chosenFilters,excludedTiers:S?x:m,defaultFirstSearchItemIds:K}),Q=l.useMemo((function(){return{searchResults:J,fetchBehaviors:G,filters:X,allCategories:q,chosenCategory:V,setChosenCategory:z,error:F,searchText:B,setSearchText:N,setInstalledBehaviorMetadataList:y,behaviorShortHeadersByType:w,filtersState:W}}),[J,F,X,q,V,z,B,y,w,W,G]);return(0,h.jsx)(v.Provider,{value:Q,children:t})}},62903:function(e,t,n){"use strict";n.d(t,{q$:function(){return q},_S:function(){return K}});var r=n(74165),i=n(15861),o=n(29439),a=n(28381),s=n(36465),l=n(1413),c=n(36600),u=n(40243),d=n(24910),p=n(61325),f=n(67835),h=n(86278),g=n(1773),x=n(36401),m=n(75383),v=n(78081),b=n(32484),C=n(15859),j=n(1589),y=n(96591),Z=n(2066),k=n(71106),w=n(54458),T=n(21676),S=n(66789),P=n(30268),E=n(65056),I=n(51137),M=n(91),L=n(23883),A=n(29343),F=function(e){var t=e.creditsPackageListingData,n=e.onClose,l=e.onCloseWhenPurchaseSuccessful,d=e.simulateAppStoreProduct,x=a.useContext(k.ZP),m=x.profile,v=x.onOpenLoginDialog,b=x.onOpenCreateAccountDialog,C=x.limits,y=x.onRefreshLimits,F=a.useState(null),O=(0,o.Z)(F,2),R=O[0],D=O[1],_=a.useState(!1),B=(0,o.Z)(_,2),N=B[0],U=B[1],H=a.useState(!1),V=(0,o.Z)(H,2),z=V[0],W=V[1],G=a.useState(!1),Y=(0,o.Z)(G,2),q=Y[0],X=Y[1],K=a.useState(""),J=(0,o.Z)(K,2),Q=J[0],$=J[1],ee=(0,E.Z)().showAlert,te=(0,I.PN)()||d,ne=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}return e.abrupt("return");case 2:if(X(!1),!te){e.next=12;break}return e.prev=4,U(!0),e.next=8,(0,I.ZA)(t.appStoreProductId);case 8:return e.prev=8,U(!1),e.finish(8);case 11:return e.abrupt("return");case 12:return e.prev=12,U(!0),e.next=16,(0,s.RB)({productId:t.id,priceName:t.prices[0].name,userId:m.id,userEmail:m.email,password:Q});case 16:n=e.sent,Z.ZP.openExternalURL(n),e.next=32;break;case 20:if(e.prev=20,e.t0=e.catch(12),!(i=(0,M.T)(e.t0))||403!==i.status||"auth/wrong-password"!==i.code){e.next=28;break}return e.next=26,ee({title:{id:"Operation not allowed"},message:{id:"The password you entered is incorrect. Please try again."}});case 26:e.next=31;break;case 28:return console.error("Unable to get the checkout URL",e.t0),e.next=31,ee({title:{id:"An error happened"},message:{id:"Unable to get the checkout URL. Please try again later."}});case 31:U(!1);case 32:return e.prev=32,$(""),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[4,,8,11],[12,20,32,35]])})));return function(){return e.apply(this,arguments)}}(),re=function(){Z.ZP.isDev()?X(!0):ne()};a.useEffect((function(){re()}),[]),(0,T.Y)((function(){y()}),N?3900:null),a.useEffect((function(){(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C&&null===R&&D(C.credits.userBalance.amount);case 1:case"end":return e.stop()}}),e)})))()}),[C,R]),a.useEffect((function(){null!==R&&C&&N&&(C.credits.userBalance.amount>R&&(U(!1),W(!0)))}),[R,N,z,C]);var ie=m?z?{subtitle:(0,A.jsx)(c.Trans,{id:"Your purchase has been processed!"}),content:(0,A.jsx)(u.x1,{justifyContent:"center",alignItems:"center",children:(0,A.jsx)(h.Z,{children:(0,A.jsx)(c.Trans,{id:"You can now use them across the app!"})})})}:N?{subtitle:te?(0,A.jsx)(c.Trans,{id:"Complete your purchase with the app store."}):(0,A.jsx)(c.Trans,{id:"Complete your payment on the web browser"}),content:te?(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)(p.ak,{justifyContent:"center",alignItems:"center",children:[(0,A.jsx)(S.Z,{size:40}),(0,A.jsx)(h.Z,{children:(0,A.jsx)(c.Trans,{id:"The purchase will be linked to your account once done."})})]})}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(u.x1,{justifyContent:"center",alignItems:"center",children:[(0,A.jsx)(S.Z,{size:20}),(0,A.jsx)(u.LZ,{}),(0,A.jsx)(h.Z,{children:(0,A.jsx)(c.Trans,{id:"Waiting for the purchase confirmation..."})})]}),(0,A.jsx)(u.LZ,{}),(0,A.jsx)(u.x1,{justifyContent:"center",children:(0,A.jsx)(j.Z,{children:(0,A.jsx)(c.Trans,{id:"Once you're done, come back to GDevelop and the credits will be added to your account automatically."})})})]})}:C?{subtitle:(0,A.jsx)(c.Trans,{id:"{0} will be added to your account {1}.",values:{0:t.name,1:m.email}}),content:te?null:(0,A.jsx)(u.x1,{justifyContent:"center",alignItems:"center",children:(0,A.jsx)(h.Z,{children:(0,A.jsx)(c.Trans,{id:"A new secure window will open to complete the purchase."})})})}:{subtitle:(0,A.jsx)(c.Trans,{id:"Loading your profile..."}),content:(0,A.jsx)(u.x1,{justifyContent:"center",alignItems:"center",children:(0,A.jsx)(S.Z,{size:20})})}:{subtitle:(0,A.jsx)(c.Trans,{id:"Log-in to purchase these credits"}),content:(0,A.jsx)(w.Z,{onOpenLoginDialog:v,onOpenCreateAccountDialog:b,message:(0,A.jsx)(c.Trans,{id:"Credits will be linked to your user account. Log-in or sign-up to purchase them!"}),justifyContent:"center"})},oe=m&&!N&&!z&&!!C,ae=[(0,A.jsx)(f.Z,{label:z?(0,A.jsx)(c.Trans,{id:"Close"}):(0,A.jsx)(c.Trans,{id:"Cancel"}),onClick:function(){z&&l(),n()}},"cancel"),oe?(0,A.jsx)(g.vF,{primary:!0,label:(0,A.jsx)(c.Trans,{id:"Continue"}),onClick:re},"continue"):null];return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(g.ZP,{title:t.name,maxWidth:"sm",open:!0,onRequestClose:n,actions:ae,onApply:z?n:re,cannotBeDismissed:!0,flexColumnBody:!0,children:[(0,A.jsxs)(p.pJ,{justifyContent:"center",alignItems:"center",children:[z&&(0,A.jsx)(P.Z,{}),(0,A.jsx)(h.Z,{size:"sub-title",children:ie.subtitle})]}),ie.content]}),q&&(0,A.jsx)(L.Z,{onApply:ne,onClose:function(){return X(!1)},passwordValue:Q,setPasswordValue:$})]})},O=n(78118),R=a.memo((function(e){return(0,A.jsxs)(O.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"63",height:"74",viewBox:"0 0 63 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,A.jsx)("circle",{cx:"31.7268",cy:"38.541",r:"11.3768",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"31.7268",cy:"37.2768",r:"11.3768",fill:"url(#paint0_linear_1959_155)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.727 45.4932C36.2649 45.4932 39.9436 41.8146 39.9436 37.2767C39.9436 32.7388 36.2649 29.0601 31.727 29.0601C27.1891 29.0601 23.5104 32.7388 23.5104 37.2767C23.5104 41.8146 27.1891 45.4932 31.727 45.4932ZM31.727 46.7573C36.963 46.7573 41.2076 42.5127 41.2076 37.2767C41.2076 32.0407 36.963 27.796 31.727 27.796C26.491 27.796 22.2463 32.0407 22.2463 37.2767C22.2463 42.5127 26.491 46.7573 31.727 46.7573Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M39.9432 37.2767C39.9432 31.5883 35.1508 29.4175 33.9388 28.7441C32.7268 28.0707 31.7267 27.796 31.7267 27.796C36.9627 27.796 41.2073 32.0407 41.2073 37.2767C41.2073 42.5127 36.9627 46.7573 31.7267 46.7573C31.7267 46.7573 32.043 46.7522 33.9388 46.1253C35.8347 45.4984 39.9432 41.8146 39.9432 37.2767Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M31.286 41.7013C30.1582 41.7013 29.0724 41.3923 28.1132 40.7194C27.4446 40.2506 26.6708 39.1921 26.6708 37.3975C26.6708 34.0682 28.3491 32.8531 31.7219 32.8531L36.5682 32.8531C36.5682 32.8531 36.7175 32.8453 36.7598 32.8957C36.8131 32.9591 36.7598 33.1089 36.7598 33.1089L36.3037 34.5264C36.3037 34.5264 36.2434 34.6582 36.1807 34.7011C36.1073 34.7514 35.9881 34.7494 35.9881 34.7494H32.1846C29.9585 34.7494 28.6349 34.9253 28.6349 37.3975C28.6349 38.2141 28.8621 38.7953 29.3299 39.1739C30.1204 39.814 31.657 39.8412 32.5959 39.7495C32.5959 39.7495 32.9811 38.4943 33.0446 38.2905C33.1189 38.0517 33.0863 37.9948 32.8545 37.9948C32.5197 37.9948 31.9177 37.9948 31.2788 37.9948C30.8311 37.9948 30.3912 37.7664 30.3912 37.218C30.3912 36.6883 30.8005 36.3809 31.3615 36.3809C32.3328 36.3809 34.3334 36.3809 34.7078 36.3809C35.1987 36.3809 35.6996 36.4522 35.4441 37.2397L34.0905 41.3992C34.0905 41.3992 32.9848 41.7013 31.286 41.7013Z",fill:"#E2A60B"}),(0,A.jsx)("defs",{children:(0,A.jsxs)("linearGradient",{id:"paint0_linear_1959_155",x1:"31.7268",y1:"25.9",x2:"31.7268",y2:"48.6536",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]})})]}))})),D=a.memo((function(e){return(0,A.jsxs)(O.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"64",height:"74",viewBox:"0 0 64 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,A.jsx)("circle",{cx:"20.8768",cy:"48.6405",r:"11.3768",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"20.8768",cy:"47.3761",r:"11.3768",fill:"url(#paint0_linear_1959_189)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.8769 55.5926C25.4148 55.5926 29.0935 51.9139 29.0935 47.376C29.0935 42.8382 25.4148 39.1595 20.8769 39.1595C16.339 39.1595 12.6603 42.8382 12.6603 47.376C12.6603 51.9139 16.339 55.5926 20.8769 55.5926ZM20.8769 56.8567C26.1129 56.8567 30.3575 52.6121 30.3575 47.376C30.3575 42.14 26.1129 37.8954 20.8769 37.8954C15.6409 37.8954 11.3962 42.14 11.3962 47.376C11.3962 52.6121 15.6409 56.8567 20.8769 56.8567Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29.0932 47.376C29.0932 41.6876 24.3007 39.5168 23.0887 38.8435C21.8767 38.1701 20.8766 37.8954 20.8766 37.8954C26.1126 37.8954 30.3572 42.14 30.3572 47.376C30.3572 52.6121 26.1126 56.8567 20.8766 56.8567C20.8766 56.8567 21.1929 56.8515 23.0887 56.2246C24.9846 55.5978 29.0932 51.9139 29.0932 47.376Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M20.4361 51.8006C19.3082 51.8006 18.2224 51.4916 17.2632 50.8187C16.5946 50.3499 15.8208 49.2914 15.8208 47.4968C15.8208 44.1675 17.4991 42.9524 20.8719 42.9524L25.7182 42.9524C25.7182 42.9524 25.8675 42.9446 25.9098 42.995C25.9631 43.0584 25.9098 43.2082 25.9098 43.2082L25.4538 44.6257C25.4538 44.6257 25.3934 44.7575 25.3307 44.8005C25.2574 44.8507 25.1381 44.8487 25.1381 44.8487H21.3347C19.1086 44.8487 17.7849 45.0246 17.7849 47.4968C17.7849 48.3134 18.0122 48.8946 18.4799 49.2732C19.2705 49.9133 20.807 49.9405 21.7459 49.8488C21.7459 49.8488 22.1311 48.5936 22.1946 48.3898C22.2689 48.151 22.2364 48.0941 22.0045 48.0941C21.6697 48.0941 21.0677 48.0941 20.4288 48.0941C19.9811 48.0941 19.5412 47.8657 19.5412 47.3173C19.5412 46.7876 19.9505 46.4802 20.5115 46.4802C21.4828 46.4802 23.4834 46.4802 23.8578 46.4802C24.3487 46.4802 24.8497 46.5515 24.5941 47.339L23.2405 51.4985C23.2405 51.4985 22.1348 51.8006 20.4361 51.8006Z",fill:"#E2A60B"}),(0,A.jsx)("circle",{cx:"42.5233",cy:"23.5445",r:"11.3768",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"42.5233",cy:"22.2803",r:"11.3768",fill:"url(#paint1_linear_1959_189)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M42.5234 30.4968C47.0613 30.4968 50.7399 26.8181 50.7399 22.2802C50.7399 17.7423 47.0613 14.0636 42.5234 14.0636C37.9855 14.0636 34.3068 17.7423 34.3068 22.2802C34.3068 26.8181 37.9855 30.4968 42.5234 30.4968ZM42.5234 31.7609C47.7594 31.7609 52.004 27.5162 52.004 22.2802C52.004 17.0442 47.7594 12.7996 42.5234 12.7996C37.2874 12.7996 33.0427 17.0442 33.0427 22.2802C33.0427 27.5162 37.2874 31.7609 42.5234 31.7609Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M50.7398 22.2802C50.7398 16.5918 45.9473 14.421 44.7353 13.7476C43.5234 13.0742 42.5232 12.7996 42.5232 12.7996C47.7592 12.7996 52.0038 17.0442 52.0038 22.2802C52.0038 27.5162 47.7592 31.7609 42.5232 31.7609C42.5232 31.7609 42.8395 31.7557 44.7353 31.1288C46.6312 30.502 50.7398 26.8181 50.7398 22.2802Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M42.0825 26.7048C40.9547 26.7048 39.8689 26.3958 38.9097 25.723C38.2411 25.2542 37.4673 24.1956 37.4673 22.401C37.4673 19.0717 39.1456 17.8566 42.5184 17.8566L47.3647 17.8566C47.3647 17.8566 47.514 17.8489 47.5563 17.8992C47.6096 17.9626 47.5563 18.1124 47.5563 18.1124L47.1002 19.5299C47.1002 19.5299 47.0399 19.6617 46.9772 19.7047C46.9038 19.755 46.7846 19.7529 46.7846 19.7529H42.9811C40.755 19.7529 39.4314 19.9288 39.4314 22.401C39.4314 23.2177 39.6586 23.7988 40.1264 24.1775C40.9169 24.8175 42.4535 24.8447 43.3924 24.753C43.3924 24.753 43.7776 23.4978 43.8411 23.2941C43.9154 23.0553 43.8828 22.9983 43.651 22.9983C43.3162 22.9983 42.7142 22.9983 42.0753 22.9983C41.6276 22.9983 41.1877 22.77 41.1877 22.2215C41.1877 21.6919 41.597 21.3845 42.158 21.3845C43.1293 21.3845 45.1299 21.3845 45.5043 21.3845C45.9952 21.3845 46.4962 21.4558 46.2406 22.2432L44.887 26.4028C44.887 26.4028 43.7813 26.7048 42.0825 26.7048Z",fill:"#E2A60B"}),(0,A.jsxs)("defs",{children:[(0,A.jsxs)("linearGradient",{id:"paint0_linear_1959_189",x1:"20.8768",y1:"35.9993",x2:"20.8768",y2:"58.7529",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,A.jsxs)("linearGradient",{id:"paint1_linear_1959_189",x1:"42.5233",y1:"10.9036",x2:"42.5233",y2:"33.6571",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]})]})]}))})),_=a.memo((function(e){return(0,A.jsxs)(O.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"64",height:"74",viewBox:"0 0 64 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,A.jsx)("circle",{cx:"30.8266",cy:"21.3643",r:"10.9028",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"30.8266",cy:"20.1528",r:"10.9028",fill:"url(#paint0_linear_1959_217)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M30.8267 28.0269C35.1755 28.0269 38.7009 24.5014 38.7009 20.1526C38.7009 15.8038 35.1755 12.2784 30.8267 12.2784C26.4779 12.2784 22.9525 15.8038 22.9525 20.1526C22.9525 24.5014 26.4779 28.0269 30.8267 28.0269ZM30.8267 29.2383C35.8446 29.2383 39.9123 25.1705 39.9123 20.1526C39.9123 15.1348 35.8446 11.067 30.8267 11.067C25.8089 11.067 21.7411 15.1348 21.7411 20.1526C21.7411 25.1705 25.8089 29.2383 30.8267 29.2383Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.7006 20.1526C38.7006 14.7013 34.1079 12.6209 32.9464 11.9756C31.7849 11.3303 30.8264 11.067 30.8264 11.067C35.8443 11.067 39.912 15.1348 39.912 20.1526C39.912 25.1705 35.8443 29.2383 30.8264 29.2383C30.8264 29.2383 31.1296 29.2333 32.9464 28.6326C34.7632 28.0318 38.7006 24.5014 38.7006 20.1526Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M30.4043 24.3928C29.3234 24.3928 28.2829 24.0966 27.3636 23.4518C26.7229 23.0026 25.9813 21.9881 25.9813 20.2683C25.9813 17.0777 27.5897 15.9133 30.822 15.9133L35.4663 15.9133C35.4663 15.9133 35.6094 15.9058 35.65 15.9541C35.701 16.0148 35.65 16.1584 35.65 16.1584L35.2129 17.5168C35.2129 17.5168 35.155 17.6431 35.095 17.6843C35.0247 17.7325 34.9104 17.7305 34.9104 17.7305H31.2654C29.1321 17.7305 27.8636 17.8991 27.8636 20.2683C27.8636 21.0509 28.0814 21.6078 28.5296 21.9707C29.2872 22.5841 30.7598 22.6102 31.6596 22.5223C31.6596 22.5223 32.0287 21.3194 32.0895 21.1241C32.1607 20.8953 32.1296 20.8407 31.9074 20.8407C31.5865 20.8407 31.0096 20.8407 30.3974 20.8407C29.9683 20.8407 29.5467 20.6219 29.5467 20.0963C29.5467 19.5887 29.9389 19.2941 30.4766 19.2941C31.4074 19.2941 33.3247 19.2941 33.6835 19.2941C34.1539 19.2941 34.634 19.3624 34.3891 20.1171L33.0919 24.1033C33.0919 24.1033 32.0322 24.3928 30.4043 24.3928Z",fill:"#E2A60B"}),(0,A.jsx)("circle",{cx:"16.8028",cy:"51.3587",r:"10.9028",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"16.8028",cy:"50.1473",r:"10.9028",fill:"url(#paint1_linear_1959_217)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.8029 58.0214C21.1517 58.0214 24.6771 54.496 24.6771 50.1471C24.6771 45.7983 21.1517 42.2729 16.8029 42.2729C12.4541 42.2729 8.9287 45.7983 8.9287 50.1471C8.9287 54.496 12.4541 58.0214 16.8029 58.0214ZM16.8029 59.2328C21.8208 59.2328 25.8885 55.165 25.8885 50.1471C25.8885 45.1293 21.8208 41.0615 16.8029 41.0615C11.7851 41.0615 7.71729 45.1293 7.71729 50.1471C7.71729 55.165 11.7851 59.2328 16.8029 59.2328Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.6768 50.1472C24.6768 44.6958 20.0841 42.6154 18.9226 41.9701C17.7611 41.3248 16.8026 41.0615 16.8026 41.0615C21.8205 41.0615 25.8882 45.1293 25.8882 50.1472C25.8882 55.165 21.8205 59.2328 16.8026 59.2328C16.8026 59.2328 17.1058 59.2278 18.9226 58.6271C20.7394 58.0263 24.6768 54.496 24.6768 50.1472Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M16.3804 54.3873C15.2995 54.3873 14.2589 54.0912 13.3397 53.4464C12.699 52.9971 11.9574 51.9827 11.9574 50.2629C11.9574 47.0723 13.5658 45.9078 16.7981 45.9078L21.4424 45.9078C21.4424 45.9078 21.5855 45.9004 21.626 45.9486C21.6771 46.0094 21.626 46.153 21.626 46.153L21.189 47.5114C21.189 47.5114 21.1311 47.6377 21.0711 47.6789C21.0008 47.7271 20.8865 47.7251 20.8865 47.7251H17.2415C15.1082 47.7251 13.8397 47.8937 13.8397 50.2629C13.8397 51.0455 14.0574 51.6024 14.5057 51.9653C15.2633 52.5787 16.7359 52.6048 17.6356 52.5169C17.6356 52.5169 18.0048 51.314 18.0656 51.1187C18.1368 50.8899 18.1056 50.8353 17.8835 50.8353C17.5626 50.8353 16.9857 50.8353 16.3734 50.8353C15.9444 50.8353 15.5228 50.6164 15.5228 50.0909C15.5228 49.5833 15.915 49.2887 16.4526 49.2887C17.3835 49.2887 19.3007 49.2887 19.6596 49.2887C20.13 49.2887 20.6101 49.357 20.3651 50.1116L19.068 54.0979C19.068 54.0979 18.0083 54.3873 16.3804 54.3873Z",fill:"#E2A60B"}),(0,A.jsx)("circle",{cx:"46.7973",cy:"51.3587",r:"10.9028",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"46.7973",cy:"50.1473",r:"10.9028",fill:"url(#paint2_linear_1959_217)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M46.7974 58.0214C51.1462 58.0214 54.6716 54.496 54.6716 50.1471C54.6716 45.7983 51.1462 42.2729 46.7974 42.2729C42.4486 42.2729 38.9232 45.7983 38.9232 50.1471C38.9232 54.496 42.4486 58.0214 46.7974 58.0214ZM46.7974 59.2328C51.8153 59.2328 55.883 55.165 55.883 50.1471C55.883 45.1293 51.8153 41.0615 46.7974 41.0615C41.7796 41.0615 37.7118 45.1293 37.7118 50.1471C37.7118 55.165 41.7796 59.2328 46.7974 59.2328Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M54.6713 50.1472C54.6713 44.6958 50.0786 42.6154 48.9171 41.9701C47.7556 41.3248 46.7971 41.0615 46.7971 41.0615C51.815 41.0615 55.8827 45.1293 55.8827 50.1472C55.8827 55.165 51.815 59.2328 46.7971 59.2328C46.7971 59.2328 47.1003 59.2278 48.9171 58.6271C50.7339 58.0263 54.6713 54.496 54.6713 50.1472Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M46.3749 54.3873C45.294 54.3873 44.2534 54.0912 43.3342 53.4464C42.6935 52.9971 41.9519 51.9827 41.9519 50.2629C41.9519 47.0723 43.5603 45.9078 46.7926 45.9078L51.4369 45.9078C51.4369 45.9078 51.58 45.9004 51.6205 45.9486C51.6716 46.0094 51.6205 46.153 51.6205 46.153L51.1835 47.5114C51.1835 47.5114 51.1256 47.6377 51.0656 47.6789C50.9953 47.7271 50.881 47.7251 50.881 47.7251H47.236C45.1027 47.7251 43.8342 47.8937 43.8342 50.2629C43.8342 51.0455 44.052 51.6024 44.5002 51.9653C45.2578 52.5787 46.7304 52.6048 47.6301 52.5169C47.6301 52.5169 47.9993 51.314 48.0601 51.1187C48.1313 50.8899 48.1001 50.8353 47.878 50.8353C47.5571 50.8353 46.9802 50.8353 46.3679 50.8353C45.9389 50.8353 45.5173 50.6164 45.5173 50.0909C45.5173 49.5833 45.9095 49.2887 46.4471 49.2887C47.378 49.2887 49.2952 49.2887 49.6541 49.2887C50.1245 49.2887 50.6046 49.357 50.3596 50.1116L49.0625 54.0979C49.0625 54.0979 48.0028 54.3873 46.3749 54.3873Z",fill:"#E2A60B"}),(0,A.jsxs)("defs",{children:[(0,A.jsxs)("linearGradient",{id:"paint0_linear_1959_217",x1:"30.8266",y1:"9.25",x2:"30.8266",y2:"31.0555",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,A.jsxs)("linearGradient",{id:"paint1_linear_1959_217",x1:"16.8028",y1:"39.2445",x2:"16.8028",y2:"61.05",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,A.jsxs)("linearGradient",{id:"paint2_linear_1959_217",x1:"46.7973",y1:"39.2445",x2:"46.7973",y2:"61.05",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]})]})]}))})),B=a.memo((function(e){return(0,A.jsxs)(O.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"64",height:"74",viewBox:"0 0 64 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,A.jsx)("circle",{cx:"17.5528",cy:"21.3643",r:"10.9028",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"17.5528",cy:"20.1528",r:"10.9028",fill:"url(#paint0_linear_1982_12)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.5529 28.0269C21.9017 28.0269 25.4271 24.5014 25.4271 20.1526C25.4271 15.8038 21.9017 12.2784 17.5529 12.2784C13.2041 12.2784 9.6787 15.8038 9.6787 20.1526C9.6787 24.5014 13.2041 28.0269 17.5529 28.0269ZM17.5529 29.2383C22.5708 29.2383 26.6385 25.1705 26.6385 20.1526C26.6385 15.1348 22.5708 11.067 17.5529 11.067C12.5351 11.067 8.46729 15.1348 8.46729 20.1526C8.46729 25.1705 12.5351 29.2383 17.5529 29.2383Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.4268 20.1526C25.4268 14.7013 20.8341 12.6209 19.6726 11.9756C18.5111 11.3303 17.5526 11.067 17.5526 11.067C22.5705 11.067 26.6382 15.1348 26.6382 20.1526C26.6382 25.1705 22.5705 29.2383 17.5526 29.2383C17.5526 29.2383 17.8558 29.2333 19.6726 28.6326C21.4894 28.0318 25.4268 24.5014 25.4268 20.1526Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M17.1305 24.3928C16.0496 24.3928 15.0091 24.0966 14.0898 23.4518C13.4491 23.0026 12.7075 21.9881 12.7075 20.2683C12.7075 17.0777 14.3159 15.9133 17.5482 15.9133L22.1925 15.9133C22.1925 15.9133 22.3356 15.9058 22.3762 15.9541C22.4272 16.0148 22.3762 16.1584 22.3762 16.1584L21.9391 17.5168C21.9391 17.5168 21.8812 17.6431 21.8212 17.6843C21.7509 17.7325 21.6366 17.7305 21.6366 17.7305H17.9916C15.8583 17.7305 14.5898 17.8991 14.5898 20.2683C14.5898 21.0509 14.8076 21.6078 15.2558 21.9707C16.0134 22.5841 17.486 22.6102 18.3858 22.5223C18.3858 22.5223 18.7549 21.3194 18.8157 21.1241C18.8869 20.8953 18.8558 20.8407 18.6336 20.8407C18.3127 20.8407 17.7358 20.8407 17.1236 20.8407C16.6945 20.8407 16.2729 20.6219 16.2729 20.0963C16.2729 19.5887 16.6651 19.2941 17.2028 19.2941C18.1336 19.2941 20.0509 19.2941 20.4097 19.2941C20.8801 19.2941 21.3602 19.3624 21.1152 20.1171L19.8181 24.1033C19.8181 24.1033 18.7584 24.3928 17.1305 24.3928Z",fill:"#E2A60B"}),(0,A.jsx)("circle",{cx:"17.1028",cy:"51.3587",r:"10.9028",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"17.1028",cy:"50.1473",r:"10.9028",fill:"url(#paint1_linear_1982_12)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.103 58.0214C21.4518 58.0214 24.9772 54.496 24.9772 50.1471C24.9772 45.7983 21.4518 42.2729 17.103 42.2729C12.7542 42.2729 9.22875 45.7983 9.22875 50.1471C9.22875 54.496 12.7542 58.0214 17.103 58.0214ZM17.103 59.2328C22.1208 59.2328 26.1886 55.165 26.1886 50.1471C26.1886 45.1293 22.1208 41.0615 17.103 41.0615C12.0851 41.0615 8.01733 45.1293 8.01733 50.1471C8.01733 55.165 12.0851 59.2328 17.103 59.2328Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.9769 50.1471C24.9769 44.6958 20.3841 42.6154 19.2226 41.9701C18.0611 41.3248 17.1027 41.0615 17.1027 41.0615C22.1205 41.0615 26.1883 45.1293 26.1883 50.1471C26.1883 55.165 22.1205 59.2328 17.1027 59.2328C17.1027 59.2328 17.4058 59.2278 19.2226 58.6271C21.0395 58.0263 24.9769 54.496 24.9769 50.1471Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M16.6804 54.3873C15.5995 54.3873 14.559 54.0912 13.6398 53.4464C12.999 52.9971 12.2574 51.9827 12.2574 50.2629C12.2574 47.0723 13.8659 45.9078 17.0981 45.9078L21.7425 45.9078C21.7425 45.9078 21.8855 45.9004 21.9261 45.9486C21.9771 46.0094 21.9261 46.153 21.9261 46.153L21.489 47.5114C21.489 47.5114 21.4312 47.6377 21.3711 47.6789C21.3008 47.7271 21.1865 47.7251 21.1865 47.7251H17.5416C15.4082 47.7251 14.1397 47.8937 14.1397 50.2629C14.1397 51.0455 14.3575 51.6024 14.8058 51.9653C15.5634 52.5787 17.0359 52.6048 17.9357 52.5169C17.9357 52.5169 18.3049 51.314 18.3657 51.1187C18.4369 50.8899 18.4057 50.8353 18.1835 50.8353C17.8626 50.8353 17.2858 50.8353 16.6735 50.8353C16.2444 50.8353 15.8229 50.6164 15.8229 50.0909C15.8229 49.5833 16.2151 49.2887 16.7527 49.2887C17.6836 49.2887 19.6008 49.2887 19.9596 49.2887C20.43 49.2887 20.9101 49.357 20.6652 50.1116L19.368 54.0979C19.368 54.0979 18.3084 54.3873 16.6804 54.3873Z",fill:"#E2A60B"}),(0,A.jsx)("circle",{cx:"47.0973",cy:"51.3587",r:"10.9028",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"47.0973",cy:"50.1473",r:"10.9028",fill:"url(#paint2_linear_1982_12)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M47.0975 58.0214C51.4463 58.0214 54.9717 54.496 54.9717 50.1471C54.9717 45.7983 51.4463 42.2729 47.0975 42.2729C42.7487 42.2729 39.2233 45.7983 39.2233 50.1471C39.2233 54.496 42.7487 58.0214 47.0975 58.0214ZM47.0975 59.2328C52.1153 59.2328 56.1831 55.165 56.1831 50.1471C56.1831 45.1293 52.1153 41.0615 47.0975 41.0615C42.0796 41.0615 38.0118 45.1293 38.0118 50.1471C38.0118 55.165 42.0796 59.2328 47.0975 59.2328Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M54.9714 50.1471C54.9714 44.6958 50.3786 42.6154 49.2171 41.9701C48.0557 41.3248 47.0972 41.0615 47.0972 41.0615C52.115 41.0615 56.1828 45.1293 56.1828 50.1471C56.1828 55.165 52.115 59.2328 47.0972 59.2328C47.0972 59.2328 47.4003 59.2278 49.2171 58.6271C51.034 58.0263 54.9714 54.496 54.9714 50.1471Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M46.6749 54.3873C45.5941 54.3873 44.5535 54.0912 43.6343 53.4464C42.9935 52.9971 42.252 51.9827 42.252 50.2629C42.252 47.0723 43.8604 45.9078 47.0926 45.9078L51.737 45.9078C51.737 45.9078 51.88 45.9004 51.9206 45.9486C51.9717 46.0094 51.9206 46.153 51.9206 46.153L51.4835 47.5114C51.4835 47.5114 51.4257 47.6377 51.3656 47.6789C51.2953 47.7271 51.181 47.7251 51.181 47.7251H47.5361C45.4027 47.7251 44.1342 47.8937 44.1342 50.2629C44.1342 51.0455 44.352 51.6024 44.8003 51.9653C45.5579 52.5787 47.0304 52.6048 47.9302 52.5169C47.9302 52.5169 48.2994 51.314 48.3602 51.1187C48.4314 50.8899 48.4002 50.8353 48.178 50.8353C47.8571 50.8353 47.2803 50.8353 46.668 50.8353C46.2389 50.8353 45.8174 50.6164 45.8174 50.0909C45.8174 49.5833 46.2096 49.2887 46.7472 49.2887C47.6781 49.2887 49.5953 49.2887 49.9541 49.2887C50.4246 49.2887 50.9046 49.357 50.6597 50.1116L49.3625 54.0979C49.3625 54.0979 48.3029 54.3873 46.6749 54.3873Z",fill:"#E2A60B"}),(0,A.jsx)("circle",{cx:"46.0973",cy:"21.1142",r:"10.9028",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"46.0973",cy:"19.9028",r:"10.9028",fill:"url(#paint3_linear_1982_12)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M46.0975 27.7769C50.4463 27.7769 53.9717 24.2514 53.9717 19.9026C53.9717 15.5538 50.4463 12.0284 46.0975 12.0284C41.7487 12.0284 38.2233 15.5538 38.2233 19.9026C38.2233 24.2514 41.7487 27.7769 46.0975 27.7769ZM46.0975 28.9883C51.1153 28.9883 55.1831 24.9205 55.1831 19.9026C55.1831 14.8848 51.1153 10.817 46.0975 10.817C41.0796 10.817 37.0118 14.8848 37.0118 19.9026C37.0118 24.9205 41.0796 28.9883 46.0975 28.9883Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M53.9714 19.9026C53.9714 14.4513 49.3786 12.3709 48.2171 11.7256C47.0557 11.0803 46.0972 10.817 46.0972 10.817C51.115 10.817 55.1828 14.8848 55.1828 19.9026C55.1828 24.9205 51.115 28.9883 46.0972 28.9883C46.0972 28.9883 46.4003 28.9833 48.2171 28.3826C50.034 27.7818 53.9714 24.2514 53.9714 19.9026Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M45.6749 24.1429C44.5941 24.1429 43.5535 23.8467 42.6343 23.2019C41.9935 22.7527 41.252 21.7382 41.252 20.0184C41.252 16.8278 42.8604 15.6634 46.0926 15.6634L50.737 15.6634C50.737 15.6634 50.88 15.656 50.9206 15.7042C50.9717 15.7649 50.9206 15.9085 50.9206 15.9085L50.4835 17.2669C50.4835 17.2669 50.4257 17.3932 50.3656 17.4344C50.2953 17.4826 50.181 17.4806 50.181 17.4806H46.5361C44.4027 17.4806 43.1342 17.6492 43.1342 20.0184C43.1342 20.801 43.352 21.358 43.8003 21.7208C44.5579 22.3342 46.0304 22.3603 46.9302 22.2724C46.9302 22.2724 47.2994 21.0695 47.3602 20.8743C47.4314 20.6454 47.4002 20.5908 47.178 20.5908C46.8571 20.5908 46.2803 20.5908 45.668 20.5908C45.2389 20.5908 44.8174 20.372 44.8174 19.8464C44.8174 19.3388 45.2096 19.0442 45.7472 19.0442C46.6781 19.0442 48.5953 19.0442 48.9541 19.0442C49.4246 19.0442 49.9046 19.1126 49.6597 19.8672L48.3625 23.8534C48.3625 23.8534 47.3029 24.1429 45.6749 24.1429Z",fill:"#E2A60B"}),(0,A.jsxs)("defs",{children:[(0,A.jsxs)("linearGradient",{id:"paint0_linear_1982_12",x1:"17.5528",y1:"9.25",x2:"17.5528",y2:"31.0555",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,A.jsxs)("linearGradient",{id:"paint1_linear_1982_12",x1:"17.1028",y1:"39.2445",x2:"17.1028",y2:"61.05",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,A.jsxs)("linearGradient",{id:"paint2_linear_1982_12",x1:"47.0973",y1:"39.2445",x2:"47.0973",y2:"61.05",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,A.jsxs)("linearGradient",{id:"paint3_linear_1982_12",x1:"46.0973",y1:"9",x2:"46.0973",y2:"30.8055",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]})]})]}))})),N=a.memo((function(e){return(0,A.jsxs)(O.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"64",height:"74",viewBox:"0 0 64 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,A.jsx)("circle",{cx:"14.2842",cy:"16.3522",r:"10.0103",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"14.2842",cy:"15.2397",r:"10.0103",fill:"url(#paint0_linear_1982_56)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.2844 22.4694C18.2772 22.4694 21.5141 19.2326 21.5141 15.2397C21.5141 11.2469 18.2772 8.01008 14.2844 8.01008C10.2916 8.01008 7.05476 11.2469 7.05476 15.2397C7.05476 19.2326 10.2916 22.4694 14.2844 22.4694ZM14.2844 23.5816C18.8915 23.5816 22.6263 19.8468 22.6263 15.2397C22.6263 10.6326 18.8915 6.89783 14.2844 6.89783C9.6773 6.89783 5.9425 10.6326 5.9425 15.2397C5.9425 19.8468 9.6773 23.5816 14.2844 23.5816Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.5138 15.2397C21.5138 10.2346 17.297 8.32452 16.2306 7.73202C15.1642 7.13952 14.2842 6.89783 14.2842 6.89783C18.8913 6.89783 22.6261 10.6326 22.6261 15.2397C22.6261 19.8468 18.8913 23.5816 14.2842 23.5816C14.2842 23.5816 14.5625 23.5771 16.2306 23.0255C17.8987 22.4739 21.5138 19.2326 21.5138 15.2397Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M13.8967 19.1327C12.9043 19.1327 11.949 18.8608 11.105 18.2688C10.5167 17.8563 9.83582 16.9249 9.83582 15.3459C9.83582 12.4164 11.3126 11.3473 14.2802 11.3473L18.5444 11.3473C18.5444 11.3473 18.6758 11.3405 18.713 11.3848C18.7599 11.4405 18.713 11.5724 18.713 11.5724L18.3117 12.8196C18.3117 12.8196 18.2586 12.9356 18.2035 12.9734C18.1389 13.0176 18.034 13.0158 18.034 13.0158H14.6874C12.7287 13.0158 11.564 13.1706 11.564 15.3459C11.564 16.0644 11.764 16.5757 12.1755 16.9089C12.8711 17.4721 14.2231 17.4961 15.0493 17.4154C15.0493 17.4154 15.3882 16.3109 15.444 16.1316C15.5094 15.9215 15.4808 15.8714 15.2768 15.8714C14.9822 15.8714 14.4525 15.8714 13.8904 15.8714C13.4964 15.8714 13.1094 15.6705 13.1094 15.1879C13.1094 14.7219 13.4695 14.4514 13.9631 14.4514C14.8178 14.4514 16.578 14.4514 16.9075 14.4514C17.3394 14.4514 17.7802 14.5141 17.5553 15.207L16.3643 18.8669C16.3643 18.8669 15.3914 19.1327 13.8967 19.1327Z",fill:"#E2A60B"}),(0,A.jsx)("circle",{cx:"13.8712",cy:"58.9897",r:"10.0103",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"13.8712",cy:"57.8774",r:"10.0103",fill:"url(#paint1_linear_1982_56)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.8713 65.107C17.8641 65.107 21.101 61.8701 21.101 57.8773C21.101 53.8845 17.8641 50.6477 13.8713 50.6477C9.8785 50.6477 6.64167 53.8845 6.64167 57.8773C6.64167 61.8701 9.8785 65.107 13.8713 65.107ZM13.8713 66.2192C18.4784 66.2192 22.2132 62.4844 22.2132 57.8773C22.2132 53.2702 18.4784 49.5354 13.8713 49.5354C9.26422 49.5354 5.52942 53.2702 5.52942 57.8773C5.52942 62.4844 9.26422 66.2192 13.8713 66.2192Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.1006 57.8773C21.1006 52.8722 16.8838 50.9621 15.8174 50.3696C14.751 49.7771 13.871 49.5354 13.871 49.5354C18.4781 49.5354 22.2129 53.2702 22.2129 57.8773C22.2129 62.4844 18.4781 66.2192 13.871 66.2192C13.871 66.2192 14.1493 66.2147 15.8174 65.6631C17.4855 65.1115 21.1006 61.8701 21.1006 57.8773Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M13.4834 61.7703C12.491 61.7703 11.5356 61.4984 10.6916 60.9064C10.1034 60.4939 9.42249 59.5625 9.42249 57.9835C9.42249 55.0541 10.8992 53.9849 13.8669 53.9849L18.1311 53.9849C18.1311 53.9849 18.2624 53.9781 18.2997 54.0224C18.3466 54.0782 18.2997 54.21 18.2997 54.21L17.8984 55.4572C17.8984 55.4572 17.8453 55.5732 17.7901 55.611C17.7256 55.6553 17.6207 55.6534 17.6207 55.6534H14.2741C12.3153 55.6534 11.1507 55.8082 11.1507 57.9835C11.1507 58.702 11.3506 59.2134 11.7622 59.5466C12.4578 60.1097 13.8098 60.1337 14.6359 60.053C14.6359 60.053 14.9749 58.9486 15.0307 58.7693C15.0961 58.5592 15.0674 58.509 14.8635 58.509C14.5688 58.509 14.0392 58.509 13.477 58.509C13.0831 58.509 12.696 58.3081 12.696 57.8256C12.696 57.3595 13.0561 57.089 13.5498 57.089C14.4044 57.089 16.1647 57.089 16.4942 57.089C16.9261 57.089 17.3669 57.1518 17.142 57.8446L15.951 61.5046C15.951 61.5046 14.9781 61.7703 13.4834 61.7703Z",fill:"#E2A60B"}),(0,A.jsx)("circle",{cx:"50.2178",cy:"58.9897",r:"10.0103",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"50.2178",cy:"57.8774",r:"10.0103",fill:"url(#paint2_linear_1982_56)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M50.2179 65.107C54.2107 65.107 57.4475 61.8701 57.4475 57.8773C57.4475 53.8845 54.2107 50.6477 50.2179 50.6477C46.2251 50.6477 42.9882 53.8845 42.9882 57.8773C42.9882 61.8701 46.2251 65.107 50.2179 65.107ZM50.2179 66.2192C54.825 66.2192 58.5598 62.4844 58.5598 57.8773C58.5598 53.2702 54.825 49.5354 50.2179 49.5354C45.6108 49.5354 41.876 53.2702 41.876 57.8773C41.876 62.4844 45.6108 66.2192 50.2179 66.2192Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M57.4474 57.8773C57.4474 52.8722 53.2306 50.9621 52.1642 50.3696C51.0978 49.7771 50.2178 49.5354 50.2178 49.5354C54.8249 49.5354 58.5597 53.2702 58.5597 57.8773C58.5597 62.4844 54.8249 66.2192 50.2178 66.2192C50.2178 66.2192 50.4961 66.2147 52.1642 65.6631C53.8323 65.1115 57.4474 61.8701 57.4474 57.8773Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M49.83 61.7703C48.8376 61.7703 47.8822 61.4984 47.0382 60.9064C46.4499 60.4939 45.769 59.5625 45.769 57.9835C45.769 55.0541 47.2458 53.9849 50.2135 53.9849L54.4776 53.9849C54.4776 53.9849 54.609 53.9781 54.6462 54.0224C54.6931 54.0782 54.6462 54.21 54.6462 54.21L54.245 55.4572C54.245 55.4572 54.1918 55.5732 54.1367 55.611C54.0721 55.6553 53.9672 55.6534 53.9672 55.6534H50.6206C48.6619 55.6534 47.4972 55.8082 47.4972 57.9835C47.4972 58.702 47.6972 59.2134 48.1088 59.5466C48.8044 60.1097 50.1564 60.1337 50.9825 60.053C50.9825 60.053 51.3214 58.9486 51.3772 58.7693C51.4426 58.5592 51.414 58.509 51.21 58.509C50.9154 58.509 50.3857 58.509 49.8236 58.509C49.4296 58.509 49.0426 58.3081 49.0426 57.8256C49.0426 57.3595 49.4027 57.089 49.8963 57.089C50.751 57.089 52.5113 57.089 52.8407 57.089C53.2727 57.089 53.7134 57.1518 53.4885 57.8446L52.2976 61.5046C52.2976 61.5046 51.3246 61.7703 49.83 61.7703Z",fill:"#E2A60B"}),(0,A.jsx)("circle",{cx:"49.2998",cy:"16.1223",r:"10.0103",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"49.2998",cy:"15.0103",r:"10.0103",fill:"url(#paint3_linear_1982_56)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M49.2998 22.2399C53.2926 22.2399 56.5294 19.0031 56.5294 15.0102C56.5294 11.0174 53.2926 7.78059 49.2998 7.78059C45.307 7.78059 42.0701 11.0174 42.0701 15.0102C42.0701 19.0031 45.307 22.2399 49.2998 22.2399ZM49.2998 23.3521C53.9069 23.3521 57.6417 19.6173 57.6417 15.0102C57.6417 10.4031 53.9069 6.66833 49.2998 6.66833C44.6927 6.66833 40.9579 10.4031 40.9579 15.0102C40.9579 19.6173 44.6927 23.3521 49.2998 23.3521Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M56.5291 15.0102C56.5291 10.0051 52.3123 8.09503 51.2459 7.50253C50.1795 6.91002 49.2994 6.66833 49.2994 6.66833C53.9065 6.66833 57.6413 10.4031 57.6413 15.0102C57.6413 19.6173 53.9065 23.3521 49.2994 23.3521C49.2994 23.3521 49.5778 23.3476 51.2459 22.796C52.914 22.2444 56.5291 19.0031 56.5291 15.0102Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M48.9119 18.9032C47.9195 18.9032 46.9641 18.6313 46.1201 18.0393C45.5318 17.6268 44.851 16.6954 44.851 15.1164C44.851 12.187 46.3277 11.1178 49.2954 11.1178L53.5596 11.1178C53.5596 11.1178 53.6909 11.111 53.7281 11.1553C53.775 11.2111 53.7281 11.3429 53.7281 11.3429L53.3269 12.5901C53.3269 12.5901 53.2737 12.7061 53.2186 12.7439C53.1541 12.7881 53.0491 12.7863 53.0491 12.7863H49.7025C47.7438 12.7863 46.5791 12.9411 46.5791 15.1164C46.5791 15.8349 46.7791 16.3462 47.1907 16.6794C47.8863 17.2426 49.2383 17.2666 50.0644 17.1859C50.0644 17.1859 50.4033 16.0814 50.4592 15.9021C50.5245 15.692 50.4959 15.6419 50.2919 15.6419C49.9973 15.6419 49.4677 15.6419 48.9055 15.6419C48.5115 15.6419 48.1245 15.441 48.1245 14.9584C48.1245 14.4924 48.4846 14.2219 48.9782 14.2219C49.8329 14.2219 51.5932 14.2219 51.9226 14.2219C52.3546 14.2219 52.7953 14.2847 52.5704 14.9775L51.3795 18.6374C51.3795 18.6374 50.4066 18.9032 48.9119 18.9032Z",fill:"#E2A60B"}),(0,A.jsx)("circle",{cx:"32.4925",cy:"37.2631",r:"10.0103",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"32.4925",cy:"36.151",r:"10.0103",fill:"url(#paint4_linear_1982_56)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32.4924 43.3806C36.4852 43.3806 39.7221 40.1438 39.7221 36.151C39.7221 32.1582 36.4852 28.9213 32.4924 28.9213C28.4996 28.9213 25.2628 32.1582 25.2628 36.151C25.2628 40.1438 28.4996 43.3806 32.4924 43.3806ZM32.4924 44.4929C37.0995 44.4929 40.8343 40.7581 40.8343 36.151C40.8343 31.5439 37.0995 27.8091 32.4924 27.8091C27.8853 27.8091 24.1505 31.5439 24.1505 36.151C24.1505 40.7581 27.8853 44.4929 32.4924 44.4929Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M39.7217 36.151C39.7217 31.1458 35.5049 29.2358 34.4385 28.6433C33.3721 28.0508 32.4921 27.8091 32.4921 27.8091C37.0992 27.8091 40.834 31.5439 40.834 36.151C40.834 40.7581 37.0992 44.4929 32.4921 44.4929C32.4921 44.4929 32.7704 44.4883 34.4385 43.9368C36.1066 43.3852 39.7217 40.1438 39.7217 36.151Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M32.1044 40.044C31.112 40.044 30.1566 39.7721 29.3126 39.1801C28.7243 38.7676 28.0435 37.8362 28.0435 36.2572C28.0435 33.3278 29.5202 32.2586 32.4879 32.2586L36.7521 32.2586C36.7521 32.2586 36.8834 32.2518 36.9207 32.2961C36.9675 32.3519 36.9207 32.4837 36.9207 32.4837L36.5194 33.7309C36.5194 33.7309 36.4662 33.8469 36.4111 33.8847C36.3466 33.929 36.2416 33.9271 36.2416 33.9271H32.895C30.9363 33.9271 29.7716 34.0819 29.7716 36.2572C29.7716 36.9757 29.9716 37.4871 30.3832 37.8202C31.0788 38.3834 32.4308 38.4074 33.2569 38.3267C33.2569 38.3267 33.5958 37.2223 33.6517 37.0429C33.7171 36.8328 33.6884 36.7827 33.4844 36.7827C33.1898 36.7827 32.6602 36.7827 32.098 36.7827C31.7041 36.7827 31.317 36.5818 31.317 36.0992C31.317 35.6332 31.6771 35.3627 32.1707 35.3627C33.0254 35.3627 34.7857 35.3627 35.1151 35.3627C35.5471 35.3627 35.9878 35.4255 35.763 36.1183L34.572 39.7782C34.572 39.7782 33.5991 40.044 32.1044 40.044Z",fill:"#E2A60B"}),(0,A.jsxs)("defs",{children:[(0,A.jsxs)("linearGradient",{id:"paint0_linear_1982_56",x1:"14.2842",y1:"5.22937",x2:"14.2842",y2:"25.2499",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,A.jsxs)("linearGradient",{id:"paint1_linear_1982_56",x1:"13.8712",y1:"47.8671",x2:"13.8712",y2:"67.8877",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,A.jsxs)("linearGradient",{id:"paint2_linear_1982_56",x1:"50.2178",y1:"47.8671",x2:"50.2178",y2:"67.8877",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,A.jsxs)("linearGradient",{id:"paint3_linear_1982_56",x1:"49.2998",y1:"5",x2:"49.2998",y2:"25.0206",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,A.jsxs)("linearGradient",{id:"paint4_linear_1982_56",x1:"32.4925",y1:"26.1407",x2:"32.4925",y2:"46.1613",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]})]})]}))})),U=n(82936),H=n(6996),V={creditsPackage:{display:"flex",flex:1,borderRadius:8,padding:16},iconStyle:{width:30,height:30},titleContainer:{width:"100%",display:"flex",justifyContent:"center"},iconContainer:{marginRight:8,display:"flex",alignItems:"center",justifyContent:"center",width:30},backgroundText:{textAlign:"left"}},z=function(e){switch(e){case 0:return(0,A.jsx)(R,{style:V.iconStyle});case 1:return(0,A.jsx)(D,{style:V.iconStyle});case 2:return(0,A.jsx)(_,{style:V.iconStyle});case 3:return(0,A.jsx)(B,{style:V.iconStyle});default:return(0,A.jsx)(N,{style:V.iconStyle})}},W=function(e){var t=e.onClose,n=e.suggestedPackage,r=e.missingCredits,i=e.showCalloutTip,s=a.useContext(q),k=s.error,w=s.fetchCreditsPackages,T=s.creditsPackageListingDatas,S=a.useContext(d.Z),P=a.useState(null),E=(0,o.Z)(P,2),I=E[0],M=E[1],L=(0,H.U)().isMediumScreen;a.useEffect((function(){w()}),[w]);var O=a.useMemo((function(){return function(e,t){if(!e)return null;var n=[];if(t){for(var r=0;r<e.length;r+=3){if(e.length-r===4){n.push(e.slice(r,r+2)),n.push(e.slice(r+2,r+4));break}n.push(e.slice(r,r+3))}return n}for(var i=0;i<e.length;i+=4){if(e.length-i===5){n.push(e.slice(i,i+3)),n.push(e.slice(i+3,i+5));break}if(e.length-i===6){n.push(e.slice(i,i+3)),n.push(e.slice(i+3,i+6));break}n.push(e.slice(i,i+4))}return n}(T,L)}),[T,L]);return(0,A.jsx)(c.I18n,{children:function(e){var o=e.i18n;return(0,A.jsxs)(g.ZP,{title:(0,A.jsx)(c.Trans,{id:"Purchase credits"}),open:!0,maxWidth:"md",onRequestClose:t,actions:[(0,A.jsx)(f.Z,{label:(0,A.jsx)(c.Trans,{id:"Close"}),onClick:t},"close")],children:[(0,A.jsxs)(p.ak,{noMargin:!0,children:[(0,A.jsx)(x.Z,{displayPurchaseAction:!1}),i&&(0,A.jsx)(U.Z,{kind:"info",children:(0,A.jsx)(c.Trans,{id:"You can use credits to feature a game or purchase asset packs and game templates in the store!"})}),!!r&&(0,A.jsxs)(u.sg,{noMargin:!0,children:[(0,A.jsx)(h.Z,{size:"sub-title",children:(0,A.jsx)(c.Trans,{id:"You're {missingCredits} credits short.",values:{missingCredits:r}})}),(0,A.jsx)(h.Z,{noMargin:!0,children:(0,A.jsx)(c.Trans,{id:"Recharge your account to purchase this item."})})]}),k?(0,A.jsx)(m.Z,{onRetry:w,children:(0,A.jsx)(c.Trans,{id:"Can't load the credits packages. Verify your internet connection or retry later."})}):O?O.map((function(e,t){return(0,A.jsx)(p.ep,{noColumnMargin:!0,children:e.map((function(e,t){var r=e.id,i=e.name,a=e.description,s=!n||n.id===r;return(0,A.jsx)("div",{style:(0,l.Z)((0,l.Z)({},V.creditsPackage),{},{border:"1px solid ".concat(S.palette.secondary)}),children:(0,A.jsxs)(p.ak,{alignItems:"center",justifyContent:"space-between",noMargin:!0,expand:!0,children:[(0,A.jsxs)("div",{style:V.titleContainer,children:[(0,A.jsx)("div",{style:V.iconContainer,children:z(t)}),(0,A.jsxs)(p.pJ,{justifyContent:"space-between",alignItems:"flex-end",expand:!0,children:[(0,A.jsx)(u.x1,{noMargin:!0,alignItems:"flex-end",children:(0,A.jsx)(h.Z,{size:"sub-title",noMargin:!0,children:i})}),(0,A.jsx)(h.Z,{size:"body-small",color:"secondary",noMargin:!0,children:(0,C.e3)({productListingData:e,usageType:"default",i18n:o})})]})]}),(0,A.jsx)(u.sg,{noMargin:!0,alignItems:"center",expand:!0,children:(0,A.jsx)(h.Z,{size:"body-small",noMargin:!0,color:"secondary",align:"left",children:a})}),s?(0,A.jsx)(b.Z,{primary:!0,onClick:function(){return M(e)},label:(0,A.jsx)(c.Trans,{id:"Purchase"}),fullWidth:!0}):(0,A.jsx)(f.Z,{primary:!0,onClick:function(){return M(e)},label:(0,A.jsx)(c.Trans,{id:"Purchase"}),fullWidth:!0})]})},r)}))},"line-".concat(t))})):(0,A.jsx)(v.Z,{}),(0,A.jsx)(j.Z,{style:V.backgroundText,children:(0,A.jsx)(c.Trans,{id:"Not sure how many credits you need? Check <0>this guide</0> to help you decide.",components:[(0,A.jsx)(y.Z,{href:"https://wiki.gdevelop.io/gdevelop5/interface/profile/credits",onClick:function(){return Z.ZP.openExternalURL("https://wiki.gdevelop.io/gdevelop5/interface/profile/credits")}})]})})]}),!!I&&(0,A.jsx)(F,{creditsPackageListingData:I,onClose:function(){return M(null)},onCloseWhenPurchaseSuccessful:function(){n&&t()}})]})}})},G=function(e){var t=e.onClose,n=e.title,s=e.message,l=e.onConfirm,d=e.successMessage,m=e.closeAutomaticallyAfterSuccess,C=a.useState(!1),j=(0,o.Z)(C,2),y=j[0],Z=j[1],w=a.useState(!1),T=(0,o.Z)(w,2),S=T[0],P=T[1],I=(0,E.Z)().showAlert,M=a.useContext(k.ZP),L=M.onRefreshGameTemplatePurchases,F=M.onRefreshAssetPackPurchases,O=M.onPurchaseSuccessful,R=M.onRefreshLimits,D=a.useCallback((0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),e.prev=1,e.next=4,l();case 4:L(),F(),O(),R(),m&&t(),P(!0),e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(1),console.error("An error happened while purchasing a product:",e.t0),e.next=17,I({title:{id:"Could not purchase this product"},message:{id:"An error happened while purchasing this product. Verify your internet connection or try again later."}});case 17:return e.prev=17,Z(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,12,17,20]])}))),[l,L,F,O,R,I,m,t]);return(0,A.jsx)(c.I18n,{children:function(e){e.i18n;return(0,A.jsx)(g.ZP,{title:n,open:!0,maxWidth:"sm",cannotBeDismissed:!0,onRequestClose:t,actions:[(0,A.jsx)(f.Z,{label:(0,A.jsx)(c.Trans,{id:"Close"}),onClick:t,disabled:y},"close"),!S&&(0,A.jsx)(b.Z,{label:(0,A.jsx)(c.Trans,{id:"Purchase"}),primary:!0,onClick:D,disabled:y},"confirm")],children:(0,A.jsxs)(p.ak,{noMargin:!0,children:[(0,A.jsx)(x.Z,{displayPurchaseAction:!1}),(0,A.jsx)(u.sg,{noMargin:!0,children:y?(0,A.jsx)(v.Z,{}):S?(0,A.jsx)(h.Z,{children:d}):(0,A.jsx)(h.Z,{children:s})})]})})}})},Y=n(4900),q=a.createContext({fetchCreditsPackages:function(){},creditsPackageListingDatas:null,error:null,openCreditsPackageDialog:function(){},closeCreditsPackageDialog:function(){},openCreditsUsageDialog:function(){}}),X=function(e){return parseInt(e.split("_")[0],10)},K=function(e){var t=e.children,n=a.useState(null),l=(0,o.Z)(n,2),c=l[0],u=l[1],d=a.useState(null),p=(0,o.Z)(d,2),f=p[0],h=p[1],g=a.useState(!1),x=(0,o.Z)(g,2),m=x[0],v=x[1],b=a.useState(null),C=(0,o.Z)(b,2),j=C[0],y=C[1],Z=a.useState(!1),k=(0,o.Z)(Z,2),w=k[0],T=k[1],S=a.useState(null),P=(0,o.Z)(S,2),E=P[0],I=P[1],M=a.useRef(!1),L=a.useCallback((function(){M.current||f||(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),M.current=!0,e.prev=2,e.next=5,(0,s.Af)();case 5:t=e.sent,console.info("Loaded ".concat(t?t.length:0," credit packages from the store.")),h(t),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("Unable to load the credit packages from the store:",e.t0),u(e.t0);case 14:M.current=!1;case 15:case"end":return e.stop()}}),e,null,[[2,10]])})))()}),[f]);a.useEffect((function(){if(!M.current){var e=setTimeout((function(){console.info("Pre-fetching credit packages from the store..."),L()}),Y.lu);return function(){return clearTimeout(e)}}}),[L]);var F=a.useCallback((function(e){f&&(y(e&&e.missingCredits?e.missingCredits:0),T(!(!e||!e.showCalloutTip)&&e.showCalloutTip),v(!0))}),[f]),O=a.useMemo((function(){if(!j||!f)return null;var e=null;return f.forEach((function(t){var n=X(t.id),r=e?X(e.id):null;n>=j&&(!r||n<r)&&(e=t)})),e||(e=f.reduce((function(e,t){return X(e.id)>X(t.id)?e:t}))),e}),[f,j]),R=a.useCallback((function(){v(!1)}),[]),D=a.useCallback((function(e){I(e)}),[]),_=a.useMemo((function(){return{creditsPackageListingDatas:f,fetchCreditsPackages:L,openCreditsPackageDialog:F,closeCreditsPackageDialog:R,error:c,openCreditsUsageDialog:D}}),[f,L,F,R,c,D]);return(0,A.jsxs)(q.Provider,{value:_,children:[t,m&&(0,A.jsx)(W,{onClose:function(){return v(!1)},suggestedPackage:O,missingCredits:j,showCalloutTip:w}),E&&(0,A.jsx)(G,{onClose:function(){return I(null)},message:E.message,title:E.title,onConfirm:E.onConfirm,successMessage:E.successMessage,closeAutomaticallyAfterSuccess:E.closeAutomaticallyAfterSuccess})]})}},30227:function(e,t,n){"use strict";n.d(t,{I:function(){return h},h:function(){return g}});var r=n(74165),i=n(15861),o=n(29439),a=n(28381),s=n(81442),l=n(69197),c=n(82069),u=n(4900),d=n(29343),p=new Set,f=[],h=a.createContext({exampleFilters:null,exampleShortHeadersSearchResults:null,fetchExamplesAndFilters:function(){},exampleShortHeaders:null,error:null,searchText:"",setSearchText:function(){},filtersState:{chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},chosenCategory:null,setChosenCategory:function(){}}}),g=function(e){var t=e.children,n=a.useState(null),g=(0,o.Z)(n,2),x=g[0],m=g[1],v=a.useState(null),b=(0,o.Z)(v,2),C=b[0],j=b[1],y=a.useState(null),Z=(0,o.Z)(y,2),k=Z[0],w=Z[1],T=a.useState(null),S=(0,o.Z)(T,2),P=S[0],E=S[1],I=a.useRef(!1),M=a.useState(""),L=(0,o.Z)(M,2),A=L[0],F=L[1],O=(0,s.m)(),R=a.useCallback((function(){x||I.current||(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(null),I.current=!0,e.prev=2,e.next=5,(0,l.rx)();case 5:t=e.sent,n=t.exampleShortHeaders,i=t.filters,console.info("Loaded ".concat(n?n.length:0," examples from the example store.")),E(n),j(i),o={},n.forEach((function(e){o[e.id]=e})),m(o),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),console.error("Unable to load the examples from the example store:",e.t0),w(e.t0);case 19:I.current=!1;case 20:case"end":return e.stop()}}),e,null,[[2,15]])})))()}),[x,I]);a.useEffect((function(){if(!x&&!I.current){var e=setTimeout((function(){console.info("Pre-fetching examples from the example store..."),R()}),u.oN);return function(){return clearTimeout(e)}}}),[R,x,I]);var D=O.chosenCategory,_=O.chosenFilters,B=(0,c.qg)(x,{searchText:A,chosenCategory:D,chosenFilters:_,excludedTiers:p,defaultFirstSearchItemIds:f,shuffleResults:!1}),N=a.useMemo((function(){return{exampleShortHeadersSearchResults:B,fetchExamplesAndFilters:R,exampleShortHeaders:P,exampleFilters:C,error:k,searchText:A,setSearchText:F,filtersState:O}}),[B,P,k,C,A,O,R]);return(0,d.jsx)(h.Provider,{value:N,children:t})}},48210:function(e,t,n){"use strict";n.d(t,{D:function(){return m},H:function(){return x}});var r=n(93433),i=n(74165),o=n(15861),a=n(29439),s=n(28381),l=n(81442),c=n(39126),u=n(82069),d=n(36262),p=n(4900),f=n(29343),h=new Set,g=new Set(["community"]),x=s.createContext({filters:null,searchResults:null,fetchExtensionsAndFilters:function(){},error:null,searchText:"",setSearchText:function(){},allCategories:[],chosenCategory:"",setChosenCategory:function(){},extensionShortHeadersByName:{},filtersState:{chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},chosenCategory:null,setChosenCategory:function(){}},hasExtensionNamed:function(){return!1}}),m=function(e){var t=e.children,n=e.defaultSearchText,m=s.useState({}),v=(0,a.Z)(m,2),b=v[0],C=v[1],j=s.useContext(d.ZP).values.showCommunityExtensions,y=s.useState([]),Z=(0,a.Z)(y,2),k=Z[0],w=Z[1],T=s.useState(null),S=(0,a.Z)(T,2),P=S[0],E=S[1],I=s.useRef(!1),M=s.useState(n||""),L=(0,a.Z)(M,2),A=L[0],F=L[1],O=s.useState(""),R=(0,a.Z)(O,2),D=R[0],_=R[1],B=(0,l.m)(),N=s.useCallback((function(){Object.keys(b).length||I.current||(0,o.Z)((0,i.Z)().mark((function e(){var t,n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(null),I.current=!0,e.prev=2,e.next=5,(0,c.In)();case 5:t=e.sent,n=t.headers,r={},n.forEach((function(e){r[e.name]=e})),console.info("Loaded ".concat(n?n.length:0," extensions from the extension store.")),C(r),w(t.views.default.firstIds),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.error("Unable to load the extensions from the extension store:",e.t0),E(e.t0);case 18:I.current=!1;case 19:case"end":return e.stop()}}),e,null,[[2,14]])})))()}),[b,I]);s.useEffect((function(){if(!Object.keys(b).length&&!I.current){var e=setTimeout((function(){console.info("Pre-fetching extensions from extension store..."),N()}),p.hT);return function(){return clearTimeout(e)}}}),[N,b,I]);var U=s.useMemo((function(){var e=new Set;for(var t in b)e.add(b[t].category);return(0,r.Z)(e).sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}))}),[b]),H=s.useMemo((function(){var e=new Set;for(var t in b)b[t].tags.forEach((function(t){return e.add(t)}));var n=(0,r.Z)(e).sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}));return{allTags:n,defaultTags:n,tagsTree:[]}}),[b]),V=(0,u.qg)(b,{searchText:A,chosenItemCategory:D,chosenCategory:B.chosenCategory,chosenFilters:B.chosenFilters,excludedTiers:j?h:g,defaultFirstSearchItemIds:k}),z=s.useCallback((function(e){return!!b[e]}),[b]),W=s.useMemo((function(){return{searchResults:V,fetchExtensionsAndFilters:N,filters:H,allCategories:U,chosenCategory:D,setChosenCategory:_,error:P,searchText:A,setSearchText:F,extensionShortHeadersByName:b,filtersState:B,hasExtensionNamed:z}}),[V,P,H,U,D,_,A,b,B,N,z]);return(0,f.jsx)(x.Provider,{value:W,children:t})}},87706:function(e,t,n){"use strict";n.d(t,{An:function(){return T},Lu:function(){return y},Pr:function(){return j},Sg:function(){return P},UN:function(){return w},bg:function(){return S}});var r=n(93433),i=n(74165),o=n(15861),a=n(84140),s=n(79431),l=n(41006),c=n(10952),u=n.n(c),d=n(29118),p=n.n(d),f=n(60575),h=n.n(f),g=n(39126),x=n(18455),m=n(84360),v=n.g.gd,b=function(e){var t=e.trim();if(!t)return"UnnamedObject";var n,r=(n=t)?n.replace(/^[^A-Za-z0-9]*|[^A-Za-z0-9]*$/g,"$").replace(/[^A-Za-z0-9]+/g,"$").replace(/([a-z])([A-Z])/g,(function(e,t,n){return t+"$"+n})).toLowerCase().replace(/(\$)(\w?)/g,(function(e,t,n){return n.toUpperCase()})):"";return r[0]>="0"&&r[0]<="9"&&(r="_"+r),r},C=function(e,t,n,r){var i=n.name;if(!r[i]){var o=e.getResourcesManager(),c=n.file,u=n.origin?n.origin.name:"",d=(0,a.d0)(c)?(0,a.Lj)(c):u,p=n.origin?n.origin.identifier:"",f=d&&p?o.getResourceNameWithOrigin(d,p):"",h=o.getResourceNameWithFile(c);if(f)r[i]=f;else if(h)r[i]=h;else{var g=null;if("image"===n.kind)g=new v.ImageResource;else if("audio"===n.kind)g=new v.AudioResource;else if("font"===n.kind)g=new v.FontResource;else if("video"===n.kind)g=new v.VideoResource;else if("json"===n.kind)g=new v.JsonResource;else if("model3D"===n.kind)g=new v.Model3DResource;else if("atlas"===n.kind)g=new v.AtlasResource;else{if("spine"!==n.kind)throw new Error('Resource of kind "'.concat(n.kind,'" is not supported.'));g=new v.SpineResource}(0,l.qx)(g,n),"image"===g.getKind()&&g.setSmooth("nearest"!==e.getScaleMode()&&!(0,a.V0)(t));var x=(0,s.Z)(i,(function(e){return o.hasResource(e)}));g.setName(x),g.setOrigin(d,p),o.addResource(g),g.delete(),r[i]=x}}},j=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,o,a,c,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.asset,r=t.project,o=t.objectsContainer,a={},c={},u=[],n.objectAssets.forEach((function(e){var t=e.object.type;if(!t)throw new Error("An object has no type specified");var i=b(e.object.name),d=(0,s.Z)(i,(function(e){return o.hasObjectNamed(e)})),p=o.insertNewObject(r,t,d,o.getObjectsCount());a[i]=d,(0,l.qx)(p,e.object,"unserializeFrom",r),p.setAssetStoreId(n.id),p.setName(d),e.resources.forEach((function(e){C(r,n,e,c)}));var f=(0,m.R)(c),h=new v.ResourcesRenamer(r.getResourcesManager(),f);f.delete(),p.getConfiguration().exposeResources(h),h.delete(),u.push(p)})),e.abrupt("return",{createdObjects:u});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=j,Z=function(e){return p()(u()(e.objectAssets.map((function(e){return e.requiredExtensions||[]}))),(function(e){return e.extensionName}))},k=function(e,t){var n=(0,x.mapVector)(e.asPlatform(e.JsPlatform.get()).getAllPlatformExtensions(),(function(e){return e.getName()}));return t.filter((function(e){return!n.includes(e.name)}))},w=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,o,a,s,l,c,u,d,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.requiredExtensionInstallation,o=t.shouldUpdateExtension,a=t.eventsFunctionsExtensionsState,s=t.project,l=n.requiredExtensionShortHeaders,c=n.missingExtensionShortHeaders,u=n.outOfDateExtensionShortHeaders,0!==c.length||0!==u.length){e.next=4;break}return e.abrupt("return");case 4:return d=o?[].concat((0,r.Z)(c),(0,r.Z)(u)):c,e.next=7,Promise.all(h()(d).map((function(e){return(0,g.RT)(e)})));case 7:return p=e.sent,e.next=10,T(a,s,p);case 10:if(!k(v,l).length){e.next=13;break}throw new Error("These extensions could not be installed: "+c.map((function(e){return e.name})).join(", "));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return n.forEach((function(e){var n=e.name;if(!n)return Promise.reject(new Error("Malformed extension (missing name)."));var i=t.hasEventsFunctionsExtensionNamed(n)?t.getEventsFunctionsExtension(n):t.insertNewEventsFunctionsExtension(n,0);(0,l.qx)(i,e,"unserializeFrom",t),r&&i.setOrigin("gdevelop-extension-store",n)})),e.loadProjectEventsFunctionsExtensions(t)},S=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,o,a,s,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.requiredExtensions,r=t.project,0!==n.length){e.next=3;break}return e.abrupt("return",{requiredExtensionShortHeaders:[],missingExtensionShortHeaders:[],outOfDateExtensionShortHeaders:[]});case 3:return e.next=5,(0,g.In)();case 5:return o=e.sent,a=n.map((function(e){var t=o.headers.find((function(t){return t.name===e.extensionName}));if(!t)throw new Error("Unable to find extension "+e.extensionName+" in the registry.");return t})),s=a.filter((function(e){return r.hasEventsFunctionsExtensionNamed(e.name)&&r.getEventsFunctionsExtension(e.name).getVersion()!==e.version})),l=k(v,a),e.abrupt("return",{requiredExtensionShortHeaders:a,missingExtensionShortHeaders:l,outOfDateExtensionShortHeaders:s});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.assets,r=t.project,o=[],n.forEach((function(e){Z(e).forEach((function(e){o.some((function(t){return t.extensionName===e.extensionName}))||o.push(e)}))})),e.abrupt("return",S({requiredExtensions:o,project:r}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},23883:function(e,t,n){"use strict";var r=n(36600),i=(n(28381),n(1773)),o=n(67835),a=n(86567),s=n(29277),l=n(29343);t.Z=function(e){return(0,l.jsx)(i.ZP,{open:!0,maxWidth:"xs",title:(0,l.jsx)(r.Trans,{id:"Store password"}),onApply:e.onApply,onRequestClose:e.onClose,actions:[(0,l.jsx)(o.Z,{label:(0,l.jsx)(r.Trans,{id:"Close"}),onClick:e.onClose},"cancel"),(0,l.jsx)(i.vF,{primary:!0,label:(0,l.jsx)(r.Trans,{id:"Continue"}),onClick:e.onApply},"continue")],children:(0,l.jsx)(a.Z,{onSubmit:e.onApply,name:"store-password",children:(0,l.jsx)(s.ZP,{fullWidth:!0,autoFocus:"desktopAndMobileDevices",value:e.passwordValue,floatingLabelText:(0,l.jsx)(r.Trans,{id:"Password"}),type:"password",onChange:function(t,n){e.setPasswordValue(n)}})})})}},76683:function(e,t,n){"use strict";var r=n(1413),i=n(29439),o=n(28381),a=n(24347),s=n(78081),l=n(36465),c=n(29343);t.Z=function(e){var t=e.url,n=e.style,u=e.alt,d=e.onError,p=e.onLoad,f=e.hideLoader,h=o.useState(null),g=(0,i.Z)(h,2),x=g[0],m=g[1],v=o.useState(!1),b=(0,i.Z)(v,2),C=b[0],j=b[1],y=o.useContext(a.Z),Z=y.authorizationToken,k=y.updateAuthorizationToken,w=o.useRef(0);o.useEffect((function(){C||(Z?m((0,l.mR)(t,Z)):k())}),[Z,k,t,C]);return o.useEffect((function(){t&&j(!1)}),[t]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("img",{alt:u,src:x,style:(0,r.Z)((0,r.Z)({},n),{},{display:f||C?"block":"none"}),onError:function(){console.warn("Error while fetching authorized image"),w.current>=3?d&&d():(j(!1),console.info("Error while fetching image, fetching a new token..."),k(),w.current+=1)},onLoad:function(e){j(!0),p&&p(e)}}),!f&&!C&&(0,c.jsx)(s.Z,{})]})}},24347:function(e,t,n){"use strict";var r=n(74165),i=n(15861),o=n(28381),a={authorizationToken:null,updateAuthorizationToken:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fetchPrivateAsset:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),installPrivateAsset:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getPrivateAssetPackAudioArchiveUrl:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},s=o.createContext(a);t.Z=s},2866:function(e,t,n){"use strict";n.d(t,{G_:function(){return y},mJ:function(){return j}});var r=n(74165),i=n(15861),o=n(29439),a=n(28381),s=n(81442),l=n(82069),c=n(49819),u=n(36465),d=n(27817),p=n(6901),f=n(65056),h=n(62800),g=n(4900),x=n(29343),m=new Set,v=[],b=function(e){return e.name+"\n"+e.description+"\n"+e.categories.join("\n")},C={gameTemplateFilters:null,fetchGameTemplates:function(){},privateGameTemplateListingDatas:null,error:null,shop:{privateGameTemplateListingDatasSearchResults:null,searchText:"",setSearchText:function(){},filtersState:{chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},chosenCategory:null,setChosenCategory:function(){}},setInitialGameTemplateUserFriendlySlug:function(e){}},exampleStore:{privateGameTemplateListingDatasSearchResults:null,searchText:"",setSearchText:function(){},filtersState:{chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},chosenCategory:null,setChosenCategory:function(){}}}},j=a.createContext(C),y=function(e){var t=e.shopNavigationState,n=e.children,C=a.useState(null),y=(0,o.Z)(C,2),Z=y[0],k=y[1],w=a.useState(null),T=(0,o.Z)(w,2),S=T[0],P=T[1],E=a.useState(null),I=(0,o.Z)(E,2),M=I[0],L=I[1],A=a.useState(null),F=(0,o.Z)(A,2),O=F[0],R=F[1],D=a.useRef(!1),_=a.useRef(!1),B=(0,f.Z)().showAlert,N=a.useState(""),U=(0,o.Z)(N,2),H=U[0],V=U[1],z=a.useState(""),W=(0,o.Z)(z,2),G=W[0],Y=W[1],q=(0,s.m)(),X=a.useCallback((function(){_.current||M||(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(null),_.current=!0,e.prev=2,e.next=5,(0,u.GN)();case 5:t=e.sent,console.info("Loaded ".concat(t?t.length:0," game templates from the store.")),L(t),n=t.reduce((function(e,t){return e.concat(t.categories.map((function(e){return(0,d.capitalize)(e)})))}),[]),i=Array.from(new Set(n)),k({allTags:[],defaultTags:i,tagsTree:[]}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.error("Unable to load the game templates from the store:",e.t0),P(e.t0);case 18:_.current=!1;case 19:case"end":return e.stop()}}),e,null,[[2,14]])})))()}),[M]);a.useEffect((function(){if(O&&!D.current&&M&&O){D.current=!0;var e=(0,p.af)({privateGameTemplateListingDatas:M,userFriendlySlug:O});if(e)return(0,h.rG)({gameTemplateName:e.name,gameTemplateId:e.id,source:"web-link"}),t.openPrivateGameTemplateInformationPage({privateGameTemplateListingData:e,previousSearchText:H}),D.current=!1,void R(null);B({title:{id:"Game template not found"},message:{id:"The link to the game template you've followed seems outdated. Why not take a look at the other templates in the store?"}})}}),[M,t,B,O,H]),a.useEffect((function(){if(!_.current){var e=setTimeout((function(){console.info("Pre-fetching game templates from the store..."),X()}),g.Cr);return function(){return clearTimeout(e)}}}),[X]);var K=a.useMemo((function(){if(!M)return null;var e={};return M.forEach((function(t){var n=t.id;e[n]&&console.warn("Multiple private game templates with the same id: ".concat(n)),e[n]=t})),e}),[M]),J=t.getCurrentPage(),Q=(0,l.qg)(K,{searchText:G,chosenCategory:q.chosenCategory,chosenFilters:q.chosenFilters,excludedTiers:m,defaultFirstSearchItemIds:v,shuffleResults:!1}),$=(0,c.az)(K,b,H,J.filtersState.chosenCategory,J.filtersState.chosenFilters),ee=a.useMemo((function(){return{privateGameTemplateListingDatas:M,error:S,gameTemplateFilters:Z,fetchGameTemplates:X,shop:{privateGameTemplateListingDatasSearchResults:$,searchText:H,setSearchText:V,filtersState:J.filtersState,setInitialGameTemplateUserFriendlySlug:R},exampleStore:{privateGameTemplateListingDatasSearchResults:Q,searchText:G,setSearchText:Y,filtersState:q}}}),[M,S,Z,X,Q,$,H,G,J.filtersState,q]);return(0,x.jsx)(j.Provider,{value:ee,children:n})}},65875:function(e,t,n){"use strict";n.d(t,{K:function(){return d},v:function(){return u}});var r=n(74165),i=n(15861),o=n(29439),a=n(28381),s=n(36465),l=n(4900),c=n(29343),u=a.createContext({fetchProductLicenses:function(){},assetPackLicenses:null,gameTemplateLicenses:null,error:null}),d=function(e){var t=e.children,n=a.useState(null),d=(0,o.Z)(n,2),p=d[0],f=d[1],h=a.useState(null),g=(0,o.Z)(h,2),x=g[0],m=g[1],v=a.useState(null),b=(0,o.Z)(v,2),C=b[0],j=b[1],y=a.useRef(!1),Z=a.useCallback((function(){y.current||x&&C||(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(null),y.current=!0,e.prev=2,e.next=5,Promise.all([(0,s.yw)({productType:"asset-pack"}),(0,s.yw)({productType:"game-template"})]);case 5:t=e.sent,n=(0,o.Z)(t,2),i=n[0],a=n[1],console.info("Loaded ".concat(i?i.length:0," asset pack licenses and ").concat(a?a.length:0," game template licenses")),j(i),m(a),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.error("Unable to load product licenses:",e.t0),f(e.t0);case 18:y.current=!1;case 19:case"end":return e.stop()}}),e,null,[[2,14]])})))()}),[C,x]);a.useEffect((function(){if(!(y.current||x&&C)){var e=setTimeout((function(){console.info("Pre-fetching product licenses..."),Z()}),l.KB);return function(){return clearTimeout(e)}}}),[Z,C,x]);var k=a.useMemo((function(){return{assetPackLicenses:C,gameTemplateLicenses:x,fetchProductLicenses:Z,error:p}}),[C,x,Z,p]);return(0,c.jsx)(u.Provider,{value:k,children:t})}},15859:function(e,t,n){"use strict";n.d(t,{ZP:function(){return g},MS:function(){return h},e3:function(){return f}});n(28381);var r=n(36600),i=n(69186),o=n(29343),a=(0,i.Z)((function(e){return{container:{borderRadius:4,padding:"2px 4px",backdropFilter:function(t){return t.withOverlay&&"light"===e.palette.type?"brightness(40%)":void 0},backgroundColor:function(t){return t.withOverlay&&"light"===e.palette.type?void 0:e.palette.background.alternate.startsWith("#")?e.palette.background.alternate+"BB":e.palette.background.alternate},color:function(t){return t.withOverlay&&"light"===e.palette.type?"#FAFAFA":void 0}}}}));var s=function(e){var t=e.label,n=e.withOverlay,r=a({withOverlay:n});return(0,o.jsx)("div",{className:r.container,children:t})},l=n(51137),c=n(84482),u=n(61325),d=n(86278),p={icon:{width:12,height:12}},f=function(e){var t=e.i18n,n=e.productListingData,r=e.usageType,i=e.plainText;if((0,l.PN)()&&"CREDITS_PACKAGE"===n.productType){var a=(0,l.e_)(n.appStoreProductId);return a?a.price:""}if((0,l.PN)()&&"CREDITS_PACKAGE"!==n.productType){var s=n.creditPrices;if(!s)return"";var f=r?s.find((function(e){return e.usageType===r})):s.length>0?s[0]:null;return f?i?t._({id:"{0} credits",values:{0:f.amount}}):(0,o.jsxs)(u.pJ,{noMargin:!0,alignItems:"center",children:[(0,o.jsx)(c.Z,{style:p.icon}),(0,o.jsx)(d.Z,{noMargin:!0,size:"sub-title",color:"inherit",children:f.amount})]}):""}var h=n.prices,g=r?h.find((function(e){return e.usageType===r})):h.length>0?h[0]:null;if(!g)return"";var x="USD"===g.currency?"$":"\u20ac",m="".concat(x," ").concat(t.number(g.value/100,{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/\D00$/,""));return i?m:(0,o.jsx)(d.Z,{noMargin:!0,size:"sub-title",color:"inherit",children:m})},h=function(e){var t=e.i18n,n=e.productListingData,i=e.usageType;return e.owned?(0,o.jsxs)(u.pJ,{noMargin:!0,alignItems:"center",children:[(0,o.jsx)(d.Z,{noMargin:!0,size:"sub-title",children:"\u2705"}),(0,o.jsx)(d.Z,{noMargin:!0,size:"sub-title",color:"inherit",children:(0,o.jsx)(r.Trans,{id:"Owned"})})]}):f({i18n:t,productListingData:n,usageType:i})},g=function(e){var t=e.productListingData,n=e.usageType,i=e.withOverlay,a=e.owned;return(0,o.jsx)(r.I18n,{children:function(e){var r=e.i18n,l=h({i18n:r,productListingData:t,usageType:n,owned:a});return(0,o.jsx)(s,{withOverlay:i,label:l})}})}},23375:function(e,t,n){"use strict";n.d(t,{E:function(){return h},Z:function(){return p}});var r=n(74165),i=n(15861),o=n(29439),a=n(28381),s=n(81442),l=n(84140),c=n(49819),u=n(84090),d=n(29343),p=a.createContext({filters:null,authors:null,licenses:null,searchResults:null,fetchResourcesAndFilters:function(){},error:null,searchText:"",setSearchText:function(){},filtersState:{chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},chosenCategory:null,setChosenCategory:function(){}}}),f=function(e){return e.name+"\n"+e.tags.join(", ")},h=function(e){var t=e.children,n=a.useState(null),h=(0,o.Z)(n,2),g=h[0],x=h[1],m=a.useState(null),v=(0,o.Z)(m,2),b=v[0],C=v[1],j=a.useState(null),y=(0,o.Z)(j,2),Z=y[0],k=y[1],w=a.useState(null),T=(0,o.Z)(w,2),S=T[0],P=T[1],E=a.useState(null),I=(0,o.Z)(E,2),M=I[0],L=I[1],A=a.useRef(!1),F=a.useState(""),O=(0,o.Z)(F,2),R=O[0],D=O[1],_=(0,s.m)(),B=a.useContext(u.KY).environment,N=a.useCallback((function(){g||A.current||(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i,o,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(null),A.current=!0,e.prev=2,e.next=5,(0,l.R5)({environment:B});case 5:return t=e.sent,n=t.resources,i=t.filters,e.next=10,(0,l.Dz)({environment:B});case 10:return o=e.sent,e.next=13,(0,l.$l)({environment:B});case 13:a=e.sent,s={},n.forEach((function(e){s[e.url]=e})),console.info("Loaded ".concat(n?n.length:0," resources from the asset store.")),x(s),C(i),k(o),P(a),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(2),console.error("Unable to load the assets from the asset store:",e.t0),L(e.t0);case 27:A.current=!1;case 28:case"end":return e.stop()}}),e,null,[[2,23]])})))()}),[g,A,B]),U=_.chosenCategory,H=_.chosenFilters,V=(0,c.az)(g,f,R,U,H),z=a.useMemo((function(){return{searchResults:V,fetchResourcesAndFilters:N,filters:b,authors:Z,licenses:S,error:M,searchText:R,setSearchText:D,filtersState:_}}),[V,M,b,Z,S,R,_,N]);return(0,d.jsx)(p.Provider,{value:z,children:t})}},33258:function(e,t,n){"use strict";n.d(t,{L:function(){return z}});var r=n(36600),i=n(28381),o=n(6946),a=n(40243),s=n(2632),l=n(81442),c=n(23375),u=n(1413),d=n(78081),p=n(75383),f=n(61651),h=n(38509),g=n(86578),x=n(29343),m={container:{flex:1},grid:{overflowX:"hidden"}},v=i.forwardRef((function(e,t){var n=e.searchItems,o=e.renderSearchItem,a=e.spacing,s=e.error,l=e.onRetry,c=e.baseSize,v=e.noResultPlaceholder,b=e.noScroll,C=i.useRef(null);return i.useImperativeHandle(t,(function(){return{getScrollPosition:function(){var e=C.current;return e?e.state.scrollTop:0},scrollToPosition:function(e){var t=C.current;t&&t.scrollToPosition({scrollLeft:0,scrollTop:e})}}})),n?0===n.length?v||(0,x.jsx)(g.Z,{children:(0,x.jsx)(r.Trans,{id:"No results returned for your search. Try something else, browse the categories or create your object from scratch!"})}):(0,x.jsx)(f.ZP,{componentTitle:(0,x.jsx)(r.Trans,{id:"Search results"}),scope:"box-search-result",children:(0,x.jsx)("div",{style:m.container,children:(0,x.jsx)(h.qj,{children:function(e){var t=e.width,r=e.height,i=Math.max(Math.floor((t-5)/c),1),s=Math.max(Math.floor(t/i),30),l=Math.max(1,Math.ceil(n.length/i)),d=s,p=b?d*l:r,f=t;return(0,x.jsx)(h.rj,{ref:C,width:f,height:p,columnCount:i,columnWidth:s,rowHeight:d,rowCount:l,cellRenderer:function(e){var t=e.columnIndex,r=e.key,l=e.rowIndex,c=e.style,d=l*i+t,p=d<n.length?n[d]:null;return(0,x.jsx)("div",{style:(0,u.Z)((0,u.Z)({},c),{},{left:c.left+a/2,top:c.top+a/2,width:c.width-a,height:c.height-a}),children:p?o(p,s-a):null},r)},style:m.grid})}})})}):s?(0,x.jsx)(p.Z,{onRetry:l,children:(0,x.jsx)(r.Trans,{id:"Can't load the results. Verify your internet connection or retry later."})}):(0,x.jsx)(d.Z,{})})),b=n(3798),C=n(86278),j=n(48812),y=n(32484),Z=n(23818),k=n(58893),w=n(24910),T=n(81730),S=n(62981),P={previewContainer:{display:"flex",position:"relative",justifyContent:"center",alignItems:"center"},previewImage:{position:"relative",objectFit:"contain",verticalAlign:"middle",pointerEvents:"none"},previewIconDarkTheme:{width:40,height:40,filter:"grayscale(1) invert(1)"},previewIconLightTheme:{width:40,height:40},cardContainer:{overflow:"hidden",position:"relative"},titleContainer:{position:"absolute",bottom:0,left:0,right:0,height:48,color:"#fff",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",backgroundColor:"rgb(0,0,0,0.5)"},title:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},icon:{width:32,height:32},audioElement:{width:128,height:40}},E=function(e){var t=e.resource,n=e.onChoose,r=e.size,i=e.imageStyle;return(0,x.jsx)(b.Z,{onClick:n,focusRipple:!0,children:(0,x.jsxs)("div",{style:(0,u.Z)((0,u.Z)({},P.cardContainer),{},{width:r,height:r}),children:[(0,x.jsxs)("div",{style:(0,u.Z)((0,u.Z)({},P.previewContainer),{},{width:r,height:r}),children:[(0,x.jsx)(k.Z,{}),(0,x.jsx)(Z.W,{style:(0,u.Z)((0,u.Z)({},P.previewImage),{},{maxWidth:108,maxHeight:108},i),src:t.url,alt:t.name},t.url)]}),(0,x.jsxs)("div",{style:P.titleContainer,children:[(0,x.jsx)(C.Z,{noMargin:!0,style:P.title,children:t.name}),(0,x.jsx)(C.Z,{noMargin:!0,style:P.title,size:"body2",children:t.license})]})]})})},I=function(e){var t=e.resource,n=(e.onChoose,e.size),r=e.children;return(0,x.jsxs)("div",{style:(0,u.Z)((0,u.Z)({},P.cardContainer),{},{width:n,height:n}),children:[(0,x.jsx)(a.sg,{children:r}),(0,x.jsxs)("div",{style:P.titleContainer,children:[(0,x.jsx)(C.Z,{noMargin:!0,style:P.title,children:t.name}),(0,x.jsx)(C.Z,{noMargin:!0,style:P.title,size:"body2",children:t.license})]})]})},M=function(e){var t=e.resource,n=e.onChoose,o=e.size,s=t.type,l=i.useContext(w.Z);switch(s){case"image":return(0,x.jsx)(E,{resource:t,onChoose:n,size:o});case"svg":return(0,x.jsx)(E,{resource:t,onChoose:n,size:o,imageStyle:"light"===l.palette.type?P.previewIconLightTheme:P.previewIconDarkTheme});case"audio":return(0,x.jsxs)(I,{onChoose:n,resource:t,size:o,children:[(0,x.jsx)(a.x1,{justifyContent:"center",children:(0,x.jsx)("audio",{controls:!0,src:t.url,style:P.audioElement,children:"Audio preview is unsupported."})}),(0,x.jsx)(a.x1,{justifyContent:"center",children:(0,x.jsx)(y.Z,{onClick:n,label:(0,x.jsx)(r.Trans,{id:"Choose"})})})]});case"json":case"tilemap":case"tileset":case"spine":return(0,x.jsxs)(I,{onChoose:n,resource:t,size:o,children:[(0,x.jsx)(a.x1,{justifyContent:"center",children:(0,x.jsx)(S.Z,{style:P.icon})}),(0,x.jsx)(a.x1,{justifyContent:"center",children:(0,x.jsx)(y.Z,{onClick:n,label:(0,x.jsx)(r.Trans,{id:"Choose"})})})]});case"video":return(0,x.jsxs)(I,{onChoose:n,resource:t,size:o,children:[(0,x.jsx)(a.x1,{justifyContent:"center",children:(0,x.jsx)(T.Z,{style:P.icon})}),(0,x.jsx)(a.x1,{justifyContent:"center",children:(0,x.jsx)(y.Z,{onClick:n,label:(0,x.jsx)(r.Trans,{id:"Choose"})})})]});case"font":case"model3D":case"atlas":return(0,x.jsxs)(I,{onChoose:n,resource:t,size:o,children:[(0,x.jsx)(a.x1,{justifyContent:"center",children:(0,x.jsx)(j.Z,{style:P.icon})}),(0,x.jsx)(a.x1,{justifyContent:"center",children:(0,x.jsx)(y.Z,{onClick:n,label:(0,x.jsx)(r.Trans,{id:"Choose"})})})]});default:return null}},L=n(36607),A=n(93433),F=n(23125),O=n(15845),R=n(84900),D=n(25638),_=function(e){return e.map((function(e){return e.name})).join(";-/>")},B=function e(t){var n=t.tagsTreeNodes,r=t.onChoose,i=t.parentNodes;return n.length?n.map((function(t){var n=[].concat((0,A.Z)(i),[t]);return(0,x.jsx)(O.Z,{nodeId:_(n),label:t.name,onLabelClick:function(){return r({node:t,parentNodes:i})},collapseIcon:t.children.length?(0,x.jsx)(D.Z,{}):null,expandIcon:t.children.length?(0,x.jsx)(R.Z,{}):null,children:(0,x.jsx)(e,{tagsTreeNodes:t.children,parentNodes:n,onChoose:r})},t.name)})):null},N=i.memo((function(e){var t=e.allItemsLabel,n=e.chosenCategory,r=e.setChosenCategory,i=e.onChoiceChange,o=e.allFilters;return(0,x.jsxs)(F.Z,{selected:n?_([].concat((0,A.Z)(n.parentNodes),[n.node])):"",defaultExpanded:[],onNodeSelect:function(){},children:[(0,x.jsx)(O.Z,{nodeId:"",label:t,onLabelClick:function(){r(null)}}),(0,x.jsx)(B,{tagsTreeNodes:o.tagsTree,onChoose:function(e){r(e),i&&i(e)},parentNodes:[]})]})})),U=function(e){var t=e.filtersState,n=e.onChoiceChange,r=e.allFilters,i=e.error,o=e.allItemsLabel;return r?i?null:(0,x.jsx)(N,{allItemsLabel:o,chosenCategory:t.chosenCategory,setChosenCategory:t.setChosenCategory,onChoiceChange:n,allFilters:r}):(0,x.jsx)(d.Z,{})},H=n(20914),V={paper:{width:250}},z=function(e){var t=e.onChoose,n=e.resourceKind,u=i.useContext(c.Z),d=u.filters,p=u.searchResults,f=u.error,h=u.fetchResourcesAndFilters,g=u.filtersState,m=u.searchText,b=u.setSearchText;i.useEffect((function(){h()}),[h]);var C=p?p.filter((function(e){return e.type===n})):null;return(0,x.jsxs)(a.sg,{expand:!0,noMargin:!0,useFullHeight:!0,children:[(0,x.jsx)(a.x1,{children:(0,x.jsx)(a.sg,{expand:!0,noMargin:!0,children:(0,x.jsx)(o.Z,{value:m,onChange:b,onRequestSearch:function(){},placeholder:{id:"Search resources"}})})}),(0,x.jsxs)(a.x1,{expand:!0,overflow:"hidden",noMargin:!0,children:[(0,x.jsx)(a.sg,{noMargin:!0,children:(0,x.jsx)(s.Z,{children:(0,x.jsxs)(H.Z,{style:V.paper,background:"medium",children:[(0,x.jsx)(L.Z,{children:(0,x.jsx)(r.Trans,{id:"Categories"})}),(0,x.jsx)(U,{allItemsLabel:(0,x.jsx)(r.Trans,{id:"All assets"}),allFilters:d,filtersState:g,error:f}),(0,x.jsx)(L.Z,{children:(0,x.jsx)(r.Trans,{id:"Filters"})}),(0,x.jsx)(l.T,{allFilters:d,filtersState:g,error:f})]})})}),(0,x.jsx)(v,{baseSize:128,spacing:8,onRetry:h,error:f,searchItems:C,renderSearchItem:function(e,n){return(0,x.jsx)(M,{size:n,resource:e,onChoose:function(){return t(e)}})}})]})]})}},76288:function(e,t,n){"use strict";n.d(t,{YZ:function(){return o},gT:function(){return a}});var r=n(28381),i=n(59788),o=function(e,t,n){var o=r.useContext(i.Z),a=n.handler;r.useEffect((function(){if(t)return o.registerCommand(e,{handler:a}),function(){return o.deregisterCommand(e)}}),[o,e,t,a])},a=function(e,t,n){var o=r.useContext(i.Z),a=n.generateOptions;r.useEffect((function(){if(t)return o.registerCommand(e,{generateOptions:a}),function(){return o.deregisterCommand(e)}}),[o,e,t,a])}},59788:function(e,t,n){"use strict";n.d(t,{V:function(){return d},Z:function(){return p}});var r=n(28381),i=n(1413),o=n(43144),a=n(15671),s=(0,o.Z)((function e(){var t=this;(0,a.Z)(this,e),this.registerCommand=function(e,n){if(t._commands[e])return console.warn("Tried to register command ".concat(e,", but it is already registered."));t._commands[e]=n},this.deregisterCommand=function(e){if(!t._commands[e])return console.warn("Tried to deregister command ".concat(e,", but it is not registered."));delete t._commands[e]},this.getNamedCommand=function(e){var n=t._commands[e];return n?(0,i.Z)({name:e},n):null},this.getAllNamedCommands=function(){return Object.keys(t._commands).map((function(e){var n=t._commands[e];return(0,i.Z)((0,i.Z)({},n),{},{name:e})}))},this._commands={}})),l=n(46771),c=n(29343),u=r.createContext(new s),d=function(e){var t=(0,l.Z)((function(){return new s}));return(0,c.jsx)(u.Provider,{value:t,children:e.children})},p=u},32072:function(e,t,n){"use strict";n.d(t,{R:function(){return r}});var r={GENERAL:{id:"General"},IDE:{id:"IDE"},PROJECT:{id:"Project"},SCENE:{id:"Scene"},EVENTS:{id:"Events"}};t.Z={QUIT_APP:{area:"GENERAL",displayText:{id:"Close GDevelop"},handledByElectron:!0},OPEN_PROJECT_MANAGER:{area:"IDE",displayText:{id:"Open project manager"},handledByElectron:!0},OPEN_PROFILE:{area:"IDE",displayText:{id:"Open My Profile"}},LAUNCH_NEW_PREVIEW:{area:"PROJECT",displayText:{id:"Launch new preview"}},LAUNCH_DEBUG_PREVIEW:{area:"PROJECT",displayText:{id:"Launch preview with debugger and profiler"}},LAUNCH_NETWORK_PREVIEW:{area:"PROJECT",displayText:{id:"Launch network preview over WiFi/LAN"}},HOT_RELOAD_PREVIEW:{area:"PROJECT",displayText:{id:"Apply changes to the running preview"}},OPEN_HOME_PAGE:{area:"IDE",displayText:{id:"Show Home"}},CREATE_NEW_PROJECT:{area:"GENERAL",displayText:{id:"Create a new project"},handledByElectron:!0},OPEN_PROJECT:{area:"GENERAL",displayText:{id:"Open project"},handledByElectron:!0},SAVE_PROJECT:{area:"GENERAL",displayText:{id:"Save project"},handledByElectron:!0},SAVE_PROJECT_AS:{area:"GENERAL",displayText:{id:"Save project as..."},handledByElectron:!0},CLOSE_PROJECT:{area:"GENERAL",displayText:{id:"Close project"},handledByElectron:!0},EXPORT_GAME:{area:"PROJECT",displayText:{id:"Export game"},handledByElectron:!0},INVITE_COLLABORATORS:{area:"PROJECT",displayText:{id:"Invite collaborators"},handledByElectron:!0},OPEN_RECENT_PROJECT:{area:"GENERAL",displayText:{id:"Open recent project..."}},OPEN_COMMAND_PALETTE:{area:"IDE",displayText:{id:"Open command palette"},ghost:!0},OPEN_PROJECT_PROPERTIES:{area:"PROJECT",displayText:{id:"Open project properties"}},OPEN_PROJECT_LOADING_SCREEN:{area:"PROJECT",displayText:{id:"Edit loading screen"}},OPEN_PROJECT_VARIABLES:{area:"PROJECT",displayText:{id:"Edit global variables"}},OPEN_PLATFORM_SPECIFIC_ASSETS_DIALOG:{area:"PROJECT",displayText:{id:"Open project icons"}},OPEN_PROJECT_RESOURCES:{area:"PROJECT",displayText:{id:"Open project resources"}},OPEN_SEARCH_EXTENSIONS_DIALOG:{area:"PROJECT",displayText:{id:"Search/import extensions"}},OPEN_LAYOUT:{area:"IDE",displayText:{id:"Open scene..."}},OPEN_EXTERNAL_EVENTS:{area:"IDE",displayText:{id:"Open external events..."}},OPEN_EXTERNAL_LAYOUT:{area:"IDE",displayText:{id:"Open external layout..."}},OPEN_EXTENSION:{area:"IDE",displayText:{id:"Open extension..."}},OPEN_SCENE_PROPERTIES:{area:"SCENE",displayText:{id:"Open scene properties"}},OPEN_SCENE_VARIABLES:{area:"SCENE",displayText:{id:"Open scene variables"}},OPEN_OBJECTS_PANEL:{area:"SCENE",displayText:{id:"Toggle Objects Panel"}},OPEN_OBJECT_GROUPS_PANEL:{area:"SCENE",displayText:{id:"Toggle Object Groups Panel"}},OPEN_PROPERTIES_PANEL:{area:"SCENE",displayText:{id:"Toggle Properties Panel"}},TOGGLE_INSTANCES_PANEL:{area:"SCENE",displayText:{id:"Toggle Instances List Panel"}},TOGGLE_LAYERS_PANEL:{area:"SCENE",displayText:{id:"Toggle Layers Panel"}},SCENE_EDITOR_UNDO:{area:"SCENE",displayText:{id:"Undo the last changes"},noShortcut:!0},SCENE_EDITOR_REDO:{area:"SCENE",displayText:{id:"Redo the last changes"},noShortcut:!0},RENAME_SCENE_OBJECT:{area:"SCENE",displayText:{id:"Rename the selected object"}},DELETE_INSTANCES:{area:"SCENE",displayText:{id:"Delete the selected instances from the scene"},noShortcut:!0},TOGGLE_WINDOW_MASK:{area:"SCENE",displayText:{id:"Toggle mask"}},TOGGLE_GRID:{area:"SCENE",displayText:{id:"Toggle grid"}},OPEN_SETUP_GRID:{area:"SCENE",displayText:{id:"Setup grid"}},EDIT_LAYER_EFFECTS:{area:"SCENE",displayText:{id:"Edit layer effects..."}},EDIT_LAYER:{area:"SCENE",displayText:{id:"Edit layer..."}},EDIT_OBJECT:{area:"SCENE",displayText:{id:"Edit object..."}},EDIT_OBJECT_BEHAVIORS:{area:"SCENE",displayText:{id:"Edit object behaviors..."}},EDIT_OBJECT_EFFECTS:{area:"SCENE",displayText:{id:"Edit object effects..."}},EDIT_OBJECT_VARIABLES:{area:"SCENE",displayText:{id:"Edit object variables..."}},EDIT_OBJECT_GROUP:{area:"SCENE",displayText:{id:"Edit object group..."}},ADD_STANDARD_EVENT:{area:"EVENTS",displayText:{id:"Add a new empty event"}},ADD_SUBEVENT:{area:"EVENTS",displayText:{id:"Add a sub-event to the selected event"}},ADD_COMMENT_EVENT:{area:"EVENTS",displayText:{id:"Add a comment"}},TOGGLE_EVENT_DISABLED:{area:"EVENTS",displayText:{id:"Toggle disabled event"}},TOGGLE_CONDITION_INVERTED:{area:"EVENTS",displayText:{id:"Toggle inverted condition"}},CHOOSE_AND_ADD_EVENT:{area:"EVENTS",displayText:{id:"Choose and add an event..."}},MOVE_EVENTS_IN_NEW_GROUP:{area:"EVENTS",displayText:{id:"Move events into a new group"}},EVENTS_EDITOR_UNDO:{area:"EVENTS",displayText:{id:"Undo the last changes"},noShortcut:!0},EVENTS_EDITOR_REDO:{area:"EVENTS",displayText:{id:"Redo the last changes"},noShortcut:!0},DELETE_SELECTION:{area:"EVENTS",displayText:{id:"Delete the selected event(s)"},noShortcut:!0},SEARCH_EVENTS:{area:"EVENTS",displayText:{id:"Search in events"},noShortcut:!0},OPEN_EXTENSION_SETTINGS:{area:"EVENTS",displayText:{id:"Open extension settings"}}}},48025:function(e,t,n){"use strict";n.d(t,{J:function(){return d},x:function(){return u}});var r=n(29439),i=n(74165),o=n(15861),a=n(28381),s=n(93431),l=n(16999),c=n(29343),u=a.createContext({userLeaderboards:null,gameLeaderboards:null,error:null,fetchCommunityLeaderboards:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),d=function(e){var t=e.children,n=a.useState([]),d=(0,r.Z)(n,2),p=d[0],f=d[1],h=a.useState([]),g=(0,r.Z)(h,2),x=g[0],m=g[1],v=a.useState(null),b=(0,r.Z)(v,2),C=b[0],j=b[1],y=a.useRef(!1),Z=a.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var t,n,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y.current){e.next=2;break}return e.abrupt("return");case 2:return j(null),y.current=!0,e.prev=4,e.next=7,Promise.all([(0,s.Qv)(),(0,l.n6)()]);case 7:t=e.sent,n=(0,r.Z)(t,2),o=n[0],a=n[1],f(o),m(a),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),console.error("Unable to load the community leaderboards from the api:",e.t0),j(e.t0);case 19:y.current=!1;case 20:case"end":return e.stop()}}),e,null,[[4,15]])}))),[]),k=a.useMemo((function(){return{gameLeaderboards:x,userLeaderboards:p,error:C,fetchCommunityLeaderboards:Z}}),[x,p,C,Z]);return(0,c.jsx)(u.Provider,{value:k,children:t})}},36401:function(e,t,n){"use strict";var r=n(1413),i=n(36600),o=n(28381),a=n(40243),s=n(24910),l=n(61325),c=n(67835),u=n(86278),d=n(71106),p=n(84482),f=n(62903),h=n(29343),g={borderRadius:8,padding:8};t.Z=function(e){var t=e.displayPurchaseAction,n=o.useContext(s.Z),x=o.useContext(d.ZP),m=x.limits,v=x.onRefreshLimits,b=o.useContext(f.q$).openCreditsPackageDialog;return o.useEffect((function(){v()}),[v]),m?(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{style:(0,r.Z)((0,r.Z)({},g),{},{backgroundColor:n.credits.backgroundColor,color:n.credits.color}),children:(0,h.jsxs)(l.ep,{alignItems:"center",justifyContent:"space-between",noMargin:!0,children:[(0,h.jsx)(a.sg,{children:(0,h.jsxs)(l.pJ,{alignItems:"flex-end",noMargin:!0,children:[(0,h.jsx)(p.Z,{}),(0,h.jsx)(u.Z,{noMargin:!0,color:"inherit",children:(0,h.jsx)(i.Trans,{id:"Credits available: {0}",values:{0:m.credits.userBalance.amount}})})]})}),t&&(0,h.jsx)(a.sg,{children:(0,h.jsx)(c.Z,{label:(0,h.jsx)(i.Trans,{id:"Get credit packs"}),onClick:function(){return b({showCalloutTip:!0})},style:{color:n.credits.color,borderColor:n.credits.color}})})]})})}):null}},84482:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"19",height:"20",viewBox:"0 0 19 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("ellipse",{cx:"9.5",cy:"11",rx:"9.5",ry:"9",fill:"#CE8C0C"}),(0,a.jsx)("circle",{cx:"9.5",cy:"9.5",r:"9.5",fill:"url(#paint0_linear_1964_314)"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 16.4333C13.3292 16.4333 16.4333 13.3292 16.4333 9.5C16.4333 5.67083 13.3292 2.56667 9.5 2.56667C5.67083 2.56667 2.56667 5.67083 2.56667 9.5C2.56667 13.3292 5.67083 16.4333 9.5 16.4333ZM9.5 17.5C13.9183 17.5 17.5 13.9183 17.5 9.5C17.5 5.08172 13.9183 1.5 9.5 1.5C5.08172 1.5 1.5 5.08172 1.5 9.5C1.5 13.9183 5.08172 17.5 9.5 17.5Z",fill:"#E2AB1A"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.4333 9.5C16.4333 4.7 12.3894 2.86822 11.3667 2.3C10.344 1.73178 9.5 1.5 9.5 1.5C13.9183 1.5 17.5 5.08172 17.5 9.5C17.5 13.9183 13.9183 17.5 9.5 17.5C9.5 17.5 9.76693 17.4956 11.3667 16.9667C12.9664 16.4377 16.4333 13.3292 16.4333 9.5Z",fill:"#D89C00"}),(0,a.jsx)("path",{d:"M9.13173 13C8.18994 13 7.28325 12.7555 6.48229 12.2233C5.92399 11.8524 5.27783 11.015 5.27783 9.59536C5.27783 6.96158 6.67931 6.00034 9.49569 6.00034L13.5425 6.00034C13.5425 6.00034 13.6672 5.99421 13.7025 6.03404C13.747 6.08418 13.7025 6.20269 13.7025 6.20269L13.3217 7.32404C13.3217 7.32404 13.2713 7.4283 13.2189 7.46231C13.1577 7.5021 13.0581 7.50045 13.0581 7.50045H9.88209C8.02323 7.50045 6.91792 7.63961 6.91792 9.59536C6.91792 10.2414 7.10769 10.7011 7.49828 11.0007C8.15841 11.507 9.44149 11.5285 10.2255 11.456C10.2255 11.456 10.5472 10.463 10.6002 10.3018C10.6622 10.1129 10.635 10.0678 10.4415 10.0678C10.1618 10.0678 9.65919 10.0678 9.1257 10.0678C8.75182 10.0678 8.38451 9.88722 8.38451 9.45335C8.38451 9.03435 8.72625 8.79115 9.19471 8.79115C10.0058 8.79115 11.6764 8.79115 11.989 8.79115C12.3989 8.79115 12.8172 8.84757 12.6038 9.47049L11.4736 12.761C11.4736 12.761 10.5502 13 9.13173 13Z",fill:"#E2A60B"}),(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"paint0_linear_1964_314",x1:"9.5",y1:"0",x2:"9.5",y2:"19",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#FEDC28"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]})})]}))}))},28923:function(e,t,n){"use strict";var r={eventsFunctionsExtensionsError:null,loadProjectEventsFunctionsExtensions:function(){return Promise.reject(new Error("Use a provider"))},unloadProjectEventsFunctionsExtensions:function(){},reloadProjectEventsFunctionsExtensions:function(){return Promise.reject(new Error("Use a provider"))},reloadProjectEventsFunctionsExtensionMetadata:function(){throw new Error("Use a provider")},unloadProjectEventsFunctionsExtension:function(){},getEventsFunctionsExtensionWriter:function(){return null},getEventsFunctionsExtensionOpener:function(){return null},ensureLoadFinished:function(){return Promise.reject(new Error("Use a provider"))},getIncludeFileHashs:function(){return{}}},i=n(28381).createContext(r);t.Z=i},51458:function(e,t,n){"use strict";n.d(t,{$5:function(){return g},At:function(){return o},Op:function(){return b},_u:function(){return v},e0:function(){return x},fP:function(){return a},mK:function(){return C},xo:function(){return m}});var r=n(18455),i=n.g.gd,o=function(e,t,n){return Promise.all((0,r.mapFor)(0,e.getEventsFunctionsExtensionsCount(),(function(r){return s(e,e.getEventsFunctionsExtensionAt(r),{skipCodeGeneration:!0,eventsFunctionCodeWriter:t,i18n:n})}))).then((function(){return Promise.all((0,r.mapFor)(0,e.getEventsFunctionsExtensionsCount(),(function(r){return s(e,e.getEventsFunctionsExtensionAt(r),{skipCodeGeneration:!1,eventsFunctionCodeWriter:t,i18n:n})})))}))},a=function(e,t,n,r){var o=u(e,t,{eventsFunctionCodeWriter:n,i18n:r});i.JsPlatform.get().addNewExtension(o),o.delete()},s=function(e,t,n){return c(e,t,n).then((function(e){i.JsPlatform.get().addNewExtension(e),e.delete()}))},l=function(e,t,n){return(0,r.mapFor)(0,t.getEventsFunctionsCount(),(function(e){var r=t.getEventsFunctionAt(e),o=i.MetadataDeclarationHelper.getFreeFunctionCodeName(t,r);return n.eventsFunctionCodeWriter.getIncludeFileFor(o)})).filter(Boolean)},c=function(e,t,n){var o=new i.PlatformExtension;i.MetadataDeclarationHelper.declareExtension(o,t);var a={codeNamespacePrefix:i.MetadataDeclarationHelper.getExtensionCodeNamespacePrefix(t),extensionIncludeFiles:l(0,t,n)};return Promise.all((0,r.mapVector)(t.getEventsBasedBehaviors(),(function(r){return function(e,t,n,r,o,a){return Promise.resolve().then((function(){var s=new i.MapStringString,l=f(e,t,n,r,o,a,s);if(o.skipCodeGeneration)return s.delete(),Promise.resolve();var c=i.MetadataDeclarationHelper.getBehaviorFunctionCodeNamespace(r,a.codeNamespacePrefix),u=new i.SetString,d=new i.BehaviorCodeGenerator(e),p=d.generateRuntimeBehaviorCompleteCode(n.getName(),r,c,s,u,!0);return d.delete(),s.delete(),u.toNewVectorString().toJSArray().forEach((function(e){l.addIncludeFile(e)})),u.delete(),o.eventsFunctionCodeWriter.writeBehaviorCode(c,p)}))}(e,o,t,r,n,a)}))).then((function(){return Promise.all((0,r.mapVector)(t.getEventsBasedObjects(),(function(r){return function(e,t,n,r,o,a){return Promise.resolve().then((function(){var s=new i.MapStringString,l=h(e,t,n,r,o,a,s);if(o.skipCodeGeneration)return s.delete(),Promise.resolve();var c=i.MetadataDeclarationHelper.getObjectFunctionCodeNamespace(r,a.codeNamespacePrefix),u=new i.SetString,d=new i.ObjectCodeGenerator(e),p=d.generateRuntimeObjectCompleteCode(n.getName(),r,c,s,u,!0);return d.delete(),s.delete(),u.toNewVectorString().toJSArray().forEach((function(e){l.addIncludeFile(e)})),u.delete(),o.eventsFunctionCodeWriter.writeObjectCode(c,p)}))}(e,o,t,r,n,a)})))})).then((function(){return Promise.all((0,r.mapFor)(0,t.getEventsFunctionsCount(),(function(r){var i=t.getEventsFunctionAt(r);return d(e,o,t,i,n,a)})))})).then((function(e){return o}))},u=function(e,t,n){var o=new i.PlatformExtension;i.MetadataDeclarationHelper.declareExtension(o,t);var a={codeNamespacePrefix:i.MetadataDeclarationHelper.getExtensionCodeNamespacePrefix(t),extensionIncludeFiles:l(0,t,n)};(0,r.mapVector)(t.getEventsBasedBehaviors(),(function(r){var s=new i.MapStringString;f(e,o,t,r,n,a,s),s.delete()})),(0,r.mapVector)(t.getEventsBasedObjects(),(function(r){var s=new i.MapStringString;h(e,o,t,r,n,a,s),s.delete()}));var s=new i.MetadataDeclarationHelper;return(0,r.mapFor)(0,t.getEventsFunctionsCount(),(function(r){var i=t.getEventsFunctionAt(r);return p(e,o,t,i,n,a,s)})),s.delete(),o},d=function(e,t,n,r,o,a){var s=new i.MetadataDeclarationHelper,l=p(e,t,n,r,o,a,s).functionMetadata;if(o.skipCodeGeneration)return Promise.resolve();var c=new i.SetString,u=new i.EventsFunctionsExtensionCodeGenerator(e),d=i.MetadataDeclarationHelper.getFreeFunctionCodeNamespace(r,a.codeNamespacePrefix),f=u.generateFreeEventsFunctionCompleteCode(n,r,d,c,!0);c.toNewVectorString().toJSArray().forEach((function(e){l.addIncludeFile(e)})),c.delete(),u.delete(),s.delete();var h=i.MetadataDeclarationHelper.getFreeFunctionCodeName(n,r);return o.eventsFunctionCodeWriter.writeFunctionCode(h,f).then((function(){}))},p=function(e,t,n,r,o,a,s){var l=s.generateFreeFunctionMetadata(e,t,n,r),c=i.MetadataDeclarationHelper.getFreeFunctionCodeName(n,r),u=o.eventsFunctionCodeWriter.getIncludeFileFor(c);return l.addIncludeFile(u),a.extensionIncludeFiles.forEach((function(e){l.addIncludeFile(e)})),{functionFile:u,functionMetadata:l}};function f(e,t,n,r,o,a,s){var l=i.MetadataDeclarationHelper.generateBehaviorMetadata(e,t,n,r,s),c=i.MetadataDeclarationHelper.getBehaviorFunctionCodeNamespace(r,a.codeNamespacePrefix),u=o.eventsFunctionCodeWriter.getIncludeFileFor(c);return l.addIncludeFile(u),a.extensionIncludeFiles.forEach((function(e){l.addIncludeFile(e)})),l}function h(e,t,n,r,o,a,s){var l=i.MetadataDeclarationHelper.generateObjectMetadata(e,t,n,r,s),c=i.MetadataDeclarationHelper.getObjectFunctionCodeNamespace(r,a.codeNamespacePrefix),u=o.eventsFunctionCodeWriter.getIncludeFileFor(c);return l.addIncludeFile(u),a.extensionIncludeFiles.forEach((function(e){l.addIncludeFile(e)})),l}var g=function(e){return Promise.all((0,r.mapFor)(0,e.getEventsFunctionsExtensionsCount(),(function(t){i.JsPlatform.get().removeExtension(e.getEventsFunctionsExtensionAt(t).getName())})))},x=function(e,t){i.JsPlatform.get().removeExtension(t)},m=function(e){var t=e.getParametersCount();return!(t<=0)&&"eventsFunctionContext"===e.getParameter(t-1).getType()},v=function(e){var t=e.split("::");return t.length?{name:t[t.length-1],behaviorName:t.length>2?t[1]:void 0,extensionName:t[0]}:{name:"",behaviorName:"",extensionName:""}},b=function(e,t){return e+"::"+t.getName()},C=Object.freeze({FreeFunction:1,BehaviorFunction:0,ObjectFunction:0})},43370:function(e,t,n){"use strict";var r=n(74165),i=n(15861),o=n(36600),a=n(28381),s=n(32484),l=n(40243),c=n(86578),u=n(95100),d=n(86278),p=n(10959),f=n(16999),h=n(2066),g=n(61325),x=n(71106),m=n(57597),v=n(42699),b=n(17361),C=n(90264),j=n(14737),y=n(64480),Z=n(67835),k=n(44634),w=n(29343),T={"cordova-build":{estimatedTimeInSeconds:function(e){return 300},completeDescription:"You can download it on your Android phone and install it."},"cordova-ios-build":{estimatedTimeInSeconds:function(e){return 150},completeDescription:""},"electron-build":{estimatedTimeInSeconds:function(e){return 90+130*(e.targets?e.targets.length:0)},completeDescription:""},"web-build":{estimatedTimeInSeconds:function(e){return 5},completeDescription:""}},S=[{displayName:{id:"Download (APK)"},key:"apkKey",icon:(0,w.jsx)(b.Z,{})},{displayName:{id:"Download (Android App Bundle)"},key:"aabKey",icon:(0,w.jsx)(b.Z,{})},{displayName:{id:"Windows (zip)"},key:"windowsZipKey",icon:(0,w.jsx)(b.Z,{})},{displayName:{id:"Windows (exe)"},key:"windowsExeKey",icon:(0,w.jsx)(b.Z,{})},{displayName:{id:"macOS (zip)"},key:"macosZipKey",icon:(0,w.jsx)(b.Z,{})},{displayName:{id:"IPA for App Store"},key:"iosAppStoreIpaKey",icon:(0,w.jsx)(b.Z,{})},{displayName:{id:"IPA for testing on registered devices"},key:"iosDevelopmentIpaKey",icon:(0,w.jsx)(b.Z,{})},{displayName:{id:"Linux (AppImage)"},key:"linuxAppImageKey",icon:(0,w.jsx)(b.Z,{})},{displayName:{id:"Open build link"},key:"s3Key",icon:(0,w.jsx)(k.Z,{})}];t.Z=function(e){var t=e.build,n=e.game,b=e.onGameUpdated,k=e.gameUpdating,P=e.setGameUpdating,E=e.onCopyToClipboard,I=a.useContext(x.ZP),M=I.getAuthorizationHeader,L=I.profile,A=T[t.type],F=A.estimatedTimeInSeconds(t),O=Math.abs((0,u.Z)(t.updatedAt,Date.now())),R=F-O,D=R>0,_=!D&&R>=-F,B=!D&&R<-F,N=function(e){var n=(0,p.Fp)(t,e);n&&h.ZP.openExternalURL(n)},U=function(){var e=(0,p.Fp)(t,"s3Key");e&&navigator.clipboard.writeText(e),E&&E()},H=a.useCallback(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(i,o){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L&&n&&b&&P){e.next=2;break}return e.abrupt("return");case 2:if(a=L.id,h.ZP.showConfirmDialog(i?o._({id:'"{0}" will be the new build of this game published on gd.games. Continue?',values:{0:t.name||(0,j.GA)(t.id)}}):o._({id:'"{0}" will be unpublished on gd.games. Continue?',values:{0:t.name||(0,j.GA)(t.id)}}))){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,P(!0),e.next=10,(0,f.Bi)(M,a,n.id,{publicWebBuildId:i});case 10:return e.next=12,b();case 12:P(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(6),console.error("Unable to update the game",e.t0),P(!1);case 19:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t,n){return e.apply(this,arguments)}}(),[L,n,b,P,t.name,t.id,M]),V=!!n&&n.publicWebBuildId===t.id;return(0,w.jsx)(o.I18n,{children:function(e){var r=e.i18n;return"error"===t.status?(0,w.jsxs)(g.ep,{alignItems:"center",justifyContent:"space-between",expand:!0,children:[(0,w.jsxs)(l.sg,{noMargin:!0,children:[(0,w.jsx)(d.Z,{noMargin:!0,children:(0,w.jsx)(o.Trans,{id:"Something wrong happened :("})}),(0,w.jsx)(c.Z,{style:{justifyContent:"flex-start",padding:0},children:(0,w.jsx)(o.Trans,{id:"Check the logs to see if there is an explanation about what went wrong, or try again later."})})]}),(0,w.jsx)(s.Z,{primary:!0,label:(0,w.jsx)(o.Trans,{id:"Download log files"}),onClick:function(){return N("logsKey")}})]}):"pending"===t.status?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(l.x1,{alignItems:"center",expand:!0,justifyContent:"center",children:[(D||_)&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(y.Z,{value:D?(F-R)/F*100:0,variant:D?"determinate":"indeterminate"}),(0,w.jsx)(l.LZ,{})]}),D&&(0,w.jsx)(d.Z,{children:(0,w.jsx)(o.Trans,{id:"~{0} minutes.",values:{0:Math.round(R/60)}})}),_&&(0,w.jsx)(d.Z,{children:(0,w.jsx)(o.Trans,{id:"Should finish soon."})})]}),B&&(0,w.jsxs)(l.sg,{children:[(0,w.jsx)(l.x1,{justifyContent:"flex-end",noMargin:!0,children:(0,w.jsx)(d.Z,{noMargin:!0,children:(0,w.jsx)(o.Trans,{id:"Something wrong happened :("})})}),(0,w.jsx)(l.x1,{justifyContent:"flex-end",noMargin:!0,children:(0,w.jsx)(c.Z,{style:{justifyContent:"flex-end",padding:0},children:(0,w.jsx)(o.Trans,{id:"It looks like the build has timed out, please try again."})})})]})]}):"complete"===t.status?(0,w.jsxs)(g.ak,{noMargin:!0,expand:!0,children:[(0,w.jsxs)(g.ep,{expand:!0,justifyContent:"space-between",noMargin:!0,children:[(0,w.jsxs)(g.ep,{noMargin:!0,noColumnMargin:!0,children:[n&&!!t.s3Key&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(m.Z,{label:(0,w.jsx)(o.Trans,{id:"Publish this build on gd.games"}),labelPosition:"left",toggled:V,onToggle:function(){H(V?null:t.id,r)},disabled:k}),(0,w.jsx)(l.LZ,{}),(0,w.jsx)(v.Z,{label:(0,w.jsx)(o.Trans,{id:"Copy build link"}),icon:(0,w.jsx)(C.Z,{}),onClick:U})]}),S.filter((function(e){return!!t[e.key]})).map((function(e){return(0,w.jsxs)(a.Fragment,{children:[(0,w.jsx)(s.Z,{primary:!0,label:r._(e.displayName),onClick:function(){return N(e.key)},icon:e.icon}),(0,w.jsx)(l.LZ,{})]},e.key)}))]}),(0,w.jsx)(Z.Z,{label:(0,w.jsx)(o.Trans,{id:"Download log files"}),onClick:function(){return N("logsKey")}})]}),A&&A.completeDescription&&(0,w.jsx)(l.x1,{expand:!0,justifyContent:"flex-start",noMargin:!0,children:(0,w.jsx)(d.Z,{noMargin:!0,size:"body2",children:A.completeDescription})})]}):(0,w.jsx)(l.x1,{children:(0,w.jsx)(o.Trans,{id:"Unknown status"})})}})}},14746:function(e,t,n){"use strict";var r=n(1413),i=n(36600),o=n(28381),a=n(21741),s=n(73211),l=n(40934),c=n(16413),u=n(75118),d=n(40243),p=n(43370),f=n(86578),h=n(86278),g=n(82936),x=n(64480),m=n(66789),v=n(17358),b=n(53949),C=n(24910),j=n(29343),y={flex:1,padding:8},Z=(0,v.Z)((function(e){return{text:{fill:e.palette.secondary.contrastText},completed:{fill:e.palette.secondary.main},active:{fill:e.palette.secondary.main}}})),k=(0,v.Z)((function(e){return{root:{flex:0}}})),w=function(e){var t=Z();return(0,j.jsx)(l.Z,(0,r.Z)((0,r.Z)({},e),{},{StepIconComponent:function(e){return(0,j.jsx)(b.Z,(0,r.Z)((0,r.Z)({},e),{},{classes:t}))},children:e.children}))};t.Z=function(e){var t=e.exportStep,n=e.build,l=e.stepMaxProgress,v=e.stepCurrentProgress,b=e.errored,Z=e.hasBuildStep,T=e.showSeeAllMyBuildsExplanation,S=o.useContext(C.Z),P=o.useCallback((function(){return"register"===t||"export"===t||"resources-download"===t?0:"compress"===t||"upload"===t?1:"waiting-for-build"===t||"build"===t?2:"done"===t?Z?2:1:-1}),[t,Z]),E=k();return(0,j.jsxs)(a.Z,{activeStep:P(),orientation:"vertical",style:(0,r.Z)((0,r.Z)({},y),{},{backgroundColor:S.paper.backgroundColor.medium}),connector:(0,j.jsx)(u.Z,{classes:E}),children:[(0,j.jsxs)(s.Z,{children:[(0,j.jsx)(w,{children:(0,j.jsx)(i.Trans,{id:"Game export"})}),(0,j.jsx)(c.Z,{children:b?(0,j.jsxs)(g.Z,{kind:"error",children:[(0,j.jsx)(i.Trans,{id:"Can't properly export the game."})," ",(0,j.jsx)(i.Trans,{id:"Please check your internet connection or try again later."})]}):"resources-download"===t?(0,j.jsxs)(d.sg,{expand:!0,noMargin:!0,children:[(0,j.jsx)(h.Z,{children:(0,j.jsx)(i.Trans,{id:"Downloading game resources..."})}),(0,j.jsx)(d.x1,{expand:!0,children:(0,j.jsx)(x.Z,{value:l>0?v/l*100:0,variant:"determinate"})})]}):(0,j.jsxs)(d.sg,{expand:!0,noMargin:!0,children:[(0,j.jsx)(h.Z,{children:(0,j.jsx)(i.Trans,{id:"Export in progress..."})}),(0,j.jsx)(d.x1,{expand:!0,children:(0,j.jsx)(x.Z,{})})]})})]}),Z&&(0,j.jsxs)(s.Z,{children:[(0,j.jsx)(w,{children:(0,j.jsx)(i.Trans,{id:"Upload to build service"})}),(0,j.jsx)(c.Z,{children:b?(0,j.jsxs)(g.Z,{kind:"error",children:[(0,j.jsx)(i.Trans,{id:"Can't upload your game to the build service."})," ",(0,j.jsx)(i.Trans,{id:"Please check your internet connection or try again later."})]}):"compress"===t?(0,j.jsxs)(d.x1,{alignItems:"center",children:[(0,j.jsx)(m.Z,{size:20}),(0,j.jsx)(d.LZ,{}),(0,j.jsx)(h.Z,{children:(0,j.jsx)(i.Trans,{id:"Compressing before upload..."})})]}):(0,j.jsx)(d.x1,{alignItems:"center",expand:!0,children:(0,j.jsx)(x.Z,{value:l>0?v/l*100:0,variant:"determinate"})})})]}),Z&&(0,j.jsxs)(s.Z,{children:[(0,j.jsx)(w,{children:(0,j.jsx)(i.Trans,{id:"Build and download"})}),(0,j.jsxs)(c.Z,{children:[b&&(0,j.jsx)(g.Z,{kind:"error",children:(0,j.jsx)(i.Trans,{id:"Build could not start or errored. Please check your internet connection or try again later."})}),!n&&!b&&(0,j.jsx)(h.Z,{children:(0,j.jsx)(i.Trans,{id:"Build is starting..."})}),n&&(0,j.jsx)(p.Z,{build:n}),T&&(0,j.jsx)(f.Z,{children:(0,j.jsx)(i.Trans,{id:"If you close this window while the build is being done, you can see its progress and download the game later by clicking on See All My Builds below."})})]})]}),!Z&&(0,j.jsxs)(s.Z,{children:[(0,j.jsx)(w,{children:(0,j.jsx)(i.Trans,{id:"Done"})}),(0,j.jsx)(c.Z,{})]})]})}},3498:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(74165),i=n(15861),o=n(15671),a=n(43144),s=n(10959),l=n(58336),c=18e5,u=function(){function e(){var t=this;(0,o.Z)(this,e),this.runningWatchers={},this.nextWatcherId=0,this._pollBuild=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,i){var o,a,c,u,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t.nextWatcherId.toString(),t.nextWatcherId++,t.runningWatchers[o]=!0,a=null;case 4:if(t.authenticatedUser){e.next=6;break}return e.abrupt("return");case 6:if(c=t.authenticatedUser,u=c.getAuthorizationHeader,d=c.firebaseUser){e.next=9;break}return e.abrupt("return");case 9:return e.prev=9,console.info("Checking progress of build ".concat(n,"...")),e.next=13,(0,s.Xr)(u,d.uid,n);case 13:a=e.sent,t.onBuildUpdated&&t.onBuildUpdated(a),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(9),console.warn("Error while watching build progress:",e.t0);case 20:return e.next=22,(0,l.g)(i);case 22:if(t.runningWatchers[o]){e.next=25;break}return console.info("Stopping watch of build ".concat(n,".")),e.abrupt("return");case 25:if(a&&"pending"===a.status){e.next=4;break}case 26:console.info("Watch of build ".concat(n," finished."));case 27:case"end":return e.stop()}}),e,null,[[9,17]])})));return function(t,n){return e.apply(this,arguments)}}()}return(0,a.Z)(e,[{key:"start",value:function(e){var t=this,n=e.authenticatedUser,r=e.builds,i=e.onBuildUpdated;this.stop(),this.authenticatedUser=n,this.onBuildUpdated=i,r.forEach((function(e){"pending"===e.status&&((!e.createdAt||e.createdAt<Date.now()-c)&&(!e.updatedAt||e.updatedAt<Date.now()-c)?console.info("Ignoring a build for polling as it's too old and still pending",e):t._pollBuild(e.id,r.length>1?5e3:1500))}))}},{key:"stop",value:function(){this.runningWatchers={}}}]),e}()},86335:function(e,t,n){"use strict";n.d(t,{Z:function(){return te}});var r=n(1413),i=n(15671),o=n(43144),a=n(60136),s=n(29388),l=n(28381),c=n(29439),u=n(36600),d=n(40243),p=n(86578),f=n(78081),h=n(61325),g=n(75383),x=n(81683),m=n(90242),v=n(74165),b=n(15861),C=n(20968),j=n(96522),y=n(51375),Z=n(86278),k=n(22537),w=n(51598),T=n(90264),S=n(24910),P=n(54168),E=n(29277),I=n(30141),M=n(1589),L=n(65111),A=n(87284),F=n(43370),O=n(6996),R=n(10959),D=n(2066),_=n(66789),B=n(61804),N=n(50583),U=n(35638),H=n(99221),V=n(29343),z={icon:{height:16,width:16,marginRight:4},buildButtonIcon:{height:16,width:16,opacity:.6},openForFeedbackIndicator:{height:4,width:4,borderRadius:4},cardContent:{flex:1},textField:{width:"70%"},circularProgress:{height:20,width:20}},W=function(e){switch(e){case"cordova-build":return(0,V.jsx)(u.Trans,{id:"Android Build"});case"cordova-ios-build":return(0,V.jsx)(u.Trans,{id:"iOS Build"});case"electron-build":return(0,V.jsx)(u.Trans,{id:"Windows/macOS/Linux Build"});case"web-build":return(0,V.jsx)(u.Trans,{id:"Web Build"});default:return e}},G=function(e){switch(e){case"cordova-build":return(0,V.jsx)(H.Z,{style:z.icon});case"cordova-ios-build":return(0,V.jsx)(U.Z,{style:z.icon});case"electron-build":return(0,V.jsx)(N.Z,{style:z.icon});default:return(0,V.jsx)(y.Z,{style:z.icon})}},Y=function(e){var t=e.build;return(0,V.jsxs)(d.x1,{alignItems:"end",children:[(0,V.jsxs)(d.x1,{noMargin:!0,alignItems:"center",children:[G(t.type),(0,V.jsx)(Z.Z,{noMargin:!0,children:(0,V.jsx)(u.Trans,{id:"{0}",values:{0:W(t.type)}})})]}),(0,V.jsx)(d.LZ,{}),(0,V.jsx)(M.Z,{children:(0,V.jsx)(u.Trans,{id:"{0}",values:{0:(0,C.Z)(t.updatedAt,"yyyy-MM-dd HH:mm:ss")}})})]})},q="yyyy-MM-dd-HH-mm-ss",X=function(e){var t=e.build,n=e.game,i=e.onGameUpdated,o=e.gameUpdating,a=e.setGameUpdating,s=e.onBuildUpdated,f=e.onBuildDeleted,g=e.authenticatedUser,x=g.getAuthorizationHeader,m=g.profile,y="".concat(n.gameName.toLowerCase().replace(/ /g,"-").slice(0,30),"-").concat((0,C.Z)(t.updatedAt,q)),N=t.name?t.name:y,U=n.publicWebBuildId===t.id,H=t&&"web-build"!==t.type&&(0,j.Z)(Date.now(),t.updatedAt)>6,W=l.useContext(S.Z),G=l.useRef(null),X=(0,O.U)().isMobile,K=l.useState(!1),J=(0,c.Z)(K,2),Q=J[0],$=J[1],ee=l.useState(!1),te=(0,c.Z)(ee,2),ne=te[0],re=te[1],ie=l.useState(N),oe=(0,c.Z)(ie,2),ae=oe[0],se=oe[1],le=function(){navigator.clipboard.writeText(t.id),$(!0)},ce=function(){re(!0),G.current&&G.current.focus()},ue=function(){var e=(0,b.Z)((0,v.Z)().mark((function e(n){var i,o;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}return e.abrupt("return");case 2:if(i=ae.trim()){e.next=7;break}se(t.name||""),e.next=26;break;case 7:if(i!==N){e.next=11;break}se(ae.trim()),e.next=26;break;case 11:return e.prev=11,a(!0),e.next=15,(0,R.QX)(x,m.id,t.id,{name:ae});case 15:o=e.sent,s((0,r.Z)((0,r.Z)({},t),{},{name:o.name})),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(11),se(t.name||""),(0,I.gR)({message:n._({id:"Could not update the build name. Verify your internet connection or try again later."}),rawError:e.t0,errorId:"build-name-update-error"});case 23:return e.prev=23,a(!1),e.finish(23);case 26:re(!1);case 27:case"end":return e.stop()}}),e,null,[[11,19,23,26]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=(0,b.Z)((0,v.Z)().mark((function e(n){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}return e.abrupt("return");case 2:if(D.ZP.showConfirmDialog("You are about to delete this build. Continue?")){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,a(!0),e.next=9,(0,R.c8)(x,m.id,t.id);case 9:a(!1),f(t),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),(0,I.gR)({message:n._({id:"Could not delete the build. Verify your internet connection or try again later."}),rawError:e.t0,errorId:"build-delete-error"}),a(!1);case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}();return(0,V.jsx)(u.I18n,{children:function(e){var s=e.i18n;return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(A.Z,{isHighlighted:U,cardCornerAction:(0,V.jsx)(P.Z,{element:(0,V.jsx)(w.Z,{size:"small",disabled:o,children:(0,V.jsx)(B.Z,{})}),buildMenuTemplate:function(e){return[{label:e._({id:"Edit build name"}),click:ce},{type:"separator"},{label:e._({id:"Delete build"}),click:function(){return de(e)}}]}}),header:(0,V.jsxs)(d.x1,{noMargin:!0,alignItems:"start",justifyContent:"space-between",children:[!X&&(0,V.jsx)(Y,{build:t}),(0,V.jsx)(d.sg,{expand:!0,noMargin:!0,justifyContent:"center",children:(0,V.jsx)(d.x1,{noMargin:!0,justifyContent:"end",children:U?(0,V.jsx)(Z.Z,{size:"body2",children:(0,V.jsx)(u.Trans,{id:"Current build online"})}):n.acceptsBuildComments&&"web-build"===t.type&&(0,V.jsxs)(h.pJ,{alignItems:"center",noMargin:!0,children:[(0,V.jsx)("div",{style:(0,r.Z)((0,r.Z)({},z.openForFeedbackIndicator),{},{backgroundColor:W.message.valid})}),(0,V.jsx)(Z.Z,{size:"body2",children:(0,V.jsx)(u.Trans,{id:"Build open for feedbacks"})})]})})})]}),children:(0,V.jsxs)(d.sg,{expand:!0,noMargin:!0,children:[X&&(0,V.jsx)(Y,{build:t}),(0,V.jsx)(d.LZ,{}),(0,V.jsx)(d.x1,{noMargin:!0,children:ne?(0,V.jsxs)(d.x1,{noMargin:!0,expand:!0,children:[(0,V.jsx)(E.ZP,{ref:G,style:z.textField,value:ae,margin:"none",onChange:function(e,t){return se(t)},onBlur:function(){ue(s)},hintText:N,disabled:o,onKeyPress:function(e){(0,L.ph)(e)&&G.current&&G.current.blur()},onKeyDown:function(e){(0,L.W$)(e)&&(e.stopPropagation(),re(!1),se(N))},maxLength:50}),o&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(d.LZ,{}),(0,V.jsx)(_.Z,{style:z.circularProgress})]})]}):(0,V.jsx)(d.x1,{noMargin:!0,alignItems:"baseline",children:(0,V.jsx)(Z.Z,{noMargin:!0,children:N})})}),(0,V.jsxs)(d.x1,{noMargin:!0,alignItems:"center",children:[(0,V.jsx)(M.Z,{style:{textAlign:"left"},children:t.id}),(0,V.jsx)(d.LZ,{}),(0,V.jsx)(w.Z,{size:"small",onClick:le,children:(0,V.jsx)(T.Z,{style:z.buildButtonIcon})})]}),(0,V.jsx)(d.hS,{}),(0,V.jsxs)(d.x1,{expand:!0,noMargin:!0,justifyContent:"space-between",children:[!H&&(0,V.jsx)(F.Z,{build:t,game:n,onGameUpdated:i,gameUpdating:o,setGameUpdating:a,onCopyToClipboard:function(){return $(!0)}}),H&&(0,V.jsx)(p.Z,{children:(0,V.jsx)(u.Trans,{id:"This build is old and the generated games can't be downloaded anymore."})})]})]})}),(0,V.jsx)(k.Z,{visible:Q,hide:function(){return $(!1)},message:(0,V.jsx)(u.Trans,{id:"Copied to clipboard!"})})]})}})},K={emptyMessageStyle:{textAlign:"left"}},J=[{key:"all-build",value:"all-build",label:{id:"All builds"}},{key:"web-build",value:"web-build",label:{id:"Web builds"}},{key:"cordova-build",value:"cordova-build",label:{id:"Android builds"}},{key:"cordova-ios-build",value:"cordova-ios-build",label:{id:"iOS builds"}},{key:"electron-build",value:"electron-build",label:{id:"Desktop builds"}}],Q={"web-build":(0,V.jsx)(u.Trans,{id:"You don't have any web builds for this game."}),"cordova-build":(0,V.jsx)(u.Trans,{id:"You don't have any Android builds for this game."}),"cordova-ios-build":(0,V.jsx)(u.Trans,{id:"You don't have any iOS builds for this game."}),"electron-build":(0,V.jsx)(u.Trans,{id:"You don't have any desktop builds for this game."}),"all-build":(0,V.jsx)(u.Trans,{id:"You don't have any builds for this game."})},$=function(e){var t=e.builds,n=e.authenticatedUser,r=e.error,i=e.loadBuilds,o=e.game,a=e.onGameUpdated,s=e.onBuildUpdated,v=e.onBuildDeleted,b=l.useState(!1),C=(0,c.Z)(b,2),j=C[0],y=C[1],Z=l.useState("all-build"),k=(0,c.Z)(Z,2),w=k[0],T=k[1],S=function(e,t){if(e)switch(t){case"web-build":return e.filter((function(e){return"web-build"===e.type}));case"cordova-build":return e.filter((function(e){return"cordova-build"===e.type}));case"cordova-ios-build":return e.filter((function(e){return"cordova-ios-build"===e.type}));case"electron-build":return e.filter((function(e){return"electron-build"===e.type}));default:return e}}(t,w);return(0,V.jsxs)(d.sg,{noMargin:!0,expand:!0,children:[(0,V.jsxs)(h.ep,{justifyContent:"space-between",children:[(0,V.jsx)(d.sg,{noMargin:!0,children:(0,V.jsx)(p.Z,{messageStyle:K.emptyMessageStyle,children:(0,V.jsx)(u.Trans,{id:"This is the list of builds that you've done for this game. <0/>Note that builds for mobile and desktop are available for 7 days, after which they are removed.",components:[(0,V.jsx)("br",{})]})})}),(0,V.jsx)(d.sg,{noMargin:!0,children:(0,V.jsx)(x.Z,{floatingLabelText:(0,V.jsx)(u.Trans,{id:"Show"}),value:w,onChange:function(e,t,n){T(n)},children:J.map((function(e){var t=e.key,n=e.value,r=e.label;return(0,V.jsx)(m.Z,{value:n,label:r},t)}))})})]}),(0,V.jsxs)(d.x1,{children:[!n.authenticated&&(0,V.jsx)(p.Z,{children:(0,V.jsx)(u.Trans,{id:"You need to login first to see your builds."})}),n.authenticated&&!S&&!r&&(0,V.jsx)(f.Z,{}),n.authenticated&&r&&(0,V.jsx)(g.Z,{onRetry:i,children:r.message}),n.authenticated&&S&&0===S.length&&(0,V.jsx)(p.Z,{children:Q[w]}),n.authenticated&&S&&0!==S.length&&(0,V.jsx)(h.ak,{expand:!0,noMargin:!0,children:S.map((function(e){return(0,V.jsx)(X,{build:e,game:o,onGameUpdated:a,gameUpdating:j,setGameUpdating:y,onBuildUpdated:s,onBuildDeleted:v,authenticatedUser:n},e.id)}))})]})]})},ee=n(3498),te=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={builds:null,error:null},e.buildsWatcher=new ee.Z,e._startBuildsWatcher=function(){e.state.builds&&e.buildsWatcher.start({authenticatedUser:e.props.authenticatedUser,builds:e.state.builds,onBuildUpdated:function(t){e.state.builds&&e.setState({builds:e.state.builds.map((function(e){return t.id===e.id?t:e}))})}})},e._refreshBuilds=function(){var t=e.props.authenticatedUser,n=t.getAuthorizationHeader,r=t.firebaseUser;if(r){var i=e.props.game.id;e.setState({builds:null,error:null}),(0,R.BY)(n,r.uid,i).then((function(t){e.setState({builds:t},(function(){e._startBuildsWatcher(),e.props.onBuildsUpdated&&e.props.onBuildsUpdated()}))}),(function(){e.setState({error:new Error("There was an issue getting the game builds, verify your internet connection or try again later.")})}))}},e._onBuildUpdated=function(t){e.setState((function(e){if(e.builds)return(0,r.Z)((0,r.Z)({},e),{},{builds:e.builds.map((function(e){return t.id===e.id?t:e}))})}))},e._onBuildDeleted=function(t){e.setState((function(e){if(e.builds)return(0,r.Z)((0,r.Z)({},e),{},{builds:e.builds.filter((function(e){return t.id!==e.id}))})}))},e}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this._refreshBuilds()}},{key:"componentWillUnmount",value:function(){this.buildsWatcher.stop()}},{key:"render",value:function(){return(0,V.jsx)($,{builds:this.state.builds,authenticatedUser:this.props.authenticatedUser,error:this.state.error,loadBuilds:this._refreshBuilds,game:this.props.game,onGameUpdated:this.props.onGameUpdated,onBuildUpdated:this._onBuildUpdated,onBuildDeleted:this._onBuildDeleted})}}]),n}(l.Component)},76349:function(e,t,n){"use strict";n.d(t,{Eg:function(){return x},VU:function(){return m},if:function(){return h},yg:function(){return g}});var r=n(36600),i=(n(28381),n(86278)),o=n(40243),a=n(61325),s=n(24233),l=n(67835),c=n(86065),u=n(39949),d=n(2066),p=n(32484),f=n(29343),h=function(){return(0,f.jsx)(i.Z,{align:"center",children:(0,f.jsx)(r.Trans,{id:"This will export your game as a Cordova project. Cordova is a technology that enables HTML5 games to be packaged for iOS and Android."})})},g=function(e){var t=e.disabled,n=e.launchExport,i=e.isExporting,a=e.exportStep,s=e.exportPipelineName;return"done"!==a?(0,f.jsx)(o.x1,{justifyContent:"center",children:(0,f.jsx)(p.Z,{label:i?(0,f.jsx)(r.Trans,{id:"Packaging..."}):(0,f.jsx)(r.Trans,{id:"Package game files"}),primary:!0,id:"launch-export-".concat(s,"-button"),onClick:n,disabled:t||i})}):null},x=function(e){var t=e.renderGameButton;return(0,f.jsxs)(o.sg,{noMargin:!0,alignItems:"center",children:[(0,f.jsxs)(a.pJ,{noMargin:!0,justifyContent:"center",alignItems:"center",children:[(0,f.jsx)(s.Z,{fontSize:"small"}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(r.Trans,{id:"Done!"})})]}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(r.Trans,{id:"You can now compile the game by yourself using Cordova command-line tool to iOS (XCode is required) or Android (Android SDK is required)."})}),(0,f.jsxs)(a.ak,{justifyContent:"center",children:[(0,f.jsx)(o.x1,{justifyContent:"center",children:t()}),(0,f.jsx)(l.Z,{label:(0,f.jsx)(r.Trans,{id:"Learn more about manual builds"}),primary:!0,onClick:function(){d.ZP.openExternalURL((0,u.vA)("/publishing/android_and_ios_with_cordova"))},leftIcon:(0,f.jsx)(c.Z,{})})]})]})},m={key:"cordovaexport",tabName:(0,f.jsx)(r.Trans,{id:"Mobile"}),name:(0,f.jsx)(r.Trans,{id:"iOS & Android (manual)"}),helpPage:"/publishing/android_and_ios_with_cordova"}},41426:function(e,t,n){"use strict";n.d(t,{Eg:function(){return x},c8:function(){return m},if:function(){return h},yg:function(){return g}});var r=n(36600),i=(n(28381),n(86278)),o=n(40243),a=n(61325),s=n(24233),l=n(67835),c=n(86065),u=n(39949),d=n(2066),p=n(32484),f=n(29343),h=function(){return(0,f.jsx)(i.Z,{align:"center",children:(0,f.jsx)(r.Trans,{id:"This will export your game so that you can package it for Windows, macOS or Linux. You will need to install third-party tools (Node.js, Electron Builder) to package your game."})})},g=function(e){var t=e.disabled,n=e.launchExport,i=e.isExporting,a=e.exportStep,s=e.exportPipelineName;return"done"!==a?(0,f.jsx)(o.x1,{justifyContent:"center",children:(0,f.jsx)(p.Z,{label:i?(0,f.jsx)(r.Trans,{id:"Packaging..."}):(0,f.jsx)(r.Trans,{id:"Package game files"}),primary:!0,id:"launch-export-".concat(s,"-button"),onClick:n,disabled:t||i})}):null},x=function(e){var t=e.renderGameButton;return(0,f.jsxs)(o.sg,{noMargin:!0,alignItems:"center",children:[(0,f.jsxs)(a.pJ,{noMargin:!0,justifyContent:"center",alignItems:"center",children:[(0,f.jsx)(s.Z,{fontSize:"small"}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(r.Trans,{id:"Done!"})})]}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(r.Trans,{id:"The game was properly exported. You can now use Electron Builder (you need Node.js installed and to use the command-line on your computer to run it) to create an executable."})}),(0,f.jsxs)(a.ak,{justifyContent:"center",children:[(0,f.jsx)(o.x1,{justifyContent:"center",children:t()}),(0,f.jsx)(l.Z,{label:(0,f.jsx)(r.Trans,{id:"Learn more about manual builds"}),primary:!0,onClick:function(){d.ZP.openExternalURL((0,u.vA)("/publishing/windows-macos-linux-with-electron"))},leftIcon:(0,f.jsx)(c.Z,{})})]})]})},m={key:"electronexport",tabName:(0,f.jsx)(r.Trans,{id:"Desktop"}),name:(0,f.jsx)(r.Trans,{id:"Windows/macOS/Linux (manual)"}),helpPage:"/publishing/windows-macos-linux-with-electron"}},15745:function(e,t,n){"use strict";n.d(t,{Eg:function(){return v},if:function(){return x},xu:function(){return b},yg:function(){return m}});var r=n(36600),i=(n(28381),n(86278)),o=n(40243),a=n(39949),s=n(2066),l=n(61325),c=n(22853),u=n(86065),d=n(24233),p=n(67835),f=n(32484),h=n(29343),g={icon:{height:48,width:48,margin:10}},x=function(){return(0,h.jsxs)(o.sg,{noMargin:!0,children:[(0,h.jsx)(o.x1,{children:(0,h.jsx)(i.Z,{align:"center",children:(0,h.jsx)(r.Trans,{id:"Prepare your game for Facebook Instant Games so that it can be play on Facebook Messenger. GDevelop will create a compressed file that you can upload on your Facebook Developer account."})})}),(0,h.jsx)(o.x1,{justifyContent:"center",children:(0,h.jsx)(c.Z,{color:"secondary",style:g.icon})})]})},m=function(e){var t=e.disabled,n=e.launchExport,i=e.isExporting,a=e.exportPipelineName;return(0,h.jsx)(o.x1,{justifyContent:"center",children:(0,h.jsx)(f.Z,{label:i?(0,h.jsx)(r.Trans,{id:"Packaging..."}):(0,h.jsx)(r.Trans,{id:"Package game files"}),primary:!0,id:"launch-export-".concat(a,"-button"),onClick:n,disabled:t||i})})},v=function(e){var t=e.renderGameButton;return(0,h.jsxs)(o.sg,{noMargin:!0,alignItems:"center",children:[(0,h.jsxs)(l.pJ,{noMargin:!0,justifyContent:"center",alignItems:"center",children:[(0,h.jsx)(d.Z,{fontSize:"small"}),(0,h.jsx)(i.Z,{children:(0,h.jsx)(r.Trans,{id:"Done!"})})]}),(0,h.jsx)(i.Z,{children:(0,h.jsx)(r.Trans,{id:"You can now create a game on Facebook Instant Games, if not already done, and upload the generated archive."})}),(0,h.jsxs)(l.ak,{justifyContent:"center",children:[(0,h.jsx)(o.x1,{justifyContent:"center",children:t()}),(0,h.jsx)(p.Z,{label:(0,h.jsx)(r.Trans,{id:"Learn more about Instant Games publication"}),primary:!0,onClick:function(){s.ZP.openExternalURL((0,a.vA)("/publishing/publishing-to-facebook-instant-games"))},leftIcon:(0,h.jsx)(u.Z,{})})]})]})},b={key:"facebookinstantgamesexport",tabName:(0,h.jsx)(r.Trans,{id:"Instant Games"}),name:(0,h.jsx)(r.Trans,{id:"Facebook Instant Games"}),helpPage:"/publishing/publishing-to-facebook-instant-games"}},39935:function(e,t,n){"use strict";n.d(t,{Eg:function(){return T},if:function(){return k},yg:function(){return w},BN:function(){return S}});var r=n(36600),i=n(28381),o=n(86278),a=n(39949),s=n(2066),l=n(67835),c=n(40243),u=n(82936),d=n(17581),p=n(1413),f=n(78118),h=n(29343),g=i.memo((function(e){return(0,h.jsx)(f.Z,(0,p.Z)((0,p.Z)({},e),{},{children:(0,h.jsx)("path",{d:"M7,2H17L13.5,9H17L10,22V14H7V2M9,4V12H12V14.66L14,11H10.24L13.76,4H9Z"})}))})),x=i.memo((function(e){return(0,h.jsx)(f.Z,(0,p.Z)((0,p.Z)({},e),{},{style:(0,p.Z)({transform:"rotate(90deg)"},e.style),children:(0,h.jsx)("path",{d:"M12 2C17.5 2 22 6.5 22 12C22 17.5 17.5 22 12 22C6.5 22 2 17.5 2 12C2 6.5 6.5 2 12 2M12 4C7.58 4 4 7.58 4 12C4 16.42 7.58 20 12 20C16.42 20 20 16.42 20 12C20 7.58 16.42 4 12 4M12 5C15.87 5 19 8.13 19 12C19 15.87 15.87 19 12 19V5Z"})}))})),m=i.memo((function(e){return(0,h.jsx)(f.Z,(0,p.Z)((0,p.Z)({},e),{},{children:(0,h.jsx)("path",{fill:"currentColor",d:"M1.5,2.09C2.4,3 3.87,3.73 5.69,4.25C7.41,2.84 9.61,2 12,2C14.39,2 16.59,2.84 18.31,4.25C20.13,3.73 21.6,3 22.5,2.09C22.47,3.72 21.65,5.21 20.28,6.4C21.37,8 22,9.92 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12C2,9.92 2.63,8 3.72,6.4C2.35,5.21 1.53,3.72 1.5,2.09M20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12M10.5,10C10.5,10.8 9.8,11.5 9,11.5C8.2,11.5 7.5,10.8 7.5,10V8.5L10.5,10M16.5,10C16.5,10.8 15.8,11.5 15,11.5C14.2,11.5 13.5,10.8 13.5,10L16.5,8.5V10M12,17.23C10.25,17.23 8.71,16.5 7.81,15.42L9.23,14C9.68,14.72 10.75,15.23 12,15.23C13.25,15.23 14.32,14.72 14.77,14L16.19,15.42C15.29,16.5 13.75,17.23 12,17.23Z"})}))})),v=i.memo((function(e){return(0,h.jsx)(f.Z,(0,p.Z)((0,p.Z)({},e),{},{children:(0,h.jsx)("path",{d:"M20,12H4V11H6L7,6H12L13,11H20V12M13.22,7L13.62,9H22V7H13.22M22,16A3,3 0 0,1 19,19H5A3,3 0 0,1 2,16A3,3 0 0,1 5,13H19A3,3 0 0,1 22,16M6,16A1,1 0 0,0 5,15A1,1 0 0,0 4,16A1,1 0 0,0 5,17A1,1 0 0,0 6,16M13,16A1,1 0 0,0 12,15A1,1 0 0,0 11,16A1,1 0 0,0 12,17A1,1 0 0,0 13,16M20,16A1,1 0 0,0 19,15A1,1 0 0,0 18,16A1,1 0 0,0 19,17A1,1 0 0,0 20,16Z"})}))})),b=n(6996),C=n(61325),j=n(24233),y=n(86065),Z=n(32484),k=function(){var e=function(e){var t=e.isMobile;return{height:t?30:48,width:t?30:48,margin:10}}({isMobile:(0,b.U)().isMobile});return(0,h.jsxs)(c.sg,{noMargin:!0,children:[(0,h.jsx)(c.x1,{children:(0,h.jsx)(o.Z,{align:"center",children:(0,h.jsx)(r.Trans,{id:"This will export your game to a folder. You can then upload it on a website/game hosting service and share it on marketplaces and gaming portals like CrazyGames, Poki, Game Jolt, itch.io, Newgrounds..."})})}),(0,h.jsxs)(c.x1,{justifyContent:"center",children:[(0,h.jsx)(d.Z,{color:"secondary",style:e}),(0,h.jsx)(g,{color:"secondary",style:e}),(0,h.jsx)(x,{color:"secondary",style:e}),(0,h.jsx)(m,{color:"secondary",style:e}),(0,h.jsx)(v,{color:"secondary",style:e})]})]})},w=function(e){var t=e.disabled,n=e.launchExport,i=e.isExporting,o=e.exportPipelineName;return"done"!==e.exportStep?(0,h.jsx)(c.x1,{justifyContent:"center",children:(0,h.jsx)(Z.Z,{label:i?(0,h.jsx)(r.Trans,{id:"Exporting..."}):(0,h.jsx)(r.Trans,{id:"Export as a HTML5 game"}),primary:!0,id:"launch-export-".concat(o,"-button"),onClick:n,disabled:t||i})}):null},T=function(e){var t=e.renderGameButton;return(0,h.jsxs)(c.sg,{noMargin:!0,alignItems:"center",children:[(0,h.jsxs)(C.pJ,{noMargin:!0,justifyContent:"center",alignItems:"center",children:[(0,h.jsx)(j.Z,{fontSize:"small"}),(0,h.jsx)(o.Z,{children:(0,h.jsx)(r.Trans,{id:"Done!"})})]}),(0,h.jsx)(o.Z,{children:(0,h.jsx)(r.Trans,{id:"You can now upload the game to a web hosting service to play it."})}),(0,h.jsx)(c.LZ,{}),(0,h.jsxs)(C.ak,{justifyContent:"center",children:[(0,h.jsx)(c.x1,{justifyContent:"center",children:t()}),(0,h.jsx)(l.Z,{label:(0,h.jsx)(r.Trans,{id:"Learn more about publishing to platforms"}),primary:!0,onClick:function(){s.ZP.openExternalURL((0,a.vA)("/publishing/html5_game_in_a_local_folder/#3rd-party-hosting-sites"))},leftIcon:(0,h.jsx)(y.Z,{})})]}),(0,h.jsx)(c.LZ,{}),(0,h.jsx)(c.x1,{children:(0,h.jsx)(u.Z,{kind:"info",children:(0,h.jsx)(r.Trans,{id:"Your game won't work if you open the index.html file on your computer. You must upload it to a web hosting platform (Itch.io, Poki, CrazyGames etc...) or a web server to run it."})})})]})},S={key:"webexport",tabName:(0,h.jsx)(r.Trans,{id:"Web"}),name:(0,h.jsx)(r.Trans,{id:"HTML5"}),helpPage:"/publishing/html5_game_in_a_local_folder"}},61421:function(e,t,n){"use strict";n.d(t,{Vf:function(){return b},s_:function(){return m},yg:function(){return v}});var r=n(1413),i=n(36600),o=(n(28381),n(86278)),a=n(40243),s=n(19345),l=n(3698),c=n(50463),u=n(1773),d=n(67835),p=n(4076),f=n(14746),h=n(32484),g=n(61325),x=n(29343),m=function(e){var t=e.exportState,n=e.updateExportState,f=e.isExporting,h=e.build;return h&&"complete"===h.status?null:(0,x.jsxs)(a.sg,{noMargin:!0,expand:!0,children:[(0,x.jsx)(a.x1,{children:(0,x.jsx)(o.Z,{align:"center",children:(0,x.jsx)(i.Trans,{id:"Packaging your game for Android will create an APK file that can be installed on Android phones or an Android App Bundle that can be published to Google Play."})})}),(0,x.jsxs)(a.sg,{children:[(0,x.jsxs)(c.Z,{value:t.targets[0]||"androidApk",onChange:function(e){var t=e.target.value;n((function(e){return(0,r.Z)((0,r.Z)({},e),{},{targets:[t]})}))},children:[(0,x.jsx)(s.Z,{value:"androidApk",control:(0,x.jsx)(l.Z,{color:"secondary",disabled:f}),label:(0,x.jsx)(i.Trans,{id:"APK (for testing on device or sharing outside Google Play)"})}),(0,x.jsx)(s.Z,{value:"androidAppBundle",control:(0,x.jsx)(l.Z,{color:"secondary",disabled:f}),label:(0,x.jsx)(i.Trans,{id:"Android App Bundle (for publishing on Google Play)"})})]}),(0,x.jsx)(a.x1,{noMargin:!0,justifyContent:"flex-end",children:(0,x.jsx)(d.Z,{label:(0,x.jsx)(i.Trans,{id:"Signing options"}),onClick:function(){n((function(e){return(0,r.Z)((0,r.Z)({},e),{},{signingDialogOpen:!0})}))},disabled:"androidAppBundle"!==t.targets[0]||f})})]}),t.signingDialogOpen&&(0,x.jsxs)(u.ZP,{title:(0,x.jsx)(i.Trans,{id:"Signing options"}),actions:[(0,x.jsx)(d.Z,{label:(0,x.jsx)(i.Trans,{id:"Close"}),primary:!0,keyboardFocused:!0,onClick:function(){n((function(e){return(0,r.Z)((0,r.Z)({},e),{},{signingDialogOpen:!1})}))}},"close")],secondaryActions:[(0,x.jsx)(p.Z,{helpPagePath:"/publishing/android/play-store/upgrading-from-apk-to-aab"},"help")],open:!0,onRequestClose:function(){n((function(e){return(0,r.Z)((0,r.Z)({},e),{},{signingDialogOpen:!1})}))},maxWidth:"sm",children:[(0,x.jsx)(o.Z,{children:(0,x.jsx)(i.Trans,{id:'Choose the upload key to use to identify your Android App Bundle. In most cases you don\'t need to change this. Use the "Old upload key" if you used to publish your game as an APK and you activated Play App Signing before switching to Android App Bundle.'})}),(0,x.jsxs)(c.Z,{name:"signing-keystore",value:t.keystore,onChange:function(e){var t=e.target.value;n((function(e){return(0,r.Z)((0,r.Z)({},e),{},{keystore:t})}))},children:[(0,x.jsx)(s.Z,{value:"new",control:(0,x.jsx)(l.Z,{color:"primary"}),label:(0,x.jsx)(i.Trans,{id:"Default upload key (recommended)"})}),(0,x.jsx)(s.Z,{value:"old",control:(0,x.jsx)(l.Z,{color:"primary"}),label:(0,x.jsx)(i.Trans,{id:"Old, legacy upload key (only if you used to publish your game as an APK and already activated Play App Signing)"})}),(0,x.jsx)(s.Z,{value:"custom",control:(0,x.jsx)(l.Z,{color:"primary"}),label:(0,x.jsx)(i.Trans,{id:"Custom upload key (not available yet)"}),disabled:!0})]})]})]})},v=function(e){var t=e.disabled,n=e.launchExport,r=e.isExporting,o=e.exportPipelineName,s=e.exportStep,l=e.build,c=e.stepMaxProgress,u=e.stepCurrentProgress,d=e.errored,p=r||!!l&&"error"!==l.status;return(0,x.jsxs)(g.ak,{noMargin:!0,children:[!p&&(0,x.jsx)(a.x1,{justifyContent:"center",children:(0,x.jsx)(h.Z,{label:(0,x.jsx)(i.Trans,{id:"Create package for Android"}),primary:!0,id:"launch-export-".concat(o,"-button"),onClick:n,disabled:t})}),p&&(0,x.jsx)(a.x1,{expand:!0,children:(0,x.jsx)(f.Z,{exportStep:s,hasBuildStep:!0,build:l,stepMaxProgress:c,stepCurrentProgress:u,errored:d})})]})},b={key:"onlinecordovaexport",tabName:(0,x.jsx)(i.Trans,{id:"Mobile"}),name:(0,x.jsx)(i.Trans,{id:"Android"}),helpPage:"/publishing/android"}},82828:function(e,t,n){"use strict";n.d(t,{yg:function(){return fe},s_:function(){return pe},Y$:function(){return he}});var r=n(1413),i=n(36600),o=n(28381),a=n(86278),s=n(40243),l=n(19345),c=n(3698),u=n(50463),d=n(61325),p=n(29439),f=n(45987),h=n(37762),g=n(10959),x=n(81683),m=n(74165),v=n(15861),b=n(1773),C=n(67835),j=n(32484),y=n(63854),Z=n(37054),k=n(20914),w=n(82936),T=n(32832),S=n(2066),P=n(35638),E=n(24910),I=n(65056),M=n(42986),L=n(29343),A=function(){var e=(0,v.Z)((0,m.Z)().mark((function e(t){return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(){if("string"!==typeof r.result)throw new Error("Unexpected result when reading file.");var t=r.result.split(",")[1];t?e(t):n(new Error("Could not read base64 content from the file."))},r.onerror=function(e){n(e)},r.readAsDataURL(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F={appleIcon:{width:32,height:32}},O=function(e){var t=e.authenticatedUser,n=o.useContext(E.Z),r=(0,I.Z)().showConfirmation,l=t.profile?t.profile.id:null,c=o.useState(""),u=(0,p.Z)(c,2),f=u[0],h=u[1],x=o.useState(""),b=(0,p.Z)(x,2),O=b[0],R=b[1],D=o.useState(""),_=(0,p.Z)(D,2),B=_[0],N=_[1],U=o.useState(""),H=(0,p.Z)(U,2),V=H[0],z=H[1],W=o.useState(!1),G=(0,p.Z)(W,2),Y=G[0],q=G[1],X=o.useState(null),K=(0,p.Z)(X,2),J=K[0],Q=K[1],$=o.useCallback((0,v.Z)((0,m.Z)().mark((function e(){var n,r,i;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,q(!0),Q(null),e.next=7,g.n2.createCertificateSigningRequest(t.getAuthorizationHeader,l,{commonName:f||"Unspecified",countryName:O||"US"});case 7:n=e.sent,r=n.certificateRequestUuid,i=n.csrPem,N(r),z(i),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.error("Error while creating certificate signing request:",e.t0),Q(e.t0);case 18:return e.prev=18,q(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[2,14,18,21]])}))),[t.getAuthorizationHeader,l,f,O]),ee=o.useState(!1),te=(0,p.Z)(ee,2),ne=te[0],re=te[1],ie=o.useState(null),oe=(0,p.Z)(ie,2),ae=oe[0],se=oe[1],le=o.useState(!1),ce=(0,p.Z)(le,2),ue=ce[0],de=ce[1],pe=o.useState(""),fe=(0,p.Z)(pe,2),he=fe[0],ge=fe[1],xe=o.useState(null),me=(0,p.Z)(xe,2),ve=me[0],be=me[1],Ce=o.useState(!1),je=(0,p.Z)(Ce,2),ye=je[0],Ze=je[1],ke=o.useCallback(function(){var e=(0,v.Z)((0,m.Z)().mark((function e(n){var i,o,a,s;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,re(!1),de(!0),e.next=7,A(n);case 7:return i=e.sent,e.next=10,g.n2.uploadCertificate(t.getAuthorizationHeader,l,{certificateAsBase64:i});case 10:if(o=e.sent,a=o.certificateSerial,"unknown"!==(s=o.certificateKind)){e.next=19;break}return e.next=16,r({title:{id:"Unknown certificate type"},message:{id:"This certificate type is unknown and might not work when building the app. Are you sure you want to continue?"},level:"warning",confirmButtonLabel:{id:"Continue"},dismissButtonLabel:{id:"Cancel"}});case 16:if(e.sent){e.next=19;break}return e.abrupt("return");case 19:return e.next=21,g.n2.createCertificateP12(t.getAuthorizationHeader,l,{certificateSerial:a,certificateKind:s,certificateRequestUuid:B});case 21:re(!0),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(2),se(e.t0);case 27:return e.prev=27,de(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[2,24,27,30]])})));return function(t){return e.apply(this,arguments)}}(),[t.getAuthorizationHeader,B,r,l]),we=o.useCallback(function(){var e=(0,v.Z)((0,m.Z)().mark((function e(n){var r,i,o;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,ge(""),Ze(!0),e.next=7,A(n);case 7:return r=e.sent,e.next=10,g.n2.uploadMobileProvision(t.getAuthorizationHeader,l,{mobileProvisionAsBase64:r});case 10:i=e.sent,o=i.name,ge(o),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),be(e.t0);case 18:return e.prev=18,Ze(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[2,15,18,21]])})));return function(t){return e.apply(this,arguments)}}(),[t.getAuthorizationHeader,l]);return(0,L.jsxs)(d.ak,{noMargin:!0,children:[(0,L.jsx)(w.Z,{kind:"info",renderLeftIcon:function(){return(0,L.jsx)(P.Z,{style:F.appleIcon})},renderRightButton:function(){return(0,L.jsx)(C.Z,{label:(0,L.jsx)(i.Trans,{id:"Open Apple Developer"}),onClick:function(){return S.ZP.openExternalURL("https://developer.apple.com/account")}})},children:(0,L.jsx)(i.Trans,{id:"You need a Apple Developer account to create a certificate."})}),(0,L.jsx)(a.Z,{size:"block-title",children:(0,L.jsx)(i.Trans,{id:"1) Create a Certificate Signing Request and a Certificate"})}),(0,L.jsx)(T.r,{isStandaloneText:!0,allowParagraphs:!0,translatableSource:{id:"Create a certificate signing request that will be asked by Apple to generate a full certificate."}}),(0,L.jsxs)(d.pJ,{noMargin:!0,children:[(0,L.jsx)(M.Z,{fullWidth:!0,floatingLabelText:(0,L.jsx)(i.Trans,{id:"Company name or full name"}),value:f,onChange:function(e){return h(e)},maxLength:64}),(0,L.jsx)(M.Z,{fullWidth:!0,floatingLabelText:(0,L.jsx)(i.Trans,{id:"Country name"}),value:O,onChange:function(e){return R(e)},maxLength:64})]}),(0,L.jsxs)(d.pJ,{noMargin:!0,justifyContent:"flex-end",children:[(0,L.jsx)(y.Z,{isLoading:Y,children:(0,L.jsx)(j.Z,{primary:!B,disabled:Y,label:(0,L.jsx)(i.Trans,{id:"Create a signing request"}),onClick:$})}),(0,L.jsx)(j.Z,{primary:!!B&&!ne,disabled:!V,onClick:function(){return(0,Z.z)("data:text/plain;charset=utf-8,"+encodeURIComponent(V),"request.csr")},label:(0,L.jsx)(i.Trans,{id:"Download the request file"})})]}),J&&(0,L.jsx)(w.Z,{kind:"error",children:"An error occured while generating the Certificate Signing Request."}),(0,L.jsx)(a.Z,{size:"block-title",children:(0,L.jsx)(i.Trans,{id:"2) Upload the Certificate generated by Apple"})}),(0,L.jsx)(T.r,{isStandaloneText:!0,allowParagraphs:!0,translatableSource:{id:"Go to [Apple Developer Certificates list](https://developer.apple.com/account/resources/certificates/list) and click on the + button. Choose **Apple Distribution** (for app store) or **Apple Development** (for testing on device). When requested, upload the request file you downloaded."}}),(0,L.jsx)(T.r,{isStandaloneText:!0,allowParagraphs:!0,translatableSource:{id:"Download the certificate file (.cer) generated by Apple and upload it here. GDevelop will keep it securely stored."}}),(0,L.jsx)(k.Z,{variant:"outlined",background:"medium",children:(0,L.jsx)(s.x1,{expand:!0,children:(0,L.jsx)(s.sg,{expand:!0,children:(0,L.jsx)("input",{accept:["*/*"],style:{color:n.text.color.primary},multiple:!1,type:"file",disabled:!B||ue,onChange:function(e){var t=e.currentTarget.files[0]||null;se(null),t&&ke(t)}})})})}),ae&&(0,L.jsx)(w.Z,{kind:"error",children:(0,L.jsx)(i.Trans,{id:"An error occured while generating the certificate."})}),ne&&(0,L.jsx)(w.Z,{kind:"valid",children:(0,L.jsx)(i.Trans,{id:"The certificate was properly generated. Don't forget to create and upload a provisioning profile associated to it."})}),(0,L.jsx)(a.Z,{size:"block-title",children:(0,L.jsx)(i.Trans,{id:"3) Upload one or more Mobile Provisioning Profiles"})}),(0,L.jsx)(T.r,{isStandaloneText:!0,allowParagraphs:!0,translatableSource:{id:"Go to [Apple Developer Profiles list](https://developer.apple.com/account/resources/profiles/list) and click on the + button. Choose **App Store Connect** or **iOS App Development**. Then, choose *Xcode iOS Wildcard App ID*, then the certificate you created earlier. For development, you can choose [the devices you registered](https://developer.apple.com/help/account/register-devices/register-a-single-device/). Finish by downloading the generated file and upload it here so it can be stored securely by GDevelop."}}),(0,L.jsx)(k.Z,{variant:"outlined",background:"medium",children:(0,L.jsx)(s.x1,{expand:!0,children:(0,L.jsx)(s.sg,{expand:!0,children:(0,L.jsx)("input",{accept:["*/*"],style:{color:n.text.color.primary},multiple:!1,type:"file",disabled:ye,onChange:function(e){var t=e.currentTarget.files[0]||null;be(null),t&&we(t)}})})})}),ve&&(0,L.jsx)(w.Z,{kind:"error",children:(0,L.jsx)(i.Trans,{id:"An error occured while storing the provisioning profile."})}),he&&(0,L.jsx)(w.Z,{kind:"valid",children:(0,L.jsx)(i.Trans,{id:"The provisioning profile was properly stored ( {lastUploadedProvisioningProfileName}). If you properly uploaded the certificate before, it can now be used.",values:{lastUploadedProvisioningProfileName:he}})})]})},R=n(28894),D=function(e){var t=e.authenticatedUser,n=o.useContext(E.Z),r=t.profile?t.profile.id:null,a=o.useState(null),l=(0,p.Z)(a,2),c=l[0],u=l[1],f=o.useState(""),h=(0,p.Z)(f,2),x=h[0],b=h[1],Z=o.useState(""),I=(0,p.Z)(Z,2),F=I[0],O=I[1],R=o.useState(""),D=(0,p.Z)(R,2),_=D[0],B=D[1],N=o.useState(null),U=(0,p.Z)(N,2),H=U[0],V=U[1],z=o.useState(!1),W=(0,p.Z)(z,2),G=W[0],Y=W[1],q=o.useState(null),X=(0,p.Z)(q,2),K=X[0],J=X[1],Q=o.useCallback((0,v.Z)((0,m.Z)().mark((function e(){var n;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&c){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,Y(!0),V(null),J(null),e.next=8,A(c);case 8:return n=e.sent,e.next=11,g.n2.uploadAuthKey(t.getAuthorizationHeader,r,{name:x,appleAuthKeyP8AsBase64:n,appleApiKey:F,appleApiIssuer:_});case 11:V(F),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),J(e.t0);case 17:return e.prev=17,Y(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[2,14,17,20]])}))),[_,F,c,x,t.getAuthorizationHeader,r]);return(0,L.jsxs)(d.ak,{noMargin:!0,children:[(0,L.jsx)(w.Z,{kind:"info",renderLeftIcon:function(){return(0,L.jsx)(P.Z,{style:{width:32,height:32}})},renderRightButton:function(){return(0,L.jsx)(C.Z,{label:(0,L.jsx)(i.Trans,{id:"Open Apple Developer"}),onClick:function(){return S.ZP.openExternalURL("https://developer.apple.com/account")}})},children:(0,L.jsx)(i.Trans,{id:"You need a Apple Developer account to create an API key that will automatically publish your app."})}),(0,L.jsx)(T.r,{isStandaloneText:!0,allowParagraphs:!0,translatableSource:{id:'Create an API key on the [App Store Connect API page](https://appstoreconnect.apple.com/access/integrations/api). Give it a name and **administrator** rights. Download the "Auth Key" file and upload it here along with the required information you can find on the page.'}}),(0,L.jsx)(M.Z,{floatingLabelText:(0,L.jsx)(i.Trans,{id:"Name (optional)"}),value:x,onChange:b,fullWidth:!0}),(0,L.jsxs)(d.pJ,{children:[(0,L.jsx)(M.Z,{floatingLabelText:(0,L.jsx)(i.Trans,{id:"API key given by Apple"}),hintText:"XXXXXXXXXX",value:F,onChange:O,fullWidth:!0}),(0,L.jsx)(M.Z,{floatingLabelText:(0,L.jsx)(i.Trans,{id:"API Issuer given by Apple"}),hintText:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:_,onChange:B,fullWidth:!0})]}),(0,L.jsx)(k.Z,{variant:"outlined",background:"medium",children:(0,L.jsx)(s.x1,{expand:!0,children:(0,L.jsx)(s.sg,{expand:!0,children:(0,L.jsx)("input",{accept:["*/*"],style:{color:n.text.color.primary},multiple:!1,type:"file",disabled:!F||!_||G,onChange:function(e){u(e.currentTarget.files[0]||null)}})})})}),(0,L.jsx)(s.x1,{noMargin:!0,justifyContent:"flex-end",children:(0,L.jsx)(y.Z,{isLoading:G,children:(0,L.jsx)(j.Z,{primary:!0,disabled:G||!c||!_||!F,onClick:function(){Q()},label:(0,L.jsx)(i.Trans,{id:"Send the Auth Key"})})})}),K&&(0,L.jsx)(w.Z,{kind:"error",children:(0,L.jsx)(i.Trans,{id:"An error occured while storing the auth key."})}),H&&(0,L.jsx)(w.Z,{kind:"valid",children:(0,L.jsx)(i.Trans,{id:"The auth key {lastUploadedApiKey} was properly stored. It can now be used to automatically upload your app to the app store - verify you've declared an app for it.",values:{lastUploadedApiKey:H}})})]})},_=function(e){var t=e.onClose,n=e.initialTab,r=e.authenticatedUser,a=o.useState(n),s=(0,p.Z)(a,2),l=s[0],c=s[1];return(0,L.jsxs)(b.ZP,{open:!0,title:(0,L.jsx)(i.Trans,{id:"Create iOS certificate"}),flexColumnBody:!0,maxWidth:"md",actions:[(0,L.jsx)(C.Z,{primary:!0,label:(0,L.jsx)(i.Trans,{id:"Close"}),onClick:t},"close")],fixedContent:(0,L.jsx)(R.m,{value:l,onChange:c,options:[{value:"apple-certificate",label:(0,L.jsx)(i.Trans,{id:"New Apple Certificate/Profile"})},{value:"apple-auth-key",label:(0,L.jsx)(i.Trans,{id:"New Auth Key (App Store upload)"})}]}),onRequestClose:t,children:["apple-certificate"===l&&(0,L.jsx)(O,{authenticatedUser:r}),"apple-auth-key"===l&&(0,L.jsx)(D,{authenticatedUser:r})]})},B=n(4076),N=n(1491),U=n(75383),H=n(78081),V=n(68196),z=n(87284),W=n(61804),G=n(51598),Y=n(54168),q=n(62981),X=n(52970),K=n(82422),J=n(78118),Q=o.memo((function(e){return(0,L.jsxs)(J.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,L.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99999 7.99996C8.36818 7.99996 8.66666 8.29844 8.66666 8.66663V9.99996C8.66666 10.3681 8.36818 10.6666 7.99999 10.6666C7.6318 10.6666 7.33332 10.3681 7.33332 9.99996V8.66663C7.33332 8.29844 7.6318 7.99996 7.99999 7.99996Z",fill:"currentColor"}),(0,L.jsx)("path",{d:"M7.99999 6.66663C8.36818 6.66663 8.66666 6.36815 8.66666 5.99996C8.66666 5.63177 8.36818 5.33329 7.99999 5.33329C7.6318 5.33329 7.33332 5.63177 7.33332 5.99996C7.33332 6.36815 7.6318 6.66663 7.99999 6.66663Z",fill:"currentColor"}),(0,L.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99999 3.66663C5.60676 3.66663 3.66666 5.60673 3.66666 7.99996C3.66666 10.3932 5.60676 12.3333 7.99999 12.3333C10.3932 12.3333 12.3333 10.3932 12.3333 7.99996C12.3333 5.60673 10.3932 3.66663 7.99999 3.66663ZM2.66666 7.99996C2.66666 5.05444 5.05447 2.66663 7.99999 2.66663C10.9455 2.66663 13.3333 5.05444 13.3333 7.99996C13.3333 10.9455 10.9455 13.3333 7.99999 13.3333C5.05447 13.3333 2.66666 10.9455 2.66666 7.99996Z",fill:"currentColor"})]}))})),$={bulletIcon:{width:20,height:20,marginRight:10}},ee=function(e){var t=e.signingCredentials,n=e.authenticatedUser,l=e.error,c=e.onRefreshSigningCredentials,u=e.onAddNew,p=o.useContext(E.Z),f=(0,I.Z)().showConfirmation,h=(0,g.q7)(t);return(0,L.jsx)(d.ak,{noMargin:!0,children:l?(0,L.jsx)(U.Z,{onRetry:c,children:(0,L.jsx)(i.Trans,{id:"An error happened while loading the certificates."})}):h?h.length?h.map((function(e){return(0,L.jsx)(z.Z,{background:"medium",header:(0,L.jsx)(a.Z,{size:"block-title",noMargin:!0,children:(0,L.jsx)(i.Trans,{id:"{0}",values:{0:e.name}})}),cardCornerAction:(0,L.jsx)(Y.Z,{element:(0,L.jsx)(G.Z,{size:"small",children:(0,L.jsx)(W.Z,{})}),buildMenuTemplate:function(t){return[{label:t._({id:"Remove this certificate"}),click:function(){var t=(0,v.Z)((0,m.Z)().mark((function t(){var r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.hasCertificateReady){t.next=6;break}return t.next=3,f({level:"warning",title:{id:"Remove this certificate?"},message:{id:"Once removed, you'll need to generate a new certificate. Provisioning profiles will also be removed."},confirmButtonLabel:{id:"Remove certificate"}});case 3:if(t.sent){t.next=6;break}return t.abrupt("return");case 6:if(t.prev=6,r=n.profile?n.profile.id:null){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,g.n2.deleteSigningCredential(n.getAuthorizationHeader,r,{type:"apple-certificate",certificateSerial:e.certificateSerial});case 12:c(),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(6),console.error("Unable to delete the certificate",t.t0);case 18:case"end":return t.stop()}}),t,null,[[6,15]])})));return function(){return t.apply(this,arguments)}}()}]}}),disabled:!e.hasCertificateReady,children:(0,L.jsxs)(d.ak,{noMargin:!0,children:[(0,L.jsxs)(s.x1,{noMargin:!0,alignItems:"center",children:[(0,L.jsx)(Q,{style:$.bulletIcon}),(0,L.jsx)(a.Z,{size:"body",allowSelection:!0,children:(0,L.jsx)(i.Trans,{id:"Serial: {0}",values:{0:e.certificateSerial}})})]}),e.hasCertificateReady?"unknown"===e.kind?(0,L.jsx)(w.Z,{kind:"warning",children:(0,L.jsx)(i.Trans,{id:"This certificate has an unknown type and is probably unable to be used by GDevelop."})}):(0,L.jsxs)(s.x1,{noMargin:!0,alignItems:"center",children:[(0,L.jsx)(K.Z,{style:(0,r.Z)((0,r.Z)({},$.bulletIcon),{},{color:p.message.valid})}),(0,L.jsx)(a.Z,{size:"body",children:(0,L.jsx)(i.Trans,{id:"Certificate type: {0}",values:{0:e.kind}})})]}):(0,L.jsx)(w.Z,{kind:"error",children:(0,L.jsx)(i.Trans,{id:"This certificate was not sent or is not ready to be used."})}),(0,L.jsx)(a.Z,{size:"sub-title",noMargin:!0,children:(0,L.jsx)(i.Trans,{id:"Provisioning profiles"})}),e.provisioningProfiles.length?(0,L.jsx)(X.aV,{children:e.provisioningProfiles.map((function(e){return(0,L.jsx)(X.HC,{primaryText:e.name,secondaryText:e.uuid,leftIcon:(0,L.jsx)(q.Z,{})})}))}):(0,L.jsx)(w.Z,{kind:"warning",renderRightButton:function(){return(0,L.jsx)(j.Z,{primary:!0,icon:(0,L.jsx)(N.Z,{}),label:(0,L.jsx)(i.Trans,{id:"Add new"}),onClick:u},"add-new")},children:(0,L.jsx)(i.Trans,{id:"There are no provisioning profile created for this certificate. Create one in the Apple Developer interface and add it here."})})]})})})):(0,L.jsx)(V.$,{title:(0,L.jsx)(i.Trans,{id:"Create your Apple certificate for iOS"}),actionLabel:(0,L.jsx)(i.Trans,{id:"Add"}),onAction:u,description:(0,L.jsx)(i.Trans,{id:'Create your certificate and "provisioning profile" thanks to your Apple Developer account. We\'ll guide you with a step by step process.'})}):(0,L.jsx)(H.Z,{})})},te={bulletIcon:{width:20,height:20,marginRight:10}},ne=function(e){var t=e.signingCredentials,n=e.authenticatedUser,r=e.error,o=e.onRefreshSigningCredentials,l=e.onAddNew,c=(0,g.oj)(t);return(0,L.jsx)(d.ak,{noMargin:!0,children:r?(0,L.jsx)(U.Z,{onRetry:o,children:(0,L.jsx)(i.Trans,{id:"An error happened while loading the certificates."})}):c?c.length?c.map((function(e){return(0,L.jsx)(z.Z,{background:"medium",header:(0,L.jsx)(a.Z,{size:"block-title",noMargin:!0,children:(0,L.jsx)(i.Trans,{id:"{0}",values:{0:e.name}})}),cardCornerAction:(0,L.jsx)(Y.Z,{element:(0,L.jsx)(G.Z,{size:"small",children:(0,L.jsx)(W.Z,{})}),buildMenuTemplate:function(t){return[{label:t._({id:"Remove this Auth Key"}),click:function(){var t=(0,v.Z)((0,m.Z)().mark((function t(){var r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.profile?n.profile.id:null){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,g.n2.deleteSigningCredential(n.getAuthorizationHeader,r,{type:"apple-auth-key",appleApiKey:e.apiKey});case 6:o(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),console.error("Unable to delete the auth key",t.t0);case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(){return t.apply(this,arguments)}}()}]}}),disabled:!e.hasAuthKeyReady,children:(0,L.jsxs)(d.ak,{noMargin:!0,children:[(0,L.jsxs)(s.x1,{noMargin:!0,alignItems:"center",children:[(0,L.jsx)(Q,{style:te.bulletIcon}),(0,L.jsx)(a.Z,{size:"body",allowSelection:!0,children:(0,L.jsx)(i.Trans,{id:"API key: {0}",values:{0:e.apiKey}})})]}),(0,L.jsxs)(s.x1,{noMargin:!0,alignItems:"center",children:[(0,L.jsx)(Q,{style:te.bulletIcon}),(0,L.jsx)(a.Z,{size:"body",allowSelection:!0,children:(0,L.jsx)(i.Trans,{id:"API Issuer ID: {0}",values:{0:e.apiIssuer}})})]}),!e.hasAuthKeyReady&&(0,L.jsx)(w.Z,{kind:"error",children:(0,L.jsx)(i.Trans,{id:"This Auth Key was not sent or is not ready to be used."})})]})})})):(0,L.jsx)(V.$,{title:(0,L.jsx)(i.Trans,{id:"Create your Auth Key to send your game to App Store Connect"}),actionLabel:(0,L.jsx)(i.Trans,{id:"Add"}),onAction:l,description:(0,L.jsx)(i.Trans,{id:"Declare your app on App Store Connect and then register a key so that your game can be automatically uploaded when built. It's perfect to try your game with testers on Apple TestFlight."})}):(0,L.jsx)(H.Z,{})})},re=function(e){var t=e.authenticatedUser,n=e.onClose,r=e.signingCredentials,a=e.error,s=e.onRefreshSigningCredentials,l=o.useState("apple-certificate"),c=(0,p.Z)(l,2),u=c[0],d=c[1],f=o.useState(null),h=(0,p.Z)(f,2),g=h[0],x=h[1];return(0,L.jsxs)(b.ZP,{open:!0,title:(0,L.jsx)(i.Trans,{id:"Signing Credentials"}),actions:[(0,L.jsx)(C.Z,{primary:!0,label:(0,L.jsx)(i.Trans,{id:"Close"}),onClick:n},"close")],secondaryActions:[(0,L.jsx)(B.Z,{helpPagePath:"/publishing/ios"},"help"),r&&r.length>0?(0,L.jsx)(j.Z,{primary:!0,icon:(0,L.jsx)(N.Z,{}),label:(0,L.jsx)(i.Trans,{id:"Add new"}),onClick:function(){return x(u)}},"add-new"):null],fixedContent:(0,L.jsx)(R.m,{value:u,onChange:d,options:[{value:"apple-certificate",label:(0,L.jsx)(i.Trans,{id:"Apple Certificates & Profiles"})},{value:"apple-auth-key",label:(0,L.jsx)(i.Trans,{id:"Auth Key (App Store upload)"})}]}),onRequestClose:n,children:["apple-certificate"===u&&(0,L.jsx)(ee,{authenticatedUser:t,signingCredentials:r,error:a,onRefreshSigningCredentials:s,onAddNew:function(){return x(u)}}),"apple-auth-key"===u&&(0,L.jsx)(ne,{authenticatedUser:t,signingCredentials:r,error:a,onRefreshSigningCredentials:s,onAddNew:function(){return x(u)}}),g&&(0,L.jsx)(_,{authenticatedUser:t,initialTab:g,onClose:function(){x(null),s()}})]})},ie=n(90242),oe=["authKeyApiKey"],ae={button:{flexShrink:0},raisedButton:{flexShrink:0}},se=function(e,t,n){var i=(0,g.q7)(t);if(!i)return e;var o,a=(0,h.Z)(i);try{for(a.s();!(o=a.n()).done;){var s,l=o.value,c=(0,h.Z)(l.provisioningProfiles);try{for(c.s();!(s=c.n()).done;){var u=s.value;if(u.uuid===n)return(0,r.Z)((0,r.Z)({},e),{},{certificateSerial:l.certificateSerial,mobileProvisionUuid:u.uuid})}}catch(d){c.e(d)}finally{c.f()}}}catch(d){a.e(d)}finally{a.f()}return e},le=function(e,t,n){if(!e)return e;if(!n||!t.includes("iosAppStore")&&e.authKeyApiKey){e.authKeyApiKey;return(0,f.Z)(e,oe)}return(0,r.Z)((0,r.Z)({},e),{},{authKeyApiKey:n})},ce=function(e,t,n){var r=(0,g.q7)(t),i=(0,g.oj)(t);if(!r)return e;if(!r.length)return null;var o=e;return o&&function(e,t){var n,r=(0,h.Z)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.certificateSerial===t.certificateSerial){var o,a=(0,h.Z)(i.provisioningProfiles);try{for(a.s();!(o=a.n()).done;)if(o.value.uuid===t.mobileProvisionUuid)return!0}catch(s){a.e(s)}finally{a.f()}}}}catch(s){r.e(s)}finally{r.f()}return!1}(r,o)||(o=se(o,t,r[0].provisioningProfiles[0]?r[0].provisioningProfiles[0].uuid:"")),i&&o&&!function(e,t,n){if(!t.includes("iosAppStore")&&n.authKeyApiKey)return!1;var r,i=(0,h.Z)(e);try{for(i.s();!(r=i.n()).done;)if(r.value.apiKey===n.authKeyApiKey)return!0}catch(o){i.e(o)}finally{i.f()}return!1}(i,n,o)&&(o=le(o,n,i[0]?i[0].apiKey:null)),o},ue=function(e){var t=e.targets,n=e.authenticatedUser,r=e.buildSigningOptions,a=e.onSelectBuildSigningOptions,s=e.disabled,l=function(e){var t=o.useState(null),n=(0,p.Z)(t,2),r=n[0],i=n[1],a=o.useState(null),s=(0,p.Z)(a,2),l=s[0],c=s[1],u=e.profile?e.profile.id:null,d=o.useCallback((0,v.Z)((0,m.Z)().mark((function t(){var n;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,c(null),t.next=6,(0,g.Bh)(e.getAuthorizationHeader,u);case 6:n=t.sent,i(n),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.error("Unable to load signing credentials:",t.t0),c(t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])}))),[e.getAuthorizationHeader,u]);return o.useEffect((function(){d()}),[d]),{signingCredentials:r,onRefreshSigningCredentials:d,error:l}}(n),c=l.signingCredentials,u=l.error,f=l.onRefreshSigningCredentials,h=function(e,t){return e?e.filter((function(e){return"apple-certificate"===e.type?!(!t.includes("iosAppStore")&&!t.includes("iosDevelopment"))&&!("development"===e.kind&&!t.includes("iosDevelopment"))&&!("distribution"===e.kind&&!t.includes("iosAppStore")):"apple-auth-key"===e.type&&t.includes("iosAppStore")})):null}(c,t),b=(0,g.q7)(h),y=(0,g.oj)(h),Z=o.useState(!1),k=(0,p.Z)(Z,2),w=k[0],T=k[1];return o.useEffect((function(){var e,n,i=ce(r,h,t);e=i,n=r,JSON.stringify(e)!==JSON.stringify(n)&&a(i)}),[r,a,h,t]),(0,L.jsxs)(d.ak,{noMargin:!0,children:[(0,L.jsxs)(d.pJ,{noMargin:!0,expand:!0,alignItems:"end",children:[(0,L.jsx)(x.Z,{fullWidth:!0,floatingLabelText:(0,L.jsx)(i.Trans,{id:"Certificate and provisioning profile"}),value:r&&r.mobileProvisionUuid||"",onChange:function(e,t,n){var i=se(r,h,n);i&&a(i)},translatableHintText:b?b.length>0?{id:"Choose a provisioning profile"}:{id:"Add a certificate/profile first"}:{id:"Loading..."},disabled:s,children:b?b.flatMap((function(e){return e.provisioningProfiles.map((function(t){return(0,L.jsx)(ie.Z,{disabled:!e.hasCertificateReady,label:"".concat(t.name," (").concat(e.name,")"),value:t.uuid},t.uuid)}))})):(0,L.jsx)(ie.Z,{disabled:!0,label:u?{id:"Error loading certificates."}:{id:"Loading..."},value:""})}),b&&b.length>0?(0,L.jsx)(C.Z,{style:ae.button,label:(0,L.jsx)(i.Trans,{id:"Add or edit"}),onClick:function(){return T(!0)},disabled:s}):(0,L.jsx)(j.Z,{primary:!0,style:ae.raisedButton,label:(0,L.jsx)(i.Trans,{id:"Add new"}),onClick:function(){return T(!0)},disabled:s}),w&&(0,L.jsx)(re,{signingCredentials:c,error:u,onRefreshSigningCredentials:f,onClose:function(){T(!1),f()},authenticatedUser:n})]}),t.includes("iosAppStore")&&(0,L.jsx)(d.pJ,{noMargin:!0,children:(0,L.jsx)(x.Z,{fullWidth:!0,floatingLabelText:(0,L.jsx)(i.Trans,{id:"Auth Key for upload to App Store Connect"}),value:r&&r.authKeyApiKey||"",onChange:function(e,n,i){var o=le(r,t,i);o&&a(o)},translatableHintText:b?b.length>0?{id:"Choose a Auth Key"}:{id:"Add an Auth Key first"}:{id:"Loading..."},disabled:s,children:y?y.flatMap((function(e){return(0,L.jsx)(ie.Z,{disabled:!e.hasAuthKeyReady,label:"".concat(e.name," (").concat(e.apiKey,")"),value:e.apiKey},e.apiKey)})):(0,L.jsx)(ie.Z,{disabled:!0,label:u?{id:"Error loading Auth Keys."}:{id:"Loading..."},value:""})})})]})},de=n(14746),pe=function(e){var t=e.exportState,n=e.authenticatedUser,o=e.updateExportState,p=e.isExporting,f=e.build,h=e.quota;if(f&&"complete"===f.status)return null;var g=h&&0===h.max;return(0,L.jsxs)(d.ak,{noMargin:!0,expand:!0,children:[(0,L.jsx)(s.x1,{alignItems:"center",justifyContent:"center",children:(0,L.jsx)(a.Z,{align:"center",children:(0,L.jsx)(i.Trans,{id:"Package the game for iOS, using your Apple Developer account."})})}),!g&&(0,L.jsxs)(d.ak,{noMargin:!0,children:[(0,L.jsxs)(u.Z,{value:t.targets[0]||"iosAppStore",onChange:function(e){var t=e.target.value;o((function(e){return(0,r.Z)((0,r.Z)({},e),{},{targets:[t]})}))},children:[(0,L.jsx)(l.Z,{value:"iosDevelopment",control:(0,L.jsx)(c.Z,{color:"secondary",disabled:p}),label:(0,L.jsx)(i.Trans,{id:"Development (debugging & testing on a registered iPhone/iPad)"})}),(0,L.jsx)(l.Z,{value:"iosAppStore",control:(0,L.jsx)(c.Z,{color:"secondary",disabled:p}),label:(0,L.jsx)(i.Trans,{id:"Apple App Store"})})]}),(0,L.jsx)(ue,{targets:t.targets,buildSigningOptions:t.signing,onSelectBuildSigningOptions:function(e){o((function(t){return(0,r.Z)((0,r.Z)({},t),{},{signing:e})}))},authenticatedUser:n,disabled:p})]})]})},fe=function(e){var t=e.disabled,n=e.launchExport,r=e.isExporting,o=e.exportPipelineName,a=e.exportStep,l=e.build,c=e.stepMaxProgress,u=e.stepCurrentProgress,p=e.errored,f=r||!!l&&"error"!==l.status;return(0,L.jsxs)(d.ak,{noMargin:!0,children:[!f&&(0,L.jsx)(s.x1,{justifyContent:"center",children:(0,L.jsx)(j.Z,{label:(0,L.jsx)(i.Trans,{id:"Create package for iOS"}),primary:!0,id:"launch-export-".concat(o,"-button"),onClick:n,disabled:t})}),f&&(0,L.jsx)(s.x1,{expand:!0,children:(0,L.jsx)(de.Z,{exportStep:a,hasBuildStep:!0,build:l,stepMaxProgress:c,stepCurrentProgress:u,errored:p})})]})},he={key:"onlinecordovaiosexport",tabName:(0,L.jsx)(i.Trans,{id:"iOS"}),name:(0,L.jsx)(i.Trans,{id:"iOS"}),helpPage:"/publishing/android_and_ios"}},87335:function(e,t,n){"use strict";n.d(t,{OL:function(){return x},s_:function(){return h},yg:function(){return g}});var r=n(93433),i=n(1413),o=n(36600),a=n(28381),s=n(86278),l=n(21601),c=n(40243),u=n(14746),d=n(32484),p=n(61325),f=n(29343),h=function(e){var t=e.exportState,n=e.updateExportState,u=e.isExporting,d=e.build;if(d&&"complete"===d.status)return null;var p=function(e,t){n((function(n){return t&&-1===n.targets.indexOf(e)?(0,i.Z)((0,i.Z)({},n),{},{targets:[].concat((0,r.Z)(n.targets),[e])}):t||-1===n.targets.indexOf(e)?n:(0,i.Z)((0,i.Z)({},n),{},{targets:n.targets.filter((function(t){return t!==e}))})}))};return(0,f.jsx)(a.Fragment,{children:(0,f.jsxs)(c.sg,{noMargin:!0,expand:!0,children:[(0,f.jsx)(c.x1,{children:(0,f.jsx)(s.Z,{align:"center",children:(0,f.jsx)(o.Trans,{id:"Your game will be exported and packaged online as a stand-alone game for Windows, Linux and/or macOS."})})}),(0,f.jsx)(l.Z,{label:(0,f.jsx)(o.Trans,{id:"Windows (zip file)"}),checked:-1!==t.targets.indexOf("winZip"),onCheck:function(e,t){return p("winZip",t)},disabled:u}),(0,f.jsx)(l.Z,{label:(0,f.jsx)(o.Trans,{id:"Windows (auto-installer file)"}),checked:-1!==t.targets.indexOf("winExe"),onCheck:function(e,t){return p("winExe",t)},disabled:u}),(0,f.jsx)(l.Z,{label:(0,f.jsx)(o.Trans,{id:"macOS (zip file)"}),checked:-1!==t.targets.indexOf("macZip"),onCheck:function(e,t){return p("macZip",t)},disabled:u}),(0,f.jsx)(l.Z,{label:(0,f.jsx)(o.Trans,{id:"Linux (AppImage)"}),checked:-1!==t.targets.indexOf("linuxAppImage"),onCheck:function(e,t){return p("linuxAppImage",t)},disabled:u})]})})},g=function(e){var t=e.disabled,n=e.launchExport,r=e.isExporting,i=e.exportPipelineName,a=e.exportStep,s=e.build,l=e.stepMaxProgress,h=e.stepCurrentProgress,g=e.errored,x=r||!!s&&"error"!==s.status;return(0,f.jsxs)(p.ak,{noMargin:!0,children:[!x&&(0,f.jsx)(c.x1,{justifyContent:"center",children:(0,f.jsx)(d.Z,{label:(0,f.jsx)(o.Trans,{id:"Create installation file"}),primary:!0,id:"launch-export-".concat(i,"-button"),onClick:n,disabled:t})}),x&&(0,f.jsx)(c.x1,{expand:!0,children:(0,f.jsx)(u.Z,{exportStep:a,hasBuildStep:!0,build:s,stepMaxProgress:l,stepCurrentProgress:h,errored:g})})]})},x={key:"onlineelectronexport",tabName:(0,f.jsx)(o.Trans,{id:"Desktop"}),name:(0,f.jsx)(o.Trans,{id:"Windows, macOS & Linux"}),helpPage:"/publishing/windows-macos-linux"}},91069:function(e,t,n){"use strict";n.d(t,{Z:function(){return L}});var r=n(74165),i=n(15861),o=n(29439),a=n(36600),s=n(28381),l=n(86278),c=n(40243),u=n(10959),d=n(22537),p=n(67835),f=n(1773),h=n(16999),g=n(71106),x=n(82936),m=n(12203),v=n(78196),b=n(57244),C=n(63854),j=n(29343),y=function(e){var t=e.project,n=e.onSaveProject,l=e.buildId,c=e.game,d=e.onClose,h=e.onApply,x=e.isLoading,y=e.i18n,Z=s.useContext(g.ZP).profile,k=s.useState(t.getName()),w=(0,o.Z)(k,2),T=w[0],S=w[1],P=s.useState(t.getCategories().toJSArray()),E=(0,o.Z)(P,2),I=E[0],M=E[1],L=s.useState(t.getDescription()),A=(0,o.Z)(L,2),F=A[0],O=A[1],R=s.useState(t.getAuthorIds().toJSArray()),D=(0,o.Z)(R,2),_=D[0],B=D[1],N=s.useState(t.getAuthorUsernames().toJSArray()),U=(0,o.Z)(N,2),H=U[0],V=U[1],z=s.useState(t.isPlayableWithKeyboard()),W=(0,o.Z)(z,2),G=W[0],Y=W[1],q=s.useState(t.isPlayableWithGamepad()),X=(0,o.Z)(q,2),K=X[0],J=X[1],Q=s.useState(t.isPlayableWithMobile()),$=(0,o.Z)(Q,2),ee=$[0],te=$[1],ne=s.useState(c.cachedCurrentSlug&&c.cachedCurrentSlug.username||Z&&Z.username||""),re=(0,o.Z)(ne,2),ie=re[0],oe=re[1],ae=s.useState(c.cachedCurrentSlug&&c.cachedCurrentSlug.gameSlug||(0,m.GN)(t.getName())),se=(0,o.Z)(ae,2),le=se[0],ce=se[1],ue=s.useState(t.getOrientation()),de=(0,o.Z)(ue,2),pe=de[0],fe=de[1],he=s.useState(!!c.discoverable),ge=(0,o.Z)(he,2),xe=ge[0],me=ge[1],ve=(0,u.UN)(t,l),be=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(i){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=i.saveProject,!(0,v.U6)(t,y,{name:T,categories:I||[],description:F||"",authorIds:_,authorUsernames:H,playWithKeyboard:!!G,playWithGamepad:!!K,playWithMobile:!!ee,orientation:pe||"default"})){e.next=7;break}if(!o){e.next=5;break}return e.next=5,n();case 5:return e.next=7,h({discoverable:xe,userSlug:ie,gameSlug:le});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,j.jsx)(f.ZP,{title:(0,j.jsx)(a.Trans,{id:"Verify your game info before publishing"}),actions:[(0,j.jsx)(p.Z,{label:(0,j.jsx)(a.Trans,{id:"Back"}),primary:!1,onClick:d,disabled:x},"back"),(0,j.jsx)(C.Z,{isLoading:x,children:(0,j.jsx)(b.Z,{label:(0,j.jsx)(a.Trans,{id:"Save project and publish"}),primary:!0,onClick:function(){be({saveProject:!0})},disabled:x,buildMenuTemplate:function(e){return[{label:e._({id:"Publish without saving project"}),click:function(){return be({saveProject:!1})}}]}})},"publish")],cannotBeDismissed:x,onRequestClose:d,onApply:function(){be({saveProject:!0})},open:!0,children:(0,j.jsx)(m.b$,{name:T,setName:S,categories:I,setCategories:M,description:F,setDescription:O,project:t,authorIds:_,setAuthorIds:B,setAuthorUsernames:V,setPlayableWithKeyboard:Y,playWithKeyboard:G,setPlayableWithGamepad:J,playWithGamepad:K,setPlayableWithMobile:te,playWithMobile:ee,setOrientation:fe,orientation:pe,userSlug:ie,setUserSlug:oe,gameSlug:le,setGameSlug:ce,discoverable:xe,setDiscoverable:me,displayThumbnail:!0,thumbnailUrl:ve,disabled:x})})},Z=n(75087),k=n(65911),w=n(78966),T=n(61325),S=n(65056),P=n(66789),E=n(55089),I=n(94553),M=n(6996),L=function(e){var t=e.build,n=e.game,m=e.project,v=e.onSaveProject,b=e.isSavingProject,C=e.errored,L=e.exportStep,A=e.onGameUpdated,F=e.automaticallyOpenGameProperties,O=s.useState(!1),R=(0,o.Z)(O,2),D=R[0],_=R[1],B=s.useState(!1),N=(0,o.Z)(B,2),U=N[0],H=N[1],V=(0,M.U)().isMobile,z=s.useState(!1),W=(0,o.Z)(z,2),G=W[0],Y=W[1],q=s.useState(!1),X=(0,o.Z)(q,2),K=X[0],J=X[1],Q=s.useContext(g.ZP),$=Q.getAuthorizationHeader,ee=Q.profile,te=s.useState(5),ne=(0,o.Z)(te,2),re=ne[0],ie=ne[1],oe=(0,S.Z)().showAlert,ae=!C&&""!==L&&"done"!==L,se=t&&"complete"===t.status,le=t&&n&&t.id===n.publicWebBuildId,ce=(0,h.IH)(n),ue=ae||!se?null:le?ce:(0,u.Fp)(t,"s3Key");s.useEffect((function(){if(ae){var e=setTimeout((function(){ie(re?re-1:0)}),1e3);return function(){return clearTimeout(e)}}}),[ae,re]);var de=s.useCallback(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(i){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee&&n&&t){e.next=2;break}return e.abrupt("return",!1);case 2:return o=(0,h.WO)(m.getAuthorIds().toJSArray()),e.prev=3,e.next=6,(0,h.wC)($,ee.id,m.getProjectUuid(),{author:o});case 6:e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(3),console.error("Unable to update the authors:",e.t0.response||e.t0.message),e.next=13,oe({title:{id:"Unable to update the authors of the project."},message:{id:"Verify your internet connection or try again later."}});case 13:return e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),[t,n,$,ee,m,oe]),pe=s.useCallback(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(i,o){var a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee&&n&&t){e.next=2;break}return e.abrupt("return",!1);case 2:if(a=i.userSlug,s=i.gameSlug,!a||!s||a!==ee.username){e.next=15;break}return e.prev=4,e.next=7,(0,h.b)($,ee.id,n.id,a,s);case 7:e.next=15;break;case 9:return e.prev=9,e.t0=e.catch(4),console.error("Unable to update the game slug:",e.t0.response||e.t0.message),e.next=14,oe({title:{id:"Unable to update the game slug."},message:{id:"Remember that a slug must be 6 to 30 characters long and only contains letters, digits or dashes. Verify your internet connection or try again later."}});case 14:return e.abrupt("return",!1);case 15:return e.abrupt("return",!0);case 16:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t,n){return e.apply(this,arguments)}}(),[t,n,$,ee,oe]);s.useEffect((function(){"done"===L&&(ie(5),H(!0))}),[L,F]),s.useEffect((function(){se&&F&&Y(!0)}),[se,F]);var fe=s.useCallback(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(i,a){var s,l,c,d,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee&&n&&t){e.next=2;break}return e.abrupt("return",!1);case 2:return s=ee.id,e.prev=3,J(!0),e.next=7,(0,h.Bi)($,s,n.id,{gameName:m.getName(),description:m.getDescription(),categories:m.getCategories().toJSArray(),playWithGamepad:m.isPlayableWithGamepad(),playWithKeyboard:m.isPlayableWithKeyboard(),playWithMobile:m.isPlayableWithMobile(),orientation:m.getOrientation(),publicWebBuildId:t.id,thumbnailUrl:(0,u.UN)(m,t.id),discoverable:i.discoverable});case 7:return e.next=9,Promise.all([de(a),pe(i,a)]);case 9:return l=e.sent,c=(0,o.Z)(l,2),d=c[0],p=c[1],e.next=15,A();case 15:if(d&&p){e.next=17;break}return e.abrupt("return",!1);case 17:e.next=25;break;case 19:return e.prev=19,e.t0=e.catch(3),e.next=23,oe({title:{id:"Unable to update the game."},message:{id:"Verify that your internet connection is working or try again later."}});case 23:return console.error("Unable to update the game",e.t0),e.abrupt("return",!1);case 25:return e.prev=25,J(!1),e.finish(25);case 28:return e.abrupt("return",!0);case 29:case"end":return e.stop()}}),e,null,[[3,19,25,28]])})));return function(t,n){return e.apply(this,arguments)}}(),[n,$,ee,t,m,de,pe,A,oe]);if(!t&&!L)return null;var he=[(0,j.jsx)(p.Z,{label:(0,j.jsx)(a.Trans,{id:"Close"}),primary:!1,onClick:function(){return H(!1)}},"close"),n&&ue&&!le&&(0,j.jsx)(f.vF,{label:(0,j.jsx)(a.Trans,{id:"Verify and Publish to gd.games"}),primary:!0,onClick:function(){return Y(!0)}},"publish")];return(0,j.jsx)(a.I18n,{children:function(e){var o=e.i18n;return(0,j.jsxs)(j.Fragment,{children:[ae&&(0,j.jsxs)(c.sg,{alignItems:"center",children:[(0,j.jsx)(l.Z,{children:(0,j.jsx)(a.Trans,{id:"Uploading your game..."})}),(0,j.jsx)(c.x1,{expand:!0,children:(0,j.jsx)(P.Z,{value:(5-re)/5*100,variant:0===re?"indeterminate":"determinate"})})]}),U&&(0,j.jsxs)(f.ZP,{title:(0,j.jsx)(a.Trans,{id:"Share your game"}),id:"export-game-share-dialog",minHeight:"sm",maxWidth:"md",actions:he,open:!0,onRequestClose:function(){return H(!1)},onApply:function(){n&&ue&&!le&&Y(!0)},flexColumnBody:!0,children:[ue&&!K?(0,j.jsxs)(T.ak,{noMargin:!0,children:[(0,j.jsx)(Z.Z,{url:ue}),(0,j.jsxs)(T.ak,{noMargin:!0,expand:!0,children:[navigator.share?(0,j.jsx)(w.Z,{url:ue}):(0,j.jsx)(c.sg,{expand:!0,justifyContent:"flex-end",noMargin:!0,alignItems:"flex-end",children:(0,j.jsx)(k.Z,{url:ue})}),(0,j.jsx)(c.x1,{noMargin:!0,children:(0,j.jsx)(l.Z,{children:(0,j.jsx)(a.Trans,{id:"Share it with this QR code:"})})}),(0,j.jsx)(c.x1,{noMargin:!0,justifyContent:"center",children:(0,j.jsx)(I.Z,{url:ue,size:V?100:150})})]}),le?(0,j.jsx)(E.C,{project:m,hideLoader:!0,suggestAdditionalActions:!0}):n?(0,j.jsx)(x.Z,{kind:"info",children:(0,j.jsx)(a.Trans,{id:"This link is private. You can share it with collaborators, friends or testers. When you're ready you can publish it so that your game has its own page on gd.games - GDevelop gaming platform."})}):null]}):(0,j.jsxs)(T.ak,{alignItems:"center",justifyContent:"center",expand:!0,children:[(0,j.jsx)(c.x1,{children:(0,j.jsx)(P.Z,{size:40})}),(0,j.jsx)(l.Z,{children:F?(0,j.jsx)(a.Trans,{id:"Loading your game..."}):(0,j.jsx)(a.Trans,{id:"Loading your link..."})})]}),(0,j.jsx)(d.Z,{message:(0,j.jsx)(a.Trans,{id:"Copied to clipboard!"}),visible:D,hide:function(){return _(!1)}})]}),n&&t&&G&&(0,j.jsx)(y,{project:m,onSaveProject:v,buildId:t.id,onClose:function(){Y(!1),F&&H(!1)},onApply:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(t,o);case 2:e.sent&&Y(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),game:n,isLoading:b||K,i18n:o})]})}})}},4615:function(e,t,n){"use strict";var r=n(74165),i=n(15861),o=n(29439),a=n(36600),s=n(28381),l=n(61325),c=n(67835),u=n(32484),d=n(40243),p=n(91069),f=n(29343);t.Z=function(e){var t=e.project,n=e.game,h=e.builds,g=e.build,x=e.onSaveProject,m=e.isSavingProject,v=e.errored,b=e.exportStep,C=e.disabled,j=e.launchExport,y=e.exportPipelineName,Z=(e.isExporting,e.onGameUpdated),k=!(!n||!h)&&!!h.filter((function(e){return e.gameId===n.id})).length,w=!!n&&!!n.publicWebBuildId,T=s.useState(!1),S=(0,o.Z)(T,2),P=S[0],E=S[1],I=""!==b&&"done"!==b?null:k?w?(0,f.jsxs)(l.ep,{justifyContent:"center",children:[(0,f.jsx)(c.Z,{label:(0,f.jsx)(a.Trans,{id:"Generate new link"}),primary:!0,id:"launch-export-".concat(y,"-web-button"),onClick:(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!1),e.next=3,j();case 3:case"end":return e.stop()}}),e)}))),disabled:C}),(0,f.jsx)(u.Z,{label:(0,f.jsx)(a.Trans,{id:"Update my current page"}),primary:!0,id:"launch-export-and-publish-".concat(y,"-web-button"),onClick:(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:E(!0);case 3:case"end":return e.stop()}}),e)}))),disabled:C})]}):(0,f.jsx)(d.x1,{justifyContent:"center",children:(0,f.jsx)(u.Z,{label:(0,f.jsx)(a.Trans,{id:"Generate new link"}),primary:!0,id:"launch-export-".concat(y,"-web-button"),onClick:(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!1),e.next=3,j();case 3:case"end":return e.stop()}}),e)}))),disabled:C})}):(0,f.jsx)(d.x1,{justifyContent:"center",children:(0,f.jsx)(u.Z,{label:(0,f.jsx)(a.Trans,{id:"Generate link"}),primary:!0,id:"launch-export-".concat(y,"-web-button"),onClick:(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!1),e.next=3,j();case 3:case"end":return e.stop()}}),e)}))),disabled:C})});return(0,f.jsxs)(l.ak,{noMargin:!0,children:[I,(0,f.jsx)(p.Z,{build:g,project:t,onSaveProject:x,isSavingProject:m,errored:v,exportStep:b,automaticallyOpenGameProperties:P,onGameUpdated:Z,game:n})]})}},96516:function(e,t,n){"use strict";n.d(t,{O1:function(){return u},if:function(){return c}});var r=n(36600),i=(n(28381),n(86278)),o=n(40243),a=(n(91069),n(44378)),s=n(29343),l={icon:{height:48,width:48,margin:10}},c=function(){return(0,s.jsxs)(o.sg,{noMargin:!0,children:[(0,s.jsx)(o.x1,{alignItems:"center",justifyContent:"center",children:(0,s.jsx)(i.Z,{align:"center",children:(0,s.jsx)(r.Trans,{id:"Generate a unique link, playable from any computer or mobile phone's browser."})})}),(0,s.jsx)(o.x1,{justifyContent:"center",children:(0,s.jsx)(a.Z,{color:"secondary",style:l.icon})})]})},u={key:"onlinewebexport",tabName:"Web",name:(0,s.jsx)(r.Trans,{id:"gd.games"}),helpPage:"/publishing/web"}},18375:function(e,t,n){"use strict";n.d(t,{Z:function(){return We}});var r=n(1413),i=n(93433),o=n(74165),a=n(15861),s=n(29439),l=n(36600),c=n(28381),u=n(1773),d=n(4076),p=n(67835),f=n(86335),h=n(38501),g=n(29343),x=function(e){var t=e.authenticatedUser,n=e.game,r=e.open,i=e.onClose,o=e.onGameUpdated,a=(0,h.Z)();return r?(0,g.jsx)(u.ZP,{title:(0,g.jsx)(l.Trans,{id:"{0} builds",values:{0:n.gameName}}),actions:[(0,g.jsx)(p.Z,{label:(0,g.jsx)(l.Trans,{id:"Close"}),primary:!1,onClick:i},"close")],secondaryActions:[(0,g.jsx)(d.Z,{helpPagePath:"/publishing"},"help")],onRequestClose:i,open:r,children:(0,g.jsx)(f.Z,{onBuildsUpdated:a,authenticatedUser:t,game:n,onGameUpdated:o})}):null},m=n(71106),v=n(51375),b=n(35638),C=n(50583),j=n(61325),y=n(86278),Z=n(40243),k=n(15671),w=n(43144),T=n(60136),S=n(29388),P=n(62800),E=n(30141),I=n(54458),M=n(68151),L=n(78081),A=n(90115),F=n(24910),O=n(62903),R={subscriptionContainer:{display:"flex",borderRadius:10,alignItems:"center"},diamondIcon:{width:50,height:50,aspectRatio:"1"}},D=function(e){var t=e.subscription,n=e.quota,i=e.usagePrice,s=(e.onChangeSubscription,e.onStartBuildWithCredits),u=e.hidePurchaseWithCredits,d=c.useContext(F.Z),p=c.useContext(O.q$),f=p.openCreditsPackageDialog,h=p.openCreditsUsageDialog,x=c.useContext(m.ZP),v=x.profile,b=x.limits,C=i?i.priceInCredits:0,k=c.useCallback((function(){if(v&&b&&C){var e=b.credits.userBalance.amount;e<C?f({missingCredits:C-e}):h({title:(0,g.jsx)(l.Trans,{id:"Start build with credits"}),message:(0,g.jsx)(l.Trans,{id:"You are about to use {usageCreditPrice} credits to start this build. Continue?",values:{usageCreditPrice:C}}),onConfirm:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),successMessage:(0,g.jsx)(l.Trans,{id:"Build started!"}),closeAutomaticallyAfterSuccess:!0})}}),[v,b,C,h,s,f]);if(!n||!t||!i)return(0,g.jsx)(L.Z,{});var w=0===n.max,T=(0,M.e_)(t),S=Math.max(n.max-n.current,0),P="".concat(n.current,"/").concat(n.max),E="30days"===n.period?(0,g.jsx)(l.Trans,{id:"You have <0>{remainingBuilds}</0> builds remaining \u2014 you have used {usageRatio} in the past 30 days.",values:{remainingBuilds:S,usageRatio:P},components:[(0,g.jsx)("b",{})]}):(0,g.jsx)(l.Trans,{id:"You have <0>{remainingBuilds}</0> builds remaining \u2014 you have used {usageRatio} in the past 24h.",values:{remainingBuilds:S,usageRatio:P},components:[(0,g.jsx)("b",{})]}),I="30days"===n.period?(0,g.jsx)(l.Trans,{id:"You have <0>{remainingBuilds}</0> build remaining \u2014 you have used {usageRatio} in the past 30 days.",values:{remainingBuilds:S,usageRatio:P},components:[(0,g.jsx)("b",{})]}):(0,g.jsx)(l.Trans,{id:"You have <0>{remainingBuilds}</0> build remaining \u2014 you have used {usageRatio} in the past 24h.",values:{remainingBuilds:S,usageRatio:P},components:[(0,g.jsx)("b",{})]}),D=!(0,M.Lf)(t);return(0,g.jsx)(j.ak,{noMargin:!0,children:T?n.limitReached?(0,g.jsx)(A.Z,{subscriptionDialogOpeningReason:w?"Unlock build type":"Build limit reached",label:(0,g.jsx)(l.Trans,{id:"Upgrade your subscription"}),makeButtonRaised:!0,payWithCreditsOptions:u?void 0:{label:(0,g.jsx)(l.Trans,{id:"Purchase with {usageCreditPrice} credits",values:{usageCreditPrice:C}}),onPayWithCredits:k},hideButton:D,children:(0,g.jsx)(Z.x1,{children:w?(0,g.jsx)(Z.sg,{noMargin:!0,children:(0,g.jsx)(y.Z,{noMargin:!0,children:(0,g.jsx)(l.Trans,{id:"Upgrade your GDevelop subscription to unlock this packaging."})})}):(0,g.jsxs)(Z.sg,{noMargin:!0,children:[(0,g.jsx)(y.Z,{noMargin:!0,children:E}),(0,g.jsx)(y.Z,{noMargin:!0,children:D?(0,g.jsx)(l.Trans,{id:"Use GDevelop credits to start an export."}):(0,g.jsx)(l.Trans,{id:"Use GDevelop credits or upgrade your subscription to increase the limits."})})]})})}):(0,g.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},R.subscriptionContainer),{},{border:"1px solid ".concat(d.palette.secondary)}),children:[(0,g.jsx)("img",{src:"res/diamond.svg",style:R.diamondIcon,alt:"diamond"}),(0,g.jsx)(Z.x1,{children:(0,g.jsx)(Z.sg,{expand:!0,children:(0,g.jsx)(y.Z,{noMargin:!0,children:1===S?I:E})})})]}):(0,g.jsx)(A.Z,{subscriptionDialogOpeningReason:w?"Unlock build type":"Build limit reached",label:(0,g.jsx)(l.Trans,{id:"Get a subscription"}),makeButtonRaised:n.limitReached,payWithCreditsOptions:!n.limitReached||u?void 0:{label:(0,g.jsx)(l.Trans,{id:"Purchase with {usageCreditPrice} credits",values:{usageCreditPrice:C}}),onPayWithCredits:k},children:(0,g.jsx)(Z.x1,{children:w?(0,g.jsx)(Z.sg,{noMargin:!0,children:(0,g.jsx)(y.Z,{noMargin:!0,children:(0,g.jsx)(l.Trans,{id:"Get a subscription to unlock this packaging."})})}):(0,g.jsxs)(Z.sg,{noMargin:!0,children:[(0,g.jsx)(y.Z,{noMargin:!0,children:1===S?I:E}),(0,g.jsx)(y.Z,{noMargin:!0,children:n.limitReached?(0,g.jsx)(l.Trans,{id:"Use GDevelop credits or get a subscription to increase the limits."}):(0,g.jsx)(l.Trans,{id:"Get a GDevelop subscription to increase the limits."})})]})})})})},_=n(32921),B=n(3498),N=n(16999),U=n(24830),H=n(2861),V=n(91),z=n(34976),W=n.n(z),G=n(57597),Y=n(82936),q=function(e){(0,T.Z)(n,e);var t=(0,S.Z)(n);function n(e){var i,s;return(0,k.Z)(this,n),(i=t.call(this,e)).state={exportStep:"",build:null,compressionOutput:null,stepCurrentProgress:0,stepMaxProgress:0,doneFooterOpen:!1,errored:!1,shouldBumpVersionNumber:!0,exportState:i.props.exportPipeline.getInitialExportState(i.props.project)},i._candidateBumpedVersionNumber="",i.buildsWatcher=new B.Z,i._setupAchievementHook=function(){i.props.exportPipeline.name.includes("web")?i.launchWholeExport=(0,H.zi)(i.props.authenticatedUser,H.$A,i._launchWholeExport):i.launchWholeExport=i._launchWholeExport},i._updateStepProgress=function(e,t){return i.setState({stepCurrentProgress:e,stepMaxProgress:t})},i._startBuildWatch=function(e){i.state.build&&i.buildsWatcher.start({authenticatedUser:e,builds:[i.state.build],onBuildUpdated:function(t){"pending"===t.status?i.setState({build:t}):setTimeout((function(){i.setState({build:t}),e.onRefreshLimits(),i.props.onRefreshBuilds()}),3e3)}})},i.tryUpdateAuthors=(0,a.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=i.props.authenticatedUser.profile)){e.next=11;break}return n=(0,N.WO)(i.props.project.getAuthorIds().toJSArray()),e.prev=3,e.next=6,(0,N.wC)(i.props.authenticatedUser.getAuthorizationHeader,t.id,i.props.project.getProjectUuid(),{author:n});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])}))),i.registerGameIfNot=(0,a.Z)((0,o.Z)().mark((function e(){var t,n,r,a,s,l,c,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.props.authenticatedUser.profile,n=i.props.authenticatedUser.getAuthorizationHeader,r=i.props.project.getProjectUuid(),!t){e.next=21;break}return a=t.id,e.prev=5,e.next=8,(0,N.cF)(n,a,r);case 8:e.next=21;break;case 10:if(e.prev=10,e.t0=e.catch(5),!(s=(0,V.T)(e.t0))||404!==s.status){e.next=21;break}return l=i.props.project.getAuthor()||"Unspecified publisher",c=i.props.project.getTemplateSlug(),u=i.props.project.getName()||"Untitled game",e.next=19,(0,N.r$)(n,a,{gameId:r,authorName:l,gameName:u,templateSlug:c});case 19:i.tryUpdateAuthors(),i.props.onGameUpdated();case 21:case"end":return e.stop()}}),e,null,[[5,10]])}))),i._launchWholeExport=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r,a,s,l,c,u,d,p,f,h,g,x,m,v,b,C,j,y,Z,k,w;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.i18n,r=t.payWithCredits,a=i.props,s=a.project,l=a.exportPipeline,c=a.eventsFunctionsExtensionsState,u=a.authenticatedUser,(0,P.nU)(l.name),(0,_.vv)(n,(0,_.nu)(n,s))){e.next=5;break}return e.abrupt("return");case 5:return d=function(){switch(i.state.exportStep){case"export":return n._({id:"Error while exporting the game."});case"resources-download":return n._({id:"Error while downloading the game resources. Check your internet connection and that all resources of the game are valid in the Resources editor."});case"compress":return n._({id:"Error while compressing the game."});case"upload":return n._({id:"Error while uploading the game. Check your internet connection or try again later."});case"waiting-for-build":return n._({id:"Error while building the game. Check the logs of the build for more details."});case"build":return n._({id:"Error while building of the game. Check the logs of the build for more details."});default:return n._({id:"Error while building the game. Try again later. Your internet connection may be slow or one of your resources may be corrupted."})}},p=function(e){i.state.errored||(i.setState({errored:!0}),(0,E.gR)({message:d()+(e.message?"\n\n".concat(e.message):""),rawError:{exportStep:i.state.exportStep,rawError:e},errorId:"export-error"}))},f=function(e){return i.setState({exportStep:e})},e.prev=8,f("register"),e.next=12,i.registerGameIfNot();case 12:e.next=19;break;case 14:e.prev=14,e.t0=e.catch(8),console.warn("Error while registering the game."),(h=(0,V.T)(e.t0))&&"game-creation/too-many-games"===h.code&&(0,E.gR)({message:[n._({id:"You have reached the maximum number of games you can register! You can unregister games in your Games Dashboard."}),n._({id:"A link or file will be created but the game will not be registered."})].join("\n\n"),rawError:e.t0,errorId:"too-many-games-register"});case 19:return e.prev=19,g={project:s,updateStepProgress:i._updateStepProgress,exportState:i.state.exportState},l.shouldSuggestBumpingVersionNumber&&l.shouldSuggestBumpingVersionNumber()&&i.state.shouldBumpVersionNumber&&s.setVersion(i._candidateBumpedVersionNumber),f("export"),i.setState({stepCurrentProgress:0,stepMaxProgress:0,errored:!1,build:null}),e.next=26,l.prepareExporter(g);case 26:return x=e.sent,m=u.profile,v=m?{username:m.username||"",id:m.id}:void 0,e.next=31,c.ensureLoadFinished();case 31:return e.next=33,l.launchExport(g,x,v);case 33:return b=e.sent,f("resources-download"),e.next=37,l.launchResourcesDownload(g,b);case 37:return C=e.sent,f("compress"),e.next=41,l.launchCompression(g,C);case 41:if(j=e.sent,y=l.launchUpload,Z=l.launchOnlineBuild,!y||!Z){e.next=57;break}return f("upload"),e.next=47,y(g,j);case 47:return k=e.sent,f("waiting-for-build"),e.next=51,Z(i.state.exportState,u,k,s.getProjectUuid(),{gameName:s.getName(),gameVersion:s.getVersion()},!!r);case 51:w=e.sent,f("build"),i.props.authenticatedUser.onRefreshLimits(),i.setState({build:w},(function(){i._startBuildWatch(u)})),i.props.onGameUpdated(),i.props.onRefreshBuilds();case 57:f("done"),i.setState({compressionOutput:j,doneFooterOpen:!0}),e.next=65;break;case 61:e.prev=61,e.t1=e.catch(19),console.error("An error happened during export:",e.t1),p(e.t1);case 65:case"end":return e.stop()}}),e,null,[[8,14],[19,61]])})));return function(t){return e.apply(this,arguments)}}(),i._updateExportState=function(e){i.setState((function(t){return(0,r.Z)((0,r.Z)({},t),{},{exportState:e(t.exportState)})}))},i._setupAchievementHook(),i._candidateBumpedVersionNumber=(s=e.project,W()(s.getVersion(),"patch",{loose:!0})),i}return(0,w.Z)(n,[{key:"componentWillMount",value:function(){this.props.authenticatedUser.onRefreshLimits()}},{key:"componentWillUnmount",value:function(){this.buildsWatcher.stop()}},{key:"componentDidUpdate",value:function(e,t){this._setupAchievementHook(),t.exportStep===this.state.exportStep&&t.errored===this.state.errored||this.props.setIsNavigationDisabled(this.props.exportPipeline.isNavigationDisabled(this.state.exportStep,this.state.errored))}},{key:"render",value:function(){var e=this,t=this.state,n=t.exportStep,r=t.compressionOutput,i=t.build,s=t.stepMaxProgress,c=t.stepCurrentProgress,u=t.errored,d=t.doneFooterOpen,p=t.exportState,f=this.props,h=f.project,x=f.authenticatedUser,m=f.exportPipeline,v=f.onSaveProject,b=f.isSavingProject,C=f.builds,j=f.game,y=f.gameAvailabilityError,k=f.onGameUpdated;if(!h)return null;var w=function(e,t){return e.limits&&t?e.limits.quotas[t]:null}(x,m.onlineBuildType),T=function(e,t){return e.limits&&t?e.limits.credits.prices[t]:null}(x,m.onlineBuildType),S=function(e){if(w&&!(w?Math.max(w.max-w.current,0):0))return!1;return m.canLaunchBuild(p,u,n)};if(!C&&x.authenticated)return(0,g.jsx)(L.Z,{});var P=!!n&&"done"!==n,E=!!i&&"pending"===i.status,M=P||E,A="done"===n&&!E||u,F=!!m.onlineBuildType&&!x.authenticated,O=!!w&&w.max>0,R=!!C&&!!C.filter((function(e){return"pending"===e.status&&e.type===m.onlineBuildType&&e.createdAt&&e.createdAt>Date.now()-6e5})).length;return(0,g.jsx)(l.I18n,{children:function(t){var f=t.i18n;return(0,g.jsxs)(Z.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:[!F&&(0,g.jsxs)(Z.sg,{noMargin:!0,children:[!!m.onlineBuildType&&y&&"not-owned"===y&&(0,g.jsx)(Y.Z,{kind:"warning",children:(0,g.jsx)(l.Trans,{id:"The project currently opened is registered online but you don't have access to it. A link or file will be created but the game will not be registered."})}),!!m.packageNameWarningType&&-1!==h.getPackageName().indexOf("com.example")&&(0,g.jsx)(Z.x1,{children:(0,g.jsx)(U.Z,{identifier:"project-should-have-unique-package-name",kind:"warning",children:f._("mobile"===m.packageNameWarningType?{id:"The package name begins with com.example, make sure you replace it with an unique one to be able to publish your game on app stores."}:{id:"The package name begins with com.example, make sure you replace it with an unique one, else installing your game might overwrite other games."})})}),m.renderTutorial&&m.renderTutorial()]}),(0,g.jsxs)(Z.sg,{expand:!0,justifyContent:"center",children:[!F&&(0,g.jsx)(Z.x1,{alignItems:"center",justifyContent:"center",children:m.renderHeader({project:h,authenticatedUser:x,exportState:p,updateExportState:e._updateExportState,isExporting:M,exportStep:n,build:i,quota:w})}),!F&&O&&m.shouldSuggestBumpingVersionNumber&&m.shouldSuggestBumpingVersionNumber()&&!A&&(0,g.jsx)(Z.x1,{noMargin:!0,children:(0,g.jsx)(G.Z,{labelPosition:"right",toggled:e.state.shouldBumpVersionNumber,label:(0,g.jsx)(l.Trans,{id:"Increase version number to {0}",values:{0:e._candidateBumpedVersionNumber}}),onToggle:function(t,n){e.setState({shouldBumpVersionNumber:n})},disabled:M})}),!!m.limitedBuilds&&x.authenticated&&!A&&(0,g.jsx)(Z.x1,{children:(0,g.jsx)(Z.sg,{noMargin:!0,expand:!0,children:(0,g.jsx)(D,{subscription:x.subscription,quota:w,usagePrice:T,onChangeSubscription:e.props.onChangeSubscription,onStartBuildWithCredits:function(){e._launchWholeExport({i18n:f,payWithCredits:!0})},hidePurchaseWithCredits:M})})}),!!m.limitedBuilds&&x.authenticated&&!i&&R&&(0,g.jsx)(Y.Z,{kind:"info",children:(0,g.jsx)(l.Trans,{id:"You have a build currently running, you can see its progress via the exports button at the bottom of this dialog."})}),F&&(0,g.jsx)(I.Z,{onOpenLoginDialog:x.onOpenLoginDialog,onOpenCreateAccountDialog:x.onOpenCreateAccountDialog,message:(0,g.jsx)(l.Trans,{id:"Create an account or login first to export your game using online services."}),justifyContent:"center"}),!F&&m.renderExportFlow({project:h,game:j,builds:C,disabled:!S(),launchExport:function(){var t=(0,a.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.launchWholeExport({i18n:f}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),build:i,errored:u,exportStep:n,isSavingProject:b,onSaveProject:v,isExporting:P,stepCurrentProgress:c,stepMaxProgress:s,onGameUpdated:k}),d&&m.renderDoneFooter&&m.renderDoneFooter({compressionOutput:r,exportState:p})]})]})}})}}]),n}(c.Component),X=n(84900),K=n(83297),J=n(69186),Q=n(67674),$=n(3798),ee=n(65111),te=n(42699),ne=n(45047),re=n(22853),ie=n(44378),oe=n(17581),ae=n(78118),se=c.memo((function(e){return(0,g.jsxs)(ae.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("path",{d:"M7.99999 1.5C6.06224 1.5 4.96112 2.14946 4.39058 3.09085C3.9761 3.77473 3.88751 4.55026 3.86867 5.13611C3.3465 5.20941 2.72648 5.40287 2.17939 5.79285C1.41929 6.33468 0.833328 7.23493 0.833328 8.6C0.833328 9.50719 1.09222 10.2196 1.50599 10.7596C1.91551 11.2941 2.45363 11.6299 2.97079 11.8304C3.22826 11.9302 3.5179 11.8024 3.61771 11.5449C3.71752 11.2874 3.5897 10.9978 3.33223 10.898C2.94393 10.7475 2.57296 10.5079 2.29976 10.1514C2.0308 9.80039 1.83333 9.30621 1.83333 8.6C1.83333 7.56507 2.25737 6.96532 2.75984 6.60715C3.28806 6.23062 3.93747 6.1 4.36363 6.1C4.63977 6.1 4.86363 5.87614 4.86363 5.6C4.86363 4.98162 4.8741 4.22242 5.24578 3.60915C5.58433 3.05054 6.30139 2.5 7.99999 2.5C9.6986 2.5 10.4157 3.05054 10.7542 3.60915C11.1259 4.22242 11.1364 4.98162 11.1364 5.6C11.1364 5.87614 11.3602 6.1 11.6364 6.1C12.0625 6.1 12.7119 6.23062 13.2401 6.60715C13.7426 6.96532 14.1667 7.56507 14.1667 8.6C14.1667 9.30621 13.9692 9.80039 13.7002 10.1514C13.427 10.5079 13.0561 10.7475 12.6678 10.898C12.4103 10.9978 12.2825 11.2874 12.3823 11.5449C12.4821 11.8024 12.7717 11.9302 13.0292 11.8304C13.5464 11.6299 14.0845 11.2941 14.494 10.7596C14.9078 10.2196 15.1667 9.50719 15.1667 8.6C15.1667 7.23493 14.5807 6.33468 13.8206 5.79285C13.2735 5.40287 12.6535 5.20941 12.1313 5.13611C12.1125 4.55026 12.0239 3.77473 11.6094 3.09085C11.0389 2.14946 9.93775 1.5 7.99999 1.5Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M8.49999 8.6C8.49999 8.32386 8.27614 8.1 7.99999 8.1C7.72385 8.1 7.49999 8.32386 7.49999 8.6V12.8014L6.23055 11.5447C6.03431 11.3504 5.71774 11.352 5.52346 11.5482C5.32918 11.7445 5.33077 12.061 5.52701 12.2553L7.64822 14.3553C7.84307 14.5482 8.15692 14.5482 8.35177 14.3553L10.473 12.2553C10.6692 12.061 10.6708 11.7445 10.4765 11.5482C10.2823 11.352 9.96568 11.3504 9.76943 11.5447L8.49999 12.8014V8.6Z",fill:"currentColor"})]}))})),le=n(10959),ce=c.memo((function(e){return(0,g.jsxs)(ae.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,g.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.03337 0.737858C2.83663 0.619852 2.58484 0.650866 2.42262 0.813084L1.47995 1.75575C1.31775 1.91796 1.28673 2.16973 1.40471 2.36646L2.81804 4.72313C2.93852 4.92403 3.18233 5.01434 3.40462 4.94042L4.52695 4.56719L6.19529 6.23552C6.39055 6.43079 6.70713 6.43079 6.90239 6.23552C7.09766 6.04026 7.09765 5.72368 6.90239 5.52842L5.2342 3.86022L5.60787 2.73868C5.68194 2.51635 5.59166 2.2724 5.3907 2.15186L3.03337 0.737858ZM4.53236 2.80311L4.26691 3.59982L3.46946 3.86502L2.46305 2.18687L2.85372 1.7962L4.53236 2.80311Z",fill:"currentColor"}),(0,g.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.0746 9.36727C13.629 9.17699 14.1475 8.87302 14.5843 8.43629C15.2563 7.76463 15.6473 6.83232 15.7795 5.92276C15.9108 5.01863 15.7963 4.06342 15.3661 3.34717C15.2868 3.21521 15.1512 3.12712 14.9984 3.10836C14.8456 3.0896 14.6927 3.14227 14.5839 3.25114L12.6853 5.15036L11.3891 5.26786L11.507 3.97153L13.4057 2.07286C13.5146 1.964 13.5672 1.81108 13.5484 1.65829C13.5296 1.50551 13.4415 1.36989 13.3095 1.29064C12.5936 0.86078 11.6387 0.746336 10.7346 0.877572C9.82505 1.0096 8.89259 1.40042 8.2206 2.07242C6.97773 3.31529 6.81005 5.22033 7.27767 6.73346L2.69805 11.3131C2.43831 11.5728 2.23171 12.018 2.17966 12.4864C2.12537 12.975 2.23328 13.5554 2.69805 14.0202C3.16282 14.485 3.74322 14.5929 4.23183 14.5386C4.70029 14.4865 5.14545 14.2799 5.40518 14.0202L8.85923 10.5661L12.6466 14.3535C12.9063 14.6133 13.3515 14.8199 13.8199 14.8719C14.3086 14.9262 14.889 14.8183 15.3537 14.3535C15.8027 13.9046 15.9457 13.3566 15.9023 12.8604C15.8603 12.381 15.6443 11.937 15.3537 11.6464L13.0746 9.36727ZM8.92771 2.77952C9.41571 2.29152 10.1333 1.97534 10.8782 1.8672C11.3383 1.80042 11.7809 1.81676 12.161 1.90333L10.6719 3.39242C10.5892 3.47512 10.5381 3.5842 10.5275 3.70067L10.3389 5.77467C10.3254 5.92243 10.3783 6.06853 10.4832 6.17347C10.5881 6.2784 10.7342 6.33132 10.882 6.31793L12.956 6.12993C13.0725 6.11936 13.1817 6.06824 13.2644 5.98546L14.7536 4.49577C14.8403 4.87607 14.8567 5.31885 14.7898 5.77901C14.6816 6.52396 14.3652 7.24141 13.8773 7.72908C12.8991 8.70721 11.2469 8.83863 9.93531 8.32446C9.67821 8.22368 9.38809 8.35039 9.28731 8.60748C9.26799 8.65677 9.25703 8.70727 9.25375 8.75741L4.69808 13.3131C4.62448 13.3867 4.40296 13.5134 4.1214 13.5447C3.86 13.5737 3.60706 13.515 3.40516 13.3131C3.20325 13.1112 3.1445 12.8582 3.17354 12.5969C3.20483 12.3153 3.33156 12.0938 3.40516 12.0202L8.0592 7.36615C8.30963 7.26188 8.43181 6.97593 8.33233 6.72215C7.81815 5.41051 7.9496 3.75763 8.92771 2.77952ZM11.9126 9.60338C11.2665 9.65336 10.6142 9.57929 10.0181 9.40725L9.56634 9.85904L13.3537 13.6464C13.4273 13.72 13.6488 13.8467 13.9304 13.878C14.1918 13.9071 14.4447 13.8483 14.6466 13.6464C14.8643 13.4287 14.9266 13.1821 14.9061 12.9476C14.8841 12.6964 14.7668 12.4737 14.6466 12.3535L11.9799 9.68686C11.9541 9.66097 11.9316 9.63296 11.9126 9.60338Z",fill:"currentColor"})]}))})),ue=n(28923),de=n(99221),pe=n(48409),fe=n(65056),he=n(6996),ge={buttonBase:{borderRadius:8,padding:8,flex:1,cursor:"default"},titleContainer:{marginLeft:Z.XW,marginRight:Z.XW,display:"flex",alignItems:"center",flex:3},iconContainer:{width:36,height:36,display:"flex",alignItems:"center",justifyContent:"center"},icon:{width:36,height:36},iconSmall:{width:24,height:24},highlightedTag:{padding:"2px 6px",borderRadius:4}},xe=function(e){switch(e.section){case"browser":return(0,g.jsx)(l.Trans,{id:"Browser"});case"desktop":return(0,g.jsx)(l.Trans,{id:"Desktop"});case"android":return(0,g.jsx)(l.Trans,{id:"Android"});case"ios":return(0,g.jsx)(l.Trans,{id:"iOS"});default:return null}},me=function(e){var t=e.section,n=e.small;switch(t){case"browser":return(0,g.jsx)(v.Z,{style:n?ge.iconSmall:ge.icon});case"desktop":return(0,g.jsx)(C.Z,{style:n?ge.iconSmall:ge.icon});case"android":return(0,g.jsx)(de.Z,{style:n?ge.iconSmall:ge.icon});case"ios":return(0,g.jsx)(b.Z,{style:n?ge.iconSmall:ge.icon});default:return null}},ve=function(e,t){switch(e){case"browser":switch(t){case"online":return(0,g.jsx)(ie.Z,{style:ge.icon});case"offline":return(0,g.jsx)(oe.Z,{style:ge.icon});case"facebook":return(0,g.jsx)(re.Z,{style:ge.icon});default:return null}case"desktop":case"android":switch(t){case"online":return(0,g.jsx)(se,{style:ge.icon});case"offline":return(0,g.jsx)(ce,{style:ge.iconSmall});default:return null}case"ios":switch(t){case"online":return(0,g.jsx)(se,{style:ge.icon});case"offline":return(0,g.jsx)(ce,{style:ge.iconSmall});default:return null}default:return null}},be=function(e){var t=e.icon,n=e.label,i=e.onClick,o=e.description,a=e.disabled,s=e.small,u=e.highlighted,d=e.id,p=(0,J.Z)((function(e){return(0,Q.Z)({root:{border:"1px solid ".concat(e.palette.text.disabled),"&:focus":{backgroundColor:e.palette.action.hover},"&:hover":{backgroundColor:e.palette.action.hover},"&:disabled":{opacity:e.palette.action.disabledOpacity}}})}))(),f=c.useContext(F.Z),h=(0,he.U)().isMobile;return(0,g.jsx)($.Z,{onClick:i,focusRipple:!0,elevation:2,style:ge.buttonBase,classes:p,tabIndex:0,onKeyPress:function(e){(0,ee.ph)(e)&&i()},disabled:a,id:d,children:(0,g.jsxs)(j.ep,{expand:!0,justifyContent:"space-between",alignItems:"center",noColumnMargin:!0,children:[(0,g.jsx)(Z.sg,{alignItems:"flex-start",children:(0,g.jsxs)(j.pJ,{expand:!0,noMargin:!0,alignItems:"center",children:[(0,g.jsx)("div",{style:ge.iconContainer,children:t}),(0,g.jsx)(y.Z,{noMargin:!0,size:s?"sub-title":"block-title",align:"left",color:"primary",children:n}),u&&(0,g.jsx)("div",{style:(0,r.Z)((0,r.Z)({},ge.highlightedTag),{},{color:f.statusIndicator.success,border:"1px solid ".concat(f.statusIndicator.success)}),children:(0,g.jsx)(y.Z,{color:"inherit",noMargin:!0,children:(0,g.jsx)(l.Trans,{id:"Easiest"})})})]})}),(0,g.jsx)(Z.sg,{children:(0,g.jsxs)(j.pJ,{expand:!0,noMargin:!0,alignItems:"center",justifyContent:h?"space-between":"flex-end",children:[(0,g.jsx)(y.Z,{color:"secondary",size:"body2",align:h?"left":"right",noMargin:!0,children:o}),(0,g.jsx)(X.Z,{color:"secondary"})]})})]})})},Ce=function(e){var t=e.project,n=e.onSaveProject,i=e.isSavingProject,u=e.onChangeSubscription,d=e.isNavigationDisabled,p=e.setIsNavigationDisabled,f=e.onGameUpdated,h=e.selectedExporter,x=e.onChooseSection,v=e.onChooseSubSection,b=e.chosenSection,C=e.chosenSubSection,k=e.game,w=e.gameAvailabilityError,T=e.allExportersRequireOnline,S=e.showOnlineWebExporterOnly,P=(0,he.U)().isMobile,E=(0,K.k)(),I=c.useContext(m.ZP),M=I.profile,L=I.getAuthorizationHeader,A=c.useContext(ue.Z),F=c.useState(!1),O=(0,s.Z)(F,2),R=O[0],D=O[1],_=c.useState(null),B=(0,s.Z)(_,2),N=B[0],U=B[1],H=(0,fe.Z)().showAlert,V=c.useCallback((0,a.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,le.BY)(L,M.id);case 5:t=e.sent,U(t),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error while loading builds:",e.t0),H({title:{id:"Error while loading builds"},message:{id:"An error occurred while loading your builds. Verify your internet connection and try again."}});case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),[M,L,H]);c.useEffect((function(){V()}),[V]);var z=!(!b&&!C);return(0,g.jsxs)(j.ak,{expand:!0,noMargin:!0,children:[!S&&(0,g.jsxs)(Z.x1,{justifyContent:"space-between",alignItems:"center",children:[(0,g.jsx)(Z.sg,{expand:!P,alignItems:"flex-start",justifyContent:"center",noMargin:!0,children:z&&(0,g.jsx)(te.Z,{icon:(0,g.jsx)(ne.Z,{}),label:(0,g.jsx)(l.Trans,{id:"Back"}),onClick:function(){C?(v(null),R&&(x(null),D(!1))):b&&x(null)},disabled:d})}),(0,g.jsx)("div",{style:(0,r.Z)((0,r.Z)({},ge.titleContainer),{},{justifyContent:P&&z?"flex-end":"center"}),children:(0,g.jsxs)(j.pJ,{noMargin:!0,alignItems:"center",justifyContent:"center",children:[b?me({section:b,small:!0}):void 0,(0,g.jsx)(y.Z,{size:"block-title",children:h?h.name:b?xe({section:b}):(0,g.jsx)(l.Trans,{id:"Export your game"})})]})}),!P&&(0,g.jsx)(Z.sg,{expand:!0,alignItems:"flex-end",noMargin:!0})]}),!E&&(0,g.jsx)(Y.Z,{kind:"warning",children:(0,g.jsx)(l.Trans,{id:"You must be connected to use online export services."})}),!b&&(0,g.jsxs)(j.ak,{noMargin:!0,children:[(0,g.jsx)(be,{label:(0,g.jsx)(l.Trans,{id:"gd.games"}),icon:ve("browser","online"),description:(0,g.jsx)(l.Trans,{id:"Generate a shareable link to your game."}),onClick:function(){D(!0),x("browser"),v("online")},highlighted:!0,disabled:!E,id:"publish-gd-games"}),!S&&(0,g.jsx)(be,{label:xe({section:"browser"}),icon:me({section:"browser"}),description:(0,g.jsx)(l.Trans,{id:"Gaming portals (Itch.io, Poki, Facebook...)"}),onClick:function(){return x("browser")},disabled:T&&!E,id:"publish-browser"}),!S&&(0,g.jsx)(be,{label:xe({section:"desktop"}),icon:me({section:"desktop"}),description:(0,g.jsx)(l.Trans,{id:"Windows, MacOS, Linux (Steam, MS Store...)"}),onClick:function(){return x("desktop")},disabled:T&&!E,id:"publish-desktop"}),!S&&(0,g.jsx)(be,{label:xe({section:"android"}),icon:me({section:"android"}),description:(0,g.jsx)(l.Trans,{id:"Google Play (or other stores)"}),onClick:function(){return x("android")},disabled:T&&!E,id:"publish-mobile"}),!S&&!(0,pe._F)()&&(0,g.jsx)(be,{label:xe({section:"ios"}),icon:me({section:"ios"}),description:(0,g.jsx)(l.Trans,{id:"Apple App Store"}),onClick:function(){return x("ios")},disabled:T&&!E,id:"publish-mobile-ios"})]}),"browser"===b&&!C&&(0,g.jsxs)(j.ak,{noMargin:!0,children:[(0,g.jsx)(be,{label:(0,g.jsx)(l.Trans,{id:"gd.games"}),icon:ve("browser","online"),description:(0,g.jsx)(l.Trans,{id:"Generate a shareable link to your game."}),onClick:function(){return v("online")},highlighted:!0,disabled:!E,id:"publish-gd-games"}),!S&&(0,g.jsx)(be,{label:(0,g.jsx)(l.Trans,{id:"HTML5 (external websites)"}),icon:ve("browser","offline"),description:(0,g.jsx)(l.Trans,{id:"Itch.io, Poki, CrazyGames..."}),onClick:function(){return v("offline")},disabled:T&&!E,id:"publish-external-websites"}),!S&&(0,g.jsx)(be,{label:(0,g.jsx)(l.Trans,{id:"Facebook Games"}),icon:ve("browser","facebook"),description:(0,g.jsx)(l.Trans,{id:"Instant Games"}),onClick:function(){return v("facebook")},disabled:T&&!E,id:"publish-facebook"})]}),"desktop"===b&&!C&&(0,g.jsxs)(j.ak,{noMargin:!0,children:[(0,g.jsx)(be,{label:(0,g.jsx)(l.Trans,{id:"One-click packaging"}),icon:ve("desktop","online"),description:(0,g.jsx)(l.Trans,{id:"Windows, MacOS and Linux"}),onClick:function(){return v("online")},highlighted:!0,disabled:!E,id:"publish-desktop-cloud"}),(0,g.jsx)(be,{label:(0,g.jsx)(l.Trans,{id:"Manual build"}),icon:ve("desktop","offline"),description:(0,g.jsx)(l.Trans,{id:"Development tools required"}),onClick:function(){return v("offline")},disabled:T&&!E,small:!0,id:"publish-desktop-manual"})]}),"android"===b&&!C&&(0,g.jsxs)(j.ak,{noMargin:!0,children:[(0,g.jsx)(be,{label:(0,g.jsx)(l.Trans,{id:"One-click packaging"}),icon:ve("android","online"),description:(0,g.jsx)(l.Trans,{id:"Automated"}),onClick:function(){return v("online")},highlighted:!0,disabled:!E,id:"publish-mobile-cloud"}),(0,g.jsx)(be,{label:(0,g.jsx)(l.Trans,{id:"Manual build"}),icon:ve("desktop","offline"),description:(0,g.jsx)(l.Trans,{id:"Development tools required"}),onClick:function(){return v("offline")},small:!0,disabled:T&&!E,id:"publish-mobile-manual"})]}),"ios"===b&&!C&&(0,g.jsxs)(j.ak,{noMargin:!0,children:[(0,g.jsx)(be,{label:(0,g.jsx)(l.Trans,{id:"One-click packaging"}),icon:ve("ios","online"),description:(0,g.jsx)(l.Trans,{id:"Automated"}),onClick:function(){return v("online")},highlighted:!0,disabled:!E,id:"publish-ios-cloud"}),(0,g.jsx)(be,{label:(0,g.jsx)(l.Trans,{id:"Manual build"}),icon:ve("desktop","offline"),description:(0,g.jsx)(l.Trans,{id:"Development tools required"}),onClick:function(){return v("offline")},small:!0,disabled:T&&!E,id:"publish-ios-manual"})]}),b&&C&&h&&(0,g.jsx)(q,{authenticatedUser:I,eventsFunctionsExtensionsState:A,exportPipeline:h.exportPipeline,project:t,onSaveProject:n,isSavingProject:i,onGameUpdated:f,onChangeSubscription:u,setIsNavigationDisabled:p,game:k,gameAvailabilityError:w,builds:N,onRefreshBuilds:V})]})},je=n(28894),ye=n(46538),Ze=n(73298),ke=n(32484),we=n(1491),Te=n(34517),Se=n(75383),Pe=n(93431),Ee=n(63854),Ie=n(29277),Me=n(51598),Le=n(53162),Ae=n(81683),Fe=n(90242),Oe=n(86567),Re=/^(.+)@(.+)$/,De=function(e){switch(e){case"owner":return{id:"Owner"};case"writer":return{id:"Read & Write"};case"reader":return{id:"Read only"};default:return e}},_e=function(e){var t=e.username,n=e.email,r=e.level,i=e.onDelete,o=e.disabled;return(0,g.jsx)(l.I18n,{children:function(e){var a=e.i18n;return(0,g.jsxs)(Z.x1,{justifyContent:"space-between",children:[(0,g.jsxs)(Z.x1,{noMargin:!0,expand:!0,children:[(0,g.jsx)(ye.Z,{src:(0,Ze.y)(n,{size:40})}),(0,g.jsxs)(Z.sg,{expand:!0,justifyContent:"flex-end",children:[t&&(0,g.jsx)(y.Z,{noMargin:!0,children:t}),(0,g.jsx)(y.Z,{noMargin:!0,color:"secondary",children:n})]})]}),(0,g.jsx)(Z.sg,{children:!!r&&(0,g.jsx)(y.Z,{color:"secondary",children:a._(De(r))})}),i&&(0,g.jsx)(Z.sg,{noMargin:!0,children:(0,g.jsx)(Me.Z,{size:"small",onClick:i,disabled:o,children:(0,g.jsx)(Le.Z,{})})})]})}})},Be=function(e){switch(e){case"user-not-found":return(0,g.jsx)(l.Trans,{id:"No GDevelop user with this email can be found."});case"user-already-added":return(0,g.jsx)(l.Trans,{id:"This user is already a collaborator."});case"user-owner":return(0,g.jsx)(l.Trans,{id:"You cannot add yourself as a collaborator."});case"not-allowed":return(0,g.jsx)(l.Trans,{id:"You don't have permissions to add collaborators."});case"max-guest-collaborators":return(0,g.jsx)(l.Trans,{id:"You have reached the maximum number of guest collaborators for your subscription. Ask this user to get a Startup subscription!"});case"unexpected":return(0,g.jsx)(l.Trans,{id:"An unexpected error happened. Verify your internet connection or try again later."});default:return}},Ne=function(e){var t=e.cloudProjectId,n=c.useContext(m.ZP),r=n.profile,i=n.limits,d=(0,K.k)(),f=c.useState(null),h=(0,s.Z)(f,2),x=h[0],v=h[1],b=c.useState(null),C=(0,s.Z)(b,2),k=C[0],w=C[1],T=c.useState(null),S=(0,s.Z)(T,2),P=S[0],E=S[1],I=c.useState({}),M=(0,s.Z)(I,2),F=M[0],O=M[1],R=c.useState(!1),D=(0,s.Z)(R,2),_=D[0],B=D[1],N=c.useState(!0),U=(0,s.Z)(N,2),H=U[0],z=U[1],W=c.useState(!1),G=(0,s.Z)(W,2),q=G[0],X=G[1],J=c.useState(""),Q=(0,s.Z)(J,2),$=Q[0],ee=Q[1],te=c.useState("writer"),ne=(0,s.Z)(te,2),re=ne[0],ie=ne[1],oe=(0,fe.Z)(),ae=oe.showAlert,se=oe.showConfirmation,le=c.useCallback((0,a.Z)((0,o.Z)().mark((function e(){var r,i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return w("project-not-found"),e.abrupt("return");case 3:return e.prev=3,X(!0),e.next=7,(0,Te.hj)(n,{projectId:t});case 7:r=e.sent,i=r?r.filter((function(e){return"collaboration"===e.feature})):[],v(i),e.next=23;break;case 12:if(e.prev=12,e.t0=e.catch(3),console.error("Unable to fetch the project user acls",e.t0),!(a=(0,V.T)(e.t0))||404!==a.status){e.next=19;break}return w("project-not-found"),e.abrupt("return");case 19:if(!a||403!==a.status){e.next=22;break}return w("project-not-owned"),e.abrupt("return");case 22:w("unexpected");case 23:return e.prev=23,X(!1),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[3,12,23,26]])}))),[n,t]);c.useEffect((function(){le()}),[le]);var ce=c.useCallback((0,a.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x&&x.length){e.next=2;break}return e.abrupt("return");case 2:return t=x.map((function(e){return e.userId})),e.prev=3,e.next=6,(0,Pe.TL)(t);case 6:n=e.sent,O(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("Unable to fetch the collaborator profiles",e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),[x]);c.useEffect((function(){ce()}),[ce]);var ue=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var r,i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$.trim(),ee(r),i=Re.test(r),z(i),!q&&r&&i&&t){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,X(!0),e.next=10,(0,Te.Dj)(n,{projectId:t,feature:"collaboration",level:re,email:r});case 10:return B(!1),ee(""),ie("writer"),e.next=15,le();case 15:e.next=41;break;case 17:if(e.prev=17,e.t0=e.catch(6),console.error("Unable to add collaborator",e.t0),!(a=(0,V.T)(e.t0))||400!==a.status){e.next=28;break}if("project-user-acl-creation/user-already-added"!==a.code){e.next=25;break}return E("user-already-added"),e.abrupt("return");case 25:if("project-user-acl-creation/user-is-owner"!==a.code){e.next=28;break}return E("user-owner"),e.abrupt("return");case 28:if(!a||404!==a.status){e.next=31;break}return E("user-not-found"),e.abrupt("return");case 31:if(!a||403!==a.status){e.next=40;break}if("project-user-acl-creation/collaborators-not-allowed"!==a.code){e.next=35;break}return E("not-allowed"),e.abrupt("return");case 35:if("project-user-acl-creation/too-many-guest-collaborators-on-project"!==a.code){e.next=38;break}return E("max-guest-collaborators"),e.abrupt("return");case 38:return E("not-allowed"),e.abrupt("return");case 40:E("unexpected");case 41:return e.prev=41,X(!1),e.finish(41);case 44:case"end":return e.stop()}}),e,null,[[6,17,41,44]])})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(r){var i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return i=F[r.userId],a=i?i.username:null,e.next=6,se({title:{id:"Remove collaborator"},message:{id:"You are about to remove {0}{1} from the list of collaborators. Are you sure?",values:{0:r.email,1:a?" (".concat(a,")"):""}},confirmButtonLabel:{id:"Remove"}});case 6:if(e.sent){e.next=9;break}return e.abrupt("return");case 9:return e.prev=9,X(!0),e.next=13,(0,Te.ml)(n,{projectId:t,feature:r.feature,level:r.level,userId:r.userId});case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(9),console.error("Unable to remove collaborator",e.t0),ae({title:{id:"Unable to remove collaborator"},message:{id:"An error happened while removing the collaborator. Verify your internet connection or retry later."}});case 19:return e.prev=19,X(!1),e.next=23,le();case 23:return e.finish(19);case 24:case"end":return e.stop()}}),e,null,[[9,15,19,24]])})));return function(t){return e.apply(this,arguments)}}();if(!r||!i||!d)return(0,g.jsx)(j.ak,{expand:!0,noMargin:!0,children:(0,g.jsx)(Y.Z,{kind:"warning",children:(0,g.jsx)(l.Trans,{id:"You must be logged in to invite collaborators."})})});var pe=i.capabilities.cloudProjects.maximumGuestCollaboratorsPerProject>0,he=x&&"project-not-owned"!==k?"owner":null;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(j.ak,{expand:!0,noMargin:!0,children:[(0,g.jsx)(_e,{username:r.username,email:r.email,level:he}),(0,g.jsx)(Z.x1,{children:(0,g.jsx)(y.Z,{size:"block-title",children:(0,g.jsx)(l.Trans,{id:"Collaborators"})})}),!pe&&!!x&&"project-not-owned"!==k&&(0,g.jsx)(A.Z,{subscriptionDialogOpeningReason:"Add collaborators on project",children:(0,g.jsx)(y.Z,{children:(0,g.jsx)(l.Trans,{id:"Get a startup subscription to invite collaborators into your project."})})}),"unexpected"===k?(0,g.jsx)(Z.x1,{noMargin:!0,children:(0,g.jsx)(Se.Z,{onRetry:le,children:(0,g.jsx)(l.Trans,{id:"Error while loading the collaborators. Verify your internet connection or try again later."})})}):"project-not-found"===k?(0,g.jsx)(Y.Z,{kind:"info",children:(0,g.jsx)(l.Trans,{id:"You need to first save your project to the cloud to invite collaborators."})}):"project-not-owned"===k?(0,g.jsx)(Y.Z,{kind:"info",children:(0,g.jsx)(l.Trans,{id:"You are not owner of this project, so you cannot invite collaborators."})}):x?x.map((function(e){return(0,g.jsx)(_e,{username:(t=e.userId,F[t]?F[t].username:null),email:e.email,level:e.level,onDelete:function(){de(e)},disabled:q},e.userId);var t})):(0,g.jsx)(L.Z,{}),(0,g.jsx)(Z.x1,{children:(0,g.jsx)(Z.sg,{expand:!0,noMargin:!0,children:(0,g.jsx)(ke.Z,{icon:(0,g.jsx)(we.Z,{fontSize:"small"}),label:(0,g.jsx)(l.Trans,{id:"Add collaborator"}),onClick:function(){return B(!0)},primary:!0,disabled:!pe||!!k||!x||q})})})]}),_&&(0,g.jsx)(u.ZP,{title:"Add a collaborator",actions:[(0,g.jsx)(p.Z,{label:(0,g.jsx)(l.Trans,{id:"Back"}),disabled:q,primary:!1,onClick:function(){H||z(!0),P&&E(null),B(!1)}},"back"),(0,g.jsx)(Ee.Z,{isLoading:q,children:(0,g.jsx)(u.vF,{label:(0,g.jsx)(l.Trans,{id:"Add"}),primary:!0,onClick:ue,disabled:q})},"add-collaborator")],maxWidth:"xs",cannotBeDismissed:q,onRequestClose:function(){return B(!1)},onApply:ue,open:!0,children:(0,g.jsx)(Oe.Z,{onSubmit:ue,name:"addCollaborator",children:(0,g.jsxs)(j.ak,{noMargin:!0,children:[(0,g.jsx)(Ie.ZP,{autoFocus:"desktop",value:$,floatingLabelText:(0,g.jsx)(l.Trans,{id:"Email"}),type:"email",onChange:function(e,t){H||z(!0),P&&E(null),ee(t)},errorText:H?Be(P):(0,g.jsx)(l.Trans,{id:"Invalid email address."}),fullWidth:!0,onBlur:function(e){var t=e.currentTarget.value.trim();ee(t),z(Re.test(t))},disabled:q}),(0,g.jsx)(Ae.Z,{value:re,onChange:function(e,t,n){return ie(n)},fullWidth:!0,translatableHintText:{id:"Choose the effect to apply"},disabled:q,children:["reader","writer"].map((function(e){return(0,g.jsx)(Fe.Z,{value:e,label:De(e)},e)}))})]})})})]})},Ue=n(36262),He=n(61651),Ve={browser:{online:"onlinewebexport",offline:"webexport",facebook:"facebookinstantgamesexport"},desktop:{online:"onlineelectronexport",offline:"electronexport",facebook:null},android:{online:"onlinecordovaexport",offline:"cordovaexport",facebook:null},ios:{online:"onlinecordovaiosexport",offline:"cordovaexport",facebook:null}},ze=function(e){var t=e.project,n=e.onSaveProject,r=e.isSavingProject,f=e.onClose,h=e.allExportersRequireOnline,v=e.onChangeSubscription,b=e.automatedExporters,C=e.manualExporters,j=e.onlineWebExporter,y=e.initialTab,Z=e.fileMetadata,k=e.storageProvider,w=(0,he.U)().isMobile,T=c.useContext(Ue.ZP),S=T.setShareDialogDefaultTab,P=T.getShareDialogDefaultTab,E=c.useState(y||P()),I=(0,s.Z)(E,2),M=I[0],L=I[1],A=!b&&!C,F=c.useState(A?"browser":null),O=(0,s.Z)(F,2),R=O[0],D=O[1],_=c.useState(A?"online":null),B=(0,s.Z)(_,2),U=B[0],H=B[1];c.useEffect((function(){return S(M)}),[S,M]);var z=(0,K.k)(),W=c.useState(!1),G=(0,s.Z)(W,2),Y=G[0],q=G[1],X=c.useState(!1),J=(0,s.Z)(X,2),Q=J[0],$=J[1],ee=c.useState(null),ne=(0,s.Z)(ee,2),re=ne[0],ie=ne[1],oe=c.useState(null),ae=(0,s.Z)(oe,2),se=ae[0],le=ae[1],ce=c.useContext(m.ZP),ue=ce.profile,de=ce.getAuthorizationHeader,pe=(0,fe.Z)().showAlert,ge=c.useCallback((0,a.Z)((0,o.Z)().mark((function e(){var n,r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ue&&t){e.next=2;break}return e.abrupt("return");case 2:return n=ue.id,e.prev=3,le(null),e.next=7,(0,N.cF)(de,n,t.getProjectUuid());case 7:r=e.sent,ie(r),e.next=22;break;case 11:if(e.prev=11,e.t0=e.catch(3),console.error("Unable to load the game",e.t0),!(i=(0,V.T)(e.t0))||404!==i.status){e.next=18;break}return le("not-found"),e.abrupt("return");case 18:if(!i||403!==i.status){e.next=21;break}return le("not-owned"),e.abrupt("return");case 21:le("unexpected");case 22:case"end":return e.stop()}}),e,null,[[3,11]])}))),[t,de,ue]);c.useEffect((function(){re||ge()}),[ge,re]);var xe=c.useMemo((function(){return[].concat((0,i.Z)(b||[]),(0,i.Z)(C||[]),[j])}),[b,C,j]),me=c.useMemo((function(){if(!R)return null;if(!U)return null;var e=Ve[R][U],t=xe.find((function(t){return t.key===e}));return t||null}),[R,U,xe]);if(!t)return null;var ve=[(0,g.jsx)(p.Z,{label:(0,g.jsx)(l.Trans,{id:"Close"}),primary:!1,onClick:f,disabled:Q},"close")],be="publish"===M?[me?(0,g.jsx)(d.Z,{helpPagePath:me.helpPage},"help"):null,(0,g.jsx)(te.Z,{label:w?(0,g.jsx)(l.Trans,{id:"Exports"}):(0,g.jsx)(l.Trans,{id:"See all exports"}),onClick:function(){if(re)q(!0);else{pe({title:{id:"Cannot see the exports"},message:"not-found"===se?{id:"Register or publish your game first to see its exports."}:"not-owned"===se?{id:"You are not the owner of this game, ask the owner to add you as an owner to see its exports."}:{id:"Either this game is not registered or you are not its owner, so you cannot see its builds."}})}},disabled:Q||!z},"exports")].filter(Boolean):[(0,g.jsx)(d.Z,{helpPagePath:"/collaboration/invite-collaborators"},"help")];return(0,g.jsxs)(u.ZP,{id:"export-dialog",maxWidth:"md",minHeight:"lg",title:(0,g.jsx)(l.Trans,{id:"Share"}),actions:ve,secondaryActions:be,onRequestClose:f,open:!0,fixedContent:(0,g.jsx)(je.m,{value:M,onChange:L,options:[{value:"publish",label:(0,g.jsx)(l.Trans,{id:"Publish"}),id:"publish-tab",disabled:Q},{value:"invite",label:(0,g.jsx)(l.Trans,{id:"Invite"}),id:"invite-tab",disabled:Q}]}),flexColumnBody:!0,children:["invite"===M&&(0,g.jsx)(Ne,{cloudProjectId:"Cloud"===k.internalName&&Z?Z.fileIdentifier:null}),"publish"===M&&(0,g.jsx)(Ce,{project:t,onSaveProject:n,isSavingProject:r,onGameUpdated:ge,onChangeSubscription:v,isNavigationDisabled:Q,setIsNavigationDisabled:$,selectedExporter:me,onChooseSection:D,onChooseSubSection:H,chosenSection:R,chosenSubSection:U,game:re,gameAvailabilityError:se,allExportersRequireOnline:h,showOnlineWebExporterOnly:A}),re&&(0,g.jsx)(x,{open:Y,onClose:function(){return q(!1)},authenticatedUser:ce,game:re,onGameUpdated:ge})]})},We=function(e){return(0,g.jsx)(He.ZP,{componentTitle:(0,g.jsx)(l.Trans,{id:"Share dialog"}),scope:"export-and-share",onClose:e.onClose,children:(0,g.jsx)(ze,(0,r.Z)({},e))})}},55089:function(e,t,n){"use strict";n.d(t,{C:function(){return T}});var r=n(74165),i=n(15861),o=n(29439),a=n(36600),s=n(28381),l=n(54458),c=n(71106),u=n(82936),d=n(75383),p=n(78081),f=n(32484),h=n(16999),g=n(91),x=n(86278),m=n(40243),v=n(57597),b=n(65056),C=n(61325),j=n(1773),y=n(67835),Z=n(44151),k=n(29343),w=function(e){var t=e.game,n=e.onClose;return(0,k.jsx)(j.ZP,{title:(0,k.jsx)(a.Trans,{id:"Marketing campaigns"}),actions:[(0,k.jsx)(y.Z,{label:(0,k.jsx)(a.Trans,{id:"Back"}),primary:!1,onClick:n},"close")],open:!0,onRequestClose:n,children:(0,k.jsx)(Z.Z,{game:t})})},T=function(e){var t=e.project,n=e.suggestAdditionalActions,j=e.hideLoader,y=e.onGameRegistered,Z=s.useContext(c.ZP),T=Z.onOpenLoginDialog,S=Z.onOpenCreateAccountDialog,P=Z.getAuthorizationHeader,E=Z.profile,I=Z.onAcceptGameStatsEmail,M=(0,b.Z)().showAlert,L=s.useState(null),A=(0,o.Z)(L,2),F=A[0],O=A[1],R=s.useState(null),D=(0,o.Z)(R,2),_=D[0],B=D[1],N=s.useState(null),U=(0,o.Z)(N,2),H=U[0],V=U[1],z=s.useState(!1),W=(0,o.Z)(z,2),G=W[0],Y=W[1],q=s.useState(!1),X=(0,o.Z)(q,2),K=X[0],J=X[1],Q=s.useState(!1),$=(0,o.Z)(Q,2),ee=$[0],te=$[1],ne=s.useState(!1),re=(0,o.Z)(ne,2),ie=re[0],oe=re[1],ae=s.useCallback((0,i.Z)((0,r.Z)().mark((function e(){var n,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E&&t){e.next=2;break}return e.abrupt("return");case 2:return n=E.id,O(null),e.prev=4,e.next=7,(0,h.cF)(P,n,t.getProjectUuid());case 7:i=e.sent,B(null),V(i),e.next=27;break;case 12:if(e.prev=12,e.t0=e.catch(4),console.error("Unable to get the game ".concat(t.getProjectUuid()),e.t0),!(o=(0,g.T)(e.t0))){e.next=26;break}if(403!==o.status){e.next=22;break}return B("not-owned"),e.abrupt("return");case 22:if(404!==o.status){e.next=25;break}return B("not-found"),e.abrupt("return");case 25:B("unexpected");case 26:O(e.t0);case 27:case"end":return e.stop()}}),e,null,[[4,12]])}))),[t,P,E]),se=s.useCallback((0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E&&t){e.next=2;break}return e.abrupt("return");case 2:return n=E.id,Y(!0),e.prev=4,e.next=7,(0,h.r$)(P,n,{gameId:t.getProjectUuid(),authorName:t.getAuthor()||"Unspecified publisher",gameName:t.getName()||"Untitled game",templateSlug:t.getTemplateSlug()});case 7:ae(),y&&y(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error("Unable to register the game",e.t0),M({title:{id:"Unable to register the game"},message:{id:"Verify your internet connection or try again later."}});case 15:Y(!1);case 16:case"end":return e.stop()}}),e,null,[[4,11]])}))),[P,E,t,ae,y,M]),le=s.useCallback(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E&&H){e.next=2;break}return e.abrupt("return");case 2:return J(!0),e.prev=3,e.next=6,I(t);case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("Unable to change your email preferences.",e.t0),M({title:{id:"Unable to change your email preferences"},message:{id:"Verify your internet connection or try again later."}});case 12:J(!1);case 13:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),[E,H,I,M]),ce=s.useCallback(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E&&H){e.next=2;break}return e.abrupt("return");case 2:return te(!0),e.prev=3,e.next=6,(0,h.Bi)(P,E.id,H.id,{acceptsGameComments:t});case 6:n=e.sent,V(n),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("Unable to change feedback for this game.",e.t0),M({title:{id:"Unable to change feedback for this game"},message:{id:"Verify your internet connection or try again later."}});case 14:te(!1);case 15:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),[E,H,P,M]);return s.useEffect((function(){H||ae()}),[ae,H]),t?E?"not-found"===_?(0,k.jsx)(u.Z,{kind:"info",renderRightButton:function(){return(0,k.jsx)(f.Z,{label:(0,k.jsx)(a.Trans,{id:"Register the project"}),disabled:G,primary:!0,onClick:se})},children:(0,k.jsx)(a.Trans,{id:"The project currently opened is not registered online. Register it now to get access to leaderboards, player accounts, analytics and more!"})}):"not-owned"===_?(0,k.jsx)(u.Z,{kind:"error",children:(0,k.jsx)(a.Trans,{id:"The project currently opened is registered online but you don't have access to it. Ask the original owner of the game to share it with you to be able to manage it."})}):F?(0,k.jsxs)(d.Z,{onRetry:function(){ae()},children:[(0,k.jsx)(a.Trans,{id:"Can't check if the game is registered online."})," ",(0,k.jsx)(a.Trans,{id:"Verify your internet connection or try again later."})]}):H||j?H&&n?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(C.ak,{noMargin:!0,expand:!0,children:[(0,k.jsxs)(m.sg,{noMargin:!0,children:[(0,k.jsx)(x.Z,{size:"block-title",children:(0,k.jsx)(a.Trans,{id:"Taking your game further"})}),(0,k.jsxs)(m.sg,{children:[(0,k.jsx)(v.Z,{onToggle:function(){return le(!E.getGameStatsEmail)},toggled:E.getGameStatsEmail,labelPosition:"right",label:(0,k.jsx)(a.Trans,{id:"Receive weekly stats about your game by email"}),disabled:K}),(0,k.jsx)(v.Z,{onToggle:function(){return ce(!H.acceptsGameComments)},toggled:!!H.acceptsGameComments,labelPosition:"right",label:(0,k.jsx)(a.Trans,{id:"Open game for player feedback"}),disabled:ee})]})]}),(0,k.jsxs)(m.sg,{children:[(0,k.jsx)(x.Z,{size:"sub-title",children:(0,k.jsx)(a.Trans,{id:"Promoting your game to the community"})}),(0,k.jsx)(x.Z,{noMargin:!0,children:(0,k.jsx)(a.Trans,{id:"Get ready-made packs to make your game visible to the GDevelop community."})}),(0,k.jsx)(m.x1,{children:(0,k.jsx)(f.Z,{label:(0,k.jsx)(a.Trans,{id:"See marketing packs"}),primary:!0,onClick:function(){return oe(!0)}})})]})]}),ie&&(0,k.jsx)(w,{game:H,onClose:function(){return oe(!1)}})]}):null:(0,k.jsx)(p.Z,{}):(0,k.jsx)(l.Z,{onOpenLoginDialog:T,onOpenCreateAccountDialog:S}):null}},1879:function(e,t,n){"use strict";n.d(t,{J:function(){return u}});var r=n(1413),i=n(36600),o=(n(28381),n(86578)),a=n(20914),s=n(29343),l={display:"block",objectFit:"cover"},c={width:272,height:153},u=function(e){var t=e.thumbnailUrl,n=e.gameName,u=e.background,d=void 0===u?"light":u;return t?(0,s.jsx)("img",{src:t,style:(0,r.Z)((0,r.Z)({},l),c),alt:n,title:n}):(0,s.jsx)(a.Z,{variant:"outlined",style:(0,r.Z)((0,r.Z)({},c),{},{whiteSpace:"normal",display:"flex"}),background:d,children:(0,s.jsx)(o.Z,{children:(0,s.jsx)(i.Trans,{id:"No thumbnail set"})})})}},12203:function(e,t,n){"use strict";n.d(t,{GN:function(){return k},b$:function(){return w}});var r=n(74165),i=n(15861),o=n(29439),a=n(28381),s=n(42986),l=n(10641),c=n(61325),u=n(21601),d=n(81683),p=n(90242),f=n(98094),h=n(16999),g=n(71106),x=n(36600),m=n(40243),v=n(1589),b=n(82936),C=n(1879),j=n(29343),y=30,Z=n(97396),k=function(e){var t=e;/[\u0411\u0413\u0414\u0416\u0417\u0418\u0419\u041b\u041f\u0424\u0426\u0427\u0428\u0429\u042b\u042d\u042e\u042f\u0431\u0432\u0433\u0434\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043f\u0442\u0444\u0446\u0447\u0448\u0449\u044b\u044d\u044e\u044f]/.test(e)&&(t=e.split("").map((function(e){var t=Z[e];return void 0===t?e:t})).join(""));var n=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9]/g,"-").toLowerCase().slice(0,y);return n.length<6&&(n=n.concat(new Array(6-n.length).fill("-").join(""))),n};function w(e){var t=e.project,n=e.disabled,Z=e.setName,w=e.name,T=e.categories,S=e.setCategories,P=e.setDescription,E=e.description,I=e.setAuthorIds,M=e.setAuthorUsernames,L=e.authorIds,A=e.setOwnerIds,F=e.ownerIds,O=e.setPlayableWithKeyboard,R=e.playWithKeyboard,D=e.setPlayableWithGamepad,_=e.playWithGamepad,B=e.setPlayableWithMobile,N=e.playWithMobile,U=e.setOrientation,H=e.orientation,V=e.userSlug,z=e.setUserSlug,W=e.gameSlug,G=e.setGameSlug,Y=e.setDiscoverable,q=e.discoverable,X=e.displayThumbnail,K=e.thumbnailUrl,J=a.useState(""),Q=(0,o.Z)(J,2),$=Q[0],ee=Q[1],te=a.useContext(g.ZP).profile,ne=V&&!!V.length&&te&&te.username,re=ne&&te&&V!==te.username,ie=a.useState([]),oe=(0,o.Z)(ie,2),ae=oe[0],se=oe[1],le=a.useCallback((0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,h.bb)();case 3:t=e.sent,se(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("An error occurred while fetching game categories.",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]);return a.useEffect((function(){le()}),[le]),(0,j.jsx)(x.I18n,{children:function(e){var r=e.i18n;return(0,j.jsxs)(c.ak,{noMargin:!0,children:[(0,j.jsxs)(c.ep,{noMargin:!0,children:[X&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(m.sg,{noMargin:!0,children:(0,j.jsx)(C.J,{gameName:t.getName(),thumbnailUrl:K})}),(0,j.jsx)(m.LZ,{})]}),(0,j.jsxs)(c.ak,{noMargin:!0,expand:!0,children:[(0,j.jsx)(s.Z,{floatingLabelText:(0,j.jsx)(x.Trans,{id:"Game name"}),fullWidth:!0,type:"text",value:w,onChange:Z,autoFocus:"desktop",disabled:n}),S&&(0,j.jsx)(f.Z,{hintText:{id:"Select a genre"},floatingLabelText:(0,j.jsx)(x.Trans,{id:"Genres"}),helperText:(0,j.jsx)(x.Trans,{id:"Select up to 3 genres for the game to be visible on gd.games's categories pages!"}),value:T?T.map((function(e){return{value:e,text:(0,h.Oo)(e,r)}})):[],onChange:function(e,t){S(t?t.map((function(e){return e.value})):[]),ee("")},inputValue:$,onInputChange:function(e,t,n){"input"===n&&ee(t)},dataSource:ae.map((function(e){return{value:e.name,text:(0,h.Oo)(e.name,r),disabled:"admin-only"===e.type}})),fullWidth:!0,optionsLimit:3,disabled:n,loading:0===ae.length}),Y&&(0,j.jsx)(u.Z,{label:(0,j.jsx)(x.Trans,{id:"Make your game discoverable on gd.games"}),checked:!!q,onCheck:function(e,t){return Y(t)},disabled:n})]})]}),X&&(0,j.jsx)(m.x1,{noMargin:!0,children:(0,j.jsx)(v.Z,{children:(0,j.jsx)(x.Trans,{id:"To update your thumbnail, go into your Game Settings > Icons and thumbnail, then create and publish a new build."})})}),(0,j.jsx)(s.Z,{floatingLabelText:(0,j.jsx)(x.Trans,{id:"Game description"}),fullWidth:!0,type:"text",value:E||"",onChange:P,multiline:!0,rows:5,disabled:n}),z&&G&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(m.x1,{children:[(0,j.jsxs)(d.Z,{fullWidth:!0,floatingLabelText:(0,j.jsx)(x.Trans,{id:"User name in the game URL"}),value:V||"",onChange:function(e,t,n){return z(n)},disabled:!re||n,children:[te&&te.username&&(0,j.jsx)(p.Z,{value:te.username,label:te.username,shouldNotTranslate:!0}),V&&(!te||V!==te.username)&&(0,j.jsx)(p.Z,{value:V,label:V,shouldNotTranslate:!0})]}),(0,j.jsx)(m.LZ,{}),(0,j.jsx)(s.Z,{disabled:!ne||n,floatingLabelText:(0,j.jsx)(x.Trans,{id:"Game name in the game URL"}),fullWidth:!0,maxLength:y,type:"text",value:ne&&W||"",onChange:function(e){return G(k(e))}})]}),!ne&&(0,j.jsx)(b.Z,{kind:"info",children:(0,j.jsx)(x.Trans,{id:"Usernames are required to choose a custom game URL."})})]}),(0,j.jsx)(l.D,{userIds:L,onChange:function(e){I(e.map((function(e){return e.userId}))),M(e.map((function(e){return e.username})))},floatingLabelText:(0,j.jsx)(x.Trans,{id:"Authors"}),helperText:(0,j.jsx)(x.Trans,{id:"Select the usernames of the authors of this project. They will be displayed in the selected order, if you publish this game as an example or in the community."}),disabled:n}),A&&(0,j.jsx)(l.D,{userIds:F||[],onChange:function(e){return A(e.map((function(e){return e.userId})))},floatingLabelText:(0,j.jsx)(x.Trans,{id:"Owners"}),helperText:(0,j.jsx)(x.Trans,{id:"Select the usernames of the owners of this project to let them manage this game builds. Be aware that owners can revoke your ownership."}),disabled:n}),(0,j.jsxs)(d.Z,{fullWidth:!0,floatingLabelText:(0,j.jsx)(x.Trans,{id:"Device orientation (for mobile)"}),value:H,onChange:function(e,t,n){return U(n)},disabled:n,children:[(0,j.jsx)(p.Z,{value:"default",label:{id:"Platform default"}}),(0,j.jsx)(p.Z,{value:"landscape",label:{id:"Landscape"}}),(0,j.jsx)(p.Z,{value:"portrait",label:{id:"Portrait"}})]}),O&&D&&B&&(0,j.jsxs)(a.Fragment,{children:[(0,j.jsx)(u.Z,{label:(0,j.jsx)(x.Trans,{id:"Playable with a keyboard"}),checked:!!R,onCheck:function(e,t){return O(t)},disabled:n}),(0,j.jsx)(u.Z,{label:(0,j.jsx)(x.Trans,{id:"Playable with a gamepad"}),checked:!!_,onCheck:function(e,t){return D(t)},disabled:n}),(0,j.jsx)(u.Z,{label:(0,j.jsx)(x.Trans,{id:"Playable on mobile"}),checked:!!N,onCheck:function(e,t){return B(t)},disabled:n})]})]})}})}t.ZP=w},78196:function(e,t,n){"use strict";n.d(t,{U6:function(){return h},X:function(){return g}});var r=n(74165),i=n(15861),o=n(29439),a=n(36600),s=n(28381),l=n(12203),c=n(32921),u=n(67835),d=n(1773),p=n(71106),f=n(29343),h=function(e,t,n){var r=n.name,i=n.authorIds,o=n.authorUsernames,a=n.description,s=n.categories;e.setName(r);var l=e.getCategories();l.clear(),s.forEach((function(e){return l.push_back(e)})),e.setDescription(a);var u=e.getAuthorIds();u.clear(),i.forEach((function(e){return u.push_back(e)}));var d=e.getAuthorUsernames();return d.clear(),o.forEach((function(e){return d.push_back(e)})),e.setPlayableWithKeyboard(n.playWithKeyboard),e.setPlayableWithGamepad(n.playWithGamepad),e.setPlayableWithMobile(n.playWithMobile),e.setOrientation(n.orientation),(0,c.vv)(t,(0,c.nu)(t,e))},g=function(e){var t=e.project,n=e.publicGame,c=e.onClose,g=e.onApply,x=e.isLoading,m=e.i18n,v=s.useContext(p.ZP).profile,b=n.authors.map((function(e){return e.id})),C=n.authors.map((function(e){return e.username})).filter(Boolean),j=n.owners.map((function(e){return e.id})),y=s.useState(n.gameName),Z=(0,o.Z)(y,2),k=Z[0],w=Z[1],T=s.useState(n.categories),S=(0,o.Z)(T,2),P=S[0],E=S[1],I=s.useState(n.description),M=(0,o.Z)(I,2),L=M[0],A=M[1],F=s.useState(b),O=(0,o.Z)(F,2),R=O[0],D=O[1],_=s.useState(C),B=(0,o.Z)(_,2),N=B[0],U=B[1],H=s.useState(j),V=(0,o.Z)(H,2),z=V[0],W=V[1],G=s.useState(n.playWithKeyboard),Y=(0,o.Z)(G,2),q=Y[0],X=Y[1],K=s.useState(n.playWithGamepad),J=(0,o.Z)(K,2),Q=J[0],$=J[1],ee=s.useState(n.playWithMobile),te=(0,o.Z)(ee,2),ne=te[0],re=te[1],ie=s.useState(n.orientation),oe=(0,o.Z)(ie,2),ae=oe[0],se=oe[1],le=s.useState(n.userSlug||v&&v.username||""),ce=(0,o.Z)(le,2),ue=ce[0],de=ce[1],pe=s.useState(n.gameSlug||(0,l.GN)(n.gameName)),fe=(0,o.Z)(pe,2),he=fe[0],ge=fe[1],xe=s.useState(n.discoverable),me=(0,o.Z)(xe,2),ve=me[0],be=me[1],Ce=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h(t,m,{name:k,categories:P||[],description:L||"",authorIds:R,authorUsernames:N,playWithKeyboard:!!q,playWithGamepad:!!Q,playWithMobile:!!ne,orientation:ae||"default"})){e.next=3;break}return e.next=3,g({ownerIds:z,userSlug:ue,gameSlug:he,discoverable:ve});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=[(0,f.jsx)(u.Z,{label:(0,f.jsx)(a.Trans,{id:"Back"}),primary:!1,onClick:c,disabled:x},"back"),(0,f.jsx)(d.vF,{label:(0,f.jsx)(a.Trans,{id:"Save"}),primary:!0,onClick:Ce,disabled:x},"save")];return(0,f.jsx)(d.ZP,{title:n.gameName,actions:je,cannotBeDismissed:x,onRequestClose:c,onApply:Ce,open:!0,children:(0,f.jsx)(l.b$,{name:k,setName:w,categories:P,setCategories:E,description:L,setDescription:A,project:t,authorIds:R,setAuthorIds:D,setAuthorUsernames:U,ownerIds:z,setOwnerIds:W,setPlayableWithKeyboard:X,playWithKeyboard:q,setPlayableWithGamepad:$,playWithGamepad:Q,setPlayableWithMobile:re,playWithMobile:ne,setOrientation:se,orientation:ae,setUserSlug:de,userSlug:ue,setGameSlug:ge,gameSlug:he,setDiscoverable:be,discoverable:ve,displayThumbnail:!0,thumbnailUrl:n.thumbnailUrl})})}},74149:function(e,t,n){var r=n(50057),i=r("@electron/remote"),o=i?i.app:null,a=r("fs"),s=r("path"),l=r("process"),c=l&&/^darwin/.test(l.platform),u=function(e,t,n){return a.access(e,a.constants.R_OK,(function(r){r?n():t(e)}))};e.exports={findGDJS:function(){if(!s||!l||!a)return Promise.reject(new Error("Unsupported"));var e=o?o.getAppPath():l.cwd(),t=c?"../../../../":s.join("..",".."),n=s.join(e,t);return new Promise((function(t,r){var i=function(e){return t({gdjsRoot:e})},o=function(){return r(new Error("Could not find GDJS"))};u(s.join(n,"..","JsPlatform"),i,(function(){u(s.join(e,"..","GDJS"),i,(function(){var t=s.join(e,"..","..","app","resources","GDJS");u(t,i,o)}))}))}))}}},95644:function(e,t,n){"use strict";var r=n(3429);t.Z=function(e){var t=e.tutorialId;return(0,r.Z)(t).DismissableTutorialMessage}},4346:function(e,t,n){"use strict";var r=n(36600),i=n(28381),o=n(36262),a=n(82936),s=n(2066),l=n(32484),c=n(81730),u=n(60274),d=n(29343);t.Z=function(e){var t=e.tutorial,n=i.useContext(o.ZP).showTutorialHint;return(0,d.jsx)(r.I18n,{children:function(e){e.i18n;return(0,d.jsx)(a.Z,{kind:"info",children:t.title,renderLeftIcon:function(){return(0,d.jsx)("img",{alt:"",style:{width:128,borderRadius:4,aspectRatio:"16 / 9"},src:t.thumbnailUrl})},renderRightButton:function(){return(0,d.jsx)(l.Z,{icon:"video"===t.type?(0,d.jsx)(c.Z,{}):(0,d.jsx)(u.Z,{}),label:"video"===t.type?(0,d.jsx)(r.Trans,{id:"Watch tutorial"}):(0,d.jsx)(r.Trans,{id:"Read tutorial"}),onClick:function(){s.ZP.openExternalURL(t.link)}})},onHide:function(){n(t.id,!1)}})}})}},32515:function(e,t){"use strict";t.Z=function(e,t,n){if(!t)return null;if(e.values.hiddenTutorialHints[n])return null;var r=t.find((function(e){return e.id===n}));return r||(console.warn("Tutorial with id ".concat(n," not found")),null)}},44397:function(e,t,n){"use strict";n.d(t,{du:function(){return r},gF:function(){return i},zZ:function(){return o}});var r=function(){return{"PhysicsBehavior::PhysicsBehavior":{warning:{id:"A new physics engine (Physics Engine 2.0) is now available. You should prefer using it for new game. For existing games, note that the two behaviors are not compatible, so you should only use one of them with your objects."}}}},i=function(){return{"Video::VideoObject":[{kind:"warning",message:{id:"Most browsers will require the user to have interacted with your game before allowing any video to play. Make sure that the player click/touch the screen at the beginning of the game before starting any video."}},{kind:"warning",message:{id:"For a given video resource, only one video will be played in memory and displayed. If you put this object multiple times on the scene, all the instances will be displaying the exact same video (with the same timing and paused/played/stopped state)."}},{kind:"info",message:{id:"Video format supported can vary according to devices and browsers. For maximum compatibility, use H.264/mp4 file format (and AAC for audio)."}}],"BitmapText::BitmapTextObject":[{kind:"info",message:{id:"For a pixel type font, you must disable the Smooth checkbox related to your texture in the game resources to disable anti-aliasing."}},{kind:"info",message:{id:"The font size is stored directly inside the font. If you want to change it, export again your font using an external editor like bmFont. Click on the help button to learn more."}}],"TileMap::TileMap":[{kind:"info",message:{id:"The tilemap must be designed in a separated program, Tiled, that can be downloaded on mapeditor.org. Save your map as a JSON file, then select here the Atlas image that you used and the Tile map JSON file."}}],"TextInput::TextInputObject":[{kind:"warning",message:{id:"The text input will be always shown on top of all other objects in the game - this is a limitation that can't be changed. According to the platform/device or browser running the game, the appearance can also slightly change."}}]}},o=function(e){return 0===e.indexOf("PhysicsBehavior::")?{kind:"warning",message:{id:'This action is deprecated and should not be used anymore. Instead, use for all your objects the behavior called "Physics2" and the associated actions (in this case, all objects must be set up to use Physics2, you can\'t mix the behaviors).'}}:e.startsWith("BoundingBox")?{kind:"info",message:{id:"The bounding box is an imaginary rectangle surrounding the object collision mask. Even if the object X and Y positions are not changed, this rectangle can change if the object is rotated or if an animation is being played. Usually you should use actions and conditions related to the object position or center, but the bounding box can be useful to deal with the area of the object."}}:"PickedInstancesCount"===e?{kind:"info",message:{id:"If no previous condition or action used the specified object(s), the picked instances count will be 0."}}:"CompareTimer"===e?{kind:"info",message:{id:'To start a timer, don\'t forget to use the action "Start (or reset) a scene timer" in another event.'}}:"CompareObjectTimer"===e?{kind:"info",message:{id:'To start a timer, don\'t forget to use the action "Start (or reset) an object timer" in another event.'}}:"FixCamera"===e?{kind:"info",message:{id:'Please prefer using the new action "Enforce camera boundaries" which is more flexible.'}}:"BitmapText::Scale"===e?{kind:"info",message:{id:"A scale under 1 on a Bitmap text object can downgrade the quality text, prefer to remake a bitmap font smaller in the external bmFont editor."}}:"TextObject::Text::SetFontSize"===e?{kind:"warning",message:{id:"This action will create a new texture and re-render the text each time it is called, which is expensive and can reduce performances. Prefer to avoid changing a lot the character size of a text."}}:"PlayMusicCanal"===e||"PlayMusic"===e?{kind:"warning",message:{id:"Musics will only be played if the user has interacted with the game before (by clicking/touching it or pressing a key on the keyboard). This is due to browser limitations. Make sure to have the user interact with the game before using this action."}}:"P2P::OnEvent"===e?{kind:"info",message:{id:"Read the wiki page for more info about the dataloss mode."},identifier:"p2p-dataloss"}:"PlatformBehavior::IsObjectOnGivenFloor"===e?{kind:"info",message:{id:"This condition may have unexpected results when the object is on different floors at the same time, due to the fact that the engine only considers the first floor the object comes into contact with."}}:"P2P::OverrideID"===e?{kind:"warning",message:{id:"Overriding the ID may have unwanted consequences, such as blocking the ability to connect to any peer. Do not use this feature unless you really know what you are doing."}}:0===e.indexOf("P2P::")?{kind:"warning",message:{id:"P2P is merely a peer-to-peer networking solution. It only handles the connection to another player, and the exchange of messages. Higher-level tasks, such as synchronizing the game state, are left to by implemented by you.  Use the THNK Framework if you seek an easy, performant and flexible higher-level solution."},identifier:"p2p-is-networking"}:"SystemInfo::IsMobile"===e?{kind:"warning",message:{id:'Note that the distinction between what is a mobile device and what is not is becoming blurry (with devices like iPad pro and other "desktop-class" tablets). If you use this for mobile controls, prefer to check if the device has touchscreen support.'}}:"AdvancedWindow::SetClosable"===e||"AdvancedWindow::EnableWindow"===e||"AdvancedWindow::Show"===e||"AdvancedWindow::SetFocusable"===e||"AdvancedWindow::Focus"===e?{kind:"warning",message:{id:"Be careful with this action, you may have problems exiting the preview if you don't add a way to toggle it back."}}:"GetArgumentAsBoolean"===e?{kind:"info",message:{id:'If the parameter is a string or a number, you probably want to use the expressions "GetArgumentAsString" or "GetArgumentAsNumber", along with the conditions "Compare two strings" or "Compare two numbers".'}}:"PrioritizeLoadingOfScene"===e?{kind:"info",message:{id:"For most games, the default automatic loading of resources will be fine. This action should only be used when trying to avoid loading screens from appearing between scenes."}}:null}},3429:function(e,t,n){"use strict";var r=n(28381),i=n(3550),o=n(36262),a=n(72291),s=n(32515),l=n(4346),c=n(29343);t.Z=function(e){var t=r.useContext(o.ZP),n=r.useContext(i.Z).currentlyRunningInAppTutorial,u=r.useContext(a.n).tutorials,d=(0,s.Z)(t,u,e);return{DismissableTutorialMessage:r.useMemo((function(){return!d||n?null:(0,c.jsx)(l.Z,{tutorial:d})}),[d,n])}}},3550:function(e,t,n){"use strict";var r=n(74165),i=n(15861),o=n(28381),a={currentlyRunningInAppTutorial:null,getInAppTutorialShortHeader:function(e){return null},startTutorial:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),endTutorial:function(){},inAppTutorialShortHeaders:null,startStepIndex:0,startProjectData:{},inAppTutorialsFetchingError:null,fetchInAppTutorials:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},s=o.createContext(a);t.Z=s},23570:function(e,t,n){var r=n(83306),i=function(e,t,n){if(!n.runExtensionSanityTests)return{error:!0,message:"Missing runExtensionSanityTests in the extension module exports"};var i=n.runExtensionSanityTests(e,t);return r(i)?{error:!0,message:"One or more tests are failing for the extension (see rawError)",rawError:i}:{error:!1,message:"Tests passed successfully"}};e.exports={runExtensionSanityTests:i,loadExtension:function(e,t,n,r){if(!r.createExtension)return{message:"Extension module found, but no createExtension method is exported",error:!0};var o=null;try{if(!(o=r.createExtension(e,t)))return{message:"createExtension did not return any extension. Did you forget to return the extension created?",error:!0}}catch(s){return{message:"\ud83d\udea8 Exception caught while running createExtension. \ud83d\udca3 Please fix this error as this will make GDevelop crash at some point.",error:!0,dangerous:!0,rawError:s}}try{var a=i(t,o,r);if(a.error)return o.delete(),a}catch(s){return{message:"\ud83d\udea8 Exception caught while running runExtensionSanityTests. \ud83d\udca3 Please fix this error as this will make GDevelop crash at some point.",error:!0,dangerous:!0,rawError:s}}return n.addNewExtension(o),o.delete(),{message:"\u2705 Successfully loaded the extension.",error:!1}}}},55760:function(e,t,n){"use strict";n.d(t,{YK:function(){return j},$3:function(){return C},oN:function(){return m},aL:function(){return b},LB:function(){return v}});var r=n(1413),i=n(28381),o=function(){var e=document.body,t=document.activeElement,n=document.querySelector("div.main-frame"),r=n&&n.contains(t);return!(t===e)&&!r},a=n(48409),s=["CmdOrCtrl+KeyZ","CmdOrCtrl+KeyY","CmdOrCtrl+Shift+KeyZ","CmdOrCtrl+KeyX","CmdOrCtrl+KeyC","CmdOrCtrl+KeyV","CmdOrCtrl+KeyD","CmdOrCtrl+Shift+KeyV","CmdOrCtrl+KeyA","Delete","CmdOrCtrl+Shift+KeyI","F11","NumpadAdd","CmdOrCtrl+Equal","NumpadSubtract","CmdOrCtrl+Minus","CmdOrCtrl+KeyF"],l=n(36262),c=n(32072),u=function(){var e=document.activeElement;if(!e)return!1;return!!e.closest('textarea, input, [contenteditable="true"]')},d=n(83141),p=n(50057),f=n.n(p)()("electron"),h={48:"Digit0",49:"Digit1",50:"Digit2",51:"Digit3",52:"Digit4",53:"Digit5",54:"Digit6",55:"Digit7",56:"Digit8",57:"Digit9",65:"KeyA",66:"KeyB",67:"KeyC",68:"KeyD",69:"KeyE",70:"KeyF",71:"KeyG",72:"KeyH",73:"KeyI",74:"KeyJ",75:"KeyK",76:"KeyL",77:"KeyM",78:"KeyN",79:"KeyO",80:"KeyP",81:"KeyQ",82:"KeyR",83:"KeyS",84:"KeyT",85:"KeyU",86:"KeyV",87:"KeyW",88:"KeyX",89:"KeyY",90:"KeyZ",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",188:"Comma"},g=function(e){return"number"===typeof e.which&&e.which.toString()in h?h[e.which.toString()]:e.code||""},x=function(e){return e?0===e.indexOf("Key")?"alphabet":0===e.indexOf("Digit")?"number":0===e.indexOf("F")?"fn-row":"NumpadAdd"===e||"NumpadSubtract"===e?"numpad-arith":"Equal"===e||"Minus"===e?"numrow-arith":"Tab"===e||"Space"===e||"Comma"===e?"other":null:null},m=function(e){var t=function(e){var t="";(e.ctrlKey||e.metaKey)&&(t+="CmdOrCtrl+"),e.shiftKey&&(t+="Shift+"),e.altKey&&(t+="Alt+");var n=g(e);return x(n)&&(t+=n),t}(e),n=function(e){var t=g(e),n=x(t);if(!n)return!1;var r=e.ctrlKey||e.metaKey,i=e.altKey;return!("other"===n&&!r&&!i)}(e),r=s.includes(t);return{shortcutString:t,isValid:n&&!r}},v=function(){var e=i.useContext(l.ZP).values.userShortcutMap;return(0,r.Z)((0,r.Z)({},d.Z),e)},b=function(e){var t=v();i.useEffect((function(){var n=function(n){var r=m(n);if(r.isValid){var i=Object.keys(t).find((function(e){return t[e]===r.shortcutString}));i&&(f&&c.Z[i].handledByElectron||u()||(n.preventDefault(),o()||e(i)))}};return document.addEventListener("keydown",n),function(){return document.removeEventListener("keydown",n)}}),[e,t])},C=function(e){return e?e.split("+").map((function(e){return"CmdOrCtrl"===e?(0,a.z1)()?"Cmd":"Ctrl":"Shift"===e||"Alt"===e?e:function(e){var t=x(e);return"alphabet"===t?e.slice(3):"number"===t?e.slice(5):"fn-row"===t?e:"numpad-arith"===t?"NumpadAdd"===e?"Num+":"Num-":"numrow-arith"===t?"Minus"===e?"-":"=":"Comma"===e?",":e}(e)})).join(" + "):""},j=function(e){return e.split("+").map((function(e){return"CmdOrCtrl"===e||"Shift"===e||"Alt"===e?e:function(e){var t=x(e);return"alphabet"===t?e.slice(3):"number"===t?e.slice(5):"fn-row"===t?e:"numpad-arith"===t?"NumpadAdd"===e?"numadd":"numsub":"numrow-arith"===t?"Minus"===e?"-":"=":e}(e)})).join("+")}},23236:function(e,t,n){"use strict";n.d(t,{L:function(){return c},s:function(){return u}});var r=n(43144),i=n(15671),o=n(97326),a=n(60136),s=n(29388),l=n(98737),c="UserCancellationError",u=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,i.Z)(this,n),r=t.call(this,e),Error.captureStackTrace&&Error.captureStackTrace((0,o.Z)(r),n),r.name=c,r}return(0,r.Z)(n)}((0,l.Z)(Error))},36559:function(e,t,n){"use strict";n.d(t,{c:function(){return f},z:function(){return h}});var r=n(1413),i=n(45987),o=n(93433),a=n(55760),s=n(48409),l=n(2066),c=n(50057),u=["onClickSendEvent","onClickOpenLink","eventArgs"],d=n.n(c)()("electron"),p=!!d,f=function(e){var t=e.shortcutMap,n=e.i18n,r=e.recentProjectFiles,i=e.project,l=e.canSaveProjectAs,c=e.isApplicationTopLevelMenu,u={label:n._({id:"File"}),submenu:[{label:n._({id:"Create"}),submenu:[{label:n._({id:"New empty project..."}),accelerator:(0,a.YK)(t.CREATE_NEW_PROJECT),onClickSendEvent:"main-menu-create-blank"},{label:n._({id:"New project from template..."}),onClickSendEvent:"main-menu-create-template"}]},{type:"separator"},{label:n._({id:"Open..."}),accelerator:(0,a.YK)(t.OPEN_PROJECT),onClickSendEvent:"main-menu-open"},{label:n._({id:"Open Recent"}),submenu:r.length>0?r.map((function(e){return{label:e.fileMetadata.fileIdentifier,onClickSendEvent:"main-menu-open-recent",eventArgs:e}})):[{label:n._({id:"No recent project"}),enabled:!1}]},{type:"separator"},{label:n._({id:"Save"}),accelerator:(0,a.YK)(t.SAVE_PROJECT),onClickSendEvent:"main-menu-save",enabled:!!i},{label:n._({id:"Save as..."}),accelerator:(0,a.YK)(t.SAVE_PROJECT_AS),onClickSendEvent:"main-menu-save-as",enabled:l},{label:n._({id:"Show version history"}),onClickSendEvent:"main-menu-show-version-history",enabled:!!i},{type:"separator"},{label:n._({id:"Invite collaborators"}),accelerator:(0,a.YK)(t.INVITE_COLLABORATORS),onClickSendEvent:"main-menu-invite-collaborators",enabled:!!i},{label:n._({id:"Export (web, iOS, Android)..."}),accelerator:(0,a.YK)(t.EXPORT_GAME),onClickSendEvent:"main-menu-export",enabled:!!i},{type:"separator"},{label:n._({id:"Close Project"}),accelerator:(0,a.YK)(t.CLOSE_PROJECT),onClickSendEvent:"main-menu-close",enabled:!!i}].concat((0,o.Z)((0,s.z1)()&&c?[]:[{type:"separator"},{label:n._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:n._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:n._({id:"Language"}),onClickSendEvent:"main-menu-open-language"}].concat((0,o.Z)(d?[{type:"separator"},{label:n._({id:"Exit GDevelop"}),accelerator:(0,a.YK)(t.QUIT_APP),onClickSendEvent:"main-menu-close-app"}]:[]))))},f={label:n._({id:"Edit"}),submenu:[{label:n._({id:"Undo"}),role:"undo"},{label:n._({id:"Redo"}),role:"redo"},{type:"separator"},{label:n._({id:"Cut"}),role:"cut"},{label:n._({id:"Copy"}),role:"copy"},{label:n._({id:"Paste"}),role:"paste"},{label:n._({id:"Paste and Match Style"}),role:"pasteandmatchstyle"},{label:n._({id:"Delete"}),role:"delete"},{label:n._({id:"Select All"}),role:"selectall"}]},h={label:n._({id:"View"}),submenu:[{label:n._({id:"Show Project Manager"}),accelerator:(0,a.YK)(t.OPEN_PROJECT_MANAGER),onClickSendEvent:"main-menu-open-project-manager",enabled:!!i},{label:n._({id:"Show Home"}),onClickSendEvent:"main-menu-open-home-page"},{label:n._({id:"Open Debugger"}),onClickSendEvent:"main-menu-open-debugger",enabled:!!i}].concat((0,o.Z)(d?[{type:"separator"},{label:n._({id:"Toggle Developer Tools"}),role:"toggledevtools"},{type:"separator"},{label:n._({id:"Toggle Fullscreen"}),role:"togglefullscreen"}]:[]))},g={label:n._({id:"Window"}),role:"window",submenu:[{label:n._({id:"Minimize"}),role:"minimize"}]},x={label:n._({id:"Help"}),role:"help",submenu:[{label:n._({id:"GDevelop website"}),onClickOpenLink:"http://gdevelop.io"},{type:"separator"},{label:n._({id:"GDevelop games on gd.games"}),onClickOpenLink:"https://gd.games"},{label:n._({id:"Community Forums"}),onClickOpenLink:"https://forum.gdevelop.io"},{label:n._({id:"Community Discord Chat"}),onClickOpenLink:"https://discord.gg/gdevelop"},{type:"separator"},{label:n._({id:"YouTube channel (tutorials and more)"}),onClickOpenLink:"https://www.youtube.com/c/gdevelopapp"},{label:n._({id:"TikTok"}),onClickOpenLink:"https://tiktok.com/@gdevelop"},{label:n._({id:"Twitter"}),onClickOpenLink:"https://twitter.com/gdevelopapp"},{label:n._({id:"Instagram"}),onClickOpenLink:"https://www.instagram.com/gdevelopapp"},{label:n._({id:"Facebook"}),onClickOpenLink:"https://facebook.com/gdevelopapp"},{type:"separator"},{label:n._({id:"Buy GDevelop goodies and swag"}),onClickOpenLink:"https://goodies.gdevelop.io"},{label:n._({id:"Contribute to GDevelop"}),onClickOpenLink:"https://gdevelop.io/page/contribute"},{label:n._({id:"Create Extensions for GDevelop"}),onClickOpenLink:"https://github.com/4ian/GDevelop/blob/master/newIDE/README-extensions.md"},{type:"separator"},{label:n._({id:"Help to Translate GDevelop"}),onClickOpenLink:"https://crowdin.com/project/gdevelop"},{label:n._({id:"Report a wrong translation"}),onClickOpenLink:"https://github.com/4ian/GDevelop/issues/969"}].concat((0,o.Z)((0,s.z1)()&&p?[]:[{type:"separator"},{label:n._({id:"About GDevelop"}),onClickSendEvent:"main-menu-open-about"}]))},m=[u].concat((0,o.Z)(d?[f]:[]),[h],(0,o.Z)(d?[g]:[]),[x]);return(0,s.z1)()&&c&&(m.unshift({label:n._({id:"GDevelop 5"}),submenu:[{label:n._({id:"About GDevelop"}),onClickSendEvent:"main-menu-open-about"},{type:"separator"},{label:n._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:n._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:n._({id:"Language"}),onClickSendEvent:"main-menu-open-language"},{type:"separator"},{role:"services",submenu:[]},{type:"separator"},{role:"hide"},{role:"hideothers"},{role:"unhide"},{type:"separator"},{role:"quit"}]}),f.submenu.push({type:"separator"},{label:n._({id:"Speech"}),submenu:[{role:"startspeaking"},{role:"stopspeaking"}]}),g.submenu=[{role:"minimize"},{role:"zoom"},{type:"separator"},{role:"front"}]),m},h=function(e,t){return function e(n){return n.map((function(n){var o=n.onClickSendEvent,a=n.onClickOpenLink,s=n.eventArgs,c=(0,i.Z)(n,u),d=o||a;return(0,r.Z)((0,r.Z)({},c),{},{click:d?function(){if(n.onClickSendEvent){var e=function(e,t){return{"main-menu-open":t.onChooseProject,"main-menu-open-recent":t.onOpenRecentFile,"main-menu-save":t.onSaveProject,"main-menu-save-as":t.onSaveProjectAs,"main-menu-show-version-history":t.onShowVersionHistory,"main-menu-close":t.onCloseProject,"main-menu-close-app":t.onCloseApp,"main-menu-export":t.onExportProject,"main-menu-invite-collaborators":t.onInviteCollaborators,"main-menu-create-template":t.onCreateProject,"main-menu-create-blank":t.onCreateBlank,"main-menu-open-project-manager":t.onOpenProjectManager,"main-menu-open-home-page":t.onOpenHomePage,"main-menu-open-debugger":t.onOpenDebugger,"main-menu-open-about":t.onOpenAbout,"main-menu-open-preferences":t.onOpenPreferences,"main-menu-open-language":t.onOpenLanguage,"main-menu-open-profile":t.onOpenProfile,"update-status":t.setElectronUpdateStatus}[e]||function(){}}(n.onClickSendEvent,t);s?e(s):e()}n.onClickOpenLink&&l.ZP.openExternalURL(n.onClickOpenLink)}:void 0,submenu:n.submenu?e(n.submenu):void 0})}))}(e)}},5712:function(e,t,n){"use strict";n.d(t,{Z:function(){return wt}});var r=n(28381),i=n(15671),o=n(43144),a=n(60136),s=n(29388),l=n(64276),c=n(67778),u=n.n(c),d=n(61915),p=n(17777),f={backends:[{backend:l.default},{backend:u()({delayTouchStart:100}),preview:!0,transition:d.TouchTransition}]},h=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){return this.props.children}}]),n}(r.Component),g=(0,p.DragDropContext)((0,d.default)(f))(h),x=n(1413),m=n(74165),v=n(15861),b=n(36600),C=n(68151),j=n(93431),y=n(2861),Z=(n(94492),n(71445),n(29439)),k=n(1773),w=n(57748),T=n(63854),S=n(86278),P=n(61325),E=n(40243),I=n(4076),M=n(67835),L=n(96591),A=n(24893),F=n(6996),O=n(29343),R={marginTop:20},D=function(e){var t=e.onClose,n=e.onGoToCreateAccount,i=e.onLogin,o=(e.onLogout,e.onLoginWithProvider),a=e.onForgotPassword,s=e.loginInProgress,l=e.error,c=(0,F.U)().isMobile,u=r.useState(""),d=(0,Z.Z)(u,2),p=d[0],f=d[1],h=r.useState(""),g=(0,Z.Z)(h,2),m=g[0],v=g[1],C=function(){s||i({email:p.trim(),password:m})},j=[(0,O.jsx)(M.Z,{label:(0,O.jsx)(b.Trans,{id:"Cancel"}),primary:!1,onClick:t},"cancel"),(0,O.jsx)(T.Z,{isLoading:s,children:(0,O.jsx)(k.vF,{id:"login-button",label:(0,O.jsx)(b.Trans,{id:"Login"}),primary:!0,onClick:C,disabled:s})},"login")],y=[(0,O.jsx)(I.Z,{helpPagePath:"/interface/profile"},"help")],D=(0,O.jsxs)(P.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:[(0,O.jsx)(A.Z,{fontSize:"large"}),(0,O.jsx)(S.Z,{size:"title",align:"center",children:(0,O.jsx)(b.Trans,{id:"Log in to your account"})}),(0,O.jsxs)(E.sg,{noMargin:!0,alignItems:"center",children:[(0,O.jsx)(S.Z,{size:"body2",noMargin:!0,children:(0,O.jsx)(b.Trans,{id:"Don't have an account yet?"})}),(0,O.jsx)(L.Z,{href:"",onClick:n,disabled:s,children:(0,O.jsx)(S.Z,{size:"body2",noMargin:!0,color:"inherit",children:(0,O.jsx)(b.Trans,{id:"Create an account"})})})]}),(0,O.jsx)("div",{style:(0,x.Z)((0,x.Z)({},R),{},{width:c?"95%":"60%"}),children:(0,O.jsx)(w.Z,{onLogin:C,onLoginWithProvider:o,email:p,onChangeEmail:f,password:m,onChangePassword:v,onForgotPassword:a,loginInProgress:s,error:l})})]});return(0,O.jsx)(k.ZP,{title:null,id:"login-dialog",actions:j,secondaryActions:y,cannotBeDismissed:s,onRequestClose:t,onApply:C,maxWidth:"sm",open:!0,flexColumnBody:!0,children:D})},_=n(62800),B=n(71106),N=n(67226),U=n(45019),H=n(29277),V=n(21601),z=n(42699),W=n(65056),G=n(86567),Y=n(32484),q=n(84482),X=function(e){if(e)return"auth/username-used"===e.code?U.Jh:"auth/malformed-username"===e.code?U.UT:void 0},K=function(e){var t=e.badges,n=e.achievements,i=e.githubUsername,o=e.onSetGithubUsername,a=e.onUpdateGitHubStar,s=e.disabled,l=(0,W.Z)().showAlert,c=!!t&&t.some((function(e){return"github-star"===e.achievementId})),u=n&&n.find((function(e){return"github-star"===e.id}))||null,d=r.useCallback((0,v.Z)((0,m.Z)().mark((function e(){var t;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a(i);case 3:if(t=e.sent,(0,_.l3)({code:t.code}),"github-star/badge-given"!==t.code&&"github-star/badge-already-given"!==t.code){e.next=9;break}l({title:{id:"You're awesome!"},message:{id:"Thanks for starring GDevelop repository. We added credits to your account as a thank you gift."}}),e.next=18;break;case 9:if("github-star/repository-not-starred"!==t.code){e.next=13;break}l({title:{id:"We could not find your GitHub star"},message:{id:"Make sure you star the repository called 4ian/GDevelop with your GitHub user and try again."}}),e.next=18;break;case 13:if("github-star/user-not-found"!==t.code){e.next=17;break}l({title:{id:"We could not find your GitHub user and star"},message:{id:"Make sure you create your GitHub account, star the repository called 4ian/GDevelop, enter your username here and try again."}}),e.next=18;break;case 17:throw new Error("Error while updating the GitHub star: ".concat(t.code,"."));case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),console.error("Error while updating GitHub star:",e.t0),l({title:{id:"Something went wrong"},message:{id:"Make sure you have a proper internet connection or try again later."}});case 24:case"end":return e.stop()}}),e,null,[[0,20]])}))),[i,a,l]);return(0,O.jsx)(b.I18n,{children:function(e){var t=e.i18n;return(0,O.jsx)(P.ad,{renderButton:function(e){return(0,O.jsx)(Y.Z,{onClick:d,icon:(0,O.jsx)(q.Z,{fontSize:"small"}),label:c?(0,O.jsx)(b.Trans,{id:"Credits given"}):(0,O.jsx)(b.Trans,{id:"Claim"}),disabled:c||s,primary:!0,style:e})},renderTextField:function(){return(0,O.jsx)(H.ZP,{value:i,floatingLabelText:(0,O.jsx)(b.Trans,{id:"GitHub username"}),fullWidth:!0,translatableHintText:{id:"Your GitHub username"},onChange:function(e,t){o(t)},disabled:s,maxLength:j.Lq.maxLength,helperMarkdownText:t._(c?{id:"Thank you for supporting the GDevelop open-source community. Credits were added to your account as a thank you."}:{id:"[Star the GDevelop repository](https://github.com/4ian/GDevelop) and add your GitHub username here to get {0} free credits as a thank you!",values:{0:u&&u.rewardValueInCredits||"-"}})})}})}})},J=function(e){var t=e.id,n=e.value,r=e.onChange,i=e.disabled,o=e.translatableHintText,a=j.Ty[t];return(0,O.jsxs)(P.pJ,{noMargin:!0,alignItems:"center",children:[a.icon,(0,O.jsx)(H.ZP,{value:n,fullWidth:!0,translatableHintText:o,onChange:r,disabled:i,errorText:a.getFormattingError?a.getFormattingError(n):void 0,maxLength:a.maxLength,startAdornment:a.prefix?(0,O.jsx)(S.Z,{noMargin:!0,children:a.prefix}):void 0})]})},Q=function(e){var t=e.profile,n=e.subscription,i=e.achievements,o=e.badges,a=e.onClose,s=e.onEdit,l=e.onUpdateGitHubStar,c=e.onDelete,u=e.actionInProgress,d=e.error,p=(0,W.Z)(),f=p.showDeleteConfirmation,h=p.showAlert,g=t.communityLinks||{},x=r.useState(t.username||""),y=(0,Z.Z)(x,2),w=y[0],E=y[1],I=r.useState(t.description||""),L=(0,Z.Z)(I,2),A=L[0],F=L[1],R=r.useState(t.donateLink||""),D=(0,Z.Z)(R,2),_=D[0],B=D[1],N=r.useState(t.discordUsername||""),Y=(0,Z.Z)(N,2),q=Y[0],Q=Y[1],$=r.useState(t.githubUsername||""),ee=(0,Z.Z)($,2),te=ee[0],ne=ee[1],re=r.useState(g.personalWebsiteLink||""),ie=(0,Z.Z)(re,2),oe=ie[0],ae=ie[1],se=r.useState(g.personalWebsite2Link||""),le=(0,Z.Z)(se,2),ce=le[0],ue=le[1],de=r.useState(g.twitterUsername||""),pe=(0,Z.Z)(de,2),fe=pe[0],he=pe[1],ge=r.useState(g.facebookUsername||""),xe=(0,Z.Z)(ge,2),me=xe[0],ve=xe[1],be=r.useState(g.youtubeUsername||""),Ce=(0,Z.Z)(be,2),je=Ce[0],ye=Ce[1],Ze=r.useState(g.tiktokUsername||""),ke=(0,Z.Z)(Ze,2),we=ke[0],Te=ke[1],Se=r.useState(g.instagramUsername||""),Pe=(0,Z.Z)(Se,2),Ee=Pe[0],Ie=Pe[1],Me=r.useState(g.redditUsername||""),Le=(0,Z.Z)(Me,2),Ae=Le[0],Fe=Le[1],Oe=r.useState(g.snapchatUsername||""),Re=(0,Z.Z)(Oe,2),De=Re[0],_e=Re[1],Be=r.useState(g.discordServerLink||""),Ne=(0,Z.Z)(Be,2),Ue=Ne[0],He=Ne[1],Ve=r.useState(!!t.getGameStatsEmail),ze=(0,Z.Z)(Ve,2),We=ze[0],Ge=ze[1],Ye=r.useState(!!t.getNewsletterEmail),qe=(0,Z.Z)(Ye,2),Xe=qe[0],Ke=qe[1],Je=r.useState(null),Qe=(0,Z.Z)(Je,2),$e=Qe[0],et=Qe[1],tt=r.useState(!1),nt=(0,Z.Z)(tt,2),rt=nt[0],it=nt[1],ot=j.Ty.personalWebsiteLink.getFormattingError(oe),at=j.Ty.personalWebsite2Link.getFormattingError(ce),st=j.Ty.discordServerLink.getFormattingError(Ue),lt=j.Pk.getFormattingError(_),ct=j.Ty.tiktokUsername.getFormattingError(we),ut=ot||at||st||lt||ct,dt=!u&&(0,U.js)(w,{allowEmpty:!1})&&!rt&&(!$e||$e.isAvailable)&&!ut,pt=function(){var e=(0,v.Z)((0,m.Z)().mark((function e(){return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dt){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,s({username:w,description:A,getGameStatsEmail:We,getNewsletterEmail:Xe,donateLink:_,discordUsername:q,githubUsername:te,communityLinks:{personalWebsiteLink:oe,personalWebsite2Link:ce,twitterUsername:fe,facebookUsername:me,youtubeUsername:je,tiktokUsername:we,instagramUsername:Ee,redditUsername:Ae,snapchatUsername:De,discordServerLink:Ue}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ft=!u,ht=r.useCallback(function(){var e=(0,v.Z)((0,m.Z)().mark((function e(r){return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ft){e.next=2;break}return e.abrupt("return");case 2:if(!(0,C.e_)(n)){e.next=6;break}return e.next=5,h({title:{id:"You have an active subscription"},message:{id:"You can't delete your account while you have an active subscription. Please cancel your subscription first."}});case 5:return e.abrupt("return");case 6:return e.next=8,f({title:{id:"Delete account"},message:{id:"Before you go, make sure that you've unpublished all your games on gd.games. Otherwise they will stay visible to the community. Are you sure you want to permanently delete your account? This action cannot be undone."},confirmButtonLabel:{id:"Delete account"},confirmText:t.email,fieldMessage:{id:"Type your email to confirm"}});case 8:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,c();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[ft,c,t.email,n,f,h]),gt=[(0,O.jsx)(M.Z,{label:(0,O.jsx)(b.Trans,{id:"Back"}),disabled:u,primary:!1,onClick:a},"back"),(0,O.jsx)(T.Z,{isLoading:u,children:(0,O.jsx)(k.vF,{label:(0,O.jsx)(b.Trans,{id:"Save"}),primary:!0,disabled:!dt,onClick:pt})},"edit")],xt=[(0,O.jsx)(z.Z,{label:(0,O.jsx)(b.Trans,{id:"Delete my account"}),disabled:u,onClick:ht},"delete")];return(0,O.jsx)(b.I18n,{children:function(e){var n=e.i18n;return(0,O.jsx)(k.ZP,{title:(0,O.jsx)(b.Trans,{id:"Edit your GDevelop profile"}),actions:gt,secondaryActions:xt,maxWidth:"sm",cannotBeDismissed:u,onRequestClose:a,onApply:pt,open:!0,children:(0,O.jsx)(G.Z,{onSubmit:pt,autoComplete:"on",name:"editProfile",children:(0,O.jsxs)(P.ak,{noMargin:!0,children:[(0,O.jsx)(U.uR,{initialUsername:t.username,value:w,onChange:function(e,t){E(t)},errorText:X(d),onAvailabilityChecked:et,onAvailabilityCheckLoading:it,isValidatingUsername:rt,disabled:u}),(0,O.jsx)(S.Z,{size:"sub-title",noMargin:!0,children:(0,O.jsx)(b.Trans,{id:"Creator profile"})}),(0,O.jsx)(H.ZP,{value:q,floatingLabelText:(0,O.jsx)(b.Trans,{id:"Discord username"}),fullWidth:!0,translatableHintText:{id:"Your Discord username"},onChange:function(e,t){Q(t)},disabled:u,maxLength:j.RR.maxLength,helperMarkdownText:n._({id:"Add your Discord username to get access to a dedicated channel if you have a Gold or Pro subscription! Join the [GDevelop Discord](https://discord.gg/gdevelop)."})}),(0,O.jsx)(K,{achievements:i,badges:o,githubUsername:te,onSetGithubUsername:ne,onUpdateGitHubStar:l,disabled:u}),(0,O.jsx)(H.ZP,{value:A,floatingLabelText:(0,O.jsx)(b.Trans,{id:"Bio"}),fullWidth:!0,multiline:!0,rows:3,rowsMax:5,translatableHintText:{id:"What are you using GDevelop for?"},onChange:function(e,t){F(t)},disabled:u,floatingLabelFixed:!0,maxLength:1e4}),(0,O.jsx)(S.Z,{size:"sub-title",noMargin:!0,children:(0,O.jsx)(b.Trans,{id:"Socials"})}),(0,O.jsx)(J,{id:"personalWebsiteLink",value:oe,translatableHintText:{id:"Personal website, itch.io page, etc."},onChange:function(e,t){ae(t)},disabled:u}),(0,O.jsx)(J,{id:"personalWebsite2Link",value:ce,translatableHintText:{id:"Another personal website, newgrounds.com page, etc."},onChange:function(e,t){ue(t)},disabled:u}),(0,O.jsx)(J,{id:"twitterUsername",value:fe,translatableHintText:{id:"username"},onChange:function(e,t){he(t)},disabled:u}),(0,O.jsx)(J,{id:"facebookUsername",value:me,translatableHintText:{id:"username"},onChange:function(e,t){ve(t)},disabled:u}),(0,O.jsx)(J,{id:"youtubeUsername",value:je,translatableHintText:{id:"username"},onChange:function(e,t){ye(t)},disabled:u}),(0,O.jsx)(J,{id:"tiktokUsername",value:we,translatableHintText:{id:"username"},onChange:function(e,t){Te(t)},disabled:u}),(0,O.jsx)(J,{id:"instagramUsername",value:Ee,translatableHintText:{id:"username"},onChange:function(e,t){Ie(t)},disabled:u}),(0,O.jsx)(J,{id:"redditUsername",value:Ae,translatableHintText:{id:"username"},onChange:function(e,t){Fe(t)},disabled:u}),(0,O.jsx)(J,{id:"snapchatUsername",value:De,translatableHintText:{id:"username"},onChange:function(e,t){_e(t)},disabled:u}),(0,O.jsx)(J,{id:"discordServerLink",value:Ue,translatableHintText:{id:"Discord server, e.g: https://discord.gg/..."},onChange:function(e,t){He(t)},disabled:u}),(0,O.jsx)(H.ZP,{value:_,floatingLabelText:(0,O.jsx)(b.Trans,{id:"Donate link"}),fullWidth:!0,translatableHintText:{id:"Do you have a Patreon? Ko-fi? Paypal?"},onChange:function(e,t){B(t)},disabled:u,floatingLabelFixed:!0,helperMarkdownText:n._({id:"Add a link to your donation page. It will be displayed on your gd.games profile and game pages."}),errorText:lt,maxLength:j.Pk.maxLength}),(0,O.jsx)(S.Z,{size:"sub-title",noMargin:!0,children:(0,O.jsx)(b.Trans,{id:"Notifications"})}),(0,O.jsx)(V.Z,{label:(0,O.jsx)(b.Trans,{id:"I want to receive the GDevelop Newsletter"}),checked:Xe,onCheck:function(e,t){Ke(t)},disabled:u}),(0,O.jsx)(V.Z,{label:(0,O.jsx)(b.Trans,{id:"I want to receive weekly stats about my games"}),checked:We,onCheck:function(e,t){Ge(t)},disabled:u})]})})})}})},$=n(96059),ee=function(e){var t=e.onClose,n=e.onChangeEmail,i=e.firebaseUser,o=e.changeEmailInProgress,a=e.error,s=r.useState(i.email),l=(0,Z.Z)(s,2),c=l[0],u=l[1],d=r.useState(!0),p=(0,Z.Z)(d,2),f=p[0],h=p[1],g=function(){var e=(0,v.Z)((0,m.Z)().mark((function e(){var t;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.trim(),u(t),h($.H.test(t)),!o&&c&&f){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,n({email:c});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,O.jsx)(k.ZP,{title:(0,O.jsx)(b.Trans,{id:"Change your email"}),actions:[(0,O.jsx)(M.Z,{label:(0,O.jsx)(b.Trans,{id:"Back"}),disabled:o,primary:!1,onClick:t},"back"),(0,O.jsx)(T.Z,{isLoading:o,children:(0,O.jsx)(k.vF,{label:(0,O.jsx)(b.Trans,{id:"Save"}),primary:!0,onClick:g,disabled:o})},"change-email")],maxWidth:"xs",cannotBeDismissed:o,onRequestClose:t,onApply:g,open:!0,children:(0,O.jsx)(G.Z,{onSubmit:g,autoComplete:"on",name:"changeEmail",children:(0,O.jsx)(P.ak,{noMargin:!0,children:(0,O.jsx)(H.ZP,{value:c,floatingLabelText:(0,O.jsx)(b.Trans,{id:"Email"}),errorText:(0,N.m1)(a)||(f?null:(0,O.jsx)(b.Trans,{id:"Invalid email address"})),fullWidth:!0,type:"email",disabled:o,required:!0,onChange:function(e,t){f||h(!0),u(t)},onBlur:function(e){var t=e.currentTarget.value.trim();u(t),h($.H.test(t))}})})})})},te=n(1589),ne=n(21676),re=n(66789),ie=n(49536);function oe(e){var t=e.onClose,n=e.authenticatedUser,i=e.sendEmailAutomatically,o=e.showSendEmailButton,a=e.onSendEmail,s=!!n.firebaseUser&&!!n.firebaseUser.emailVerified,l=r.useState(!1),c=(0,Z.Z)(l,2),u=c[0],d=c[1];return r.useEffect((function(){!s&&i&&a()}),[s,a,i]),(0,ne.Y)((function(){n.onRefreshFirebaseProfile().catch((function(){}))}),s||!u&&o?null:5e3),(0,O.jsx)(k.ZP,{title:null,actions:[s?(0,O.jsx)(k.vF,{label:(0,O.jsx)(b.Trans,{id:"Done!"}),primary:!0,onClick:t},"close"):(0,O.jsx)(M.Z,{label:(0,O.jsx)(b.Trans,{id:"I'll do it later"}),primary:!1,onClick:t},"close")],maxWidth:"sm",open:!0,onRequestClose:t,onApply:t,children:(0,O.jsxs)(P.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:[(0,O.jsx)(A.Z,{fontSize:"large"}),n.firebaseUser?n.firebaseUser.emailVerified?(0,O.jsxs)(P.pJ,{justifyContent:"center",alignItems:"center",children:[(0,O.jsx)(ie.Z,{}),(0,O.jsx)(S.Z,{size:"title",align:"center",children:(0,O.jsx)(b.Trans,{id:"Email verified"})})]}):(0,O.jsxs)(P.ak,{noMargin:!0,alignItems:"center",children:[(0,O.jsx)(S.Z,{size:"title",align:"center",children:(0,O.jsx)(b.Trans,{id:"Confirm your email"})}),(0,O.jsx)(S.Z,{align:"center",children:(0,O.jsx)(b.Trans,{id:"You will get access to special discounts on the GDevelop asset store, as well as weekly stats about your games."})}),!u&&o?(0,O.jsx)(Y.Z,{primary:!0,label:(0,O.jsx)(b.Trans,{id:"Send it again"}),onClick:function(){d(!0),a()}}):(0,O.jsx)(te.Z,{children:(0,O.jsxs)(P.pJ,{justifyContent:"center",alignItems:"center",children:[(0,O.jsx)(re.Z,{size:20}),(0,O.jsx)(S.Z,{children:(0,O.jsx)(b.Trans,{id:"Email sent to {0}, waiting for validation...",values:{0:n.firebaseUser.email}})})]})})]}):null]})})}var ae=n(36262),se=n(34517),le=se.nZ,ce=n(84140),ue=n(53385),de=n(93433),pe=function(){function e(t){(0,i.Z)(this,e),this._promise=null,this._requestSender=t}return(0,o.Z)(e,[{key:"launchRequestOrGetOngoingPromise",value:function(e){var t=this;return this._promise||(this._promise=this._requestSender.apply(this,(0,de.Z)(e)).finally((function(){t._promise=null}))),this._promise}}]),e}(),fe=n(794),he=n(91),ge=n(30141),xe=n(23236),me=n(36465),ve=n(50631),be=function(){var e=(0,v.Z)((0,m.Z)().mark((function e(){return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([le(),(0,fe.rM)()]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={authenticatedUser:B.aZ,loginDialogOpen:!1,createAccountDialogOpen:!1,loginInProgress:!1,createAccountInProgress:!1,editProfileDialogOpen:!1,editInProgress:!1,deleteInProgress:!1,apiCallError:null,resetPasswordDialogOpen:!1,emailVerificationDialogOpen:!1,emailVerificationDialogProps:{sendEmailAutomatically:!1,showSendEmailButton:!1},forgotPasswordInProgress:!1,changeEmailDialogOpen:!1,changeEmailInProgress:!1,userSnackbarMessage:null},e._automaticallyUpdateUserProfile=!0,e._hasNotifiedUserAboutEmailVerification=!1,e._abortController=null,e._notificationPollingIntervalId=null,e._cloudProjectListingDeduplicator=new pe(se.xU),e._reloadFirebaseProfile=(0,v.Z)((0,m.Z)().mark((function t(){var n,r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.authentication,t.prev=1,t.next=4,n.getFirebaseUser();case 4:if(r=t.sent){t.next=9;break}return e._notificationPollingIntervalId&&(clearInterval(e._notificationPollingIntervalId),e._notificationPollingIntervalId=null),e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},t),{},{authenticated:!1,profile:null,usages:null,limits:null,subscription:null})}})),t.abrupt("return",null);case 9:return e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},t),{},{authenticated:!0,firebaseUser:r})}})),t.abrupt("return",r);case 13:throw t.prev=13,t.t0=t.catch(1),console.error("Unable to fetch the authenticated Firebase user:",t.t0),t.t0;case 17:case"end":return t.stop()}}),t,null,[[1,13]])}))),e._fetchUserProfileWithoutThrowingErrors=(0,v.Z)((0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e._fetchUserProfile();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error("Error while fetching the user profile - but ignoring it.",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])}))),e._fetchUserProfile=(0,v.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.authentication,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},t),{},{loginState:"loggingIn",cloudProjectsFetchingErrorLabel:null})}})),t.prev=2,t.next=5,e._reloadFirebaseProfile();case 5:if(r=t.sent){t.next=10;break}return console.info("User is not authenticated."),e._markAuthenticatedUserAsLoggedOut(),t.abrupt("return");case 10:t.next=17;break;case 12:throw t.prev=12,t.t0=t.catch(2),console.error("Unable to fetch the authenticated Firebase user:",t.t0),e._markAuthenticatedUserAsLoggedOut(),t.t0;case 17:return(0,C.Xp)(n.getAuthorizationHeader,r.uid).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},n),{},{usages:t})}}))}),(function(e){console.error("Error while loading user usages:",e)})),(0,C.rE)(n.getAuthorizationHeader,r.uid).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},n),{},{subscription:t})}}))}),(function(e){console.error("Error while loading user subscriptions:",e)})),(0,C.Mm)(n.getAuthorizationHeader,r.uid).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},n),{},{limits:t})}}))}),(function(e){console.error("Error while loading user limits:",e)})),e._cloudProjectListingDeduplicator.launchRequestOrGetOngoingPromise([n.getAuthorizationHeader,r.uid]).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},n),{},{cloudProjects:t})}}))}),(function(t){console.error("Error while loading user cloud projects:",t),e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},t),{},{cloudProjectsFetchingErrorLabel:(0,O.jsx)(b.Trans,{id:"We couldn't load your cloud projects. Verify your internet connection or try again later."})})}}))})),(0,ce.QR)(n.getAuthorizationHeader,{userId:r.uid}).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},n),{},{receivedAssetPacks:t})}}))}),(function(e){console.error("Error while loading received asset packs:",e)})),(0,ce.Tm)(n.getAuthorizationHeader,{userId:r.uid}).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},n),{},{receivedAssetShortHeaders:t})}}))}),(function(e){console.error("Error while loading received asset short headers:",e)})),(0,j.HU)(n.getAuthorizationHeader,{userId:r.uid}).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},n),{},{recommendations:t})}}))}),(function(e){var t=(0,he.T)(e);t&&404===t.status?console.warn("List recommendations endpoint returned 404, user might not have completed survey."):console.error("Error while loading recommendations:",e)})),(0,ce.bq)(n.getAuthorizationHeader,{userId:r.uid}).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},n),{},{receivedGameTemplates:t})}}))}),(function(e){console.error("Error while loading received game templates:",e)})),(0,me.cx)(n.getAuthorizationHeader,{userId:r.uid,productType:"game-template",role:"receiver"}).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},n),{},{gameTemplatePurchases:t})}}))}),(function(e){console.error("Error while loading game template purchases:",e)})),(0,me.cx)(n.getAuthorizationHeader,{userId:r.uid,productType:"asset-pack",role:"receiver"}).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},n),{},{assetPackPurchases:t})}}))}),(function(e){console.error("Error while loading asset pack purchases:",e)})),e._fetchUserBadges(),e._fetchUserNotifications(),t.next=31,n.getUserProfile(n.getAuthorizationHeader);case 31:if((i=t.sent).isCreator){t.next=41;break}return t.prev=33,t.next=36,n.editUserProfile(n.getAuthorizationHeader,{isCreator:!0});case 36:t.next=41;break;case 38:t.prev=38,t.t1=t.catch(33),console.error("Error while updating the user profile:",t.t1);case 41:e._notificationPollingIntervalId||(e._notificationPollingIntervalId=setInterval((function(){"visible"===document.visibilityState&&e._fetchUserNotifications()}),6e5)),e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},t),{},{profile:i,loginState:"done"})}}),(function(){(0,_.jP)(e.state.authenticatedUser),e._notifyUserAboutEmailVerification()}));case 43:case"end":return t.stop()}}),t,null,[[2,12],[33,38]])}))),e._fetchUserSubscription=(0,v.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,C.rE)(n.getAuthorizationHeader,r.uid);case 7:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},t),{},{subscription:i})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading user subscriptions:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),e._fetchUserNotifications=(0,v.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,ve.wd)(n.getAuthorizationHeader,{userId:r.uid});case 7:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},t),{},{notifications:i})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading user notifications:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),e._fetchUserUsages=(0,v.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,C.Xp)(n.getAuthorizationHeader,r.uid);case 7:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},t),{},{usages:i})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading user usages:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),e._fetchUserLimits=(0,v.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,C.Mm)(n.getAuthorizationHeader,r.uid);case 7:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},t),{},{limits:i})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading user limits:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),e._fetchUserSubscriptionLimitsAndUsages=(0,v.Z)((0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e._fetchUserSubscription(),e._fetchUserUsages(),e._fetchUserLimits()]);case 2:case"end":return t.stop()}}),t)}))),e._fetchUserAssetPacks=(0,v.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,ce.QR)(n.getAuthorizationHeader,{userId:r.uid});case 7:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},t),{},{receivedAssetPacks:i})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading received asset packs:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),e._fetchUserAssetShortHeaders=(0,v.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,ce.Tm)(n.getAuthorizationHeader,{userId:r.uid});case 7:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},t),{},{receivedAssetShortHeaders:i})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading received asset short headers:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),e._fetchUserGameTemplates=(0,v.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,ce.bq)(n.getAuthorizationHeader,{userId:r.uid});case 7:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},t),{},{receivedGameTemplates:i})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading received game templates:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),e._fetchUserGameTemplatePurchases=(0,v.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,me.cx)(n.getAuthorizationHeader,{userId:r.uid,productType:"game-template",role:"receiver"});case 7:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},t),{},{gameTemplatePurchases:i})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading game template purchases:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),e._fetchUserAssetPackPurchases=(0,v.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,me.cx)(n.getAuthorizationHeader,{userId:r.uid,productType:"asset-pack",role:"receiver"});case 7:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},t),{},{assetPackPurchases:i})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading asset pack purchases:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),e._fetchUserProducts=(0,v.Z)((0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e._fetchUserAssetPacks(),e._fetchUserAssetShortHeaders(),e._fetchUserGameTemplates()]);case 2:case"end":return t.stop()}}),t)}))),e._fetchUserCloudProjects=(0,v.Z)((0,m.Z)().mark((function t(){var n,r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},t),{},{cloudProjectsFetchingErrorLabel:null})}})),e._cloudProjectListingDeduplicator.launchRequestOrGetOngoingPromise([n.getAuthorizationHeader,r.uid]).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},n),{},{cloudProjects:t})}}))}),(function(t){console.error("Error while loading user cloud projects:",t),e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},t),{},{cloudProjectsFetchingErrorLabel:(0,O.jsx)(b.Trans,{id:"We couldn't load your cloud projects. Verify your internet connection or try again later."})})}}))}));case 6:case"end":return t.stop()}}),t)}))),e._fetchUserBadges=(0,v.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.authenticatedUser.firebaseUser){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,(0,j.r0)(n.uid);case 6:if(r=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},t),{},{badges:r})}})),e.state.authenticatedUser.achievements){t.next=13;break}return t.next=11,(0,y.jy)();case 11:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},t),{},{achievements:i})}}));case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),console.error("Error while loading user badges:",t.t0);case 18:case"end":return t.stop()}}),t,null,[[3,15]])}))),e._notifyUserAboutEmailVerification=function(){var t=e.state.authenticatedUser,n=t.profile,r=t.firebaseUser;if(n&&(!r||!r.emailVerified)){var i=Date.now()-n.createdAt<1e4;e._hasNotifiedUserAboutEmailVerification||setTimeout((function(){e.openEmailVerificationDialog({open:!0,sendEmailAutomatically:!1,showSendEmailButton:!i})}),1e3)}},e._doLogout=(0,v.Z)((0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.authentication){t.next=3;break}return t.next=3,e.props.authentication.logout();case 3:e._markAuthenticatedUserAsLoggedOut(),be(),e.showUserSnackbar({message:(0,O.jsx)(b.Trans,{id:"You're now logged out"})});case 6:case"end":return t.stop()}}),t)}))),e._showLoginSnackbar=function(t){var n=t.profile?t.profile.username:null;e.showUserSnackbar({message:n?(0,O.jsx)(b.Trans,{id:"\ud83d\udc4b Good to see you {username}!",values:{username:n}}):(0,O.jsx)(b.Trans,{id:"\ud83d\udc4b Good to see you!"})})},e._doLoginWithProvider=function(){var t=(0,v.Z)((0,m.Z)().mark((function t(n){var r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return e.setState({loginInProgress:!0,apiCallError:null,authenticatedUser:(0,x.Z)((0,x.Z)({},e.state.authenticatedUser),{},{creatingOrLoggingInAccount:!0,authenticationError:null})}),e._automaticallyUpdateUserProfile=!1,t.prev=5,e._abortController=new AbortController,t.next=9,r.loginWithProvider({provider:n,signal:e._abortController.signal});case 9:return t.next=11,e._fetchUserProfileWithoutThrowingErrors();case 11:e.openLoginDialog(!1),e.openCreateAccountDialog(!1),e._showLoginSnackbar(e.state.authenticatedUser),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),t.t0.name!==xe.L&&((0,ge.gR)({rawError:t.t0,errorId:"login-with-provider",doNotReport:!0,message:"An error occurred while logging in with provider ".concat(n,". Please check your internet connection or try again later.")}),e.setState({apiCallError:t.t0,authenticatedUser:(0,x.Z)((0,x.Z)({},e.state.authenticatedUser),{},{authenticationError:t.t0})}));case 19:e.setState({loginInProgress:!1,authenticatedUser:(0,x.Z)((0,x.Z)({},e.state.authenticatedUser),{},{creatingOrLoggingInAccount:!1})}),e._automaticallyUpdateUserProfile=!0;case 21:case"end":return t.stop()}}),t,null,[[5,16]])})));return function(e){return t.apply(this,arguments)}}(),e._cancelLogin=function(){e._abortController&&(e._abortController.abort(),e._abortController=null)},e._doLogin=function(){var t=(0,v.Z)((0,m.Z)().mark((function t(n){var r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return e.setState({loginInProgress:!0,apiCallError:null,authenticatedUser:(0,x.Z)((0,x.Z)({},e.state.authenticatedUser),{},{creatingOrLoggingInAccount:!0,authenticationError:null})}),e._automaticallyUpdateUserProfile=!1,t.prev=5,t.next=8,r.login(n);case 8:return t.next=10,e._fetchUserProfileWithoutThrowingErrors();case 10:e.openLoginDialog(!1),e._showLoginSnackbar(e.state.authenticatedUser),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(5),e.setState({apiCallError:t.t0,authenticatedUser:(0,x.Z)((0,x.Z)({},e.state.authenticatedUser),{},{authenticationError:t.t0})});case 17:e.setState({loginInProgress:!1,authenticatedUser:(0,x.Z)((0,x.Z)({},e.state.authenticatedUser),{},{creatingOrLoggingInAccount:!1})}),e._automaticallyUpdateUserProfile=!0;case 19:case"end":return t.stop()}}),t,null,[[5,14]])})));return function(e){return t.apply(this,arguments)}}(),e._doEdit=function(){var t=(0,v.Z)((0,m.Z)().mark((function t(n,r){var i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return e.setState({editInProgress:!0,apiCallError:null}),e._automaticallyUpdateUserProfile=!1,t.prev=5,t.next=8,i.editUserProfile(i.getAuthorizationHeader,{username:n.username,description:n.description,getGameStatsEmail:n.getGameStatsEmail,getNewsletterEmail:n.getNewsletterEmail,appLanguage:r.language,donateLink:n.donateLink,discordUsername:n.discordUsername,githubUsername:n.githubUsername,communityLinks:n.communityLinks,survey:n.survey});case 8:return t.next=10,e._fetchUserProfileWithoutThrowingErrors();case 10:t.next=16;break;case 12:throw t.prev=12,t.t0=t.catch(5),e.setState({apiCallError:t.t0}),t.t0;case 16:return t.prev=16,e.setState({editInProgress:!1}),e._automaticallyUpdateUserProfile=!0,t.finish(16);case 20:case"end":return t.stop()}}),t,null,[[5,12,16,20]])})));return function(e,n){return t.apply(this,arguments)}}(),e._doCreateAccount=function(){var t=(0,v.Z)((0,m.Z)().mark((function t(n,r){var i,o,a,s;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return e.setState({createAccountInProgress:!0,apiCallError:null,authenticatedUser:(0,x.Z)((0,x.Z)({},e.state.authenticatedUser),{},{creatingOrLoggingInAccount:!0,authenticationError:null})}),e._automaticallyUpdateUserProfile=!1,t.prev=5,t.next=8,i.createFirebaseAccount(n);case 8:return t.prev=8,t.next=11,i.createUser(i.getAuthorizationHeader,n,r.language);case 11:t.next=15;break;case 13:t.prev=13,t.t0=t.catch(8);case 15:return t.next=17,e._fetchUserProfileWithoutThrowingErrors();case 17:e.openCreateAccountDialog(!1),(0,_.rP)(n.email),o=e.state.authenticatedUser.firebaseUser,(0,_.Oy)(o),a=e.state.authenticatedUser.profile,s=a?a.username:null,e.showUserSnackbar({message:s?(0,O.jsx)(b.Trans,{id:"\ud83d\udc4b Welcome to GDevelop {username}!",values:{username:s}}):(0,O.jsx)(b.Trans,{id:"\ud83d\udc4b Welcome to GDevelop!"})}),t.next=29;break;case 26:t.prev=26,t.t1=t.catch(5),e.setState({apiCallError:t.t1,authenticatedUser:(0,x.Z)((0,x.Z)({},e.state.authenticatedUser),{},{authenticationError:t.t1})});case 29:e.setState({createAccountInProgress:!1,authenticatedUser:(0,x.Z)((0,x.Z)({},e.state.authenticatedUser),{},{creatingOrLoggingInAccount:!1})}),e._automaticallyUpdateUserProfile=!0;case 31:case"end":return t.stop()}}),t,null,[[5,26],[8,13]])})));return function(e,n){return t.apply(this,arguments)}}(),e._doDeleteAccount=(0,v.Z)((0,m.Z)().mark((function t(){var n;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return e.setState({deleteInProgress:!0,apiCallError:null}),e._automaticallyUpdateUserProfile=!1,t.prev=5,t.next=8,n.deleteAccount(n.getAuthorizationHeader);case 8:e._markAuthenticatedUserAsLoggedOut(),be(),e.openEditProfileDialog(!1),e.showUserSnackbar({message:(0,O.jsx)(b.Trans,{id:"Your account has been deleted!"})}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(5),e.setState({apiCallError:t.t0});case 17:e.setState({deleteInProgress:!1}),e._automaticallyUpdateUserProfile=!0;case 19:case"end":return t.stop()}}),t,null,[[5,14]])}))),e._doForgotPassword=function(){var t=(0,v.Z)((0,m.Z)().mark((function t(n){var r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,r.forgotPassword(n);case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(3);case 10:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}(),e._doSendEmailVerification=(0,v.Z)((0,m.Z)().mark((function t(){var n;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,n.sendFirebaseEmailVerification();case 5:case"end":return t.stop()}}),t)}))),e._doAcceptGameStatsEmail=function(){var t=(0,v.Z)((0,m.Z)().mark((function t(n){var r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return e.setState({editInProgress:!0,apiCallError:null}),e._automaticallyUpdateUserProfile=!1,t.prev=5,t.next=8,r.acceptGameStatsEmail(r.getAuthorizationHeader,n);case 8:return t.next=10,e._fetchUserProfileWithoutThrowingErrors();case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e.setState({apiCallError:t.t0});case 15:e.setState({editInProgress:!1}),e._automaticallyUpdateUserProfile=!0;case 17:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e){return t.apply(this,arguments)}}(),e._doChangeEmail=function(){var t=(0,v.Z)((0,m.Z)().mark((function t(n){var r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return e.setState({changeEmailInProgress:!0,apiCallError:null}),e._automaticallyUpdateUserProfile=!1,t.prev=5,t.next=8,r.changeEmail(r.getAuthorizationHeader,n);case 8:return t.next=10,e._fetchUserProfileWithoutThrowingErrors();case 10:e.openChangeEmailDialog(!1),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),e.setState({apiCallError:t.t0});case 16:e.setState({changeEmailInProgress:!1}),e._automaticallyUpdateUserProfile=!0;case 18:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e){return t.apply(this,arguments)}}(),e.openEmailVerificationDialog=function(t){var n=t.open,r=void 0===n||n,i=t.sendEmailAutomatically,o=void 0!==i&&i,a=t.showSendEmailButton,s=void 0!==a&&a;e.setState({emailVerificationDialogOpen:r,emailVerificationDialogProps:{sendEmailAutomatically:!!r&&o,showSendEmailButton:!!r&&s}}),r||(e._hasNotifiedUserAboutEmailVerification=!0)},e.openResetPassword=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({resetPasswordDialogOpen:t,apiCallError:null})},e.openLoginDialog=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({loginDialogOpen:t,createAccountDialogOpen:!1,apiCallError:null})},e.showUserSnackbar=function(t){var n=t.message;e.setState({userSnackbarMessage:n?(0,O.jsx)("span",{children:n}):null})},e.openEditProfileDialog=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({editProfileDialogOpen:t,apiCallError:null})},e.openCreateAccountDialog=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({loginDialogOpen:!1,createAccountDialogOpen:t,apiCallError:null})},e.openChangeEmailDialog=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({changeEmailDialogOpen:t,apiCallError:null})},e._onUpdateGithubStar=function(){var t=(0,v.Z)((0,m.Z)().mark((function t(n,r){var i,o;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.props.authentication,t.next=3,e._doEdit({githubUsername:n},r);case 3:return e.setState({editInProgress:!0}),t.prev=4,t.next=7,i.updateGitHubStar(i.getAuthorizationHeader);case 7:return o=t.sent,e._fetchUserBadges(),t.abrupt("return",o);case 10:return t.prev=10,e.setState({editInProgress:!1}),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[4,,10,13]])})));return function(e,n){return t.apply(this,arguments)}}(),e}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var e=(0,v.Z)((0,m.Z)().mark((function e(){var t=this;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._initializeAuthenticatedUser(),this.props.authentication.addUserLogoutListener(_.mA),this.props.authentication.addUserLogoutListener(this._fetchUserProfileWithoutThrowingErrors),this.props.authentication.addUserUpdateListener((function(){t._automaticallyUpdateUserProfile?(console.info("Fetching user profile as the authenticated user changed..."),t._fetchUserProfileWithoutThrowingErrors()):console.info("The authenticated user changed, but not fetching the user profile again (deactivated).")})),!this.props.authentication.getFirebaseUserSync()){e.next=12;break}return console.info("Fetching user profile as authenticated user found at startup..."),this._automaticallyUpdateUserProfile=!1,e.next=9,this._fetchUserProfileWithoutThrowingErrors();case 9:this._automaticallyUpdateUserProfile=!0,e.next=15;break;case 12:console.info("No authenticated user found at startup."),this._markAuthenticatedUserAsLoggedOut(),(0,_.jP)(this.state.authenticatedUser);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_initializeAuthenticatedUser",value:function(){var e=this;this.setState((function(t){t.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},B.aZ),{},{onLogin:e._doLogin,onLoginWithProvider:e._doLoginWithProvider,onCancelLogin:e._cancelLogin,onLogout:e._doLogout,onCreateAccount:e._doCreateAccount,onEditProfile:e._doEdit,onResetPassword:e._doForgotPassword,onBadgesChanged:e._fetchUserBadges,onCloudProjectsChanged:e._fetchUserCloudProjects,onOpenLoginDialog:function(){return e.openLoginDialog(!0)},onOpenEditProfileDialog:function(){return e.openEditProfileDialog(!0)},onOpenChangeEmailDialog:function(){return e.openChangeEmailDialog(!0)},onOpenCreateAccountDialog:function(){return e.openCreateAccountDialog(!0)},onRefreshUserProfile:e._fetchUserProfile,onRefreshFirebaseProfile:function(){var t=(0,v.Z)((0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._reloadFirebaseProfile();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),onRefreshSubscription:e._fetchUserSubscriptionLimitsAndUsages,onRefreshLimits:e._fetchUserLimits,onRefreshGameTemplatePurchases:e._fetchUserGameTemplatePurchases,onRefreshAssetPackPurchases:e._fetchUserAssetPackPurchases,onRefreshNotifications:e._fetchUserNotifications,onPurchaseSuccessful:e._fetchUserProducts,onSendEmailVerification:e._doSendEmailVerification,onOpenEmailVerificationDialog:function(t){var n=t.sendEmailAutomatically,r=t.showSendEmailButton;return e.openEmailVerificationDialog({open:!0,sendEmailAutomatically:n,showSendEmailButton:r})},onAcceptGameStatsEmail:e._doAcceptGameStatsEmail,getAuthorizationHeader:function(){return e.props.authentication.getAuthorizationHeader()}})}})),this._hasNotifiedUserAboutEmailVerification=!1}},{key:"_markAuthenticatedUserAsLoggedOut",value:function(){var e=this;this._notificationPollingIntervalId&&(clearInterval(this._notificationPollingIntervalId),this._notificationPollingIntervalId=null),this.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},t),B.Pu)}})),this._hasNotifiedUserAboutEmailVerification=!1,(0,j.NV)().then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,x.Z)((0,x.Z)({},n),{},{recommendations:t})}}))}),(function(e){console.error("Error while loading default recommendations:",e)}))}},{key:"render",value:function(){var e=this;return(0,O.jsx)(ae.ZP.Consumer,{children:function(t){var n=t.values;return(0,O.jsxs)(r.Fragment,{children:[(0,O.jsx)(B.ZP.Provider,{value:e.state.authenticatedUser,children:e.props.children}),e.state.loginDialogOpen&&(0,O.jsx)(D,{onClose:function(){e._cancelLogin(),e.openLoginDialog(!1)},onGoToCreateAccount:function(){return e.openCreateAccountDialog(!0)},onLogin:e._doLogin,onLogout:e._doLogout,onLoginWithProvider:e._doLoginWithProvider,loginInProgress:e.state.loginInProgress,error:e.state.apiCallError,onForgotPassword:e._doForgotPassword}),e.state.authenticatedUser.profile&&e.state.editProfileDialogOpen&&(0,O.jsx)(Q,{profile:e.state.authenticatedUser.profile,achievements:e.state.authenticatedUser.achievements,badges:e.state.authenticatedUser.badges,subscription:e.state.authenticatedUser.subscription,onClose:function(){return e.openEditProfileDialog(!1)},onEdit:function(){var t=(0,v.Z)((0,m.Z)().mark((function t(r){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e._doEdit(r,n);case 3:e.openEditProfileDialog(!1),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),onUpdateGitHubStar:function(t){return e._onUpdateGithubStar(t,n)},onDelete:e._doDeleteAccount,actionInProgress:e.state.editInProgress||e.state.deleteInProgress,error:e.state.apiCallError}),e.state.authenticatedUser.firebaseUser&&e.state.changeEmailDialogOpen&&(0,O.jsx)(ee,{firebaseUser:e.state.authenticatedUser.firebaseUser,onClose:function(){return e.openChangeEmailDialog(!1)},onChangeEmail:e._doChangeEmail,changeEmailInProgress:e.state.changeEmailInProgress,error:e.state.apiCallError}),e.state.createAccountDialogOpen&&(0,O.jsx)(N.ZP,{onClose:function(){return e.openCreateAccountDialog(!1)},onGoToLogin:function(){return e.openLoginDialog(!0)},onCreateAccount:function(t){return e._doCreateAccount(t,n)},onLoginWithProvider:e._doLoginWithProvider,createAccountInProgress:e.state.createAccountInProgress,error:e.state.apiCallError}),e.state.emailVerificationDialogOpen&&(0,O.jsx)(oe,(0,x.Z)((0,x.Z)({authenticatedUser:e.state.authenticatedUser,onClose:function(){e.openEmailVerificationDialog({open:!1}),e.state.authenticatedUser.onRefreshFirebaseProfile().catch((function(){}))}},e.state.emailVerificationDialogProps),{},{onSendEmail:e._doSendEmailVerification})),(0,O.jsx)(ue.Z,{open:!!e.state.userSnackbarMessage,autoHideDuration:3e3,onClose:function(){return e.showUserSnackbar({message:null})},ContentProps:{"aria-describedby":"snackbar-message"},message:(0,O.jsx)("span",{id:"snackbar-message",children:e.state.userSnackbarMessage})})]})}})}}]),n}(r.Component),je=n(13055),ye=n(56596),Ze=function(e){var t=e.children,n=r.useState(null),i=(0,Z.Z)(n,2),o=i[0],a=i[1],s=r.useCallback((function(e){a(e)}),[a]),l=r.useCallback((function(){a(null)}),[a]),c=r.useMemo((function(){return{openUserPublicProfile:s}}),[s]);return(0,O.jsxs)(r.Fragment,{children:[(0,O.jsx)(ye.Z.Provider,{value:c,children:t}),o&&(0,O.jsx)(je.Z,{userId:o,onClose:l})]})},ke=n(92371),we=n(4942),Te=n(25625),Se=n(88991),Pe=n.g.gd,Ee=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(){var e;(0,i.Z)(this,r);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={language:"en",catalogs:{},i18n:null},e._loadCatalog=function(t){return e.state.catalogs[t]?Promise.resolve(e.state.catalogs):n(91485)("./".concat(t.replace("-","_"),"/messages")).then((function(n){return(0,x.Z)((0,x.Z)({},e.state.catalogs),{},(0,we.Z)({},t,n))}),(function(n){return console.error("Error while loading language="+t,n),e.state.catalogs}))},e}return(0,o.Z)(r,[{key:"componentDidMount",value:function(){this._loadLanguage(this.props.language)}},{key:"componentDidUpdate",value:function(e){e.language!==this.props.language&&this._loadLanguage(this.props.language)}},{key:"_loadLanguage",value:function(e){var t=this;this._loadCatalog(e).then((function(n){t.setState({language:e,catalogs:n,i18n:(0,Te.setupI18n)({language:e,catalogs:n})},(function(){var n=t.state.i18n;Pe.getTranslation=(0,Se.P)(n),console.info('Loaded "'.concat(e,'" language'))}))}))}},{key:"render",value:function(){var e=this.state,t=e.i18n,n=e.catalogs,r=e.language,i=this.props.children;return t?(0,O.jsx)(b.I18nProvider,{i18n:t,language:r,catalogs:n,children:i}):null}}]),r}(r.Component),Ie=n(97326),Me=n(28923),Le=n(51458),Ae=n(83491),Fe=n.n(Ae),Oe=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o)))._eventsFunctionCodeWriter=e.props.makeEventsFunctionCodeWriter({onWriteFile:e._onWriteFile.bind((0,Ie.Z)(e))}),e._includeFileHashs={},e._lastLoadPromise=null,e.state={eventsFunctionsExtensionsError:null,loadProjectEventsFunctionsExtensions:e._loadProjectEventsFunctionsExtensions.bind((0,Ie.Z)(e)),unloadProjectEventsFunctionsExtensions:e._unloadProjectEventsFunctionsExtensions.bind((0,Ie.Z)(e)),unloadProjectEventsFunctionsExtension:e._unloadProjectEventsFunctionsExtension.bind((0,Ie.Z)(e)),reloadProjectEventsFunctionsExtensions:e._reloadProjectEventsFunctionsExtensions.bind((0,Ie.Z)(e)),reloadProjectEventsFunctionsExtensionMetadata:e._reloadProjectEventsFunctionsExtensionMetadata.bind((0,Ie.Z)(e)),ensureLoadFinished:e._ensureLoadFinished.bind((0,Ie.Z)(e)),getEventsFunctionsExtensionWriter:function(){return e.props.eventsFunctionsExtensionWriter},getEventsFunctionsExtensionOpener:function(){return e.props.eventsFunctionsExtensionOpener},getIncludeFileHashs:function(){return e._includeFileHashs}},e}return(0,o.Z)(n,[{key:"_onWriteFile",value:function(e){var t=e.includeFile,n=e.content;this._includeFileHashs[t]=Fe().h32(n,43981).toNumber()}},{key:"_ensureLoadFinished",value:function(){return this._lastLoadPromise?console.info("Waiting on the events functions extensions to finish loading..."):console.info("Events functions extensions are ready."),this._lastLoadPromise?this._lastLoadPromise.then((function(){console.info("Events functions extensions finished loading.")})):Promise.resolve()}},{key:"_loadProjectEventsFunctionsExtensions",value:function(e){var t=this,n=this.props.i18n,r=this._eventsFunctionCodeWriter;if(!e||!r)return Promise.resolve();var i=this._lastLoadPromise||Promise.resolve();return this._lastLoadPromise=i.then((function(){return(0,Le.At)(e,r,n)})).then((function(){return t.setState({eventsFunctionsExtensionsError:null})})).catch((function(e){t.setState({eventsFunctionsExtensionsError:e}),(0,ge.gR)({message:n._({id:"An error has occurred during functions generation. If GDevelop is installed, verify that nothing is preventing GDevelop from writing on disk. If you're running GDevelop online, verify your internet connection and refresh functions from the Project Manager."}),rawError:e,errorId:"events-functions-extensions-load-error"})})).then((function(){t._lastLoadPromise=null})),this._lastLoadPromise}},{key:"_reloadProjectEventsFunctionsExtensionMetadata",value:function(e,t){var n=this.props.i18n,r=this._eventsFunctionCodeWriter;if(e&&r)try{(0,Le.fP)(e,t,r,n)}catch(i){this.setState({eventsFunctionsExtensionsError:i}),(0,ge.gR)({message:n._({id:"An error has occurred during functions generation. If GDevelop is installed, verify that nothing is preventing GDevelop from writing on disk. If you're running GDevelop online, verify your internet connection and refresh functions from the Project Manager."}),rawError:i,errorId:"events-functions-extensions-load-error"})}}},{key:"_unloadProjectEventsFunctionsExtensions",value:function(e){(0,Le.$5)(e)}},{key:"_unloadProjectEventsFunctionsExtension",value:function(e,t){(0,Le.e0)(e,t)}},{key:"_reloadProjectEventsFunctionsExtensions",value:function(e){return e&&this._unloadProjectEventsFunctionsExtensions(e),this._loadProjectEventsFunctionsExtensions(e)}},{key:"render",value:function(){return(0,O.jsx)(Me.Z.Provider,{value:this.state,children:this.props.children})}}]),n}(r.Component),Re=n(19174),De=n(59788),_e=n(84090),Be=n(23375),Ne=n(30227),Ue=n(2866),He=n(48210),Ve=n(8162),ze=n(72291),We=n(91739);var Ge=function(e){return(0,O.jsx)(b.I18n,{children:function(t){var n=t.i18n;return(0,O.jsx)(k.ZP,{title:n._(e.title),open:e.open,noMobileFullScreen:!0,actions:[(0,O.jsx)(M.Z,{keyboardFocused:!0,label:e.dismissButtonLabel?n._(e.dismissButtonLabel):(0,O.jsx)(b.Trans,{id:"OK"}),onClick:e.onDismiss},"dismiss")],maxWidth:"xs",onRequestClose:e.onDismiss,onApply:e.onDismiss,children:(0,O.jsx)(S.Z,{children:n._(e.message)})})}})},Ye=n(32832);var qe=function(e){return(0,O.jsx)(b.I18n,{children:function(t){var n=t.i18n,r=e.dismissButtonLabel?n._(e.dismissButtonLabel):(0,O.jsx)(b.Trans,{id:"Cancel"}),i=e.makeDismissButtonPrimary?(0,O.jsx)(k.vF,{keyboardFocused:!0,label:r,onClick:e.onDismiss,primary:!0},"dismiss"):(0,O.jsx)(M.Z,{keyboardFocused:!0,label:r,onClick:e.onDismiss},"dismiss"),o=e.confirmButtonLabel?n._(e.confirmButtonLabel):(0,O.jsx)(b.Trans,{id:"Confirm"}),a=[i,e.makeDismissButtonPrimary?(0,O.jsx)(M.Z,{label:o,onClick:e.onConfirm},"confirm"):(0,O.jsx)(k.vF,{label:o,onClick:e.onConfirm,primary:!0},"confirm")];return(0,O.jsx)(k.ZP,{dangerLevel:"warning"===e.level?"warning":"error"===e.level?"danger":void 0,title:n._(e.title),open:e.open,actions:a,maxWidth:e.maxWidth||"xs",noMobileFullScreen:!0,onRequestClose:e.onDismiss,onApply:e.onConfirm,children:(0,O.jsx)(S.Z,{children:(0,O.jsx)(Ye.r,{translatableSource:e.message,isStandaloneText:!0})})})}})},Xe=n(35213);var Ke=function(e){var t=e.open,n=e.confirmText,i=r.useState(""),o=(0,Z.Z)(i,2),a=o[0],s=o[1],l=r.useRef(null),c=!e.confirmText||a===e.confirmText,u=(0,Xe.bX)(),d=function(){c&&(e.onConfirm(),s(""))};return r.useEffect((function(){t&&u&&!n&&setTimeout((function(){l.current&&l.current.focus()}),50)}),[t,u,n]),(0,O.jsx)(b.I18n,{children:function(n){var r=n.i18n;return(0,O.jsxs)(k.ZP,{title:r._(e.title),open:t,dangerLevel:"danger",onApply:d,onRequestClose:e.onDismiss,maxWidth:"sm",flexColumnBody:!0,actions:[(0,O.jsx)(M.Z,{label:e.dismissButtonLabel?r._(e.dismissButtonLabel):(0,O.jsx)(b.Trans,{id:"Cancel"}),primary:!1,onClick:e.onDismiss},"cancel"),(0,O.jsx)(k.vF,{ref:l,label:e.confirmButtonLabel?r._(e.confirmButtonLabel):(0,O.jsx)(b.Trans,{id:"Confirm"}),primary:!0,onClick:d,disabled:!c},"confirm")],noMobileFullScreen:!0,children:[(0,O.jsx)(S.Z,{size:"body",style:{userSelect:"text"},children:r._(e.message)}),e.confirmText&&e.fieldMessage&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(E.hS,{}),(0,O.jsx)(H.ZP,{autoFocus:"desktop",floatingLabelFixed:!0,floatingLabelText:r._(e.fieldMessage),value:a,onChange:function(e,t){return s(t)},hintText:e.confirmText})]})]})}})};var Je=function(e){return(0,O.jsx)(b.I18n,{children:function(t){var n=t.i18n;return(0,O.jsx)(k.ZP,{title:n._(e.title),open:e.open,actions:[(0,O.jsx)(M.Z,{keyboardFocused:!0,label:e.noButtonLabel?n._(e.noButtonLabel):(0,O.jsx)(b.Trans,{id:"No"}),onClick:e.onClickNo},"no"),(0,O.jsx)(k.vF,{label:e.yesButtonLabel?n._(e.yesButtonLabel):(0,O.jsx)(b.Trans,{id:"Yes"}),onClick:e.onClickYes,primary:!0},"yes")],secondaryActions:[(0,O.jsx)(M.Z,{keyboardFocused:!0,label:e.cancelButtonLabel?n._(e.cancelButtonLabel):(0,O.jsx)(b.Trans,{id:"Cancel"}),onClick:e.onClickCancel},"cancel")],maxWidth:"xs",noMobileFullScreen:!0,onRequestClose:e.onClickCancel,onApply:e.onClickYes,children:(0,O.jsx)(S.Z,{children:(0,O.jsx)(Ye.r,{translatableSource:e.message,isStandaloneText:!0})})})}})};var Qe=function(e){var t=e.children,n=r.useState(!1),i=(0,Z.Z)(n,2),o=i[0],a=i[1],s=r.useState(null),l=(0,Z.Z)(s,2),c=l[0],u=l[1],d=r.useCallback((function(e){a(!0),u(e)}),[]),p=r.useState(!1),f=(0,Z.Z)(p,2),h=f[0],g=f[1],x=r.useState(null),m=(0,Z.Z)(x,2),v=m[0],b=m[1],C=r.useCallback((function(e){g(!0),b(e)}),[]),j=r.useState(!1),y=(0,Z.Z)(j,2),k=y[0],w=y[1],T=r.useState(null),S=(0,Z.Z)(T,2),P=S[0],E=S[1],I=r.useCallback((function(e){w(!0),E(e)}),[]),M=r.useState(!1),L=(0,Z.Z)(M,2),A=L[0],F=L[1],R=r.useState(null),D=(0,Z.Z)(R,2),_=D[0],B=D[1],N=r.useCallback((function(e){F(!0),B(e)}),[]);return(0,O.jsxs)(We.Z.Provider,{value:{showAlertDialog:d,showConfirmDialog:C,showConfirmDeleteDialog:I,showYesNoCancelDialog:N},children:[t,c&&(0,O.jsx)(Ge,{open:o,onDismiss:function(){a(!1),c.callback()},dismissButtonLabel:c.dismissButtonLabel,title:c.title,message:c.message}),v&&(0,O.jsx)(qe,{open:h,onConfirm:function(){g(!1),v.callback(!0)},confirmButtonLabel:v.confirmButtonLabel,onDismiss:function(){g(!1),v.callback(!1)},dismissButtonLabel:v.dismissButtonLabel,title:v.title,message:v.message,level:v.level||"info",maxWidth:v.maxWidth,makeDismissButtonPrimary:v.makeDismissButtonPrimary}),P&&(0,O.jsx)(Ke,{open:k,onConfirm:function(){w(!1),P.callback(!0)},confirmButtonLabel:P.confirmButtonLabel,onDismiss:function(){w(!1),P.callback(!1)},dismissButtonLabel:P.dismissButtonLabel,title:P.title,message:P.message,fieldMessage:P.fieldMessage,confirmText:P.confirmText}),_&&(0,O.jsx)(Je,{open:A,onClickYes:function(){F(!1),_.callback(0)},yesButtonLabel:_.yesButtonLabel,onClickNo:function(){F(!1),_.callback(1)},noButtonLabel:_.noButtonLabel,onClickCancel:function(){F(!1),_.callback(2)},cancelButtonLabel:_.cancelButtonLabel,title:_.title,message:_.message})]})},$e=n(96210),et=n(87706),tt=n(24347),nt=function(e,t){var n=e.objectAssets;return(0,x.Z)((0,x.Z)({},e),{},{objectAssets:n.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{resources:e.resources.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{file:(0,me.mR)(e.file,t)})}))})}))})},rt=function(e){var t=e.children,n=r.useContext(B.ZP),i=n.profile,o=r.useState(null),a=(0,Z.Z)(o,2),s=a[0],l=a[1],c=r.useRef(!1),u=r.useCallback(function(){var e=(0,v.Z)((0,m.Z)().mark((function e(t){var r;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,me.B$)(n.getAuthorizationHeader,{userId:t});case 2:return r=e.sent,l(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n.getAuthorizationHeader]),d=function(){var e=(0,v.Z)((0,m.Z)().mark((function e(){var t;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:if(t=i.id,!c.current){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,c.current=!0,e.next=9,u(t);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),console.error("Could not fetch the authorization token",e.t0);case 14:return e.prev=14,c.current=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[5,11,14,17]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=(0,v.Z)((0,m.Z)().mark((function e(t,n){var r,o,a,l,c,d;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.environment,i){e.next=3;break}return e.abrupt("return");case 3:if(o=i.id,e.t0=s,e.t0){e.next=9;break}return e.next=8,u(i.id);case 8:e.t0=e.sent;case 9:return a=e.t0,e.prev=10,e.next=13,(0,ce._N)(t,a,{environment:r});case 13:return l=e.sent,e.abrupt("return",l);case 17:if(e.prev=17,e.t1=e.catch(10),!(c=(0,he.T)(e.t1))||404!==c.status){e.next=28;break}return e.next=23,u(o);case 23:return a=e.sent,e.next=26,(0,ce._N)(t,a,{environment:r});case 26:return d=e.sent,e.abrupt("return",d);case 28:throw e.t1;case 29:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=(0,v.Z)((0,m.Z)().mark((function e(t){var n,r,o,a,l;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.asset,r=t.project,o=t.objectsContainer,i){e.next=3;break}throw new Error("Unable to install the asset because no profile was found.");case 3:if(e.t0=s,e.t0){e.next=8;break}return e.next=7,u(i.id);case 7:e.t0=e.sent;case 8:return a=e.t0,l=nt(n,a),e.abrupt("return",(0,et.Pr)({asset:l,project:r,objectsContainer:o}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,v.Z)((0,m.Z)().mark((function e(t){var n;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,u(i.id);case 4:return n=e.sent,e.abrupt("return",(0,ce.bX)(t,n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,O.jsx)(tt.Z.Provider,{value:{authorizationToken:s,updateAuthorizationToken:d,fetchPrivateAsset:p,installPrivateAsset:f,getPrivateAssetPackAudioArchiveUrl:h},children:t})},it=n(3550),ot=n(19817),at=n(4900),st=function(e){var t=r.useState(null),n=(0,Z.Z)(t,2),i=n[0],o=n[1],a=r.useState(null),s=(0,Z.Z)(a,2),l=s[0],c=s[1],u=r.useState(0),d=(0,Z.Z)(u,2),p=d[0],f=d[1],h=r.useState({}),g=(0,Z.Z)(h,2),x=g[0],b=g[1],C=r.useState(null),j=(0,Z.Z)(C,2),y=j[0],k=j[1],w=r.useCallback((function(e){return y?y.find((function(t){return t.id===e})):null}),[y]),T=function(){var e=(0,v.Z)((0,m.Z)().mark((function e(t){var n,r,i,a,s;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.tutorialId,r=t.initialStepIndex,i=t.initialProjectData,y){e.next=3;break}return e.abrupt("return");case 3:if(a=w(n)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,(0,ot.TO)(a);case 8:s=e.sent,f(r),b(i),o(s),(0,_.$t)(n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=r.useCallback((0,v.Z)((0,m.Z)().mark((function e(){var t;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(null),e.prev=1,e.next=4,(0,ot.oO)();case 4:t=e.sent,k(t),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("An error occurred when fetching in app tutorials:",e.t0),c("fetching-error");case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),[]);return r.useEffect((function(){var e=setTimeout((function(){console.info("Pre-fetching in-app tutorials..."),S()}),at.n);return function(){return clearTimeout(e)}}),[S]),(0,O.jsx)(it.Z.Provider,{value:{inAppTutorialShortHeaders:y,getInAppTutorialShortHeader:w,currentlyRunningInAppTutorial:i,startTutorial:T,startProjectData:x,endTutorial:function(){o(null),(0,_.$t)(null)},startStepIndex:p,inAppTutorialsFetchingError:l,fetchInAppTutorials:S},children:e.children})},lt=n(80856),ct=n(30609),ut=n(61651),dt=n(78351),pt=n(98555),ft=n(46789),ht=n(99584),gt=n(76436),xt=n(59509),mt=n(24910),vt=(0,gt.Ue)({plugins:[].concat((0,de.Z)((0,pt.Z)().plugins),[(0,xt.Z)()])}),bt=function(e){var t=e.children,n=e.forcedThemeName,i=r.useContext(ae.ZP).values,o=i.themeName,a=i.language,s=(0,F.U)().isMobile,l=n||o,c=r.useMemo((function(){var e=(0,ht.l)({themeName:l,language:a,isMobile:s});try{var t=document.body;if(!t)throw new Error("Document has no body.");t.className=e.gdevelopTheme.uiRootClassName}catch(n){console.error("An error occurred while changing global theme:",n)}return e}),[l,a,s]);return(0,O.jsx)(mt.Z.Provider,{value:c.gdevelopTheme,children:(0,O.jsx)(ft.ZP,{jss:vt,children:(0,O.jsx)(dt.Z,{theme:c.muiTheme,children:t})})})},Ct=n(1525),jt=n(62903),yt=n(65875),Zt=n(5051),kt=n(48025),wt=function(e){var t=e.disableCheckForUpdates,n=e.authentication,r=e.children,i=e.makeEventsFunctionCodeWriter,o=e.eventsFunctionsExtensionWriter,a=e.eventsFunctionsExtensionOpener,s=(0,Ct.Bd)();return(0,O.jsx)(g,{children:(0,O.jsx)(Re.$,{children:(0,O.jsx)(ct.K,{children:(0,O.jsx)(ke.ZP,{disableCheckForUpdates:t,children:(0,O.jsx)(ae.ZP.Consumer,{children:function(e){var t=e.values;return(0,O.jsx)(Ee,{language:t.language.replace("_","-"),children:(0,O.jsx)(bt,{children:(0,O.jsx)(ut.ZP,{componentTitle:(0,O.jsx)(b.Trans,{id:"GDevelop app"}),scope:"app",children:(0,O.jsx)(st,{children:(0,O.jsx)(Qe,{children:(0,O.jsx)(Ce,{authentication:n,children:(0,O.jsx)(Ze,{children:(0,O.jsx)(b.I18n,{update:!0,children:function(e){var t=e.i18n;return(0,O.jsx)(Oe,{i18n:t,makeEventsFunctionCodeWriter:i,eventsFunctionsExtensionWriter:o,eventsFunctionsExtensionOpener:a,children:(0,O.jsx)(lt.p,{children:(0,O.jsx)(De.V,{children:(0,O.jsx)(_e.po,{shopNavigationState:s,children:(0,O.jsx)(Be.E,{children:(0,O.jsx)(Ne.h,{children:(0,O.jsx)(Ue.G_,{shopNavigationState:s,children:(0,O.jsx)(jt._S,{children:(0,O.jsx)(yt.K,{children:(0,O.jsx)(Zt.c,{children:(0,O.jsx)(He.D,{children:(0,O.jsx)(Ve.N,{children:(0,O.jsx)(ze.b,{children:(0,O.jsx)($e.X,{children:(0,O.jsx)(kt.J,{children:(0,O.jsx)(rt,{children:r({i18n:t})})})})})})})})})})})})})})})})})}})})})})})})})})}})})})})})}},30609:function(e,t,n){"use strict";n.d(t,{K:function(){return u}});var r=n(1413),i=n(29439),o=n(28381),a=n(2066),s=n(29343),l={routeArguments:{},removeRouteArguments:function(){},addRouteArguments:function(){},navigateToRoute:function(){}},c=o.createContext(l);t.Z=c;var u=function(e){var t=e.children,n=o.useState(a.ZP.getArguments()),l=(0,i.Z)(n,2),u=l[0],d=l[1],p=o.useCallback((function(e){a.ZP.removeArguments(e),d((function(t){var n=(0,r.Z)({},t);return e.forEach((function(e){delete n[e]})),n}))}),[]),f=o.useCallback((function(e){a.ZP.addArguments(e),d((function(t){return(0,r.Z)((0,r.Z)({},t),e)}))}),[]),h=o.useCallback((function(e,t){f((0,r.Z)((0,r.Z)({},t),{},{"initial-dialog":e}))}),[f]);return(0,s.jsx)(c.Provider,{value:{routeArguments:u,addRouteArguments:f,removeRouteArguments:p,navigateToRoute:h},children:t})}},19174:function(e,t,n){"use strict";n.d(t,{$:function(){return l}});var r=n(29439),i=n(28381),o=n(29343),a={hasUnsavedChanges:!1,sealUnsavedChanges:function(){},triggerUnsavedChanges:function(){}},s=i.createContext(a);t.Z=s;var l=function(e){var t=i.useState(!1),n=(0,r.Z)(t,2),a=n[0],l=n[1];return(0,o.jsx)(s.Provider,{value:{hasUnsavedChanges:a,triggerUnsavedChanges:function(){a||l(!0)},sealUnsavedChanges:function(){a&&l(!1)}},children:e.children})}},29404:function(e,t,n){"use strict";n.d(t,{Z:function(){return Y_}});var r=n(4942),i=n(74165),o=n(15861),a=n(1413),s=n(29439),l=n(28381),c=n(53385),u=n(78118),d=n(29343),p=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.71627 2.75526C7.88716 2.63741 8.11311 2.63741 8.284 2.75526L13.1173 6.0886C13.2527 6.18193 13.3335 6.33582 13.3335 6.50021V11.5002C13.3335 12.5127 12.5127 13.3335 11.5001 13.3335H4.50016C3.48765 13.3335 2.66683 12.5127 2.66683 11.5002V6.50021C2.66683 6.33582 2.74763 6.18193 2.88296 6.0886L7.71627 2.75526ZM8.00014 3.77425L3.66683 6.76276V11.5002C3.66683 11.9604 4.03992 12.3335 4.50016 12.3335H11.5001C11.9604 12.3335 12.3335 11.9604 12.3335 11.5002V6.76276L8.00014 3.77425Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.83307 9.66624C7.37287 9.66624 6.99975 10.0393 6.99975 10.4996V12.3329H8.99974V10.4996C8.99974 10.0393 8.62666 9.66624 8.1664 9.66624H7.83307ZM5.99975 10.4996C5.99975 9.48703 6.8206 8.66624 7.83307 8.66624H8.1664C9.17894 8.66624 9.99974 9.48703 9.99974 10.4996V12.8329C9.99974 13.1091 9.77588 13.3329 9.49974 13.3329H6.49975C6.22361 13.3329 5.99975 13.1091 5.99975 12.8329V10.4996Z",fill:"currentColor"})]}))})),f=n(24910),h={flexShrink:0,display:"flex",overflowX:"overlay",overflowY:"hidden",paddingLeft:8,paddingRight:8},g=l.memo((function(e){var t=e.children,n=e.borderBottomColor,r=e.height,i=void 0===r?40:r,o=l.useContext(f.Z);return(0,d.jsx)("div",{className:"almost-invisible-scrollbar",style:(0,a.Z)((0,a.Z)({},h),{},{backgroundColor:o.toolbar.backgroundColor,height:i,borderBottom:n?"2px solid ".concat(n):void 0}),children:t})})),x=function(e){return{flex:1,display:"flex",alignItems:"center",justifyContent:e.firstChild?"flex-start":e.lastChild?"flex-end":"center"}},m=l.memo((function(e){return(0,d.jsx)("span",{style:x(e),children:e.children})})),v=n(93433),b=n(36600),C=n(61325),j=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.57046 3.408C3.71787 3.3169 3.90194 3.30862 4.05694 3.38612L12.3903 7.55278C12.5597 7.63748 12.6667 7.81061 12.6667 8C12.6667 8.18938 12.5597 8.36251 12.3903 8.44721L4.05694 12.6139C3.90194 12.6914 3.71787 12.6831 3.57046 12.592C3.42305 12.5009 3.33333 12.34 3.33333 12.1667V3.83333C3.33333 3.66004 3.42305 3.49911 3.57046 3.408ZM4.33333 4.64235V11.3576L11.0486 8L4.33333 4.64235Z",fill:"currentColor"})}))})),y=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.87161 2.83221C8.05634 3.03746 8.0397 3.35361 7.83444 3.53834L6.58072 4.66669L7.83444 5.79504C8.0397 5.97977 8.05634 6.29592 7.87161 6.50117C7.68688 6.70643 7.37073 6.72307 7.16548 6.53834L5.49881 5.03834C5.39345 4.94352 5.33329 4.80843 5.33329 4.66669C5.33329 4.52495 5.39345 4.38987 5.49881 4.29504L7.16548 2.79504C7.37073 2.61031 7.68688 2.62695 7.87161 2.83221Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.99996 4.66669C5.99996 4.39055 6.22382 4.16669 6.49996 4.16669H8.83329C11.3186 4.16669 13.3333 6.18141 13.3333 8.66669V8.83336C13.3333 9.1095 13.1094 9.33336 12.8333 9.33336C12.5572 9.33336 12.3333 9.1095 12.3333 8.83336V8.66669C12.3333 6.73369 10.7663 5.16669 8.83329 5.16669H6.49996C6.22382 5.16669 5.99996 4.94283 5.99996 4.66669Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.12831 9.49888C8.31304 9.29362 8.62919 9.27698 8.83444 9.46171L10.5011 10.9617C10.6065 11.0565 10.6666 11.1916 10.6666 11.3334C10.6666 11.4751 10.6065 11.6102 10.5011 11.705L8.83444 13.205C8.62919 13.3897 8.31304 13.3731 8.12831 13.1678C7.94358 12.9626 7.96022 12.6464 8.16548 12.4617L9.4192 11.3334L8.16548 10.205C7.96022 10.0203 7.94358 9.70413 8.12831 9.49888Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.16663 6.66669C3.44277 6.66669 3.66663 6.89055 3.66663 7.16669V7.33336C3.66663 9.26635 5.23363 10.8334 7.16663 10.8334H9.49996C9.7761 10.8334 9.99996 11.0572 9.99996 11.3334C9.99996 11.6095 9.7761 11.8334 9.49996 11.8334H7.16663C4.68134 11.8334 2.66663 9.81863 2.66663 7.33336V7.16669C2.66663 6.89055 2.89048 6.66669 3.16663 6.66669Z",fill:"currentColor"})]}))})),Z=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99996 3.66669C5.60673 3.66669 3.66663 5.60679 3.66663 8.00002C3.66663 10.3933 5.60673 12.3334 7.99996 12.3334C10.3932 12.3334 12.3333 10.3933 12.3333 8.00002C12.3333 5.60679 10.3932 3.66669 7.99996 3.66669ZM2.66663 8.00002C2.66663 5.0545 5.05444 2.66669 7.99996 2.66669C10.9455 2.66669 13.3333 5.0545 13.3333 8.00002C13.3333 10.9455 10.9455 13.3334 7.99996 13.3334C5.05444 13.3334 2.66663 10.9455 2.66663 8.00002Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.04854 4.69103C6.65219 5.44491 6.33329 6.57193 6.33329 8.00002C6.33329 9.42811 6.65219 10.5551 7.04854 11.309C7.2474 11.6873 7.459 11.9589 7.64726 12.1291C7.8457 12.3085 7.96937 12.3334 7.99996 12.3334C8.03055 12.3334 8.15422 12.3085 8.35266 12.1291C8.54092 11.9589 8.75252 11.6873 8.95138 11.309C9.34773 10.5551 9.66663 9.42811 9.66663 8.00002C9.66663 6.57193 9.34773 5.44491 8.95138 4.69103C8.75252 4.31278 8.54092 4.04112 8.35266 3.87091C8.15422 3.6915 8.03055 3.66669 7.99996 3.66669C7.96937 3.66669 7.8457 3.6915 7.64726 3.87091C7.459 4.04112 7.2474 4.31278 7.04854 4.69103ZM6.97662 3.12913C7.26209 2.87104 7.61635 2.66669 7.99996 2.66669C8.38357 2.66669 8.73783 2.87104 9.0233 3.12913C9.31895 3.39642 9.59725 3.7706 9.83651 4.22568C10.3164 5.13846 10.6666 6.42811 10.6666 8.00002C10.6666 9.57193 10.3164 10.8616 9.83651 11.7744C9.59725 12.2294 9.31895 12.6036 9.0233 12.8709C8.73783 13.129 8.38357 13.3334 7.99996 13.3334C7.61635 13.3334 7.26209 13.129 6.97662 12.8709C6.68096 12.6036 6.40267 12.2294 6.16341 11.7744C5.68353 10.8616 5.33329 9.57193 5.33329 8.00002C5.33329 6.42811 5.68353 5.13846 6.16341 4.22568C6.40267 3.7706 6.68096 3.39642 6.97662 3.12913Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.83329 8.00002C2.83329 7.72388 3.05715 7.50002 3.33329 7.50002H12.6666C12.9428 7.50002 13.1666 7.72388 13.1666 8.00002C13.1666 8.27616 12.9428 8.50002 12.6666 8.50002H3.33329C3.05715 8.50002 2.83329 8.27616 2.83329 8.00002Z",fill:"currentColor"})]}))})),k=n(9383),w=n(6996),T=n(32484),S=function(e){var t=(0,w.U)().isMobile;return(0,d.jsx)(T.Z,(0,a.Z)((0,a.Z)({},e),{},{label:t?"":e.label}))},P=l.memo((function(e){var t=e.onPreviewWithoutHotReload,n=e.onNetworkPreview,r=e.onOpenDebugger,i=e.onHotReloadPreview,o=e.canDoNetworkPreview,a=e.isPreviewEnabled,s=e.hasPreviewsRunning,c=e.previewState,u=e.setPreviewOverride,p=e.openShareDialog,f=e.isSharingEnabled,h=(0,w.U)().isMobile,g=l.useCallback((function(e){return[{label:e._({id:"Start Network Preview (Preview over WiFi/LAN)"}),click:n,enabled:o},{label:e._({id:"Start Preview and Debugger"}),click:r},{label:e._({id:"Launch another preview in a new window"}),click:t,enabled:a&&s},{type:"separator"}].concat((0,v.Z)(c.overridenPreviewLayoutName?[{type:"checkbox",label:c.overridenPreviewExternalLayoutName?e._({id:"Start all previews from external layout {0}",values:{0:c.overridenPreviewExternalLayoutName}}):e._({id:"Start all previews from scene {0}",values:{0:c.overridenPreviewLayoutName}}),checked:c.isPreviewOverriden,click:function(){return u({isPreviewOverriden:!c.isPreviewOverriden,overridenPreviewLayoutName:c.overridenPreviewLayoutName,overridenPreviewExternalLayoutName:c.overridenPreviewExternalLayoutName})}},{type:"separator"}]:[]),[{label:c.previewExternalLayoutName?e._({id:"Use this external layout inside this scene to start all previews"}):e._({id:"Use this scene to start all previews"}),click:function(){return u({isPreviewOverriden:!0,overridenPreviewLayoutName:c.previewLayoutName,overridenPreviewExternalLayoutName:c.previewExternalLayoutName})},enabled:c.previewLayoutName!==c.overridenPreviewLayoutName||c.previewExternalLayoutName!==c.overridenPreviewExternalLayoutName}])}),[t,a,s,u,c,n,r,o]),x=l.useCallback((function(){p()}),[p]);return(0,d.jsxs)(C.pJ,{noMargin:!0,children:[(0,d.jsx)(k.Z,{primary:!0,onClick:i,disabled:!a,icon:s?(0,d.jsx)(y,{}):(0,d.jsx)(j,{}),label:h?null:s?(0,d.jsx)(b.Trans,{id:"Update"}):(0,d.jsx)(b.Trans,{id:"Preview"}),id:"toolbar-preview-button",buildMenuTemplate:g}),(0,d.jsx)(S,{primary:!0,onClick:x,disabled:!f,icon:(0,d.jsx)(Z,{}),label:(0,d.jsx)(b.Trans,{id:"Share"}),id:"toolbar-publish-button"})]})})),E=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 5.75C4 4.78351 4.78351 4 5.75 4H9.25C10.2165 4 11 4.78351 11 5.75V18.2502C11 19.2167 10.2165 20.0002 9.25 20.0002H5.75C4.78352 20.0002 4 19.2167 4 18.2502V5.75ZM5.75 5.5C5.61193 5.5 5.5 5.61193 5.5 5.75V18.2502C5.5 18.3883 5.61192 18.5002 5.75 18.5002H9.25C9.38808 18.5002 9.5 18.3883 9.5 18.2502V5.75C9.5 5.61193 9.38807 5.5 9.25 5.5H5.75Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 5.75C13 4.78352 13.7835 4 14.75 4H18.25C19.2165 4 20 4.78352 20 5.75V9.25025C20 10.2168 19.2165 11.0002 18.25 11.0002H14.75C13.7835 11.0002 13 10.2168 13 9.25025V5.75ZM14.75 5.5C14.6119 5.5 14.5 5.61192 14.5 5.75V9.25025C14.5 9.38828 14.6119 9.5002 14.75 9.5002H18.25C18.3881 9.5002 18.5 9.38828 18.5 9.25025V5.75C18.5 5.61192 18.3881 5.5 18.25 5.5H14.75Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 14.75C13 13.7835 13.7835 13 14.75 13H18.25C19.2165 13 20 13.7835 20 14.75V18.2502C20 19.2167 19.2165 20.0002 18.25 20.0002H14.75C13.7835 20.0002 13 19.2167 13 18.2502V14.75ZM14.75 14.5C14.6119 14.5 14.5 14.6119 14.5 14.75V18.2502C14.5 18.3883 14.6119 18.5002 14.75 18.5002H18.25C18.3881 18.5002 18.5 18.3883 18.5 18.2502V14.75C18.5 14.6119 18.3881 14.5 18.25 14.5H14.75Z",fill:"currentColor"})]}))})),I=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,d.jsx)("path",{d:"M6.75 19.25H17.25C18.3546 19.25 19.25 18.3546 19.25 17.25V9.82843C19.25 9.29799 19.0393 8.78929 18.6642 8.41421L15.5858 5.33579C15.2107 4.96071 14.702 4.75 14.1716 4.75H6.75C5.64543 4.75 4.75 5.64543 4.75 6.75V17.25C4.75 18.3546 5.64543 19.25 6.75 19.25Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),(0,d.jsx)("path",{d:"M8.75 19V15.75C8.75 15.1977 9.19772 14.75 9.75 14.75H14.25C14.8023 14.75 15.25 15.1977 15.25 15.75V19",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),(0,d.jsx)("path",{d:"M8.75 5V8.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}))})),M=n(51598),L=n(40243),A=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"-1 -1 18 18",fill:"none",children:[(0,d.jsx)("path",{d:"M0.833328 8C0.833328 4.04196 4.04195 0.833336 7.99999 0.833336C11.5931 0.833336 14.5678 3.47711 15.0866 6.92562C15.1277 7.19869 14.9396 7.45336 14.6666 7.49444C14.3935 7.53552 14.1388 7.34745 14.0978 7.07438C13.6515 4.10788 11.0909 1.83334 7.99999 1.83334C4.59424 1.83334 1.83333 4.59424 1.83333 8C1.83333 11.4057 4.59424 14.1667 7.99999 14.1667C10.2473 14.1667 12.2147 12.9645 13.2927 11.1667H11.3333C11.0572 11.1667 10.8333 10.9428 10.8333 10.6667C10.8333 10.3905 11.0572 10.1667 11.3333 10.1667H14.101C14.1084 10.1665 14.1159 10.1665 14.1234 10.1667H14.2667C14.7637 10.1667 15.1667 10.5696 15.1667 11.0667V14C15.1667 14.2761 14.9428 14.5 14.6667 14.5C14.3905 14.5 14.1667 14.2761 14.1667 14V11.6535C12.9182 13.7562 10.6243 15.1667 7.99999 15.1667C4.04195 15.1667 0.833328 11.958 0.833328 8Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M7.99999 3.5C8.27614 3.5 8.49999 3.72386 8.49999 4V7.5H12C12.2761 7.5 12.5 7.72386 12.5 8C12.5 8.27614 12.2761 8.5 12 8.5H7.99999C7.72385 8.5 7.49999 8.27614 7.49999 8V4C7.49999 3.72386 7.72385 3.5 7.99999 3.5Z",fill:"currentColor"})]}))})),F=n(86278),O=n(3798),R=n(69186),D=n(67674),_=n(23198),B=n(31318),N=function(e,t){return"unsavedChanges"===t?e.statusIndicator.error:"saving"===t?e.statusIndicator.warning:"latest"===t?e.palette.secondary:"opened"===t?e.statusIndicator.warning:e.statusIndicator.success},U=n(95562),H={chip:(0,a.Z)({display:"flex",alignItems:"center",padding:4,borderRadius:6,color:"#111111"},B.t)},V=(0,R.Z)((function(e){return(0,D.Z)({root:{borderRadius:3,"&:hover":{backdropFilter:"brightness(0.8)"},"&:disabled":{backdropFilter:"brightness(0.9)"}}})})),z=function(e){var t=e.openedVersionStatus,n=e.onQuit,r=e.disableQuitting,i=l.useContext(f.Z),o=V();return t?(0,d.jsx)(b.I18n,{children:function(e){var s=e.i18n;return(0,d.jsxs)("div",{style:(0,a.Z)((0,a.Z)({},H.chip),{},{backgroundColor:N(i,t.status)}),children:[(0,d.jsx)(F.Z,{noMargin:!0,color:"inherit",children:"saving"===t.status?s._({id:"Saving..."}):(t.version.label?(0,U.S)(t.version.label,20):s.date(Date.parse(t.version.createdAt),{dateStyle:"medium",timeStyle:"short"}))+("unsavedChanges"===t.status?"*":"")}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(O.Z,{classes:o,onClick:n,disabled:r,children:(0,d.jsx)(_.Z,{})})]})}}):null},W=l.memo((function(e){return(0,d.jsxs)(m,{firstChild:!0,children:[(0,d.jsx)(M.Z,{size:"small",id:"main-toolbar-project-manager-button",onClick:e.toggleProjectManager,tooltip:{id:"Project Manager"},color:"default",children:(0,d.jsx)(E,{})}),(0,d.jsx)(M.Z,{size:"small",id:"toolbar-history-button",onClick:e.onOpenVersionHistory,tooltip:{id:"Open version history"},color:"default",disabled:!1,children:(0,d.jsx)(A,{})}),(0,d.jsx)(M.Z,{size:"small",id:"toolbar-save-button",onClick:e.onSave,tooltip:{id:"Save project"},color:"default",disabled:!e.canSave,children:(0,d.jsx)(I,{})}),e.checkedOutVersionStatus&&(0,d.jsx)("div",{style:{marginRight:20},children:(0,d.jsx)(z,{onQuit:e.onQuitVersionHistory,disableQuitting:!e.canQuitVersionHistory,openedVersionStatus:e.checkedOutVersionStatus})})]})})),G=l.forwardRef((function(e,t){var n=l.useContext(f.Z),r=l.useState(null),i=(0,s.Z)(r,2),o=i[0],a=i[1];l.useImperativeHandle(t,(function(){return{setEditorToolbar:a}}));var c=l.useMemo((function(){return e.checkedOutVersionStatus?N(n,e.checkedOutVersionStatus.status):null}),[e.checkedOutVersionStatus,n]);return(0,d.jsxs)(g,{borderBottomColor:c,children:[e.showProjectButtons?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(W,{toggleProjectManager:e.toggleProjectManager,onSave:e.onSave,canSave:e.canSave,onOpenVersionHistory:e.onOpenVersionHistory,checkedOutVersionStatus:e.checkedOutVersionStatus,onQuitVersionHistory:e.onQuitVersionHistory,canQuitVersionHistory:e.canQuitVersionHistory}),(0,d.jsxs)(m,{children:[(0,d.jsx)(L.LZ,{}),(0,d.jsx)(P,{onPreviewWithoutHotReload:e.onPreviewWithoutHotReload,onOpenDebugger:e.onOpenDebugger,onNetworkPreview:e.onNetworkPreview,onHotReloadPreview:e.onHotReloadPreview,setPreviewOverride:e.setPreviewOverride,canDoNetworkPreview:e.canDoNetworkPreview,isPreviewEnabled:e.isPreviewEnabled,previewState:e.previewState,hasPreviewsRunning:e.hasPreviewsRunning,openShareDialog:e.openShareDialog,isSharingEnabled:e.isSharingEnabled}),(0,d.jsx)(L.LZ,{})]})]}):null,o||(0,d.jsx)(m,{})]})})),Y=n(2066),q=n(19174),X=l.memo((function(e){var t=e.fileMetadata,n=e.storageProvider,r=e.projectName,i=e.i18n,o=l.useContext(f.Z),a=l.useContext(q.Z).hasUnsavedChanges,s=a?" *":"",c="LocalFile"===n.internalName?t&&t.fileIdentifier:r,u=c&&!n.hiddenInSaveDialog?i._(n.name):null;return l.useEffect((function(){var e=["GDevelop 5",c?"".concat(c).concat(s):"",u].filter(Boolean).join(" - ");Y.ZP.setTitle(e),Y.ZP.setTitleBarColor(o.titlebar.backgroundColor)}),[c,s,a,o.titlebar.backgroundColor,u]),null})),K=n(81683),J=n(67835),Q=n(73818),$=n(90242),ee=n(57597),te=n(1773),ne=n(15930),re=[{name:"Visual Studio",themeName:"vs"},{name:"Visual Studio Dark",themeName:"vs-dark"},{name:"GitHub",themeName:"github",themeData:{base:"vs",inherit:!0,rules:[{foreground:"999988",fontStyle:"italic",token:"comment"},{foreground:"999999",fontStyle:"bold",token:"comment.block.preprocessor"},{foreground:"999999",fontStyle:"bold italic",token:"comment.documentation"},{foreground:"999999",fontStyle:"bold italic",token:"comment.block.documentation"},{foreground:"a61717",background:"e3d2d2",token:"invalid.illegal"},{fontStyle:"bold",token:"keyword"},{fontStyle:"bold",token:"storage"},{fontStyle:"bold",token:"keyword.operator"},{fontStyle:"bold",token:"constant.language"},{fontStyle:"bold",token:"support.constant"},{foreground:"445588",fontStyle:"bold",token:"storage.type"},{foreground:"445588",fontStyle:"bold",token:"support.type"},{foreground:"008080",token:"entity.other.attribute-name"},{foreground:"0086b3",token:"variable.other"},{foreground:"999999",token:"variable.language"},{foreground:"445588",fontStyle:"bold",token:"entity.name.type"},{foreground:"445588",fontStyle:"bold",token:"entity.other.inherited-class"},{foreground:"445588",fontStyle:"bold",token:"support.class"},{foreground:"008080",token:"variable.other.constant"},{foreground:"800080",token:"constant.character.entity"},{foreground:"990000",token:"entity.name.exception"},{foreground:"990000",token:"entity.name.function"},{foreground:"990000",token:"support.function"},{foreground:"990000",token:"keyword.other.name-of-parameter"},{foreground:"555555",token:"entity.name.section"},{foreground:"000080",token:"entity.name.tag"},{foreground:"008080",token:"variable.parameter"},{foreground:"008080",token:"support.variable"},{foreground:"009999",token:"constant.numeric"},{foreground:"009999",token:"constant.other"},{foreground:"dd1144",token:"string - string source"},{foreground:"dd1144",token:"constant.character"},{foreground:"009926",token:"string.regexp"},{foreground:"990073",token:"constant.other.symbol"},{fontStyle:"bold",token:"punctuation"},{foreground:"000000",background:"ffdddd",token:"markup.deleted"},{fontStyle:"italic",token:"markup.italic"},{foreground:"aa0000",token:"markup.error"},{foreground:"999999",token:"markup.heading.1"},{foreground:"000000",background:"ddffdd",token:"markup.inserted"},{foreground:"888888",token:"markup.output"},{foreground:"888888",token:"markup.raw"},{foreground:"555555",token:"markup.prompt"},{fontStyle:"bold",token:"markup.bold"},{foreground:"aaaaaa",token:"markup.heading"},{foreground:"aa0000",token:"markup.traceback"},{fontStyle:"underline",token:"markup.underline"},{foreground:"999999",background:"eaf2f5",token:"meta.diff.range"},{foreground:"999999",background:"eaf2f5",token:"meta.diff.index"},{foreground:"999999",background:"eaf2f5",token:"meta.separator"},{foreground:"999999",background:"ffdddd",token:"meta.diff.header.from-file"},{foreground:"999999",background:"ddffdd",token:"meta.diff.header.to-file"},{foreground:"4183c4",token:"meta.link"}],colors:{"editor.foreground":"#000000","editor.background":"#F8F8FF","editor.selectionBackground":"#B4D5FE","editor.lineHighlightBackground":"#FFFEEB","editorCursor.foreground":"#666666","editorWhitespace.foreground":"#BBBBBB"}}},{name:"Monokai",themeName:"monokai",themeData:{base:"vs-dark",inherit:!0,rules:[{foreground:"75715e",token:"comment"},{foreground:"e6db74",token:"string"},{foreground:"ae81ff",token:"constant.numeric"},{foreground:"ae81ff",token:"constant.language"},{foreground:"ae81ff",token:"constant.character"},{foreground:"ae81ff",token:"constant.other"},{foreground:"f92672",token:"keyword"},{foreground:"f92672",token:"storage"},{foreground:"66d9ef",fontStyle:"italic",token:"storage.type"},{foreground:"a6e22e",fontStyle:"underline",token:"entity.name.class"},{foreground:"a6e22e",fontStyle:"italic underline",token:"entity.other.inherited-class"},{foreground:"a6e22e",token:"entity.name.function"},{foreground:"fd971f",fontStyle:"italic",token:"variable.parameter"},{foreground:"f92672",token:"entity.name.tag"},{foreground:"a6e22e",token:"entity.other.attribute-name"},{foreground:"66d9ef",token:"support.function"},{foreground:"66d9ef",token:"support.constant"},{foreground:"66d9ef",fontStyle:"italic",token:"support.type"},{foreground:"66d9ef",fontStyle:"italic",token:"support.class"},{foreground:"f8f8f0",background:"f92672",token:"invalid"},{foreground:"f8f8f0",background:"ae81ff",token:"invalid.deprecated"},{foreground:"cfcfc2",token:"meta.structure.dictionary.json string.quoted.double.json"},{foreground:"75715e",token:"meta.diff"},{foreground:"75715e",token:"meta.diff.header"},{foreground:"f92672",token:"markup.deleted"},{foreground:"a6e22e",token:"markup.inserted"},{foreground:"e6db74",token:"markup.changed"},{foreground:"ae81ff",token:"constant.numeric.line-number.find-in-files - match"},{foreground:"e6db74",token:"entity.name.filename.find-in-files"}],colors:{"editor.foreground":"#F8F8F2","editor.background":"#272822","editor.selectionBackground":"#49483E","editor.lineHighlightBackground":"#3E3D32","editorCursor.foreground":"#F8F8F0","editorWhitespace.foreground":"#3B3A32","editorIndentGuide.activeBackground":"#9D550F","editor.selectionHighlightBorder":"#222218"}}},{name:"Solarized-Dark",themeName:"solarized-dark",themeData:{base:"vs-dark",inherit:!0,rules:[{foreground:"657b83",fontStyle:"italic",token:"comment"},{foreground:"2aa198",token:"string"},{foreground:"d30102",token:"string.regexp"},{foreground:"d33682",token:"constant.numeric"},{foreground:"268bd2",token:"variable.language"},{foreground:"268bd2",token:"variable.other"},{foreground:"859900",token:"keyword"},{foreground:"93a1a1",fontStyle:"bold",token:"storage"},{foreground:"cb4b16",token:"entity.name.class"},{foreground:"cb4b16",token:"entity.name.type.class"},{foreground:"268bd2",token:"entity.name.function"},{foreground:"859900",token:"punctuation.definition.variable"},{foreground:"d30102",token:"punctuation.section.embedded.begin"},{foreground:"d30102",token:"punctuation.section.embedded.end"},{foreground:"b58900",token:"constant.language"},{foreground:"b58900",token:"meta.preprocessor"},{foreground:"cb4b16",token:"support.function.construct"},{foreground:"cb4b16",token:"keyword.other.new"},{foreground:"cb4b16",token:"constant.character"},{foreground:"cb4b16",token:"constant.other"},{foreground:"6c71c4",token:"entity.other.inherited-class"},{foreground:"268bd2",fontStyle:"bold",token:"entity.name.tag"},{foreground:"657b83",token:"punctuation.definition.tag"},{foreground:"93a1a1",token:"entity.other.attribute-name"},{foreground:"268bd2",token:"support.function"},{foreground:"d30102",token:"punctuation.separator.continuation"},{foreground:"859900",token:"support.type"},{foreground:"859900",token:"support.class"},{foreground:"cb4b16",token:"support.type.exception"}],colors:{"editor.foreground":"#93A1A1","editor.background":"#002B36","editor.selectionBackground":"#073642","editor.lineHighlightBackground":"#073642","editorCursor.foreground":"#D30102","editorWhitespace.foreground":"#93A1A1"}}},{name:"Solarized-Light",themeName:"solarized-light",themeData:{base:"vs",inherit:!0,rules:[{foreground:"93a1a1",token:"comment"},{foreground:"2aa198",token:"string"},{foreground:"d30102",token:"string.regexp"},{foreground:"d33682",token:"constant.numeric"},{foreground:"268bd2",token:"variable.language"},{foreground:"268bd2",token:"variable.other"},{foreground:"859900",token:"keyword"},{foreground:"073642",fontStyle:"bold",token:"storage"},{foreground:"268bd2",token:"entity.name.class"},{foreground:"268bd2",token:"entity.name.type.class"},{foreground:"268bd2",token:"entity.name.function"},{foreground:"859900",token:"punctuation.definition.variable"},{foreground:"d30102",token:"punctuation.section.embedded.begin"},{foreground:"d30102",token:"punctuation.section.embedded.end"},{foreground:"b58900",token:"constant.language"},{foreground:"b58900",token:"meta.preprocessor"},{foreground:"d30102",token:"support.function.construct"},{foreground:"d30102",token:"keyword.other.new"},{foreground:"cb4b16",token:"constant.character"},{foreground:"cb4b16",token:"constant.other"},{foreground:"268bd2",fontStyle:"bold",token:"entity.name.tag"},{foreground:"93a1a1",token:"punctuation.definition.tag.begin"},{foreground:"93a1a1",token:"punctuation.definition.tag.end"},{foreground:"93a1a1",token:"entity.other.attribute-name"},{foreground:"268bd2",token:"support.function"},{foreground:"d30102",token:"punctuation.separator.continuation"},{foreground:"859900",token:"support.type"},{foreground:"859900",token:"support.class"},{foreground:"cb4b16",token:"support.type.exception"}],colors:{"editor.foreground":"#586E75","editor.background":"#FDF6E3","editor.selectionBackground":"#073642","editor.lineHighlightBackground":"#EEE8D5","editorCursor.foreground":"#000000","editorWhitespace.foreground":"#93A1A1"}}},{name:"Tomorrow",themeName:"tomorrow",themeData:{base:"vs",inherit:!0,rules:[{foreground:"8e908c",token:"comment"},{foreground:"666969",token:"keyword.operator.class"},{foreground:"666969",token:"constant.other"},{foreground:"666969",token:"source.php.embedded.line"},{foreground:"c82829",token:"variable"},{foreground:"c82829",token:"support.other.variable"},{foreground:"c82829",token:"string.other.link"},{foreground:"c82829",token:"string.regexp"},{foreground:"c82829",token:"entity.name.tag"},{foreground:"c82829",token:"entity.other.attribute-name"},{foreground:"c82829",token:"meta.tag"},{foreground:"c82829",token:"declaration.tag"},{foreground:"f5871f",token:"constant.numeric"},{foreground:"f5871f",token:"constant.language"},{foreground:"f5871f",token:"support.constant"},{foreground:"f5871f",token:"constant.character"},{foreground:"f5871f",token:"variable.parameter"},{foreground:"f5871f",token:"punctuation.section.embedded"},{foreground:"f5871f",token:"keyword.other.unit"},{foreground:"c99e00",token:"entity.name.class"},{foreground:"c99e00",token:"entity.name.type.class"},{foreground:"c99e00",token:"support.type"},{foreground:"c99e00",token:"support.class"},{foreground:"718c00",token:"string"},{foreground:"718c00",token:"constant.other.symbol"},{foreground:"718c00",token:"entity.other.inherited-class"},{foreground:"718c00",token:"markup.heading"},{foreground:"3e999f",token:"keyword.operator"},{foreground:"3e999f",token:"constant.other.color"},{foreground:"4271ae",token:"entity.name.function"},{foreground:"4271ae",token:"meta.function-call"},{foreground:"4271ae",token:"support.function"},{foreground:"4271ae",token:"keyword.other.special-method"},{foreground:"4271ae",token:"meta.block-level"},{foreground:"8959a8",token:"keyword"},{foreground:"8959a8",token:"storage"},{foreground:"8959a8",token:"storage.type"},{foreground:"ffffff",background:"c82829",token:"invalid"},{foreground:"ffffff",background:"4271ae",token:"meta.separator"},{foreground:"ffffff",background:"8959a8",token:"invalid.deprecated"}],colors:{"editor.foreground":"#4D4D4C","editor.background":"#FFFFFF","editor.selectionBackground":"#D6D6D6","editor.lineHighlightBackground":"#EFEFEF","editorCursor.foreground":"#AEAFAD","editorWhitespace.foreground":"#D1D1D1"}}},{name:"Tomorrow-Night",themeName:"tomorrow-night",themeData:{base:"vs-dark",inherit:!0,rules:[{foreground:"969896",token:"comment"},{foreground:"ced1cf",token:"keyword.operator.class"},{foreground:"ced1cf",token:"constant.other"},{foreground:"ced1cf",token:"source.php.embedded.line"},{foreground:"cc6666",token:"variable"},{foreground:"cc6666",token:"support.other.variable"},{foreground:"cc6666",token:"string.other.link"},{foreground:"cc6666",token:"string.regexp"},{foreground:"cc6666",token:"entity.name.tag"},{foreground:"cc6666",token:"entity.other.attribute-name"},{foreground:"cc6666",token:"meta.tag"},{foreground:"cc6666",token:"declaration.tag"},{foreground:"de935f",token:"constant.numeric"},{foreground:"de935f",token:"constant.language"},{foreground:"de935f",token:"support.constant"},{foreground:"de935f",token:"constant.character"},{foreground:"de935f",token:"variable.parameter"},{foreground:"de935f",token:"punctuation.section.embedded"},{foreground:"de935f",token:"keyword.other.unit"},{foreground:"f0c674",token:"entity.name.class"},{foreground:"f0c674",token:"entity.name.type.class"},{foreground:"f0c674",token:"support.type"},{foreground:"f0c674",token:"support.class"},{foreground:"b5bd68",token:"string"},{foreground:"b5bd68",token:"constant.other.symbol"},{foreground:"b5bd68",token:"entity.other.inherited-class"},{foreground:"b5bd68",token:"markup.heading"},{foreground:"8abeb7",token:"keyword.operator"},{foreground:"8abeb7",token:"constant.other.color"},{foreground:"81a2be",token:"entity.name.function"},{foreground:"81a2be",token:"meta.function-call"},{foreground:"81a2be",token:"support.function"},{foreground:"81a2be",token:"keyword.other.special-method"},{foreground:"81a2be",token:"meta.block-level"},{foreground:"b294bb",token:"keyword"},{foreground:"b294bb",token:"storage"},{foreground:"b294bb",token:"storage.type"},{foreground:"b294bb",token:"entity.name.tag.css"},{foreground:"ced2cf",background:"df5f5f",token:"invalid"},{foreground:"ced2cf",background:"82a3bf",token:"meta.separator"},{foreground:"ced2cf",background:"b798bf",token:"invalid.deprecated"}],colors:{"editor.foreground":"#C5C8C6","editor.background":"#1D1F21","editor.selectionBackground":"#373B41","editor.lineHighlightBackground":"#282A2E","editorCursor.foreground":"#AEAFAD","editorWhitespace.foreground":"#4B4E55"}}},{name:"Vibrant Ink",themeName:"vibrant-ink",themeData:{base:"vs-dark",inherit:!0,rules:[{foreground:"ffffff",background:"0f0f0f",token:"text"},{background:"000000",token:"source.ruby.rails.embedded.html"},{foreground:"ffffff",background:"101010",token:"text.html.ruby"},{foreground:"ccff33",background:"000000",token:"invalid"},{foreground:"ccff33",background:"000000",token:"invalid.deprecated"},{foreground:"99cc99",token:"constant.numeric"},{foreground:"ffffff",background:"000000",token:"source"},{foreground:"9933cc",token:"comment"},{foreground:"339999",token:"constant"},{foreground:"ff6600",token:"keyword"},{foreground:"edf8f9",token:"keyword.preprocessor"},{foreground:"ffffff",token:"keyword.preprocessor directive"},{foreground:"ffcc00",token:"entity.name.function"},{foreground:"ffcc00",token:"storage.type.function.js"},{fontStyle:"italic",token:"variable.parameter"},{foreground:"772cb7",background:"070707",token:"source comment.block"},{foreground:"ffffff",token:"variable.other"},{foreground:"ffcc00",token:"support.function"},{foreground:"66ff00",token:"string"},{foreground:"aaaaaa",token:"string constant.character.escape"},{foreground:"000000",background:"cccc33",token:"string.interpolated"},{foreground:"44b4cc",token:"string.regexp"},{foreground:"cccc33",token:"string.literal"},{foreground:"555555",token:"string.interpolated constant.character.escape"},{fontStyle:"underline",token:"entity.name.class"},{fontStyle:"underline",token:"support.class.js"},{fontStyle:"italic underline",token:"entity.other.inherited-class"},{foreground:"ff6600",token:"meta.tag.inline.any.html"},{foreground:"ff6600",token:"meta.tag.block.any.html"},{foreground:"99cc99",fontStyle:"italic",token:"entity.other.attribute-name"},{foreground:"dde93d",token:"keyword.other"},{foreground:"ff6600",token:"meta.selector.css"},{foreground:"ff6600",token:"entity.other.attribute-name.pseudo-class.css"},{foreground:"ff6600",token:"entity.name.tag.wildcard.css"},{foreground:"ff6600",token:"entity.other.attribute-name.id.css"},{foreground:"ff6600",token:"entity.other.attribute-name.class.css"},{foreground:"999966",token:"support.type.property-name.css"},{foreground:"ffffff",token:"keyword.other.unit.css"},{foreground:"ffffff",token:"constant.other.rgb-value.css"},{foreground:"ffffff",token:"constant.numeric.css"},{foreground:"ffffff",token:"support.function.event-handler.js"},{foreground:"ffffff",token:"keyword.operator.js"},{foreground:"cccc66",token:"keyword.control.js"},{foreground:"ffffff",token:"support.class.prototype.js"},{foreground:"ff6600",token:"object.property.function.prototype.js"}],colors:{"editor.foreground":"#FFFFFF","editor.background":"#0F0F0F","editor.selectionBackground":"#6699CC","editor.lineHighlightBackground":"#333333","editorCursor.foreground":"#FFFFFF","editorWhitespace.foreground":"#404040"}}},{name:"Nord-Dark",themeName:"nord-dark",themeData:{base:"vs-dark",inherit:!0,rules:[{foreground:"616e88",token:"comment"},{foreground:"616e88",fontStyle:"bold",token:"comment.block.preprocessor"},{foreground:"81a1c1",token:"comment.block.documentation"},{foreground:"d8dee9",background:"bf616a",token:"invalid.illegal"},{foreground:"81a1c1",token:"keyword"},{foreground:"81a1c1",token:"storage"},{foreground:"81a1c1",token:"keyword.operator"},{foreground:"81a1c1",token:"constant.language"},{foreground:"81a1c1",token:"support.constant"},{foreground:"8fbcbb",token:"storage.type"},{foreground:"8fBcbb",token:"entity.other.attribute-name"},{foreground:"d8dee9",token:"variable.other"},{foreground:"d8dee9",token:"variable.language"},{foreground:"8fbcbb",token:"entity.name.type"},{foreground:"8fbcbb",fontStyle:"bold",token:"entity.other.inherited-class"},{foreground:"8fbcbb",token:"support.class"},{foreground:"8fbcbb",token:"variable.other.constant"},{foreground:"88c0d0",token:"entity.name.function"},{foreground:"88c0d0",token:"support.function"},{foreground:"88c0d0",token:"entity.name.section"},{foreground:"5e81ac",token:"entity.name.tag"},{foreground:"d8dee9",token:"variable.parameter"},{foreground:"d8dee9",token:"support.variable"},{foreground:"b48ead",token:"constant.numeric"},{foreground:"b48ead",token:"constant.other"},{foreground:"a3be8c",token:"string - string source"},{foreground:"ebcb8b",token:"constant.character"},{foreground:"ebcb8b",token:"string.regexp"},{foreground:"d8dee9",fontStyle:"bold",token:"constant.other.symbol"},{fontground:"eceff4",token:"punctuation"},{foreground:"bf616a",token:"markup.deleted"},{fontStyle:"italic",token:"markup.italic"},{foreground:"88c0d0",token:"markup.heading"},{foreground:"a3be8c",token:"markup.inserted"},{fontStyle:"bold",token:"markup.bold"},{fontStyle:"underline",token:"markup.underline"},{foreground:"8fbcbb",token:"meta.diff.range"},{foreground:"8fbcbb",token:"meta.diff.header.from-file"}],colors:{"editorActiveLineNumber.foreground":"#d8dee9","editorCursor.foreground":"#d8dee9","editorHint.border":"#ebcb8b","editorHint.foreground":"#ebcb8b","editorIndentGuide.background":"#434c5e","editorIndentGuide.activeBackground":"#4c566a","editorLineNumber.foreground":"#4c566a","editorLineNumber.activeForeground":"#d8dee9","editorWhitespace.foreground":"#4c566a","editorWidget.background":"#2e3440","editorWidget.border":"#3b4252","editor.background":"#2e3440","editor.foreground":"#d8dee9","editor.hoverHighlightBackground":"#3b4252","editor.findMatchBackground":"#88c0d0","editor.findMatchHighlightBackground":"#88c0d0","editor.findRangeHighlightBackground":"#88c0d0","editor.lineHighlightBackground":"#3b4252","editor.lineHighlightBorder":"#3b4252","editor.inactiveSelectionBackground":"#434c5e","editor.selectionBackground":"#434c5e","editor.selectionHighlightBackground":"#434c5e","editor.rangeHighlightBackground":"#434c5e","editor.wordHighlightBackground":"#81a1c1","editor.wordHighlightStrongBackground":"#81a1c1","editorError.foreground":"#bf616a","editorError.border":"#bf616a","editorWarning.foreground":"#ebcb8b","editorWarning.border":"#ebcb8b","editorBracketMatch.background":"#2e3440","editorBracketMatch.border":"#88c0d0","editorCodeLens.foreground":"#4c566a","editorGroup.background":"#2e3440","editorGroup.border":"#3b4252","editorGroup.dropBackground":"#3b4252","editorGroupHeader.noTabsBackground":"#2e3440","editorGroupHeader.tabsBackground":"#2e3440","editorGroupHeader.tabsBorder":"#3b4252","editorGutter.background":"#2e3440","editorGutter.modifiedBackground":"#ebcb8b","editorGutter.addedBackground":"#a3be8c","editorGutter.deletedBackground":"#bf616a","editorHoverWidget.background":"#3b4252","editorHoverWidget.border":"#3b4252","editorLink.activeForeground":"#88c0d0","editorMarkerNavigation.background":"#5e81ac","editorMarkerNavigationError.background":"#bf616a","editorMarkerNavigationWarning.background":"#ebcb8b","editorOverviewRuler.border":"#3b4252","editorOverviewRuler.currentContentForeground":"#3b4252","editorOverviewRuler.incomingContentForeground":"#3b4252","editorOverviewRuler.findMatchForeground":"#88c0d0","editorOverviewRuler.rangeHighlightForeground":"#88c0d0","editorOverviewRuler.selectionHighlightForeground":"#88c0d0","editorOverviewRuler.wordHighlightForeground":"#88c0d0","editorOverviewRuler.wordHighlightStrongForeground":"#88c0d0","editorOverviewRuler.modifiedForeground":"#ebcb8b","editorOverviewRuler.addedForeground":"#a3be8c","editorOverviewRuler.deletedForeground":"#bf616a","editorOverviewRuler.errorForeground":"#bf616a","editorOverviewRuler.warningForeground":"#ebcb8b","editorOverviewRuler.infoForeground":"#81a1c1","editorRuler.foreground":"#434c5e","editorSuggestWidget.background":"#2e3440","editorSuggestWidget.border":"#3b4252","editorSuggestWidget.foreground":"#d8dee9","editorSuggestWidget.highlightForeground":"#88c0d0","editorSuggestWidget.selectedBackground":"#434c5e"}}},{name:"One-Dark",themeName:"one-dark",themeData:{base:"vs-dark",inherit:!0,rules:[{foreground:"abb2bf",token:"text"},{foreground:"abb2bf",token:"source"},{foreground:"adb7c9",token:"variable.parameter.function"},{foreground:"5f697a",fontStyle:" italic",token:"comment"},{foreground:"5f697a",fontStyle:" italic",token:"punctuation.definition.comment"},{foreground:"adb7c9",token:"none"},{foreground:"adb7c9",token:"keyword.operator"},{foreground:"cd74e8",token:"keyword"},{foreground:"eb6772",token:"variable"},{foreground:"5cb3fa",token:"entity.name.function"},{foreground:"5cb3fa",token:"meta.require"},{foreground:"5cb3fa",token:"support.function.any-method"},{foreground:"f0c678",token:"support.class"},{foreground:"f0c678",token:"entity.name.class"},{foreground:"f0c678",token:"entity.name.type.class"},{foreground:"adb7c9",token:"meta.class"},{foreground:"5cb3fa",token:"keyword.other.special-method"},{foreground:"cd74e8",token:"storage"},{foreground:"5ebfcc",token:"support.function"},{foreground:"9acc76",token:"string"},{foreground:"9acc76",token:"constant.other.symbol"},{foreground:"9acc76",token:"entity.other.inherited-class"},{foreground:"db9d63",token:"constant.numeric"},{foreground:"db9d63",token:"none"},{foreground:"db9d63",token:"none"},{foreground:"db9d63",token:"constant"},{foreground:"eb6772",token:"entity.name.tag"},{foreground:"db9d63",token:"entity.other.attribute-name"},{foreground:"db9d63",token:"entity.other.attribute-name.id"},{foreground:"db9d63",token:"punctuation.definition.entity"},{foreground:"cd74e8",token:"meta.selector"},{foreground:"db9d63",token:"none"},{foreground:"5cb3fa",token:"markup.heading punctuation.definition.heading"},{foreground:"5cb3fa",token:"entity.name.section"},{foreground:"db9d63",token:"keyword.other.unit"},{foreground:"f0c678",token:"markup.bold"},{foreground:"f0c678",token:"punctuation.definition.bold"},{foreground:"cd74e8",token:"markup.italic"},{foreground:"cd74e8",token:"punctuation.definition.italic"},{foreground:"9acc76",token:"markup.raw.inline"},{foreground:"eb6772",token:"string.other.link"},{foreground:"eb6772",token:"punctuation.definition.string.end.markdown"},{foreground:"db9d63",token:"meta.link"},{foreground:"eb6772",token:"markup.list"},{foreground:"db9d63",token:"markup.quote"},{foreground:"adb7c9",background:"515151",token:"meta.separator"},{foreground:"9acc76",token:"markup.inserted"},{foreground:"eb6772",token:"markup.deleted"},{foreground:"cd74e8",token:"markup.changed"},{foreground:"5ebfcc",token:"constant.other.color"},{foreground:"5ebfcc",token:"string.regexp"},{foreground:"5ebfcc",token:"constant.character.escape"},{foreground:"c94e42",token:"punctuation.section.embedded"},{foreground:"c94e42",token:"variable.interpolation"},{foreground:"ffffff",background:"e05252",token:"invalid.illegal"},{foreground:"2d2d2d",background:"f99157",token:"invalid.broken"},{foreground:"2c323d",background:"d27b53",token:"invalid.deprecated"},{foreground:"2c323d",background:"747369",token:"invalid.unimplemented"},{foreground:"eb6772",token:"source.json meta.structure.dictionary.json string.quoted.double.json"},{foreground:"9acc76",token:"source.json meta.structure.dictionary.json meta.structure.dictionary.value.json string.quoted.double.json"},{foreground:"eb6772",token:"source.json meta.structure.dictionary.json meta.structure.dictionary.value.json meta.structure.dictionary.json string.quoted.double.json"},{foreground:"9acc76",token:"source.json meta.structure.dictionary.json meta.structure.dictionary.value.json meta.structure.dictionary.json meta.structure.dictionary.value.json string.quoted.double.json"},{foreground:"cd74e8",token:"text.html.laravel-blade source.php.embedded.line.html entity.name.tag.laravel-blade"},{foreground:"cd74e8",token:"text.html.laravel-blade source.php.embedded.line.html support.constant.laravel-blade"},{foreground:"db9d63",token:"source.python meta.function.python meta.function.parameters.python variable.parameter.function.python"},{foreground:"5ebfcc",token:"source.python meta.function-call.python support.type.python"},{foreground:"cd74e8",token:"source.python keyword.operator.logical.python"},{foreground:"f0c678",token:"source.python meta.class.python punctuation.definition.inheritance.begin.python"},{foreground:"f0c678",token:"source.python meta.class.python punctuation.definition.inheritance.end.python"},{foreground:"db9d63",token:"source.python meta.function-call.python meta.function-call.arguments.python variable.parameter.function.python"},{foreground:"db9d63",token:"text.html.basic source.php.embedded.block.html support.constant.std.php"},{foreground:"f0c678",token:"text.html.basic source.php.embedded.block.html meta.namespace.php entity.name.type.namespace.php"},{foreground:"db9d63",token:"source.js meta.function.js support.constant.js"},{foreground:"cd74e8",token:"text.html.basic` source.php.embedded.block.html constant.other.php"},{foreground:"db9d63",token:"text.html.basic source.php.embedded.block.html support.other.namespace.php"},{foreground:"adb7c9",token:"text.tex.latex meta.function.environment.math.latex string.other.math.block.environment.latex meta.definition.label.latex variable.parameter.definition.label.latex"},{foreground:"cd74e8",fontStyle:" italic",token:"text.tex.latex meta.function.emph.latex markup.italic.emph.latex"},{foreground:"adb7c9",token:"source.js variable.other.readwrite.js"},{foreground:"adb7c9",token:"source.js meta.function-call.with-arguments.js variable.function.js"},{foreground:"adb7c9",token:"source.js meta.group.braces.round meta.group.braces.curly meta.function-call.method.without-arguments.js variable.function.js"},{foreground:"adb7c9",token:"source.js meta.group.braces.round meta.group.braces.curly variable.other.object.js"},{foreground:"adb7c9",token:"source.js meta.group.braces.round meta.group.braces.curly constant.other.object.key.js string.unquoted.label.js"},{foreground:"adb7c9",token:"source.js meta.group.braces.round meta.group.braces.curly constant.other.object.key.js punctuation.separator.key-value.js"},{foreground:"adb7c9",token:"source.js meta.group.braces.round meta.group.braces.curly meta.function-call.method.with-arguments.js variable.function.js"},{foreground:"adb7c9",token:"source.js meta.function-call.method.with-arguments.js variable.function.js"},{foreground:"adb7c9",token:"source.js meta.function-call.method.without-arguments.js variable.function.js"}],colors:{"editor.foreground":"#6c7079","editor.background":"#2B303B","editor.selectionBackground":"#bbccf51b","editor.inactiveSelectionBackground":"#bbccf51b","editor.lineHighlightBackground":"#8cc2fc0b","editorCursor.foreground":"#528bff","editorWhitespace.foreground":"#747369","editorIndentGuide.background":"#464c55","editorIndentGuide.activeBackground":"#464c55","editor.selectionHighlightBorder":"#bbccf51b"}}},{name:"Ros\xe9 Pine",themeName:"rose-pine",themeData:{base:"vs-dark",inherit:!0,rules:[{background:"#191724",foreground:"#e0def4",token:""},{background:"#191724",foreground:"#e0def4",token:"text"},{background:"#191724",foreground:"#e0def4",token:"source"},{foreground:"#c4a7e7",token:"pointsOfInterest"},{foreground:"#eb6f92",token:"invalid"},{fontStyle:"italic",token:"emphasis"},{fontStyle:"bold",token:"strong"},{foreground:"#e0def4",token:"variable"},{foreground:"#e0def4",token:"variable.predefined"},{foreground:"#ebbcba",token:"constant"},{foreground:"#6e6a86",token:"comment"},{foreground:"#ebbcba",token:"number"},{foreground:"#ebbcba",token:"number.hex"},{foreground:"#f6c177",token:"regexp"},{foreground:"#6e6a86",token:"annotation"},{foreground:"#e0def4",token:"type"},{foreground:"#908caa",token:"delimiter"},{foreground:"#908caa",token:"delimiter.html"},{foreground:"#908caa",token:"delimiter.xml"},{foreground:"#9ccfd8",token:"tag"},{foreground:"#9ccfd8",token:"tag.id.jade"},{foreground:"#9ccfd8",token:"tag.class.jade"},{foreground:"#9ccfd8",token:"meta.scss"},{foreground:"#9ccfd8",token:"metatag"},{foreground:"#9ccfd8",token:"metatag.content.html"},{foreground:"#9ccfd8",token:"metatag.html"},{foreground:"#9ccfd8",token:"metatag.xml"},{foreground:"#9ccfd8",token:"metatag.php"},{foreground:"#9ccfd8",token:"key"},{foreground:"#9ccfd8",token:"string.key.json"},{foreground:"#f6c177",token:"string.value.json"},{foreground:"#c4a7e7",token:"attribute.name"},{foreground:"#f6c177",token:"attribute.value"},{foreground:"#f6c177",token:"attribute.value.number"},{foreground:"#f6c177",token:"attribute.value.unit"},{foreground:"#f6c177",token:"attribute.value.html"},{foreground:"#f6c177",token:"attribute.value.xml"},{foreground:"#f6c177",token:"string"},{foreground:"#f6c177",token:"string.html"},{foreground:"#f6c177",token:"string.sql"},{foreground:"#f6c177",token:"string.yaml"},{foreground:"#31748f",token:"keyword"},{foreground:"#31748f",token:"keyword.json"},{foreground:"#31748f",token:"keyword.flow"},{foreground:"#31748f",token:"keyword.flow.scss"},{foreground:"#908caa",token:"operator.scss"},{foreground:"#908caa",token:"operator.sql"},{foreground:"#908caa",token:"operator.swift"},{foreground:"#908caa",token:"predefined.sql"},{foreground:"#ebbcba",token:"identifier"}],colors:{"activityBar.activeBorder":"#e0def4","activityBar.background":"#191724","activityBar.dropBorder":"#26233a","activityBar.foreground":"#e0def4","activityBar.inactiveForeground":"#908caa","activityBarBadge.background":"#ebbcba","activityBarBadge.foreground":"#191724","badge.background":"#ebbcba","badge.foreground":"#191724","banner.background":"#1f1d2e","banner.foreground":"#e0def4","banner.iconForeground":"#908caa","breadcrumb.activeSelectionForeground":"#ebbcba","breadcrumb.background":"#191724","breadcrumb.focusForeground":"#908caa","breadcrumb.foreground":"#6e6a86","breadcrumbPicker.background":"#1f1d2e","button.background":"#ebbcba","button.foreground":"#191724","button.hoverBackground":"#ebbcbae6","button.secondaryBackground":"#1f1d2e","button.secondaryForeground":"#e0def4","button.secondaryHoverBackground":"#26233a","charts.blue":"#9ccfd8","charts.foreground":"#e0def4","charts.green":"#31748f","charts.lines":"#908caa","charts.orange":"#ebbcba","charts.purple":"#c4a7e7","charts.red":"#eb6f92","charts.yellow":"#f6c177","checkbox.background":"#1f1d2e","checkbox.border":"#6e6a8633","checkbox.foreground":"#e0def4","debugExceptionWidget.background":"#1f1d2e","debugExceptionWidget.border":"#6e6a8633","debugIcon.breakpointCurrentStackframeForeground":"#908caa","debugIcon.breakpointDisabledForeground":"#908caa","debugIcon.breakpointForeground":"#908caa","debugIcon.breakpointStackframeForeground":"#908caa","debugIcon.breakpointUnverifiedForeground":"#908caa","debugIcon.continueForeground":"#908caa","debugIcon.disconnectForeground":"#908caa","debugIcon.pauseForeground":"#908caa","debugIcon.restartForeground":"#908caa","debugIcon.startForeground":"#908caa","debugIcon.stepBackForeground":"#908caa","debugIcon.stepIntoForeground":"#908caa","debugIcon.stepOutForeground":"#908caa","debugIcon.stepOverForeground":"#908caa","debugIcon.stopForeground":"#eb6f92","debugToolBar.background":"#1f1d2e","debugToolBar.border":"#26233a",descriptionForeground:"#908caa","diffEditor.border":"#26233a","diffEditor.diagonalFill":"#6e6a8666","diffEditor.insertedTextBackground":"#9ccfd826","diffEditor.removedTextBackground":"#eb6f9226","diffEditorOverview.insertedForeground":"#9ccfd880","diffEditorOverview.removedForeground":"#eb6f9280","dropdown.background":"#1f1d2e","dropdown.border":"#6e6a8633","dropdown.foreground":"#e0def4","dropdown.listBackground":"#1f1d2e","editor.background":"#191724","editor.findMatchBackground":"#6e6a8666","editor.findMatchHighlightBackground":"#6e6a8666","editor.findRangeHighlightBackground":"#6e6a8666","editor.findRangeHighlightBorder":"#0000","editor.focusedStackFrameHighlightBackground":"#6e6a8633","editor.foldBackground":"#1f1d2e","editor.foreground":"#e0def4","editor.hoverHighlightBackground":"#0000","editor.inactiveSelectionBackground":"#6e6a861a","editor.inlineValuesBackground":"#0000","editor.inlineValuesForeground":"#908caa","editor.lineHighlightBackground":"#6e6a861a","editor.lineHighlightBorder":"#0000","editor.linkedEditingBackground":"#1f1d2e","editor.rangeHighlightBackground":"#6e6a861a","editor.rangeHighlightBorder":"#0000","editor.selectionBackground":"#6e6a8633","editor.selectionForeground":"#e0def4","editor.selectionHighlightBackground":"#6e6a8633","editor.selectionHighlightBorder":"#0000","editor.snippetFinalTabstopHighlightBackground":"#6e6a8633","editor.snippetFinalTabstopHighlightBorder":"#1f1d2e","editor.snippetTabstopHighlightBackground":"#6e6a8633","editor.snippetTabstopHighlightBorder":"#1f1d2e","editor.stackFrameHighlightBackground":"#6e6a8633","editor.symbolHighlightBackground":"#6e6a8633","editor.symbolHighlightBorder":"#0000","editor.wordHighlightBackground":"#6e6a8633","editor.wordHighlightBorder":"#0000","editor.wordHighlightStrongBackground":"#6e6a8633","editor.wordHighlightStrongBorder":"#6e6a8633","editorBracketHighlight.foreground1":"#eb6f9280","editorBracketHighlight.foreground2":"#31748f80","editorBracketHighlight.foreground3":"#f6c17780","editorBracketHighlight.foreground4":"#9ccfd880","editorBracketHighlight.foreground5":"#ebbcba80","editorBracketHighlight.foreground6":"#c4a7e780","editorBracketMatch.background":"#0000","editorBracketMatch.border":"#908caa","editorBracketPairGuide.activeBackground1":"#31748f","editorBracketPairGuide.activeBackground2":"#ebbcba","editorBracketPairGuide.activeBackground3":"#c4a7e7","editorBracketPairGuide.activeBackground4":"#9ccfd8","editorBracketPairGuide.activeBackground5":"#f6c177","editorBracketPairGuide.activeBackground6":"#eb6f92","editorBracketPairGuide.background1":"#31748f80","editorBracketPairGuide.background2":"#ebbcba80","editorBracketPairGuide.background3":"#c4a7e780","editorBracketPairGuide.background4":"#9ccfd880","editorBracketPairGuide.background5":"#f6c17780","editorBracketPairGuide.background6":"#eb6f9280","editorCodeLens.foreground":"#ebbcba","editorCursor.background":"#e0def4","editorCursor.foreground":"#6e6a86","editorError.border":"#0000","editorError.foreground":"#eb6f92","editorGhostText.foreground":"#908caa","editorGroup.border":"#0000","editorGroup.dropBackground":"#1f1d2e","editorGroup.emptyBackground":"#0000","editorGroup.focusedEmptyBorder":"#0000","editorGroupHeader.noTabsBackground":"#0000","editorGroupHeader.tabsBackground":"#0000","editorGroupHeader.tabsBorder":"#0000","editorGutter.addedBackground":"#9ccfd8","editorGutter.background":"#0000","editorGutter.commentRangeForeground":"#908caa","editorGutter.deletedBackground":"#eb6f92","editorGutter.foldingControlForeground":"#c4a7e7","editorGutter.modifiedBackground":"#ebbcba","editorHint.border":"#0000","editorHint.foreground":"#908caa","editorHoverWidget.background":"#1f1d2e","editorHoverWidget.border":"#6e6a8680","editorHoverWidget.foreground":"#908caa","editorHoverWidget.highlightForeground":"#e0def4","editorHoverWidget.statusBarBackground":"#0000","editorIndentGuide.activeBackground":"#6e6a86","editorIndentGuide.background":"#6e6a8666","editorInfo.border":"#26233a","editorInfo.foreground":"#9ccfd8","editorInlayHint.background":"#26233a","editorInlayHint.foreground":"#908caa","editorInlayHint.parameterBackground":"#26233a","editorInlayHint.parameterForeground":"#c4a7e7","editorInlayHint.typeBackground":"#26233a","editorInlayHint.typeForeground":"#9ccfd8","editorLightBulb.foreground":"#31748f","editorLightBulbAutoFix.foreground":"#ebbcba","editorLineNumber.activeForeground":"#e0def4","editorLineNumber.foreground":"#908caa","editorLink.activeForeground":"#ebbcba","editorMarkerNavigation.background":"#1f1d2e","editorMarkerNavigationError.background":"#1f1d2e","editorMarkerNavigationInfo.background":"#1f1d2e","editorMarkerNavigationWarning.background":"#1f1d2e","editorOverviewRuler.addedForeground":"#9ccfd880","editorOverviewRuler.background":"#191724","editorOverviewRuler.border":"#6e6a8666","editorOverviewRuler.bracketMatchForeground":"#908caa","editorOverviewRuler.commonContentForeground":"#6e6a861a","editorOverviewRuler.currentContentForeground":"#6e6a8633","editorOverviewRuler.deletedForeground":"#eb6f9280","editorOverviewRuler.errorForeground":"#eb6f9280","editorOverviewRuler.findMatchForeground":"#6e6a8666","editorOverviewRuler.incomingContentForeground":"#c4a7e780","editorOverviewRuler.infoForeground":"#9ccfd880","editorOverviewRuler.modifiedForeground":"#ebbcba80","editorOverviewRuler.rangeHighlightForeground":"#6e6a8666","editorOverviewRuler.selectionHighlightForeground":"#6e6a8666","editorOverviewRuler.warningForeground":"#f6c17780","editorOverviewRuler.wordHighlightForeground":"#6e6a8633","editorOverviewRuler.wordHighlightStrongForeground":"#6e6a8666","editorPane.background":"#0000","editorRuler.foreground":"#6e6a8666","editorSuggestWidget.background":"#1f1d2e","editorSuggestWidget.border":"#0000","editorSuggestWidget.focusHighlightForeground":"#ebbcba","editorSuggestWidget.foreground":"#908caa","editorSuggestWidget.highlightForeground":"#ebbcba","editorSuggestWidget.selectedBackground":"#6e6a8633","editorSuggestWidget.selectedForeground":"#e0def4","editorSuggestWidget.selectedIconForeground":"#e0def4","editorUnnecessaryCode.border":"#0000","editorUnnecessaryCode.opacity":"#00000080","editorWarning.border":"#0000","editorWarning.foreground":"#f6c177","editorWhitespace.foreground":"#6e6a86","editorWidget.background":"#1f1d2e","editorWidget.border":"#26233a","editorWidget.foreground":"#908caa","editorWidget.resizeBorder":"#6e6a86",errorForeground:"#eb6f92","extensionBadge.remoteBackground":"#c4a7e7","extensionBadge.remoteForeground":"#191724","extensionButton.prominentBackground":"#ebbcba","extensionButton.prominentForeground":"#191724","extensionButton.prominentHoverBackground":"#ebbcbae6","extensionIcon.starForeground":"#ebbcba","extensionIcon.verifiedForeground":"#c4a7e7",focusBorder:"#6e6a8633",foreground:"#e0def4","gitDecoration.addedResourceForeground":"#9ccfd8","gitDecoration.conflictingResourceForeground":"#eb6f92","gitDecoration.deletedResourceForeground":"#908caa","gitDecoration.ignoredResourceForeground":"#6e6a86","gitDecoration.modifiedResourceForeground":"#ebbcba","gitDecoration.renamedResourceForeground":"#31748f","gitDecoration.stageDeletedResourceForeground":"#eb6f92","gitDecoration.stageModifiedResourceForeground":"#c4a7e7","gitDecoration.submoduleResourceForeground":"#f6c177","gitDecoration.untrackedResourceForeground":"#f6c177","icon.foreground":"#908caa","input.background":"#26233a80","input.border":"#6e6a8633","input.foreground":"#e0def4","input.placeholderForeground":"#908caa","inputOption.activeBackground":"#ebbcba","inputOption.activeBorder":"#0000","inputOption.activeForeground":"#191724","inputValidation.errorBackground":"#1f1d2e","inputValidation.errorBorder":"#6e6a8666","inputValidation.errorForeground":"#eb6f92","inputValidation.infoBackground":"#1f1d2e","inputValidation.infoBorder":"#6e6a8666","inputValidation.infoForeground":"#9ccfd8","inputValidation.warningBackground":"#1f1d2e","inputValidation.warningBorder":"#6e6a8666","inputValidation.warningForeground":"#9ccfd880","keybindingLabel.background":"#26233a","keybindingLabel.border":"#6e6a8666","keybindingLabel.bottomBorder":"#6e6a8666","keybindingLabel.foreground":"#c4a7e7","keybindingTable.headerBackground":"#26233a","keybindingTable.rowsBackground":"#1f1d2e","list.activeSelectionBackground":"#6e6a8633","list.activeSelectionForeground":"#e0def4","list.activeSelectionIconForeground":"#e0def4","list.deemphasizedForeground":"#908caa","list.dropBackground":"#1f1d2e","list.errorForeground":"#eb6f92","list.filterMatchBackground":"#1f1d2e","list.filterMatchBorder":"#ebbcba","list.focusBackground":"#6e6a8666","list.focusForeground":"#e0def4","list.focusOutline":"#6e6a8633","list.highlightForeground":"#ebbcba","list.hoverBackground":"#6e6a861a","list.hoverForeground":"#e0def4","list.inactiveFocusBackground":"#6e6a861a","list.inactiveSelectionBackground":"#1f1d2e","list.inactiveSelectionForeground":"#e0def4","list.inactiveSelectionIconForeground":"#908caa","list.invalidItemForeground":"#eb6f92","list.warningForeground":"#f6c177","listFilterWidget.background":"#1f1d2e","listFilterWidget.noMatchesOutline":"#eb6f92","listFilterWidget.outline":"#26233a","menu.background":"#1f1d2e","menu.border":"#6e6a861a","menu.foreground":"#e0def4","menu.selectionBackground":"#6e6a8633","menu.selectionBorder":"#26233a","menu.selectionForeground":"#e0def4","menu.separatorBackground":"#6e6a8666","menubar.selectionBackground":"#6e6a8633","menubar.selectionBorder":"#6e6a861a","menubar.selectionForeground":"#e0def4","merge.border":"#26233a","merge.commonContentBackground":"#6e6a8633","merge.commonHeaderBackground":"#6e6a8633","merge.currentContentBackground":"#f6c17780","merge.currentHeaderBackground":"#f6c17780","merge.incomingContentBackground":"#9ccfd880","merge.incomingHeaderBackground":"#9ccfd880","minimap.background":"#1f1d2e","minimap.errorHighlight":"#eb6f9280","minimap.findMatchHighlight":"#6e6a8633","minimap.selectionHighlight":"#6e6a8633","minimap.warningHighlight":"#f6c17780","minimapGutter.addedBackground":"#9ccfd8","minimapGutter.deletedBackground":"#eb6f92","minimapGutter.modifiedBackground":"#ebbcba","minimapSlider.activeBackground":"#6e6a8666","minimapSlider.background":"#6e6a8633","minimapSlider.hoverBackground":"#6e6a8633","notificationCenter.border":"#6e6a8633","notificationCenterHeader.background":"#1f1d2e","notificationCenterHeader.foreground":"#908caa","notificationLink.foreground":"#c4a7e7","notifications.background":"#1f1d2e","notifications.border":"#6e6a8633","notifications.foreground":"#e0def4","notificationsErrorIcon.foreground":"#eb6f92","notificationsInfoIcon.foreground":"#9ccfd8","notificationsWarningIcon.foreground":"#f6c177","notificationToast.border":"#6e6a8633","panel.background":"#1f1d2e","panel.border":"#0000","panel.dropBorder":"#26233a","panelInput.border":"#1f1d2e","panelSection.dropBackground":"#6e6a8633","panelSectionHeader.background":"#1f1d2e","panelSectionHeader.foreground":"#e0def4","panelTitle.activeBorder":"#6e6a8666","panelTitle.activeForeground":"#e0def4","panelTitle.inactiveForeground":"#908caa","peekView.border":"#26233a","peekViewEditor.background":"#1f1d2e","peekViewEditor.matchHighlightBackground":"#6e6a8666","peekViewResult.background":"#1f1d2e","peekViewResult.fileForeground":"#908caa","peekViewResult.lineForeground":"#908caa","peekViewResult.matchHighlightBackground":"#6e6a8666","peekViewResult.selectionBackground":"#6e6a8633","peekViewResult.selectionForeground":"#e0def4","peekViewTitle.background":"#26233a","peekViewTitleDescription.foreground":"#908caa","pickerGroup.border":"#6e6a8666","pickerGroup.foreground":"#c4a7e7","ports.iconRunningProcessForeground":"#ebbcba","problemsErrorIcon.foreground":"#eb6f92","problemsInfoIcon.foreground":"#9ccfd8","problemsWarningIcon.foreground":"#f6c177","progressBar.background":"#ebbcba","quickInput.background":"#1f1d2e","quickInput.foreground":"#908caa","quickInputList.focusBackground":"#6e6a8633","quickInputList.focusForeground":"#e0def4","quickInputList.focusIconForeground":"#e0def4","scrollbar.shadow":"#0000","scrollbarSlider.activeBackground":"#6e6a8666","scrollbarSlider.background":"#6e6a861a","scrollbarSlider.hoverBackground":"#6e6a8633","searchEditor.findMatchBackground":"#6e6a8633","selection.background":"#6e6a8666","settings.focusedRowBackground":"#1f1d2e","settings.headerForeground":"#e0def4","settings.modifiedItemIndicator":"#ebbcba","settings.focusedRowBorder":"#6e6a8633","settings.rowHoverBackground":"#1f1d2e","sideBar.background":"#191724","sideBar.dropBackground":"#1f1d2e","sideBar.foreground":"#908caa","sideBarSectionHeader.background":"#0000","sideBarSectionHeader.border":"#6e6a8633","statusBar.background":"#191724","statusBar.debuggingBackground":"#c4a7e7","statusBar.debuggingForeground":"#191724","statusBar.foreground":"#908caa","statusBar.noFolderBackground":"#191724","statusBar.noFolderForeground":"#908caa","statusBarItem.activeBackground":"#6e6a8666","statusBarItem.hoverBackground":"#6e6a8633","statusBarItem.prominentBackground":"#26233a","statusBarItem.prominentForeground":"#e0def4","statusBarItem.prominentHoverBackground":"#6e6a8633","statusBarItem.remoteBackground":"#191724","statusBarItem.remoteForeground":"#f6c177","statusBarItem.errorBackground":"#191724","statusBarItem.errorForeground":"#eb6f92","symbolIcon.arrayForeground":"#908caa","symbolIcon.classForeground":"#908caa","symbolIcon.colorForeground":"#908caa","symbolIcon.constantForeground":"#908caa","symbolIcon.constructorForeground":"#908caa","symbolIcon.enumeratorForeground":"#908caa","symbolIcon.enumeratorMemberForeground":"#908caa","symbolIcon.eventForeground":"#908caa","symbolIcon.fieldForeground":"#908caa","symbolIcon.fileForeground":"#908caa","symbolIcon.folderForeground":"#908caa","symbolIcon.functionForeground":"#908caa","symbolIcon.interfaceForeground":"#908caa","symbolIcon.keyForeground":"#908caa","symbolIcon.keywordForeground":"#908caa","symbolIcon.methodForeground":"#908caa","symbolIcon.moduleForeground":"#908caa","symbolIcon.namespaceForeground":"#908caa","symbolIcon.nullForeground":"#908caa","symbolIcon.numberForeground":"#908caa","symbolIcon.objectForeground":"#908caa","symbolIcon.operatorForeground":"#908caa","symbolIcon.packageForeground":"#908caa","symbolIcon.propertyForeground":"#908caa","symbolIcon.referenceForeground":"#908caa","symbolIcon.snippetForeground":"#908caa","symbolIcon.stringForeground":"#908caa","symbolIcon.structForeground":"#908caa","symbolIcon.textForeground":"#908caa","symbolIcon.typeParameterForeground":"#908caa","symbolIcon.unitForeground":"#908caa","symbolIcon.variableForeground":"#908caa","tab.activeBackground":"#6e6a861a","tab.activeForeground":"#e0def4","tab.activeModifiedBorder":"#9ccfd8","tab.border":"#0000","tab.hoverBackground":"#6e6a8633","tab.inactiveBackground":"#0000","tab.inactiveForeground":"#908caa","tab.inactiveModifiedBorder":"#9ccfd880","tab.lastPinnedBorder":"#6e6a86","tab.unfocusedActiveBackground":"#0000","tab.unfocusedHoverBackground":"#0000","tab.unfocusedInactiveBackground":"#0000","tab.unfocusedInactiveModifiedBorder":"#9ccfd880","terminal.ansiBlack":"#26233a","terminal.ansiBlue":"#9ccfd8","terminal.ansiBrightBlack":"#908caa","terminal.ansiBrightBlue":"#9ccfd8","terminal.ansiBrightCyan":"#ebbcba","terminal.ansiBrightGreen":"#31748f","terminal.ansiBrightMagenta":"#c4a7e7","terminal.ansiBrightRed":"#eb6f92","terminal.ansiBrightWhite":"#e0def4","terminal.ansiBrightYellow":"#f6c177","terminal.ansiCyan":"#ebbcba","terminal.ansiGreen":"#31748f","terminal.ansiMagenta":"#c4a7e7","terminal.ansiRed":"#eb6f92","terminal.ansiWhite":"#e0def4","terminal.ansiYellow":"#f6c177","terminal.dropBackground":"#6e6a8633","terminal.foreground":"#e0def4","terminal.selectionBackground":"#6e6a8633","terminal.tab.activeBorder":"#e0def4","terminalCursor.background":"#e0def4","terminalCursor.foreground":"#6e6a86","textBlockQuote.background":"#1f1d2e","textBlockQuote.border":"#6e6a8633","textCodeBlock.background":"#1f1d2e","textLink.activeForeground":"#c4a7e7e6","textLink.foreground":"#c4a7e7","textPreformat.foreground":"#f6c177","textSeparator.foreground":"#908caa","titleBar.activeBackground":"#191724","titleBar.activeForeground":"#908caa","titleBar.inactiveBackground":"#1f1d2e","titleBar.inactiveForeground":"#908caa","toolbar.activeBackground":"#6e6a8666","toolbar.hoverBackground":"#6e6a8633","tree.indentGuidesStroke":"#908caa","walkThrough.embeddedEditorBackground":"#191724","welcomePage.background":"#191724","welcomePage.buttonBackground":"#1f1d2e","welcomePage.buttonHoverBackground":"#26233a","widget.shadow":"#0101011a","window.activeBorder":"#1f1d2e","window.inactiveBorder":"#1f1d2e"}}}],ie=function(){return re},oe=n(50057),ae=n.n(oe),se=n(36262),le=n(28894),ce=n(71944),ue=n(55760),de=n(20914),pe={shortcutBox:{padding:15,textAlign:"center"}},fe=function(e){var t=l.useState(""),n=(0,s.Z)(t,2),r=n[0],i=n[1],o=l.useState(!1),a=(0,s.Z)(o,2),c=a[0],u=a[1],p=function(){c&&(r&&e.onSet(r),e.onClose())};return l.useEffect((function(){var e=function(e){e.preventDefault();var t=(0,ue.oN)(e);"keyup"!==e.type&&(u(t.isValid),i(t.shortcutString))};return document.addEventListener("keyup",e),document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",e)}}),[]),(0,d.jsxs)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Set shortcut"}),open:!0,maxWidth:"xs",actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),onClick:e.onClose},"Cancel"),(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Set shortcut"}),primary:!0,onClick:p,disabled:!c},"Set")],secondaryActions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Remove shortcut"}),onClick:function(){e.onSet(""),e.onClose()}},"Remove")],onRequestClose:e.onClose,onApply:p,children:[(0,d.jsx)(F.Z,{children:e.commandText}),(0,d.jsx)(de.Z,{variant:"outlined",style:pe.shortcutBox,background:"light",children:(0,d.jsx)(F.Z,{children:r?(0,ue.$3)(r):(0,d.jsx)(b.Trans,{id:"Press a shortcut combination..."})})})]})},he=n(24830),ge=n(83141),xe=n(33620),me=n(99415),ve=n(61701),be=n(8511),Ce=n(32072),je=n(75779),ye=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.79526 4.23503C10.0797 4.53617 10.0661 5.01085 9.76497 5.29526L5.8423 9L9.76497 12.7047C10.0661 12.9892 10.0797 13.4638 9.79526 13.765C9.51085 14.0661 9.03617 14.0797 8.73503 13.7953L4.23503 9.54526C4.08502 9.40358 4 9.20635 4 9C4 8.79366 4.08502 8.59642 4.23503 8.45474L8.73503 4.20474C9.03617 3.92033 9.51085 3.9339 9.79526 4.23503Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.75 9C4.75 8.58579 5.08579 8.25 5.5 8.25H15.25C17.8733 8.25 20 10.3767 20 13V19.25C20 19.6642 19.6642 20 19.25 20C18.8358 20 18.5 19.6642 18.5 19.25V13C18.5 11.2051 17.0449 9.75 15.25 9.75H5.5C5.08579 9.75 4.75 9.41422 4.75 9Z",fill:"currentColor"})]}))})),Ze=n(3781),ke={shortcutChip:{borderRadius:3}},we=function(e){return(0,d.jsxs)(xe.Z,{children:[(0,d.jsx)(me.Z,{primary:e.i18n._(Ce.Z[e.commandName].displayText)}),(0,d.jsx)(ve.Z,{children:(0,d.jsxs)(C.pJ,{alignItems:"center",children:[e.isClashing&&(0,d.jsx)(Ze.ZP,{title:(0,d.jsx)(b.Trans,{id:"This shortcut clashes with another action."}),children:(0,d.jsx)(je.Z,{})}),(0,d.jsx)(be.Z,{style:ke.shortcutChip,label:e.shortcutString||(0,d.jsx)(b.Trans,{id:"No shortcut"}),onClick:e.onEditShortcut,color:e.shortcutString?"secondary":"default"}),!e.isDefault&&(0,d.jsx)(M.Z,{onClick:e.onResetShortcut,tooltip:{id:"Reset to default"},size:"small",children:(0,d.jsx)(ye,{})})]})})]})},Te=function(e,t){return null==t?e:t},Se=function(e){var t=l.useState(null),n=(0,s.Z)(t,2),r=n[0],i=n[1],o=function(e){var t={},n={};return Object.keys(Ce.Z).filter((function(e){return!Ce.Z[e].noShortcut})).forEach((function(r){var i=Ce.Z[r].area;t[i]||(t[i]=[]),t[i].push(r);var o=e[r],a=ge.Z[r]||"",s=Te(a,o);""!==s&&(n[s]=(n[s]||[]).concat(r))})),[t,n]}(e.userShortcutMap),a=(0,s.Z)(o,2),c=a[0],u=a[1],p=(0,ue.$3)(e.userShortcutMap.OPEN_COMMAND_PALETTE||ge.Z.OPEN_COMMAND_PALETTE);return(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(he.Z,{kind:"info",identifier:"command-palette-shortcut",children:(0,d.jsx)(b.Trans,{id:"You can open the command palette by pressing {commandPaletteShortcut}.",values:{commandPaletteShortcut:p}})}),(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Reset all shortcuts to default"}),onClick:function(){Y.ZP.showConfirmDialog(e.i18n._({id:"Are you sure you want to reset all shortcuts to their default values?"}),"question")&&e.onReset()},fullWidth:!0}),(0,d.jsx)(ce.Z,{children:Object.keys(c).map((function(t){return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(F.Z,{size:"block-title",children:e.i18n._(Ce.R[t])}),c[t].map((function(t){var n=e.userShortcutMap[t],r=ge.Z[t]||"",o=Te(r,n),a=(0,ue.$3)(o),s=u[o],l=s&&s.length>1;return(0,d.jsx)(we,{i18n:e.i18n,shortcutString:a,commandName:t,isDefault:o===r,isClashing:l,onEditShortcut:function(){return i(t)},onResetShortcut:function(){return function(t){e.onEdit(t,ge.Z[t])}(t)}},t)}))]},t)}))}),r&&(0,d.jsx)(fe,{commandText:e.i18n._(Ce.Z[r].displayText),onClose:function(){return i(null)},onSet:function(t){e.onEdit(r,t)}})]})},Pe=n(60542),Ee=n.n(Pe),Ie=n(96591),Me=Ee().filter((function(e){return"en"!==e.languageCode&&("pseudo_LOCALE"!==e.languageCode||Y.ZP.isDev())})),Le=Me.filter((function(e){return e.translationRatio>.5})),Ae=Me.filter((function(e){return e.translationRatio<.5})),Fe=function(e){var t=e.translationRatio||0,n=(100*e.translationRatio).toFixed(0),r=t>0;return(0,d.jsx)($.Z,{value:e.languageCode,label:"".concat(e.languageNativeName," (").concat(e.languageName,")").concat(r?" - ~".concat(n,"%"):""),disabled:!r},e.languageCode)},Oe=function(e){var t=e.onLanguageChanged,n=(0,l.useContext)(se.ZP),r=n.values,i=n.setLanguage;return(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(L.x1,{noMargin:!0,expand:!0,children:(0,d.jsxs)(K.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Choose GDevelop language"}),value:r.language,onChange:function(e,n,r){i(r),t(r)},fullWidth:!0,children:[(0,d.jsx)($.Z,{value:"en",label:"English (default)"}),Le.map((function(e){return Fe(e)})),Ae.map((function(e){return Fe(e)}))]})}),(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"You can <0>help to translate GDevelop in your language</0>.",components:[(0,d.jsx)(Ie.Z,{href:"https://crowdin.com/project/gdevelop",onClick:function(){return Y.ZP.openExternalURL("https://crowdin.com/project/gdevelop")}})]})})]})},Re=n(67412),De=n(82936),_e=n(61651),Be=ae()("electron"),Ne=function(e){var t=e.i18n,n=e.onClose,r=(0,w.U)().isMobile,i=l.useState("preferences"),o=(0,s.Z)(i,2),a=o[0],c=o[1],u=l.useState(!1),p=(0,s.Z)(u,2),f=p[0],h=p[1],g=l.useContext(se.ZP),x=g.values,m=g.setThemeName,j=g.setCodeEditorThemeName,y=g.setAutoDownloadUpdates,Z=g.showAllAlertMessages,k=g.showAllTutorialHints,S=g.showAllAnnouncements,P=g.setAutoDisplayChangelog,E=g.setEventsSheetShowObjectThumbnails,I=g.setAutosaveOnPreview,M=g.setUseGDJSDevelopmentWatcher,A=g.setEventsSheetUseAssignmentOperators,O=g.getDefaultEditorMosaicNode,R=g.setDefaultEditorMosaicNode,D=g.setAutoOpenMostRecentProject,_=g.resetShortcutsToDefault,B=g.setShortcutForCommand,N=g.setIsMenuBarHiddenInPreview,U=g.setBackdropClickBehavior,H=g.setResourcesImporationBehavior,V=g.setIsAlwaysOnTopInPreview,z=g.setEventsSheetCancelInlineParameter,W=g.setShowCommunityExtensions,G=g.setShowEventBasedObjectsEditor,q=g.setShowDeprecatedInstructionWarning,X=g.setUse3DEditor,re=g.setNewProjectsDefaultFolder,oe=g.setUseShortcutToClosePreviewWindow,ae=g.setWatchProjectFolderFilesForLocalProjects,ce=l.useRef(x.use3DEditor);return(0,d.jsxs)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Preferences"}),actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Close"}),primary:!1,onClick:function(){return n({languageDidChange:f})}},"close")],onRequestClose:function(){return n({languageDidChange:f})},open:!0,maxWidth:"sm",fixedContent:(0,d.jsx)(le.m,{value:a,onChange:c,options:[{value:"preferences",label:(0,d.jsx)(b.Trans,{id:"Preferences"})},{value:"shortcuts",label:(0,d.jsx)(b.Trans,{id:"Keyboard Shortcuts"})}].concat((0,v.Z)(Be?[{value:"folders",label:(0,d.jsx)(b.Trans,{id:"Folders"})}]:[])),variant:r?"scrollable":void 0}),children:["preferences"===a&&(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Language"})}),(0,d.jsx)(Oe,{onLanguageChanged:function(){h(!0)}}),(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Appearance"})}),(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsx)(K.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"UI Theme"}),value:x.themeName,onChange:function(e,t,n){return m(n)},fullWidth:!0,children:Object.keys(ne.n).map((function(e){return(0,d.jsx)($.Z,{value:e,label:e},e)}))}),(0,d.jsx)(K.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Code editor Theme"}),value:x.codeEditorThemeName,onChange:function(e,t,n){return j(n)},fullWidth:!0,children:ie().map((function(e){return(0,d.jsx)($.Z,{value:e.themeName,label:e.name},e.themeName)}))})]}),(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"You can contribute and <0>create your own themes</0>.",components:[(0,d.jsx)(Ie.Z,{href:"https://github.com/4ian/GDevelop/blob/master/newIDE/README-themes.md",onClick:function(){return Y.ZP.openExternalURL("https://github.com/4ian/GDevelop/blob/master/newIDE/README-themes.md")}})]})})}),(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Layouts"})}),(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Reset Scene Editor layout"}),onClick:function(){return R("scene-editor",null)},disabled:!O("scene-editor")}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Reset Scene Editor (small window) layout"}),onClick:function(){return R("scene-editor-small",null)},disabled:!O("scene-editor-small")}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Reset Debugger layout"}),onClick:function(){return R("debugger",null)},disabled:!O("debugger")}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Reset Resource Editor layout"}),onClick:function(){return R("resources-editor",null)},disabled:!O("resources-editor")}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Reset Extension Editor layout"}),onClick:function(){return R("events-functions-extension-editor",null)},disabled:!O("events-functions-extension-editor")})]}),(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Dialogs"})}),(0,d.jsxs)(K.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Dialog backdrop click behavior"}),value:x.backdropClickBehavior,onChange:function(e,t,n){return U(n)},fullWidth:!0,children:[(0,d.jsx)($.Z,{value:"cancel",label:{id:"Cancel changes"}}),(0,d.jsx)($.Z,{value:"apply",label:{id:"Apply changes"}}),(0,d.jsx)($.Z,{value:"nothing",label:{id:"Do nothing"}})]}),!!Be&&(0,d.jsxs)(K.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Importing resources outside from the project folder"}),value:x.resourcesImporationBehavior,onChange:function(e,t,n){return H(n)},fullWidth:!0,children:[(0,d.jsx)($.Z,{value:"import",label:{id:"Copy them into the project folder"}}),(0,d.jsx)($.Z,{value:"relative",label:{id:"Keep their original location"}}),(0,d.jsx)($.Z,{value:"ask",label:{id:"Ask every time"}})]}),(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Updates"})}),(0,d.jsx)(ee.Z,{onToggle:function(e,t){return y(t)},toggled:x.autoDownloadUpdates,labelPosition:"right",label:(0,d.jsx)(b.Trans,{id:"Auto download and install updates (recommended)"})}),(0,d.jsx)(ee.Z,{onToggle:function(e,t){return P(t)},toggled:x.autoDisplayChangelog,labelPosition:"right",label:(0,d.jsx)(b.Trans,{id:"Display What's New when a new version is launched (recommended)"})}),(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Events Sheet"})}),(0,d.jsx)(ee.Z,{onToggle:function(e,t){return E(t)},toggled:x.eventsSheetShowObjectThumbnails,labelPosition:"right",label:(0,d.jsx)(b.Trans,{id:"Display object thumbnails in Events Sheets"})}),(0,d.jsx)(ee.Z,{onToggle:function(e,t){return A(t)},toggled:x.eventsSheetUseAssignmentOperators,labelPosition:"right",label:(0,d.jsx)(b.Trans,{id:"Display assignment operators in Events Sheets"})}),(0,d.jsxs)(K.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Escape key behavior when editing an parameter inline"}),value:x.eventsSheetCancelInlineParameter,onChange:function(e,t,n){z(n)},fullWidth:!0,children:[(0,d.jsx)($.Z,{value:"cancel",label:{id:"Cancel changes"}}),(0,d.jsx)($.Z,{value:"apply",label:{id:"Apply changes"}})]}),(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Embedded help and tutorials"})}),(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(L.x1,{children:(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Reset hidden embedded explanations"}),onClick:function(){return Z()},disabled:!Object.keys(x.hiddenAlertMessages).length})}),(0,d.jsx)(L.x1,{children:(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Reset hidden embedded tutorials"}),onClick:function(){return k()},disabled:!Object.keys(x.hiddenTutorialHints).length})}),(0,d.jsx)(L.x1,{children:(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Reset hidden announcements"}),onClick:function(){return S()},disabled:!Object.keys(x.hiddenAnnouncements).length})})]}),(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Advanced"})}),(0,d.jsx)(ee.Z,{onToggle:function(e,t){return I(t)},toggled:x.autosaveOnPreview,labelPosition:"right",label:(0,d.jsx)(b.Trans,{id:"Auto-save project on Preview"})}),(0,d.jsx)(ee.Z,{onToggle:function(e,t){return D(t)},toggled:x.autoOpenMostRecentProject,labelPosition:"right",label:(0,d.jsx)(b.Trans,{id:"Automatically re-open the project edited during last session"})}),(0,d.jsx)(ee.Z,{onToggle:function(e,t){return W(t)},toggled:x.showCommunityExtensions,labelPosition:"right",label:(0,d.jsx)(b.Trans,{id:"Show community (non reviewed) extensions in the list of extensions"})}),(0,d.jsx)(ee.Z,{onToggle:function(e,t){return G(t)},toggled:x.showEventBasedObjectsEditor,labelPosition:"right",label:(0,d.jsx)(b.Trans,{id:"Show custom objects in the extension editor (experimental)"})}),!!Be&&(0,d.jsx)(ee.Z,{onToggle:function(e,t){return ae(t)},toggled:x.watchProjectFolderFilesForLocalProjects,labelPosition:"right",label:(0,d.jsx)(b.Trans,{id:"Watch the project folder for file changes in order to refresh the resources used in the editor (images, 3D models, fonts, etc.)"})}),(0,d.jsx)(ee.Z,{onToggle:function(e,t){return q(t)},toggled:x.showDeprecatedInstructionWarning,labelPosition:"right",label:(0,d.jsx)(b.Trans,{id:"Show a warning on deprecated actions and conditions"})}),(0,d.jsx)(ee.Z,{onToggle:function(e,t){return X(t)},toggled:x.use3DEditor,labelPosition:"right",label:(0,d.jsx)(b.Trans,{id:"Show objects in 3D in the scene editor"})}),ce.current!==x.use3DEditor&&(0,d.jsx)(De.Z,{kind:"info",children:(0,d.jsx)(b.Trans,{id:"For the 3D change to take effect, close and reopen all currently opened scenes."})}),Be&&(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[(0,d.jsx)(ee.Z,{onToggle:function(e,t){return N(t)},toggled:x.isMenuBarHiddenInPreview,labelPosition:"right",label:(0,d.jsx)(b.Trans,{id:"Hide the menu bar in the preview window"})}),(0,d.jsx)(ee.Z,{onToggle:function(e,t){return V(t)},toggled:x.isAlwaysOnTopInPreview,labelPosition:"right",label:(0,d.jsx)(b.Trans,{id:"Always display the preview window on top of the editor"})}),(0,d.jsx)(ee.Z,{onToggle:function(e,t){return oe(t)},toggled:x.useShortcutToClosePreviewWindow,labelPosition:"right",label:(0,d.jsx)(b.Trans,{id:'Enable "Close project" shortcut ( {0} ) to close preview window',values:{0:(0,Re.Q)((0,ue.YK)(x.userShortcutMap.CLOSE_PROJECT||ge.Z.CLOSE_PROJECT))}})})]})}),Y.ZP.isDev()&&(0,d.jsx)(ee.Z,{onToggle:function(e,t){return M(t)},toggled:x.useGDJSDevelopmentWatcher,labelPosition:"right",label:(0,d.jsx)(b.Trans,{id:"Watch changes in game engine (GDJS) sources and auto import them (dev only)"})})]}),"shortcuts"===a&&(0,d.jsx)(L.x1,{expand:!0,children:(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,d.jsx)(Se,{i18n:t,userShortcutMap:x.userShortcutMap,onEdit:B,onReset:_})})}),Be&&"folders"===a&&(0,d.jsx)(C.ak,{noMargin:!0,children:(0,d.jsx)(Q.Z,{fullWidth:!0,value:x.newProjectsDefaultFolder,onChange:re,type:"default-workspace"})})]})},Ue=function(e){return(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Preferences"}),scope:"preferences",onClose:function(){return e.onClose({languageDidChange:!1})},children:(0,d.jsx)(Ne,(0,a.Z)({},e))})},He=n(52970),Ve=function(e){return"not-installed"===e?(0,d.jsx)(b.Trans,{id:"Not installed as an app. No updates available."}):"installed"===e?(0,d.jsx)(b.Trans,{id:"Installed as an app. No updates available."}):"update-installing"===e?(0,d.jsx)(b.Trans,{id:"An update is installing."}):"update-ready"===e?(0,d.jsx)(b.Trans,{id:"An update is ready to be installed. Close ALL GDevelop apps or tabs in your browser, then open it again."}):(0,d.jsx)(b.Trans,{id:"Unknown status."})},ze=n(14446),We=n.n(ze),Ge=n(45911),Ye=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We().get("".concat(Ge.bw.baseUrl,"/release"),{params:{last:4}});case 2:if(t=e.sent,n=t.data,Array.isArray(n)){e.next=6;break}throw new Error("Invalid releases");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qe=n(86578),Xe=n(78081),Ke=n(32832),Je=function(e){var t=e.releases,n=e.error,r=e.currentReleaseName,i=function(){return Y.ZP.openExternalURL("https://github.com/4ian/GDevelop/releases")};if(n)return(0,d.jsxs)(L.sg,{children:[(0,d.jsx)(L.x1,{children:(0,d.jsx)(De.Z,{kind:"warning",children:(0,d.jsx)(b.Trans,{id:"Please double check online the changes to make sure that you are aware of anything new in this version that would require you to adapt your project."})})}),(0,d.jsx)(L.x1,{children:(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"Unable to load the information about the latest GDevelop releases. Verify your internet connection or retry later."})})}),(0,d.jsx)(L.x1,{justifyContent:"center",children:(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"See the releases notes online"}),onClick:i})})]});if(!t)return(0,d.jsx)(Xe.Z,{});var o=function(e,t){return e.find((function(e){return e.name===t}))}(t,r),a=!!o&&-1!==(o.description||"").toLowerCase().indexOf("breaking change");return(0,d.jsxs)(L.sg,{noMargin:!0,children:[a&&(0,d.jsx)(De.Z,{kind:"warning",children:"This version of GDevelop has a breaking change. Please make sure to read the changes below to understand if any change or adaptation must be made to your project."}),t.map((function(e){return e.name?(0,d.jsx)(Ke.r,{source:"# Version "+e.name+"\n---\n"+(e.description||"Changes and new features description will be available soon."),isStandaloneText:!0},e.name):null})),(0,d.jsx)(L.x1,{justifyContent:"center",children:(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"See all the release notes"}),onClick:i})})]})},Qe=n(52578),$e=function(e){var t=e.onUpdated,n=l.useState(null),r=(0,s.Z)(n,2),i=r[0],o=r[1],a=l.useState(null),c=(0,s.Z)(a,2),u=c[0],p=c[1];return l.useEffect((function(){Ye().then((function(e){p(null),o(e),t&&t()})).catch((function(e){p(e),t&&t()}))}),[t]),(0,d.jsx)(Je,{releases:i,error:u,currentReleaseName:(0,Qe.r1)()})},et=ae()("electron"),tt={logo:{width:"100%",aspectRatio:"16 / 5",objectFit:"cover"}},nt=[{name:"Cl\xe9ment Pasteau",description:"Core development team",link:"https://github.com/ClementPasteau"},{name:"AlexandreSi",description:"Core development team",link:"https://github.com/AlexandreSi"},{name:"Victor Levasseur",description:"Numerous code contributions to GDevelop and community moderation"},{name:"Lizard-13",description:"Numerous code contributions to GDevelop and community moderation"},{name:"Christina 'Castpixel' Antoinette Neofotistou",description:"Art and assets for the 8-bit Space Shooter example.",link:"https://www.patreon.com/castpixel"},{name:"ale26reg",description:"Contributions to GDevelop"},{name:"dos1",description:"Contributions to GDevelop"},{name:"Aur\xe9lien Vivet",description:"Numerous code contributions to GDevelop and community management",link:"https://www.witly.fr"},{name:"Todor Imreorov",description:"Numerous code contributions to GDevelop"},{name:"brylie",description:"Contributions to GDevelop"},{name:"Nnarol",description:"Contributions to GDevelop"},{name:"wild-master",description:"Contributions to GDevelop"},{name:"RandomShaper",description:"Contributions to GDevelop"},{name:"RyanNerd",description:"Contributions to GDevelop"},{name:"greater",description:"Contributions to GDevelop"},{name:"triptych",description:"Contributions to GDevelop"},{name:"Wend1go",description:"Contributions to GDevelop, Tutorials, Examples"},{name:"mattiascibien",description:"Contributions to GDevelop"},{name:"araujo921",description:"Contributions to GDevelop"},{name:"ronnystandtke",description:"Contributions to GDevelop"},{name:"Thomas Flecy",description:"Contributions to GDevelop (original sound object extension)"},{name:"Arthur Pacaud (arthuro555)",description:"Numerous code contributions to GDevelop and community moderation",link:"https://forum.gdevelop.io/u/arthuro555/summary"},{name:"The Gem Dev",description:"Code contributions to GDevelop and tutorials on Youtube",link:"https://www.youtube.com/channel/UCsZ4Ue8c94YLJDbGRafCI5Q"},{name:"D8H",description:"Numerous code contributions to GDevelop",link:"https://github.com/D8H"},{name:"Harsimran Singh Virk",description:"Numerous code contributions to GDevelop",link:"https://github.com/HarsimranVirk"},{name:"Nilay Majorwar",description:"Numerous code contributions to GDevelop",link:"https://github.com/nilaymaj"},{name:"ddabrahim",description:"Examples for GDevelop",link:"https://gametemplates.itch.io/"},{name:"Gametemplates",description:"Examples bundled with GDevelop",link:"https://gametemplates.itch.io/"},{name:"Mats",description:"Tutorials, Examples"},{name:"erdo",description:"Tutorials, Examples"},{name:"Jubileuksen3",description:"Tutorials, Examples"},{name:"LucaTexas",description:"Tutorials, Examples"},{name:"Kink",description:"Forum moderator, tutorials, Examples"},{name:"RicoTrooper",description:"Tutorials"},{name:"kalel",description:"Tutorials"},{name:"mtarzaim",description:"Tutorials"},{name:"Darkhog",description:"Examples"},{name:"Ricardo Graca",description:"Tutorials, Examples"},{name:"Diego Schiavon",description:"Indiegogo Ubuntu contributor"},{name:"conceptgame",description:"Indiegogo super contributor"},{name:"Jose David Cuartas Correa",description:"Author of Digitopolis (a book on how to make games with GDevelop 4)"},{name:"Fran\xe7ois Dumortier",description:"GDevelop logo design",link:"http://www.fdumortier.com"},{name:"Constantine Shvetsov",description:"Design of all the awesome icons"},{name:"MillionthVector",description:"Assets of various examples"},{name:"Tristan Rhodes (Victris Games)",description:"High quality extensions for GDevelop",link:"https://www.youtube.com/channel/UClbq1M-D83t_bYhfa1mfyEQ"},{name:"Entropy",description:"High quality extensions and art packs for GDevelop",link:"https://github.com/Entr0py404"},{name:"FlokiTV",description:"High quality extensions for GDevelop",link:"https://github.com/FlokiTV"},{name:"Silver-Streak",description:"Examples, bug reports, testing of new features, providing community support to users, community moderation",link:"https://github.com/Silver-Streak"},{name:"Jurfix",description:"Discord moderation",link:"https://github.com/Jurfix"},{name:"Wishforge Games",description:"Making high quality tutorials",link:"https://www.wishforge.games/"},{name:"Sleeper Games",description:"Making the game feel starter",link:"https://twitter.com/Sleeper_Games"},{name:"VegeTato",description:"Extensions for GDevelop",link:"https://twitter.com/VegeTato_"},{name:"Leo Red",description:"Reviewing examples submissions",link:"https://github.com/Midhil457"},{name:"add_",description:"Extensions for GDevelop",link:"https://github.com/add00"},{name:"HelperWesley",description:"Examples and youtube content that is relevant to GDevelop",link:"https://www.youtube.com/channel/UC8RsU74-hU1pfNKHNMfiFfw"},{name:"UlisesFreitas",description:"Numerous examples and making external services that integrate with GDevelop games",link:"https://ulisesfreitas.itch.io/"},{name:"IttaloXD",description:"The GDevelop embassador in Brazil",link:"https://twitter.com/ittaloxd"},{name:"PANDAKO",description:"Translations in Japanese, extensions and blog",link:"https://gdevelop-jp.blogspot.com"}],rt=function(e){var t,n=e.onClose,r=e.updateStatus,a=l.useCallback((function(){Y.ZP.openExternalURL("https://gdevelop.io/page/contribute/")}),[]),c=l.useCallback((function(e){e&&Y.ZP.openExternalURL(e)}),[]),u=l.useState("about"),p=(0,s.Z)(u,2),f=p[0],h=p[1],g=l.useContext(se.ZP).checkUpdates,x="checking-for-update"===(t=r.status)?"Checking for update...":"update-available"===t?"A new update is available!":"update-not-available"===t?"No update available. You're using the latest version!":"error"===t?"Error while checking update":"download-progress"===t?"A new update is being downloaded...":"update-downloaded"===t?"A new update will be installed after you quit and relaunch GDevelop":"",m=function(e){return"update-available"===e?"Update GDevelop to latest version":"Check again for new updates"}(r.status),v=function(){var e=l.useState("unknown"),t=(0,s.Z)(e,2),n=t[0],r=t[1];return l.useEffect((function(){(0,o.Z)((0,i.Z)().mark((function e(){var t,n,o,a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.serviceWorker){e.next=8;break}return t=navigator,n=t.serviceWorker,o=!!n.controller,r(o?"installed":"not-installed"),e.next=6,n.getRegistration();case 6:(a=e.sent)&&(s=a.installing)&&("installed"===s.state?r("update-ready"):r("update-installing"));case 8:case"end":return e.stop()}}),e)})))()}),[]),n}();return(0,d.jsxs)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"About GDevelop"}),actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"GDevelop Website"}),primary:!1,onClick:function(){return Y.ZP.openExternalURL("https://gdevelop.io")}},"website"),(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Close"}),primary:!1,onClick:n},"close")],secondaryActions:"changelog"===f?[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"See all release notes"}),primary:!1,onClick:function(){return Y.ZP.openExternalURL("https://github.com/4ian/GDevelop/releases")}},"see-all")]:void 0,onRequestClose:n,open:!0,maxWidth:"sm",fixedContent:(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)("img",{src:"res/GD-logo.png",alt:"GDevelop logo",style:tt.logo}),(0,d.jsx)(le.m,{value:f,onChange:h,options:[{value:"about",label:(0,d.jsx)(b.Trans,{id:"About GDevelop"})},{value:"changelog",label:(0,d.jsx)(b.Trans,{id:"What's new?"})},{value:"contributors",label:(0,d.jsx)(b.Trans,{id:"Contributors"})}]})]}),children:["about"===f&&(0,d.jsx)(l.Fragment,{children:(0,d.jsx)(L.x1,{children:(0,d.jsxs)(C.ak,{children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"GDevelop is a full-featured, open-source game engine. Build and publish games for any mobile, desktop or web game store. It's super fast, easy to learn and powered by a community making it better every day."})}),(0,d.jsxs)(F.Z,{allowSelection:!0,children:[(0,d.jsx)(b.Trans,{id:"This version of GDevelop is:"})," ",(0,Qe.r1)()," ","(editor full version: ",(0,Qe.Us)(),", core version:"," ",(0,Qe.Hf)(),")"]}),(0,d.jsx)(F.Z,{size:"sub-title",children:(0,d.jsx)(b.Trans,{id:"Updates"})}),et&&x?(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(F.Z,{children:x}),(0,d.jsx)(J.Z,{label:m,onClick:function(){return g(function(e){return"update-available"===e}(r.status))}})]}):(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"No information about available updates."})}),!et&&(0,d.jsx)(F.Z,{children:Ve(v)})]})})}),"changelog"===f&&(0,d.jsx)(L.sg,{children:(0,d.jsx)($e,{})}),"contributors"===f&&(0,d.jsxs)(l.Fragment,{children:[(0,d.jsxs)(L.sg,{children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:'GDevelop was created by Florian "4ian" Rival.'})}),(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Contributors, in no particular order:"})})]}),(0,d.jsx)(He.aV,{children:nt.map((function(e){return(0,d.jsx)(He.HC,{primaryText:e.name,secondaryText:e.description,secondaryTextLines:e.description.length<30?1:2,displayLinkButton:!!e.link,onOpenLink:function(){return c(e.link||"")}},e.name)}))}),(0,d.jsxs)(L.sg,{expand:!0,children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Thanks to all users of GDevelop! There must be missing tons of people, please send your name if you've contributed and you're not listed."})}),(0,d.jsx)(L.x1,{alignItems:"center",justifyContent:"center",children:(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Contribute to GDevelop"}),onClick:a})})]})]})]})},it=function(e){return(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"About dialog"}),scope:"about",onClose:e.onClose,children:(0,d.jsx)(rt,(0,a.Z)({},e))})},ot=n(15671),at=n(43144),st=n(6946),lt=n(65056),ct=n.g.gd,ut=function(e){var t=e.serializableObject,n=e.useProjectToUnserialize,r=e.onCancel,a=e.resetThenClearPersistentUuid,s=l.useRef(null),c=l.useRef(0),u=(0,lt.Z)().showConfirmation,d=l.useContext(se.ZP).values.backdropClickBehavior;l.useEffect((function(){return s.current&&(s.current.delete(),s.current=null),a&&t.resetPersistentUuid(),s.current=new ct.SerializerElement,t.serializeTo(s.current),function(){s.current&&(s.current.delete(),s.current=null)}}),[t,a]);var p=l.useCallback((function(){if(!s.current)throw new Error("serializedElementRef should always be non null.");return s.current}),[]),f=l.useCallback((function(){c.current++}),[]),h=l.useCallback((function(){return c.current>0}),[]);return{onCancelChanges:l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var o,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=s.current){e.next=3;break}return e.abrupt("return");case 3:if(l=!1,!(!("cancel"===d)&&c.current>=1)){e.next=13;break}return e.next=9,u({title:{id:"Cancel your changes?"},message:{id:"All your changes will be lost. Are you sure you want to cancel?"},confirmButtonLabel:{id:"Cancel"},dismissButtonLabel:{id:"Continue editing"}});case 9:e.sent&&(l=!0),e.next=14;break;case 13:l=!0;case 14:if(l){e.next=16;break}return e.abrupt("return");case 16:n?t.unserializeFrom(n,o):t.unserializeFrom(o),a&&t.clearPersistentUuid(),r();case 19:case"end":return e.stop()}}),e)}))),[t,n,r,u,d,a]),notifyOfChange:f,hasUnsavedChanges:h,getOriginalContentSerializedElement:p}};function dt(e){var t=e.launchProjectDataOnlyPreview,n=e.hasPreviewsRunning,r=(0,w.U)().isMobile,i=n?(0,d.jsx)(y,{}):(0,d.jsx)(j,{}),o=n?(0,d.jsx)(b.Trans,{id:"Apply changes to preview"}):(0,d.jsx)(b.Trans,{id:"Run a preview"});return r?(0,d.jsx)(M.Z,{onClick:t,size:"small",children:i}):(0,d.jsx)(J.Z,{leftIcon:i,label:o,onClick:t})}var pt,ft,ht,gt=n(3429),xt=n(50301),mt=n(40041),vt=n(1491),bt=n(37571),Ct=n(84900),jt=n(25638),yt=n(62572),Zt=n(43228),kt=n(65752),wt=n(68196),Tt=n(2632),St=n(86268),Pt=n(38501),Et=n(18455),It=n(79431),Mt=ae()("electron"),Lt=Mt?Mt.clipboard:null,At="",Ft=function(e){return"GDEVELOP_"+e+"_CLIPBOARD_KIND-jsBdHbLy912y8Rc"},Ot=function(){function e(){(0,ot.Z)(this,e)}return(0,at.Z)(e,null,[{key:"extractNumberProperty",value:function(e,t){if(!this.extractObject(e))return null;var n=e[t];return"number"!==typeof n?null:n}},{key:"extractStringProperty",value:function(e,t){if(!this.extractObject(e))return null;var n=e[t];return"string"!==typeof n?null:n}},{key:"extractBooleanProperty",value:function(e,t){if(!this.extractObject(e))return null;var n=e[t];return"boolean"!==typeof n?null:n}},{key:"extractObjectProperty",value:function(e,t){if(!this.extractObject(e))return null;var n=e[t];return this.extractObject(n)}},{key:"extractArrayProperty",value:function(e,t){if(!this.extractObject(e))return null;var n=e[t];return this.extractArray(n)}},{key:"extractObject",value:function(e){return null===e||void 0===e||"object"!==typeof e||Array.isArray(e)?null:e}},{key:"extractArray",value:function(e){return null!==e&&void 0!==e&&"object"===typeof e&&Array.isArray(e)?e:null}}]),e}(),Rt=function(){function e(){(0,ot.Z)(this,e)}return(0,at.Z)(e,null,[{key:"set",value:function(e,t){var n=JSON.stringify({"000kind":Ft(e),content:t});Lt?Lt.writeText(n):At=n}},{key:"has",value:function(e){return 12===(Lt?Lt.readText():At).indexOf(Ft(e))}},{key:"get",value:function(t){if(!e.has(t))return null;var n="";n=Lt?Lt.readText():At;try{return JSON.parse(n).content}catch(r){return console.warn("The clipboard content is not valid JSON"),null}}}]),e}(),Dt=n(41006),_t=function(e,t){var n=t.historyMaxSize;return{previousActions:[],currentValue:(0,Dt.XH)(e),futureActions:[],maxSize:n}},Bt=function(e){return!!e.futureActions.length},Nt=function(e){return!!e.previousActions.length},Ut=function(e,t,n,r){var i=(0,Dt.XH)(t),o=[].concat((0,v.Z)(e.previousActions),[{type:n,valueBeforeChange:e.currentValue,changeContext:r}]);return o.length>e.maxSize&&o.splice(0,o.length-e.maxSize),(0,a.Z)((0,a.Z)({},e),{},{currentValue:i,previousActions:o,futureActions:[]})},Ht=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!e.previousActions.length)return e;var r=e.previousActions[e.previousActions.length-1],i=r.valueBeforeChange;(0,Dt.qx)(t,i,"unserializeFrom",n);var o=e.previousActions.slice(0,-1),s=[].concat((0,v.Z)(e.futureActions),[{type:r.type,changeContext:r.changeContext,valueAfterChange:e.currentValue}]);return(0,a.Z)((0,a.Z)({},e),{},{previousActions:o,futureActions:s,currentValue:i})},Vt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!e.futureActions.length)return e;var r=e.futureActions[e.futureActions.length-1],i=r.valueAfterChange;(0,Dt.qx)(t,i,"unserializeFrom",n);var o=[].concat((0,v.Z)(e.previousActions),[{type:r.type,changeContext:r.changeContext,valueBeforeChange:e.currentValue}]),s=e.futureActions.slice(0,-1);return(0,a.Z)((0,a.Z)({},e),{},{previousActions:o,futureActions:s,currentValue:i})},zt=n.g.gd,Wt=function(e,t,n,r,i){var o=(0,It.Z)(t,(function(t){return e.has(t)||!!i&&i.has(t)}),n?"CopyOf":void 0),a=new zt.Variable;n?((0,Dt.qx)(a,n),a.resetPersistentUuid()):a.setString("");var s=e.insert(o,a,r);return a.delete(),{name:o,variable:s}},Gt=function(e){return(0,Et.mapFor)(0,e.count(),(function(t){var n=e.getAt(t);return Yt(n)&&n.getChildrenCount()>0})).some(Boolean)},Yt=function(e){return!zt.Variable.isPrimitive(e.getType())},qt=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()},Xt=n.g.gd,Kt="$!",Jt="$.$",Qt=function(e){return e[e.length-1]?e[e.length-1].variable:null},$t=function(e){return e[e.length-1]?e[e.length-1].nodeId:null},en=function(e,t){return t.map((function(e){return e.variable})).includes(e)},tn=function(e,t){for(var n,r=e.split(Jt),i=null,o=null,a=null,s=[],l=-1;l<r.length-1;){if(a=r[l+=1],0===l&&a.startsWith(Kt)&&(a=(n=a).slice(2,n.length)),i)if(i.getType()===Xt.Variable.Array){var c=parseInt(a,10);if(c>=i.getChildrenCount())return{variable:null,lineage:s,depth:l,name:null};o=i.getAtIndex(c)}else{if(!i.hasChild(a))return{variable:null,lineage:s,depth:l,name:null};o=i.getChild(a)}else o=t.get(a);l<r.length-1&&s.push({nodeId:r.slice(0,l+1).join(Jt),name:a,variable:o}),i=o}return{variable:o,name:a,depth:l,lineage:s}},nn=function(e,t,n){var r=(0,v.Z)(e),i=r.indexOf(t),o=r.map((function(e,n){return e.startsWith("".concat(t).concat(Jt))?n:null})),a=t.split(Jt),s=a[a.length-1];return[i].concat((0,v.Z)(o)).forEach((function(e){if(!(null===e||e<0)){var t=r[e].split(Jt);t[t.indexOf(s)]=n,r.splice(e,1,t.join(Jt))}})),r},rn=function(e,t){var n=t.lineage,r=Qt(n),i=e.lineage,o=Qt(i);if(o&&r){if(r.getType()===Xt.Variable.Structure&&o.getType()===Xt.Variable.Structure&&o!==r)return"FromStructureToAnotherStructure";if(r.getType()===Xt.Variable.Structure&&o===r)return"InsideSameStructure";if(r.getType()===Xt.Variable.Array&&o.getType()===Xt.Variable.Array&&o!==r)return"FromArrayToAnotherArray";if(r.getType()===Xt.Variable.Array&&o===r)return"InsideSameArray";if(r.getType()===Xt.Variable.Array&&o.getType()===Xt.Variable.Structure)return"FromStructureToArray";if(r.getType()===Xt.Variable.Structure&&o.getType()===Xt.Variable.Array)return"FromArrayToStructure"}return o||r?!o&&r&&r.getType()===Xt.Variable.Structure?"TopLevelToStructure":!o&&r&&r.getType()===Xt.Variable.Array?"TopLevelToArray":o&&!r&&o.getType()===Xt.Variable.Structure?"StructureToTopLevel":o&&!r&&o.getType()===Xt.Variable.Array?"ArrayToTopLevel":null:"InsideTopLevel"},on=function e(t){var n,r,i=t.variable,o=t.variableName,a=t.nodeId,s=t.searchText,l=t.acc;switch(i.getType()){case Xt.Variable.Boolean:return qt(o).includes(s)?[a]:[];case Xt.Variable.String:return qt(o).includes(s)||qt(i.getString()).includes(s)?[a]:[];case Xt.Variable.Number:return qt(o).includes(s)||i.getValue().toString().includes(s)?[a]:[];case Xt.Variable.Array:return n=(0,v.Z)(l),qt(o).includes(s)&&n.push(a),r=(0,Et.mapFor)(0,i.getChildrenCount(),(function(t){var r=i.getAtIndex(t);return e({variable:r,variableName:"",nodeId:"".concat(a).concat(Jt).concat(t),searchText:s,acc:n})})).flat(),[].concat((0,v.Z)(n),(0,v.Z)(r));case Xt.Variable.Structure:return n=(0,v.Z)(l),qt(o).includes(s)&&n.push(a),r=i.getAllChildrenNames().toJSArray().map((function(t){var n=i.getChild(t);return Array.from(new Set(e({variable:n,variableName:t,nodeId:"".concat(a).concat(Jt).concat(t),searchText:s,acc:l})))})).flat(),[].concat((0,v.Z)(n),(0,v.Z)(r));default:return[]}},an=function(e,t,n){return(0,Et.mapFor)(0,e.count(),(function(r){var i=e.getAt(r),o=e.getNameAt(r);return on({variable:i,variableName:o,nodeId:n?"".concat(n).concat(o):o,searchText:t,acc:[]})})).flat()},sn=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{viewBox:"0 0 12 8",children:[(0,d.jsx)("path",{d:"M0.0850851 6.76784L2.39304 1.55591C2.55395 1.19651 2.84708 0.978882 3.24447 0.978882H3.3296C3.72674 0.978882 4.01061 1.19647 4.17135 1.55591L6.47939 6.76784C6.52669 6.8719 6.55513 6.96645 6.55513 7.06109C6.55513 7.44889 6.25241 7.76103 5.86457 7.76103C5.52407 7.76103 5.29701 7.56242 5.16463 7.25966L4.7201 6.21925H1.80671L1.34321 7.30704C1.22021 7.59078 0.974341 7.76103 0.671625 7.76103C0.293126 7.76103 0 7.45835 0 7.07998C0 6.97592 0.0377881 6.8719 0.0850851 6.76784ZM4.1809 4.93281L3.26332 2.74776L2.34583 4.93281H4.1809Z"}),(0,d.jsx)("path",{d:"M7.24512 6.24762V6.22868C7.24512 5.122 8.08699 4.6112 9.28827 4.6112C9.79911 4.6112 10.1681 4.69633 10.5275 4.81932V4.7342C10.5275 4.13823 10.1586 3.80723 9.43967 3.80723C9.0424 3.80723 8.72079 3.86396 8.44648 3.94913C8.36139 3.97749 8.30458 3.98691 8.23827 3.98691C7.90732 3.98691 7.64247 3.73154 7.64247 3.4005C7.64247 3.14508 7.80321 2.92753 8.03019 2.84236C8.48422 2.67211 8.97617 2.57751 9.64775 2.57751C10.4328 2.57751 11.0004 2.7856 11.3599 3.14504C11.7382 3.52337 11.9085 4.08151 11.9085 4.76256V7.07052C11.9085 7.4584 11.5963 7.76104 11.2085 7.76104C10.7923 7.76104 10.518 7.46783 10.518 7.16511V7.15564C10.168 7.54344 9.6855 7.79882 8.98564 7.79882C8.03019 7.79891 7.24512 7.25036 7.24512 6.24762ZM10.5463 5.91654V5.66116C10.3004 5.54767 9.97879 5.47197 9.62882 5.47197C9.01392 5.47197 8.63562 5.71792 8.63562 6.17192V6.19085C8.63562 6.57869 8.95723 6.80567 9.42069 6.80567C10.0923 6.80571 10.5463 6.43685 10.5463 5.91654Z"})]}))})),ln=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{viewBox:"0 0 18 7",children:[(0,d.jsx)("path",{d:"M0.699536 1.81574C0.732104 1.93193 0.822074 2.02812 0.943348 2.07632C1.06462 2.12452 1.20367 2.1194 1.32026 2.06245L1.66832 1.89235V5.68893C1.66832 5.9038 1.86075 6.07801 2.09809 6.07801H2.94248C3.17982 6.07801 3.37225 5.9038 3.37225 5.68893V0.47563C3.37225 0.26076 3.17982 0.0865479 2.94248 0.0865479H2.29848C2.17914 0.0865479 2.06158 0.113205 1.95637 0.16423L0.738721 0.754181C0.56458 0.838594 0.476394 1.0196 0.524949 1.19294L0.699536 1.81574Z"}),(0,d.jsx)("path",{d:"M10.8866 5.68902V5.01903C10.8866 4.80416 10.6941 4.62994 10.4568 4.62994H9.05518C10.0388 3.74152 10.7474 2.93461 10.7474 1.92481C10.7474 0.997814 10.0548 0 8.53425 0C7.8269 0 7.14796 0.221131 6.62264 0.622734L6.5923 0.64589C6.4456 0.758105 6.3989 0.944837 6.47794 1.1033L6.76629 1.68127C6.82154 1.79207 6.93084 1.87305 7.06171 1.90031C7.19257 1.92757 7.32991 1.89782 7.43311 1.82007L7.4862 1.78009C7.6506 1.65609 7.98491 1.44815 8.37773 1.44815C8.83219 1.44815 9.01749 1.61139 9.01749 2.00701C9.01079 2.59898 8.43573 3.18913 7.05888 4.37543L6.44285 4.91698C6.35949 4.99022 6.3125 5.09092 6.3125 5.19607V5.68902C6.3125 5.90389 6.50493 6.0781 6.74228 6.0781H10.4568C10.6941 6.0781 10.8866 5.90389 10.8866 5.68902Z"}),(0,d.jsx)("path",{d:"M12.776 5.72618L12.8104 5.74657C13.135 5.9395 13.7841 6.16473 14.5449 6.16473C16.2926 6.16473 17.0887 5.14242 17.0887 4.19267C17.0887 3.62951 16.8073 3.13588 16.3383 2.81088C16.681 2.50406 16.8712 2.10448 16.8712 1.65717C16.8712 0.858943 16.214 0 14.7711 0C13.9993 0 13.3383 0.257885 13.0067 0.478679L12.9752 0.499614C12.8219 0.601597 12.761 0.782675 12.8253 0.944703L13.0621 1.54125C13.1077 1.65596 13.21 1.74468 13.3385 1.78103C13.4669 1.81731 13.6069 1.79705 13.7164 1.72617L13.7729 1.68961C13.9708 1.56151 14.3105 1.43227 14.6231 1.43227C15.1324 1.43227 15.1324 1.66706 15.1324 1.76736C15.1324 2.11794 14.5556 2.19683 14.3535 2.19683H13.8748C13.6374 2.19683 13.445 2.37105 13.445 2.58592V3.20071C13.445 3.41558 13.6374 3.58979 13.8748 3.58979H14.3535C14.5815 3.58979 15.3258 3.6324 15.3325 4.18479C15.3338 4.25062 15.3217 4.41763 15.1809 4.54748C15.0154 4.70016 14.7389 4.7322 14.5362 4.7322C14.1296 4.7322 13.7199 4.58033 13.5438 4.47822L13.4879 4.44584C13.3774 4.38182 13.2406 4.36701 13.1166 4.40565C12.9925 4.44429 12.8947 4.53207 12.8511 4.64408L12.6066 5.27126C12.5408 5.44022 12.6107 5.62789 12.776 5.72618Z"})]}))})),cn=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{viewBox:"0 0 17 7",children:[(0,d.jsx)("path",{fill:"none",d:"M9.5 3.5L11.8824 6L16 1",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,d.jsx)("path",{fill:"none",d:"M1 1L6 6M6 1L1 6",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})]}))})),un=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{viewBox:"0 0 10 12",children:[(0,d.jsx)("path",{d:"M3.67764 2.0539V0.930176H0.61294C0.450378 0.930176 0.294474 0.989372 0.179526 1.09474C0.0645775 1.20011 0 1.34302 0 1.49204V10.4818C0 10.6308 0.0645775 10.7737 0.179526 10.8791C0.294474 10.9845 0.450378 11.0437 0.61294 11.0437H3.67764V9.91996H1.22588V2.0539H3.67764Z"}),(0,d.jsx)("path",{d:"M5.5167 9.91998L5.5167 11.0437L8.5814 11.0437C8.74396 11.0437 8.89986 10.9845 9.01481 10.8791C9.12976 10.7738 9.19434 10.6309 9.19434 10.4818L9.19434 1.49206C9.19434 1.34305 9.12976 1.20013 9.01481 1.09476C8.89986 0.989394 8.74396 0.9302 8.5814 0.9302L5.5167 0.930199L5.5167 2.05392L7.96846 2.05392L7.96846 9.91998L5.5167 9.91998Z"})]}))})),dn=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{viewBox:"0 0 12 12",children:[(0,d.jsx)("path",{d:"M9.40063 5.29672L9.40063 5.29673L10.34 6.23611L9.40065 7.17549C9.29799 7.27815 9.2403 7.41741 9.2403 7.56259V9.80103C9.2403 10.1849 8.92798 10.4972 8.54415 10.4972H7.6322C7.32986 10.4972 7.08477 10.7423 7.08477 11.0446C7.08477 11.347 7.32986 11.592 7.6322 11.592H8.54415C9.53177 11.592 10.3352 10.7886 10.3352 9.80103V7.78934L11.5013 6.62319C11.7151 6.40941 11.7151 6.0628 11.5013 5.84901L11.466 5.88436L11.5013 5.84901L10.3352 4.68287V2.67118C10.3352 1.68359 9.53177 0.880176 8.54415 0.880176H7.6322C7.32986 0.880176 7.08477 1.12527 7.08477 1.42761C7.08477 1.72995 7.32986 1.97504 7.6322 1.97504H8.54415C8.92798 1.97504 9.2403 2.28736 9.2403 2.67118V4.90962C9.2403 5.05481 9.29799 5.19406 9.40063 5.29672Z",strokeWidth:"0.1"}),(0,d.jsx)("path",{d:"M3.21104 7.17549L3.21103 7.17549L2.27163 6.23611L3.21101 5.29673C3.31367 5.19406 3.37136 5.05481 3.37136 4.90962V2.67118C3.37136 2.28736 3.68368 1.97504 4.06751 1.97504H4.97946C5.28181 1.97504 5.5269 1.72995 5.5269 1.42761C5.5269 1.12527 5.28181 0.880176 4.97946 0.880176H4.06751C3.07989 0.880176 2.2765 1.68359 2.2765 2.67118V4.68287L1.11035 5.84901C0.896552 6.0628 0.896552 6.40939 1.11035 6.62319L2.2765 7.78934V9.80103C2.2765 10.7886 3.07989 11.592 4.06751 11.592H4.97946C5.28181 11.592 5.5269 11.347 5.5269 11.0446C5.5269 10.7423 5.28181 10.4972 4.97946 10.4972H4.06751C3.68368 10.4972 3.37136 10.1849 3.37136 9.80103V7.56259C3.37136 7.41741 3.31368 7.27816 3.21104 7.17549Z",strokeWidth:"0.1"})]}))})),pn=n.g.gd,fn=function(){var e;ft||(e={},(0,r.Z)(e,pn.Variable.String,sn),(0,r.Z)(e,pn.Variable.Number,ln),(0,r.Z)(e,pn.Variable.Boolean,cn),(0,r.Z)(e,pn.Variable.Array,un),(0,r.Z)(e,pn.Variable.Structure,dn),ft=e);return ft},hn=l.memo((function(e){var t=l.useContext(f.Z),n=fn()[e.variableType];return(0,d.jsxs)(L.x1,{alignItems:"center",noMargin:!0,children:[(0,d.jsx)(n,{fontSize:"small",htmlColor:e.isHighlighted?t.listItem.selectedTextColor:void 0}),!e.readOnlyWithIcon&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.LZ,{}),(0,d.jsx)(K.Z,{value:e.variableType,margin:"none",stopPropagationOnClick:!0,onChange:function(t){return e.onChange(function(){var e;return ht||(e={},(0,r.Z)(e,pn.Variable.String,"string"),(0,r.Z)(e,pn.Variable.Number,"number"),(0,r.Z)(e,pn.Variable.Boolean,"boolean"),(0,r.Z)(e,pn.Variable.Array,"array"),(0,r.Z)(e,pn.Variable.Structure,"structure"),ht=e),ht}()[t.target.value],e.nodeId)},inputStyle:{fontSize:14,color:e.isHighlighted?t.listItem.selectedTextColor:void 0},id:e.id,children:(pt||(pt=[(0,d.jsx)($.Z,{label:{id:"String"},value:pn.Variable.String},"string"),(0,d.jsx)($.Z,{label:{id:"Number"},value:pn.Variable.Number},"number"),(0,d.jsx)($.Z,{label:{id:"Boolean"},value:pn.Variable.Boolean},"boolean"),(0,d.jsx)($.Z,{label:{id:"Array"},value:pn.Variable.Array},"array"),(0,d.jsx)($.Z,{label:{id:"Structure"},value:pn.Variable.Structure},"structure")]),pt)})]})]})})),gn="Variables",xn=n(65512),mn=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.2047 4.23503C14.4891 3.9339 14.9638 3.92033 15.265 4.20474L19.765 8.45474C19.915 8.59642 20 8.79366 20 9C20 9.20635 19.915 9.40358 19.765 9.54526L15.265 13.7953C14.9638 14.0797 14.4891 14.0661 14.2047 13.765C13.9203 13.4638 13.9339 12.9892 14.235 12.7047L18.1577 9L14.235 5.29526C13.9339 5.01085 13.9203 4.53617 14.2047 4.23503Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 13C4 10.3767 6.12664 8.25 8.75 8.25H19.25C19.6642 8.25 20 8.58579 20 9C20 9.41422 19.6642 9.75 19.25 9.75H8.75C6.95508 9.75 5.5 11.2051 5.5 13V19.25C5.5 19.6642 5.16421 20 4.75 20C4.33579 20 4 19.6642 4 19.25V13Z",fill:"currentColor"})]}))})),vn=n(53162),bn=n(90264),Cn=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33331 5.83329C3.33331 4.82077 4.15412 3.99996 5.16665 3.99996H5.99998C6.27612 3.99996 6.49998 4.22382 6.49998 4.49996C6.49998 4.7761 6.27612 4.99996 5.99998 4.99996H5.16665C4.70641 4.99996 4.33331 5.37305 4.33331 5.83329V11.5C4.33331 11.9602 4.7064 12.3333 5.16665 12.3333H10.8333C11.2936 12.3333 11.6666 11.9602 11.6666 11.5V5.83329C11.6666 5.37305 11.2936 4.99996 10.8333 4.99996H9.99998C9.72384 4.99996 9.49998 4.7761 9.49998 4.49996C9.49998 4.22382 9.72384 3.99996 9.99998 3.99996H10.8333C11.8459 3.99996 12.6666 4.82078 12.6666 5.83329V11.5C12.6666 12.5125 11.8459 13.3333 10.8333 13.3333H5.16665C4.15413 13.3333 3.33331 12.5125 3.33331 11.5V5.83329Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.66665 3.66663C6.5746 3.66663 6.49998 3.74125 6.49998 3.83329V4.83329C6.49998 4.92534 6.5746 4.99996 6.66665 4.99996H9.33331C9.42536 4.99996 9.49998 4.92534 9.49998 4.83329V3.83329C9.49998 3.74124 9.42536 3.66663 9.33331 3.66663H6.66665ZM5.49998 3.83329C5.49998 3.18896 6.02232 2.66663 6.66665 2.66663H9.33331C9.97766 2.66663 10.5 3.18897 10.5 3.83329V4.83329C10.5 5.47762 9.97766 5.99996 9.33331 5.99996H6.66665C6.02232 5.99996 5.49998 5.47762 5.49998 4.83329V3.83329Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.99998 8.16663C5.99998 7.89048 6.22384 7.66663 6.49998 7.66663H9.49998C9.77612 7.66663 9.99998 7.89048 9.99998 8.16663C9.99998 8.44277 9.77612 8.66663 9.49998 8.66663H6.49998C6.22384 8.66663 5.99998 8.44277 5.99998 8.16663Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.99998 10.1666C5.99998 9.89048 6.22384 9.66663 6.49998 9.66663H9.49998C9.77612 9.66663 9.99998 9.89048 9.99998 10.1666C9.99998 10.4428 9.77612 10.6666 9.49998 10.6666H6.49998C6.22384 10.6666 5.99998 10.4428 5.99998 10.1666Z",fill:"currentColor"})]}))})),jn=l.memo((function(e){var t=[{key:"copy",Icon:bn.Z,label:(0,d.jsx)(b.Trans,{id:"Copy"}),tooltip:{id:"Copy"},onClick:e.onCopy,disabled:!e.canCopy,display:!0},{key:"paste",Icon:Cn,label:(0,d.jsx)(b.Trans,{id:"Paste"}),tooltip:{id:"Paste"},onClick:e.onPaste,disabled:!e.canPaste,display:!0},{key:"delete",Icon:vn.Z,label:(0,d.jsx)(b.Trans,{id:"Delete"}),tooltip:{id:"Delete"},onClick:e.onDelete,disabled:!e.canDelete,display:!0},{key:"undo",Icon:ye,label:(0,d.jsx)(b.Trans,{id:"Undo"}),tooltip:{id:"Undo"},onClick:e.onUndo,disabled:!e.canUndo,display:!e.hideHistoryChangeButtons},{key:"redo",Icon:mn,label:(0,d.jsx)(b.Trans,{id:"Redo"}),tooltip:{id:"Redo"},onClick:e.onRedo,disabled:!e.canRedo,display:!e.hideHistoryChangeButtons}].filter((function(e){return e.display}));return(0,d.jsxs)(L.x1,{justifyContent:"space-between",alignItems:"center",children:[(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(L.x1,{noMargin:!0,children:t.map((function(t,n){var r=t.key,i=t.Icon,o=t.label,a=t.tooltip,s=t.onClick,c=t.disabled;return(0,d.jsxs)(l.Fragment,{children:[n>0?(0,d.jsx)(L.LZ,{}):null,e.isNarrow?(0,d.jsx)(xn.Z,{tooltip:a,onClick:s,size:"small",disabled:c,children:(0,d.jsx)(i,{style:e.iconStyle})},r):(0,d.jsx)(J.Z,{leftIcon:(0,d.jsx)(i,{}),disabled:c,label:o,onClick:s},r)]},r)}))})}),(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(st.Z,{value:e.searchText,onRequestSearch:e.onChangeSearchText,onChange:e.onChangeSearchText,placeholder:{id:"Search variables"}})}),(0,d.jsx)(L.sg,{noMargin:!0,children:e.isNarrow?(0,d.jsx)(xn.Z,{tooltip:{id:"Add variable"},onClick:e.onAdd,size:"small",children:(0,d.jsx)(vt.Z,{style:e.iconStyle})},"add-variable"):(0,d.jsx)(J.Z,{primary:!0,onClick:e.onAdd,label:(0,d.jsx)(b.Trans,{id:"Add variable"}),leftIcon:(0,d.jsx)(vt.Z,{})},"add-variable")})]})})),yn=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,d.jsx)("path",{d:"M10.8134 2.64645C11.0087 2.45118 11.3253 2.45118 11.5205 2.64645L13.5205 4.64645C13.6143 4.74021 13.667 4.86739 13.667 5C13.667 5.13261 13.6143 5.25979 13.5205 5.35355L11.5205 7.35355C11.3253 7.54882 11.0087 7.54882 10.8134 7.35355C10.6182 7.15829 10.6182 6.84171 10.8134 6.64645L11.9599 5.5H5.16699C4.89085 5.5 4.66699 5.27614 4.66699 5C4.66699 4.72386 4.89085 4.5 5.16699 4.5H11.9599L10.8134 3.35355C10.6182 3.15829 10.6182 2.84171 10.8134 2.64645Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M7.02055 9.35355C7.21581 9.15829 7.21581 8.84171 7.02055 8.64645C6.82528 8.45118 6.5087 8.45118 6.31344 8.64645L4.31344 10.6464C4.21967 10.7402 4.16699 10.8674 4.16699 11C4.16699 11.1326 4.21967 11.2598 4.31344 11.3536L6.31344 13.3536C6.5087 13.5488 6.82528 13.5488 7.02055 13.3536C7.21581 13.1583 7.21581 12.8417 7.02055 12.6464L5.8741 11.5L12.667 11.5C12.9431 11.5 13.167 11.2761 13.167 11C13.167 10.7239 12.9431 10.5 12.667 10.5L5.8741 10.5L7.02055 9.35355Z",fill:"currentColor"})]}))})),Zn=function(e){var t=l.useRef(null),n=l.useCallback((function(e){t.current=e}),[]);return l.useLayoutEffect((function(){if(t.current){var n=e.current[t.current.identifier];n&&n.focus({caretPosition:t.current.caretPosition})}t.current=null})),n},kn=n(65111),wn="SimpleTextField_simpleTextField__bSFrW",Tn="SimpleTextField_disabled__sKBSD",Sn=n(82954),Pn=n.n(Sn),En={italic:{fontStyle:"italic"}},In=function(e){return e.stopPropagation()},Mn=l.memo(l.forwardRef((function(e,t){var n,i=l.useRef(null);l.useEffect((function(){i.current&&(i.current.value=e.value)}),[e.value]);var o=l.useCallback((function(e){var t=i.current;if(t&&(t.focus(),e&&e.selectAll&&t.select(),e&&Number.isInteger(e.caretPosition))){var n=Number(e.caretPosition);t.setSelectionRange(n,n)}}),[]),a=l.useCallback((function(e,t){i.current&&(i.current.selectionStart=e,i.current.selectionEnd=t)}),[]),s=l.useCallback((function(){return i.current?i.current.selectionStart:0}),[]);return l.useImperativeHandle(t,(function(){return{focus:o,forceSetSelection:a,getCaretPosition:s}})),(0,d.jsx)("div",{className:Pn()((n={},(0,r.Z)(n,wn,!0),(0,r.Z)(n,Tn,e.disabled),n)),children:(0,d.jsx)("input",{id:e.id,disabled:e.disabled,ref:i,type:e.type,defaultValue:e.value,onClick:In,onDoubleClick:In,onBlur:function(t){e.onChange(t.currentTarget.value,e.additionalContext)},onChange:e.directlyStoreValueChangesWhileEditing?function(t){e.onChange(t.currentTarget.value,e.additionalContext)}:void 0,onKeyUp:function(t){(0,kn.ph)(t)&&e.onChange(t.currentTarget.value,e.additionalContext)},style:e.italic?En.italic:void 0})})}))),Ln=n(46771),An=n(42986),Fn=function(e){var t=e.initialValue,n=e.onClose,r=l.useState(t),i=(0,s.Z)(r,2),o=i[0],a=i[1];return(0,d.jsx)(te.ZP,{open:!0,title:null,flexColumnBody:!0,noMobileFullScreen:!0,actions:[(0,d.jsx)(te.vF,{label:(0,d.jsx)(b.Trans,{id:"Ok"}),primary:!0,onClick:function(){return n(o)}},"ok")],maxWidth:"md",onRequestClose:function(){return n(o)},onApply:function(){return n(o)},children:(0,d.jsx)(An.Z,{autoFocus:"desktopAndMobileDevices",multiline:!0,fullWidth:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Initial text of the variable"}),value:o,onChange:a,rows:5,rowsMax:10})})},On=n.g.gd,Rn=(0,Zt.x)("variable-editor"),Dn=function(e){return e.stopPropagation()},_n={inlineIcon:{padding:0},handlePlaceholder:{width:24}},Bn={chevron:{width:15,alignSelf:"stretch"}},Nn=l.memo((function(e){var t=e.depth,n=e.isNarrow,r=e.containerWidth,i=e.shouldHideExpandIcons,o=e.isExpanded,a=e.onExpand,c=e.draggedNodeId,u=e.nodeId,p=e.isInherited,f=e.canDrop,h=e.dropNode,g=e.isSelected,x=e.onSelect,m=e.gdevelopTheme,v=e.topLevelVariableNameInputRefs,j=e.topLevelVariableValueInputRefs,y=e.parentType,Z=e.onChangeName,k=e.overwritesInheritedVariable,w=e.name,T=e.index,S=e.rowRightSideStyle,P=e.isTopLevel,E=e.type,I=e.onChangeType,A=e.valueAsString,R=e.valueAsBool,D=e.onChangeValue,_=e.isCollection,B=e.variablePointer,N=e.onAddChild,U=e.editInheritedVariable,H=e.deleteNode,V=e.directlyStoreValueChangesWhileEditing,z=n||!!r&&(r<=750?t>=5:r<=850?t>=6:r<=950?t>=7:t>=8),W=l.useState(!1),G=(0,s.Z)(W,2),Y=G[0],q=G[1],X=(0,Pt.Z)(),K=!!A&&-1!==A.indexOf("\n");return(0,d.jsx)(Rn,{beginDrag:function(){return c.current=u,{}},canDrag:function(){return!p},canDrop:function(){return f(u)},drop:function(){h(u)},children:function(e){var r=e.connectDragSource,s=e.connectDropTarget,l=e.isOver,c=e.canDrop;return s((0,d.jsxs)("div",{style:{marginLeft:(n?16:32)*t,backgroundColor:g?m.listItem.selectedBackgroundColor:m.list.itemsBackgroundColor,marginBottom:1},"aria-selected":g,"aria-expanded":o,onPointerUp:function(e){var t=e.metaKey||e.ctrlKey;x(t,u)},children:[l&&(0,d.jsx)(kt.Z,{canDrop:c}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:n?"4px 4px 4px 0px":"6px 30px 6px 6px"},children:[i?null:_?(0,d.jsx)(O.Z,{onClick:function(){return a(!o,u)},focusRipple:!0,style:Bn.chevron,children:o?(0,d.jsx)(jt.Z,{}):(0,d.jsx)(Ct.Z,{})}):(0,d.jsx)("div",{style:Bn.chevron}),p?(0,d.jsx)("span",{style:_n.handlePlaceholder}):r((0,d.jsx)("span",{children:(0,d.jsx)(yt.V,{color:g?m.listItem.selectedTextColor:"#AAA"})})),(0,d.jsxs)(C.ep,{expand:!0,noMargin:!0,forceMobileLayout:z,children:[(0,d.jsxs)(L.x1,{alignItems:"center",noMargin:!0,expand:!0,children:[z?null:(0,d.jsx)(L.LZ,{}),(0,d.jsx)(Mn,{type:"text",ref:function(e){0===t&&e&&(v.current[B]=e)},directlyStoreValueChangesWhileEditing:V,disabled:p||y===On.Variable.Array,onChange:Z,additionalContext:JSON.stringify({nodeId:u,depth:t}),italic:!!k,value:w,id:"variable-".concat(T,"-name")}),(0,d.jsx)(L.LZ,{})]}),(0,d.jsx)("div",{style:z?void 0:S,children:(0,d.jsxs)(L.x1,{noMargin:!0,alignItems:"center",children:[(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(hn,{variableType:E,onChange:I,nodeId:u,isHighlighted:g,readOnlyWithIcon:p||k,id:"variable-".concat(T,"-type")})}),(0,d.jsx)(L.sg,{expand:!0,children:E===On.Variable.Boolean?(0,d.jsxs)(L.x1,{noMargin:!0,alignItems:"center",children:[(0,d.jsx)("span",{style:g?{color:m.listItem.selectedTextColor}:void 0,children:(0,d.jsx)(F.Z,{displayInlineAsSpan:!0,noMargin:!0,color:"inherit",children:R?(0,d.jsx)(b.Trans,{id:"True"}):(0,d.jsx)(b.Trans,{id:"False"})})}),p&&!P?null:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.LZ,{}),(0,d.jsx)(M.Z,{size:"small",style:_n.inlineIcon,onClick:function(){D(R?"false":"true",u),X()},tooltip:R?{id:"Set to false"}:{id:"Set to true"},children:(0,d.jsx)(yn,{htmlColor:g?m.listItem.selectedTextColor:void 0})})]})]}):(0,d.jsx)(Mn,{ref:function(e){0===t&&e&&(j.current[B]=e)},type:E===On.Variable.Number?"number":"text",directlyStoreValueChangesWhileEditing:V,disabled:_||p&&!P||K,onChange:D,value:K?(A||"").replace(/\n/g,"\u21b5"):A||"",additionalContext:u,id:"variable-".concat(T,"-text-value")},"value")}),E!==On.Variable.String||p&&!P?null:(0,d.jsx)(M.Z,{size:"small",style:_n.inlineIcon,tooltip:{id:"Open in a larger editor"},onClick:function(e){Dn(e),q(!0)},children:(0,d.jsx)(bt.Z,{htmlColor:g?m.listItem.selectedTextColor:void 0})}),_&&!p?(0,d.jsx)(M.Z,{size:"small",style:_n.inlineIcon,tooltip:{id:"Add child"},onClick:function(e){Dn(e),N(u)},children:(0,d.jsx)(vt.Z,{htmlColor:g?m.listItem.selectedTextColor:void 0})}):null,_&&p&&P?(0,d.jsx)(M.Z,{size:"small",tooltip:{id:"Edit"},style:_n.inlineIcon,onClick:function(e){Dn(e),U(u)},children:(0,d.jsx)(bt.Z,{htmlColor:g?m.listItem.selectedTextColor:void 0})}):null,k&&P?(0,d.jsx)(M.Z,{size:"small",tooltip:{id:"Reset"},style:_n.inlineIcon,onClick:function(e){Dn(e),H(u)},children:(0,d.jsx)(ye,{htmlColor:g?m.listItem.selectedTextColor:void 0})}):null]})})]})]}),Y&&(0,d.jsx)(Fn,{initialValue:A||"",onClose:function(e){D(e,u),q(!1),X()}})]}))}})})),Un=function(e){var t=(0,Ln.B)((function(){return _t(e.variablesContainer,{historyMaxSize:50})})),n=l.useState(""),r=(0,s.Z)(n,2),i=r[0],o=r[1],a=e.onComputeAllVariableNames,c=l.useMemo((function(){return a?a():null}),[a]),u=l.useState([]),p=(0,s.Z)(u,2),h=p[0],g=p[1],x=l.useState([]),m=(0,s.Z)(x,2),C=m[0],j=m[1],y=l.useState(null),Z=(0,s.Z)(y,2),k=Z[0],w=Z[1],T=l.useRef({}),S=l.useRef({}),P=Zn(T),E=Zn(S),I=l.useContext(f.Z),M=l.useRef(null),A=(0,Pt.Z)(),O=l.useCallback((function(){var t=[],n=an(e.variablesContainer,qt(i));e.inheritedVariablesContainer&&(t=an(e.inheritedVariablesContainer,qt(i),Kt)),j([].concat((0,v.Z)(n),(0,v.Z)(t)))}),[e.inheritedVariablesContainer,e.variablesContainer,i]);l.useEffect((function(){i?O():j([])}),[i,O]);var R=!Gt(e.variablesContainer)&&(!e.inheritedVariablesContainer||!Gt(e.inheritedVariablesContainer)),D=l.useMemo((function(){return{minWidth:k?Math.round(.6*k):600,flexShrink:0}}),[k]),_=l.useMemo((function(){return"small"===e.size||!!k&&k<650}),[k,e.size]),B=c?c.filter((function(t){return!e.variablesContainer.has(t)&&(!e.inheritedVariablesContainer||!e.inheritedVariablesContainer.has(t))})):[],N=e.historyHandler,U=e.onVariablesUpdated,H=e.variablesContainer,V=l.useCallback((function(){N?N.saveToHistory():t.current=Ut(t.current,H),U&&U()}),[t,N,U,H]),z=l.useCallback((function(){N?N.undo():t.current=Ht(t.current,e.variablesContainer),g([])}),[t,N,e.variablesContainer]),W=l.useCallback((function(){N?N.redo():t.current=Vt(t.current,e.variablesContainer),g([])}),[t,N,e.variablesContainer]),G=new St.ZP({isActive:function(){return!0},shortcutCallbacks:{onUndo:z,onRedo:W}}),Y=l.useCallback((function(){Rt.set(gn,h.map((function(t){var n=tn(t,t.startsWith(Kt)&&e.inheritedVariablesContainer?e.inheritedVariablesContainer:e.variablesContainer),r=n.variable,i=n.name,o=n.lineage;if(!r||!i)return null;var a=!1,s=Qt(o);return s&&s.getType()!==On.Variable.Structure||(a=!0),{nameOrIndex:i,serializedVariable:(0,Dt.XH)(r),hasName:a}})).filter(Boolean)),A()}),[A,e.inheritedVariablesContainer,e.variablesContainer,h]),q=l.useCallback((function(){if(Rt.has(gn)){var t=[],n=Rt.get(gn),r=Ot.extractArray(n);if(r){var i=0;r.forEach((function(n){var r=Ot.extractStringProperty(n,"nameOrIndex"),o=Ot.extractObjectProperty(n,"serializedVariable"),a=Ot.extractBooleanProperty(n,"hasName");if(r&&o&&null!==a){var s=a?r:null;if(0===h.length||h.some((function(e){return e.startsWith(Kt)}))){if(!s)return;var l=Wt(e.variablesContainer,On.Project.getSafeName(s),o,e.variablesContainer.count(),e.inheritedVariablesContainer).name;t.push(l)}else{var c=h[0];if(c.startsWith(Kt))return;var u=tn(c,e.variablesContainer),d=u.name,p=u.lineage;if(!d)return;var f=Qt(p);if(f){var g=f.getType();if(g===On.Variable.Structure&&!s||g===On.Variable.Array&&s)return;if(g===On.Variable.Array){var x=parseInt(d,10)+1;!function(e,t,n){var r=new zt.Variable;(0,Dt.qx)(r,t),r.resetPersistentUuid(),e.insertAtIndex(r,n),r.delete()}(f,o,x);var m=c.split(Jt);m.splice(m.length-1,1,(x+i).toString()),t.push(m.join(Jt)),i+=1}else{if(!s)return;var v=function(e,t,n){var r=(0,It.Z)(t,(function(t){return e.hasChild(t)}),"CopyOf"),i=new zt.Variable;return(0,Dt.qx)(i,n),i.resetPersistentUuid(),e.insertChild(r,i),i.delete(),r}(f,s,o),b=c.split(Jt);b.splice(b.length-1,1,v),t.push(b.join(Jt))}}else{if(!s)return;var C=Wt(e.variablesContainer,s,o,e.variablesContainer.getPosition(d)+1,e.inheritedVariablesContainer).name;t.push(C)}}}})),V(),g(t)}}}),[V,e.inheritedVariablesContainer,e.variablesContainer,h]),X=l.useCallback((function(t){if(t.startsWith(Kt))return!1;var n=tn(t,e.variablesContainer),r=n.name,i=n.lineage;if(!r)return!1;var o=Qt(i);return o?o.getType()===On.Variable.Array?o.removeAtIndex(parseInt(r,10)):o.removeChild(r):e.variablesContainer.remove(r),!0}),[e.variablesContainer]),K=l.useCallback((function(e){X(e)&&(V(),A())}),[V,A,X]),J=l.useCallback((function(){h.sort().reverse().map(X).some(Boolean)&&(V(),g([]))}),[V,X,h]),Q=l.useCallback((function(e,t){g((function(n){return nn(n,e,t)})),i&&j((function(n){return nn(n,e,t)}))}),[i]),$=l.useCallback((function(e,t,n){g([]),i&&(O(),A())}),[A,i,O]),ee=l.useCallback((function(t){if(t.startsWith(Kt))return!1;var n=M.current;if(!n)return!1;var r=tn(t,e.variablesContainer),i=r.lineage,o=tn(n,e.variablesContainer),a=o.variable;if(!a)return!1;if(en(a,i))return!1;switch(rn(o,r)){case"InsideTopLevel":case"TopLevelToStructure":case"StructureToTopLevel":case"FromStructureToAnotherStructure":case"FromArrayToAnotherArray":case"InsideSameArray":return!0;default:return!1}}),[e.variablesContainer]),te=l.useCallback((function(t){if(!t.startsWith(Kt)){var n=M.current;if(n){var r=tn(t,e.variablesContainer),i=r.lineage,o=r.name,a=Qt(i);if(o){var s=tn(n,e.variablesContainer),l=s.variable,c=s.lineage,u=s.name,d=Qt(c);if(l&&u&&!en(l,i)){var p,f,h,g,x,m=!0;switch(rn(s,r)){case"InsideTopLevel":f=e.variablesContainer.getPosition(u),h=e.variablesContainer.getPosition(o),e.variablesContainer.move(f,h>f?h-1:h);break;case"TopLevelToStructure":p=(0,It.Z)(u,(function(e){return a.hasChild(e)}),"CopyOf"),a.insertChild(p,l),e.variablesContainer.remove(u),(g=$t(i))&&$(n,g,p);break;case"StructureToTopLevel":p=(0,It.Z)(On.Project.getSafeName(u),(function(t){return e.variablesContainer.has(t)}),"CopyOf"),e.variablesContainer.insert(p,l,e.variablesContainer.getPosition(o)),d.removeChild(u),$(n,"",p);break;case"FromStructureToAnotherStructure":p=(0,It.Z)(u,(function(e){return a.hasChild(e)}),"CopyOf"),a.insertChild(p,l),d.removeChild(u),(g=$t(i))&&$(n,g,p);break;case"FromArrayToAnotherArray":f=parseInt(u,10),h=parseInt(o,10),a.insertAtIndex(l,h),d.removeAtIndex(f),(x=$t(i))&&$(n,x,h.toString());break;case"InsideSameArray":f=parseInt(u,10);var v=(h=parseInt(o,10))>f?h-1:h;a.moveChildInArray(f,v),(g=$t(i))&&$(n,g,v.toString());break;default:m=!1}m&&(V(),A())}}}}}),[V,A,e.variablesContainer,$]),ne=l.useCallback((function(t){if(!t.startsWith(Kt)){var n=tn(t,e.variablesContainer).variable;if(n&&Yt(n)){var r=n.getType();if(r===On.Variable.Structure){var i=(0,It.Z)("ChildVariable",(function(e){return n.hasChild(e)}));n.getChild(i).setString("")}else r===On.Variable.Array&&n.pushNew();V(),n.isFolded()&&n.setFolded(!1),A()}}}),[V,A,e.variablesContainer]),re=l.useCallback((function(t){if(e.inheritedVariablesContainer){var n=tn(t,e.inheritedVariablesContainer),r=n.variable,i=n.name;if(r&&i&&!e.variablesContainer.has(i)){var o=new On.Variable;(0,Dt.qx)(o,(0,Dt.XH)(r)),e.variablesContainer.insert(i,o,e.variablesContainer.count()),V(),g([i]),o.delete()}}}),[V,e.inheritedVariablesContainer,e.variablesContainer]),ie=l.useCallback((function(){if(0===h.length||h.some((function(e){return e.startsWith(Kt)}))){var t=Wt(e.variablesContainer,"Variable",null,e.variablesContainer.count(),e.inheritedVariablesContainer),n=t.name,r=t.variable;return V(),g([n]),void P({identifier:r.ptr})}var i=h[0],o=tn(i,e.variablesContainer),a=o.name,s=o.lineage;if(a){var l,c,u=(l=s).length?l[0]:null;c=u?e.variablesContainer.getPosition(u.name)+1:e.variablesContainer.getPosition(a)+1;var d=Wt(e.variablesContainer,"Variable",null,c,e.inheritedVariablesContainer),p=d.name,f=d.variable;V(),g([p]),P({identifier:f.ptr})}}),[V,e.inheritedVariablesContainer,e.variablesContainer,P,h]),oe=l.useCallback((function(e,t){g((function(n){var r=-1!==n.indexOf(t);return e?r?n.filter((function(e){return e!==t})):[].concat((0,v.Z)(n),[t]):r?n:[t]}))}),[]),ae=function t(n,r){var o,a=n.name,s=n.variable,l=n.parentNodeId,c=n.parentVariable,u=n.isInherited,p=n.index,f=Yt(s),g=s.getType(),x=!s.isFolded(),m=s.ptr,b=l?l.split(Jt).length:0,j=0===b;o=l?"".concat(l).concat(Jt).concat(a):u?"".concat(Kt).concat(a):a;var y=c?c.getType():null,Z=h.includes(o),w=j&&!u&&e.inheritedVariablesContainer&&e.inheritedVariablesContainer.has(a);if(i&&!(C.includes(o)||C.includes(l)||C.some((function(e){return e.startsWith(o)}))))return[];var P=f?r._(0===s.getChildrenCount()?{id:"No children"}:1===s.getChildrenCount()?{id:"1 child"}:{id:"{0} children",values:{0:s.getChildrenCount()}}):g===On.Variable.String?s.getString():g===On.Variable.Number?s.getValue().toString():null,E=g===On.Variable.Boolean?s.getBool():null,L=(0,d.jsx)(Nn,{depth:b,isNarrow:_,containerWidth:k,shouldHideExpandIcons:R,isExpanded:x,onExpand:ce,draggedNodeId:M,nodeId:o,isInherited:u,canDrop:ee,dropNode:te,isSelected:Z,onSelect:oe,gdevelopTheme:I,topLevelVariableNameInputRefs:T,topLevelVariableValueInputRefs:S,parentType:y,onChangeName:se,overwritesInheritedVariable:w,name:a,index:p,rowRightSideStyle:D,isTopLevel:j,type:g,variablePointer:m,onChangeType:le,valueAsString:P,valueAsBool:E,onChangeValue:ue,isCollection:f,onAddChild:ne,editInheritedVariable:re,deleteNode:K,directlyStoreValueChangesWhileEditing:!!e.directlyStoreValueChangesWhileEditing},o);return g===On.Variable.Structure?[L].concat((0,v.Z)(x?s.getAllChildrenNames().toJSArray().map((function(e,n){var i=s.getChild(e);return t({name:e,variable:i,parentNodeId:o,parentVariable:s,isInherited:u,index:n},r)})):[])):g===On.Variable.Array?[L].concat((0,v.Z)(x?(0,Et.mapFor)(0,s.getChildrenCount(),(function(e){var n=s.getAtIndex(e);return t({name:e.toString(),variable:n,parentNodeId:o,parentVariable:s,isInherited:u,index:e},r)})):[])):[L]},se=l.useCallback((function(t,n){var r=JSON.parse(n),i=r.nodeId,o=r.depth,a=tn(i,e.variablesContainer),s=a.variable,l=a.lineage,c=a.name;if(null!==c&&s&&t!==c){for(var u=Qt(l),d=t.replace(Kt,"");d.includes(Jt);)d=d.replace(Jt,"");var p=(0,It.Z)(0===o?On.Project.getSafeName(d):d||"Unnamed",(function(t){return!!(u&&u.hasChild(t)||!u&&e.variablesContainer.has(t))}));u?u.renameChild(c,p):e.variablesContainer.rename(c,p),V(),Q(i,p),P({identifier:s.ptr})}}),[V,e.variablesContainer,Q,P]),le=l.useCallback((function(t,n){var r=tn(n,e.variablesContainer).variable;r&&(r.castTo(t),V(),A())}),[V,A,e.variablesContainer]),ce=l.useCallback((function(t,n){var r=n.startsWith(Kt),i=tn(n,r&&e.inheritedVariablesContainer?e.inheritedVariablesContainer:H).variable;i&&(i.setFolded(!t),A())}),[e.inheritedVariablesContainer,H,A]),ue=l.useCallback((function(t,n){var r;if(n.startsWith(Kt)&&e.inheritedVariablesContainer){var i=tn(n,e.inheritedVariablesContainer),o=i.variable,a=i.name,s=i.depth;if(!a||!o||s>0)return;switch(o.getType()){case On.Variable.String:if(o.getString()===t)return;break;case On.Variable.Number:if(parseFloat(t)===o.getValue())return;break;case On.Variable.Boolean:if("true"===t===o.getBool())return}var l=new On.Variable;(0,Dt.qx)(l,(0,Dt.XH)(o)),r=e.variablesContainer.insert(a,l,0),g((function(e){var t=(0,v.Z)(e);return-1!==t.indexOf(n)?(t.splice(t.indexOf(n),1,a),t):[].concat((0,v.Z)(t),[a])}));var c=S.current[o.ptr];E({identifier:r.ptr,caretPosition:c?c.getCaretPosition():null}),l.delete()}else{r=tn(n,e.variablesContainer).variable}if(r){switch(r.getType()){case On.Variable.String:if(r.getString()===t)return;r.setString(t);break;case On.Variable.Number:var u=parseFloat(t);if(u===r.getValue())return;r.setValue(u);break;case On.Variable.Boolean:var d="true"===t;if(d===r.getBool())return;r.setBool(d);break;default:console.error("Cannot set variable with type ".concat(r.getType()," - are you sure it's a primitive type?"))}V(),A()}}),[V,A,e.inheritedVariablesContainer,e.variablesContainer,E]),pe=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=n&&e.inheritedVariablesContainer?e.inheritedVariablesContainer:e.variablesContainer,i=[];return(0,Et.mapFor)(0,r.count(),(function(o){var a=r.getAt(o),s=r.getNameAt(o);if(n&&e.variablesContainer.has(s))return null;i.push.apply(i,(0,v.Z)(ae({name:s,variable:a,isInherited:n,index:o},t)))})),i},fe=(0,d.jsx)(jn,{isNarrow:_,onCopy:Y,onPaste:q,onDelete:J,canCopy:h.length>0,canPaste:Rt.has(gn),canDelete:h.length>0&&h.every((function(e){return!e.startsWith(Kt)})),onUndo:z,onRedo:W,canUndo:e.historyHandler?e.historyHandler.canUndo():Nt(t.current),canRedo:e.historyHandler?e.historyHandler.canRedo():Bt(t.current),hideHistoryChangeButtons:!!e.historyHandler,onAdd:ie,searchText:i,onChangeSearchText:o,iconStyle:e.toolbarIconStyle});return(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Variables list"}),scope:"variables-list",children:(0,d.jsx)(b.I18n,{children:function(t){var n=t.i18n;return(0,d.jsx)(mt.Z,{onClickAway:function(){return g([])},children:(0,d.jsx)(xt.Z,{bounds:!0,onResize:function(e){w(e.bounds.width)},children:function(t){t.contentRect;var r=t.measureRef;return(0,d.jsx)("div",{ref:r,style:{flex:1,display:"flex",minHeight:0},onKeyDown:G.onKeyDown,onKeyUp:G.onKeyUp,children:(0,d.jsxs)(L.sg,{expand:!0,useFullHeight:!0,noMargin:!0,children:[_?null:fe,0!==e.variablesContainer.count()||e.inheritedVariablesContainer&&0!==e.inheritedVariablesContainer.count()?(0,d.jsxs)(Tt.Z,{autoHideScrollbar:!0,children:[e.inheritedVariablesContainer?pe(n,!0):null,pe(n),!!B.length&&(0,d.jsx)(de.Z,{background:"dark",variant:"outlined",children:(0,d.jsx)(L.sg,{children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(Ke.r,{translatableSource:{id:"There are variables used in events but not declared in this list: {0}.",values:{0:"`"+B.join("`, `")+"`"}}})})})})]}):(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:e.emptyPlaceholderTitle&&e.emptyPlaceholderDescription?(0,d.jsx)(wt.$,{title:e.emptyPlaceholderTitle,description:e.emptyPlaceholderDescription,actionLabel:(0,d.jsx)(b.Trans,{id:"Add a variable"}),helpPagePath:e.helpPagePath||void 0,tutorialId:"intermediate-advanced-variables",onAction:ie,actionButtonId:"add-variable"}):null}),_?fe:null]})})}})})}})})},Hn=n(4076),Vn=n.g.gd,zn=function(e){var t=e.onCancel,n=e.onApply,r=e.open,s=e.onEditObjectVariables,c=e.title,u=e.emptyPlaceholderTitle,p=e.emptyPlaceholderDescription,f=e.project,h=e.variablesContainer,g=e.inheritedVariablesContainer,x=e.hotReloadPreviewButtonProps,m=e.onComputeAllVariableNames,v=e.helpPagePath,C=e.preventRefactoringToDeleteInstructions,j=e.id,y=ut({serializableObject:h,onCancel:t,resetThenClearPersistentUuid:!0}),Z=y.onCancelChanges,k=y.notifyOfChange,w=y.getOriginalContentSerializedElement,T=(0,gt.Z)("intro-variables").DismissableTutorialMessage,S=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g||((t=Vn.WholeProjectRefactorer.computeChangesetForVariablesContainer(f,w(),h)).clearRemovedVariables(),Vn.WholeProjectRefactorer.applyRefactoringForVariablesContainer(f,h,t)),h.clearPersistentUuid(),n();case 3:case"end":return e.stop()}}),e)}))),[n,f,w,h,g,C]);return(0,d.jsx)(te.ZP,{title:c,actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),onClick:Z},"Cancel"),(0,d.jsx)(te.vF,{label:(0,d.jsx)(b.Trans,{id:"Apply"}),primary:!0,onClick:S,id:"apply-button"},"Apply")],secondaryActions:[s?(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Edit Object Variables"}),primary:!1,onClick:s},"edit-object-variables"):null,x?(0,d.jsx)(dt,(0,a.Z)({},x),"hot-reload-preview-button"):null,v?(0,d.jsx)(Hn.Z,{helpPagePath:v},"help"):null],onRequestClose:Z,onApply:S,open:r,flexBody:!0,fullHeight:!0,id:j,children:(0,d.jsxs)(L.sg,{expand:!0,noMargin:!0,noOverflowParent:!0,children:[h.count()>0&&T&&(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{expand:!0,children:T})}),(0,d.jsx)(Un,{variablesContainer:h,inheritedVariablesContainer:g,emptyPlaceholderTitle:u,emptyPlaceholderDescription:p,onComputeAllVariableNames:m,helpPagePath:v,onVariablesUpdated:k})]})})},Wn=n(21601),Gn=n(32921),Yn=n(72611),qn=n(94258);var Xn=function(e){for(var t=e.project,n=t.getCurrentPlatform().getAllPlatformExtensions(),r=[],i=function(){var e=n.at(o),i=t.getExtensionProperties().getAllExtensionProperties(e.getName(),t);if(0===i.keys().size())return 1;var a=(0,qn.Z)(i,(function(n){return t.getExtensionProperties().getAllExtensionProperties(e.getName(),t)}),(function(n,r,i){"boolean"===t.getExtensionProperties().getAllExtensionProperties(e.getName(),t).get(r).getType()?t.getExtensionProperties().setValue(e.getName(),r,"1"===i?"true":"false"):t.getExtensionProperties().setValue(e.getName(),r,i)}));r.push((0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(F.Z,{size:"block-title",children:e.getFullName()}),(0,d.jsx)(Yn.Z,{schema:a,instances:[e.getAllProperties()]})]},e.getName()))},o=0;o<n.size();o++)i();return r.length?(0,d.jsx)(ce.Z,{children:r}):null},Kn=n(79987),Jn=n(90286),Qn=n(11858),$n=n(3115),er=n(90115),tr=n(71106),nr=n(68151),rr=2,ir=.2,or=0,ar=[{value:"top",label:{id:"Top"}},{value:"top-left",label:{id:"Top left corner"}},{value:"top-right",label:{id:"Top right corner"}},{value:"bottom",label:{id:"Bottom"}},{value:"bottom-left",label:{id:"Bottom left corner"}},{value:"bottom-right",label:{id:"Bottom right corner"}}],sr=function(e){var t=e.loadingScreen,n=e.watermark,r=e.onLoadingScreenUpdated,i=e.onChangeSubscription,o=e.project,a=e.resourceManagementProps,s=l.useRef(null),c=l.useContext(tr.ZP),u=(0,Pt.Z)(),p=!(0,nr.e_)(c.subscription),f=function(){u(),r()},h=l.useRef({minDuration:t.getMinDuration(),logoAndProgressFadeInDuration:t.getLogoAndProgressFadeInDuration(),logoAndProgressLogoFadeInDelay:t.getLogoAndProgressLogoFadeInDelay()});return(0,d.jsx)(b.I18n,{children:function(e){var r=e.i18n;return(0,d.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[(0,d.jsx)(F.Z,{size:"section-title",children:(0,d.jsx)(b.Trans,{id:"Branding"})}),(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,justifyContent:"center",children:(0,d.jsx)(Wn.Z,{label:(0,d.jsx)(b.Trans,{id:"Display GDevelop logo at startup (in exported game)"}),checked:t.isGDevelopLogoShownDuringLoadingScreen(),onCheck:function(e,r){(r||n.isGDevelopWatermarkShown()||!s.current||s.current.checkUserHasSubscription())&&(t.showGDevelopLogoDuringLoadingScreen(r),f())}})}),(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,justifyContent:"center",children:(0,d.jsxs)(K.Z,{fullWidth:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"GDevelop logo style"}),value:t.getGDevelopLogoStyle(),onChange:function(e,n,r){t.getGDevelopLogoStyle()!==r&&(t.setGDevelopLogoStyle(r),f())},disabled:!t.isGDevelopLogoShownDuringLoadingScreen(),children:[(0,d.jsx)($.Z,{value:"light",label:{id:"Light (plain)"}}),(0,d.jsx)($.Z,{value:"light-colored",label:{id:"Light (colored)"}}),(0,d.jsx)($.Z,{value:"dark",label:{id:"Dark (plain)"}}),(0,d.jsx)($.Z,{value:"dark-colored",label:{id:"Dark (colored)"}})]})})]}),(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,justifyContent:"center",children:(0,d.jsx)(Wn.Z,{label:(0,d.jsx)(b.Trans,{id:"Display GDevelop watermark after the game is loaded (in exported game)"}),checked:n.isGDevelopWatermarkShown(),onCheck:function(e,r){(r||t.isGDevelopLogoShownDuringLoadingScreen()||!s.current||s.current.checkUserHasSubscription())&&(n.showGDevelopWatermark(r),r?(t.setMinDuration(h.current.minDuration),t.setLogoAndProgressFadeInDuration(h.current.logoAndProgressFadeInDuration),t.setLogoAndProgressLogoFadeInDelay(h.current.logoAndProgressLogoFadeInDelay)):s.current&&!s.current.hasUserSubscription()&&(t.getMinDuration()<rr&&t.setMinDuration(rr),t.getLogoAndProgressFadeInDuration()>ir&&t.setLogoAndProgressFadeInDuration(ir),t.getLogoAndProgressLogoFadeInDelay()>or&&t.setLogoAndProgressLogoFadeInDelay(or)),f())}})}),(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,justifyContent:"center",children:(0,d.jsx)(K.Z,{fullWidth:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"GDevelop watermark placement"}),value:n.getPlacement(),onChange:function(e,r,i){t.getGDevelopLogoStyle()!==i&&(n.setPlacement(i),f())},disabled:!n.isGDevelopWatermarkShown(),children:ar.map((function(e){return(0,d.jsx)($.Z,{value:e.value,label:e.label},e.value)}))})})]}),p&&(0,d.jsx)(er.Z,{subscriptionDialogOpeningReason:"Disable GDevelop splash at startup",children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Get a silver or gold subscription to disable GDevelop branding."})})})]}),(0,d.jsx)(F.Z,{size:"section-title",children:(0,d.jsx)(b.Trans,{id:"Loading screen"})}),(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Background"})}),(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)($n.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Background image"}),project:o,resourceManagementProps:a,resourceKind:"image",resourceName:t.getBackgroundImageResourceName(),defaultNewResourceName:"LoadingScreenBackground",onChange:function(e){t.getBackgroundImageResourceName()!==e&&(t.setBackgroundImageResourceName(e),f())}})}),(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsx)(Jn.Z,{fullWidth:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Background color"}),disableAlpha:!0,color:(0,Qn.m0)(t.getBackgroundColor()),onChange:function(e){var n=t.getBackgroundColor(),r=(0,Qn.UQ)(e);n!==r&&(t.setBackgroundColor(r),f())}}),(0,d.jsx)(An.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Background fade in duration (in seconds)"}),step:.1,fullWidth:!0,type:"number",value:""+t.getBackgroundFadeInDuration(),onChange:function(e){var n=t.getBackgroundFadeInDuration(),r=Math.max(0,parseFloat(e));n!==r&&(t.setBackgroundFadeInDuration(r),f())}})]}),(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Progress bar"})}),(0,d.jsx)(Wn.Z,{label:(0,d.jsx)(b.Trans,{id:"Show progress bar"}),checked:t.getShowProgressBar(),onCheck:function(e,n){t.setShowProgressBar(n),f()}}),(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsx)(An.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Progress bar minimum width"}),fullWidth:!0,type:"number",value:""+t.getProgressBarMinWidth(),onChange:function(e){var n=t.getProgressBarMinWidth(),r=Math.max(0,parseFloat(e));n!==r&&(t.setProgressBarMinWidth(r),f())},helperMarkdownText:r._({id:"In pixels. 0 to ignore."})}),(0,d.jsx)(An.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Progress bar width"}),fullWidth:!0,type:"number",value:""+t.getProgressBarWidthPercent(),onChange:function(e){var n=t.getProgressBarWidthPercent(),r=Math.min(100,Math.max(1,parseFloat(e)));n!==r&&(t.setProgressBarWidthPercent(r),f())},helperMarkdownText:r._({id:"As a percent of the game width."})}),(0,d.jsx)(An.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Progress bar maximum width"}),fullWidth:!0,type:"number",value:""+t.getProgressBarMaxWidth(),onChange:function(e){var n=t.getProgressBarMaxWidth(),r=Math.max(0,parseFloat(e));n!==r&&(t.setProgressBarMaxWidth(r),f())},helperMarkdownText:r._({id:"In pixels. 0 to ignore."})})]}),(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsx)(An.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Progress bar height"}),fullWidth:!0,type:"number",value:""+t.getProgressBarHeight(),onChange:function(e){var n=t.getProgressBarHeight(),r=Math.max(1,parseFloat(e));n!==r&&(t.setProgressBarHeight(r),f())},helperMarkdownText:r._({id:"In pixels."})}),(0,d.jsx)(Jn.Z,{fullWidth:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Progress bar color"}),disableAlpha:!0,color:(0,Qn.m0)(t.getProgressBarColor()),onChange:function(e){var n=t.getProgressBarColor(),r=(0,Qn.UQ)(e);n!==r&&(t.setProgressBarColor(r),f())}})]}),(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Duration"})}),(0,d.jsx)(An.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Minimum duration of the screen (in seconds)"}),step:.1,fullWidth:!0,type:"number",value:""+t.getMinDuration(),onChange:function(e){var r=Math.max(0,parseFloat(e));r<rr&&!n.isGDevelopWatermarkShown()&&s.current&&!s.current.checkUserHasSubscription()||t.getMinDuration()!==r&&(t.setMinDuration(r),h.current.minDuration=r,f())},helperMarkdownText:r._({id:"When previewing the game in the editor, this duration is ignored (the game preview starts as soon as possible)."})}),(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsx)(An.Z,{floatingLabelText:t.isGDevelopLogoShownDuringLoadingScreen()?(0,d.jsx)(b.Trans,{id:"Logo and progress fade in delay (in seconds)"}):(0,d.jsx)(b.Trans,{id:"Progress fade in delay (in seconds)"}),step:.1,fullWidth:!0,type:"number",value:""+t.getLogoAndProgressLogoFadeInDelay(),onChange:function(e){var r=Math.max(0,parseFloat(e));r>or&&!n.isGDevelopWatermarkShown()&&s.current&&!s.current.checkUserHasSubscription()||t.getLogoAndProgressLogoFadeInDelay()!==r&&(t.setLogoAndProgressLogoFadeInDelay(r),h.current.logoAndProgressLogoFadeInDelay=r,f())}}),(0,d.jsx)(An.Z,{floatingLabelText:t.isGDevelopLogoShownDuringLoadingScreen()?(0,d.jsx)(b.Trans,{id:"Logo and progress fade in duration (in seconds)"}):(0,d.jsx)(b.Trans,{id:"Progress fade in duration (in seconds)"}),step:.1,fullWidth:!0,type:"number",value:""+t.getLogoAndProgressFadeInDuration(),onChange:function(e){var r=Math.max(0,parseFloat(e));r>ir&&!n.isGDevelopWatermarkShown()&&s.current&&!s.current.checkUserHasSubscription()||t.getLogoAndProgressFadeInDuration()!==r&&(t.setLogoAndProgressFadeInDuration(r),h.current.logoAndProgressFadeInDuration=r,f())}})]}),t.isGDevelopLogoShownDuringLoadingScreen()?(0,d.jsx)(De.Z,{kind:"info",children:(0,d.jsx)(b.Trans,{id:"Progress bar fade in delay and duration will be applied to GDevelop logo."})}):null,(0,d.jsx)(Kn.Z,{ref:s,onChangeSubscription:i,mode:"mandatory",id:"Disable GDevelop splash at startup",title:(0,d.jsx)(b.Trans,{id:"Disable GDevelop splash at startup"})})]})}})},lr=n(12203);function cr(e,t,n){var r=n.gameResolutionWidth,i=n.gameResolutionHeight,o=n.adaptGameResolutionAtRuntime,a=n.name,s=n.description,l=n.authorIds,c=n.authorUsernames,u=n.author,d=n.version,p=n.packageName,f=n.orientation,h=n.scaleMode,g=n.pixelsRounding,x=n.sizeOnStartupMode,m=n.antialiasingMode,v=n.isAntialisingEnabledOnMobile,b=n.minFPS,C=n.maxFPS,j=n.isFolderProject,y=n.useDeprecatedZeroAsDefaultZOrder;e.setGameResolutionSize(r,i),e.setAdaptGameResolutionAtRuntime(o),e.setName(a),e.setDescription(s);var Z=e.getAuthorIds();Z.clear(),l.forEach((function(e){return Z.push_back(e)}));var k=e.getAuthorUsernames();return k.clear(),c.forEach((function(e){return k.push_back(e)})),e.setAuthor(u),e.setVersion(d),e.setPackageName(p),e.setOrientation(f),e.setScaleMode(h),e.setPixelsRounding(g),e.setSizeOnStartupMode(x),e.setAntialiasingMode(m),e.setAntialisingEnabledOnMobile(v),e.setMinimumFPS(b),e.setMaximumFPS(C),e.setFolderProject(j),e.setUseDeprecatedZeroAsDefaultZOrder(y),(0,Gn.vv)(t,(0,Gn.nu)(t,e))}var ur=function(e){var t=e.project,n=e.hotReloadPreviewButtonProps,r=l.useMemo((function(){return function(e){return{gameResolutionWidth:e.getGameResolutionWidth(),gameResolutionHeight:e.getGameResolutionHeight(),adaptGameResolutionAtRuntime:e.getAdaptGameResolutionAtRuntime(),name:e.getName(),description:e.getDescription(),author:e.getAuthor(),authorIds:e.getAuthorIds().toJSArray(),authorUsernames:e.getAuthorUsernames().toJSArray(),version:e.getVersion(),packageName:e.getPackageName(),orientation:e.getOrientation(),scaleMode:e.getScaleMode(),pixelsRounding:e.getPixelsRounding(),sizeOnStartupMode:e.getSizeOnStartupMode(),antialiasingMode:e.getAntialiasingMode(),isAntialisingEnabledOnMobile:e.isAntialisingEnabledOnMobile(),minFPS:e.getMinimumFPS(),maxFPS:e.getMaximumFPS(),isFolderProject:e.isFolderProject(),useDeprecatedZeroAsDefaultZOrder:e.getUseDeprecatedZeroAsDefaultZOrder()}}(t)}),[t]),a=l.useState(r.name),c=(0,s.Z)(a,2),u=c[0],p=c[1],f=l.useState(r.description),h=(0,s.Z)(f,2),g=h[0],x=h[1],m=l.useState(r.authorIds),v=(0,s.Z)(m,2),y=v[0],Z=v[1],k=l.useState(r.authorUsernames),S=(0,s.Z)(k,2),P=S[0],E=S[1],I=l.useState(r.gameResolutionWidth),M=(0,s.Z)(I,2),L=M[0],A=M[1],O=l.useState(r.gameResolutionHeight),R=(0,s.Z)(O,2),D=R[0],_=R[1],B=l.useState(r.adaptGameResolutionAtRuntime),N=(0,s.Z)(B,2),U=N[0],H=N[1],V=l.useState(r.author),z=(0,s.Z)(V,2),W=z[0],G=z[1],q=l.useState(r.version),X=(0,s.Z)(q,2),Q=X[0],ee=X[1],ne=l.useState(r.packageName),re=(0,s.Z)(ne,2),ie=re[0],oe=re[1],ae=l.useState(r.orientation),se=(0,s.Z)(ae,2),ce=se[0],ue=se[1],de=l.useState(r.scaleMode),pe=(0,s.Z)(de,2),fe=pe[0],ge=pe[1],xe=l.useState(r.pixelsRounding),me=(0,s.Z)(xe,2),ve=me[0],be=me[1],Ce=l.useState(r.sizeOnStartupMode),je=(0,s.Z)(Ce,2),ye=je[0],Ze=je[1],ke=l.useState(r.antialiasingMode),we=(0,s.Z)(ke,2),Te=we[0],Se=we[1],Pe=l.useState(r.isAntialisingEnabledOnMobile),Ee=(0,s.Z)(Pe,2),Ie=Ee[0],Me=Ee[1],Le=l.useState(r.minFPS),Ae=(0,s.Z)(Le,2),Fe=Ae[0],Oe=Ae[1],Re=l.useState(r.maxFPS),_e=(0,s.Z)(Re,2),Be=_e[0],Ne=_e[1],Ue=l.useState(r.isFolderProject),He=(0,s.Z)(Ue,2),Ve=He[0],ze=He[1],We=l.useState(r.useDeprecatedZeroAsDefaultZOrder),Ge=(0,s.Z)(We,2),Ye=Ge[0],qe=Ge[1],Xe=(0,w.U)().isMobile,Ke=l.useState(e.initialTab),Je=(0,s.Z)(Ke,2),Qe=Je[0],$e=Je[1],et=ut({serializableObject:t.getLoadingScreen(),onCancel:e.onClose}),tt=et.onCancelChanges,nt=et.notifyOfChange,rt=ut({serializableObject:t.getExtensionProperties(),onCancel:tt}),it=rt.onCancelChanges,ot=rt.notifyOfChange,at=function(){var n=(0,o.Z)((0,i.Z)().mark((function n(){var o;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=u!==r.name?{newName:u}:{},n.next=3,e.onApply(o);case 3:if(n.sent){n.next=6;break}return n.abrupt("return");case 6:cr(t,e.i18n,{gameResolutionWidth:L,gameResolutionHeight:D,adaptGameResolutionAtRuntime:U,name:u,description:g,author:W,authorIds:y,authorUsernames:P,version:Q,packageName:ie,orientation:ce,scaleMode:fe,pixelsRounding:ve,antialiasingMode:Te,isAntialisingEnabledOnMobile:Ie,sizeOnStartupMode:ye,minFPS:Fe,maxFPS:Be,isFolderProject:Ve,useDeprecatedZeroAsDefaultZOrder:Ye})&&e.onPropertiesApplied(o);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,d.jsx)(b.I18n,{children:function(r){var i=r.i18n;return(0,d.jsx)(l.Fragment,{children:(0,d.jsxs)(te.ZP,{id:"project-properties-dialog",title:(0,d.jsx)(b.Trans,{id:"Game properties"}),actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),primary:!1,onClick:it},"cancel"),(0,d.jsx)(te.vF,{id:"apply-button",label:(0,d.jsx)(b.Trans,{id:"Apply"}),primary:!0,onClick:at},"apply")],secondaryActions:[(0,d.jsx)(Hn.Z,{helpPagePath:"/interface/project-manager/properties"},"help"),n?(0,d.jsx)(J.Z,{leftIcon:(0,d.jsx)(j,{}),label:Xe?(0,d.jsx)(b.Trans,{id:"Preview"}):(0,d.jsx)(b.Trans,{id:"Run a preview (with loading & branding)"}),onClick:n.launchProjectWithLoadingScreenPreview},"hot-reload-preview-button"):null],onRequestClose:it,onApply:at,open:e.open,fullHeight:!0,fixedContent:(0,d.jsx)(le.m,{value:Qe,onChange:$e,options:[{label:(0,d.jsx)(b.Trans,{id:"Properties"}),value:"properties"},{label:(0,d.jsx)(b.Trans,{id:"Branding and Loading screen"}),value:"loading-screen"}]}),children:["properties"===Qe&&(0,d.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Game Info"})}),(0,d.jsx)(lr.ZP,{name:u,setName:function(e){e.trim()!==u&&(p(e.trim()),ot())},description:g,setDescription:function(e){e!==g&&(x(e.trim()),ot())},project:t,authorIds:y,setAuthorIds:function(e){Z(e),ot()},setAuthorUsernames:function(e){E(e),ot()},orientation:ce,setOrientation:function(e){e!==ce&&(ue(e),ot())}}),(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Packaging"})}),(0,d.jsx)(An.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Package name (for iOS and Android)"}),fullWidth:!0,hintText:"com.example.mygame",type:"text",value:ie,onChange:function(e){e!==ie&&(oe(e),ot())},errorText:(0,Gn.O8)(ie)?void 0:(0,d.jsx)(b.Trans,{id:'The package name is containing invalid characters or not following the convention "xxx.yyy.zzz" (numbers allowed after a letter only).'})}),(0,d.jsx)(An.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Version number (X.Y.Z)"}),fullWidth:!0,hintText:"1.0.0",type:"text",value:Q,onChange:function(e){e!==Q&&(ee(e),ot())}}),(0,d.jsx)(An.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Publisher name"}),fullWidth:!0,translatableHintText:{id:"Your name"},helperMarkdownText:i._({id:"This will be used when packaging and submitting your application to the stores."}),type:"text",value:W,onChange:function(e){e!==W&&(G(e),ot())}}),Ye?(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Z Order of objects created from events"})}),(0,d.jsx)(De.Z,{kind:"info",children:(0,d.jsx)(b.Trans,{id:"When you create an object using an action, GDevelop now sets the Z order of the object to the maximum value that was found when starting the scene for each layer. This allow to make sure that objects that you create are in front of others. This game was created before this change, so GDevelop maintains the old behavior: newly created objects Z order is set to 0. It's recommended that you switch to the new behavior by clicking the following button."})}),(0,d.jsx)(T.Z,{onClick:function(){Y.ZP.showConfirmDialog(i._({id:"Make sure to verify all your events creating objects, and optionally add an action to set the Z order back to 0 if it's important for your game. Do you want to continue (recommended)?"}))&&(qe(!1),ot())},label:(0,d.jsx)(b.Trans,{id:"Switch to create objects with the highest Z order of the layer"})})]}):null,(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Resolution and rendering"})}),(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsx)(An.Z,{id:"game-resolution-width",floatingLabelText:(0,d.jsx)(b.Trans,{id:"Game resolution width"}),fullWidth:!0,type:"number",value:""+L,onChange:function(e){var t=Math.max(1,parseInt(e,10));t!==L&&(A(t),ot())}}),(0,d.jsx)(An.Z,{id:"game-resolution-height",floatingLabelText:(0,d.jsx)(b.Trans,{id:"Game resolution height"}),fullWidth:!0,type:"number",value:""+D,onChange:function(e){var t=Math.max(1,parseInt(e,10));t!==D&&(_(t),ot())}})]}),(0,d.jsxs)(K.Z,{id:"game-resolution-resize-mode",fullWidth:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Game resolution resize mode (fullscreen or window)"}),value:ye,onChange:function(e,t,n){n!==ye&&(Ze(n),ot())},children:[(0,d.jsx)($.Z,{value:"",label:{id:"No changes to the game size"}}),(0,d.jsx)($.Z,{value:"adaptWidth",label:{id:"Change width to fit the screen or window size"}}),(0,d.jsx)($.Z,{value:"adaptHeight",label:{id:"Change height to fit the screen or window size"}})]}),(0,d.jsx)(Wn.Z,{label:(0,d.jsx)(b.Trans,{id:"Update resolution during the game to fit the screen or window size"}),disabled:""===ye,checked:U,onCheck:function(e,t){H(t),ot()}}),(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsx)(An.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Minimum FPS"}),fullWidth:!0,type:"number",value:""+Fe,onChange:function(e){var t=Math.max(0,parseInt(e,10));t!==Fe&&(Oe(t),ot())}}),(0,d.jsx)(An.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Maximum FPS (0 for unlimited)"}),fullWidth:!0,type:"number",value:""+Be,onChange:function(e){var t=Math.max(0,parseInt(e,10));t!==Be&&(Ne(t),ot())}})]}),Be>0&&Be<60&&(0,d.jsx)(he.Z,{identifier:"maximum-fps-too-low",kind:"warning",children:(0,d.jsx)(b.Trans,{id:"Most monitors have a refresh rate of 60 FPS. Setting a maximum number of FPS under 60 will force the game to skip frames, and the real number of FPS will be way below 60, making the game laggy and impacting the gameplay negatively. Consider putting 60 or more for the maximum number or FPS, or disable it by setting 0."})}),Fe<20&&(0,d.jsx)(he.Z,{identifier:"minimum-fps-too-low",kind:"warning",children:(0,d.jsx)(b.Trans,{id:"Setting the minimum number of FPS below 20 will increase a lot the time that is allowed between the simulation of two frames of the game. If case of a sudden slowdown, or on slow computers, this can create buggy behaviors like objects passing beyond a wall. Consider setting 20 as the minimum FPS."})}),(0,d.jsxs)(K.Z,{fullWidth:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:'Scale mode (also called "Sampling")'}),value:fe,onChange:function(e,t,n){n!==fe&&(ge(n),ot())},children:[(0,d.jsx)($.Z,{value:"linear",label:{id:"Linear (antialiased rendering, good for most games)"}}),(0,d.jsx)($.Z,{value:"nearest",label:{id:"Nearest (no antialiasing, good for pixel perfect games)"}})]}),(0,d.jsx)(Wn.Z,{label:(0,d.jsx)(b.Trans,{id:"Round pixels when rendering, useful for pixel perfect games."}),checked:ve,onCheck:function(e,t){be(t),ot()}}),"nearest"===fe&&(0,d.jsx)(he.Z,{identifier:"use-non-smoothed-textures",kind:"info",children:(0,d.jsx)(b.Trans,{id:"To obtain the best pixel-perfect effect possible, go in the resources editor and disable the Smoothing for all images of your game. It will be done automatically for new images added from now."})}),ve&&(0,d.jsx)(he.Z,{identifier:"use-pixel-rounding",kind:"info",children:(0,d.jsx)(b.Trans,{id:"To avoid flickering on objects followed by the camera, use sprites with even dimensions."})}),(0,d.jsxs)(K.Z,{fullWidth:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Antialising for 3D"}),value:"none"===Te?"never":Ie?"always":"notOnMobile",onChange:function(e,t,n){n!==fe&&(Se("never"===n?"none":"MSAA"),Me("always"===n),ot())},children:[(0,d.jsx)($.Z,{value:"notOnMobile",label:{id:"Not on mobile"}}),(0,d.jsx)($.Z,{value:"always",label:{id:"Always"}}),(0,d.jsx)($.Z,{value:"never",label:{id:"Never"}})]}),(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Project files"})}),(0,d.jsxs)(K.Z,{fullWidth:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Project file type"}),value:Ve?"folder-project":"single-file",onChange:function(e,t,n){var r="folder-project"===n;r!==Ve&&(ze(r),ot())},helperMarkdownText:i._({id:"Note that this option will only have an effect when saving your project on your computer's filesystem from the desktop app. Read about [using Git or GitHub with projects in multiple files](https://wiki.gdevelop.io/gdevelop5/tutorials/using-github-desktop/)."}),children:[(0,d.jsx)($.Z,{value:"single-file",label:{id:"Single file (default)"}}),(0,d.jsx)($.Z,{value:"folder-project",label:{id:"Multiple files, saved in folder next to the main file"}})]}),(0,d.jsx)(Xn,{project:t})]}),"loading-screen"===Qe&&(0,d.jsx)(sr,{loadingScreen:t.getLoadingScreen(),watermark:t.getWatermark(),onLoadingScreenUpdated:nt,onChangeSubscription:it,project:t,resourceManagementProps:e.resourceManagementProps})]})})}})},dr=function(e){return(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Project properties"}),scope:"project-properties",onClose:e.onClose,showOnTop:!0,children:(0,d.jsx)(ur,(0,a.Z)({},e))})},pr=n(48210),fr=n(75383),hr=n(38509),gr={container:{flex:1},grid:{overflowX:"hidden"}},xr=function(e){var t=e.disableAutoTranslate,n=e.searchItems,r=e.getSearchItemUniqueId,i=e.renderSearchItem,o=e.error,a=e.onRetry,s=l.useRef(null),c=l.useRef(0),u=l.useRef({}),p=l.useCallback((function(e,t){var n=r(e);return u.current[n]!==t&&(u.current[n]=t,!0)}),[r]),f=l.useCallback((function(e){var t=e.index;if(!n||!n[t])return 90;var i=n[t];return u.current[r(i)]||90}),[n,r]),h=l.useCallback((function(e){var t=e.key,r=e.rowIndex,o=e.style;if(!n)return null;var a=n[r];return a?(0,d.jsx)("div",{style:o,children:i(a,(function(e){p(a,e)&&s.current&&s.current.recomputeGridSize(0,r)}))},t):null}),[n,p,i]);return n?0===n.length?(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"No results returned for your search. Try something else or typing at least 2 characters."})}):(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Search results"}),scope:"list-search-result",children:(0,d.jsx)("div",{style:gr.container,className:t?"notranslate":"",children:(0,d.jsx)(hr.qj,{children:function(e){var t=e.width,r=e.height;return c.current!==t&&(u.current={},c.current=t),(0,d.jsx)(hr.rj,{ref:function(e){e&&e.recomputeGridSize(0,0),s.current=e},width:t,height:r,columnCount:1,columnWidth:t,rowHeight:f,rowCount:n.length,cellRenderer:h,style:gr.grid})}})})}):o?(0,d.jsx)(fr.Z,{onRetry:a,children:(0,d.jsx)(b.Trans,{id:"Can't load the results. Verify your internet connection or retry later."})}):(0,d.jsx)(Xe.Z,{})},mr=n(33133),vr=n(56596),br=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 3.66663C7.07953 3.66663 6.33333 4.41282 6.33333 5.33329C6.33333 6.25377 7.07953 6.99996 8 6.99996C8.92048 6.99996 9.66667 6.25377 9.66667 5.33329C9.66667 4.41282 8.92048 3.66663 8 3.66663ZM5.33333 5.33329C5.33333 3.86053 6.52724 2.66663 8 2.66663C9.47276 2.66663 10.6667 3.86053 10.6667 5.33329C10.6667 6.80605 9.47276 7.99996 8 7.99996C6.52724 7.99996 5.33333 6.80605 5.33333 5.33329Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.70925 9.61877C5.50186 9.14565 6.5698 8.83329 8 8.83329C9.4302 8.83329 10.4981 9.14565 11.2908 9.61877C12.0838 10.0921 12.5719 10.709 12.8693 11.272C13.1451 11.7943 13.0548 12.3392 12.741 12.7333C12.4405 13.1107 11.954 13.3333 11.435 13.3333H4.565C4.04603 13.3333 3.55953 13.1107 3.25898 12.7333C2.94516 12.3392 2.85485 11.7943 3.1307 11.2721C3.42807 10.709 3.91625 10.0921 4.70925 9.61877ZM5.2218 10.4774C4.60995 10.8427 4.24054 11.3119 4.01495 11.7391C3.93529 11.8899 3.96043 12.0089 4.04125 12.1104C4.13534 12.2285 4.32269 12.3333 4.565 12.3333H11.435C11.6773 12.3333 11.8646 12.2285 11.9587 12.1104C12.0396 12.0089 12.0647 11.8899 11.9851 11.7391C11.7595 11.3119 11.39 10.8427 10.7782 10.4774C10.166 10.112 9.2818 9.83329 8 9.83329C6.7182 9.83329 5.83404 10.112 5.2218 10.4774Z",fill:"currentColor"})]}))})),Cr={chip:{marginRight:2,marginLeft:2,marginBottom:2}},jr=function(e){var t=e.user,n=e.isClickable,r=void 0!==n&&n,i=e.variant,o=l.useContext(vr.Z).openUserPublicProfile;return(0,d.jsx)(be.Z,{icon:(0,d.jsx)(br,{}),size:"small",style:Cr.chip,variant:i,label:t.username,onClick:r?function(){return o(t.id)}:null,disableAutoTranslate:!0},t.username)},yr=function(e,t,n,r,i){var o=t[0],a=t[1]+1,s=e.slice(n,o),l=e.slice(o,a),c=e.slice(a,r||e.length);return[s,(0,d.jsx)("span",{style:i,children:l},"".concat(l).concat(o)),c]},Zr=function(e){var t=e.text,n=e.matchesCoordinates,r=l.useContext(f.Z);if(0===n.length)return[t];for(var i=[],o=0;o<n.length;o++){var a=n[o+1]?n[o+1][0]:void 0,s=0===o?0:n[o][0];i.push(yr(t,n[o],s,a,r.text.highlighted))}return i.map((function(e,t){return(0,d.jsx)(l.Fragment,{children:e},t)}))},kr={button:{width:"100%"},container:{display:"flex",textAlign:"left",overflow:"hidden",padding:8,width:"100%"}},wr=function(e){var t=e.id,n=e.project,r=e.extensionShortHeader,i=e.matches,o=e.onChoose,a=e.onHeightComputed,s=n.hasEventsFunctionsExtensionNamed(r.name),c=!!s&&"gdevelop-extension-store"===n.getEventsFunctionsExtension(r.name).getOriginName(),u=l.useRef(null);l.useLayoutEffect((function(){u.current&&a(u.current.getBoundingClientRect().height)}));var p=function(e){var t=r[e];if(!i)return t;var n=i.filter((function(t){return t.key===e}));return 0===n.length?t:(0,d.jsx)(Zr,{text:t,matchesCoordinates:n[0].indices})};return(0,d.jsx)(O.Z,{id:t,onClick:o,focusRipple:!0,style:kr.button,children:(0,d.jsx)("div",{style:kr.container,ref:u,children:(0,d.jsxs)(C.pJ,{children:[(0,d.jsx)(mr.q,{alt:r.fullName,src:r.previewIconUrl,size:64}),(0,d.jsxs)(L.sg,{expand:!0,children:[(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"baseline",children:[(0,d.jsx)(F.Z,{noMargin:!0,allowBrowserAutoTranslate:!1,displayInlineAsSpan:!0,children:p("fullName")}),s&&(0,d.jsx)(be.Z,{size:"small",label:c?(0,d.jsx)(b.Trans,{id:"Already installed"}):(0,d.jsx)(b.Trans,{id:"Already in project"}),color:"secondary",variant:"outlined"}),"community"===r.tier&&(0,d.jsx)(be.Z,{size:"small",label:(0,d.jsx)(b.Trans,{id:"Community extension"}),color:"primary"})]}),r.authors&&(0,d.jsx)(L.x1,{children:(0,d.jsx)("div",{style:{flexWrap:"wrap"},children:r.authors.map((function(e){return(0,d.jsx)(jr,{user:e},e.id)}))})}),(0,d.jsx)(F.Z,{noMargin:!0,size:"body2",allowBrowserAutoTranslate:!1,displayInlineAsSpan:!0,children:p("shortDescription")})]})]})})})},Tr=n(39126),Sr=n(63854),Pr=n(18930),Er=n(81439),Ir=function(e,t){return(0,l.useMemo)((function(){var n=t.extensionName||t.name;return e.hasEventsFunctionsExtensionNamed(n)?function(e,t){try{var n=(0,Er.diff)(e,t);if(["patch","minor","major"].includes(n))return{type:n,currentVersion:e,newestVersion:t}}catch(r){if(e!==t)return{type:"minor",currentVersion:e,newestVersion:t}}return null}(e.getEventsFunctionsExtension(n).getVersion(),t.version):null}),[e,t])},Mr=function(e){return e.description.substr(0,e.shortDescription.length)===e.shortDescription?e.description.substr(e.shortDescription.length):e.description},Lr=function(e){var t=e.extensionShortHeader,n=e.isInstalling,r=e.onClose,a=e.onInstall,c=e.onEdit,u=e.project,p=u.hasEventsFunctionsExtensionNamed(t.name),f=p?u.getEventsFunctionsExtension(t.name):null,h=!!f&&"gdevelop-extension-store"===f.getOriginName(),g=Ir(u,t),x=l.useState(null),m=(0,s.Z)(x,2),v=m[0],j=m[1],y=l.useState(null),Z=(0,s.Z)(y,2),k=Z[0],w=Z[1],T=l.useCallback((function(){j(null),(0,Tr.Fk)(t).then((function(e){w(e)}),(function(e){j(e)}))}),[t]);l.useEffect((function(){return T()}),[T]);var S=(0,Tr.a2)((0,Qe.r1)(),t),P=!n&&S,E=l.useCallback((function(){if(P&&a)if(p){var e="This extension is already in your project, this will install the latest version. You may have to do some adaptations to make sure your game still works. Do you want to continue?";if(h||(e="An other extension with the same name is already in your project. Installing this extension will overwrite your current extension. Do you want to continue?"),!Y.ZP.showConfirmDialog(e))return;a()}else a()}),[a,P,p,h]),I=function(){var e=(0,lt.Z)().showConfirmation;return(0,o.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({title:{id:"Outdated extension"},message:{id:"The extension installed in this project is not up to date. Consider upgrading it before reporting any issue."},confirmButtonLabel:{id:"Close"},dismissButtonLabel:{id:"Report anyway"}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))}(),M=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=6;break}return e.next=3,I();case 3:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:Y.ZP.openExternalURL("https://github.com/GDevelopApp/GDevelop-extensions/issues/new"+"?assignees=&labels=&template=bug-report.md&title=[".concat(t.name,"] Issue short description"));case 7:case"end":return e.stop()}}),e)}))),[t.name,g,I]);return(0,d.jsx)(te.ZP,{title:t.fullName,id:"install-extension-dialog",actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Back"}),primary:!1,onClick:r,disabled:n},"close"),a?(0,d.jsx)(Sr.Z,{isLoading:n,children:(0,d.jsx)(te.vF,{id:"install-extension-button",label:S?p?h?g?"community"===t.tier?(0,d.jsx)(b.Trans,{id:"Update (could break the project)"}):(0,d.jsx)(b.Trans,{id:"Update"}):(0,d.jsx)(b.Trans,{id:"Re-install"}):(0,d.jsx)(b.Trans,{id:"Replace existing extension"}):(0,d.jsx)(b.Trans,{id:"Install in project"}):(0,d.jsx)(b.Trans,{id:"Not compatible"}),primary:!0,onClick:E,disabled:!P})},"install"):null],secondaryActions:[c?(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Open in editor"}),onClick:c},"edit-extension"):void 0,p?(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Report an issue"}),onClick:function(){return M()}},"report-extension"):void 0,k&&k.helpPath?(0,d.jsx)(Hn.Z,{helpPagePath:k.helpPath},"help-button"):void 0].filter(Boolean),open:!0,cannotBeDismissed:n,onRequestClose:r,onApply:a?E:r,children:(0,d.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[(0,d.jsxs)(L.x1,{alignItems:"flex-start",noMargin:!0,children:[(0,d.jsx)(mr.q,{alt:t.fullName,src:t.previewIconUrl,size:64}),(0,d.jsxs)(L.sg,{expand:!0,children:[(0,d.jsx)(F.Z,{noMargin:!0,size:"body2",children:g&&f?(0,d.jsx)(b.Trans,{id:"Version {0} ({1} available)",values:{0:f.getVersion(),1:t.version}}):(0,d.jsx)(b.Trans,{id:"Version {0}",values:{0:t.version}})}),(0,d.jsx)(L.x1,{children:(0,d.jsx)("div",{style:{flexWrap:"wrap"},children:t.authors&&t.authors.map((function(e){return(0,d.jsx)(jr,{user:e,isClickable:!0},e.id)}))})})]})]}),(0,d.jsx)(F.Z,{noMargin:!0,children:k?k.shortDescription:t.shortDescription||""}),(0,d.jsx)(Pr.Z,{}),k&&(0,d.jsx)(Ke.r,{source:Mr(k),isStandaloneText:!0}),"community"===t.tier&&(0,d.jsx)(De.Z,{kind:"warning",children:(0,d.jsx)(b.Trans,{id:"This is an extension made by a community member \u2014 but not reviewed by the GDevelop extension team. As such, we can't guarantee it meets all the quality standards of official extensions. It could also not be compatible with older GDevelop versions. In case of doubt, contact the author to know more about what the extension does or inspect its content before using it."})}),!S&&(0,d.jsx)(De.Z,{kind:"error",children:(0,d.jsx)(b.Trans,{id:"Unfortunately, this extension requires a newer version of GDevelop to work. Update GDevelop to be able to use this extension in your project."})}),!k&&!v&&(0,d.jsx)(Xe.Z,{}),!k&&v&&(0,d.jsx)(fr.Z,{onRetry:T,children:(0,d.jsx)(b.Trans,{id:"Can't load the extension registry. Verify your internet connection or try again later."})})]})})},Ar=n(62800),Fr=n(39173),Or=function(e){return e.stopPropagation()},Rr={root:{height:30,display:"flex",justifyContent:"space-between"},input:{width:"100%"},searchContainer:{position:"relative",margin:"auto 8px",width:"100%"}},Dr=l.forwardRef((function(e,t){var n=l.useRef(null),r=l.useCallback((function(){n.current&&n.current.focus()}),[n]);l.useImperativeHandle(t,(function(){return{focus:r}}));var i,o=(i=e.textAlign,(0,R.Z)({root:{textAlign:i||"left",cursor:"default"}})()),a=e.onChange||void 0,s=!0,c=l.Children.map(e.children,(function(e){return null!==e&&e.props?e.props.value:null}));c?s=0!==c.filter((function(t){return t===e.value})).length:console.error("SelectField has been passed no or invalid children. Only SelectOption and null are supported.");var u=s?e.value:"";return(0,d.jsx)(b.I18n,{children:function(t){var r=t.i18n;return(0,d.jsx)(de.Z,{style:Rr.root,background:"light",children:(0,d.jsx)("div",{style:Rr.searchContainer,children:(0,d.jsxs)(Fr.Z,{select:!0,color:"secondary",disabled:e.disabled,fullWidth:e.fullWidth,value:u,onClick:e.stopPropagationOnClick?Or:void 0,onChange:a?function(e){a(e,-1,e.target.value)}:void 0,InputProps:{style:Rr.input,disableUnderline:!0},InputLabelProps:{shrink:!0},SelectProps:{native:!0,classes:o},margin:"none",style:Rr.input,inputRef:n,children:[s?null:(0,d.jsx)("option",{value:"",disabled:!0,children:e.translatableHintText?r._(e.translatableHintText):r._({id:"Choose an option"})}),e.children]})})})}})})),_r=function(e){return e.name},Br=function(e){var t=e.isInstalling,n=e.project,r=e.onInstall,a=e.showOnlyWithBehaviors,c=l.useContext(se.ZP),u=l.useState(null),p=(0,s.Z)(u,2),f=p[0],h=p[1],g=l.useContext(pr.H),x=g.filters,m=g.searchResults,v=g.error,j=g.fetchExtensionsAndFilters,y=g.filtersState,Z=g.searchText,k=g.setSearchText,w=g.allCategories,T=g.chosenCategory,S=g.setChosenCategory;l.useEffect((function(){j()}),[j]);var P=m?m.filter((function(e){var t=e.item;return!a||t.eventsBasedBehaviorsCount>0})):null,E=l.useMemo((function(){return{add:y.addFilter,remove:y.removeFilter,chosenTags:y.chosenFilters}}),[y]),I=function(e){if(!m)return[];var t=m.find((function(t){return t.item.name===e.name}));return t?t.matches:[]},M=(0,gt.Z)("intro-behaviors-and-functions").DismissableTutorialMessage;return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsxs)(C.ak,{expand:!0,noMargin:!0,useFullHeight:!0,children:[(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsxs)(Dr,{value:T,onChange:function(e,t,n){S(n)},children:[(0,d.jsx)($.Z,{value:"",label:{id:"All categories"}}),w.map((function(e){return(0,d.jsx)($.Z,{value:e,label:e},e)}))]}),(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,d.jsx)(st.Z,{id:"extension-search-bar",value:Z,onChange:k,onRequestSearch:function(){},tagsHandler:E,tags:x&&x.allTags,placeholder:{id:"Search extensions"},autoFocus:"desktop"})})]}),(0,d.jsx)(L.sg,{children:(0,d.jsx)(ee.Z,{onToggle:function(e,t){return c.setShowCommunityExtensions(t)},toggled:c.values.showCommunityExtensions,labelPosition:"right",label:(0,d.jsx)(b.Trans,{id:"Show community extensions (not officially reviewed)"})})}),M]}),(0,d.jsx)(xr,{disableAutoTranslate:!0,onRetry:j,error:v,searchItems:P&&P.map((function(e){return e.item})),getSearchItemUniqueId:_r,renderSearchItem:function(e,t){return(0,d.jsx)(wr,{id:"extension-list-item-".concat(e.name),project:n,onHeightComputed:t,extensionShortHeader:e,matches:I(e),onChoose:function(){(0,Ar.pk)(e.name),h(e)}},e.name)}})]}),!!f&&(0,d.jsx)(Lr,{project:n,isInstalling:t,extensionShortHeader:f,onInstall:(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,Ar.ix)(f.name),e.next=3,r(f);case 3:e.sent&&h(null);case 5:case"end":return e.stop()}}),e)}))),onClose:function(){return h(null)}})]})},Nr=n(28923),Ur=n(30141),Hr=n(87706),Vr=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,r,o){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Tr.RT)(o);case 3:return a=e.sent,e.next=6,(0,Hr.An)(r,n,[a]);case 6:return e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),(0,Ur.gR)({message:t._({id:"Unable to download and install the extension. Verify that your internet connection is working or try again later."}),rawError:e.t0,errorId:"download-extension-error"}),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),zr=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,r){var o,a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.getEventsFunctionsExtensionOpener()){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,o.chooseEventsFunctionExtensionFile();case 6:if(a=e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,o.readEventsFunctionExtensionFile(a);case 11:if(s=e.sent,!r.hasEventsFunctionsExtensionNamed(s.name)){e.next=16;break}if(Y.ZP.showConfirmDialog(t._({id:"An extension with this name already exists in the project. Importing this extension will replace it: are you sure you want to continue?"}))){e.next=16;break}return e.abrupt("return",!1);case 16:return e.next=18,(0,Hr.An)(n,r,[s],!1);case 18:return e.abrupt("return",!0);case 21:return e.prev=21,e.t0=e.catch(3),(0,Ur.gR)({message:t._({id:"An error happened while loading this extension. Please check that it is a proper extension file and compatible with this version of GDevelop"}),rawError:e.t0,errorId:"extension-loading-error"}),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,null,[[3,21]])})));return function(t,n,r){return e.apply(this,arguments)}}(),Wr=n(51535),Gr=n(35213),Yr=n(3550),qr=function(e){var t=e.identifier,n=e.show,r=e.touchScreenMessage,i=e.message,o=l.useContext(Yr.Z).currentlyRunningInAppTutorial,a=l.useContext(se.ZP),s=l.useContext(f.Z),u=(0,Gr.BF)();return o?null:(0,d.jsx)(c.Z,{open:n&&!a.values.hiddenAlertMessages[t],message:"touch"===u&&r?r:i,action:(0,d.jsx)(Wr.Z,{color:"light"===s.palette.type?"secondary":"primary",size:"small",onClick:function(){a.showAlertMessage(t,!1)},children:(0,d.jsx)(b.Trans,{id:"Got it"})})})},Xr=n(2861),Kr=n(17361),Jr=function(e){var t=e.project,n=e.onClose,r=e.onInstallExtension,a=e.onExtensionInstalled,c=e.onCreateNew,u=(0,w.U)().isMobile,p=l.useState(!1),f=(0,s.Z)(p,2),h=f[0],g=f[1],x=l.useState(!1),m=(0,s.Z)(x,2),v=m[0],C=m[1],j=l.useContext(Nr.Z),y=l.useContext(tr.ZP),Z=(0,Xr.zi)(y,Xr.Ch,Vr),k=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,o){var s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g(!0),e.prev=1,!o){e.next=9;break}return r(o),e.next=6,Z(n,t,j,o);case 6:s=e.sent,e.next=12;break;case 9:return e.next=11,zr(n,j,t);case 11:s=e.sent;case 12:if(!s){e.next=16;break}return C(!0),a&&a(),e.abrupt("return",!0);case 16:return e.abrupt("return",!1);case 17:return e.prev=17,g(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,,17,20]])})));return function(t,n){return e.apply(this,arguments)}}(),T=j.getEventsFunctionsExtensionOpener();return(0,d.jsx)(b.I18n,{children:function(e){var r=e.i18n;return(0,d.jsxs)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Search for New Extensions"}),id:"extension-search-dialog",fullHeight:!0,actions:[(0,d.jsx)(J.Z,{id:"close-button",label:(0,d.jsx)(b.Trans,{id:"Close"}),primary:!0,onClick:n,disabled:h},"close")],secondaryActions:[(0,d.jsx)(Hn.Z,{helpPagePath:"/extensions/search"},"help"),T?(0,d.jsx)(J.Z,{leftIcon:(0,d.jsx)(Kr.Z,{}),label:u?(0,d.jsx)(b.Trans,{id:"Import"}):(0,d.jsx)(b.Trans,{id:"Import extension"}),onClick:function(){k(r)},disabled:h},"import"):null,c?(0,d.jsx)(J.Z,{onClick:c,label:u?(0,d.jsx)(b.Trans,{id:"Create"}):(0,d.jsx)(b.Trans,{id:"Create a new extension"}),leftIcon:(0,d.jsx)(vt.Z,{})},"create-new"):null],flexBody:!0,open:!0,cannotBeDismissed:h,onRequestClose:n,children:[(0,d.jsx)(Br,{isInstalling:h,onInstall:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k(r,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),project:t,showOnlyWithBehaviors:!1}),(0,d.jsx)(qr,{identifier:"extension-installed-explanation",message:(0,d.jsx)(b.Trans,{id:"The extension was added to the project. You can now use it in the list of actions/conditions and, if it's a behavior, in the list of behaviors for an object."}),show:v})]})}})},Qr=function(e){return(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Extensions search"}),scope:"extensions-search-dialog",onClose:e.onClose,children:(0,d.jsx)(Jr,(0,a.Z)({},e))})},$r=n(29277),ei=n(60136),ti=n(29388),ni=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){return(0,ot.Z)(this,n),t.apply(this,arguments)}return(0,at.Z)(n,[{key:"render",value:function(){var e=this.props.behaviorSharedData,t=(0,qn.Z)(e.getProperties(),(function(e){return e.getProperties()}),(function(e,t,n){e.updateProperty(t,n)}));return(0,d.jsx)(L.sg,{expand:!0,children:t.length?(0,d.jsx)(Yn.Z,{schema:t,instances:[e],resourceManagementProps:this.props.resourceManagementProps}):(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"There is nothing to configure for this behavior. You can still use events to interact with the object and this behavior."})})})}}]),n}(l.Component),ri=n(83306),ii=n.n(ri),oi=n(14932),ai=n(95644),si=n(3108),li=n(94446),ci=n.g.gd,ui=function(e){var t=e.open,n=e.layout,r=e.project,i=e.onApply,o=e.onClose,a=e.onOpenMoreSettings,c=e.onEditVariables,u=e.resourceManagementProps,p=l.useState(n.getWindowDefaultTitle()),f=(0,s.Z)(p,2),h=f[0],g=f[1],x=l.useState(n.stopSoundsOnStartup()),m=(0,s.Z)(x,2),v=m[0],j=m[1],y=l.useState({r:n.getBackgroundColorRed(),g:n.getBackgroundColorGreen(),b:n.getBackgroundColorBlue(),a:1}),Z=(0,s.Z)(y,2),k=Z[0],w=Z[1];l.useEffect((function(){t&&n&&(g(n.getWindowDefaultTitle()),j(n.stopSoundsOnStartup()),w({r:n.getBackgroundColorRed(),g:n.getBackgroundColorGreen(),b:n.getBackgroundColorBlue(),a:1}))}),[t,n]);var S=function(){n.setWindowDefaultTitle(h),n.setStopSoundsOnStartup(v),n.setBackgroundColor(k?k.r:0,k?k.g:0,k?k.b:0),i()},P=[(0,d.jsx)(te.vF,{label:(0,d.jsx)(b.Trans,{id:"Ok"}),primary:!0,onClick:S},"ok")],E=n.getAllBehaviorSharedDataNames().toJSArray().map((function(e){var t=n.getBehaviorSharedData(e);if(function(e,t){return 0===e.getPointer(t)}(ci,t))return null;var i=t.getProperties(),o=(0,qn.Z)(i,(function(e){return t.getProperties()}),(function(e,n,r){t.updateProperty(n,r)})),a=t.getTypeName(),s=ci.MetadataProvider.getBehaviorMetadata(ci.JsPlatform.get(),a),l=((0,li.r1)(a),s.getIconFilename());return!!o.length&&(0,d.jsxs)(si.UQ,{defaultExpanded:!0,id:"behavior-parameters-".concat(e),children:[(0,d.jsxs)(si._m,{actions:[(0,d.jsx)(oi.Z,{size:"small",helpPagePath:s.getHelpPath()},"help")],children:[l?(0,d.jsx)(mr.q,{src:l,alt:s.getFullName(),size:20}):null,(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)($r.ZP,{value:e,margin:"none",fullWidth:!0,disabled:!0,onChange:function(e,t){},id:"behavior-".concat(e,"-name-text-field")})})]}),(0,d.jsx)(si.X1,{children:(0,d.jsxs)(L.sg,{expand:!0,noMargin:!0,noOverflowParent:!0,children:[null,(0,d.jsx)(L.x1,{children:(0,d.jsx)(ni,{behaviorSharedData:t,project:r,resourceManagementProps:u},e)})]})})]},e)})).filter(Boolean);return(0,d.jsx)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"{0} properties",values:{0:n.getName()}}),actions:P,secondaryActions:[(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Edit scene variables"}),fullWidth:!0,onClick:function(){c(),o()}},"edit-scene-variables")],onRequestClose:o,onApply:S,open:t,maxWidth:"sm",children:(0,d.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[(0,d.jsx)($r.ZP,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Window title"}),fullWidth:!0,type:"text",value:h,onChange:function(e,t){return g(t)}}),(0,d.jsx)(Wn.Z,{checked:v,label:(0,d.jsx)(b.Trans,{id:"Stop music and sounds at the beginning of this scene"}),onCheck:function(e,t){return j(t)}}),(0,d.jsx)(Jn.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Scene background color"}),fullWidth:!0,disableAlpha:!0,color:(0,Qn.KC)(k),onChange:function(e){return w((0,Qn.A0)(e))}}),!ii()(E)&&(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"Any additional properties will appear here if you add behaviors to objects, like Physics behavior."})}),E,a&&(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Open advanced settings"}),fullWidth:!0,onClick:function(){a&&a(),o()}})]})})},di=n.g.gd,pi=function(e){return!e.includes(".")&&!e.includes("[")&&e.length>0},fi=function(){function e(){(0,ot.Z)(this,e)}return(0,at.Z)(e,null,[{key:"findAllGlobalVariables",value:function(e,t){return di.EventsVariablesFinder.findAllGlobalVariables(e,t).toNewVectorString().toJSArray().filter(pi)}},{key:"findAllLayoutVariables",value:function(e,t,n){return di.EventsVariablesFinder.findAllLayoutVariables(t.getCurrentPlatform(),t,n).toNewVectorString().toJSArray().filter(pi)}},{key:"findAllObjectVariables",value:function(e,t,n,r){return di.EventsVariablesFinder.findAllObjectVariables(t.getCurrentPlatform(),t,n,r).toNewVectorString().toJSArray().filter(pi)}}]),e}(),hi=function(e){return(0,d.jsx)(zn,{project:e.project,open:e.open,variablesContainer:e.layout.getVariables(),onCancel:e.onClose,onApply:e.onApply,title:(0,d.jsx)(b.Trans,{id:"{0} variables",values:{0:e.layout.getName()}}),emptyPlaceholderTitle:(0,d.jsx)(b.Trans,{id:"Add your first scene variable"}),emptyPlaceholderDescription:(0,d.jsx)(b.Trans,{id:"These variables hold additional information on a scene."}),helpPagePath:"/all-features/variables/scene-variables",hotReloadPreviewButtonProps:e.hotReloadPreviewButtonProps,onComputeAllVariableNames:function(){return fi.findAllLayoutVariables(e.project.getCurrentPlatform(),e.project,e.layout)},id:"scene-variables-dialog"})};function gi(e,t){for(var n=t.getCurrentPlatform().getAllPlatformExtensions(),r=0;r<n.size();r++)if(n.at(r).getName()===e)return!0;return t.hasEventsFunctionsExtensionNamed(e)}var xi=n(76288),mi=function(e){return(0,xi.YZ)("OPEN_PROJECT_PROPERTIES",!!e.project,{handler:e.onOpenProjectProperties}),(0,xi.YZ)("OPEN_PROJECT_LOADING_SCREEN",!!e.project,{handler:e.onOpenProjectLoadingScreen}),(0,xi.YZ)("OPEN_PROJECT_VARIABLES",!!e.project,{handler:e.onOpenProjectVariables}),(0,xi.YZ)("OPEN_PLATFORM_SPECIFIC_ASSETS_DIALOG",!!e.project,{handler:e.onOpenPlatformSpecificAssetsDialog}),(0,xi.YZ)("OPEN_PROJECT_RESOURCES",!!e.project,{handler:e.onOpenResourcesDialog}),(0,xi.YZ)("OPEN_SEARCH_EXTENSIONS_DIALOG",!!e.project,{handler:e.onOpenSearchExtensionDialog}),null};var vi=function(e){var t=e.project,n=e.onClose,r=e.extensionShortHeader,a=e.extensionName,c=e.onInstallExtension,u=e.onOpenEventsFunctionsExtension,p=l.useState(!1),f=(0,s.Z)(p,2),h=f[0],g=f[1],x=l.useContext(Nr.Z),m=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,c(r),e.next=5,Vr(n,t,x,r);case 5:return e.prev=5,g(!1),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[1,,5,8]])})));return function(t){return e.apply(this,arguments)}}();return(0,d.jsx)(b.I18n,{children:function(e){var i=e.i18n;return(0,d.jsx)(Lr,{project:t,isInstalling:h,onClose:n,onInstall:function(){return m(i)},extensionShortHeader:r,onEdit:function(){u(a),n()}})}})},bi=n(69197),Ci=n(8018),ji=n.g.gd,yi=function(e){return{project:null,storageProvider:Ci.Z,fileMetadata:{fileIdentifier:e}}},Zi=function(e){var t=e.getEffects().insertNewEffect("3D Light",0);t.setEffectType("Scene3D::HemisphereLight"),t.setStringParameter("skyColor","255;255;255"),t.setStringParameter("groundColor","64;64;64"),t.setDoubleParameter("intensity",1),t.setStringParameter("top","Y-"),t.setDoubleParameter("elevation",45),t.setDoubleParameter("rotation",0)},ki=function(e){for(var t=0;t<e.getLayersCount();t++){var n=e.getLayerAt(t);Zi(n)}},wi=function(){var e=ji.ProjectHelper.createNewGDJSProject();return(0,Ar.tP)({exampleUrl:"",exampleSlug:""}),{project:e,storageProvider:null,fileMetadata:null}},Ti=function(){var e="https://resources.gdevelop-app.com/examples-database/login-template.json";(0,Ar.tP)({exampleUrl:e,exampleSlug:"login-template"});var t=yi(e);return t.project&&function(e){for(var t=0;t<e.getLayoutsCount();t++){var n=e.getLayoutAt(t);ki(n)}}(t.project),t},Si=function(e,t){return(0,Ar.tP)({exampleUrl:e,exampleSlug:t}),yi(e)},Pi=function(e,t){return(0,Ar.tP)({exampleUrl:e,exampleSlug:t}),yi(e)},Ei=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.i18n,r=t.exampleShortHeader,e.prev=1,e.next=4,(0,bi.W7)(r);case 4:return o=e.sent,(0,Ar.tP)({exampleUrl:o.projectFileUrl,exampleSlug:r.slug}),e.abrupt("return",yi(o.projectFileUrl));case 9:return e.prev=9,e.t0=e.catch(1),(0,Ur.gR)({message:n._({id:"Unable to fetch the example."})+" "+n._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"local-example-load-error"}),e.abrupt("return");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),Ii=n(16999),Mi=function(){var e=l.useContext(tr.ZP),t=l.useRef(null),n=e.authenticated,r=e.firebaseUser,a=e.getAuthorizationHeader,c=l.useState(null),u=(0,s.Z)(c,2),d=u[0],p=u[1],f=l.useState(null),h=(0,s.Z)(f,2),g=h[0],x=h[1],m=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&r){e.next=3;break}return p(null),e.abrupt("return");case 3:if(!t.current){e.next=5;break}return e.abrupt("return",t.current);case 5:return e.prev=5,x(null),t.current=(0,Ii.m7)(a,r.uid),e.next=10,t.current;case 10:o=e.sent,p(o),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),console.error("Error while loading user games.",e.t0),x(e.t0);case 18:return e.prev=18,t.current=null,e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[5,14,18,21]])}))),[n,r,a]),v=l.useCallback((function(e){d&&p(d.map((function(t){return t.id===e.id?e:t})))}),[d]);return{games:d,gamesFetchingError:g,fetchGames:m,onGameUpdated:v}},Li=n(33028),Ai=n(86335),Fi=n(78196),Oi=n(40470),Ri=n(37579),Di=n(86128),_i=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{children:(0,d.jsx)("path",{d:"M5 16L3 5L8.5 10L12 4L15.5 10L21 5L19 16H5M19 19C19 19.6 18.6 20 18 20H6C5.4 20 5 19.6 5 19V18H19V19Z"})}))})),Bi=n(45987),Ni=n(46538),Ui=n(29858),Hi=n(36052),Vi=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33374 4.49996C3.33374 3.48744 4.15455 2.66663 5.16707 2.66663H9.33374C9.46635 2.66663 9.59353 2.7193 9.68729 2.81307L11.0206 4.14641C11.2159 4.34167 11.2159 4.65825 11.0206 4.85351C10.8254 5.04877 10.5088 5.04877 10.3135 4.85351L9.12663 3.66663H5.16707C4.70684 3.66663 4.33374 4.03972 4.33374 4.49996V11.5C4.33374 11.9602 4.70683 12.3333 5.16707 12.3333H10.8337C11.294 12.3333 11.6671 11.9602 11.6671 11.5V10.3333C11.6671 10.0572 11.8909 9.83329 12.1671 9.83329C12.4432 9.83329 12.6671 10.0572 12.6671 10.3333V11.5C12.6671 12.5125 11.8463 13.3333 10.8337 13.3333H5.16707C4.15456 13.3333 3.33374 12.5125 3.33374 11.5V4.49996Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.33374 2.83329C9.60988 2.83329 9.83374 3.05715 9.83374 3.33329V5.33329C9.83374 5.60944 9.60988 5.83329 9.33374 5.83329C9.0576 5.83329 8.83374 5.60944 8.83374 5.33329V3.33329C8.83374 3.05715 9.0576 2.83329 9.33374 2.83329Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.6064 3.78754C12.9898 3.4041 13.6115 3.4041 13.995 3.78755L14.8795 4.67209C15.2629 5.05552 15.2629 5.67718 14.8795 6.06062L10.4018 10.5383C10.336 10.6041 10.2533 10.6502 10.1628 10.6715L8.11493 11.1533C7.94637 11.193 7.76929 11.1426 7.64685 11.0202C7.52441 10.8977 7.47404 10.7207 7.5137 10.5521L7.99554 8.50428C8.01684 8.41377 8.06295 8.33099 8.1287 8.26524L12.6064 3.78754C12.6064 3.78753 12.6064 3.78754 12.6064 3.78754ZM13.2878 4.49465C13.2878 4.49464 13.2878 4.49465 13.2878 4.49465V4.49465ZM13.3007 4.50749L14.1596 5.36636L9.79526 9.73065L8.67211 9.99492L8.93638 8.87177L13.3007 4.50749Z",fill:"currentColor"})]}))})),zi=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,d.jsx)("path",{d:"M10.6668 6.66663C11.035 6.66663 11.3334 6.36815 11.3334 5.99996C11.3334 5.63177 11.035 5.33329 10.6668 5.33329C10.2986 5.33329 10.0001 5.63177 10.0001 5.99996C10.0001 6.36815 10.2986 6.66663 10.6668 6.66663Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.32027 2.80616C8.41341 2.71663 8.53758 2.66663 8.66677 2.66663H13.5001C13.7762 2.66663 14.0001 2.89048 14.0001 3.16663V7.99996C14.0001 8.1329 13.9472 8.26037 13.853 8.35419L9.38864 12.8014C8.65615 13.531 7.46558 13.5111 6.758 12.7572L3.82881 9.63613C3.14175 8.90408 3.1713 7.75557 3.89511 7.05982L8.32027 2.80616ZM8.86811 3.66663L4.58811 7.78076C4.25911 8.09701 4.24567 8.61904 4.55797 8.95179L7.48713 12.0728C7.80876 12.4155 8.34992 12.4246 8.6829 12.0929L13.0001 7.79229V3.66663H8.86811Z",fill:"currentColor"})]}))})),Wi=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.66679 6.33337C7.74631 6.33337 7.00012 7.07957 7.00012 8.00004C7.00012 8.92052 7.74631 9.66671 8.66679 9.66671C9.58726 9.66671 10.3335 8.92052 10.3335 8.00004C10.3335 7.07957 9.58726 6.33337 8.66679 6.33337ZM6.00012 8.00004C6.00012 6.52728 7.19403 5.33337 8.66679 5.33337C10.1395 5.33337 11.3335 6.52728 11.3335 8.00004C11.3335 9.4728 10.1395 10.6667 8.66679 10.6667C7.19403 10.6667 6.00012 9.4728 6.00012 8.00004Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.66671 3.66663C6.27348 3.66663 4.33337 5.60673 4.33337 7.99996C4.33337 10.3932 6.27347 12.3333 8.66671 12.3333C8.94285 12.3333 9.16671 12.5572 9.16671 12.8333C9.16671 13.1094 8.94285 13.3333 8.66671 13.3333C5.72119 13.3333 3.33337 10.9455 3.33337 7.99996C3.33337 5.05444 5.72119 2.66663 8.66671 2.66663C11.0525 2.66663 12.4446 3.44102 13.2036 4.58875C13.9334 5.69247 14 7.03683 14 7.99996V8.83329C14 9.84583 13.1792 10.6666 12.1667 10.6666C11.1542 10.6666 10.3334 9.84583 10.3334 8.83329V5.83329C10.3334 5.55715 10.5572 5.33329 10.8334 5.33329C11.1095 5.33329 11.3334 5.55715 11.3334 5.83329V8.83329C11.3334 9.29355 11.7064 9.66663 12.1667 9.66663C12.627 9.66663 13 9.29355 13 8.83329V7.99996C13 7.04642 12.9208 5.97411 12.3694 5.14034C11.8472 4.35057 10.8225 3.66663 8.66671 3.66663Z",fill:"currentColor"})]}))})),Gi=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.16707 4.99996C4.70684 4.99996 4.33374 5.37305 4.33374 5.83329V11.5C4.33374 11.9602 4.70683 12.3333 5.16707 12.3333H12.1671C12.6273 12.3333 13.0004 11.9602 13.0004 11.5V5.83329C13.0004 5.37305 12.6273 4.99996 12.1671 4.99996H5.16707ZM3.33374 5.83329C3.33374 4.82077 4.15455 3.99996 5.16707 3.99996H12.1671C13.1796 3.99996 14.0004 4.82078 14.0004 5.83329V11.5C14.0004 12.5125 13.1796 13.3333 12.1671 13.3333H5.16707C4.15456 13.3333 3.33374 12.5125 3.33374 11.5V5.83329Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.00041 2.66663C6.27655 2.66663 6.50041 2.89048 6.50041 3.16663V5.49996C6.50041 5.7761 6.27655 5.99996 6.00041 5.99996C5.72426 5.99996 5.50041 5.7761 5.50041 5.49996V3.16663C5.50041 2.89048 5.72426 2.66663 6.00041 2.66663Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3337 2.66663C11.6099 2.66663 11.8337 2.89048 11.8337 3.16663V5.49996C11.8337 5.7761 11.6099 5.99996 11.3337 5.99996C11.0576 5.99996 10.8337 5.7761 10.8337 5.49996V3.16663C10.8337 2.89048 11.0576 2.66663 11.3337 2.66663Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33374 7.16663C5.33374 6.89048 5.5576 6.66663 5.83374 6.66663H11.5004C11.7765 6.66663 12.0004 6.89048 12.0004 7.16663C12.0004 7.44277 11.7765 7.66663 11.5004 7.66663H5.83374C5.5576 7.66663 5.33374 7.44277 5.33374 7.16663Z",fill:"currentColor"})]}))})),Yi=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,d.jsx)("path",{d:"M13.2153 2.97488C13.0212 2.78621 12.7123 2.78621 12.5182 2.97488L10.7182 4.72488C10.5202 4.91737 10.5158 5.23392 10.7083 5.43191C10.9007 5.62991 11.2173 5.63436 11.4153 5.44187L12.3667 4.51684V11.4832L11.4153 10.5582C11.2173 10.3657 10.9007 10.3702 10.7083 10.5682C10.5158 10.7662 10.5202 11.0827 10.7182 11.2752L12.5182 13.0252C12.7123 13.2139 13.0212 13.2139 13.2153 13.0252L15.0153 11.2752C15.2133 11.0827 15.2177 10.7662 15.0252 10.5682C14.8328 10.3702 14.5162 10.3657 14.3182 10.5582L13.3667 11.4832V4.51684L14.3182 5.44187C14.5162 5.63436 14.8328 5.62991 15.0252 5.43191C15.2177 5.23392 15.2133 4.91737 15.0153 4.72488L13.2153 2.97488Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M2.66675 4.00004C2.39061 4.00004 2.16675 4.2239 2.16675 4.50004C2.16675 4.77618 2.39061 5.00004 2.66675 5.00004H5.06675C5.34289 5.00004 5.56675 4.77618 5.56675 4.50004C5.56675 4.2239 5.34289 4.00004 5.06675 4.00004H2.66675Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M2.66675 6.33337C2.39061 6.33337 2.16675 6.55723 2.16675 6.83337C2.16675 7.10952 2.39061 7.33337 2.66675 7.33337H6.26675C6.54289 7.33337 6.76675 7.10952 6.76675 6.83337C6.76675 6.55723 6.54289 6.33337 6.26675 6.33337H2.66675Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M2.66675 8.66671C2.39061 8.66671 2.16675 8.89056 2.16675 9.16671C2.16675 9.44285 2.39061 9.66671 2.66675 9.66671H7.46675C7.74289 9.66671 7.96675 9.44285 7.96675 9.16671C7.96675 8.89056 7.74289 8.66671 7.46675 8.66671H2.66675Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M2.66675 11C2.39061 11 2.16675 11.2239 2.16675 11.5C2.16675 11.7762 2.39061 12 2.66675 12H8.66675C8.94289 12 9.16675 11.7762 9.16675 11.5C9.16675 11.2239 8.94289 11 8.66675 11H2.66675Z",fill:"currentColor"})]}))})),qi=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.66228 10.0458C4.21997 9.3592 5.07644 8.83335 6.33333 8.83335C7.59023 8.83335 8.44671 9.3592 9.0044 10.0458C9.54559 10.7121 9.7885 11.5061 9.89964 12.0527C10.0474 12.7795 9.45363 13.3334 8.8122 13.3334H3.85445C3.213 13.3334 2.61924 12.7795 2.76702 12.0527C2.87817 11.5061 3.12109 10.7121 3.66228 10.0458ZM4.43848 10.6763C4.04155 11.1649 3.84285 11.7804 3.74697 12.252C3.74408 12.2662 3.74562 12.2737 3.74668 12.2775C3.74798 12.282 3.751 12.2888 3.75818 12.2967C3.77307 12.3133 3.80507 12.3334 3.85445 12.3334H8.8122C8.86159 12.3334 8.89359 12.3133 8.90848 12.2967C8.91567 12.2887 8.91868 12.282 8.91998 12.2775C8.92105 12.2737 8.92258 12.2662 8.9197 12.252C8.82383 11.7804 8.62514 11.1649 8.2282 10.6763C7.84776 10.2079 7.26957 9.83335 6.33333 9.83335C5.3971 9.83335 4.81892 10.2079 4.43848 10.6763Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 9.33335C10 9.05721 10.2239 8.83335 10.5 8.83335C11.3981 8.83335 12.0238 9.30952 12.4336 9.88998C12.8329 10.4556 13.0502 11.146 13.1707 11.689C13.3754 12.6108 12.6195 13.3334 11.7846 13.3334H11.1667C10.8905 13.3334 10.6667 13.1095 10.6667 12.8334C10.6667 12.5572 10.8905 12.3334 11.1667 12.3334H11.7846C11.93 12.3334 12.0487 12.2727 12.1207 12.1918C12.189 12.1151 12.2194 12.0182 12.1945 11.9057C12.0859 11.4166 11.9048 10.875 11.6166 10.4667C11.3388 10.0732 10.9877 9.83335 10.5 9.83335C10.2239 9.83335 10 9.6095 10 9.33335Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.33333 3.66669C5.59695 3.66669 5 4.26364 5 5.00002C5 5.7364 5.59695 6.33335 6.33333 6.33335C7.06971 6.33335 7.66667 5.7364 7.66667 5.00002C7.66667 4.26364 7.06971 3.66669 6.33333 3.66669ZM4 5.00002C4 3.71136 5.04467 2.66669 6.33333 2.66669C7.622 2.66669 8.66667 3.71136 8.66667 5.00002C8.66667 6.28868 7.622 7.33335 6.33333 7.33335C5.04467 7.33335 4 6.28868 4 5.00002Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.33333 3.16669C9.33333 2.89054 9.55719 2.66669 9.83333 2.66669C11.1829 2.66669 12 3.7765 12 5.00002C12 6.22354 11.1829 7.33335 9.83333 7.33335C9.55719 7.33335 9.33333 7.1095 9.33333 6.83335C9.33333 6.55721 9.55719 6.33335 9.83333 6.33335C10.5088 6.33335 11 5.80154 11 5.00002C11 4.1985 10.5088 3.66669 9.83333 3.66669C9.55719 3.66669 9.33333 3.44283 9.33333 3.16669Z",fill:"currentColor"})]}))})),Xi=n(44439),Ki=n(57588),Ji=l.memo(l.forwardRef((function(e,t){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,width:"24",height:"24",viewBox:"0 0 24 24",children:(0,d.jsxs)("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",fill:"none",children:[(0,d.jsx)("path",{d:"m18.6247 10c0.4399 0.8986 0.6253 1.6745 0.6253 2 0 1-1.75 6.25-7.25 6.25-0.7314 0-1.3965-0.0928-2-0.2562m-3-1.7252c-1.63791-1.5993-2.25-3.6772-2.25-4.2686 0-1 1.75-6.25 7.25-6.25 1.7947 0 3.1901 0.55902 4.2558 1.34698"}),(0,d.jsx)("path",{d:"m19.25 4.75-14.5 14.5"}),(0,d.jsx)("path",{d:"m10.409 13.591c-0.87867-0.8787-0.87867-2.3033 0-3.182 0.8787-0.8787 2.3033-0.8787 3.182 0"})," "]})}))}))),Qi=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.16667 7.66663C5.07462 7.66663 5 7.74124 5 7.83329V11.5C5 11.9602 5.37309 12.3333 5.83333 12.3333H11.5C11.9603 12.3333 12.3333 11.9602 12.3333 11.5V7.83329C12.3333 7.74124 12.2587 7.66663 12.1667 7.66663H5.16667ZM4 7.83329C4 7.18894 4.52234 6.66663 5.16667 6.66663H12.1667C12.811 6.66663 13.3333 7.18895 13.3333 7.83329V11.5C13.3333 12.5125 12.5125 13.3333 11.5 13.3333H5.83333C4.82082 13.3333 4 12.5125 4 11.5V7.83329Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.66667 3.66663C7.70522 3.66663 7.16755 3.97865 6.85548 4.29844C6.59324 4.56717 6.45446 4.92749 6.38761 5.38368C6.3293 5.7816 6.33095 6.20398 6.33271 6.65637C6.33302 6.73503 6.33333 6.81459 6.33333 6.89509V6.99996C6.33333 7.2761 6.10948 7.49996 5.83333 7.49996C5.55719 7.49996 5.33333 7.2761 5.33333 6.99996V6.89509C5.33333 6.82347 5.33298 6.74973 5.33261 6.67429C5.33045 6.22589 5.328 5.71754 5.39817 5.23869C5.48174 4.66839 5.67512 4.07618 6.1398 3.60002C6.65683 3.0702 7.46078 2.66663 8.66667 2.66663C9.87255 2.66663 10.6765 3.0702 11.1935 3.60002C11.6582 4.07619 11.8516 4.66838 11.9351 5.23869C12.0053 5.71755 12.0029 6.22593 12.0007 6.67435C12.0004 6.74977 12 6.82349 12 6.89509V6.99996C12 7.2761 11.7761 7.49996 11.5 7.49996C11.2239 7.49996 11 7.2761 11 6.99996V6.89509C11 6.81462 11.0003 6.73508 11.0006 6.65644C11.0024 6.20403 11.004 5.78163 10.9457 5.38369C10.8789 4.9275 10.7401 4.56717 10.4778 4.29844C10.1658 3.97866 9.62811 3.66663 8.66667 3.66663Z",fill:"currentColor"})]}))})),$i=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.16691 7.66663C5.07486 7.66663 5.00024 7.74124 5.00024 7.83329V11.5C5.00024 11.9602 5.37333 12.3333 5.83358 12.3333H11.5002C11.9605 12.3333 12.3336 11.9602 12.3336 11.5V7.83329C12.3336 7.74124 12.259 7.66663 12.1669 7.66663H5.16691ZM4.00024 7.83329C4.00024 7.18894 4.52259 6.66663 5.16691 6.66663H12.1669C12.8113 6.66663 13.3336 7.18895 13.3336 7.83329V11.5C13.3336 12.5125 12.5128 13.3333 11.5002 13.3333H5.83358C4.82106 13.3333 4.00024 12.5125 4.00024 11.5V7.83329Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.66691 3.66663C7.52676 3.66663 6.97342 4.10514 6.68719 4.49816C6.51299 4.73736 6.41931 5.03154 6.37339 5.38803C6.33198 5.70961 6.33265 6.0462 6.33338 6.41357C6.33348 6.46257 6.33358 6.51212 6.33358 6.56225V6.99996C6.33358 7.2761 6.10972 7.49996 5.83358 7.49996C5.55744 7.49996 5.33358 7.2761 5.33358 6.99996V6.56225C5.33358 6.51517 5.33344 6.46707 5.33331 6.41811C5.33232 6.05826 5.3312 5.65155 5.38159 5.2603C5.43986 4.80784 5.5709 4.33229 5.87884 3.90946C6.35856 3.25076 7.21613 2.66663 8.66691 2.66663C9.46147 2.66663 10.0987 2.96465 10.5276 3.2506C10.743 3.39423 10.9109 3.53802 11.0264 3.6474C11.0843 3.70227 11.1296 3.74899 11.1616 3.78343C11.1776 3.80067 11.1903 3.81488 11.1997 3.82555L11.2112 3.83887L11.2151 3.84343L11.2165 3.84517L11.2172 3.8459C11.2173 3.84605 11.2177 3.84653 10.8482 4.1544L11.2177 3.84653C11.3945 4.05867 11.3658 4.37395 11.1537 4.55074C10.9421 4.72701 10.6281 4.69902 10.451 4.48855M10.451 4.48855L10.4481 4.48524C10.4446 4.48126 10.4382 4.47399 10.4288 4.46388C10.41 4.44364 10.3797 4.41224 10.3387 4.37335C10.2562 4.29524 10.1325 4.18902 9.97289 4.08265C9.65182 3.8686 9.20569 3.66663 8.66691 3.66663",fill:"currentColor"})]}))})),eo=n(66789),to=n(83297),no=n(14737),ro={leaderboards:null,currentLeaderboard:null,displayOnlyBestEntry:!1,browsing:{entries:null,goToNextPage:null,goToPreviousPage:null,goToFirstPage:null},createLeaderboard:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),listLeaderboards:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),selectLeaderboard:function(){},setDisplayOnlyBestEntry:function(){},updateLeaderboard:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),resetLeaderboard:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deleteLeaderboard:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deleteLeaderboardEntry:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fetchLeaderboardEntries:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},io=l.createContext(ro),oo=n(21676),ao=function(e){return"PREFER_UNIQUE"===e.playerUnicityDisplayChoice},so=function(e,t){switch(t.type){case"SET_LEADERBOARDS":var n=t.payload;if(!n)return(0,a.Z)((0,a.Z)({},e),{},{leaderboardsByIds:null,currentLeaderboardId:null,currentLeaderboard:null});var i=n.reduce((function(e,t){return e[t.id]=t,e}),{}),o=!e.currentLeaderboard&&n&&n.length>0,l=n.find((function(e){return e.primary})),c=(e.currentLeaderboard?i[e.currentLeaderboard.id]:void 0)||e.currentLeaderboard,u=o?l||n[0]:c;return(0,a.Z)((0,a.Z)({},e),{},{leaderboardsByIds:i,displayOnlyBestEntry:!!u&&ao(u),currentLeaderboardId:u?u.id:null,currentLeaderboard:u});case"SET_ENTRIES":return(0,a.Z)((0,a.Z)({},e),{},{entries:t.payload});case"PURGE_NAVIGATION":return(0,a.Z)((0,a.Z)({},e),{},{entries:null,pageIndex:0,mapPageIndexToUri:{}});case"SET_NEXT_PAGE_URI":var d=e.pageIndex+1;return(0,a.Z)((0,a.Z)({},e),{},{mapPageIndexToUri:(0,a.Z)((0,a.Z)({},e.mapPageIndexToUri),{},(0,r.Z)({},d,t.payload))});case"SET_PAGE_INDEX":return(0,a.Z)((0,a.Z)({},e),{},{pageIndex:t.payload});case"SELECT_LEADERBOARD":if(!e.leaderboardsByIds)return e;var p=e.leaderboardsByIds[t.payload];return(0,a.Z)((0,a.Z)({},e),{},{displayOnlyBestEntry:ao(p),currentLeaderboardId:p.id,currentLeaderboard:p});case"CHANGE_DISPLAY_ONLY_BEST_ENTRY":return(0,a.Z)((0,a.Z)({},e),{},{displayOnlyBestEntry:t.payload});case"UPDATE_OR_CREATE_LEADERBOARD":var f={};return e.leaderboardsByIds&&Object.entries(e.leaderboardsByIds).forEach((function(e){var n=(0,s.Z)(e,2),r=n[0],i=n[1];f[r]=(0,a.Z)((0,a.Z)({},i),{},{primary:t.payload.primary?void 0:i.primary})})),f[t.payload.id]=t.payload,(0,a.Z)((0,a.Z)({},e),{},{displayOnlyBestEntry:ao(t.payload),leaderboardsByIds:f,currentLeaderboardId:t.payload.id,currentLeaderboard:t.payload});case"REMOVE_LEADERBOARD":var h=(0,a.Z)({},e.leaderboardsByIds);delete h[t.payload];var g=Object.keys(h);return 0===g.length?(0,a.Z)((0,a.Z)({},e),{},{displayOnlyBestEntry:!1,leaderboardsByIds:h,currentLeaderboard:null,currentLeaderboardId:null}):(0,a.Z)((0,a.Z)({},e),{},{displayOnlyBestEntry:ao(h[g[0]]),leaderboardsByIds:h,currentLeaderboard:h[g[0]],currentLeaderboardId:g[0]});default:return(0,a.Z)({},e)}},lo=function(e){var t=e.gameId,n=e.children,r=l.useContext(tr.ZP),a=l.useRef(!1),c=l.useReducer(so,{currentLeaderboardId:null,currentLeaderboard:null,leaderboardsByIds:null,displayOnlyBestEntry:!1,entries:null,mapPageIndexToUri:{},pageIndex:0}),u=(0,s.Z)(c,2),p=u[0],f=p.currentLeaderboardId,h=p.currentLeaderboard,g=p.leaderboardsByIds,x=p.displayOnlyBestEntry,m=p.entries,v=p.mapPageIndexToUri,b=p.pageIndex,C=u[1],j=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.current){e.next=14;break}return a.current=!0,e.prev=2,n&&n.shouldClearBeforeFetching&&C({type:"SET_LEADERBOARDS",payload:null}),e.next=6,(0,no.mf)(r,t);case 6:if(o=e.sent){e.next=9;break}return e.abrupt("return");case 9:o.sort((function(e,t){return e.name.localeCompare(t.name)})),C({type:"SET_LEADERBOARDS",payload:o});case 11:return e.prev=11,a.current=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,,11,14]])})));return function(t){return e.apply(this,arguments)}}(),[t,r]),y=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C({type:"SET_ENTRIES",payload:null}),e.next=3,(0,no.Rc)(r,t,n);case 3:if(o=e.sent){e.next=6;break}return e.abrupt("return");case 6:C({type:"UPDATE_OR_CREATE_LEADERBOARD",payload:o});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,r]),Z=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var r,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return");case 2:return r=n&&n.uri?n.uri:null,C({type:"SET_ENTRIES",payload:null}),e.next=6,(0,no.YJ)(t,f,{pageSize:10,onlyBestEntry:x,forceUri:r});case 6:if(o=e.sent){e.next=9;break}return e.abrupt("return");case 9:a=o.entries,o.nextPageUri&&C({type:"SET_NEXT_PAGE_URI",payload:o.nextPageUri}),C({type:"SET_ENTRIES",payload:a});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[f,x,t]),k=l.useCallback((function(e){C({type:"SELECT_LEADERBOARD",payload:e})}),[]),w=l.useCallback((function(e){C({type:"CHANGE_DISPLAY_ONLY_BEST_ENTRY",payload:e})}),[]),T=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return");case 2:return n.sort&&C({type:"PURGE_NAVIGATION"}),e.next=5,(0,no.RE)(r,t,f,n);case 5:if(o=e.sent){e.next=8;break}return e.abrupt("return");case 8:if(C({type:"UPDATE_OR_CREATE_LEADERBOARD",payload:o}),!n.sort){e.next=12;break}return e.next=12,Z();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return");case 2:return C({type:"PURGE_NAVIGATION"}),e.next=5,(0,no.Wk)(r,t,f);case 5:if(n=e.sent){e.next=8;break}return e.abrupt("return");case 8:C({type:"UPDATE_OR_CREATE_LEADERBOARD",payload:n}),Z();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f&&g){e.next=2;break}return e.abrupt("return");case 2:return C({type:"PURGE_NAVIGATION"}),e.next=5,(0,no.QN)(r,t,f);case 5:C({type:"REMOVE_LEADERBOARD",payload:f});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,no.nI)(r,t,f,n);case 4:Z({uri:b>0?v[b]:null});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v[b+1]){e.next=3;break}return e.abrupt("return");case 3:return C({type:"SET_PAGE_INDEX",payload:b+1}),e.next=6,Z({uri:t});case 6:case"end":return e.stop()}}),e)}))),[Z,v,b]),M=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==b){e.next=6;break}return C({type:"SET_PAGE_INDEX",payload:0}),e.next=4,Z();case 4:e.next=12;break;case 6:if(t=v[b-1]){e.next=9;break}return e.abrupt("return");case 9:return C({type:"SET_PAGE_INDEX",payload:b-1}),e.next=12,Z({uri:t});case 12:case"end":return e.stop()}}),e)}))),[Z,v,b]),L=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C({type:"SET_PAGE_INDEX",payload:0}),e.next=3,Z();case 3:case"end":return e.stop()}}),e)}))),[Z]);l.useEffect((function(){C({type:"SET_LEADERBOARDS",payload:null}),C({type:"PURGE_NAVIGATION"})}),[t]),l.useEffect((function(){f&&t&&(C({type:"PURGE_NAVIGATION"}),Z())}),[f,x,Z,t]);var A=l.useRef(null),F=l.useRef(null);return l.useEffect((function(){A.current===f&&F.current&&h&&!h.resetLaunchedAt&&Z(),A.current=f,F.current=h?h.resetLaunchedAt:null}),[h,f,Z]),(0,oo.Y)((function(){j({shouldClearBeforeFetching:!1})}),!g||Object.values(g).every((function(e){return!e.resetLaunchedAt}))?null:5e3),(0,d.jsx)(io.Provider,{value:{leaderboards:g?Object.values(g):null,currentLeaderboard:h,displayOnlyBestEntry:x,browsing:{entries:m,goToNextPage:v[b+1]?I:null,goToPreviousPage:1===b||v[b-1]?M:null,goToFirstPage:0===b?null:L},setDisplayOnlyBestEntry:w,createLeaderboard:y,listLeaderboards:j,selectLeaderboard:k,updateLeaderboard:T,resetLeaderboard:S,deleteLeaderboard:P,deleteLeaderboardEntry:E,fetchLeaderboardEntries:Z},children:n})},co=n(33114),uo=n(38962),po=n(79337),fo=n(98470),ho=n(9940),go=n(96355),xo=["hour","minute","second","millisecond"],mo={hour:36e5,minute:6e4,second:1e3,millisecond:1},vo={hour:":",minute:":",second:".",millisecond:""},bo=function(e,t){return"time"===t.type?function(e,t){for(var n="",r=Math.round(1e3*e),i=xo.indexOf(t.biggestUnit),o=xo.indexOf(t.smallestUnit),a=i;a<=o;a++){var s=xo[a],l=mo[s],c=r%l;n+="".concat(((r-c)/l).toString().padStart("millisecond"===s?3:2,"0")).concat(a===o?"":vo[s]),r=c}return n}(e,t):function(e,t){var n=(0,go.R)(e,t.precision);return"".concat(t.prefix).concat(n.toFixed(Math.max(0,t.precision))).concat(t.suffix)}(e,t)},Co=n(45047),jo=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({width:"17",height:"16",viewBox:"0 0 17 16",fill:"none"},e),{},{children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.0591 3.38717C13.2273 3.47228 13.3333 3.64478 13.3333 3.83332V12.1666C13.3333 12.3552 13.2273 12.5277 13.0591 12.6128C12.8908 12.6979 12.689 12.6812 12.5371 12.5695L6.87047 8.40281C6.74233 8.30859 6.66667 8.15903 6.66667 7.99998C6.66667 7.84093 6.74233 7.69137 6.87047 7.59716L12.5371 3.43049C12.689 3.3188 12.8908 3.30205 13.0591 3.38717ZM8.0107 7.99998L12.3333 11.1784V4.82158L8.0107 7.99998Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.5 3.33332C4.77614 3.33332 5 3.55717 5 3.83332V12.1666C5 12.4428 4.77614 12.6666 4.5 12.6666C4.22386 12.6666 4 12.4428 4 12.1666V3.83332C4 3.55717 4.22386 3.33332 4.5 3.33332Z",fill:"currentColor"})]}))})),yo=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99999 3.66663C5.60676 3.66663 3.66666 5.60673 3.66666 7.99996C3.66666 10.3932 5.60676 12.3333 7.99999 12.3333C10.3932 12.3333 12.3333 10.3932 12.3333 7.99996C12.3333 5.60673 10.3932 3.66663 7.99999 3.66663ZM2.66666 7.99996C2.66666 5.05444 5.05447 2.66663 7.99999 2.66663C10.9455 2.66663 13.3333 5.05445 13.3333 7.99996C13.3333 10.9455 10.9455 13.3333 7.99999 13.3333C5.05448 13.3333 2.66666 10.9455 2.66666 7.99996Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.14644 6.14641C6.3417 5.95114 6.65828 5.95114 6.85354 6.14641L9.85354 9.14641C10.0488 9.34167 10.0488 9.65825 9.85354 9.85351C9.65828 10.0488 9.3417 10.0488 9.14644 9.85351L6.14644 6.85351C5.95117 6.65825 5.95117 6.34167 6.14644 6.14641Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.85354 6.14641C10.0488 6.34167 10.0488 6.65825 9.85354 6.85351L6.85354 9.85351C6.65828 10.0488 6.3417 10.0488 6.14644 9.85351C5.95117 9.65825 5.95117 9.34167 6.14644 9.14641L9.14644 6.14641C9.3417 5.95114 9.65828 5.95114 9.85354 6.14641Z",fill:"currentColor"})]}))})),Zo=function(e){var t=e.entries,n=e.customizationSettings,r=e.onDeleteEntry,i=e.isLoading,o=e.erroredEntry,s=e.navigation;return t?(0,d.jsx)(b.I18n,{children:function(e){var l=e.i18n;return(0,d.jsxs)(L.sg,{expand:!0,justifyContent:"space-between",children:[(0,d.jsxs)(co.Z,{size:"small",children:[(0,d.jsx)(fo.Z,{children:(0,d.jsxs)(ho.Z,{children:[(0,d.jsx)(po.Z,{style:{width:"20%"},align:"center",children:n?n.scoreTitle:(0,d.jsx)(b.Trans,{id:"Score"})}),(0,d.jsx)(po.Z,{style:{width:"50%"},children:(0,d.jsx)(b.Trans,{id:"Player"})}),(0,d.jsx)(po.Z,{style:{width:"15%"},children:(0,d.jsx)(b.Trans,{id:"Date"})}),(0,d.jsx)(po.Z,{style:{width:"15%"},children:(0,d.jsx)(b.Trans,{id:"Action"})})]})}),(0,d.jsx)(uo.Z,{children:t.map((function(e){return(0,d.jsxs)(ho.Z,{children:[(0,d.jsx)(po.Z,{align:"center",children:n?bo(e.score,n.scoreFormatting):e.score}),(0,d.jsx)(po.Z,{style:(0,a.Z)((0,a.Z)({},B.t),{},{maxWidth:0}),children:(0,d.jsx)(Ze.ZP,{title:e.playerName,children:(0,d.jsx)("span",{children:e.playerName})})}),(0,d.jsx)(po.Z,{children:(0,d.jsx)(Ze.ZP,{title:l.date(e.createdAt,{dateStyle:"short",timeStyle:"short"}),children:(0,d.jsx)("span",{children:l.date(e.createdAt)})})}),(0,d.jsx)(po.Z,{children:(0,d.jsxs)(L.x1,{children:[(0,d.jsx)(M.Z,{size:"small",onClick:function(){return r(e)},disabled:i,tooltip:{id:"Remove entry"},children:(0,d.jsx)(vn.Z,{size:20})}),o&&o.entryId===e.id?(0,d.jsx)(M.Z,{size:"small",onClick:function(){},tooltip:o.message,children:(0,d.jsx)(yo,{size:20,color:"error"})}):null]})})]},e.id)}))})]}),0===t.length?(0,d.jsx)(L.sg,{expand:!0,justifyContent:"center",alignItems:"center",children:(0,d.jsx)(F.Z,{size:"body2",children:(0,d.jsx)(b.Trans,{id:"No entries"})})}):(0,d.jsxs)(L.x1,{noMargin:!0,justifyContent:"flex-end",children:[(0,d.jsx)(M.Z,{tooltip:{id:"Go to first page"},disabled:!s.goToFirstPage,onClick:function(){s.goToFirstPage&&s.goToFirstPage()},children:(0,d.jsx)(jo,{})}),(0,d.jsx)(M.Z,{tooltip:{id:"Previous page"},disabled:!s.goToPreviousPage,onClick:function(){s.goToPreviousPage&&s.goToPreviousPage()},children:(0,d.jsx)(Co.Z,{})}),(0,d.jsx)(M.Z,{tooltip:{id:"Next page"},disabled:!s.goToNextPage,onClick:function(){s.goToNextPage&&s.goToNextPage()},children:(0,d.jsx)(Ct.Z,{})})]})]})}}):(0,d.jsx)(Xe.Z,{})},ko=n(55089),wo=function(){return(0,d.jsxs)(C.pJ,{expand:!0,noMargin:!0,alignItems:"center",justifyContent:"space-around",children:[(0,d.jsx)(L.sg,{children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Experiment with the leaderboard colors using the playground"})})}),(0,d.jsx)(L.sg,{children:(0,d.jsx)(Ie.Z,{href:"https://gd.games/playground/test-leaderboard",onClick:function(){return Y.ZP.openExternalURL("https://gd.games/playground/test-leaderboard")},children:(0,d.jsx)(F.Z,{noMargin:!0,color:"inherit",children:(0,d.jsx)(b.Trans,{id:"Playground"})})})})]})},To={hour:"HH",minute:"MM",second:"SS",millisecond:"ms"},So=function(e){return!isNaN(e)&&Number.isInteger(e)},Po=function(e){for(var t=xo.indexOf(e.biggestUnit),n=xo.indexOf(e.smallestUnit),r="",i=t;i<=n;i++){var o=xo[i];r+="".concat(To[o]).concat(i===n?"":vo[o])}return r},Eo=xo.reduce((function(e,t,n){for(var r=n;r<xo.length;r++){var i={biggestUnit:xo[n],smallestUnit:xo[r]};e[Po(i)]=i}return e}),{}),Io=999999999;var Mo=function(e){var t=e.open,n=e.onClose,r=e.onSave,c=e.leaderboardCustomizationSettings,u=l.useState(!1),p=(0,s.Z)(u,2),f=p[0],h=p[1],g=l.useContext(tr.ZP),x=(0,no.VE)(g),m=x.canUseTheme,v=x.canUseCustomCss,j=(0,no.YO)(c),y=l.useState(null),Z=(0,s.Z)(y,2),k=Z[0],w=Z[1],T=l.useState(c&&c.defaultDisplayedEntriesNumber||20),S=(0,s.Z)(T,2),P=S[0],E=S[1],I=l.useState(j.backgroundColor),M=(0,s.Z)(I,2),A=M[0],O=M[1],R=l.useState(j.textColor),D=(0,s.Z)(R,2),_=D[0],B=D[1],N=l.useState(j.highlightBackgroundColor),U=(0,s.Z)(N,2),H=U[0],V=U[1],z=l.useState(j.highlightTextColor),W=(0,s.Z)(z,2),G=W[0],q=W[1],X=l.useState(null),Q=(0,s.Z)(X,2),ee=Q[0],ne=Q[1],re=l.useState(c&&c.customCss||""),ie=(0,s.Z)(re,2),oe=ie[0],ae=ie[1],se=l.useState(!(!c||!c.useCustomCss)),le=(0,s.Z)(se,2),ce=le[0],ue=le[1],de=l.useState(c?c.scoreTitle:"Score"),pe=(0,s.Z)(de,2),fe=pe[0],he=pe[1],ge=l.useState(c?c.scoreFormatting.type:"custom"),xe=(0,s.Z)(ge,2),me=xe[0],ve=xe[1],be=l.useState(c&&"custom"===c.scoreFormatting.type?c.scoreFormatting.prefix:""),Ce=(0,s.Z)(be,2),je=Ce[0],ye=Ce[1],Ze=l.useState(c&&"custom"===c.scoreFormatting.type?c.scoreFormatting.suffix:""),ke=(0,s.Z)(Ze,2),we=ke[0],Te=ke[1],Se=l.useState(c&&"custom"===c.scoreFormatting.type?c.scoreFormatting.precision:0),Pe=(0,s.Z)(Se,2),Ee=Pe[0],Me=Pe[1],Le=l.useState(null),Ae=(0,s.Z)(Le,2),Fe=Ae[0],Oe=Ae[1],Re=l.useState(c&&"time"===c.scoreFormatting.type?Po({smallestUnit:c.scoreFormatting.smallestUnit,biggestUnit:c.scoreFormatting.biggestUnit}):Po({biggestUnit:"second",smallestUnit:"millisecond"})),_e=(0,s.Z)(Re,2),Be=_e[0],Ne=_e[1],Ue=l.useState(15.2659),He=(0,s.Z)(Ue,2),Ve=He[0],ze=He[1],We=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fe){e.next=3;break}return w(t._({id:"Title cannot be empty."})),e.abrupt("return");case 3:if(So(P)){e.next=6;break}return ne(t._({id:"The number of displayed entries must be a whole value between {displayedEntriesMinNumber} and {displayedEntriesMaxNumber}",values:{displayedEntriesMinNumber:1,displayedEntriesMaxNumber:50}})),e.abrupt("return");case 6:if(So(Ee)){e.next=9;break}return Oe(t._({id:"The number of decimal places must be a whole value between {precisionMinValue} and {precisionMaxValue}",values:{precisionMinValue:-3,precisionMaxValue:3}})),e.abrupt("return");case 9:return h(!0),n={defaultDisplayedEntriesNumber:P,scoreTitle:fe,scoreFormatting:"custom"===me?{type:me,prefix:je,suffix:we,precision:Ee}:(0,a.Z)({type:me},Eo[Be]),theme:m?{backgroundColor:(0,Qn.Zn)(A),textColor:(0,Qn.Zn)(_),highlightBackgroundColor:(0,Qn.Zn)(H),highlightTextColor:(0,Qn.Zn)(G)}:void 0,useCustomCss:ce,customCss:oe},e.next=13,r(n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,d.jsx)(b.I18n,{children:function(e){var r=e.i18n;return(0,d.jsx)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Leaderboard appearance"}),open:t,maxWidth:"sm",secondaryActions:[(0,d.jsx)(Hn.Z,{helpPagePath:"/interface/games-dashboard/leaderboard-administration",anchor:"change_the_appearance_of_a_leaderboard"},"help")],actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),disabled:f,onClick:n},"cancel"),(0,d.jsx)(te.vF,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Save"}),disabled:f,onClick:function(){return We(r)}},"save")],cannotBeDismissed:f,onRequestClose:n,onApply:function(){We(r)},children:(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(F.Z,{size:"sub-title",noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Table settings"})}),(0,d.jsx)($r.ZP,{fullWidth:!0,type:"number",floatingLabelText:(0,d.jsx)(b.Trans,{id:"Number of entries to display"}),value:isNaN(P)?"":P,errorText:ee,min:1,max:50,onChange:function(e,t){ee&&t&&ne(null),E(Math.max(1,Math.min(50,parseFloat(t))))},disabled:f}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(F.Z,{size:"sub-title",noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Visual appearance"})}),(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsx)(Jn.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Background color"}),disableAlpha:!0,fullWidth:!0,color:A,onChange:O,disabled:!m||f}),(0,d.jsx)(Jn.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Text color"}),disableAlpha:!0,fullWidth:!0,color:_,onChange:B,disabled:!m||f})]}),(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsx)(Jn.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Highlight background color"}),disableAlpha:!0,fullWidth:!0,color:H,onChange:V,disabled:!m||f}),(0,d.jsx)(Jn.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Highlight text color"}),disableAlpha:!0,fullWidth:!0,color:G,onChange:q,disabled:!m||f})]}),m?(0,d.jsx)(wo,{}):(0,d.jsx)(er.Z,{subscriptionDialogOpeningReason:"Leaderboard customization",children:(0,d.jsx)(L.x1,{children:(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(F.Z,{noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Get a silver or gold subscription to unlock color customization."})}),(0,d.jsx)(Ie.Z,{href:"https://gd.games/playground/test-leaderboard",onClick:function(){return Y.ZP.openExternalURL("https://gd.games/playground/test-leaderboard")},children:(0,d.jsx)(F.Z,{noMargin:!0,color:"inherit",children:(0,d.jsx)(b.Trans,{id:"Test it out!"})})})]})})}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(F.Z,{size:"sub-title",noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Visual appearance (advanced)"})}),(0,d.jsx)(Wn.Z,{label:(0,d.jsx)(b.Trans,{id:"Use custom CSS for the leaderboard"}),disabled:!v&&!ce||f,checked:ce,onCheck:function(e,t){return ue(t)}}),(0,d.jsx)(An.Z,{fullWidth:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Custom CSS"}),multiline:!0,rows:4,rowsMax:15,value:oe,onChange:ae,disabled:!ce||f}),v?(0,d.jsx)(wo,{}):(0,d.jsx)(er.Z,{subscriptionDialogOpeningReason:"Leaderboard customization",children:(0,d.jsx)(L.x1,{children:(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(F.Z,{noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Get a pro subscription to unlock custom CSS."})}),(0,d.jsx)(Ie.Z,{href:"https://gd.games/playground/test-leaderboard",onClick:function(){return Y.ZP.openExternalURL("https://gd.games/playground/test-leaderboard")},children:(0,d.jsx)(F.Z,{noMargin:!0,color:"inherit",children:(0,d.jsx)(b.Trans,{id:"Test it out!"})})})]})})}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(F.Z,{size:"sub-title",noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Score column settings"})}),(0,d.jsx)($r.ZP,{fullWidth:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Column title"}),maxLength:20,errorText:k,value:fe,onChange:function(e,t){k&&t&&w(null),he(t)},disabled:f}),(0,d.jsxs)(K.Z,{fullWidth:!0,value:me,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Score display"}),onChange:function(e,t,n){return ve(n)},disabled:f,children:[(0,d.jsx)($.Z,{value:"custom",label:{id:"Custom display"}},"custom"),(0,d.jsx)($.Z,{value:"time",label:{id:"Display as time"}},"time")]}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(F.Z,{size:"sub-title",noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Settings"})}),"custom"===me?(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsx)($r.ZP,{fullWidth:!0,floatingLabelFixed:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Prefix"}),maxLength:10,value:je,translatableHintText:{id:"Ex: $"},onChange:function(e,t){ye(t)},disabled:f}),(0,d.jsx)($r.ZP,{fullWidth:!0,floatingLabelFixed:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Suffix"}),maxLength:10,value:we,translatableHintText:{id:"Ex: coins"},onChange:function(e,t){Te(t)},disabled:f})]}),(0,d.jsx)($r.ZP,{fullWidth:!0,type:"number",floatingLabelText:(0,d.jsx)(b.Trans,{id:"Round to X decimal point"}),errorText:Fe,value:isNaN(Ee)?"":Ee,min:-3,max:3,onChange:function(e,t){Fe&&t&&Oe(null),Me(Math.max(-3,Math.min(3,parseFloat(t))))},disabled:f})]}):(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(K.Z,{fullWidth:!0,value:Be,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Time format"}),onChange:function(e,t,n){return Ne(n)},disabled:f,children:Object.keys(Eo).map((function(e){return(0,d.jsx)($.Z,{value:e,label:e},e)}))}),(0,d.jsx)(De.Z,{kind:"info",children:(0,d.jsx)(b.Trans,{id:"To use this formatting, you must send a score expressed in seconds"})})]}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(F.Z,{size:"sub-title",noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Preview"})}),(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsx)($r.ZP,{fullWidth:!0,floatingLabelText:"custom"===me?(0,d.jsx)(b.Trans,{id:"Test value"}):(0,d.jsx)(b.Trans,{id:"Test value (in second)"}),max:Io,min:0,type:"number",value:isNaN(Ve)?"":Ve,onChange:function(e,t){return ze(Math.max(0,Math.min(Io,parseFloat(t))))},disabled:f}),(0,d.jsx)($r.ZP,{disabled:!0,fullWidth:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Displayed score"}),value:bo(Ve||0,"time"===me?(0,a.Z)({type:me},Eo[Be]):{type:me,prefix:je,suffix:we,precision:Ee||0})})]})]})})}})},Lo=n(66733),Ao=Number.MAX_SAFE_INTEGER,Fo=Number.MIN_SAFE_INTEGER;var Oo=function(e){var t=e.open,n=e.onClose,r=e.onSave,a=e.sort,c=e.extremeAllowedScore,u=l.useState(!1),p=(0,s.Z)(u,2),f=p[0],h=p[1],g=l.useState(null),x=(0,s.Z)(g,2),m=x[0],v=x[1],j=l.useState(void 0!==c),y=(0,s.Z)(j,2),Z=y[0],k=y[1],w=l.useState(c||0),T=(0,s.Z)(w,2),S=T[0],P=T[1],E=l.useState(a||"ASC"),I=(0,s.Z)(E,2),M=I[0],A=I[1],O=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z){e.next=7;break}if(!(S>Ao)){e.next=4;break}return v(t._({id:"Extreme score must be lower than {extremeAllowedScoreMax}.",values:{extremeAllowedScoreMax:Ao}})),e.abrupt("return");case 4:if(!(S<Fo)){e.next=7;break}return v(t._({id:"Extreme score must be equal or higher than {extremeAllowedScoreMin}.",values:{extremeAllowedScoreMin:Fo}})),e.abrupt("return");case 7:if(!isNaN(S)){e.next=10;break}return v(t._({id:"Limit cannot be empty, uncheck or fill a value between {extremeAllowedScoreMin} and {extremeAllowedScoreMax}.",values:{extremeAllowedScoreMin:Fo,extremeAllowedScoreMax:Ao}})),e.abrupt("return");case 10:return h(!0),n={sort:M,extremeAllowedScore:Z?S:null},e.next=14,r(n);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,d.jsx)(b.I18n,{children:function(e){var r=e.i18n;return(0,d.jsxs)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Leaderboard options"}),open:t,maxWidth:"sm",secondaryActions:[(0,d.jsx)(Hn.Z,{helpPagePath:"/interface/games-dashboard/leaderboard-administration",anchor:"change_the_appearance_of_a_leaderboard"},"help")],actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),disabled:f,onClick:n},"cancel"),(0,d.jsx)(te.vF,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Save"}),disabled:f,onClick:function(){return O(r)}},"save")],cannotBeDismissed:f,onRequestClose:n,onApply:function(){O(r)},children:[(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Sort order"})}),(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsxs)(K.Z,{fullWidth:!0,value:M,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Scores sort order"}),onChange:function(e,t,n){A(n)},children:[(0,d.jsx)($.Z,{value:"ASC",label:{id:"Lower is better"}},"ASC"),(0,d.jsx)($.Z,{value:"DESC",label:{id:"Higher is better"}},"DESC")]}),(0,d.jsx)(Wn.Z,{label:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Limit scores"})}),(0,d.jsx)(Lo.Z,{style:{display:"inline"},children:(0,d.jsx)(Ke.r,{source:r._("ASC"===M?{id:"Any submitted score that is lower than the set value will not be saved in the leaderboard."}:{id:"Any submitted score that is higher than the set value will not be saved in the leaderboard."})})})]}),checked:Z,onCheck:function(){return k(!Z)}})]}),Z&&(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsxs)(L.x1,{children:[(0,d.jsx)(L.hS,{}),(0,d.jsx)($r.ZP,{fullWidth:!0,type:"number",floatingLabelText:"ASC"===M?(0,d.jsx)(b.Trans,{id:"Minimum score"}):(0,d.jsx)(b.Trans,{id:"Maximum score"}),value:S,errorText:m,min:Fo,max:Ao,onChange:function(e,t){m&&v(null),P(parseFloat(t))}})]})})]})}})},Ro=n(80856),Do=function(e){var t=e.onUpgrade,n=e.onClose,r=e.limits.capabilities.leaderboards;return r?(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsxs)(De.Z,{kind:"warning",onHide:n,renderRightButton:r.canMaximumCountPerGameBeIncreased?function(){return(0,d.jsx)(T.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Check our premiums plans"}),onClick:t})}:void 0,children:[(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"You've reached your maximum of {0} leaderboards for your game",values:{0:r.maximumCountPerGame}})}),(0,d.jsx)(F.Z,{children:r.canMaximumCountPerGameBeIncreased?(0,d.jsx)(b.Trans,{id:"Upgrade to GDevelop Premium to get more leaderboards, storage, and one-click packagings!"}):(0,d.jsx)(b.Trans,{id:"To keep using GDevelop leaderboards, consider deleting old, unused leaderboards."})})]})})}):null},_o=n(91),Bo=["gameId"],No=function(e){var t=e.children;return(0,d.jsx)(L.sg,{expand:!0,justifyContent:"center",alignItems:"center",children:(0,d.jsx)(L.x1,{children:t})})},Uo={leftColumn:{display:"flex",flexDirection:"column",flex:1,paddingRight:5},rightColumn:{display:"flex",flexDirection:"column",flex:2},leaderboardConfigurationPaper:{padding:5,margin:5},leaderboardNameText:(0,a.Z)((0,a.Z)({},B.t),{},{width:150}),leaderboardNameTextField:{width:125,fontSize:14}},Ho=function(e){return{action:e.name?"leaderboardNameUpdate":e.sort?"leaderboardSortUpdate":e.visibility?"leaderboardVisibilityUpdate":void 0!==e.ignoreCustomPlayerNames?"leaderboardIgnoreCustomPlayerNamesUpdate":void 0!==e.autoPlayerNamePrefix?"leaderboardAutoPlayerNamePrefixUpdate":e.primary?"leaderboardPrimaryUpdate":e.customizationSettings?"leaderboardAppearanceUpdate":"leaderboardPlayerUnicityDisplayChoiceUpdate",message:e.name?(0,d.jsx)(b.Trans,{id:"An error occurred when updating the name of the leaderboard, please close the dialog, come back and try again."}):e.sort?(0,d.jsx)(b.Trans,{id:"An error occurred when updating the sort direction of the leaderboard, please close the dialog, come back and try again."}):e.visibility?(0,d.jsx)(b.Trans,{id:"An error occurred when updating the visibility of the leaderboard, please close the dialog, come back and try again."}):void 0!==e.ignoreCustomPlayerNames||void 0!==e.autoPlayerNamePrefix?(0,d.jsx)(b.Trans,{id:"An error occurred when updating the handling of player names of the leaderboard, please close the dialog, come back and try again."}):e.primary?(0,d.jsx)(b.Trans,{id:"An error occurred when setting the leaderboard as default, please close the dialog, come back and try again."}):e.customizationSettings?(0,d.jsx)(b.Trans,{id:"An error occurred when updating the appearance of the leaderboard, please close the dialog, come back and try again."}):(0,d.jsx)(b.Trans,{id:"An error occurred when updating the display choice of the leaderboard, please close the dialog, come back and try again."})}},Vo=function(e){if(void 0!==e.extremeAllowedScore){var t=e.customizationSettings?bo(e.extremeAllowedScore,e.customizationSettings.scoreFormatting):e.extremeAllowedScore;return"ASC"===e.sort?(0,d.jsx)(b.Trans,{id:"Lower is better (min: {formattedScore})",values:{formattedScore:t}}):(0,d.jsx)(b.Trans,{id:"Higher is better (max: {formattedScore})",values:{formattedScore:t}})}return"ASC"===e.sort?(0,d.jsx)(b.Trans,{id:"Lower is better"}):(0,d.jsx)(b.Trans,{id:"Higher is better"})},zo=function(e){var t=e.onLoading,n=e.project,r=e.leaderboardIdToSelectAtOpening,c=(0,to.k)(),u=(0,w.U)().isMobile,p=l.useState(!1),f=(0,s.Z)(p,2),h=f[0],g=f[1],x=(0,lt.Z)(),m=x.showConfirmation,v=x.showDeleteConfirmation,j=l.useState(!1),y=(0,s.Z)(j,2),Z=y[0],k=y[1],S=l.useContext(tr.ZP).limits,P=l.useState(!1),E=(0,s.Z)(P,2),A=E[0],O=E[1],R=l.useState(!1),D=(0,s.Z)(R,2),B=D[0],N=D[1],U=l.useState(!1),H=(0,s.Z)(U,2),V=H[0],z=H[1],W=l.useState(!1),G=(0,s.Z)(W,2),Y=G[0],q=G[1],X=l.useState(""),Q=(0,s.Z)(X,2),te=Q[0],ne=Q[1],re=l.useState(null),ie=(0,s.Z)(re,2),oe=ie[0],ae=ie[1],se=l.useState(""),le=(0,s.Z)(se,2),ue=le[0],pe=le[1],fe=l.useRef(null),he=l.useRef(null),ge=l.useState(null),be=(0,s.Z)(ge,2),Ce=be[0],je=be[1],ye=l.useState(!1),ke=(0,s.Z)(ye,2),we=ke[0],Te=ke[1],Se=l.useContext(io),Pe=Se.leaderboards,Ee=Se.listLeaderboards,Ie=Se.currentLeaderboard,Me=Se.createLeaderboard,Le=Se.selectLeaderboard,Ae=Se.updateLeaderboard,Fe=Se.resetLeaderboard,Oe=Se.deleteLeaderboard,Re=Se.deleteLeaderboardEntry,_e=Se.displayOnlyBestEntry,Be=Se.setDisplayOnlyBestEntry,Ne=Se.fetchLeaderboardEntries,Ue=Se.browsing,He=Ue.entries,Ve=Ue.goToNextPage,ze=Ue.goToPreviousPage,We=Ue.goToFirstPage,Ge=l.useContext(Ro.o).openSubscriptionDialog,Ye=l.useCallback((function(e){q(e),t(e)}),[t]),qe=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ae(null),void 0===n.name||0!==n.name.length){e.next=4;break}return ae(t._({id:"Please enter a name that is at least one character long and 50 at most."})),e.abrupt("return");case 4:return Ye(!0),je(null),e.prev=6,e.next=9,Ae(n);case 9:n.name&&N(!1),void 0!==n.autoPlayerNamePrefix&&z(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),console.error("An error occurred when updating leaderboard",e.t0),je(Ho(n));case 17:return e.prev=17,Ye(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[6,13,17,20]])})));return function(t,n){return e.apply(this,arguments)}}(),Ke=l.useCallback((function(){var e=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),je(null),e.prev=2,e.next=5,Ee();case 5:e.next=15;break;case 7:if(e.prev=7,e.t0=e.catch(2),!(t=(0,_o.T)(e.t0))||404!==t.status){e.next=13;break}return Te(!0),e.abrupt("return");case 13:console.error("An error occurred when fetching leaderboards",e.t0),je({action:"leaderboardsFetching",message:(0,d.jsx)(b.Trans,{id:"An error occurred when fetching the leaderboards, please close the dialog and reopen it."})});case 15:return e.prev=15,q(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,7,15,18]])})));return function(){return e.apply(this,arguments)}}();e()}),[Ee]),Je=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ye(!0),je(null),e.prev=2,e.next=5,Ne();case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("An error occurred when fetching leaderboard entries",e.t0),je({action:"entriesFetching",message:(0,d.jsx)(b.Trans,{id:"An error occurred when fetching the entries of the leaderboard, please try again."})});case 11:return e.prev=11,Ye(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,7,11,14]])})));return function(){return e.apply(this,arguments)}}(),Qe=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ye(!0),je(null),e.prev=2,!S||!Pe){e.next=8;break}if(!((t=S.capabilities.leaderboards)&&t.maximumCountPerGame>0&&Pe.length>=t.maximumCountPerGame)){e.next=8;break}return k(!0),e.abrupt("return");case 8:return e.next=10,Me({name:"New leaderboard",sort:"ASC"});case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.error("An error occurred when creating leaderboard",e.t0),je({action:"leaderboardCreation",message:(0,d.jsx)(b.Trans,{id:"An error occurred when creating a new leaderboard, please close the dialog, come back and try again."})});case 16:return e.prev=16,Ye(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,12,16,19]])})));return function(){return e.apply(this,arguments)}}(),$e=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ie){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,m({title:{id:"Reset leaderboard {0}",values:{0:Ie.name}},message:{id:"All current entries will be deleted, are you sure you want to reset this leaderboard? This can't be undone."},confirmButtonLabel:{id:"Reset leaderboard"}});case 4:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return Ye(!0),je(null),e.prev=9,e.next=12,Fe();case 12:e.next=19;break;case 14:e.prev=14,e.t0=e.catch(9),console.error("An error occurred when resetting leaderboard",e.t0),n=(0,_o.T)(e.t0),je({action:"leaderboardReset",message:n&&409===n.status?(0,d.jsx)(b.Trans,{id:"This leaderboard is already resetting, please wait a bit, close the dialog, come back and try again."}):(0,d.jsx)(b.Trans,{id:"An error occurred when resetting the leaderboard, please close the dialog, come back and try again."})});case 19:return e.prev=19,Ye(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[9,14,19,22]])})));return function(t){return e.apply(this,arguments)}}(),et=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ie){e.next=2;break}return e.abrupt("return");case 2:return n=t._({id:"delete"}),e.next=5,v({title:{id:"Do you really want to permanently delete the leaderboard {0}?",values:{0:Ie.name}},message:{id:"You\u2019re about to permanently delete this leaderboard and all of its entries. This can't be undone."},fieldMessage:{id:'To confirm, type "{translatedConfirmText}"',values:{translatedConfirmText:n}},confirmText:n,confirmButtonLabel:{id:"Delete Leaderboard"}});case 5:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:return Ye(!0),je(null),e.prev=10,e.next=13,Oe();case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(10),console.error("An error occurred when deleting leaderboard",e.t0),je({action:"leaderboardDeletion",message:(0,d.jsx)(b.Trans,{id:"An error occurred when deleting the leaderboard, please close the dialog, come back and try again."})});case 19:return e.prev=19,Ye(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[10,15,19,22]])})));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ie){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,m({title:{id:"Delete score {0} from {1}",values:{0:n.score,1:n.playerName}},message:{id:"Are you sure you want to delete this entry? This can't be undone."},confirmButtonLabel:{id:"Delete Entry"}});case 4:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return Ye(!0),je(null),e.prev=9,e.next=12,Re(n.id);case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(9),console.error("An error occurred when deleting entry",e.t0),je({action:"entryDeletion",message:(0,d.jsx)(b.Trans,{id:"An error occurred when deleting the entry, please try again."}),itemId:n.id});case 18:return e.prev=18,Ye(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[9,14,18,21]])})));return function(t,n){return e.apply(this,arguments)}}();l.useEffect((function(){B&&fe.current&&fe.current.focus()}),[B]),l.useEffect((function(){null===Pe&&Ke()}),[Pe,Ke]),l.useEffect((function(){Ie&&Je()}),[]),l.useEffect((function(){r&&Le(r)}),[r,Le]);var nt=l.useCallback((function(){Ie&&navigator.clipboard.writeText(Ie.id)}),[Ie]);if(!c)return(0,d.jsx)(No,{children:(0,d.jsx)(fr.Z,{children:(0,d.jsx)(b.Trans,{id:"An internet connection is required to administrate your game's leaderboards."})})});if(we)return(0,d.jsx)(No,{children:(0,d.jsx)(ko.C,{project:n,onGameRegistered:function(){Te(!1),Ke()}})});if(Ce&&"leaderboardCreation"===Ce.action)return(0,d.jsx)(No,{children:(0,d.jsx)(De.Z,{kind:"error",children:Ce.message})});if(Ce&&"leaderboardsFetching"===Ce.action)return(0,d.jsx)(No,{children:(0,d.jsx)(fr.Z,{onRetry:Ke,children:Ce.message})});if(null===Pe)return Y?(0,d.jsx)(Xe.Z,{}):(0,d.jsx)(No,{children:(0,d.jsx)(fr.Z,{onRetry:Ke,children:(0,d.jsx)(b.Trans,{id:"An error occurred when retrieving leaderboards, please try again later."})})});if(Pe&&0===Pe.length)return(0,d.jsx)(L.x1,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:(0,d.jsx)(wt.$,{title:(0,d.jsx)(b.Trans,{id:"Create your game's first leaderboard"}),description:(0,d.jsx)(b.Trans,{id:"Leaderboards help retain your players"}),actionLabel:(0,d.jsx)(b.Trans,{id:"Create a leaderboard"}),onAction:function(){Qe()},actionButtonId:"add-new-leaderboard-button",isLoading:Y})});var rt=function(e,t){return[{key:"name",avatar:(0,d.jsx)(zi,{}),text:B?(0,d.jsxs)(L.x1,{alignItems:"center",expand:!0,noMargin:!0,children:[(0,d.jsx)($r.ZP,{id:"edit-name-field",ref:fe,margin:"none",style:Uo.leaderboardNameTextField,maxLength:50,value:te,errorText:oe,onChange:function(e,t){return ne(t)},onKeyPress:function(t){(0,kn.ph)(t)&&!Y&&qe(e,{name:te})},disabled:Y}),!Y&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.LZ,{}),(0,d.jsx)(M.Z,{tooltip:{id:"Cancel"},style:{padding:0},onClick:function(){N(!1)},children:(0,d.jsx)(_.Z,{})})]})]}):(0,d.jsx)(Ze.ZP,{title:t.name,children:(0,d.jsx)(F.Z,{size:"body2",style:Uo.leaderboardNameText,children:t.name})}),secondaryText:Ce&&"leaderboardNameUpdate"===Ce.action?(0,d.jsx)(F.Z,{color:"error",size:"body2",children:Ce.message}):null,secondaryAction:(0,d.jsx)(M.Z,{onClick:function(){B?qe(e,{name:te}):(ne(t.name),N(!0))},tooltip:B?{id:"Save"}:{id:"Rename"},disabled:Y,edge:"end",id:B?"save-name-button":"edit-name-button",children:B?Y?(0,d.jsx)(eo.Z,{size:20}):(0,d.jsx)(I,{}):(0,d.jsx)(bt.Z,{})})},{key:"id",avatar:(0,d.jsx)(Wi,{}),text:(0,d.jsx)(Ze.ZP,{title:t.id,children:(0,d.jsx)(F.Z,{size:"body2",children:(0,no.GA)(t.id)})}),secondaryText:null,secondaryAction:(0,d.jsx)(M.Z,{onClick:nt,tooltip:{id:"Copy"},edge:"end",children:(0,d.jsx)(bn.Z,{})})},{key:"startDatetime",avatar:(0,d.jsx)(Gi,{}),text:t.resetLaunchedAt?(0,d.jsx)(F.Z,{size:"body2",children:(0,d.jsx)(b.Trans,{id:"Reset requested the {0} . Please wait a few minutes...",values:{0:e.date(t.resetLaunchedAt,{dateStyle:"short",timeStyle:"short"})}})}):(0,d.jsx)(Ze.ZP,{title:e._({id:"Date from which entries are taken into account: {0}",values:{0:e.date(t.startDatetime,{dateStyle:"short",timeStyle:"short"})}}),children:(0,d.jsx)(F.Z,{size:"body2",children:e.date(t.startDatetime)})}),secondaryText:Ce&&"leaderboardReset"===Ce.action?(0,d.jsx)(F.Z,{color:"error",size:"body2",children:Ce.message}):null,secondaryAction:(0,d.jsx)(M.Z,{onClick:function(){return $e(e)},tooltip:{id:"Reset leaderboard"},edge:"end",disabled:Y||B||!!t.resetLaunchedAt,children:(0,d.jsx)(Xi.Z,{})})},{key:"sort",avatar:(0,d.jsx)(Yi,{}),text:(0,d.jsx)(F.Z,{size:"body2",children:Vo(t)}),secondaryText:Ce&&"leaderboardSortUpdate"===Ce.action?(0,d.jsx)(F.Z,{color:"error",size:"body2",children:Ce.message}):null,secondaryAction:(0,d.jsx)(M.Z,{onClick:function(){return O(!0)},tooltip:{id:"Edit"},edge:"end",disabled:Y||B,children:(0,d.jsx)(bt.Z,{})})},{key:"visibility",avatar:"HIDDEN"===t.visibility?(0,d.jsx)(Ji,{}):(0,d.jsx)(Ki.Z,{}),text:(0,d.jsx)(Ze.ZP,{title:e._("HIDDEN"===t.visibility?{id:"Anyone with the link can see it, but it is not listed in your game's leaderboards."}:{id:"Anyone can access it."}),children:(0,d.jsx)(F.Z,{size:"body2",children:"HIDDEN"===t.visibility?(0,d.jsx)(b.Trans,{id:"Not visible"}):(0,d.jsx)(b.Trans,{id:"Public"})})}),secondaryText:Ce&&"leaderboardVisibilityUpdate"===Ce.action?(0,d.jsx)(F.Z,{color:"error",size:"body2",children:Ce.message}):null,secondaryAction:(0,d.jsx)(M.Z,{onClick:(0,o.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,qe(e,{visibility:"HIDDEN"===t.visibility?"PUBLIC":"HIDDEN"});case 2:case"end":return n.stop()}}),n)}))),tooltip:"HIDDEN"===t.visibility?{id:"Make the leaderboard public"}:{id:"Hide the leaderboard"},edge:"end",disabled:Y||B,children:(0,d.jsx)(yn,{})})},{key:"ignoreCustomPlayerNames",avatar:t.ignoreCustomPlayerNames?(0,d.jsx)(Qi,{}):(0,d.jsx)($i,{}),text:(0,d.jsx)(Ze.ZP,{title:e._(t.ignoreCustomPlayerNames?{id:"Even if the action is used to send a score with a custom player username, this name will be ignored by the leaderboard."}:{id:"The player name sent in the action to send a score will be used."}),children:(0,d.jsx)(F.Z,{size:"body2",children:t.ignoreCustomPlayerNames?(0,d.jsx)(b.Trans,{id:"Ignore unauthenticated player usernames"}):(0,d.jsx)(b.Trans,{id:"Allow unauthenticated player usernames"})})}),secondaryText:Ce&&"leaderboardIgnoreCustomPlayerNamesUpdate"===Ce.action?(0,d.jsx)(F.Z,{color:"error",size:"body2",children:Ce.message}):null,secondaryAction:(0,d.jsx)(M.Z,{onClick:(0,o.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,qe(e,{ignoreCustomPlayerNames:!t.ignoreCustomPlayerNames});case 2:case"end":return n.stop()}}),n)}))),tooltip:t.ignoreCustomPlayerNames?{id:"Change to allow custom player usernames"}:{id:"Change to ignore custom player usernames"},edge:"end",disabled:Y||B,children:(0,d.jsx)(yn,{})})},{key:"autoPlayerNamePrefix",avatar:(0,d.jsx)(zi,{}),text:V?(0,d.jsxs)(L.x1,{alignItems:"center",expand:!0,noMargin:!0,children:[(0,d.jsx)($r.ZP,{id:"edit-autoPlayerNamePrefix-field",ref:he,margin:"none",style:Uo.leaderboardNameTextField,maxLength:40,value:ue,onChange:function(e,t){return pe(t)},onKeyPress:function(t){(0,kn.ph)(t)&&!Y&&qe(e,{autoPlayerNamePrefix:ue})},disabled:Y}),!Y&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.LZ,{}),(0,d.jsx)(M.Z,{tooltip:{id:"Cancel"},style:{padding:0},onClick:function(){z(!1)},children:(0,d.jsx)(_.Z,{})})]})]}):(0,d.jsx)(Ze.ZP,{title:t.autoPlayerNamePrefix||e._("No custom prefix for auto-generated player names"),children:(0,d.jsx)(F.Z,{size:"body2",style:Uo.leaderboardNameText,children:t.autoPlayerNamePrefix||e._("No custom prefix for auto-generated player names")})}),secondaryText:Ce&&"leaderboardAutoPlayerNamePrefixUpdate"===Ce.action?(0,d.jsx)(F.Z,{color:"error",size:"body2",children:Ce.message}):null,secondaryAction:(0,d.jsx)(M.Z,{onClick:function(){V?qe(e,{autoPlayerNamePrefix:ue}):(pe(t.autoPlayerNamePrefix||""),z(!0))},tooltip:V?{id:"Save"}:{id:"Change the default prefix for player names"},disabled:Y,edge:"end",id:V?"save-autoPlayerNamePrefix-button":"edit-autoPlayerNamePrefix-button",children:V?Y?(0,d.jsx)(eo.Z,{size:20}):(0,d.jsx)(I,{}):(0,d.jsx)(bt.Z,{})})},{key:"appearance",avatar:(0,d.jsx)(Hi.Z,{}),text:(0,d.jsx)(F.Z,{size:"body2",children:(0,d.jsx)(b.Trans,{id:"Leaderboard appearance"})}),secondaryText:Ce&&"leaderboardAppearanceUpdate"===Ce.action?(0,d.jsx)(F.Z,{color:"error",size:"body2",children:Ce.message}):null,secondaryAction:(0,d.jsx)(M.Z,{onClick:function(){return g(!0)},tooltip:{id:"Edit"},edge:"end",disabled:Y||B,children:(0,d.jsx)(Vi,{})})},{key:"playerUnicityDisplayChoice",avatar:(0,d.jsx)(qi,{}),text:(0,d.jsxs)(K.Z,{fullWidth:!0,margin:"none",value:t.playerUnicityDisplayChoice,onChange:function(t,n,r){qe(e,{playerUnicityDisplayChoice:r})},disabled:Y||B,inputStyle:{fontSize:14},helperMarkdownText:"FREE"===t.playerUnicityDisplayChoice?e._({id:"Users can chose to see only players' best entries or not."}):"PREFER_UNIQUE"===t.playerUnicityDisplayChoice?e._({id:"Only player's best entries are displayed."}):e._({id:"All entries are displayed."}),children:[(0,d.jsx)($.Z,{value:"FREE",label:{id:"Let the user select"}},"free"),(0,d.jsx)($.Z,{value:"PREFER_UNIQUE",label:{id:"Only best entry"}},"prefer-unique"),(0,d.jsx)($.Z,{value:"PREFER_NON_UNIQUE",label:{id:"All entries"}},"prefer-non-unique")]}),secondaryText:Ce&&"leaderboardPlayerUnicityDisplayChoiceUpdate"===Ce.action?(0,d.jsx)(F.Z,{color:"error",size:"body2",children:Ce.message}):null,secondaryAction:null}]};return(0,d.jsx)(b.I18n,{children:function(e){var t=e.i18n;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(L.sg,{noMargin:!0,expand:!0,children:[Z&&S&&(0,d.jsx)(Do,{onUpgrade:function(){return Ge({analyticsMetadata:{reason:"Leaderboard count per game limit reached"}})},onClose:function(){return k(!1)},limits:S}),(0,d.jsxs)(C.ep,{noMargin:!0,expand:!0,noColumnMargin:!0,id:"leaderboard-administration-panel",children:[(0,d.jsx)("div",{style:Uo.leftColumn,children:(0,d.jsx)(de.Z,{elevation:3,style:Uo.leaderboardConfigurationPaper,background:"light",children:(0,d.jsxs)(L.sg,{children:[(0,d.jsxs)(L.x1,{noMargin:!0,children:[Ie&&Pe?(0,d.jsx)(K.Z,{fullWidth:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Leaderboard name"}),value:Ie.id,onChange:function(e,t,n){Le(n)},children:Pe.map((function(e){return(0,d.jsx)($.Z,{value:e.id,label:e.primary?{id:"{0} (default)",values:{0:e.name}}:e.name,shouldNotTranslate:!e.primary},e.id)}))}):null,(0,d.jsx)(M.Z,{onClick:Qe,disabled:B||Y,children:(0,d.jsx)(vt.Z,{})})]}),Ie?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ce.Z,{children:rt(t,Ie).map((function(e,t){return(0,d.jsxs)(l.Fragment,{children:[t>0?(0,d.jsx)(Pr.Z,{component:"li"},"divider-".concat(e.key)):null,(0,d.jsxs)(xe.Z,{disableGutters:!0,children:[(0,d.jsx)(Ui.Z,{children:(0,d.jsx)(Ni.Z,{children:e.avatar})}),(0,d.jsx)(me.Z,{disableTypography:!0,secondary:e.secondaryText,children:e.text}),e.secondaryAction?(0,d.jsx)(ve.Z,{children:e.secondaryAction}):null]},e.key)]},"fragment-".concat(e.key))}))}),(0,d.jsxs)(L.x1,{justifyContent:"space-between",children:[(0,d.jsx)(J.Z,{leftIcon:(0,d.jsx)(vn.Z,{}),label:(0,d.jsx)(b.Trans,{id:"Delete"}),disabled:Y||B,onClick:function(){return et(t)}}),(0,d.jsx)(T.Z,{label:Ie.primary?(0,d.jsx)(b.Trans,{id:"Default"}):(0,d.jsx)(b.Trans,{id:"Set as default"}),disabled:Y||B||Ie.primary,onClick:function(){return qe(t,{primary:!0})}})]}),!Ce||"leaderboardDeletion"!==Ce.action&&"leaderboardPrimaryUpdate"!==Ce.action?null:(0,d.jsx)(fr.Z,{children:Ce.message})]}):null]})})}),(0,d.jsxs)("div",{style:(0,a.Z)((0,a.Z)({},Uo.rightColumn),{},{paddingLeft:u?0:20}),children:[(0,d.jsxs)(L.x1,{alignItems:"center",justifyContent:"flex-end",children:[(0,d.jsx)(ee.Z,{labelPosition:"left",toggled:_e,onToggle:function(e,t){return Be(t)},label:(0,d.jsx)(Ze.ZP,{title:t._({id:"When checked, will only display the best score of each player (only for the display below)."}),children:(0,d.jsx)(F.Z,{size:"body2",children:(0,d.jsx)(b.Trans,{id:"Player best entry"})})})}),(0,d.jsx)(L.hS,{}),(0,d.jsx)(Pr.Z,{orientation:"vertical"}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(M.Z,{onClick:Je,disabled:Y||B,tooltip:{id:"Refresh"},size:"small",children:(0,d.jsx)(Xi.Z,{})}),(0,d.jsx)(L.LZ,{})]}),Ce&&"entriesFetching"===Ce.action?(0,d.jsx)(No,{children:(0,d.jsx)(fr.Z,{onRetry:Je,children:Ce.message})}):(0,d.jsx)(Zo,{entries:He,customizationSettings:Ie?Ie.customizationSettings:null,onDeleteEntry:function(e){return tt(t,e)},isLoading:Y||B,navigation:{goToNextPage:Ve,goToPreviousPage:ze,goToFirstPage:We},erroredEntry:Ce&&"entryDeletion"===Ce.action&&Ce.itemId?{entryId:Ce.itemId,message:Ce.message}:void 0})]})]})]}),h?(0,d.jsx)(Mo,{open:!0,leaderboardCustomizationSettings:Ie?Ie.customizationSettings:void 0,onClose:function(){return g(!1)},onSave:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qe(t,{customizationSettings:n});case 3:return e.prev=3,g(!1),e.finish(3);case 6:case"end":return e.stop()}}),e,null,[[0,,3,6]])})));return function(t){return e.apply(this,arguments)}}()}):null,A&&Ie?(0,d.jsx)(Oo,{open:!0,onClose:function(){return O(!1)},onSave:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qe(t,(0,a.Z)({},n));case 3:return e.prev=3,O(!1),e.finish(3);case 6:case"end":return e.stop()}}),e,null,[[0,,3,6]])})));return function(t){return e.apply(this,arguments)}}(),sort:Ie.sort,extremeAllowedScore:Ie.extremeAllowedScore}):null]})}})},Wo=function(e){var t=e.gameId,n=(0,Bi.Z)(e,Bo);return(0,d.jsx)(lo,{gameId:t,children:(0,d.jsx)(zo,(0,a.Z)({},n))})},Go=n(71039),Yo=n(7374),qo=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,r,o){var a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,We().get("".concat(Ge.Jv.baseUrl,"/game-metrics"),{params:{userId:n,gameId:r,firstDayIsoDate:o},headers:{Authorization:a},validateStatus:function(e){return e>=200&&e<300||404===e}});case 5:if(404!==(s=e.sent).status){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",s.data);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),Xo=n(9159),Ko=n(28648),Jo=n(83013),Qo=n(38465),$o=n(51111),ea=n(70958),ta=n(7627),na=n(43770),ra=n(68707),ia=n(37762),oa=n(25779),aa=n(64881),sa=n(96522),la={overview:{viewersCount:0,playersCount:0,bounceRatePercent:0,meanPlayedDurationInMinutes:0,nearestToMedianDuration:{playersCount:0,playersPercent:0,durationInMinutes:0},greaterDurationPlayerSurface:{playersCount:0,playersPercent:0,durationInMinutes:0}},overTime:[],overPlayedDuration:[]},ca={for1Minute:0,for3Minutes:1,for5Minutes:2,for10Minutes:3,for15Minutes:4},ua=[1,3,5,10,15],da=function(e){return{date:(0,Go.Z)(e),sessions:{d0Sessions:0,d0SessionsDurationTotal:0},players:{d0Players:0,d0NewPlayers:0,d0PlayersBelow60s:0,d0PlayersBelow180s:0,d0PlayersBelow300s:0,d0PlayersBelow600s:0,d0PlayersBelow900s:0},retention:null}},pa=function(e){for(var t,n,r=[],i=0;i<e.length;i+=7){for(var o=e[i],a=i+1;a<i+7&&a<e.length;a++)t=o,n=e[a],o={date:t.date,startDate:n.date,sessions:t.sessions&&n.sessions&&{d0Sessions:t.sessions.d0Sessions+n.sessions.d0Sessions,d0SessionsDurationTotal:null!=t.sessions.d0SessionsDurationTotal&&null!=n.sessions.d0SessionsDurationTotal?t.sessions.d0SessionsDurationTotal+n.sessions.d0SessionsDurationTotal:void 0},players:t.players&&n.players&&{d0Players:t.players.d0Players+n.players.d0Players,d0NewPlayers:t.players.d0NewPlayers+n.players.d0NewPlayers,d0PlayersBelow60s:null!=t.players.d0PlayersBelow60s&&null!=n.players.d0PlayersBelow60s?t.players.d0PlayersBelow60s+n.players.d0PlayersBelow60s:void 0,d0PlayersBelow180s:null!=t.players.d0PlayersBelow180s&&null!=n.players.d0PlayersBelow180s?t.players.d0PlayersBelow180s+n.players.d0PlayersBelow180s:void 0,d0PlayersBelow300s:null!=t.players.d0PlayersBelow300s&&null!=n.players.d0PlayersBelow300s?t.players.d0PlayersBelow300s+n.players.d0PlayersBelow300s:void 0,d0PlayersBelow600s:null!=t.players.d0PlayersBelow600s&&null!=n.players.d0PlayersBelow600s?t.players.d0PlayersBelow600s+n.players.d0PlayersBelow600s:void 0,d0PlayersBelow900s:null!=t.players.d0PlayersBelow900s&&null!=n.players.d0PlayersBelow900s?t.players.d0PlayersBelow900s+n.players.d0PlayersBelow900s:void 0},retention:null};r.push(o)}return r},fa=function(e,t){return null!=e&&t>0?100*(t-e)/t:0},ha=function(e,t,n){return null!=e&&null!=t&&n>0?100*(e-t)/n:0},ga=function(e,t){return null!=e&&null!=t?e-t:0},xa=function(e){var t=[0,0,0,0,0],n=0,r=0,i=0;e.forEach((function(e){var o=e.sessions&&null!==e.sessions.d0SessionsDurationTotal?e.sessions.d0SessionsDurationTotal:void 0,a=e.players?e.players.d0Players:0,s=e.players&&null!==e.players.d0PlayersBelow60s?e.players.d0PlayersBelow60s:void 0,l=e.players&&null!==e.players.d0PlayersBelow180s?e.players.d0PlayersBelow180s:void 0,c=e.players&&null!==e.players.d0PlayersBelow300s?e.players.d0PlayersBelow300s:void 0,u=e.players&&null!==e.players.d0PlayersBelow600s?e.players.d0PlayersBelow600s:void 0,d=e.players&&null!==e.players.d0PlayersBelow900s?e.players.d0PlayersBelow900s:void 0;t[ca.for1Minute]+=s||0,t[ca.for3Minutes]+=l||0,t[ca.for5Minutes]+=c||0,t[ca.for10Minutes]+=u||0,t[ca.for15Minutes]+=d||0,i+=o||0,n+=a,r+=void 0!==s?a:0})),i/=60;var o=r,a=r-t[ca.for1Minute],s=function(e,t){var n=e.findIndex((function(e,n){return n>0&&e>t/2})),r=e[n],i=e[n+1];return i&&Math.abs(r-t/2)<Math.abs(i-t/2)?n:n+1}(t,a),l=function(e,t){for(var n=0,r=0,i=0;i<e.length;i++){var o=(t-e[i])*ua[i];o>=n&&(n=o,r=i)}return r}(t,o),c={month:"short",day:"numeric"},u={day:"numeric"},d=function(e){var t=e.startDate,n=(0,aa.Z)(e.date),r=n.toLocaleDateString(void 0,c);if(!t)return r;var i=(0,aa.Z)(t);return i.toLocaleDateString(void 0,n.getMonth()===i.getMonth()?u:c)+"-"+r};return{overview:{viewersCount:n,playersCount:a,bounceRatePercent:o>0?100*t[ca.for1Minute]/o:0,meanPlayedDurationInMinutes:o>0?i/o:0,nearestToMedianDuration:{playersCount:o-t[s],playersPercent:o>0?100*(o-t[s])/o:0,durationInMinutes:ua[s]},greaterDurationPlayerSurface:{playersCount:o-t[l],playersPercent:o>0?100*(o-t[l])/o:0,durationInMinutes:ua[l]}},overTime:e.map((function(e){var t=e.sessions&&null!==e.sessions.d0SessionsDurationTotal?e.sessions.d0SessionsDurationTotal:void 0,n=e.players?e.players.d0Players:0,r=e.players&&null!==e.players.d0PlayersBelow60s?e.players.d0PlayersBelow60s:void 0,i=e.players&&null!==e.players.d0PlayersBelow180s?e.players.d0PlayersBelow180s:void 0,o=e.players&&null!==e.players.d0PlayersBelow300s?e.players.d0PlayersBelow300s:void 0,a=e.players&&null!==e.players.d0PlayersBelow600s?e.players.d0PlayersBelow600s:void 0,s=e.players&&null!==e.players.d0PlayersBelow900s?e.players.d0PlayersBelow900s:void 0;return{timestamp:(0,aa.Z)(e.date).getTime(),date:d(e),meanPlayedDurationInMinutes:t?t/60/n:0,bounceRatePercent:ha(r,0,n),viewersCount:n,playersCount:ga(n,r),over60sPlayersCount:ga(n,r),over180sPlayersCount:ga(n,i),over300sPlayersCount:ga(n,o),over600sPlayersCount:ga(n,a),over900sPlayersCount:ga(n,s),below60sPlayersCount:ga(r,0),from60sTo180sPlayersCount:ga(i,r),from180sTo300sPlayersCount:ga(o,i),from300sTo600sPlayersCount:ga(a,o),from600sTo900sPlayersCount:ga(s,a),from900sToInfinityPlayersCount:ga(n,s),over0sPlayersPercent:100,over60sPlayersPercent:fa(r,n),over180sPlayersPercent:fa(i,n),over300sPlayersPercent:fa(o,n),over600sPlayersPercent:fa(a,n),over900sPlayersPercent:fa(s,n),below60sPlayersPercent:ha(r,0,n),from60sTo180sPlayersPercent:ha(i,r,n),from180sTo300sPlayersPercent:ha(o,i,n),from300sTo600sPlayersPercent:ha(a,o,n),from600sTo900sPlayersPercent:ha(s,a,n),from900sToInfinityPlayersPercent:ha(n,s,n)}})).sort((function(e,t){return e.timestamp-t.timestamp})),overPlayedDuration:[{duration:0,playersCount:r}].concat(Object.keys(ca).map((function(e){var n=ca[e];return{duration:ua[n],playersCount:r-t[n]}})))}},ma=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;if(!e)return{yearChartData:la,monthChartData:la};var n=function(e,t){var n,r=[],i=(0,oa.Z)(t,1),o=(0,ia.Z)(e);try{for(o.s();!(n=o.n()).done;){for(var a=n.value,s=(0,aa.Z)(a.date);(0,sa.Z)((0,aa.Z)(a.date),i)<-1;){var l=(0,Yo.Z)(i,1);r.push(da(l)),i=l}r.push(a),i=s}}catch(u){o.e(u)}finally{o.f()}for(;r.length<364;){var c=(0,Yo.Z)(i,1);r.push(da(c)),i=c}return r}(e.sort((function(e,t){return(0,aa.Z)(t.date).getTime()-(0,aa.Z)(e.date).getTime()})),t);return{yearChartData:xa(pa(n)),monthChartData:xa(n.slice(0,30).map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{startDate:null})})))}},va={top:5,bottom:5,right:25,left:0},ba="99%",Ca=300,ja=function(e){return e.toFixed(2)},ya=function(e){return e.toFixed(2)},Za=function(e){var t=e.payload,n=e.label,r=e.customStyle;return t?(0,d.jsx)(de.Z,{style:r,background:"light",children:(0,d.jsxs)(C.ak,{children:[(0,d.jsx)(F.Z,{size:"sub-title",noMargin:!0,children:n}),t.length>0&&t.map((function(e,t){var n=e.name,r=e.unit,i=e.value;return(0,d.jsx)(F.Z,{noMargin:!0,children:"".concat(n,": ").concat(Number.isInteger(i)?i.toString():i.toFixed(2)).concat(r?" ".concat(r):"")},t)}))]})}):null},ka=function(e){var t=e.game,n=l.useContext(tr.ZP),r=n.getAuthorizationHeader,c=n.profile,u=l.useState(null),p=(0,s.Z)(u,2),h=p[0],g=p[1],x=l.useMemo((function(){return ma(h)}),[h]),m=x.yearChartData,v=x.monthChartData,j=l.useState("month"),y=(0,s.Z)(j,2),Z=y[0],k=y[1],w="year"===Z?m:v,T=l.useState(null),S=(0,s.Z)(T,2),P=S[0],E=S[1],I=l.useState(!1),M=(0,s.Z)(I,2),A=M[0],O=M[1],R=(0,Go.Z)((0,Yo.Z)(new Date,364),{representation:"date"}),D=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var n,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return");case 2:return n=c.id,O(!0),E(null),e.prev=5,e.next=8,qo(r,n,t.id,R);case 8:o=e.sent,g(o),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("Unable to load game rolling metrics:",e.t0),E(e.t0);case 16:O(!1);case 17:case"end":return e.stop()}}),e,null,[[5,12]])}))),[r,c,t,R]);l.useEffect((function(){D()}),[D]);var _=l.useContext(f.Z),B={tableRowStatColumn:{width:100},tooltipContent:{color:_.chart.textColor,padding:10},tickLabel:{fontFamily:_.chart.fontFamily},chartLineDot:{fill:_.chart.dataColor1,strokeWidth:0}};return(0,d.jsx)(b.I18n,{children:function(e){var t=e.i18n;return P?(0,d.jsxs)(fr.Z,{onRetry:function(){D()},children:[(0,d.jsx)(b.Trans,{id:"There was an issue getting the game analytics."})," ",(0,d.jsx)(b.Trans,{id:"Verify your internet connection or try again later."})]}):(0,d.jsxs)(C.ak,{expand:!0,children:[A&&(0,d.jsx)(Xe.Z,{}),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.x1,{noMargin:!0,justifyContent:"flex-end",children:(0,d.jsxs)(K.Z,{value:Z,onChange:function(e,t,n){k(n)},disableUnderline:!0,children:[(0,d.jsx)($.Z,{value:"month",label:{id:"Month"}},"month"),(0,d.jsx)($.Z,{value:"year",label:{id:"Year"}},"year")]})}),A||h&&0!==h.length?null:(0,d.jsx)(De.Z,{kind:"warning",children:(0,d.jsx)(b.Trans,{id:"There were no players or stored metrics for this period. Be sure to publish your game and get players to try it to see the collected anonymous analytics."})}),(0,d.jsxs)(C.ep,{expand:!0,noMargin:!0,justifyContent:"center",children:[(0,d.jsxs)(L.sg,{noMargin:!0,alignItems:"center",expand:!0,children:[(0,d.jsx)(F.Z,{size:"block-title",align:"center",children:(0,d.jsx)(b.Trans,{id:"{0} sessions",values:{0:w.overview.playersCount}})}),(0,d.jsx)(Xo.h,{width:ba,height:Ca,children:(0,d.jsxs)(Ko.T,{data:w.overTime,margin:va,children:[(0,d.jsx)(Jo.u,{name:t._({id:"Viewers"}),type:"monotone",dataKey:"viewersCount",stroke:_.chart.dataColor1,fill:_.chart.dataColor1,fillOpacity:.125,yAxisId:0}),(0,d.jsx)(Jo.u,{name:t._({id:"Players"}),type:"monotone",dataKey:"playersCount",stroke:_.chart.dataColor1,fill:_.chart.dataColor1,fillOpacity:.25,yAxisId:0}),(0,d.jsx)(Qo.q,{stroke:_.chart.gridColor,strokeDasharray:"3 3"}),(0,d.jsx)($o.K,{dataKey:"date",stroke:_.chart.textColor,style:B.tickLabel}),(0,d.jsx)(ea.B,{dataKey:"viewersCount",stroke:_.chart.textColor,style:B.tickLabel}),(0,d.jsx)(ta.u,{content:function(e){return Za((0,a.Z)((0,a.Z)({},e),{},{customStyle:B.tooltipContent}))}})]})})]}),(0,d.jsxs)(L.sg,{noMargin:!0,alignItems:"center",expand:!0,children:[(0,d.jsx)(F.Z,{size:"block-title",align:"center",children:(0,d.jsx)(b.Trans,{id:"{0}% bounce rate",values:{0:Math.round(w.overview.bounceRatePercent)}})}),(0,d.jsx)(Xo.h,{width:ba,height:Ca,children:(0,d.jsxs)(na.w,{data:w.overTime,margin:va,children:[(0,d.jsx)(ra.x,{name:t._({id:"Bounce rate"}),unit:"%",formatter:ja,type:"monotone",dataKey:"bounceRatePercent",stroke:_.chart.dataColor1,dot:B.chartLineDot,yAxisId:0}),(0,d.jsx)(Qo.q,{stroke:_.chart.gridColor,strokeDasharray:"3 3"}),(0,d.jsx)($o.K,{dataKey:"date",stroke:_.chart.textColor,style:B.tickLabel}),(0,d.jsx)(ea.B,{dataKey:"bounceRatePercent",stroke:_.chart.textColor,style:B.tickLabel}),(0,d.jsx)(ta.u,{content:function(e){return Za((0,a.Z)((0,a.Z)({},e),{},{customStyle:B.tooltipContent}))}})]})})]})]}),(0,d.jsxs)(C.ep,{expand:!0,noMargin:!0,justifyContent:"center",children:[(0,d.jsxs)(L.sg,{expand:!0,noMargin:!0,alignItems:"center",children:[(0,d.jsx)(F.Z,{size:"block-title",align:"center",children:(0,d.jsx)(b.Trans,{id:"{0} minutes per player",values:{0:Math.round(w.overview.meanPlayedDurationInMinutes)}})}),(0,d.jsx)(Xo.h,{width:ba,height:Ca,children:(0,d.jsxs)(na.w,{data:w.overTime,margin:va,children:[(0,d.jsx)(ra.x,{name:t._({id:"Mean played time"}),unit:" "+t._({id:"minutes"}),formatter:ja,type:"monotone",dataKey:"meanPlayedDurationInMinutes",stroke:_.chart.dataColor1,dot:B.chartLineDot,yAxisId:0}),(0,d.jsx)(Qo.q,{stroke:_.chart.gridColor,strokeDasharray:"3 3"}),(0,d.jsx)($o.K,{dataKey:"date",stroke:_.chart.textColor,style:B.tickLabel}),(0,d.jsx)(ea.B,{dataKey:"meanPlayedDurationInMinutes",stroke:_.chart.textColor,style:B.tickLabel}),(0,d.jsx)(ta.u,{content:function(e){return Za((0,a.Z)((0,a.Z)({},e),{},{customStyle:B.tooltipContent}))}})]})})]}),(0,d.jsxs)(L.sg,{expand:!0,noMargin:!0,alignItems:"center",children:[(0,d.jsx)(F.Z,{size:"block-title",align:"center",children:(0,d.jsx)(b.Trans,{id:"{0} players with more than {1} minutes",values:{0:w.overview.greaterDurationPlayerSurface.playersCount,1:w.overview.greaterDurationPlayerSurface.durationInMinutes}})}),(0,d.jsx)(Xo.h,{width:ba,height:Ca,children:(0,d.jsxs)(Ko.T,{data:w.overPlayedDuration,margin:va,children:[(0,d.jsx)(Jo.u,{name:t._({id:"Players"}),type:"monotone",dataKey:"playersCount",stroke:_.chart.dataColor1,fill:_.chart.dataColor1,fillOpacity:.25,yAxisId:0}),(0,d.jsx)($o.K,{name:t._({id:"Played time"}),dataKey:"duration",type:"number",domain:[0,ua[ua.length-1]],ticks:ua,stroke:_.chart.textColor,style:B.tickLabel}),(0,d.jsx)(ea.B,{dataKey:"playersCount",stroke:"#f5f5f5",style:B.tickLabel,domain:[0,"dataMax"]}),(0,d.jsx)(Qo.q,{stroke:_.chart.gridColor,strokeDasharray:"3 3"}),(0,d.jsx)(ta.u,{content:function(e){return Za((0,a.Z)((0,a.Z)({},e),{},{customStyle:B.tooltipContent}))}})]})})]})]}),(0,d.jsx)(C.ep,{expand:!0,noMargin:!0,justifyContent:"center",children:(0,d.jsxs)(L.sg,{expand:!0,noMargin:!0,alignItems:"center",children:[(0,d.jsx)(F.Z,{size:"block-title",align:"center",children:(0,d.jsx)(b.Trans,{id:"{0} % of players with more than {1} minutes",values:{0:Math.round(w.overview.nearestToMedianDuration.playersPercent),1:w.overview.nearestToMedianDuration.durationInMinutes}})}),(0,d.jsx)(Xo.h,{width:ba,height:Ca,children:(0,d.jsxs)(Ko.T,{data:w.overTime,margin:va,children:[(0,d.jsx)(Jo.u,{name:t._({id:"Players"}),type:"monotone",dataKey:"over60sPlayersPercent",formatter:ya,unit:" %",stroke:_.chart.dataColor1,fill:_.chart.dataColor1,fillOpacity:.15,yAxisId:0}),(0,d.jsx)(Jo.u,{name:t._({id:"Played > 3 minutes"}),type:"monotone",dataKey:"over180sPlayersPercent",formatter:ya,unit:" %",stroke:_.chart.dataColor1,fill:_.chart.dataColor1,fillOpacity:.15,yAxisId:0}),(0,d.jsx)(Jo.u,{name:t._({id:"Played > 5 minutes"}),type:"monotone",dataKey:"over300sPlayersPercent",formatter:ya,unit:" %",stroke:_.chart.dataColor1,fill:_.chart.dataColor1,fillOpacity:.15,yAxisId:0}),(0,d.jsx)(Jo.u,{name:t._({id:"Played > 10 minutes"}),type:"monotone",dataKey:"over600sPlayersPercent",formatter:ya,unit:" %",stroke:_.chart.dataColor1,fill:_.chart.dataColor1,fillOpacity:.15,yAxisId:0}),(0,d.jsx)(Jo.u,{name:t._({id:"Played > 15 minutes"}),type:"monotone",dataKey:"over900sPlayersPercent",formatter:ya,unit:" %",stroke:_.chart.dataColor1,fill:_.chart.dataColor1,fillOpacity:.15,yAxisId:0}),(0,d.jsx)(Qo.q,{stroke:_.chart.gridColor,strokeDasharray:"3 3"}),(0,d.jsx)($o.K,{dataKey:"date",stroke:_.chart.textColor,style:B.tickLabel}),(0,d.jsx)(ea.B,{dataKey:"over60sPlayersPercent",stroke:_.chart.textColor,style:B.tickLabel,unit:" %"}),(0,d.jsx)(ta.u,{content:function(e){return Za((0,a.Z)((0,a.Z)({},e),{},{customStyle:B.tooltipContent}))}})]})})]})})]})]})}})},wa=n(87284),Ta=n(1589),Sa=n(64480),Pa=function(e){var t=e.value,n=e.label;return(0,d.jsxs)(L.sg,{expand:!0,noMargin:!0,children:[(0,d.jsxs)(L.x1,{justifyContent:"space-between",children:[(0,d.jsx)(F.Z,{size:"body2",children:n}),(0,d.jsx)(F.Z,{size:"body2",children:(0,go.R)(t,1)})]}),(0,d.jsx)(L.x1,{noMargin:!0,expand:!0,children:(0,d.jsx)(Sa.Z,{variant:"determinate",value:10*t,style:{height:8,borderRadius:8}})})]})},Ea=n(68009),Ia=function(e,t){var n=l.useState(null),r=(0,s.Z)(n,2),a=r[0],c=r[1],u=(0,Ea.N)(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var r,o,a,s=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,r=s.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=s[a];return e.next=4,t.apply(void 0,[n].concat(o));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Error while updating optimistic state: ",e.t0);case 9:return e.prev=9,c(null),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(t){return e.apply(this,arguments)}}(),500);return[null!==a?a:e,function(e,t){c(e),u(e,t)}]},Ma=n(13055),La=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",children:[(0,d.jsx)("path",{d:"M2.66699 12C2.66699 6.47716 7.14415 2 12.667 2C18.1899 2 22.667 6.47716 22.667 12C22.667 17.5229 18.1899 22 12.667 22C7.14415 22 2.66699 17.5229 2.66699 12Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.4149 8.88269C15.8939 9.15755 16.0595 9.7687 15.7846 10.2477L13.491 14.245C12.6854 15.6487 10.6332 15.5644 9.94566 14.0993L9.51192 13.1748C9.27734 12.6748 9.49249 12.0793 9.99248 11.8447C10.4925 11.6102 11.088 11.8253 11.3225 12.3253L11.7562 13.2496L14.0499 9.25237C14.3247 8.77334 14.9359 8.60783 15.4149 8.88269Z",fill:"#32323B"})]}))})),Aa=n(82422),Fa=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.52146 12.8724C9.44058 13.0515 9.26229 13.1666 9.06578 13.1666C8.55844 13.1666 8.0703 12.9684 7.70915 12.6129C7.34774 12.2573 7.14321 11.7731 7.14321 11.2666L7.14321 9.89998L4.96177 9.89998C4.7541 9.90186 4.54823 9.85951 4.3582 9.77558C4.16722 9.69123 3.9965 9.56673 3.8582 9.41021C3.71988 9.25367 3.61734 9.06886 3.5582 8.86841C3.49906 8.66794 3.48488 8.45702 3.51675 8.25044L4.17112 4.05053C4.17114 4.05038 4.1711 4.05068 4.17112 4.05053C4.22419 3.70684 4.40146 3.39486 4.66792 3.17197C4.93351 2.94981 5.27019 2.83023 5.61614 2.83335L12.3851 2.83335C12.7667 2.83335 13.1342 2.98245 13.4064 3.25035C13.6789 3.51851 13.8335 3.88393 13.8335 4.26668L13.8335 7.53333C13.8335 7.91607 13.6789 8.2815 13.4064 8.54966C13.1342 8.81755 12.7667 8.96665 12.3851 8.96665L11.2854 8.96665L9.52146 12.8724ZM11.4625 7.96665L12.3851 7.96665C12.5066 7.96665 12.6215 7.91909 12.705 7.83692C12.7882 7.75501 12.8335 7.64565 12.8335 7.53333L12.8335 4.26668C12.8335 4.15436 12.7882 4.04499 12.705 3.96309C12.6215 3.88092 12.5066 3.83335 12.3851 3.83335L11.4625 3.83335L11.4625 7.96665ZM10.4625 3.83335L5.60811 3.83335C5.49771 3.83212 5.39172 3.87025 5.30954 3.93899C5.22755 4.00757 5.17506 4.10158 5.15945 4.20283L4.50506 8.40287C4.50507 8.40283 4.50505 8.40291 4.50506 8.40287C4.49569 8.46377 4.49983 8.52611 4.51734 8.58546C4.53487 8.64487 4.56548 8.70042 4.60758 8.74807C4.6497 8.79574 4.70237 8.8344 4.76224 8.86084C4.82213 8.88729 4.88749 8.90075 4.95371 8.90001L4.95929 8.89995L7.64321 8.89998C7.91935 8.89998 8.14321 9.12384 8.14321 9.39998L8.14321 11.2666C8.14321 11.5027 8.23843 11.7308 8.41058 11.9002C8.51081 11.9988 8.63236 12.0728 8.76515 12.1175L10.4625 8.35899L10.4625 3.83335Z",fill:"currentColor"})}))})),Oa=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.81252 3.12758C7.8934 2.94848 8.07169 2.83337 8.26821 2.83337C8.77555 2.83337 9.26369 3.03164 9.62483 3.38705C9.98625 3.74273 10.1908 4.22685 10.1908 4.73336V6.10002H12.3722C12.5799 6.09814 12.7858 6.14048 12.9758 6.22441C13.1668 6.30877 13.3375 6.43327 13.4758 6.58979C13.6141 6.74633 13.7166 6.93114 13.7758 7.13159C13.8349 7.33206 13.8491 7.54297 13.8172 7.74956L13.1629 11.9495C13.1628 11.9496 13.1629 11.9493 13.1629 11.9495C13.1098 12.2932 12.9325 12.6051 12.6661 12.828C12.4005 13.0502 12.0638 13.1698 11.7178 13.1666H4.94887C4.56729 13.1666 4.19977 13.0175 3.92755 12.7497C3.65506 12.4815 3.50049 12.1161 3.50049 11.7333V8.46667C3.50049 8.08393 3.65506 7.7185 3.92755 7.45034C4.19977 7.18245 4.56729 7.03335 4.94887 7.03335H6.04863L7.81252 3.12758ZM5.87144 8.03335H4.94887C4.82739 8.03335 4.71247 8.08091 4.62898 8.16308C4.54575 8.24499 4.50049 8.35435 4.50049 8.46667V11.7333C4.50049 11.8456 4.54575 11.955 4.62898 12.0369C4.71247 12.1191 4.82739 12.1666 4.94887 12.1666H5.87144V8.03335ZM6.87144 12.1666H11.7259C11.8363 12.1679 11.9423 12.1298 12.0244 12.061C12.1064 11.9924 12.1589 11.8984 12.1745 11.7972L12.8289 7.59713C12.8289 7.59717 12.8289 7.59709 12.8289 7.59713C12.8383 7.53623 12.8342 7.47389 12.8166 7.41454C12.7991 7.35513 12.7685 7.29958 12.7264 7.25193C12.6843 7.20426 12.6316 7.1656 12.5717 7.13916C12.5119 7.11271 12.4465 7.09925 12.3803 7.09999L12.3747 7.10005L9.69078 7.10002C9.41464 7.10002 9.19078 6.87616 9.19078 6.60002V4.73336C9.19078 4.49728 9.09556 4.26921 8.9234 4.09979C8.82317 4.00115 8.70162 3.92717 8.56884 3.8825L6.87144 7.64101V12.1666Z",fill:"currentColor"})}))})),Ra=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[(0,d.jsx)("path",{d:"M8.66718 4.49998C8.94332 4.49998 9.16718 4.72384 9.16718 4.99998V7.99998C9.16718 8.27613 8.94332 8.49998 8.66718 8.49998C8.39103 8.49998 8.16718 8.27613 8.16718 7.99998V4.99998C8.16718 4.72384 8.39103 4.49998 8.66718 4.49998Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M8.66715 11.3333C9.03534 11.3333 9.33382 11.0348 9.33382 10.6667C9.33382 10.2985 9.03534 9.99998 8.66715 9.99998C8.29896 9.99998 8.00049 10.2985 8.00049 10.6667C8.00049 11.0348 8.29896 11.3333 8.66715 11.3333Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.53068 1.41329L11.4067 2.31127L13.2785 3.21815C13.8233 3.48208 14.2192 3.97853 14.3553 4.56835L14.8229 6.59499L15.2809 8.62383C15.4142 9.21428 15.2729 9.83334 14.8966 10.3075L13.6037 11.9367L12.303 13.5597C11.9245 14.0321 11.3524 14.3076 10.7471 14.309L8.6672 14.314L6.58731 14.309C5.982 14.3076 5.4099 14.0321 5.03137 13.5597L3.73071 11.9367L2.43779 10.3075C2.06151 9.83334 1.92021 9.21429 2.0535 8.62383L2.5115 6.59499L2.97914 4.56835C3.11524 3.97853 3.51114 3.48208 4.05589 3.21815L5.92766 2.31127L7.80372 1.41329C8.34971 1.15195 8.98469 1.15195 9.53068 1.41329ZM9.09894 2.31529L10.9707 3.2112L10.975 3.21326L12.8425 4.11808C13.1149 4.25005 13.3128 4.49827 13.3809 4.79318L13.8474 6.81519L13.8485 6.81982L14.3054 8.84403C14.3721 9.13926 14.3014 9.44879 14.1133 9.68586L12.8233 11.3114L12.8204 11.3151L11.5227 12.9344C11.3334 13.1706 11.0474 13.3083 10.7447 13.309L8.66958 13.314H8.66482L6.58969 13.309C6.28703 13.3083 6.00098 13.1706 5.81172 12.9344L4.51403 11.3151L4.51106 11.3114L3.2211 9.68586C3.03296 9.44879 2.96231 9.13926 3.02896 8.84403L3.48643 6.81751L3.95354 4.79318C4.02159 4.49827 4.21954 4.25005 4.49191 4.11808L6.36154 3.21224L8.23546 2.31529C8.50845 2.18462 8.82594 2.18462 9.09894 2.31529Z",fill:"currentColor"})]}))})),Da=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.963 3.83337C10.2864 3.83337 9.63869 4.10382 9.16307 4.5834L9.02164 4.72592C8.92777 4.82052 8.80001 4.87373 8.66674 4.87374C8.53347 4.87375 8.40571 4.82055 8.31183 4.72595L8.17039 4.58344C7.17841 3.58373 5.56241 3.58369 4.57042 4.58341C3.58786 5.57362 3.58785 7.17246 4.57042 8.1627L8.46111 12.0836C8.56696 12.1903 8.75051 12.1953 8.86292 12.0926C9.75598 11.2564 10.6034 10.3815 11.4592 9.4979C11.8894 9.05377 12.3217 8.60744 12.763 8.16269C13.2354 7.68675 13.5002 7.04316 13.5002 6.37305C13.5002 5.70294 13.2355 5.05945 12.7631 4.58347C12.2874 4.10392 11.6396 3.83337 10.963 3.83337ZM8.66681 3.68075C9.3039 3.13641 10.1172 2.83337 10.963 2.83337C11.9066 2.83337 12.8097 3.21053 13.4729 3.87911C14.1315 4.5427 14.5002 5.43949 14.5002 6.37305C14.5002 7.30669 14.1314 8.20357 13.4728 8.86712C13.0499 9.29331 12.6267 9.73012 12.2008 10.1698C11.3339 11.0647 10.4555 11.9714 9.54472 12.8241L9.54205 12.8266C9.03528 13.2942 8.23752 13.278 7.75127 12.788L3.86058 8.86706C2.49114 7.48694 2.49113 5.25915 3.86058 3.87905C5.17468 2.55472 7.27431 2.48862 8.66681 3.68075Z",fill:"currentColor"})}))})),_a={textComment:{whiteSpace:"pre-wrap",overflowWrap:"anywhere"},backgroundText:{padding:0,textAlign:"left"}},Ba=function(e){return e?1===e.version?[{key:"rating-sound",label:(0,d.jsx)(b.Trans,{id:"Sound"}),value:e.sound},{key:"rating-visuals",label:(0,d.jsx)(b.Trans,{id:"Visuals"}),value:e.visuals},{key:"rating-fun",label:(0,d.jsx)(b.Trans,{id:"Fun"}),value:e.fun},{key:"rating-ease-of-use",label:(0,d.jsx)(b.Trans,{id:"Ease of use"}),value:e.easeOfUse}]:void 0:null},Na=function(e){var t=e.comment,n=e.buildProperties,r=e.authenticatedUser,a=e.onCommentUpdated,c=r.getAuthorizationHeader,u=r.profile,p=Ba(t.ratings),h=l.useContext(f.Z),g=l.useState(!1),x=(0,s.Z)(g,2),m=x[0],v=x[1],j=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,r){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,no.uA)(c,u.id,{gameId:t.gameId,commentId:t.id,processed:n});case 5:o=e.sent,a(o),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Unable to update comment: ",e.t0),(0,Ur.gR)({message:r._({id:"Unable to change read status of feedback."})+" "+r._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"feedback-card-set-processed-error"});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}(),y=Ia(!!t.processedAt,j),Z=(0,s.Z)(y,2),k=Z[0],w=Z[1],T=(0,no.hO)(t),S=Ia(t.qualityRatingPerRole&&t.qualityRatingPerRole.owner||null,function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,r){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,no.uA)(c,u.id,{gameId:t.gameId,commentId:t.id,qualityRating:n});case 5:o=e.sent,a(o),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Unable to update comment: ",e.t0),(0,Ur.gR)({message:r._({id:"Unable to change quality rating of feedback."})+" "+r._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"feedback-card-set-quality-rating-error"});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}()),P=(0,s.Z)(S,2),E=P[0],I=P[1];return(0,d.jsx)(b.I18n,{children:function(e){var r=e.i18n;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(wa.Z,{disabled:k,cardCornerAction:(0,d.jsxs)(C.pJ,{noMargin:!0,children:[T&&(0,d.jsxs)(C.pJ,{noMargin:!0,children:[(0,d.jsx)(M.Z,{size:"small",tooltip:{id:"Rank this comment as great"},onClick:function(){return I("great",r)},children:(0,d.jsx)(Da,{htmlColor:"great"===E?h.message.valid:void 0})}),(0,d.jsx)(M.Z,{size:"small",tooltip:{id:"Rank this comment as good"},onClick:function(){return I("good",r)},children:(0,d.jsx)(Oa,{htmlColor:"good"===E?h.message.valid:void 0})}),(0,d.jsx)(M.Z,{size:"small",tooltip:{id:"Rank this comment as bad"},onClick:function(){return I("bad",r)},children:(0,d.jsx)(Fa,{htmlColor:"bad"===E?h.message.warning:void 0})}),(0,d.jsx)(M.Z,{size:"small",tooltip:{id:"Report this comment as abusive, harmful or spam"},onClick:function(){return I("harmful",r)},children:(0,d.jsx)(Ra,{htmlColor:"harmful"===E?h.message.error:void 0})})]}),(0,d.jsx)(M.Z,{size:"small",tooltip:k?{id:"Mark as unread"}:{id:"Mark as read"},onClick:function(){return w(!k,r)},children:k?(0,d.jsx)(La,{htmlColor:h.message.valid}):(0,d.jsx)(Aa.Z,{})})]}),header:(0,d.jsx)(Ta.Z,{style:_a.backgroundText,children:(0,d.jsx)(b.Trans,{id:"{0}",values:{0:r.date(t.createdAt)}})}),children:(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(L.x1,{noMargin:!0,justifyContent:"space-between",alignItems:"start",children:(0,d.jsxs)(L.sg,{noMargin:!0,children:[n&&(0,d.jsxs)(F.Z,{color:"primary",children:[n.name||(0,no.GA)(n.id),n.isDeleted&&(0,d.jsxs)(d.Fragment,{children:[" ",(0,d.jsx)(b.Trans,{id:"(deleted)"})]})]}),t.playerId?(0,d.jsx)(Ie.Z,{onClick:function(){return v(!0)},href:"#",children:(0,d.jsx)(F.Z,{noMargin:!0,color:"inherit",children:t.playerName||"Anonymous player"})}):(0,d.jsx)(Ta.Z,{style:_a.backgroundText,children:t.playerName||"Anonymous player"}),t.contact&&(0,d.jsxs)(C.pJ,{alignItems:"center",noMargin:!0,children:[(0,d.jsx)(Ta.Z,{style:_a.backgroundText,children:(0,d.jsx)(b.Trans,{id:"Contact:"})}),(0,d.jsx)(F.Z,{allowSelection:!0,children:t.contact})]})]})}),(0,d.jsx)(L.LZ,{}),p&&(0,d.jsx)(C.ep,{noColumnMargin:!0,expand:!0,children:p.map((function(e){return(0,d.jsxs)(L.x1,{expand:!0,noMargin:!0,children:[(0,d.jsx)(Pa,{label:e.label,value:e.value}),(0,d.jsx)(L.LZ,{})]},e.key)}))}),(0,d.jsx)(L.hS,{}),(0,d.jsx)(F.Z,{style:_a.textComment,allowSelection:!0,children:t.text})]})}),t.playerId&&m&&(0,d.jsx)(Ma.Z,{userId:t.playerId,onClose:function(){return v(!1)}})]})}})},Ua=n(10959),Ha=function(e){var t=e.feedbacks;if(0===t.length)return null;var n=t.map((function(e){return e.ratings})).filter(Boolean),r=n.reduce((function(e,t){return t?{sound:e.sound+t.sound,visuals:e.visuals+t.visuals,fun:e.fun+t.fun,easeOfUse:e.easeOfUse+t.easeOfUse,version:1}:e}),{sound:0,visuals:0,fun:0,easeOfUse:0,version:1}),i={sound:r.sound/n.length,visuals:r.visuals/n.length,fun:r.fun/n.length,easeOfUse:r.easeOfUse/n.length,version:1},o=Ba(i);return(0,d.jsx)(b.I18n,{children:function(e){e.i18n;return(0,d.jsx)(wa.Z,{background:"dark",children:(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(L.x1,{noMargin:!0,justifyContent:"space-between",alignItems:"start",children:(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(F.Z,{color:"primary",size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Average user feedback"})})})}),(0,d.jsx)(L.LZ,{}),o&&(0,d.jsx)(C.ep,{noColumnMargin:!0,expand:!0,children:o.map((function(e){return(0,d.jsxs)(L.x1,{expand:!0,noMargin:!0,children:[(0,d.jsx)(Pa,{label:e.label,value:e.value}),(0,d.jsx)(L.LZ,{})]},e.key)}))})]})})}})},Va=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 3C0 2.58579 0.335786 2.25 0.75 2.25H3.25C3.66421 2.25 4 2.58579 4 3C4 3.41421 3.66421 3.75 3.25 3.75H0.75C0.335786 3.75 0 3.41421 0 3Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 3C8 2.58579 8.33579 2.25 8.75 2.25H15.25C15.6642 2.25 16 2.58579 16 3C16 3.41421 15.6642 3.75 15.25 3.75H8.75C8.33579 3.75 8 3.41421 8 3Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 1.5C5.17157 1.5 4.5 2.17157 4.5 3C4.5 3.82843 5.17157 4.5 6 4.5C6.82843 4.5 7.5 3.82843 7.5 3C7.5 2.17157 6.82843 1.5 6 1.5ZM3 3C3 1.34315 4.34315 0 6 0C7.65685 0 9 1.34315 9 3C9 4.65685 7.65685 6 6 6C4.34315 6 3 4.65685 3 3Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 11C0 10.5858 0.335786 10.25 0.75 10.25H8.25C8.66421 10.25 9 10.5858 9 11C9 11.4142 8.66421 11.75 8.25 11.75H0.75C0.335786 11.75 0 11.4142 0 11Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 11C13 10.5858 13.3358 10.25 13.75 10.25H15.25C15.6642 10.25 16 10.5858 16 11C16 11.4142 15.6642 11.75 15.25 11.75H13.75C13.3358 11.75 13 11.4142 13 11Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 9.5C10.1716 9.5 9.5 10.1716 9.5 11C9.5 11.8284 10.1716 12.5 11 12.5C11.8284 12.5 12.5 11.8284 12.5 11C12.5 10.1716 11.8284 9.5 11 9.5ZM8 11C8 9.34315 9.34315 8 11 8C12.6569 8 14 9.34315 14 11C14 12.6569 12.6569 14 11 14C9.34315 14 8 12.6569 8 11Z",fill:"currentColor"})]}))})),za=n(32628),Wa={selectFieldContainer:{minWidth:200,maxWidth:350,width:"100%"}},Ga=function(e,t,n){return n[e]?n[e].push(t):n[e]=[t],n},Ya=function(e,t,n){var r=n.build;n.date;return t.reduce((function(t,n){if(r)return n.buildId?Ga(n.buildId,n,t):Ga("game-only",n,t);var i=e.date(n.createdAt,{month:"long",year:"numeric"});return Ga(i,n,t)}),{})},qa=function(e){var t=e.i18n,n=e.authenticatedUser,r=e.game,a=l.useRef(null),c=n.getAuthorizationHeader,u=n.profile,p=l.useState(!1),f=(0,s.Z)(p,2),h=f[0],g=f[1],x=l.useState(!0),m=(0,s.Z)(x,2),j=m[0],y=m[1],Z=l.useState(null),k=(0,s.Z)(Z,2),w=k[0],T=k[1],S=l.useState(null),P=(0,s.Z)(S,2),E=P[0],I=P[1],A=l.useState(""),O=(0,s.Z)(A,2),R=O[0],D=O[1],_=l.useState(!1),B=(0,s.Z)(_,2),N=B[0],U=B[1],H=l.useState(!1),V=(0,s.Z)(H,2),z=V[0],W=V[1],G=function(e,t,n,r,i){if(!t)return null;var o=t;"game-only"===i?o=t.filter((function(e){return!e.buildId})):i&&(o=t.filter((function(e){return e.buildId===i})));var a=n?o.filter((function(e){return!e.processedAt})):o;return Ya(e,a,r?{build:!1,date:!0}:{build:!0,date:!1})}(t,w,h,j,R),Y=G?Object.values(G).filter(Boolean).flat():[],q=function(e){var t=(0,no.GA)(e);if(!E)return t;var n=E[e].name;return n?"".concat(n.substring(0,15)).concat(n.length>=15?"...":""," (").concat(t,")"):t},X=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var t,o,a,l,c,u,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U(!1),t=n.getAuthorizationHeader,o=n.profile){e.next=5;break}return U(!0),e.abrupt("return");case 5:return e.prev=5,e.next=8,Promise.all([(0,no.BM)(t,o.id,{gameId:r.id,type:"FEEDBACK"}),(0,Ua.BY)(t,o.id,r.id)]);case 8:a=e.sent,l=(0,s.Z)(a,2),c=l[0],u=l[1],T(c),d=u.reduce((function(e,t){return e[t.id]=t,e}),{}),I(d),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),U(!0);case 20:case"end":return e.stop()}}),e,null,[[5,17]])}))),[n,r]),Q=function(e){w&&T((function(t){if(!t)return t;var n=(0,v.Z)(t),r=n.findIndex((function(t){return t.id===e.id}));return-1!==r?(n[r]=e,n):void 0}))},ee=function(e){if(e.buildId){if(!E)return{id:e.buildId};var t=E[e.buildId];return t?{id:t.id,name:t.name,isDeleted:!1}:{id:e.buildId,isDeleted:!0}}};l.useEffect((function(){X()}),[X]);var te=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&!z){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,W(!0),e.next=6,Promise.all(Y.filter((function(e){return!e.processedAt})).map((function(e){return(0,no.uA)(c,u.id,{gameId:e.gameId,commentId:e.id,processed:!0})})));case 6:X(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Unable to update one of the comments: ",e.t0),(0,Ur.gR)({message:t._({id:"Unable to mark one of the feedback as read."})+" "+t._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"all-feedback-card-set-processed-error"});case 13:return e.prev=13,W(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})));return function(t){return e.apply(this,arguments)}}();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,children:(0,d.jsxs)(L.x1,{children:[!n.authenticated&&(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"You need to login first to see your game feedbacks."})}),n.authenticated&&!G&&!N&&(0,d.jsx)(Xe.Z,{}),n.authenticated&&N&&(0,d.jsx)(fr.Z,{onRetry:X,children:(0,d.jsx)(b.Trans,{id:"An error occurred while retrieving feedbacks for this game."})}),n.authenticated&&G&&(0,d.jsxs)(L.sg,{expand:!0,noMargin:!0,children:[(0,d.jsxs)(C.ep,{justifyContent:"space-between",children:[(0,d.jsx)(L.sg,{justifyContent:"center",children:(0,d.jsx)(C.pJ,{noMargin:!0,alignItems:"center",children:(0,d.jsx)(Ta.Z,{children:(0,d.jsx)(b.Trans,{id:"This is all the feedback received on {0} coming from gd.games.",values:{0:r.gameName}})})})}),E&&(0,d.jsx)(L.sg,{children:(0,d.jsx)(L.x1,{children:(0,d.jsx)("div",{style:Wa.selectFieldContainer,children:(0,d.jsxs)(K.Z,{fullWidth:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Show"}),value:R,onChange:function(e,t,n){D(n)},children:[(0,d.jsx)($.Z,{value:"",label:{id:"All builds"}},"all"),(0,d.jsx)($.Z,{value:"game-only",label:{id:"On game page only"}},"game-only"),Object.keys(E).map((function(e){return(0,d.jsx)($.Z,{value:e,label:q(e)},e)}))]})})})})]}),(0,d.jsx)(C.ak,{expand:!0,noMargin:!0,children:!!w&&w.length>0&&(0,d.jsx)(Ha,{feedbacks:w})}),0===Y.length&&(0,d.jsx)(d.Fragment,{children:h?(0,d.jsxs)(C.pJ,{alignItems:"center",justifyContent:"center",children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"You don't have any unread feedback for this game."})}),(0,d.jsx)(J.Z,{onClick:function(){return g(!1)},label:(0,d.jsx)(b.Trans,{id:"Show all feedbacks"})})]}):(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"You don't have any feedback for this game."})})}),0!==Y.length&&(0,d.jsx)(C.ak,{expand:!0,noMargin:!0,children:Object.keys(G).map((function(e,t){var r=j?e:function(e){if("game-only"===e)return"";var t=(0,no.GA)(e);if(!E)return t;var n=E[e];return n?n.name?"".concat(n.name," (").concat(t,")"):t:(0,d.jsxs)(d.Fragment,{children:["".concat(t," "),(0,d.jsx)(b.Trans,{id:"(deleted)"})]})}(e);return(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsxs)(L.x1,{justifyContent:"space-between",alignItems:"center",children:[(0,d.jsx)(L.sg,{children:(0,d.jsxs)(F.Z,{size:"block-title",children:[r,r?" - ":" ",(0,d.jsx)(b.Trans,{id:"{0} feedback cards",values:{0:G[e].length}})]})}),0===t&&(0,d.jsx)(L.sg,{justifyContent:"center",children:(0,d.jsx)(M.Z,{disabled:z,onClick:function(e){return function(e){a.current&&a.current.open(e.clientX,e.clientY)}(e)},children:z?(0,d.jsx)(eo.Z,{size:20}):(0,d.jsx)(Va,{fontSize:"small"})})})]}),G[e].map((function(e,t){return(0,d.jsx)(Na,{comment:e,buildProperties:ee(e),authenticatedUser:n,onCommentUpdated:Q},e.id)}))]},e)}))})]})]})}),(0,d.jsx)(za.Z,{ref:a,buildMenuTemplate:function(e){return[{label:e._({id:"Sort by most recent"}),click:function(){return y(!j)},checked:j,type:"checkbox"},{label:e._({id:"Show unread feedback only"}),click:function(){return g(!h)},checked:h,type:"checkbox"},{type:"separator"},{label:e._({id:"Mark all as solved"}),click:function(){return te(e)}}]}})]})},Xa=n(73693),Ka=function(e){var t=e.game,n=e.onGameUpdated,r=l.useContext(tr.ZP),c=r.getAuthorizationHeader,u=r.profile,p=l.useState(null),f=(0,s.Z)(p,2),h=f[0],g=f[1];return u?(0,d.jsx)(b.I18n,{children:function(e){var r=e.i18n;return(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(F.Z,{size:"sub-title",children:"Ads"}),(0,d.jsx)(De.Z,{kind:"info",children:(0,d.jsx)(b.Trans,{id:'In the future, games that generate enough revenue will be able to opt-in into "revenue share", so that as a creator you can start earning from your game sessions.'})}),(0,d.jsx)(Xa.Z,{checked:null!==h?h:!!t.displayAdsOnGamePage,onCheck:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(o,s){var l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(s),l=(0,a.Z)((0,a.Z)({},t),{},{displayAdsOnGamePage:s}),e.prev=2,e.next=5,(0,Ii.Bi)(c,u.id,t.id,{displayAdsOnGamePage:s});case 5:n(l),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),(0,Ur.gR)({message:r._({id:"Unable to update game."})+" "+r._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"game-monetization-update-game-error"});case 11:return e.prev=11,g(null),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,8,11,14]])})));return function(t,n){return e.apply(this,arguments)}}(),label:(0,d.jsx)(b.Trans,{id:"Allow to display advertisements on the game page on gd.games."}),tooltipOrHelperText:(0,d.jsx)(b.Trans,{id:"This is recommended as this allows to maintain free publishing on gd.games and allow to analyze if you could benefit from revenue sharing."})})]})}}):null},Ja=n(30609),Qa=n(36401),$a=n(44151),es=[{value:"details",label:(0,d.jsx)(b.Trans,{id:"Details"})},{value:"builds",label:(0,d.jsx)(b.Trans,{id:"Builds"})},{value:"feedback",label:(0,d.jsx)(b.Trans,{id:"Feedback"})},{value:"analytics",label:(0,d.jsx)(b.Trans,{id:"Analytics"})},{value:"leaderboards",label:(0,d.jsx)(b.Trans,{id:"Leaderboards"})},{value:"marketing",label:(0,d.jsx)(b.Trans,{id:"Marketing & Ads"})}],ts=function(e){var t=e.game,n=e.project,r=e.onGameUpdated,a=e.onGameDeleted,c=e.onLoading,u=e.currentTab,p=e.setCurrentTab,f=e.analyticsSource,h=l.useContext(Ja.Z),g=h.routeArguments,x=h.removeRouteArguments,m=l.useContext(tr.ZP),v=m.getAuthorizationHeader,j=m.profile,y=l.useState(null),Z=(0,s.Z)(y,2),k=Z[0],w=Z[1],S=l.useState(!1),P=(0,s.Z)(S,2),E=P[0],I=P[1],M=(0,lt.Z)(),A=M.showConfirmation,O=M.showAlert,R=l.useContext(tr.ZP),D=l.useState(null),_=(0,s.Z)(D,2),B=_[0],N=_[1],U=l.useState(null),H=(0,s.Z)(U,2),V=H[0],z=H[1],W=l.useState(!1),G=(0,s.Z)(W,2),Y=G[0],q=G[1];l.useEffect((function(){if(g["games-dashboard-tab"]){var e=es.find((function(e){return e.value===g["games-dashboard-tab"]}));e&&p(e.value),x(["games-dashboard-tab"])}}),[g,x,p]);var X=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(null),e.prev=1,e.next=4,(0,Ii.Pv)(t.id);case 4:n=e.sent,N(n),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Unable to load the game:",e.t0),z(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),[t]);l.useEffect((function(){X()}),[X]),l.useEffect((function(){(0,Ar.rk)({from:f})}),[f]);var Q=l.useCallback((function(){N(null),r()}),[r]),ee=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r){var o,a,s,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&j){e.next=2;break}return e.abrupt("return",!1);case 2:if(o=j.id,(a=t.ownerIds)&&a.length){e.next=8;break}return e.next=7,O({title:{id:"Select an owner"},message:{id:"You must select at least one user to be the owner of the game."}});case 7:return e.abrupt("return",!1);case 8:return e.prev=8,I(!0),s=n.getProjectUuid(),e.next=13,(0,Ii.Bi)(v,o,s,{authorName:n.getAuthor()||"Unspecified publisher",gameName:n.getName()||"Untitled game",categories:n.getCategories().toJSArray()||[],description:n.getDescription()||"",playWithKeyboard:n.isPlayableWithKeyboard(),playWithGamepad:n.isPlayableWithGamepad(),playWithMobile:n.isPlayableWithMobile(),orientation:n.getOrientation(),discoverable:t.discoverable});case 13:if(!t.userSlug||!t.gameSlug||t.userSlug!==j.username){e.next=25;break}return e.prev=14,e.next=17,(0,Ii.b)(v,o,s,t.userSlug,t.gameSlug);case 17:e.next=25;break;case 19:return e.prev=19,e.t0=e.catch(14),console.error("Unable to update the game slug:",e.t0.response||e.t0.message),(0,Ur.gR)({message:r._({id:"Unable to update the game slug. A slug must be 6 to 30 characters long and only contains letters, digits or dashes."})+" "+r._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"game-slug-update-error"}),I(!1),e.abrupt("return",!1);case 25:return e.prev=25,l=(0,Ii.WO)(n.getAuthorIds().toJSArray()),c=(0,Ii.WO)(a),e.next=30,(0,Ii.wC)(v,o,s,{ownership:c,author:l});case 30:e.next=38;break;case 32:return e.prev=32,e.t1=e.catch(25),console.error("Unable to update the game owners or authors:",e.t1.response||e.t1.message),(0,Ur.gR)({message:r._({id:"Unable to update the game owners or authors. Have you removed yourself from the owners?"})+" "+r._({id:"Verify your internet connection or try again later."}),rawError:e.t1,errorId:"game-acls-update-error"}),I(!1),e.abrupt("return",!1);case 38:Q(),e.next=47;break;case 41:return e.prev=41,e.t2=e.catch(8),console.error("Unable to update the game:",e.t2.response||e.t2.message),(0,Ur.gR)({message:r._({id:"Unable to update the game details."})+" "+r._({id:"Verify your internet connection or try again later."}),rawError:e.t2,errorId:"game-details-update-error"}),I(!1),e.abrupt("return",!1);case 47:return I(!1),e.abrupt("return",!0);case 49:case"end":return e.stop()}}),e,null,[[8,41],[14,19],[25,32]])})));return function(t,n){return e.apply(this,arguments)}}(),te=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=2;break}return e.abrupt("return");case 2:return r=j.id,w(null),c(!0),e.prev=5,I(!0),e.next=9,(0,Ii.TT)(v,r,t.id);case 9:a(),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("Unable to delete the game:",e.t0),(o=(0,_o.T)(e.t0))&&"game-deletion/leaderboards-exist"===o.code&&w(n._({id:"You cannot unregister a game that has active leaderboards. To delete them, go in the Leaderboards tab, and delete them one by one."}));case 17:return e.prev=17,I(!1),c(!1),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[5,12,17,21]])})));return function(t){return e.apply(this,arguments)}}(),[c,t.id,j,a,v]),ne=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=2;break}return e.abrupt("return");case 2:return n=j.id,e.prev=3,I(!0),e.next=7,(0,Ii.Bi)(v,n,t.id,{publicWebBuildId:null});case 7:Q(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("Unable to update the game",e.t0);case 13:return e.prev=13,I(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])}))),[t,v,j,Q]),re=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A({title:{id:"Unregister game"},message:{id:"Are you sure you want to unregister this game?{0}It will disappear from your games dashboard and you won't get access to analytics, unless you register it again.",values:{0:"\n\n"}}});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:te(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[te,A]),ie=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A({title:{id:"Unpublish game"},message:{id:"Are you sure you want to unpublish this game?{0}This will make your gd.games unique game URL not accessible anymore.{1}You can decide at any time to publish it again.",values:{0:"\n\n",1:"\n\n"}}});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:ne();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[ne,A]),oe=B&&B.authors.map((function(e){return e.username})).filter(Boolean),ae=B&&B.owners.map((function(e){return e.username})).filter(Boolean),se=!!n&&n.getProjectUuid()===t.id;return(0,d.jsx)(b.I18n,{children:function(e){var a=e.i18n;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(L.x1,{expand:!0,noMargin:!0,useFullHeight:!0,children:["leaderboards"===u?(0,d.jsx)(Wo,{gameId:t.id,onLoading:c}):null,"details"===u?V?(0,d.jsxs)(fr.Z,{onRetry:X,children:[(0,d.jsx)(b.Trans,{id:"There was an issue getting the game details."})," ",(0,d.jsx)(b.Trans,{id:"Verify your internet connection or try again later."})]}):B?(0,d.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[!se&&(0,d.jsx)(De.Z,{kind:"info",children:(0,d.jsx)(b.Trans,{id:"In order to update these details you have to open the game's project."})}),(0,d.jsxs)(L.x1,{alignItems:"center",noMargin:!0,children:[(0,d.jsx)(L.x1,{expand:!0,justifyContent:"flex-start",alignItems:"center",noMargin:!0,children:oe&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Authors:"})}),(0,d.jsx)(L.x1,{noMargin:!0,children:oe.map((function(e,t){return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(L.LZ,{}),(0,d.jsx)(Li.Z,{size:"small",icon:ae&&ae.includes(e)?(0,d.jsx)(_i,{}):void 0,className:"notranslate",label:e,color:0===t?"primary":"default"})]},e)}))})]})}),(0,d.jsx)(L.x1,{expand:!0,justifyContent:"flex-end",noMargin:!0,children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Created on {0}",values:{0:a.date(1e3*t.createdAt)}})})})]}),(B.playWithKeyboard||B.playWithGamepad||B.playWithMobile||B.categories)&&(0,d.jsxs)(L.x1,{alignItems:"center",noMargin:!0,children:[(0,d.jsx)(L.x1,{expand:!0,justifyContent:"flex-start",alignItems:"center",noMargin:!0,children:B.categories&&!!B.categories.length&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Genres:"})}),(0,d.jsx)(L.x1,{noMargin:!0,children:B.categories.map((function(e,t){return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(L.LZ,{}),(0,d.jsx)(Li.Z,{size:"small",label:(0,Ii.Oo)(e,a),color:0===t?"primary":"default"})]},e)}))})]})}),(0,d.jsxs)(L.x1,{expand:!0,justifyContent:"flex-end",noMargin:!0,children:[B.playWithKeyboard&&(0,d.jsx)(Oi.Z,{}),B.playWithGamepad&&(0,d.jsx)(Ri.Z,{}),B.playWithMobile&&(0,d.jsx)(Di.Z,{})]})]}),(0,d.jsx)($r.ZP,{value:B.gameName,readOnly:!0,fullWidth:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Game name"}),floatingLabelFixed:!0}),(0,d.jsx)($r.ZP,{value:B.description||"",readOnly:!0,fullWidth:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Game description"}),floatingLabelFixed:!0,translatableHintText:{id:"No description set."},multiline:!0,rows:5}),(0,d.jsxs)(K.Z,{disabled:!0,fullWidth:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Device orientation (for mobile)"}),value:B.orientation,children:[(0,d.jsx)($.Z,{value:"default",label:{id:"Platform default"}}),(0,d.jsx)($.Z,{value:"landscape",label:{id:"Landscape"}}),(0,d.jsx)($.Z,{value:"portrait",label:{id:"Portrait"}})]}),(0,d.jsxs)(C.ep,{noMargin:!0,justifyContent:"flex-end",children:[(0,d.jsx)(J.Z,{onClick:function(){return re(a)},label:(0,d.jsx)(b.Trans,{id:"Unregister this game"}),disabled:E}),B.publicWebBuildId&&(0,d.jsx)(T.Z,{onClick:function(){return ie(a)},label:(0,d.jsx)(b.Trans,{id:"Unpublish from gd.games"}),disabled:E}),(0,d.jsx)(T.Z,{primary:!0,onClick:function(){return q(!0)},label:(0,d.jsx)(b.Trans,{id:"Edit game details"}),disabled:!se||E})]}),k?(0,d.jsx)(fr.Z,{children:k}):null]}):(0,d.jsx)(Xe.Z,{}):null,"builds"===u?(0,d.jsx)(Ai.Z,{game:t,authenticatedUser:R,onGameUpdated:r}):null,"analytics"===u?(0,d.jsx)(ka,{game:t}):null,"feedback"===u?(0,d.jsx)(qa,{i18n:a,authenticatedUser:R,game:t}):null,"marketing"===u?(0,d.jsxs)(C.ak,{noMargin:!0,expand:!0,children:[(0,d.jsx)(Qa.Z,{displayPurchaseAction:!0}),(0,d.jsx)(F.Z,{size:"sub-title",children:(0,d.jsx)(b.Trans,{id:"Marketing Campaigns"})}),(0,d.jsx)($a.Z,{game:t}),(0,d.jsx)(Ka,{game:t,onGameUpdated:Q})]}):null]}),B&&n&&Y&&(0,d.jsx)(Fi.X,{project:n,publicGame:B,onApply:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(t,a);case 2:e.sent&&q(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onClose:function(){return q(!1)},isLoading:E,i18n:a})]})}})},ns=function(e){var t=e.game,n=e.project,r=e.onClose,i=e.onGameUpdated,o=e.onGameDeleted,a=e.analyticsSource,c=e.onShareProject,u=l.useState(!1),p=(0,s.Z)(u,2),f=p[0],h=p[1],g=l.useState("details"),x=(0,s.Z)(g,2),m=x[0],v=x[1],C=l.useContext(tr.ZP),j=C.profile,y=C.onOpenLoginDialog,k=l.useCallback((function(){j?c&&c():y()}),[j,c,y]),w=t?t.gameName:n?n.getName():"";return(0,d.jsx)(b.I18n,{children:function(e){e.i18n;return(0,d.jsx)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"{gameName} Dashboard",values:{gameName:w}}),open:!0,flexColumnBody:!0,fullHeight:!0,maxWidth:"lg",actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Close"}),disabled:f,onClick:r},"close")],secondaryActions:[(0,d.jsx)(Hn.Z,{helpPagePath:"leaderboards"===m?"/interface/games-dashboard/leaderboard-administration":"/interface/games-dashboard"},"help")],onRequestClose:r,cannotBeDismissed:f,fixedContent:(0,d.jsx)(le.m,{value:m,onChange:v,options:es}),children:t?(0,d.jsx)(ts,{game:t,project:n,onGameUpdated:i,onGameDeleted:o,onLoading:h,currentTab:m,setCurrentTab:v,analyticsSource:a}):(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,d.jsx)(wt.$,{title:(0,d.jsx)(b.Trans,{id:"Share your project online"}),description:(0,d.jsx)(b.Trans,{id:"Share your project online to unlock player engagement analytics, player feedback and other functionalities."}),helpPagePath:"/publishing",actionButtonId:"game-detail-share-button",actionIcon:(0,d.jsx)(Z,{}),actionLabel:(0,d.jsx)(b.Trans,{id:"Share"}),onAction:k})})})}})},rs={container:{display:"flex",flexDirection:"column"},maxWidth:{maxWidth:"100%"}},is=function(e){return(0,d.jsx)(de.Z,{square:!0,style:(0,a.Z)((0,a.Z)({},rs.container),{},{height:e.noFullHeight?void 0:"100%",width:e.width?e.width:void 0,flex:e.noExpand?void 0:1},e.maxWidth?rs.maxWidth:void 0),background:"dark",children:e.children})},os=n(2860),as=n(82723),ss="TreeView_fullHeightFlexContainer__wmGJz",ls="TreeView_withDivider__vptv5",cs="TreeView_fullSpaceContainer__44HJa",us="TreeView_rowContent__C4pnW",ds="TreeView_rowContentSide__hensj",ps="TreeView_rowContentExtraPadding__EYV7L",fs="TreeView_rowContentSideLeft__Sdur6",hs="TreeView_rowContentSideRight__KMTg6",gs="TreeView_rowContainer__PvQsE",xs="TreeView_itemName__APIe3",ms="TreeView_animate__8Rdah",vs="TreeView_treeView__MbkSD",bs="TreeView_withCanDropInsideIndicator__xdMtZ",Cs="TreeView_withCannotDropInsideIndicator__WP3pW",js="TreeView_selected__PAb8M",ys="TreeView_itemNameInput__p8-mU",Zs="TreeView_placeholder__h7RIh",ks="TreeView_rootFolder__bbb9e",ws="TreeView_folderIcon__9Yhsk",Ts="TreeView_thumbnail__NRB4n",Ss="TreeView_itemNameInputContainer__GLbWu",Ps=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"2 2 12 12",fill:"none",children:(0,d.jsx)("path",{d:"M5.39101 6.6665C5.12374 6.6665 4.98989 6.98965 5.17888 7.17864L7.78795 9.78771C7.90511 9.90486 8.09506 9.90486 8.21221 9.7877L10.8213 7.17864C11.0103 6.98965 10.8764 6.6665 10.6091 6.6665H5.39101Z",fill:"currentColor"})}))})),Es=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"16",viewBox:"3 3 11 10",fill:"none",children:(0,d.jsx)("path",{d:"M6.66699 10.6089C6.66699 10.8761 6.99013 11.01 7.17912 10.821L9.78819 8.21193C9.90535 8.09477 9.90535 7.90482 9.78819 7.78767L7.17912 5.1786C6.99013 4.98961 6.66699 5.12346 6.66699 5.39073L6.66699 10.6089Z",fill:"currentColor"})}))})),Is=l.memo(l.forwardRef((function(e,t){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,width:"24",height:"24",viewBox:"0 0 24 24",children:(0,d.jsxs)("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",fill:"none",children:[(0,d.jsx)("path",{d:"m19.25 17.25v-7.5c0-1.1046-0.8954-2-2-2h-12.5v9.5c0 1.1046 0.89543 2 2 2h10.5c1.1046 0 2-0.8954 2-2z"}),(0,d.jsx)("path",{d:"m13.5 7.5-0.9315-1.7077c-0.3504-0.64253-1.0239-1.0423-1.7558-1.0423h-4.0627c-1.1046 0-2 0.89543-2 2v4.25"})]})}))}))),Ms=n(74044),Ls=n(61804),As=n(39631),Fs=n(16792),Os=function(e){return e.stopPropagation()},Rs=function(e){(Us.includes(e.key)||(0,kn.W$)(e))&&e.stopPropagation()},Ds=function(e){var t=e.initialValue,n=e.onEndRenaming,r=e.onBlur,i=l.useState(t),o=(0,s.Z)(i,2),a=o[0],c=o[1],u=l.useRef(null);return l.useEffect((function(){u.current&&u.current.select()}),[]),l.useEffect((function(){return r}),[r]),(0,d.jsx)("div",{className:Ss,children:(0,d.jsx)("input",{autoFocus:!0,ref:u,type:"text",className:ys,value:a,spellCheck:!1,onChange:function(e){c(e.currentTarget.value)},onClick:Os,onDoubleClick:Os,onBlur:function(){n(a)},onKeyDown:Rs,onKeyUp:function(e){(0,kn.W$)(e)?(e.preventDefault(),n(t)):(0,kn.ph)(e)&&n(a)}})})},_s=(0,as.Z)((function(e,t){return t()})),Bs=function(e){var t=e.data,n=e.index,i=e.style,o=t.flattenedData,c=t.onOpen,u=t.onClick,p=t.onSelect,f=t.onBlurField,h=t.onEndRenaming,g=t.renamedItemId,x=t.onContextMenu,m=t.canDrop,v=t.onDrop,b=t.onEditItem,C=t.isMobile,j=t.DragSourceAndDropTarget,y=t.getItemHtmlId,Z=t.forceDefaultDraggingPreview,k=t.shouldSelectUponContextMenuOpening,w=o[n],T=16*w.depth,S=(0,Pt.Z)(),P=l.useRef(!1),E=l.useRef(null),I=l.useState("before"),L=(0,s.Z)(I,2),A=L[0],F=L[1],O=l.useRef(null),R=l.useCallback((function(e){var t=e.clientX,r=e.clientY;x({index:n,item:w.item,x:t,y:r})}),[x,n,w.item]),D=(0,As.i)(R,{delay:1e3}),_=l.useCallback((function(e){w&&!w.item.isPlaceholder&&(w.item.isRoot?c(w):(p({node:w,exclusive:!(e.metaKey||e.ctrlKey)}),u(w)))}),[u,p,w,c]),B=l.useCallback((function(e){_(e),R(e)}),[_,R]),N=l.useCallback((function(e,t){!t&&e||e!==P.current&&(P.current=e,S())}),[S]);l.useEffect((function(){if(P.current&&!E.current&&w.canHaveChildren&&w.collapsed)return E.current=setTimeout((function(){c(w)}),800),function(){clearTimeout(E.current),E.current=null}}),[c,w,S,P.current]);var U=l.useCallback((function(e){h(w.item,e)}),[h,w.item]),H=l.useCallback((function(){if(O.current)return O.current.getBoundingClientRect().top}),[]),V=w.canHaveChildren,z=new Image;return z.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",(0,d.jsx)("div",{style:i,ref:O,children:(0,d.jsx)(j,{beginDrag:function(){return w.selected||p({node:w,exclusive:!w.selected}),Z||"string"!==typeof w.name||V?{}:{name:w.name,thumbnail:w.thumbnailSrc||void 0}},canDrag:function(){return!w.item.isRoot&&!w.item.isPlaceholder&&g!==w.id},canDrop:m?function(){return m(w.item,A)}:function(){return!0},drop:function(){v(w.item,A)},hover:function(e){if(w.item.isRoot)"inside"!==A&&F("inside");else{var t=e.getClientOffset().y,n=_s(Math.floor(Date.now()/1e3),H);n&&(V?w.collapsed?F(t-n<=6?"before":t-n<=26?"inside":"after"):F(t-n<=6?"before":"inside"):F(t-n<=16?"before":"after"))}},children:function(e){var t,i,o=e.connectDragSource,s=e.connectDropTarget,l=e.connectDragPreview,u=e.isOver,p=e.canDrop;N(u,p);var h=(0,d.jsxs)("div",{className:Pn()(ds,(t={},(0,r.Z)(t,fs,!w.item.isRoot),(0,r.Z)(t,ps,!V),t)),children:[V?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(M.Z,{size:"small",onClick:function(e){e.stopPropagation(),c(w)},disabled:w.disableCollapse,children:w.collapsed?(0,d.jsx)(Es,{fontSize:"small"}):(0,d.jsx)(Ps,{fontSize:"small"})}),w.thumbnailSrc&&"FOLDER"!==w.thumbnailSrc?(0,d.jsx)("div",{className:Ts,children:(0,d.jsx)(Ms.Z,{iconSize:20,src:w.thumbnailSrc})}):!w.item.isRoot&&(0,d.jsx)(Is,{className:ws})]}):w.thumbnailSrc?(0,d.jsx)("div",{className:Ts,children:(0,d.jsx)(Ms.Z,{iconSize:20,src:w.thumbnailSrc})}):null,g===w.id&&"string"===typeof w.name?(0,d.jsx)(Ds,{initialValue:w.name,onEndRenaming:U,onBlur:f}):(0,d.jsx)("span",{className:Pn()(xs,(i={},(0,r.Z)(i,ks,w.item.isRoot),(0,r.Z)(i,Zs,w.item.isPlaceholder),i),w.extraClass),children:w.name})]});"string"!==typeof w.name||V?h=l(h):l(z);var m=w.rightButton,v=!w.shouldHideMenuIcon&&!C&&!w.item.isRoot&&!w.item.isPlaceholder,j=o((0,d.jsxs)("div",{className:cs,children:[u&&"before"===A&&(0,d.jsx)(kt.Z,{canDrop:p}),(0,d.jsxs)("div",(0,a.Z)((0,a.Z)({className:us,onDoubleClick:b?function(){return b(w.item)}:void 0,onContextMenu:k?B:R},D),{},{children:[h,(w.rightComponent||m||v)&&(0,d.jsxs)("div",{className:Pn()(ds,hs),children:[w.rightComponent,m&&(0,d.jsx)(M.Z,{id:m.id,size:"small",onClick:function(e){e.stopPropagation(),m.click&&m.click()},children:m.icon}),v&&(0,d.jsx)(M.Z,{size:"small",onClick:function(e){e.stopPropagation(),x({item:w.item,index:n,x:e.clientX,y:e.clientY})},children:(0,d.jsx)(Ls.Z,{})})]})]})),u&&"after"===A&&(0,d.jsx)(kt.Z,{canDrop:p})]})),Z=u&&"inside"===A&&V&&!w.item.isRoot?p?bs:Cs:null,S=s((0,d.jsx)("div",(0,a.Z)((0,a.Z)({id:y?y(w.item,n):void 0,onClick:_,className:Pn()(gs,Z,(0,r.Z)({},js,w.selected)),"aria-selected":w.selected,"aria-expanded":!!V&&!w.collapsed},(0,Fs.Y)(w.dataset)),{},{children:j})));return(0,d.jsx)("div",{style:{paddingLeft:T},className:Pn()(ss,(0,r.Z)({},ls,w.item.isRoot&&n>0)),children:S})}})})},Ns=l.memo(Bs,os.wy),Us=["ArrowDown","ArrowUp","ArrowRight","ArrowLeft","Enter"],Hs=(0,as.Z)((function(e,t,n,r,i,o,a,s,l,c,u,d,p,f,h,g){return{onOpen:t,onClick:n,onSelect:r,onBlurField:i,flattenedData:e,onEndRenaming:o,renamedItemId:a,onContextMenu:s,canDrop:l,onDrop:c,onEditItem:u,isMobile:d,DragSourceAndDropTarget:p,getItemHtmlId:f,forceDefaultDraggingPreview:h,shouldSelectUponContextMenuOpening:g}})),Vs=function(e,t){var n=e.height,r=e.width,i=e.items,o=e.searchText,a=e.getItemName,c=e.getItemId,u=e.getItemHtmlId,p=e.getItemChildren,f=e.getItemThumbnail,h=e.getItemDataset,g=e.onEditItem,x=e.buildMenuTemplate,m=e.getItemRightButton,b=e.renderRightComponent,C=e.selectedItems,j=e.onClickItem,y=e.onSelectItems,Z=e.multiSelect,k=e.onRenameItem,T=e.onCollapseItem,S=e.onMoveSelectionToItem,P=e.canMoveSelectionToItem,E=e.reactDndType,I=e.forceAllOpened,M=e.initiallyOpenedNodeIds,L=e.arrowKeyNavigationProps,A=e.forceDefaultDraggingPreview,F=e.shouldSelectUponContextMenuOpening,O=e.shouldHideMenuIcon,R=C.map(c),D=l.useState(M||[]),_=(0,s.Z)(D,2),B=_[0],N=_[1],U=l.useState(null),H=(0,s.Z)(U,2),V=H[0],z=H[1],W=l.useRef(null),G=l.useRef(null),Y=l.useRef(null),q=l.useState([]),X=(0,s.Z)(q,2),K=X[0],J=X[1],Q=(0,w.U)().isMobile,$=(0,Pt.Z)(),ee=l.useState(""),te=(0,s.Z)(ee,2),ne=te[0],re=te[1],ie=!!o,oe=l.useCallback((function(e,t,n,r){var i=c(e),o=p(e),s=Array.isArray(o),l=!I&&!B.includes(i),u=K.includes(i),d=[];o&&(I||!l||n||u)&&(d=o.map((function(e){return oe(e,t+1,n,u)})).flat());var g=a(e),x=b&&b(e),C=m&&m(e),j=h?h(e):void 0,y=ne&&i===ne?ms:"";if(!n||I||r||"string"===typeof g&&g.toLowerCase().includes(n)||d.length>0){var Z=f?f(e):null,k=R.includes(i);return[{id:i,name:g,rightComponent:x,rightButton:C,shouldHideMenuIcon:!!O&&O(e),hasChildren:!!o&&o.length>0,canHaveChildren:s,depth:t,selected:k,thumbnailSrc:Z,dataset:j,item:e,extraClass:y,collapsed:n?0===d.length||!u:l,disableCollapse:!!n&&d.length>0&&!u}].concat((0,v.Z)(d))}return[]}),[c,p,I,B,K,a,b,m,h,ne,f,R,O]),ae=l.useCallback((function(e,t){return e.map((function(e){return oe(e,0,t,!1)})).flat()}),[oe]),se=l.useCallback((function(e){ie?e.collapsed?J([].concat((0,v.Z)(K),[e.id])):I||J(K.filter((function(t){return t!==e.id}))):e.collapsed?N([].concat((0,v.Z)(B),[e.id])):I||(T&&T(e.item),N(B.filter((function(t){return t!==e.id}))))}),[K,B,ie,I,T]),le=l.useCallback((function(e){var t=e.node,n=e.exclusive;if(Z)if(t.selected)if(n){if(1===C.length)return;y([t.item])}else y(C.filter((function(e){return e!==t.item})));else y(n?[t.item]:[].concat((0,v.Z)(C),[t.item]));else{if(t.selected&&1===C.length)return;y([t.item])}}),[Z,y,C]),ce=l.useCallback((function(e){j&&j(e.item)}),[j]),ue=l.useMemo((function(){return ae(i,o?o.toLowerCase():null)}),[ae,i,o]),de=l.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"smart",n=Y.current;if(n){var r=ue.findLastIndex((function(t){return t.id===e}));r>=0&&n.scrollToItem(r,t)}}),[ue]),pe=l.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"smart";return de(c(e),t)}),[c,de]),fe=l.useCallback((function(e){z(c(e))}),[c]),he=l.useCallback((function(e){z(e)}),[]),ge=l.useCallback((function(e){var t=e.filter((function(e){return!B.includes(e)}));t.length>0&&N([].concat((0,v.Z)(B),(0,v.Z)(t)))}),[B]),xe=l.useCallback((function(e){var t=B.filter((function(t){return!e.includes(t)}));N(t)}),[B]),me=l.useCallback((function(e){re(c(e))}),[c]),ve=l.useCallback((function(e){var t=e.map(c),n=new Set(B);return t.map((function(e){return n.has(e)}))}),[B,c]);l.useEffect((function(){if(ne){var e=setTimeout((function(){return re("")}),400);return function(){return clearTimeout(e)}}}),[ne]),l.useImperativeHandle(t,(function(){return{forceUpdateList:$,scrollToItem:pe,scrollToItemFromId:de,renameItem:fe,renameItemFromId:he,openItems:ge,closeItems:xe,animateItem:me,areItemsOpen:ve}}));var be=l.useMemo((function(){return(0,Zt.x)(E,{vibrate:100})}),[E]),Ce=l.useCallback((function(e){var t=e.x,n=e.y,r=e.item,i=e.index;W.current&&W.current.open(t,n,{item:r,index:i})}),[]),je=l.useCallback((function(){G.current&&G.current.focus()}),[]),ye=Hs(ue,se,ce,le,je,(function(e,t){var n=t.trim();z(null),n&&a(e)!==n&&k(e,n)}),V,Ce,P,S,g,Q,be,u,A,F);l.useEffect((function(){(!o||o.length>0)&&J([])}),[o]);var Ze=l.useCallback((function(e){if(Us.includes(e.key)){var t,n=C[0],r=-1;if(n&&(r=ue.findIndex((function(e){return e.id===c(n)}))),-1===r){for(var i=0,o=ue[i];o&&(o.item.isRoot||o.item.isPlaceholder);)(i+=1)>ue.length-1&&(o=null),o=ue[i];o&&(t=o.item)}else if("ArrowDown"===e.key){if(e.preventDefault(),r<ue.length-1){for(var a=1,s=ue[r+a];s&&(s.item.isRoot||s.item.isPlaceholder);)r+a>ue.length-1&&(s=null),s=ue[r+(a+=1)];s&&(t=s.item)}}else if("ArrowUp"===e.key){if(e.preventDefault(),r>0){for(var l=-1,u=ue[r+l];u&&(u.item.isRoot||u.item.isPlaceholder);)r+l<0&&(u=null),u=ue[r+(l-=1)];u&&(t=u.item)}}else if("ArrowRight"===e.key&&L){e.preventDefault();var d=ue[r];d.canHaveChildren&&d.collapsed?ge([d.id]):t=L.onGetItemInside(n)}else if("ArrowLeft"===e.key&&L){e.preventDefault();var p=ue[r];p.canHaveChildren&&!p.collapsed?xe([p.id]):t=L.onGetItemOutside(n)}else if("Enter"===e.key){e.preventDefault();var f=ue[r];j&&j(f.item)}t&&(pe(t),y([t]))}}),[C,L,ue,c,ge,xe,j,pe,y]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{tabIndex:0,className:vs,onKeyDown:Ze,ref:G,children:(0,d.jsx)(os.t7,{height:n,itemCount:ue.length,itemSize:32,width:"number"===typeof r?r:"100%",itemKey:function(e){return ue[e].id},itemData:ye,ref:Y,overscanCount:20,children:Ns})}),(0,d.jsx)(za.Z,{ref:W,buildMenuTemplate:function(e,t){return x(t.item,t.index)}})]})},zs=l.forwardRef(Vs),Ws=n(47498),Gs="Layout",Ys={marginRight:5,verticalAlign:"bottom"},qs=function(e){return"scene-".concat(e.ptr)},Xs=function(){function e(t,n){(0,ot.Z)(this,e),this.scene=t,this.props=n}return(0,at.Z)(e,[{key:"isDescendantOf",value:function(e){return e.getId()===pl}},{key:"getRootId",value:function(){return pl}},{key:"getName",value:function(){return this.scene.getName()}},{key:"getId",value:function(){return qs(this.scene)}},{key:"getHtmlId",value:function(e){return"scene-item-".concat(e)}},{key:"getDataSet",value:function(){return{scene:this.scene.getName()}}},{key:"getThumbnail",value:function(){return"res/icons_default/scene_black.svg"}},{key:"onClick",value:function(){this.props.onOpenLayout(this.scene.getName())}},{key:"rename",value:function(e){var t=this.scene.getName();t!==e&&this.props.onRenameLayout(t,e)}},{key:"edit",value:function(){this.props.editName(this.getId())}},{key:"buildMenuTemplate",value:function(e,t){var n=this;return[{label:e._({id:"Edit scene properties"}),enabled:!0,click:function(){return n.props.onOpenLayoutProperties(n.scene)}},{label:e._({id:"Edit scene variables"}),enabled:!0,click:function(){return n.props.onOpenLayoutVariables(n.scene)}},{label:e._({id:"Set as start scene"}),enabled:!this._isFirstScene(),click:function(){return n._setProjectFirstScene(n.scene.getName())}},{type:"separator"},{label:e._({id:"Rename"}),click:function(){return n.edit()},accelerator:"F2"},{label:e._({id:"Delete"}),click:function(){return n.delete()},accelerator:"Backspace"},{type:"separator"},{label:e._({id:"Copy"}),click:function(){return n.copy()},accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return n.cut()},accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),enabled:Rt.has(Gs),click:function(){return n.paste()},accelerator:"CmdOrCtrl+V"},{label:e._({id:"Duplicate"}),click:function(){return n._duplicate()}}]}},{key:"_isFirstScene",value:function(){return this.scene.getName()===this.props.project.getFirstLayout()}},{key:"renderRightComponent",value:function(e){var t=[];return this._isFirstScene()&&t.push((0,d.jsx)(Ze.ZP,{title:e._({id:"This scene will be used as the start scene."}),children:(0,d.jsx)(Ws.Z,{fontSize:"small",style:(0,a.Z)((0,a.Z)({},Ys),{},{color:this.props.gdevelopTheme.text.color.disabled})})},"first-scene")),t.length>0?t:null}},{key:"delete",value:function(){this.props.onDeleteLayout(this.scene)}},{key:"getIndex",value:function(){return this.props.project.getLayoutPosition(this.scene.getName())}},{key:"moveAt",value:function(e){var t=this.getIndex();e!==t&&(this.props.project.moveLayout(t,e+(e<=t?0:-1)),this._onProjectItemModified())}},{key:"copy",value:function(){Rt.set(Gs,{layout:(0,Dt.XH)(this.scene),name:this.scene.getName()})}},{key:"cut",value:function(){this.copy(),this.delete()}},{key:"paste",value:function(){if(Rt.has(Gs)){var e=Rt.get(Gs),t=Ot.extractObjectProperty(e,"layout"),n=Ot.extractStringProperty(e,"name");if(n&&t){var r=this.props.project,i=(0,It.Z)(n,(function(e){return r.hasLayoutNamed(e)})),o=r.insertNewLayout(i,this.getIndex()+1);(0,Dt.qx)(o,t,"unserializeFrom",r),o.setName(i),o.updateBehaviorsSharedData(r),this._onProjectItemModified(),this.props.editName(qs(o))}}}},{key:"_duplicate",value:function(){var e=this.props.project,t=(0,It.Z)(this.scene.getName(),(function(t){return e.hasLayoutNamed(t)})),n=e.insertNewLayout(t,this.getIndex()+1);(0,Dt.qx)(n,(0,Dt.XH)(this.scene),"unserializeFrom",e),n.setName(t),n.updateBehaviorsSharedData(e),this._onProjectItemModified(),this.props.editName(qs(n))}},{key:"_onProjectItemModified",value:function(){this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges(),this.props.forceUpdate()}},{key:"getRightButton",value:function(e){return null}},{key:"_setProjectFirstScene",value:function(e){this.props.project.setFirstLayout(e),this.props.forceUpdate()}}]),e}(),Ks="Events Functions Extension",Js=function(e){return"extension-".concat(e.ptr)},Qs=function(){function e(t,n){(0,ot.Z)(this,e),this.eventsFunctionsExtension=t,this.props=n}return(0,at.Z)(e,[{key:"isDescendantOf",value:function(e){return e.getId()===fl}},{key:"getRootId",value:function(){return fl}},{key:"getName",value:function(){return this.eventsFunctionsExtension.getName()}},{key:"getId",value:function(){return Js(this.eventsFunctionsExtension)}},{key:"getHtmlId",value:function(e){return"extension-item-".concat(e)}},{key:"getDataSet",value:function(){return{extension:this.eventsFunctionsExtension.getName()}}},{key:"getThumbnail",value:function(){return this.eventsFunctionsExtension.getIconUrl()||"res/functions/extension_black.svg"}},{key:"onClick",value:function(){this.props.onEditEventsFunctionExtensionOrSeeDetails(this.eventsFunctionsExtension)}},{key:"rename",value:function(e){var t=this.eventsFunctionsExtension.getName();t!==e&&this.props.onRenameEventsFunctionsExtension(t,e)}},{key:"edit",value:function(){this.props.editName(this.getId())}},{key:"buildMenuTemplate",value:function(e,t){var n=this;return[{label:e._({id:"Rename"}),click:function(){return n.edit()},accelerator:"F2"},{label:e._({id:"Delete"}),click:function(){return n.delete()},accelerator:"Backspace"},{type:"separator"},{label:e._({id:"Copy"}),click:function(){return n.copy()},accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return n.cut()},accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),enabled:Rt.has(Ks),click:function(){return n.paste()},accelerator:"CmdOrCtrl+V"},{label:e._({id:"Duplicate"}),click:function(){return n._duplicate()}}]}},{key:"renderRightComponent",value:function(e){return null}},{key:"delete",value:function(){this.props.onDeleteEventsFunctionsExtension(this.eventsFunctionsExtension)}},{key:"getIndex",value:function(){return this.props.project.getEventsFunctionsExtensionPosition(this.eventsFunctionsExtension.getName())}},{key:"moveAt",value:function(e){var t=this.getIndex();e!==t&&(this.props.project.moveEventsFunctionsExtension(t,e+(e<=t?0:-1)),this._onProjectItemModified())}},{key:"copy",value:function(){Rt.set(Ks,{eventsFunctionsExtension:(0,Dt.XH)(this.eventsFunctionsExtension),name:this.eventsFunctionsExtension.getName()})}},{key:"cut",value:function(){this.copy(),this.delete()}},{key:"paste",value:function(){if(Rt.has(Ks)){var e=Rt.get(Ks),t=Ot.extractObjectProperty(e,"eventsFunctionsExtension"),n=Ot.extractStringProperty(e,"name");if(n&&t){var r=this.props.project,i=(0,It.Z)(n,(function(e){return gi(e,r)})),o=r.insertNewEventsFunctionsExtension(i,this.getIndex()+1);(0,Dt.qx)(o,t,"unserializeFrom",r),o.setName(i),this._onProjectItemModified(),this.props.onReloadEventsFunctionsExtensions(),this.props.editName(Js(o))}}}},{key:"_duplicate",value:function(){this.copy(),this.paste()}},{key:"_onProjectItemModified",value:function(){this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges(),this.props.forceUpdate()}},{key:"getRightButton",value:function(e){return null}}]),e}(),$s="External events",el=function(e){return"external-events-".concat(e.ptr)},tl=function(){function e(t,n){(0,ot.Z)(this,e),this.externalEvents=t,this.props=n}return(0,at.Z)(e,[{key:"isDescendantOf",value:function(e){return e.getId()===hl}},{key:"getRootId",value:function(){return hl}},{key:"getName",value:function(){return this.externalEvents.getName()}},{key:"getId",value:function(){return el(this.externalEvents)}},{key:"getHtmlId",value:function(e){return"external-events-item-".concat(e)}},{key:"getDataSet",value:function(){return{"external-events":this.externalEvents.getName()}}},{key:"getThumbnail",value:function(){return"res/icons_default/external_events_black.svg"}},{key:"onClick",value:function(){this.props.onOpenExternalEvents(this.externalEvents.getName())}},{key:"rename",value:function(e){var t=this.externalEvents.getName();t!==e&&this.props.onRenameExternalEvents(t,e)}},{key:"edit",value:function(){this.props.editName(this.getId())}},{key:"buildMenuTemplate",value:function(e,t){var n=this;return[{label:e._({id:"Rename"}),click:function(){return n.edit()},accelerator:"F2"},{label:e._({id:"Delete"}),click:function(){return n.delete()},accelerator:"Backspace"},{type:"separator"},{label:e._({id:"Copy"}),click:function(){return n.copy()},accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return n.cut()},accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),enabled:Rt.has($s),click:function(){return n.paste()},accelerator:"CmdOrCtrl+V"},{label:e._({id:"Duplicate"}),click:function(){return n._duplicate()}}]}},{key:"renderRightComponent",value:function(e){return null}},{key:"delete",value:function(){this.props.onDeleteExternalEvents(this.externalEvents)}},{key:"getIndex",value:function(){return this.props.project.getExternalEventsPosition(this.externalEvents.getName())}},{key:"moveAt",value:function(e){var t=this.getIndex();e!==t&&(this.props.project.moveExternalEvents(t,e+(e<=t?0:-1)),this._onProjectItemModified())}},{key:"copy",value:function(){Rt.set($s,{externalEvents:(0,Dt.XH)(this.externalEvents),name:this.externalEvents.getName()})}},{key:"cut",value:function(){this.copy(),this.delete()}},{key:"paste",value:function(){if(Rt.has($s)){var e=Rt.get($s),t=Ot.extractObjectProperty(e,"externalEvents"),n=Ot.extractStringProperty(e,"name");if(n&&t){var r=this.props.project,i=(0,It.Z)(n,(function(e){return r.hasExternalEventsNamed(e)})),o=r.insertNewExternalEvents(i,this.getIndex()+1);(0,Dt.qx)(o,t,"unserializeFrom",r),o.setName(i),this._onProjectItemModified(),this.props.editName(el(o))}}}},{key:"_duplicate",value:function(){this.copy(),this.paste()}},{key:"_onProjectItemModified",value:function(){this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges(),this.props.forceUpdate()}},{key:"getRightButton",value:function(e){return null}}]),e}(),nl="External layout",rl=function(e){return"external-layout-".concat(e.ptr)},il=function(){function e(t,n){(0,ot.Z)(this,e),this.externalLayout=t,this.props=n}return(0,at.Z)(e,[{key:"isDescendantOf",value:function(e){return e.getId()===gl}},{key:"getRootId",value:function(){return gl}},{key:"getName",value:function(){return this.externalLayout.getName()}},{key:"getId",value:function(){return rl(this.externalLayout)}},{key:"getHtmlId",value:function(e){return"external-layout-item-".concat(e)}},{key:"getDataSet",value:function(){return{"external-layout":this.externalLayout.getName()}}},{key:"getThumbnail",value:function(){return"res/icons_default/external_layout_black.svg"}},{key:"onClick",value:function(){this.props.onOpenExternalLayout(this.externalLayout.getName())}},{key:"rename",value:function(e){var t=this.externalLayout.getName();t!==e&&this.props.onRenameExternalLayout(t,e)}},{key:"edit",value:function(){this.props.editName(this.getId())}},{key:"buildMenuTemplate",value:function(e,t){var n=this;return[{label:e._({id:"Rename"}),click:function(){return n.edit()},accelerator:"F2"},{label:e._({id:"Delete"}),click:function(){return n.delete()},accelerator:"Backspace"},{type:"separator"},{label:e._({id:"Copy"}),click:function(){return n.copy()},accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return n.cut()},accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),enabled:Rt.has(nl),click:function(){return n.paste()},accelerator:"CmdOrCtrl+V"},{label:e._({id:"Duplicate"}),click:function(){return n._duplicate()}}]}},{key:"renderRightComponent",value:function(e){return null}},{key:"delete",value:function(){this.props.onDeleteExternalLayout(this.externalLayout)}},{key:"getIndex",value:function(){return this.props.project.getExternalLayoutPosition(this.externalLayout.getName())}},{key:"moveAt",value:function(e){var t=this.getIndex();e!==t&&(this.props.project.moveExternalLayout(t,e+(e<=t?0:-1)),this._onProjectItemModified())}},{key:"copy",value:function(){Rt.set(nl,{externalLayout:(0,Dt.XH)(this.externalLayout),name:this.externalLayout.getName()})}},{key:"cut",value:function(){this.copy(),this.delete()}},{key:"paste",value:function(){if(Rt.has(nl)){var e=Rt.get(nl),t=Ot.extractObjectProperty(e,"externalLayout"),n=Ot.extractStringProperty(e,"name");if(n&&t){var r=this.props.project,i=(0,It.Z)(n,(function(e){return r.hasExternalLayoutNamed(e)})),o=r.insertNewExternalLayout(i,this.getIndex()+1);(0,Dt.qx)(o,t),o.setName(i),this._onProjectItemModified(),this.props.editName(rl(o))}}}},{key:"_duplicate",value:function(){this.copy(),this.paste()}},{key:"_onProjectItemModified",value:function(){this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges(),this.props.forceUpdate()}},{key:"getRightButton",value:function(e){return null}}]),e}(),ol=function(e){return"project-manager-tab-".concat(e)},al=ol("game-settings"),sl=ol("game-properties"),ll=ol("game-icons"),cl=ol("project-settings"),ul=ol("global-variables"),dl=ol("game-resources"),pl=ol("scenes"),fl=ol("extensions"),hl=ol("external-events"),gl=ol("external-layout"),xl={listContainer:{flex:1,display:"flex",flexDirection:"column",padding:"0 8px 8px 8px"},autoSizerContainer:{flex:1},autoSizer:{width:"100%"}},ml=function(){function e(t){(0,ot.Z)(this,e),this.content=t}return(0,at.Z)(e,[{key:"getChildren",value:function(e){return null}}]),e}(),vl=function(){function e(t,n){(0,ot.Z)(this,e),this.isPlaceholder=!0,this.content=new bl(t,n)}return(0,at.Z)(e,[{key:"getChildren",value:function(e){return null}}]),e}(),bl=function(){function e(t,n,r){(0,ot.Z)(this,e),this.id=t,this.label=n,this.buildMenuTemplateFunction=function(e,t){return r?[{id:r.id,label:r.label,click:r.click}]:[]},this.rightButton=r}return(0,at.Z)(e,[{key:"getName",value:function(){return this.label}},{key:"getId",value:function(){return this.id}},{key:"getRightButton",value:function(e){return this.rightButton}},{key:"getHtmlId",value:function(e){return this.id}},{key:"getDataSet",value:function(){return{}}},{key:"getThumbnail",value:function(){return null}},{key:"onClick",value:function(){}},{key:"buildMenuTemplate",value:function(e,t){return this.buildMenuTemplateFunction(e,t)}},{key:"renderRightComponent",value:function(e){return null}},{key:"rename",value:function(e){}},{key:"edit",value:function(){}},{key:"delete",value:function(){}},{key:"copy",value:function(){}},{key:"paste",value:function(){}},{key:"cut",value:function(){}},{key:"getIndex",value:function(){return 0}},{key:"moveAt",value:function(e){}},{key:"isDescendantOf",value:function(e){return!1}},{key:"getRootId",value:function(){return""}}]),e}(),Cl=function(){function e(t,n,r,i){(0,ot.Z)(this,e),this.id=t,this.label=n,this.onClickCallback=r,this.thumbnail=i,this.buildMenuTemplateFunction=function(e,t){return[]}}return(0,at.Z)(e,[{key:"getName",value:function(){return this.label}},{key:"getId",value:function(){return this.id}},{key:"getRightButton",value:function(e){return null}},{key:"getEventsFunctionsContainer",value:function(){return null}},{key:"getHtmlId",value:function(e){return this.id}},{key:"getDataSet",value:function(){return{}}},{key:"getThumbnail",value:function(){return this.thumbnail}},{key:"onClick",value:function(){this.onClickCallback()}},{key:"buildMenuTemplate",value:function(e,t){return this.buildMenuTemplateFunction(e,t)}},{key:"renderRightComponent",value:function(e){return null}},{key:"rename",value:function(e){}},{key:"edit",value:function(){}},{key:"delete",value:function(){}},{key:"copy",value:function(){}},{key:"paste",value:function(){}},{key:"cut",value:function(){}},{key:"getIndex",value:function(){return 0}},{key:"moveAt",value:function(e){}},{key:"isDescendantOf",value:function(e){return!1}},{key:"getRootId",value:function(){return""}}]),e}(),jl=function(e){return e.content.getName()},yl=function(e){return e.content.getId()},Zl=function(e,t){return e.content.getHtmlId(t)},kl=function(e){return function(t){return t.getChildren(e)}},wl=function(e){return e.content.getThumbnail()},Tl=function(e){return e.content.getDataSet()},Sl=function(e){return function(t,n){return t.content.buildMenuTemplate(e,n)}},Pl=function(e){return function(t){return t.content.renderRightComponent(e)}},El=function(e,t){e.content.rename(t)},Il=function(e){e.content.onClick()},Ml=function(e){e.content.edit()},Ll=function(e){return function(t){return t.content.getRightButton(e)}},Al=l.forwardRef((function(e,t){var n=e.project,r=e.onChangeProjectName,i=e.onSaveProjectProperties,o=e.onDeleteLayout,a=e.onDeleteExternalEvents,c=e.onDeleteExternalLayout,u=e.onDeleteEventsFunctionsExtension,p=e.onRenameLayout,h=e.onRenameExternalEvents,g=e.onRenameExternalLayout,x=e.onRenameEventsFunctionsExtension,m=e.onOpenLayout,v=e.onOpenExternalEvents,j=e.onOpenExternalLayout,y=e.onOpenEventsFunctionsExtension,Z=e.onOpenResources,k=e.onOpenPlatformSpecificAssets,T=(e.eventsFunctionsExtensionsError,e.onReloadEventsFunctionsExtensions),S=(e.freezeUpdate,e.unsavedChanges),P=e.hotReloadPreviewButtonProps,E=e.onInstallExtension,I=e.onShareProject,M=e.resourceManagementProps,A=l.useState([]),F=(0,s.Z)(A,2),O=F[0],R=F[1],D=l.useContext(se.ZP),_=l.useContext(f.Z),B=l.useContext(Yr.Z).currentlyRunningInAppTutorial,N=l.useRef(null),U=(0,Pt.Z)(),H=(0,w.U)().isMobile,V=(0,lt.Z)().showDeleteConfirmation,z=l.useCallback((function(){U(),N.current&&N.current.forceUpdateList()}),[U]),W=l.useState(""),G=(0,s.Z)(W,2),Y=G[0],q=G[1],X=l.useCallback((function(e){N.current&&N.current.scrollToItemFromId(e)}),[]),K=l.useState(!1),J=(0,s.Z)(K,2),Q=J[0],$=J[1],ee=l.useState("properties"),te=(0,s.Z)(ee,2),ne=te[0],re=te[1],ie=l.useCallback((function(){$(!0),re("properties")}),[]),oe=l.useCallback((function(){$(!0),re("loading-screen")}),[]),ae=l.useCallback((function(e){S&&S.triggerUnsavedChanges(),e.newName&&r(e.newName),$(!1)}),[S,r]),le=l.useState(!1),ce=(0,s.Z)(le,2),ue=ce[0],de=ce[1],pe=n.getProjectUuid(),fe=Mi(),he=fe.games,ge=fe.fetchGames,xe=l.useContext(tr.ZP).profile,me=xe?xe.id:null;l.useEffect((function(){ge()}),[ge,me]);var ve=he?he.find((function(e){return e.id===pe})):null,be=l.useCallback((function(){return de(!0)}),[]),Ce=l.useState(!1),je=(0,s.Z)(Ce,2),ye=je[0],Ze=je[1],ke=l.useCallback((function(){Ze(!0)}),[]),we=l.useState(null),Te=(0,s.Z)(we,2),Se=Te[0],Pe=Te[1],Ee=l.useState(null),Ie=(0,s.Z)(Ee,2),Me=Ie[0],Le=Ie[1],Ae=l.useCallback((function(e){Pe(e)}),[]),Fe=l.useCallback((function(e){Le(e)}),[]),Oe=l.useState(!1),Re=(0,s.Z)(Oe,2),De=Re[0],_e=Re[1],Be=l.useCallback((function(){_e(!0)}),[]),Ne=l.useState(null),Ue=(0,s.Z)(Ne,2),He=Ue[0],Ve=Ue[1],ze=l.useState(null),We=(0,s.Z)(ze,2),Ge=We[0],Ye=We[1],qe=l.useRef(null);l.useImperativeHandle(t,(function(){return{forceUpdateList:function(){U(),N.current&&N.current.forceUpdateList()},focusSearchBar:function(){qe.current&&qe.current.focus()}}}));var Xe=l.useCallback((function(){U(),S&&S.triggerUnsavedChanges()}),[U,S]),Ke=l.useCallback((function(e){var t=N.current;t&&(H&&t.scrollToItemFromId(e,"start"),t.renameItemFromId(e))}),[H]),Je=l.useCallback((function(e,t){var r=(0,It.Z)(t._({id:"Untitled scene"}),(function(e){return n.hasLayoutNamed(e)})),i=n.insertNewLayout(r,e+1);i.setName(r),i.updateBehaviorsSharedData(n),ki(i),Xe();var o=qs(i);N.current&&N.current.openItems([o,pl]),setTimeout((function(){X(o)}),100),Ke(o)}),[n,Xe,Ke,X]),Qe=l.useCallback((function(e,t){var n=(0,It.Z)(t._({id:"UntitledExtension"}),(function(t){return gi(t,e)})),r=e.insertNewEventsFunctionsExtension(n,e.getEventsFunctionsExtensionsCount());_e(!1),Xe();var i=Js(r);N.current&&N.current.openItems([i,fl]),setTimeout((function(){X(i)}),100),Ke(i)}),[Ke,Xe,X]),$e=l.useContext(pr.H).extensionShortHeadersByName,et=l.useCallback((function(e){var t=e.getName();if("gdevelop-extension-store"===e.getOriginName()){var n=e.getOriginIdentifier(),r=$e[n];if(!r)return console.warn("This extension was downloaded from the store but its reference ".concat(n," couldn't be found in the store. Opening the extension in the editor...")),void y(t);Ve(r),Ye(t)}else y(t)}),[$e,y]),tt=l.useCallback((function(e,t){var r=(0,It.Z)(t._({id:"Untitled external events"}),(function(e){return n.hasExternalEventsNamed(e)})),i=n.insertNewExternalEvents(r,e+1);Xe();var o=el(i);N.current&&N.current.openItems([o,hl]),setTimeout((function(){X(o)}),100),Ke(o)}),[n,Xe,Ke,X]),nt=l.useCallback((function(e,t){var r=(0,It.Z)(t._({id:"Untitled external layout"}),(function(e){return n.hasExternalLayoutNamed(e)})),i=n.insertNewExternalLayout(r,e+1);Xe();var o=rl(i);N.current&&N.current.openItems([o,gl]),setTimeout((function(){X(o)}),100),Ke(o)}),[n,Xe,Ke,X]),rt=l.useCallback((function(e){S&&S.triggerUnsavedChanges(),e?z():U()}),[U,z,S]),it=l.useRef(new St.ZP({shortcutCallbacks:{}}));l.useEffect((function(){it.current&&(it.current.setShortcutCallback("onDelete",(function(){O.length>0&&O[0].content.delete()})),it.current.setShortcutCallback("onRename",(function(){O.length>0&&Ke(O[0].content.getId())})),it.current.setShortcutCallback("onCopy",(function(){O.length>0&&O[0].content.copy()})),it.current.setShortcutCallback("onPaste",(function(){O.length>0&&O[0].content.paste()})),it.current.setShortcutCallback("onCut",(function(){O.length>0&&O[0].content.cut()})))}),[Ke,O]);var ot=l.useMemo((function(){return{project:n,unsavedChanges:S,preferences:D,gdevelopTheme:_,forceUpdate:U,forceUpdateList:z,showDeleteConfirmation:V,editName:Ke,scrollToItem:X,onDeleteLayout:o,onRenameLayout:p,onOpenLayout:m,onOpenLayoutProperties:Ae,onOpenLayoutVariables:Fe}}),[n,S,D,_,U,z,V,Ke,X,o,p,m,Ae,Fe]),at=l.useMemo((function(){return{project:n,unsavedChanges:S,preferences:D,gdevelopTheme:_,forceUpdate:U,forceUpdateList:z,showDeleteConfirmation:V,editName:Ke,scrollToItem:X,onDeleteEventsFunctionsExtension:u,onRenameEventsFunctionsExtension:x,onOpenEventsFunctionsExtension:y,onReloadEventsFunctionsExtensions:T,onEditEventsFunctionExtensionOrSeeDetails:et}}),[n,S,D,_,U,z,V,Ke,X,u,x,y,T,et]),ct=l.useMemo((function(){return{project:n,unsavedChanges:S,preferences:D,gdevelopTheme:_,forceUpdate:U,forceUpdateList:z,showDeleteConfirmation:V,editName:Ke,scrollToItem:X,onDeleteExternalEvents:a,onRenameExternalEvents:h,onOpenExternalEvents:v}}),[n,S,D,_,U,z,V,Ke,X,a,h,v]),ut=l.useMemo((function(){return{project:n,unsavedChanges:S,preferences:D,gdevelopTheme:_,forceUpdate:U,forceUpdateList:z,showDeleteConfirmation:V,editName:Ke,scrollToItem:X,onDeleteExternalLayout:c,onRenameExternalLayout:g,onOpenExternalLayout:j}}),[n,S,D,_,U,z,V,Ke,X,c,g,j]),dt=l.useCallback((function(e){return[{isRoot:!0,content:new bl(al,e._({id:"Game settings"})),getChildren:function(e){return[new ml(new Cl(sl,e._({id:"Properties"}),ie,"res/icons_default/properties_black.svg")),new ml(new Cl(ll,e._({id:"Icons and thumbnail"}),k,"res/icons_default/picture_black.svg")),new ml(new Cl("manage",e._({id:"Game Dashboard"}),be,"res/icons_default/graphs_black.svg"))]}},{isRoot:!0,content:new bl(cl,e._({id:"Project settings"})),getChildren:function(e){return[new ml(new Cl(ul,e._({id:"Global variables"}),ke,"res/icons_default/publish_black.svg")),new ml(new Cl(dl,e._({id:"Resources"}),Z,"res/icons_default/project_resources_black.svg"))]}},{isRoot:!0,content:new bl(pl,e._({id:"Scenes"}),{icon:(0,d.jsx)(vt.Z,{}),label:e._({id:"Add a scene"}),click:function(){var t=n.getLayoutsCount()-1;Je(t,e)},id:"add-new-scene-button"}),getChildren:function(e){return 0===n.getLayoutsCount()?[new vl("scenes-placeholder",e._({id:"Start by adding a new scene."}))]:(0,Et.mapFor)(0,n.getLayoutsCount(),(function(e){return new ml(new Xs(n.getLayoutAt(e),ot))}))}},{isRoot:!0,content:new bl(fl,e._({id:"Extensions"}),{icon:(0,d.jsx)(vt.Z,{}),label:e._({id:"Create or search for new extensions"}),click:Be,id:"project-manager-extension-search-or-create"}),getChildren:function(e){return 0===n.getEventsFunctionsExtensionsCount()?[new vl("extensions-placeholder",e._({id:"Start by adding a new function."}))]:(0,Et.mapFor)(0,n.getEventsFunctionsExtensionsCount(),(function(e){return new ml(new Qs(n.getEventsFunctionsExtensionAt(e),at))}))}},{isRoot:!0,content:new bl(hl,e._({id:"External events"}),{icon:(0,d.jsx)(vt.Z,{}),label:e._({id:"Add external events"}),click:function(){var t=n.getExternalEventsCount()-1;tt(t,e)},id:"add-new-external-events-button"}),getChildren:function(e){return 0===n.getExternalEventsCount()?[new vl("external-events-placeholder",e._({id:"Start by adding new external events."}))]:(0,Et.mapFor)(0,n.getExternalEventsCount(),(function(e){return new ml(new tl(n.getExternalEventsAt(e),ct))}))}},{isRoot:!0,content:new bl(gl,e._({id:"External layouts"}),{icon:(0,d.jsx)(vt.Z,{}),label:e._({id:"Add an external layout"}),click:function(){var t=n.getExternalLayoutsCount()-1;nt(t,e)},id:"add-new-external-layout-button"}),getChildren:function(e){return 0===n.getExternalLayoutsCount()?[new vl("external-layout-placeholder",e._({id:"Start by adding new a external layout."}))]:(0,Et.mapFor)(0,n.getExternalLayoutsCount(),(function(e){return new ml(new il(n.getExternalLayoutAt(e),ut))}))}}]}),[tt,nt,Je,at,ct,ut,be,k,Z,ie,ke,Be,n,ot]),pt=l.useCallback((function(e,t){return O.every((function(t){return t.content.getRootId().length>0&&t.content.getRootId()===e.content.getRootId()}))}),[O]),ft=l.useCallback((function(e,t,n){0!==O.length&&(O[0].content.moveAt(t.content.getIndex()+("after"===n?1:0)),rt(!0))}),[rt,O]),ht=l.useCallback((function(e){1!==O.length||e.isPlaceholder||O[0].content.isDescendantOf(e.content)&&R([])}),[O]),gt=n.ptr,xt=[al,cl,pl,fl,hl,gl];return(0,d.jsxs)(is,{maxWidth:!0,children:[(0,d.jsx)(mi,{project:n,onOpenProjectProperties:ie,onOpenProjectLoadingScreen:oe,onOpenProjectVariables:ke,onOpenResourcesDialog:Z,onOpenPlatformSpecificAssetsDialog:k,onOpenSearchExtensionDialog:Be}),(0,d.jsx)(L.sg,{children:(0,d.jsx)(C.pJ,{children:(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,d.jsx)(st.Z,{ref:qe,value:Y,onRequestSearch:function(){},onChange:q,placeholder:{id:"Search in project"}})})})}),(0,d.jsx)("div",{style:xl.listContainer,onKeyDown:it.current.onKeyDown,onKeyUp:it.current.onKeyUp,id:"project-manager",children:(0,d.jsx)(b.I18n,{children:function(e){var t=e.i18n;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{style:xl.autoSizerContainer,children:(0,d.jsx)(hr.qj,{style:xl.autoSizer,disableWidth:!0,children:function(e){var n=e.height;return(0,d.jsx)(zs,{ref:N,items:dt(t),height:n,forceAllOpened:!!B,searchText:Y,getItemName:jl,getItemThumbnail:wl,getItemChildren:kl(t),multiSelect:!1,getItemId:yl,getItemHtmlId:Zl,getItemDataset:Tl,onEditItem:Ml,onCollapseItem:ht,selectedItems:O,onSelectItems:function(e){var t=e[0];t&&(t.isRoot||R(e))},onClickItem:Il,onRenameItem:El,buildMenuTemplate:Sl(t),getItemRightButton:Ll(t),renderRightComponent:Pl(t),onMoveSelectionToItem:function(e,n){return ft(t,e,n)},canMoveSelectionToItem:pt,reactDndType:"GD_EXTENSION_ITEM",initiallyOpenedNodeIds:xt,forceDefaultDraggingPreview:!0,shouldHideMenuIcon:function(e){return!e.content.getRootId()}},gt)}})}),Q&&(0,d.jsx)(dr,{open:!0,initialTab:ne,project:n,onClose:function(){return $(!1)},onApply:i,onPropertiesApplied:ae,resourceManagementProps:M,hotReloadPreviewButtonProps:P,i18n:t}),ye&&(0,d.jsx)(zn,{project:n,title:(0,d.jsx)(b.Trans,{id:"Global Variables"}),open:!0,variablesContainer:n.getVariables(),onCancel:function(){return Ze(!1)},onApply:function(){S&&S.triggerUnsavedChanges(),Ze(!1)},emptyPlaceholderTitle:(0,d.jsx)(b.Trans,{id:"Add your first global variable"}),emptyPlaceholderDescription:(0,d.jsx)(b.Trans,{id:"These variables hold additional information on a project."}),helpPagePath:"/all-features/variables/global-variables",hotReloadPreviewButtonProps:P,onComputeAllVariableNames:function(){return fi.findAllGlobalVariables(n.getCurrentPlatform(),n)}}),ue&&(0,d.jsx)(ns,{project:n,analyticsSource:"projectManager",game:ve,onClose:function(){return de(!1)},onGameDeleted:function(){de(!1),ge()},onGameUpdated:ge,onShareProject:I}),!!Se&&(0,d.jsx)(ui,{open:!0,layout:Se,project:n,onApply:function(){S&&S.triggerUnsavedChanges(),Ae(null)},onClose:function(){return Ae(null)},onEditVariables:function(){Fe(Se),Ae(null)},resourceManagementProps:M}),!!Me&&(0,d.jsx)(hi,{open:!0,project:n,layout:Me,onClose:function(){return Fe(null)},onApply:function(){S&&S.triggerUnsavedChanges(),Fe(null)},hotReloadPreviewButtonProps:P}),De&&(0,d.jsx)(Qr,{project:n,onClose:function(){return _e(!1)},onInstallExtension:E,onCreateNew:function(){Qe(n,t)}}),He&&Ge&&(0,d.jsx)(vi,{project:n,onClose:function(){Ve(null),Ye(null)},onOpenEventsFunctionsExtension:y,extensionShortHeader:He,extensionName:Ge,onInstallExtension:E})]})}})})]})})),Fl=function(e,t){return t.freezeUpdate},Ol=l.memo(Al,Fl),Rl=l.forwardRef((function(e,t){var n=l.useRef(null),r=(0,Gr.bX)();return l.useEffect((function(){var t=setTimeout((function(){!e.freezeUpdate&&r&&n.current&&n.current.focusSearchBar()}),100);return function(){return clearTimeout(t)}}),[e.freezeUpdate,r]),(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Project manager"}),scope:"project-manager",children:(0,d.jsx)(Ol,(0,a.Z)({ref:function(e){n.current=e,"function"===typeof t?t(e):null!==t&&(t.current=e)}},e))})})),Dl=n(72410),_l=ae()("fs-extra"),Bl=function(e){var t=document.createElement("img"),n=_l.readFileSync(e,{encoding:"base64"});return new Promise((function(e,r){t.addEventListener("error",(function(e){r(e)})),t.addEventListener("load",(function(){e(t)})),t.src="data:image/png;base64,".concat(n)}))},Nl=function(e,t,n){var r=n.width,i=n.height,o=n.transparentBorderSize,a=void 0===o?0:o;return new Promise((function(n,o){var s=document.createElement("canvas");s.width=r,s.height=i;var l=s.getContext("2d");l.imageSmoothingEnabled=!0,l.imageSmoothingQuality="high",l.drawImage(e,a,a,r-2*a,i-2*a),s.toBlob((function(e){e.arrayBuffer().then((function(e){_l.writeFileSync(t,Buffer.from(e)),n(!0)}))}),"image/png")}))},Ul=ae()("path"),Hl=n.g.gd,Vl=[512],zl=[192,144,96,72,48,36],Wl=[1024,180,167,152,144,120,114,100,87,80,76,72,60,58,57,50,40,29,20],Gl=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(e){var r;return(0,ot.Z)(this,n),(r=t.call(this,e))._generateFromFile=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,o,a,s,l,c,u,d,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.props,n=t.project,o=t.resourceManagementProps,a=o.resourceSources.filter((function(e){return"image"===e.kind})).filter((function(e){return e.name.startsWith("local-file-opener")}))[0]){e.next=4;break}throw new Error("No supported resource source - only local files are supported.");case 4:return e.next=6,o.onChooseResource({initialSourceName:a.name,multiSelection:!1,resourceKind:"image"});case 6:if((s=e.sent).length&&Ul){e.next=9;break}return e.abrupt("return");case 9:return l=n.getResourcesManager(),c=Ul.dirname(n.getProjectFile()),u=Ul.resolve(c,s[0].getFile()),e.next=14,Bl(u);case 14:return d=e.sent,s.forEach((function(e){return e.delete()})),e.next=18,Promise.all([].concat((0,v.Z)(Vl.map((function(e){return Nl(d,Ul.join(c,"desktop-icon-".concat(e,".png")),{width:e,height:e})}))),(0,v.Z)(zl.map((function(e){return Nl(d,Ul.join(c,"android-icon-".concat(e,".png")),{width:e,height:e})}))),[Nl(d,Ul.join(c,"android-windowSplashScreenAnimatedIcon.png"),{width:864,height:864,transparentBorderSize:144})],(0,v.Z)(Wl.map((function(e){return Nl(d,Ul.join(c,"ios-icon-".concat(e,".png")),{width:e,height:e})})))));case 18:if(-1===e.sent.indexOf(!1)){e.next=22;break}return(0,Ur.gR)({message:"Some icons could not be generated!",rawError:void 0,errorId:"icon-generation-error",doNotReport:!0}),e.abrupt("return");case 22:(p=[].concat((0,v.Z)(Vl.map((function(e){return"desktop-icon-".concat(e,".png")}))),(0,v.Z)(zl.map((function(e){return"android-icon-".concat(e,".png")}))),["android-windowSplashScreenAnimatedIcon.png"],(0,v.Z)(Wl.map((function(e){return"ios-icon-".concat(e,".png")}))))).forEach((function(e){if(l.hasResource(e))l.getResource(e).setFile(e);else{var t=new Hl.ImageResource;t.setFile(e),t.setName(e),l.addResource(t),t.delete()}})),Dl.Z.burstUrlsCacheForResources(n,p),setTimeout((function(){r.setState({desktopIconResourceNames:Vl.map((function(e){return"desktop-icon-".concat(e,".png")})),androidIconResourceNames:zl.map((function(e){return"android-icon-".concat(e,".png")})),androidWindowSplashScreenAnimatedIconResourceName:"android-windowSplashScreenAnimatedIcon.png",iosIconResourceNames:Wl.map((function(e){return"ios-icon-".concat(e,".png")}))})}),200);case 26:case"end":return e.stop()}}),e)}))),r.onApply=function(){var e=r.props.project,t=r.state,n=t.thumbnailResourceName,i=t.desktopIconResourceNames,o=t.androidIconResourceNames,a=t.androidWindowSplashScreenAnimatedIconResourceName,s=t.iosIconResourceNames,l=e.getPlatformSpecificAssets();l.set("liluo","thumbnail",n),Vl.forEach((function(e,t){l.set("desktop","icon-".concat(e),i[t])})),zl.forEach((function(e,t){l.set("android","icon-".concat(e),o[t])})),l.set("android","windowSplashScreenAnimatedIcon",a),Wl.forEach((function(e,t){l.set("ios","icon-".concat(e),s[t])})),r.props.onApply()},r.state=r._loadFrom(e.project),r}return(0,at.Z)(n,[{key:"_loadFrom",value:function(e){var t=e.getPlatformSpecificAssets();return{thumbnailResourceName:t.get("liluo","thumbnail"),desktopIconResourceNames:Vl.map((function(e){return t.get("desktop","icon-".concat(e))})),androidIconResourceNames:zl.map((function(e){return t.get("android","icon-".concat(e))})),androidWindowSplashScreenAnimatedIconResourceName:e.getPlatformSpecificAssets().get("android","windowSplashScreenAnimatedIcon"),iosIconResourceNames:Wl.map((function(e){return t.get("ios","icon-".concat(e))})),displayGamesPlatformThumbnailWarning:!1}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){(!this.props.open&&e.open||e.open&&this.props.project!==e.project)&&this.setState(this._loadFrom(e.project))}},{key:"render",value:function(){var e=this,t=[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),primary:!1,onClick:this.props.onClose},"cancel"),(0,d.jsx)(te.vF,{label:(0,d.jsx)(b.Trans,{id:"Apply"}),primary:!0,onClick:this.onApply},"apply")],n=this.props,r=n.project,i=n.resourceManagementProps,o=this.state,a=o.thumbnailResourceName,s=o.desktopIconResourceNames,l=o.androidIconResourceNames,c=o.androidWindowSplashScreenAnimatedIconResourceName,u=o.iosIconResourceNames,p=o.displayGamesPlatformThumbnailWarning;return(0,d.jsx)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Project icons"}),actions:t,open:this.props.open,onRequestClose:this.props.onClose,onApply:this.onApply,children:(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(L.x1,{justifyContent:"center",noMargin:!0,children:Ul?(0,d.jsx)(T.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Generate icons from a file"}),onClick:this._generateFromFile}):(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Download GDevelop desktop version to generate the Android and iOS icons of your game."})})}),(0,d.jsx)(F.Z,{size:"sub-title",children:(0,d.jsx)(b.Trans,{id:"gd.games thumbnail"})}),(0,d.jsx)($n.Z,{floatingLabelText:"gd.games thumbnail (1920x1080 px)",project:r,resourceManagementProps:i,resourceKind:"image",resourceName:a,defaultNewResourceName:"Thumbnail",onChange:function(t){e.setState({thumbnailResourceName:t,displayGamesPlatformThumbnailWarning:t!==e.state.thumbnailResourceName})}}),p?(0,d.jsx)(L.x1,{children:(0,d.jsx)(De.Z,{kind:"warning",children:(0,d.jsx)(b.Trans,{id:"You're about to change the thumbnail displayed on gd.games for your game. Once you have applied changes here, you will then need to publish a new version of your game on gd.games so that this new thumbnail is used."})})}):null,(0,d.jsx)(F.Z,{size:"sub-title",children:(0,d.jsx)(b.Trans,{id:"Desktop (Windows, macOS and Linux) icon"})}),Vl.map((function(t,n){return(0,d.jsx)($n.Z,{floatingLabelText:"Desktop icon (".concat(t,"x").concat(t," px)"),project:r,resourceManagementProps:i,resourceKind:"image",resourceName:s[n],defaultNewResourceName:"DesktopIcon"+t,onChange:function(t){var r=(0,v.Z)(s);r[n]=t,e.setState({desktopIconResourceNames:r})}},t)})),(0,d.jsx)(F.Z,{size:"sub-title",children:(0,d.jsx)(b.Trans,{id:"Android icons and Android 12+ splashscreen"})}),(0,d.jsx)(b.I18n,{children:function(t){var n=t.i18n;return(0,d.jsx)($n.Z,{floatingLabelText:"Android 12+ splashscreen icon (576x576 px)",project:r,resourceManagementProps:i,resourceKind:"image",resourceName:c,defaultNewResourceName:"AndroidSplashscreenIcon",onChange:function(t){e.setState({androidWindowSplashScreenAnimatedIconResourceName:t})},helperMarkdownText:n._({id:"The image should be at least 864x864px, and the logo must fit [within a circle of 576px](https://developer.android.com/guide/topics/ui/splash-screen#splash_screen_dimensions). Transparent borders are automatically added when generated to help ensuring this."})})}}),zl.map((function(t,n){return(0,d.jsx)($n.Z,{floatingLabelText:"Android icon (".concat(t,"x").concat(t," px)"),project:r,resourceManagementProps:i,resourceKind:"image",resourceName:l[n],defaultNewResourceName:"AndroidIcon"+t,onChange:function(t){var r=(0,v.Z)(l);r[n]=t,e.setState({androidIconResourceNames:r})}},t)})),(0,d.jsx)(F.Z,{size:"sub-title",children:(0,d.jsx)(b.Trans,{id:"iOS (iPhone and iPad) icons"})}),Wl.map((function(t,n){return(0,d.jsx)($n.Z,{floatingLabelText:"iOS icon (".concat(t,"x").concat(t," px)"),project:r,resourceManagementProps:i,resourceKind:"image",resourceName:u[n],defaultNewResourceName:"IosIcon"+t,onChange:function(t){var r=(0,v.Z)(u);r[n]=t,e.setState({iosIconResourceNames:r})}},t)}))]})})}}]),n}(l.Component),Yl=function(e){return(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Project icons"}),scope:"project-icons",onClose:e.onClose,showOnTop:!0,children:(0,d.jsx)(Gl,(0,a.Z)({},e))})},ql=n(37477),Xl=n(97865),Kl={dialogContent:{padding:10,overflow:"hidden",display:"flex",flexDirection:"row"}},Jl={enter:0,exit:150},Ql=function(e){var t=e.progress,n=e.message,r=e.show,i=null===t||void 0===t;return(0,d.jsx)(b.I18n,{children:function(e){var o=e.i18n;return(0,d.jsx)(ql.Z,{open:r,transitionDuration:Jl,children:(0,d.jsx)(Xl.Z,{style:Kl.dialogContent,children:(0,d.jsx)("div",{style:{width:n?250:void 0},children:(0,d.jsxs)(L.sg,{noMargin:!0,alignItems:"center",expand:!0,children:[(0,d.jsx)(eo.Z,{size:50,disableShrink:i,value:i?void 0:t,variant:i?"indeterminate":"determinate"}),n&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.LZ,{}),(0,d.jsx)(F.Z,{noMargin:!0,align:"center",children:o._(n)})]})]})})})})}})},$l=n(48409),ec=ae()("electron"),tc=ae()("@electron/remote"),nc=l.memo((function(e){var t=e.shouldPrompt,n=e.i18n,r=e.language,i=e.hasUnsavedChanges,o=l.useRef(!0);return l.useEffect((function(){if(!Y.ZP.isDev()){var e=[n._({id:"Are you sure you want to quit GDevelop?"}),i?n._({id:"Any unsaved changes in the project will be lost."}):""].filter(Boolean).join("\n");ec?window.onbeforeunload=function(n){if(o.current&&t)return setTimeout((function(){Y.ZP.showConfirmDialog(e)&&(o.current=!1,tc.getCurrentWindow().close())}),10),n.returnValue=!0,!1}:window&&!(0,$l._F)()&&(window.onbeforeunload=t?function(){return e}:null)}}),[t,n,r,i]),null})),rc=n(73298),ic=n(44634),oc=n(93431),ac=n(24233),sc=function(e){var t=e.communityLinks;return(0,d.jsx)(C.ak,{expand:!0,noMargin:!0,children:t.map((function(e,t){var n=e.url,r=e.icon;return n?(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[r,(0,d.jsx)(F.Z,{noMargin:!0,children:n})]},t):null}))})},lc=function(e){var t=e.profile,n=e.subscription,r=e.achievements,a=e.error,c=e.onRetry,u=e.onOpenChangeEmailDialog,p=e.onOpenEditProfileDialog,f=t?t.email:null,h=t?t.donateLink:null,g=t?t.discordUsername:null,x=t?t.githubUsername:null,m=t&&t.communityLinks||{},v=m?m.personalWebsiteLink:null,j=t?m.personalWebsite2Link:null,y=t?m.twitterUsername:null,Z=t?m.facebookUsername:null,k=t?m.youtubeUsername:null,w=t?m.tiktokUsername:null,S=t?m.instagramUsername:null,P=t?m.redditUsername:null,E=t?m.snapchatUsername:null,I=t?m.discordServerLink:null,A=l.useContext(tr.ZP).getAuthorizationHeader,O=(0,lt.Z)().showAlert,R=r&&r.find((function(e){return"github-star"===e.id}))||null,D=l.useState(null),_=(0,s.Z)(D,2),B=_[0],N=_[1],U=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return N("syncing"),e.prev=3,e.next=6,(0,oc.Zb)(A,t.id);case 6:N("success"),e.next=17;break;case 9:if(e.prev=9,e.t0=e.catch(3),console.error("Error while syncing discord username:",e.t0),!(n=(0,_o.T)(e.t0))||400!==n.status||"discord-role-update/discord-user-not-found"!==n.code){e.next=16;break}return O({title:{id:"Discord user not found"},message:{id:"Ensure you don't have any typo in your username and that you have joined the GDevelop Discord server."}}),e.abrupt("return");case 16:O({title:{id:"Discord username sync failed"},message:{id:"Something went wrong while syncing your Discord username. Please try again later."}});case 17:return e.prev=17,setTimeout((function(){return N(null)}),3e3),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,9,17,20]])}))),[A,t,O]),H=(0,nr.u0)(n);return a?(0,d.jsx)(fr.Z,{onRetry:c,children:(0,d.jsx)(b.Trans,{id:"Unable to load the profile, please verify your internet connection or try again later."})}):t?(0,d.jsx)(b.I18n,{children:function(e){var n=e.i18n;return(0,d.jsxs)(C.ep,{children:[(0,d.jsx)(Ni.Z,{src:(0,rc.y)(f||"",{size:40})}),(0,d.jsxs)(C.ak,{noMargin:!0,expand:!0,children:[(0,d.jsx)(C.ep,{justifyContent:"space-between",noMargin:!0,children:(0,d.jsx)(F.Z,{size:"block-title",allowBrowserAutoTranslate:!t.username,style:{opacity:t.username?1:.5},children:t.username||n._({id:"Edit your profile to pick a username!"})})}),f&&(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(F.Z,{noMargin:!0,size:"body-small",children:(0,d.jsx)(b.Trans,{id:"Email"})}),(0,d.jsx)(F.Z,{children:f})]}),(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[(0,d.jsx)(F.Z,{noMargin:!0,size:"body-small",children:(0,d.jsx)(b.Trans,{id:"Discord username"})}),H&&!!g&&(0,d.jsx)(M.Z,{onClick:U,disabled:null!==B,tooltip:{id:"Sync your role on GDevelop's Discord server"},size:"small",children:"success"===B?(0,d.jsx)(ac.Z,{fontSize:"small"}):(0,d.jsx)(Xi.Z,{fontSize:"small"})})]}),(0,d.jsx)(F.Z,{children:g?(0,d.jsxs)(d.Fragment,{children:[g,!H&&(0,d.jsxs)(d.Fragment,{children:[" - ",(0,d.jsx)(Ke.r,{translatableSource:{id:"Get a Gold or Pro subscription to claim your role on the [GDevelop Discord](https://discord.gg/gdevelop)."}})]})]}):H?(0,d.jsx)(Ke.r,{translatableSource:{id:"No discord username defined. Add it to claim your role on the [GDevelop Discord](https://discord.gg/gdevelop)."}}):(0,d.jsx)(Ke.r,{translatableSource:{id:"No discord username defined. Add it and get a Gold, Pro or Education subscription to claim your role on the [GDevelop Discord](https://discord.gg/gdevelop)."}})})]}),(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(F.Z,{noMargin:!0,size:"body-small",children:(0,d.jsx)(b.Trans,{id:"GitHub username"})}),(0,d.jsx)(F.Z,{children:x||(0,d.jsx)(Ke.r,{translatableSource:{id:"[Star the GDevelop repository](https://github.com/4ian/GDevelop) and add your GitHub username here to get {0} free credits as a thank you!.",values:{0:R&&R.rewardValueInCredits||"-"}}})})]}),(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(F.Z,{noMargin:!0,size:"body-small",children:(0,d.jsx)(b.Trans,{id:"Bio"})}),(0,d.jsx)(F.Z,{children:t.description||(0,d.jsx)(b.Trans,{id:"No bio defined."})})]}),(0,d.jsx)(sc,{communityLinks:[{url:v,icon:oc.Ty.personalWebsiteLink.icon},{url:j,icon:oc.Ty.personalWebsite2Link.icon},{url:y?oc.Ty.twitterUsername.prefix+y:void 0,icon:oc.Ty.twitterUsername.icon},{url:Z?oc.Ty.facebookUsername.prefix+Z:void 0,icon:oc.Ty.facebookUsername.icon},{url:k?oc.Ty.youtubeUsername.prefix+k:void 0,icon:oc.Ty.youtubeUsername.icon},{url:w?oc.Ty.tiktokUsername.prefix+w:void 0,icon:oc.Ty.tiktokUsername.icon},{url:S?oc.Ty.instagramUsername.prefix+S:void 0,icon:oc.Ty.instagramUsername.icon},{url:P?oc.Ty.redditUsername.prefix+P:void 0,icon:oc.Ty.redditUsername.icon},{url:E?oc.Ty.snapchatUsername.prefix+E:void 0,icon:oc.Ty.snapchatUsername.icon},{url:I,icon:oc.Ty.discordServerLink.icon}]}),(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(F.Z,{noMargin:!0,size:"body-small",children:(0,d.jsx)(b.Trans,{id:"Donate link"})}),(0,d.jsx)(F.Z,{children:h||(0,d.jsx)(b.Trans,{id:"No link defined."})})]}),(0,d.jsxs)(C.ep,{justifyContent:"flex-start",noMargin:!0,children:[(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Edit my profile"}),primary:!0,onClick:p}),(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Change my email"}),onClick:u,disabled:t.isEmailAutogenerated}),(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Access public profile"}),onClick:function(){return Y.ZP.openExternalURL(Ge.Zw.getUserPublicProfileUrl(t.id,t.username))},leftIcon:(0,d.jsx)(ic.Z,{})})]})]})]})}}):(0,d.jsx)(Xe.Z,{})},cc=function(e){var t=e.onOpenEditProfileDialog,n=e.onOpenChangeEmailDialog,r=e.authenticatedUser,i=r.profile,o=r.firebaseUser,s=l.useCallback((function(){r.onOpenEmailVerificationDialog({sendEmailAutomatically:!0,showSendEmailButton:!1})}),[r]);return o&&i?(0,d.jsxs)(C.ak,{noMargin:!0,children:[o&&!o.emailVerified&&(0,d.jsx)(De.Z,{kind:"info",renderRightButton:function(){return(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Send it again"}),onClick:s,primary:!0})},children:(0,d.jsx)(b.Trans,{id:"You are missing out on asset store discounts and other benefits! Verify your email address. Didn't receive it?"})}),(0,d.jsx)(lc,{profile:r.profile?(0,a.Z)((0,a.Z)({},r.profile),{},{email:o.email}):null,subscription:r.subscription,achievements:r.achievements,onOpenChangeEmailDialog:n,onOpenEditProfileDialog:t})]}):(0,d.jsx)(Xe.Z,{})},uc=n(92078),dc=n(68680),pc={bulletIcon:{width:20,height:20,marginRight:10},planPricesPaper:{padding:10,display:"flex",flexDirection:"column",alignItems:"center"},bulletText:{flex:1}},fc=function(e){var t=l.useContext(f.Z),n=(0,w.U)().isMobile,r=(0,dc.sG)({subscriptionPlan:e.subscriptionPlanWithPricingSystems,logoSize:40});return(0,d.jsx)(b.I18n,{children:function(i){var o=i.i18n;return(0,d.jsx)(de.Z,{background:e.background,style:(0,a.Z)({paddingRight:n?8:32,paddingLeft:r?0:n?8:65,border:"1px solid ".concat(t.text.color.disabled),paddingTop:16,paddingBottom:16},e.isHighlighted?{borderLeftWidth:4,borderLeftColor:t.palette.secondary}:{}),children:(0,d.jsxs)(L.x1,{noMargin:!0,children:[(0,d.jsx)(L.sg,{noMargin:!0,children:r}),(0,d.jsxs)(L.sg,{noMargin:!0,expand:!0,children:[(0,d.jsxs)(L.x1,{noMargin:!0,justifyContent:"space-between",alignItems:"center",children:[(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)("span",{children:(0,d.jsx)("b",{children:(0,uc.a)(o,e.subscriptionPlanWithPricingSystems.nameByLocale)})})}),(0,d.jsx)(L.sg,{noMargin:!0,alignItems:"flex-end",children:(0,dc.H$)({pricingSystems:e.subscriptionPlanWithPricingSystems.pricingSystems,hidePrice:e.hidePrice})})]}),(0,d.jsx)(F.Z,{color:"secondary",noMargin:!0,children:(0,uc.a)(o,e.subscriptionPlanWithPricingSystems.descriptionByLocale)}),(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{noMargin:!0,children:e.subscriptionPlanWithPricingSystems.bulletPointsByLocale.map((function(n,r){return(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,d.jsxs)(L.x1,{noMargin:!0,alignItems:"center",children:[e.isHighlighted?(0,d.jsx)(Aa.Z,{style:(0,a.Z)((0,a.Z)({},pc.bulletIcon),{},{color:t.message.valid})}):(0,d.jsx)(Aa.Z,{style:pc.bulletIcon}),(0,d.jsx)(F.Z,{style:pc.bulletText,children:(0,uc.a)(o,n)})]})},r)}))})}),e.actions&&(0,d.jsx)(C.ep,{expand:!0,noMargin:!0,alignItems:"center",justifyContent:"flex-end",children:e.actions})]})]})})}})},hc=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"88",height:"64",viewBox:"0 0 88 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("path",{d:"M42.0525 36.9015C39.3747 41.0116 34.9532 41.2607 29.9713 40.3889C28.103 39.7869 23.8559 37.4869 21.8133 33.1028C19.2601 27.6226 26.2794 11.1901 31.6527 5.07927C38.0047 -2.14455 46.8047 -0.961339 50.9149 4.02062C55.025 9.00257 53.3242 15.1677 49.2763 21.5197C45.2285 27.8717 44.7303 32.7914 42.0525 36.9015Z",fill:"url(#paint0_linear_984_3445)"}),(0,d.jsx)("path",{d:"M33.2284 23.0176L32.2943 25.1349C32.0452 24.4374 31.9414 23.7441 31.9207 23.578C32.0203 23.4784 32.834 23.1629 33.2284 23.0176Z",fill:"#DB422A"}),(0,d.jsx)("path",{d:"M49.2336 11.2465C50.7282 12.6165 50.4791 15.7925 49.6072 18.0344C42.782 21.0734 40.0793 15.2735 39.5811 11.9938C44.1271 8.63094 47.4899 9.64809 49.2336 11.2465Z",fill:"#FEF9F5"}),(0,d.jsx)("mask",{id:"mask0_984_3445",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"41",y:"12",width:"8",height:"8",children:(0,d.jsx)("path",{d:"M47.8414 18.0294C46.6608 19.6881 44.4129 20.1139 42.8206 18.9805C41.2283 17.8472 41.061 15.6497 42.2416 13.991C43.4222 12.3324 45.7913 11.5 47.4379 12.4935C49.7105 13.8646 49.0219 16.3707 47.8414 18.0294Z",fill:"black"})}),(0,d.jsx)("g",{mask:"url(#mask0_984_3445)",children:(0,d.jsx)("path",{d:"M49.3581 10.1904C50.8527 11.5604 50.4791 15.7951 49.6072 18.037C42.782 21.076 40.0793 15.2761 39.5811 11.9963C44.9367 7.88623 47.8884 8.84314 49.3581 10.1904Z",fill:"black"})}),(0,d.jsx)("path",{d:"M20.1382 49.4634L34.5828 20.2962L53.9994 33.1823L20.1382 49.4634Z",fill:"#FFDAA4"}),(0,d.jsx)("path",{d:"M67.8152 26.5376L51.9401 56.3926L54.0002 33.1801L67.8152 26.5376Z",fill:"#FFA827"}),(0,d.jsx)("path",{d:"M20.1405 49.4659L54.0013 33.185L51.9416 56.3973L20.1405 49.4659Z",fill:"#FFBC57"}),(0,d.jsx)("path",{d:"M67.8141 26.5447L53.9994 33.187L34.5825 20.3013L67.8141 26.5447Z",fill:"#FFBC57"}),(0,d.jsx)("path",{d:"M33.1666 34.9699C28.9942 36.6513 25.7559 26.5006 25.5691 24.9437C26.8644 20.3603 30.2189 21.2903 31.7343 22.3282C32.2947 28.3065 37.339 33.2885 33.1666 34.9699Z",fill:"url(#paint1_linear_984_3445)"}),(0,d.jsx)("path",{d:"M27.8116 34.1009C26.1676 32.0085 25.3972 25.9222 25.6319 24.7598C26.1301 27.998 27.7888 31.2167 28.7361 32.6063L27.8116 34.1009Z",fill:"#DB422A"}),(0,d.jsx)("path",{d:"M53.7176 26.7483C51.6168 26.7483 50.3547 25.5651 50.3547 24.1951C50.3547 22.8249 52.5637 21.8613 53.7176 21.8908C55.475 21.9358 57.0181 23.0119 57.0181 24.1951C57.0181 25.3783 55.6481 26.7483 53.7176 26.7483Z",fill:"url(#paint2_linear_984_3445)"}),(0,d.jsxs)("defs",{children:[(0,d.jsxs)("linearGradient",{id:"paint0_linear_984_3445",x1:"49.7122",y1:"0.969171",x2:"25.7989",y2:"39.0189",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#FF7171"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#E85345"})]}),(0,d.jsxs)("linearGradient",{id:"paint1_linear_984_3445",x1:"31.4229",y1:"35.219",x2:"27.7487",y2:"21.5186",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#E04D40"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#F15F56"})]}),(0,d.jsxs)("linearGradient",{id:"paint2_linear_984_3445",x1:"53.6864",y1:"21.8901",x2:"53.6864",y2:"26.7483",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#FA6B68"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#F1463F"})]})]})]}))})),gc=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"137",height:"57",viewBox:"0 0 137 57",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("g",{filter:"url(#filter0_f_984_3528)",children:(0,d.jsx)("ellipse",{cx:"18.5199",cy:"1.07755",rx:"18.5199",ry:"1.07755",transform:"matrix(0.999991 -0.00412603 -0.0157148 0.999877 19.3994 43.4453)",fill:"black",fillOpacity:"0.3"})}),(0,d.jsx)("path",{d:"M87.3558 14.309C87.4065 14.3685 87.4997 14.3724 87.564 14.3177C87.6283 14.2629 87.6393 14.1703 87.5886 14.1108C87.5379 14.0512 87.4447 14.0473 87.3804 14.102C87.3161 14.1568 87.3051 14.2494 87.3558 14.309Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M89.7377 12.1167C89.8329 12.2286 90.008 12.2359 90.1288 12.1331C90.2495 12.0303 90.2702 11.8563 90.1751 11.7445C90.0799 11.6327 89.9048 11.6253 89.784 11.7281C89.6633 11.8309 89.6426 12.0049 89.7377 12.1167Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M89.207 13.3102C89.2774 13.393 89.407 13.3984 89.4964 13.3223C89.5858 13.2462 89.6011 13.1174 89.5307 13.0347C89.4602 12.9519 89.3306 12.9465 89.2412 13.0225C89.1518 13.0986 89.1365 13.2274 89.207 13.3102Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M89.1277 10.6343C89.1642 10.6771 89.2313 10.6799 89.2776 10.6405C89.3238 10.6011 89.3318 10.5345 89.2953 10.4916C89.2588 10.4488 89.1917 10.446 89.1455 10.4854C89.0992 10.5248 89.0913 10.5914 89.1277 10.6343Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M91.0385 9.45533C91.0688 9.49091 91.1245 9.49324 91.1629 9.46053C91.2013 9.42782 91.2079 9.37247 91.1776 9.33689C91.1474 9.30131 91.0917 9.29898 91.0532 9.33168C91.0148 9.36439 91.0082 9.41975 91.0385 9.45533Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M93.55 13.8343C93.6541 13.9565 93.8454 13.9645 93.9774 13.8522C94.1094 13.7398 94.1321 13.5496 94.028 13.4274C93.924 13.3051 93.7326 13.2971 93.6006 13.4095C93.4686 13.5219 93.4459 13.712 93.55 13.8343Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M92.393 13.995C92.4433 14.054 92.5358 14.0579 92.5996 14.0036C92.6633 13.9493 92.6743 13.8574 92.624 13.7984C92.5737 13.7393 92.4813 13.7354 92.4175 13.7897C92.3537 13.844 92.3428 13.9359 92.393 13.995Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M94.4815 13.5479C94.5162 13.5885 94.5798 13.5912 94.6237 13.5538C94.6676 13.5164 94.6752 13.4532 94.6406 13.4125C94.6059 13.3718 94.5423 13.3692 94.4984 13.4065C94.4545 13.4439 94.4469 13.5072 94.4815 13.5479Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M89.4894 16.4991C89.6279 16.6617 89.8825 16.6724 90.0582 16.5229C90.2338 16.3734 90.2639 16.1203 90.1255 15.9576C89.987 15.795 89.7324 15.7843 89.5567 15.9338C89.3811 16.0833 89.3509 16.3364 89.4894 16.4991Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M83.5136 22.9797C83.5995 23.0806 83.7575 23.0873 83.8665 22.9945C83.9755 22.9017 83.9942 22.7447 83.9083 22.6437C83.8223 22.5428 83.6643 22.5362 83.5553 22.6289C83.4463 22.7217 83.4276 22.8788 83.5136 22.9797Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M85.8147 22.0743C85.8524 22.1186 85.9218 22.1215 85.9696 22.0808C86.0174 22.0401 86.0257 21.9712 85.9879 21.9269C85.9502 21.8826 85.8809 21.8797 85.8331 21.9204C85.7852 21.9611 85.777 22.03 85.8147 22.0743Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M83.8239 19.3441C83.9197 19.4567 84.0959 19.464 84.2175 19.3606C84.339 19.2571 84.3599 19.082 84.2641 18.9694C84.1682 18.8569 83.992 18.8495 83.8705 18.953C83.749 19.0564 83.7281 19.2315 83.8239 19.3441Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M81.3424 23.5497C81.4491 23.6751 81.6454 23.6833 81.7808 23.568C81.9162 23.4528 81.9394 23.2577 81.8327 23.1323C81.7259 23.0069 81.5296 22.9987 81.3942 23.114C81.2589 23.2292 81.2356 23.4243 81.3424 23.5497Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M84.2286 18.1208C84.2668 18.1656 84.3369 18.1685 84.3852 18.1273C84.4336 18.0862 84.4419 18.0165 84.4037 17.9717C84.3656 17.9269 84.2955 17.924 84.2472 17.9652C84.1988 18.0063 84.1905 18.076 84.2286 18.1208Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M107.369 12.9029C107.505 13.0634 107.756 13.0739 107.93 12.9264C108.103 12.7789 108.133 12.5292 107.996 12.3687C107.86 12.2082 107.608 12.1977 107.435 12.3452C107.262 12.4927 107.232 12.7424 107.369 12.9029Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M105.25 22.0912C105.327 22.1818 105.469 22.1877 105.567 22.1045C105.664 22.0213 105.681 21.8804 105.604 21.7899C105.527 21.6994 105.385 21.6934 105.288 21.7766C105.19 21.8599 105.173 22.0007 105.25 22.0912Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M106.881 20.5604C106.921 20.6071 106.994 20.6102 107.045 20.5672C107.095 20.5243 107.104 20.4516 107.064 20.4049C107.024 20.3582 106.951 20.3551 106.901 20.3981C106.85 20.441 106.841 20.5137 106.881 20.5604Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M107.756 17.7313C107.802 17.786 107.888 17.7896 107.947 17.7393C108.006 17.6891 108.016 17.604 107.97 17.5492C107.923 17.4945 107.838 17.491 107.779 17.5412C107.719 17.5915 107.709 17.6766 107.756 17.7313Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M104.95 20.1488C105.005 20.2137 105.106 20.2179 105.176 20.1583C105.246 20.0987 105.258 19.9978 105.203 19.9329C105.148 19.868 105.046 19.8638 104.976 19.9234C104.906 19.983 104.894 20.0839 104.95 20.1488Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M102.212 21.6105C102.264 21.6708 102.358 21.6748 102.423 21.6193C102.488 21.5639 102.499 21.4702 102.448 21.4099C102.397 21.3496 102.302 21.3457 102.237 21.4011C102.172 21.4565 102.161 21.5503 102.212 21.6105Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M99.9335 6.99572C99.9626 7.02986 100.016 7.03209 100.053 7.00072C100.09 6.96934 100.096 6.91625 100.067 6.88212C100.038 6.84798 99.9845 6.84574 99.9477 6.87712C99.9108 6.90849 99.9045 6.96159 99.9335 6.99572Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M97.4855 10.3025C97.5696 10.4013 97.7242 10.4077 97.8308 10.3169C97.9375 10.2262 97.9558 10.0725 97.8717 9.97375C97.7876 9.87499 97.633 9.86851 97.5264 9.95929C97.4197 10.0501 97.4015 10.2037 97.4855 10.3025Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M95.171 10.2563C95.2481 10.3468 95.3898 10.3527 95.4876 10.2695C95.5853 10.1863 95.6021 10.0455 95.525 9.95494C95.448 9.86441 95.3063 9.85847 95.2085 9.94169C95.1107 10.0249 95.094 10.1657 95.171 10.2563Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M95.9303 8.65109C95.9602 8.68619 96.0151 8.68849 96.053 8.65623C96.0909 8.62397 96.0974 8.56936 96.0675 8.53426C96.0376 8.49916 95.9827 8.49686 95.9448 8.52912C95.9069 8.56138 95.9004 8.61598 95.9303 8.65109Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M94.055 7.91209C94.1151 7.98277 94.2258 7.98741 94.3021 7.92244C94.3784 7.85747 94.3915 7.7475 94.3314 7.67681C94.2712 7.60613 94.1605 7.60149 94.0842 7.66646C94.0079 7.73143 93.9948 7.8414 94.055 7.91209Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M92.8996 10.5758C93.0107 10.7063 93.215 10.7148 93.3558 10.5949C93.4967 10.475 93.5209 10.272 93.4098 10.1415C93.2988 10.011 93.0945 10.0025 92.9536 10.1224C92.8128 10.2423 92.7886 10.4453 92.8996 10.5758Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M105.556 13.1274C105.607 13.1879 105.702 13.1919 105.767 13.1363C105.833 13.0807 105.844 12.9865 105.792 12.926C105.741 12.8655 105.646 12.8615 105.581 12.9171C105.515 12.9727 105.504 13.0669 105.556 13.1274Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M103.411 7.37013C103.495 7.46913 103.65 7.47562 103.757 7.38462C103.864 7.29362 103.882 7.13959 103.798 7.04059C103.714 6.94158 103.559 6.9351 103.452 7.0261C103.345 7.1171 103.326 7.27113 103.411 7.37013Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M109.151 11.1533C109.214 11.2267 109.328 11.2315 109.408 11.1641C109.487 11.0966 109.5 10.9825 109.438 10.9092C109.376 10.8358 109.261 10.831 109.182 10.8984C109.102 10.9659 109.089 11.08 109.151 11.1533Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M102.944 11.5139C103.05 11.6378 103.244 11.646 103.378 11.532C103.512 11.4181 103.535 11.2253 103.429 11.1014C103.324 10.9774 103.13 10.9693 102.996 11.0832C102.862 11.1971 102.839 11.39 102.944 11.5139Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M101.293 16.4176C101.38 16.5208 101.542 16.5275 101.653 16.4327C101.764 16.338 101.784 16.1775 101.696 16.0744C101.608 15.9713 101.447 15.9645 101.335 16.0593C101.224 16.1541 101.205 16.3145 101.293 16.4176Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M101.866 17.7038C101.898 17.7416 101.958 17.7441 101.998 17.7094C102.039 17.6746 102.046 17.6159 102.014 17.5781C101.982 17.5404 101.923 17.5379 101.882 17.5726C101.841 17.6073 101.834 17.6661 101.866 17.7038Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M98.5813 13.6983C98.6309 13.7566 98.7223 13.7604 98.7853 13.7068C98.8483 13.6532 98.8591 13.5624 98.8094 13.5041C98.7597 13.4457 98.6684 13.4419 98.6054 13.4955C98.5424 13.5491 98.5316 13.6399 98.5813 13.6983Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M99.8385 11.8694C99.8943 11.935 99.997 11.9393 100.068 11.879C100.139 11.8187 100.151 11.7166 100.095 11.651C100.039 11.5854 99.9365 11.5811 99.8656 11.6414C99.7948 11.7017 99.7826 11.8038 99.8385 11.8694Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M104.833 14.0716C104.87 14.1151 104.938 14.118 104.985 14.078C105.032 14.0379 105.041 13.9701 105.003 13.9265C104.966 13.883 104.898 13.8801 104.851 13.9202C104.804 13.9602 104.796 14.028 104.833 14.0716Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M105.897 12.1445C105.942 12.1975 106.025 12.201 106.082 12.1523C106.139 12.1035 106.149 12.0211 106.104 11.9681C106.059 11.915 105.976 11.9116 105.919 11.9603C105.861 12.009 105.852 12.0915 105.897 12.1445Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M86.5626 11.374C86.6032 11.4217 86.6778 11.4248 86.7293 11.381C86.7808 11.3371 86.7896 11.2629 86.749 11.2153C86.7084 11.1676 86.6338 11.1644 86.5823 11.2083C86.5308 11.2521 86.522 11.3263 86.5626 11.374Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M101.536 9.01394C101.601 9.09019 101.72 9.09519 101.803 9.0251C101.885 8.95502 101.899 8.83639 101.834 8.76014C101.769 8.68388 101.65 8.67889 101.567 8.74897C101.485 8.81906 101.471 8.93769 101.536 9.01394Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M86.6169 12.2569C86.7057 12.3612 86.869 12.3681 86.9816 12.2722C87.0943 12.1763 87.1136 12.0139 87.0248 11.9096C86.936 11.8053 86.7727 11.7984 86.66 11.8943C86.5474 11.9902 86.528 12.1525 86.6169 12.2569Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M99.7205 33.3928C101.181 33.9238 101.081 35.7692 100.719 36.6073C100.358 37.4453 99.4728 38.419 96.9737 39.0668C95.9663 39.328 93.9286 39.4427 93.9286 39.4427C93.9286 39.4427 93.6444 38.094 92.9529 36.6358C92.1275 34.8954 91.3773 34.0671 91.3773 34.0671C91.3773 34.0671 93.2668 34.6254 95.0681 34.268C96.899 33.9048 98.6244 32.9944 99.7205 33.3928Z",fill:"url(#paint0_linear_984_3528)"}),(0,d.jsx)("path",{d:"M99.7205 33.3928C101.181 33.9238 101.081 35.7692 100.719 36.6073C100.358 37.4453 99.4728 38.419 96.9737 39.0668C95.9663 39.328 93.9286 39.4427 93.9286 39.4427C93.9286 39.4427 93.6444 38.094 92.9529 36.6358C92.1275 34.8954 91.3773 34.0671 91.3773 34.0671C91.3773 34.0671 93.2668 34.6254 95.0681 34.268C96.899 33.9048 98.6244 32.9944 99.7205 33.3928Z",fill:"url(#paint1_linear_984_3528)"}),(0,d.jsx)("path",{d:"M93.3449 34.3766C93.3449 34.3766 94.7524 35.9212 95.2058 36.7133C95.6593 37.5055 96.3265 39.1972 96.3265 39.1972C96.1397 39.2456 96.5646 39.1586 96.3265 39.1972C95.2806 39.3666 93.9286 39.4427 93.9286 39.4427C93.9286 39.4427 93.6444 38.094 92.9529 36.6358C92.1275 34.8954 91.3773 34.0671 91.3773 34.0671C91.3773 34.0671 92.2347 34.3204 93.3449 34.3766Z",fill:"#007156"}),(0,d.jsx)("path",{d:"M93.3449 34.3766C93.3449 34.3766 94.7524 35.9212 95.2058 36.7133C95.6593 37.5055 96.3265 39.1972 96.3265 39.1972C96.1397 39.2456 96.5646 39.1586 96.3265 39.1972C95.2806 39.3666 93.9286 39.4427 93.9286 39.4427C93.9286 39.4427 93.6444 38.094 92.9529 36.6358C92.1275 34.8954 91.3773 34.0671 91.3773 34.0671C91.3773 34.0671 92.2347 34.3204 93.3449 34.3766Z",fill:"#007156"}),(0,d.jsx)("path",{d:"M65.8623 53.2486L66.7282 44.8782C67.3784 45.0175 67.8056 44.6618 68.7487 44.8782C69.7593 45.11 71.0793 45.477 71.3464 45.7441C71.9237 46.3214 73.6555 44.5895 74.2328 43.7236L80.0055 45.1668C80.0055 45.4555 78.5623 48.6304 75.9646 50.6509C74.3482 51.5745 71.635 51.0357 70.4805 50.6509C69.7878 52.0364 67.1131 52.96 65.8623 53.2486Z",fill:"url(#paint2_linear_984_3528)"}),(0,d.jsx)("path",{d:"M74.233 43.7236L80.0057 45.1668C80.0057 45.3451 79.455 46.6247 78.4218 48.0532C78.4218 48.0532 76.619 47.3009 75.6762 46.61C74.7333 45.9191 73.593 44.5147 73.593 44.5147C73.857 44.2297 74.0836 43.9477 74.233 43.7236Z",fill:"#007156"}),(0,d.jsx)("circle",{cx:"82.0263",cy:"34.2011",r:"13.2773",fill:"url(#paint3_linear_984_3528)"}),(0,d.jsx)("path",{d:"M71.6855 42.5896L72.5006 43.4555C72.5006 43.4555 72.6906 42.0193 73.3665 41.435C73.3665 41.435 73.8506 40.7952 74.2324 40.2602C75.1308 39.0013 76.737 38.0537 76.737 38.0537C75.3869 38.817 73.9132 38.3727 72.5006 39.9716C71.9054 40.6452 71.6855 41.7237 71.6855 42.5896Z",fill:"#007156"}),(0,d.jsx)("path",{d:"M70.72 45.4137C70.1859 47.0297 68.6924 47.1665 67.5337 46.5822C66.375 45.998 66.2304 44.5373 66.6647 41.9081C67.099 39.2789 69.4648 36.3575 70.1407 35.7733C72.1684 34.0205 73.6398 34.0205 74.7754 33.7283C74.7754 33.7283 76.2236 33.2504 77.3823 34.3126C78.5411 35.3748 77.672 37.2339 77.672 37.2339C76.5134 38.6946 74.8461 38.4003 73.0374 40.4474C71.596 42.0788 71.2994 43.6609 70.72 45.4137Z",fill:"url(#paint4_linear_984_3528)"}),(0,d.jsx)("rect",{x:"82.6035",y:"33.9419",width:"8.37459",height:"8.64129",rx:"2",transform:"rotate(-46.6569 82.6035 33.9419)",fill:"black"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M84.0137 32.4482L85.7199 30.6403C85.91 30.6023 86.1098 30.582 86.3159 30.582C87.5912 30.582 88.625 31.3574 88.625 32.3138C88.625 33.2703 87.5912 34.0457 86.3159 34.0457C85.1009 34.0457 84.1051 33.3418 84.0137 32.4482Z",fill:"white"}),(0,d.jsx)("path",{d:"M95.3029 54.9865C93.8597 55.2751 88.9529 56.141 86.3552 56.7183C86.2182 55.8961 85.6524 53.0323 84.3347 50.3683L81.4823 46.0896C81.233 45.7397 81.0209 45.4283 80.8711 45.1729H88.3756C90.1075 47.4819 91.1658 49.31 91.5506 51.2342C92.7052 51.4651 94.8218 54.1206 95.3029 54.9865Z",fill:"url(#paint5_linear_984_3528)"}),(0,d.jsx)("path",{d:"M105.477 50.8936L93.8256 24.5868L111.777 25.3247L105.477 50.8936Z",fill:"#FFDE95"}),(0,d.jsx)("path",{d:"M116.856 5.5443L128.165 33.2119L111.777 25.3243L116.856 5.5443Z",fill:"#FFB430"}),(0,d.jsx)("path",{d:"M105.475 50.8999L111.777 25.3246L128.165 33.2111L105.475 50.8999Z",fill:"#FFC557"}),(0,d.jsx)("path",{d:"M116.737 5.70845L111.778 25.3248L93.705 24.7582L116.737 5.70845Z",fill:"#FFC557"}),(0,d.jsx)("path",{d:"M47.7695 28.9274L50.8029 25.7037C51.4096 24.8715 52.3884 24.529 53.1426 24.8131C54.2185 25.2161 54.2893 26.6869 54.2933 26.8159C54.3277 27.8233 53.7311 28.5506 52.6614 29.82C51.9366 30.6754 51.1277 31.4563 50.2468 32.1512",fill:"url(#paint6_linear_984_3528)"}),(0,d.jsx)("path",{opacity:"0.69",d:"M49.8851 26.898C49.5468 28.835 49.2097 30.7726 48.874 32.7108C50.0496 32.277 51.1013 31.5639 51.9377 30.6335C51.6989 29.6502 51.5633 28.6447 51.5333 27.6334C51.5101 26.7306 51.5697 25.8276 51.7112 24.9355C51.4516 25.0642 51.2073 25.2216 50.9832 25.405C50.5015 25.807 50.1247 26.3193 49.8851 26.898Z",fill:"#C52600",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M38.9571 35.3761C38.6349 36.5205 38.3141 37.6623 37.9945 38.8013C37.6674 39.2633 37.213 39.6209 36.6862 39.8309C35.9925 40.0908 35.3879 39.9699 34.1381 39.6294C30.2696 38.5616 29.7963 37.9914 29.5941 37.7093C29.2205 37.2167 29.0265 36.6119 29.0441 35.9947C29.0441 35.7932 29.0987 35.0477 29.6629 34.554C30.2837 34.012 31.311 33.9798 32.2109 34.4855L36.0653 35.9261",fill:"url(#paint7_linear_984_3528)"}),(0,d.jsx)("path",{opacity:"0.69",d:"M33.4844 34.9384C33.63 35.239 33.8113 35.5211 34.0243 35.7786C35.1507 37.1406 36.5501 37.0298 37.0577 38.0614C37.2094 38.3637 37.3287 38.8553 37.0941 39.6431C37.2878 39.5213 37.4681 39.3795 37.632 39.22C37.7613 39.0954 37.8803 38.9606 37.9879 38.817L38.5157 36.9472C38.4388 36.3734 38.1996 35.8332 37.8261 35.3897C36.8818 34.2816 35.4743 34.3158 35.268 34.3259C34.627 34.3562 34.008 34.5688 33.4844 34.9384Z",fill:"#C52600",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M50.316 7.74225C49.3938 6.27439 48.1492 5.03431 46.6759 4.11552C44.3807 2.77766 42.2169 2.73535 41.0217 2.73535C39.3432 2.73535 36.7568 3.60778 34.6213 5.20556C32.1946 7.01892 31.869 10.4442 31.7194 11.2743C31.3331 18.0422 30.9448 23.1982 30.5586 29.966C30.8619 31.1649 31.6648 33.5424 33.863 35.3155C35.5192 36.6513 37.2462 37.0724 38.8195 37.4431C40.4344 37.8706 42.1129 38.0071 43.776 37.8461C45.4585 37.6668 48.4778 37.3444 50.045 35.0253C50.5472 34.2647 50.8548 33.393 50.9409 32.4866L51.9722 16.4383C52.1643 15.2476 52.6335 11.377 50.316 7.74225Z",fill:"url(#paint8_linear_984_3528)"}),(0,d.jsx)("path",{opacity:"0.6",d:"M43.9353 32.2241C45.0826 31.9349 46.2875 31.9634 47.4197 32.3067C48.2637 32.523 49.0283 32.9745 49.6239 33.6083C49.8918 33.9098 50.1133 34.2493 50.2812 34.6157C50.1275 34.8595 49.8929 35.2202 49.5855 35.6433C48.8797 36.6124 48.4166 37.0537 48.1942 37.3378C46.8191 39.1008 48.9303 42.2721 48.0405 42.8625C47.5087 43.2151 46.0183 42.524 45.63 41.4904C45.2073 40.3802 46.2367 39.3708 45.6987 37.7871C45.6027 37.4958 45.4666 37.2191 45.2943 36.965L41.9131 36.0785",fill:"#C52600",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M44.0507 31.8848C45.1379 32.0204 46.2026 32.2975 47.2175 32.7088C48.2125 33.1118 48.8353 33.3737 49.4218 34.0104C50.0135 34.6884 50.3956 35.5225 50.5219 36.4121C50.6574 37.1536 50.5219 37.2564 50.2469 39.7044C50.0446 41.6044 50.0689 42.0336 49.628 42.5252C49.1534 43 48.5109 43.2705 47.8384 43.2787C46.3965 43.2989 45.5512 42.09 45.4379 41.8824C45.3856 41.7836 45.3436 41.6796 45.3126 41.5722C45.2686 41.4149 45.2515 41.2515 45.262 41.0886C45.3874 39.916 45.4642 39.0133 45.5087 38.562C45.5198 38.4424 45.5157 38.3219 45.4966 38.2033C45.4463 37.8955 45.3055 37.6094 45.0921 37.3813L41.7109 36.4806",fill:"url(#paint9_linear_984_3528)"}),(0,d.jsx)("path",{opacity:"0.69",d:"M48.2006 20.0984C48.1501 20.9688 48.0773 21.6599 48.0388 22.0246C47.7861 22.0991 47.5697 22.1495 47.4059 22.1817C47.0064 22.2636 46.6003 22.3088 46.1925 22.3167C46.0132 22.3167 45.8272 22.3127 45.6344 22.3046C43.8447 22.1918 42.601 21.3959 41.5717 20.727C40.5297 20.056 39.6002 19.2258 38.8174 18.2669C39.3396 17.0709 40.036 15.9581 40.8841 14.9645C41.968 13.7032 43.9296 11.4124 46.3644 11.3177C46.5335 11.301 46.7039 11.3051 46.872 11.3298C48.692 11.8818 48.326 18.0795 48.2006 20.0984Z",fill:"#C52600",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M53.4735 16.7595C52.9096 18.3734 51.8343 19.7608 50.4097 20.7126C50.2884 20.7912 50.163 20.8678 50.0316 20.9423C49.3404 21.3396 48.5892 21.6227 47.8071 21.7805C47.2226 21.8989 46.6249 21.9402 46.0296 21.9034C44.2399 21.7906 42.9962 20.9947 41.9668 20.3258C40.9285 19.6539 40.0024 18.8238 39.2227 17.8656C39.7449 16.6696 40.4413 15.5569 41.2894 14.5633C42.3733 13.302 44.3349 11.0111 46.7697 10.9164C46.939 10.9094 47.1085 10.9135 47.2773 10.9285C49.0649 11.0877 50.3329 12.4135 51.34 13.4672C51.3622 13.4914 51.3865 13.5156 51.4067 13.5398C52.2853 14.4797 52.9856 15.5706 53.4735 16.7595Z",fill:"white",stroke:"#FFFEF4",strokeMiterlimit:"10"}),(0,d.jsx)("path",{d:"M51.6727 15.9374C51.6727 17.8878 51.1752 19.6206 50.4088 20.7126C50.2874 20.7912 50.1621 20.8678 50.0306 20.9423C49.3395 21.3396 48.5882 21.6227 47.8061 21.7805C46.3784 21.1982 45.3066 18.8025 45.3066 15.9374C45.3066 13.8339 45.885 11.9823 46.7586 10.9164C46.9279 10.9094 47.0975 10.9135 47.2662 10.9285C49.0539 11.0877 50.3218 12.4135 51.3289 13.4672C51.3512 13.4914 51.3754 13.5156 51.3956 13.5398C51.5793 14.3259 51.6722 15.1303 51.6727 15.9374Z",fill:"black",stroke:"black",strokeMiterlimit:"10"}),(0,d.jsx)("path",{d:"M13.1038 36.4634L25.5948 23.0554L31.2161 33.5257L13.1038 36.4634Z",fill:"#FFDE95"}),(0,d.jsx)("path",{d:"M42.5195 31.7737L29.146 45.3223L31.2192 33.5225L42.5195 31.7737Z",fill:"#FFB430"}),(0,d.jsx)("path",{d:"M13.1043 36.4613L31.2164 33.5236L29.1435 45.3234L13.1043 36.4613Z",fill:"#FFC557"}),(0,d.jsx)("path",{d:"M42.3879 31.7481L31.0877 33.4968L25.4662 23.0267L42.3879 31.7481Z",fill:"#FFC557"}),(0,d.jsx)("path",{opacity:"0.69",d:"M35.2117 22.7884C33.3846 22.3322 31.469 22.3648 29.6586 22.8831C29.254 23.0723 28.9005 23.3548 28.6273 23.7072C28.3371 24.0883 28.1473 24.5358 28.0752 25.0088C27.9175 26.4192 29.3856 27.068 30.3523 29.4415C30.5151 29.8346 30.6502 30.2385 30.7567 30.6504L30.9589 31.1742C31.303 31.0596 31.6173 30.8703 31.8791 30.6201C32.0715 30.4311 32.2326 30.2128 32.3563 29.9734C32.8356 29.0546 32.3968 28.6315 32.7951 28.017C32.9974 27.7026 33.4018 27.5012 34.1885 27.1183C34.5427 26.9479 34.9059 26.7966 35.2764 26.665L35.2117 22.7884Z",fill:"#C52600",fillOpacity:"0.7"}),(0,d.jsx)("path",{d:"M35.3773 22.2774C34.3036 21.9722 33.1887 21.8363 32.0729 21.8744C31.198 21.9015 30.3299 22.0369 29.4885 22.2774C29.467 22.283 29.446 22.2904 29.4258 22.2996C29.0131 22.4979 28.6557 22.7941 28.3849 23.1623C28.1141 23.5305 27.9382 23.9594 27.8727 24.4111C27.6416 25.5632 27.5952 26.7444 27.7352 27.9109C27.8889 29.1561 28.176 29.6417 28.4935 29.9681C28.842 30.3338 29.302 30.5746 29.8019 30.6531C29.8585 30.6531 31.0153 30.8103 31.6604 30.0366C31.9495 29.686 31.9981 29.3112 32.0648 28.733C32.1259 28.2554 32.1259 27.772 32.0648 27.2944C32.0578 27.2416 32.0617 27.1878 32.0764 27.1366C32.091 27.0853 32.1161 27.0376 32.1501 26.9965C32.184 26.9553 32.2261 26.9215 32.2737 26.8972C32.3213 26.8729 32.3734 26.8586 32.4268 26.8552L35.4379 26.6758",fill:"url(#paint10_linear_984_3528)"}),(0,d.jsx)("g",{opacity:"0.2",filter:"url(#filter1_f_984_3528)",children:(0,d.jsx)("path",{d:"M101.768 46.8082L95.831 40.2742C94.1302 38.4023 93.4148 35.8364 93.9016 33.3546L96.9985 17.5652C97.4749 15.1363 99.0488 13.0648 101.261 11.9547L109.538 7.80171C112.745 6.19213 116.633 6.91581 119.046 9.57194L124.901 16.0152C126.602 17.8871 127.318 20.4532 126.831 22.9352L123.725 38.768C123.254 41.1721 121.707 43.2275 119.527 44.3459L111.341 48.5461C108.124 50.1968 104.2 49.4843 101.768 46.8082Z",fill:"#F6F95C"})}),(0,d.jsx)("g",{opacity:"0.2",filter:"url(#filter2_f_984_3528)",children:(0,d.jsx)("path",{d:"M14.3837 30.9817L15.8086 28.1482C16.9448 25.8886 19.0827 24.2995 21.5738 23.8626L30.3653 22.3207C32.8032 21.8932 35.3018 22.6182 37.1322 24.2843L39.7355 26.6538C42.3896 29.0697 43.1101 32.9574 41.4978 36.1639L40.1039 38.936C38.9677 41.1957 36.8298 42.785 34.3385 43.2219L25.5033 44.7713C23.0903 45.1945 20.6164 44.4887 18.7899 42.856L16.1993 40.5403C13.5035 38.1305 12.7592 34.2121 14.3837 30.9817Z",fill:"#F6F95C"})}),(0,d.jsx)("path",{d:"M99.2476 20.9148C99.3298 20.9453 99.4231 20.898 99.456 20.8092C99.4889 20.7204 99.4489 20.6237 99.3667 20.5932C99.2844 20.5628 99.1911 20.6101 99.1582 20.6989C99.1253 20.7877 99.1653 20.8843 99.2476 20.9148Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M100.376 17.4643C100.531 17.5215 100.706 17.4327 100.768 17.266C100.83 17.0992 100.754 16.9176 100.6 16.8604C100.446 16.8032 100.27 16.892 100.208 17.0588C100.147 17.2256 100.222 17.4071 100.376 17.4643Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M100.51 18.9212C100.624 18.9635 100.754 18.8978 100.8 18.7743C100.846 18.6509 100.79 18.5165 100.676 18.4741C100.561 18.4318 100.432 18.4975 100.386 18.621C100.34 18.7444 100.396 18.8788 100.51 18.9212Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M98.9667 16.3497C99.0259 16.3716 99.0931 16.3376 99.1167 16.2737C99.1404 16.2098 99.1116 16.1402 99.0524 16.1183C98.9933 16.0964 98.9261 16.1304 98.9025 16.1943C98.8788 16.2582 98.9076 16.3277 98.9667 16.3497Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M100.189 14.1489C100.238 14.1671 100.294 14.1389 100.313 14.0858C100.333 14.0328 100.309 13.975 100.26 13.9568C100.211 13.9386 100.155 13.9668 100.135 14.0199C100.116 14.073 100.14 14.1307 100.189 14.1489Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M105.046 17.0536C105.215 17.1161 105.406 17.0191 105.474 16.8368C105.541 16.6545 105.459 16.456 105.29 16.3935C105.121 16.331 104.93 16.428 104.862 16.6103C104.795 16.7926 104.877 16.9911 105.046 17.0536Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M104.002 17.8453C104.084 17.8756 104.177 17.8286 104.209 17.7406C104.242 17.6525 104.202 17.5566 104.121 17.5264C104.039 17.4962 103.946 17.5431 103.914 17.6312C103.881 17.7192 103.921 17.8151 104.002 17.8453Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M105.801 16.2622C105.857 16.283 105.921 16.2507 105.943 16.19C105.965 16.1294 105.938 16.0634 105.882 16.0425C105.826 16.0217 105.762 16.054 105.74 16.1147C105.717 16.1753 105.744 16.2414 105.801 16.2622Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M102.536 21.8885C102.761 21.9717 103.016 21.8425 103.106 21.5999C103.196 21.3573 103.086 21.0933 102.862 21.01C102.637 20.9268 102.382 21.056 102.292 21.2986C102.203 21.5411 102.312 21.8052 102.536 21.8885Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M100.244 31.5048C100.383 31.5564 100.541 31.4763 100.597 31.3257C100.653 31.1752 100.585 31.0113 100.446 30.9597C100.306 30.9081 100.148 30.9882 100.092 31.1388C100.036 31.2893 100.104 31.4532 100.244 31.5048Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M101.999 29.3584C102.06 29.381 102.129 29.3458 102.154 29.2798C102.178 29.2137 102.148 29.1418 102.087 29.1192C102.026 29.0965 101.957 29.1317 101.932 29.1977C101.908 29.2638 101.938 29.3357 101.999 29.3584Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M98.5536 27.7775C98.7091 27.8351 98.8855 27.7457 98.9476 27.5779C99.0098 27.41 98.9342 27.2273 98.7788 27.1697C98.6233 27.1121 98.4469 27.2015 98.3847 27.3693C98.3226 27.5372 98.3982 27.7199 98.5536 27.7775Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M98.4328 33.2542C98.606 33.3183 98.8025 33.2188 98.8718 33.0318C98.9411 32.8448 98.8568 32.6412 98.6837 32.5771C98.5105 32.5129 98.314 32.6125 98.2447 32.7995C98.1755 32.9865 98.2597 33.19 98.4328 33.2542Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M98.2792 26.3595C98.3411 26.3824 98.4113 26.3468 98.436 26.28C98.4607 26.2133 98.4307 26.1406 98.3688 26.1177C98.307 26.0947 98.2368 26.1303 98.212 26.1971C98.1873 26.2639 98.2174 26.3366 98.2792 26.3595Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M118.054 8.56803C118.275 8.65012 118.527 8.52267 118.615 8.28335C118.704 8.04403 118.596 7.78348 118.375 7.70138C118.153 7.61929 117.902 7.74674 117.813 7.98606C117.724 8.22537 117.832 8.48593 118.054 8.56803Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M121.021 18.7182C121.146 18.7646 121.288 18.6927 121.338 18.5577C121.388 18.4227 121.327 18.2757 121.202 18.2294C121.077 18.1831 120.935 18.2549 120.885 18.3899C120.835 18.5249 120.896 18.6719 121.021 18.7182Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M121.774 16.3239C121.839 16.3478 121.912 16.3107 121.938 16.241C121.964 16.1713 121.932 16.0955 121.868 16.0716C121.803 16.0477 121.73 16.0848 121.704 16.1545C121.678 16.2241 121.71 16.3 121.774 16.3239Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M121.081 13.0785C121.157 13.1065 121.242 13.063 121.273 12.9815C121.303 12.8999 121.266 12.8111 121.191 12.7831C121.115 12.7551 121.029 12.7986 120.999 12.8801C120.969 12.9617 121.006 13.0505 121.081 13.0785Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M119.661 16.9841C119.751 17.0173 119.853 16.9658 119.888 16.8691C119.924 16.7723 119.881 16.667 119.791 16.6338C119.702 16.6006 119.6 16.6522 119.564 16.7489C119.528 16.8456 119.572 16.9509 119.661 16.9841Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M117.784 19.9116C117.867 19.9424 117.961 19.8945 117.995 19.8047C118.028 19.7148 117.988 19.6169 117.904 19.5861C117.821 19.5553 117.727 19.6031 117.693 19.693C117.66 19.7829 117.701 19.8807 117.784 19.9116Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M107.541 6.86534C107.589 6.8828 107.642 6.85569 107.661 6.8048C107.68 6.7539 107.657 6.69849 107.61 6.68103C107.563 6.66357 107.509 6.69067 107.49 6.74157C107.471 6.79247 107.494 6.84788 107.541 6.86534Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M106.962 11.4451C107.098 11.4956 107.253 11.4172 107.307 11.2699C107.362 11.1227 107.295 10.9623 107.159 10.9118C107.023 10.8613 106.868 10.9397 106.813 11.087C106.759 11.2342 106.825 11.3946 106.962 11.4451Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M104.67 12.6635C104.795 12.7099 104.937 12.638 104.987 12.503C105.037 12.368 104.976 12.221 104.851 12.1747C104.726 12.1284 104.584 12.2003 104.534 12.3353C104.484 12.4703 104.545 12.6172 104.67 12.6635Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M104.531 10.6761C104.58 10.6941 104.635 10.6662 104.654 10.6139C104.673 10.5616 104.65 10.5046 104.601 10.4866C104.553 10.4687 104.498 10.4965 104.479 10.5489C104.459 10.6012 104.483 10.6582 104.531 10.6761Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M102.294 10.9833C102.392 11.0195 102.502 10.9633 102.541 10.8579C102.58 10.7525 102.533 10.6378 102.435 10.6016C102.338 10.5654 102.227 10.6216 102.188 10.727C102.149 10.8324 102.196 10.9471 102.294 10.9833Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M102.623 14.2219C102.803 14.2886 103.008 14.185 103.08 13.9905C103.152 13.7959 103.064 13.5841 102.884 13.5173C102.704 13.4506 102.499 13.5542 102.427 13.7488C102.355 13.9433 102.443 14.1551 102.623 14.2219Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M116.404 9.78275C116.488 9.8137 116.583 9.76565 116.616 9.67541C116.65 9.58517 116.609 9.48692 116.525 9.45596C116.442 9.425 116.347 9.47306 116.313 9.5633C116.28 9.65354 116.321 9.75179 116.404 9.78275Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M111.15 5.3275C111.287 5.37814 111.442 5.29952 111.497 5.15188C111.551 5.00425 111.485 4.84351 111.348 4.79287C111.211 4.74223 111.056 4.82085 111.002 4.96849C110.947 5.11612 111.013 5.27685 111.15 5.3275Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M118.84 5.88002C118.942 5.91754 119.057 5.85929 119.097 5.74992C119.138 5.64055 119.088 5.52147 118.987 5.48395C118.886 5.44643 118.771 5.50468 118.73 5.61405C118.69 5.72342 118.739 5.8425 118.84 5.88002Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M112.964 9.63366C113.135 9.69706 113.329 9.59864 113.398 9.41383C113.466 9.22901 113.383 9.0278 113.212 8.9644C113.041 8.901 112.847 8.99943 112.778 9.18424C112.71 9.36905 112.793 9.57026 112.964 9.63366Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M114.038 15.3369C114.18 15.3897 114.342 15.3078 114.399 15.154C114.456 15.0002 114.386 14.8328 114.244 14.7801C114.102 14.7273 113.94 14.8092 113.883 14.963C113.826 15.1168 113.895 15.2842 114.038 15.3369Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M115.304 16.2809C115.356 16.3002 115.415 16.2702 115.436 16.2139C115.457 16.1576 115.431 16.0963 115.379 16.077C115.327 16.0576 115.268 16.0876 115.247 16.144C115.226 16.2003 115.252 16.2616 115.304 16.2809Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M109.895 14.165C109.976 14.1948 110.067 14.1485 110.099 14.0615C110.132 13.9745 110.092 13.8798 110.012 13.8499C109.931 13.8201 109.84 13.8664 109.808 13.9534C109.775 14.0404 109.815 14.1351 109.895 14.165Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M110.122 11.6845C110.212 11.7181 110.315 11.666 110.351 11.5682C110.388 11.4704 110.343 11.3638 110.253 11.3303C110.162 11.2967 110.059 11.3488 110.023 11.4467C109.987 11.5445 110.031 11.651 110.122 11.6845Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M116.214 11.1008C116.274 11.1231 116.342 11.0885 116.366 11.0235C116.391 10.9586 116.361 10.8878 116.301 10.8655C116.241 10.8433 116.173 10.8779 116.149 10.9428C116.124 11.0078 116.154 11.0785 116.214 11.1008Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M116.199 8.63517C116.273 8.66229 116.356 8.62019 116.385 8.54114C116.414 8.46209 116.379 8.37602 116.305 8.3489C116.232 8.32179 116.149 8.36389 116.12 8.44294C116.091 8.52199 116.126 8.60805 116.199 8.63517Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M96.8635 18.4794C96.9293 18.5038 97.004 18.4659 97.0304 18.3948C97.0567 18.3237 97.0247 18.2463 96.9588 18.2219C96.893 18.1975 96.8182 18.2354 96.7919 18.3065C96.7656 18.3776 96.7976 18.455 96.8635 18.4794Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M110.214 7.95699C110.319 7.996 110.438 7.93544 110.481 7.82174C110.523 7.70804 110.472 7.58424 110.366 7.54523C110.261 7.50623 110.141 7.56678 110.099 7.68049C110.057 7.79419 110.108 7.91798 110.214 7.95699Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M97.4011 19.3143C97.5451 19.3677 97.7087 19.2848 97.7663 19.1293C97.8239 18.9737 97.7538 18.8043 97.6098 18.7509C97.4657 18.6976 97.3022 18.7804 97.2445 18.936C97.1869 19.0916 97.257 19.2609 97.4011 19.3143Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M27.7765 31.3968C27.7461 31.4488 27.6759 31.4643 27.6197 31.4315C27.5635 31.3986 27.5427 31.3298 27.5731 31.2778C27.6035 31.2258 27.6737 31.2102 27.7299 31.2431C27.7861 31.2759 27.8069 31.3447 27.7765 31.3968Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M25.67 30.0624C25.6128 30.1602 25.481 30.1893 25.3755 30.1276C25.27 30.0659 25.2308 29.9367 25.2879 29.839C25.345 29.7413 25.4769 29.7121 25.5824 29.7738C25.6879 29.8355 25.7271 29.9647 25.67 30.0624Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M26.2355 30.8891C26.1932 30.9614 26.0956 30.9831 26.0175 30.9374C25.9394 30.8917 25.9104 30.7961 25.9527 30.7237C25.995 30.6514 26.0926 30.6298 26.1707 30.6755C26.2488 30.7211 26.2778 30.8168 26.2355 30.8891Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M25.9349 28.8526C25.913 28.89 25.8625 28.9012 25.822 28.8776C25.7816 28.8539 25.7666 28.8044 25.7885 28.767C25.8104 28.7296 25.8609 28.7184 25.9013 28.742C25.9417 28.7657 25.9568 28.8152 25.9349 28.8526Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M24.3262 28.2123C24.308 28.2434 24.2661 28.2527 24.2325 28.2331C24.1989 28.2134 24.1865 28.1723 24.2046 28.1412C24.2228 28.1102 24.2648 28.1009 24.2983 28.1205C24.3319 28.1401 24.3444 28.1813 24.3262 28.2123Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M23.0086 31.878C22.9462 31.9848 22.8021 32.0167 22.6867 31.9493C22.5714 31.8819 22.5286 31.7406 22.591 31.6338C22.6535 31.527 22.7976 31.4951 22.9129 31.5625C23.0282 31.63 23.0711 31.7712 23.0086 31.878Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M23.9111 31.8394C23.8809 31.891 23.8112 31.9064 23.7555 31.8738C23.6998 31.8412 23.6791 31.773 23.7093 31.7214C23.7395 31.6698 23.8091 31.6543 23.8648 31.6869C23.9205 31.7195 23.9412 31.7878 23.9111 31.8394Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M22.2637 31.7872C22.2429 31.8227 22.1949 31.8333 22.1566 31.8109C22.1182 31.7885 22.104 31.7415 22.1247 31.7059C22.1455 31.6704 22.1935 31.6598 22.2318 31.6822C22.2702 31.7047 22.2844 31.7516 22.2637 31.7872Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M26.4502 33.3518C26.3671 33.494 26.1753 33.5364 26.0218 33.4467C25.8684 33.3569 25.8113 33.169 25.8944 33.0269C25.9775 32.8847 26.1693 32.8423 26.3228 32.932C26.4762 33.0218 26.5333 33.2097 26.4502 33.3518Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M31.8599 37.4629C31.8083 37.5511 31.6893 37.5775 31.5941 37.5218C31.4988 37.4661 31.4634 37.3494 31.515 37.2612C31.5666 37.1731 31.6856 37.1467 31.7808 37.2024C31.8761 37.2581 31.9114 37.3747 31.8599 37.4629Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M29.9922 37.0853C29.9696 37.124 29.9173 37.1356 29.8756 37.1112C29.8338 37.0867 29.8182 37.0355 29.8409 36.9968C29.8635 36.9581 29.9157 36.9466 29.9575 36.971C29.9993 36.9954 30.0148 37.0466 29.9922 37.0853Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M31.1339 34.7447C31.0764 34.8431 30.9437 34.8725 30.8375 34.8104C30.7313 34.7483 30.6919 34.6182 30.7494 34.5199C30.8069 34.4215 30.9396 34.3921 31.0458 34.4542C31.152 34.5163 31.1914 34.6464 31.1339 34.7447Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M33.5848 37.6051C33.5208 37.7147 33.3729 37.7474 33.2547 37.6782C33.1364 37.6091 33.0924 37.4642 33.1565 37.3546C33.2205 37.2451 33.3684 37.2123 33.4866 37.2815C33.6049 37.3507 33.6489 37.4956 33.5848 37.6051Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M30.6631 33.8693C30.6402 33.9084 30.5874 33.9201 30.5452 33.8954C30.5029 33.8707 30.4872 33.819 30.5101 33.7798C30.533 33.7407 30.5858 33.729 30.628 33.7537C30.6703 33.7784 30.686 33.8302 30.6631 33.8693Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M12.3986 33.0374C12.3166 33.1776 12.1274 33.2195 11.976 33.131C11.8246 33.0424 11.7683 32.857 11.8503 32.7168C11.9323 32.5766 12.1215 32.5347 12.2729 32.6232C12.4243 32.7117 12.4806 32.8972 12.3986 33.0374Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M15.2451 39.7269C15.1988 39.806 15.0921 39.8297 15.0067 39.7797C14.9213 39.7298 14.8895 39.6252 14.9358 39.5461C14.982 39.467 15.0888 39.4433 15.1742 39.4933C15.2596 39.5432 15.2913 39.6478 15.2451 39.7269Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M13.8029 38.7766C13.779 38.8174 13.724 38.8296 13.6799 38.8039C13.6358 38.7781 13.6194 38.7241 13.6433 38.6833C13.6672 38.6425 13.7223 38.6303 13.7663 38.656C13.8104 38.6818 13.8268 38.7358 13.8029 38.7766Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M12.7584 36.752C12.7304 36.7998 12.6659 36.8141 12.6143 36.7839C12.5627 36.7537 12.5435 36.6905 12.5715 36.6427C12.5994 36.5949 12.6639 36.5806 12.7155 36.6108C12.7671 36.641 12.7863 36.7042 12.7584 36.752Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M15.2122 38.2088C15.179 38.2655 15.1025 38.2824 15.0413 38.2466C14.9801 38.2108 14.9574 38.1359 14.9905 38.0792C15.0237 38.0225 15.1002 38.0056 15.1614 38.0414C15.2226 38.0772 15.2453 38.1521 15.2122 38.2088Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M17.4881 38.9443C17.4573 38.9969 17.3862 39.0127 17.3293 38.9794C17.2725 38.9462 17.2513 38.8765 17.2821 38.8239C17.3129 38.7712 17.384 38.7555 17.4408 38.7887C17.4977 38.822 17.5188 38.8916 17.4881 38.9443Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M17.2425 27.5514C17.2251 27.5812 17.1848 27.5901 17.1526 27.5713C17.1204 27.5524 17.1085 27.513 17.1259 27.4832C17.1433 27.4534 17.1836 27.4445 17.2158 27.4633C17.248 27.4821 17.2599 27.5216 17.2425 27.5514Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M19.548 29.7315C19.4976 29.8178 19.3811 29.8435 19.288 29.7891C19.1948 29.7346 19.1602 29.6205 19.2106 29.5342C19.2611 29.4479 19.3775 29.4221 19.4707 29.4766C19.5639 29.5311 19.5985 29.6452 19.548 29.7315Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M21.2966 29.3807C21.2503 29.4598 21.1436 29.4834 21.0582 29.4335C20.9728 29.3836 20.941 29.279 20.9873 29.1999C21.0335 29.1208 21.1403 29.0971 21.2257 29.1471C21.3111 29.197 21.3428 29.3016 21.2966 29.3807Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M20.5037 28.2653C20.4858 28.296 20.4444 28.3051 20.4113 28.2858C20.3782 28.2664 20.3659 28.2258 20.3838 28.1952C20.4017 28.1645 20.4431 28.1553 20.4762 28.1747C20.5093 28.1941 20.5216 28.2346 20.5037 28.2653Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M21.8277 27.4483C21.7916 27.5101 21.7083 27.5286 21.6416 27.4896C21.5749 27.4506 21.5501 27.3689 21.5862 27.3071C21.6223 27.2454 21.7057 27.2269 21.7723 27.2659C21.839 27.3049 21.8638 27.3866 21.8277 27.4483Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M23.0633 29.3176C22.9967 29.4316 22.8428 29.4657 22.7198 29.3937C22.5967 29.3217 22.5509 29.171 22.6176 29.057C22.6842 28.943 22.8381 28.9089 22.9612 28.9809C23.0842 29.0529 23.13 29.2037 23.0633 29.3176Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M13.806 32.9637C13.7751 33.0166 13.7038 33.0324 13.6467 32.999C13.5896 32.9656 13.5684 32.8957 13.5993 32.8428C13.6302 32.7899 13.7016 32.7741 13.7586 32.8075C13.8157 32.8409 13.837 32.9108 13.806 32.9637Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M14.6561 28.3066C14.6055 28.3931 14.4888 28.4189 14.3954 28.3643C14.302 28.3097 14.2673 28.1953 14.3178 28.1088C14.3684 28.0223 14.4851 27.9964 14.5785 28.051C14.6719 28.1057 14.7067 28.2201 14.6561 28.3066Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M10.8126 31.9462C10.7751 32.0102 10.6887 32.0294 10.6195 31.9889C10.5503 31.9485 10.5246 31.8637 10.562 31.7996C10.5995 31.7355 10.686 31.7164 10.7552 31.7569C10.8244 31.7973 10.8501 31.8821 10.8126 31.9462Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M15.5697 31.3802C15.5064 31.4885 15.3603 31.5208 15.2434 31.4524C15.1265 31.3841 15.083 31.2409 15.1463 31.1326C15.2097 31.0243 15.3558 30.992 15.4727 31.0603C15.5896 31.1287 15.6331 31.2719 15.5697 31.3802Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M17.4825 34.8848C17.4298 34.9749 17.3082 35.0018 17.2109 34.9449C17.1137 34.888 17.0775 34.7688 17.1302 34.6788C17.1829 34.5887 17.3044 34.5617 17.4017 34.6186C17.499 34.6755 17.5352 34.7947 17.4825 34.8848Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M17.2232 35.935C17.2039 35.968 17.1594 35.9778 17.1238 35.957C17.0882 35.9362 17.0749 35.8925 17.0942 35.8595C17.1135 35.8265 17.158 35.8167 17.1937 35.8375C17.2293 35.8584 17.2425 35.902 17.2232 35.935Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M19.1763 32.4515C19.1465 32.5025 19.0778 32.5177 19.0227 32.4855C18.9677 32.4533 18.9472 32.3859 18.977 32.335C19.0068 32.284 19.0756 32.2688 19.1307 32.3009C19.1857 32.3331 19.2061 32.4005 19.1763 32.4515Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M17.973 31.2348C17.9395 31.2921 17.8621 31.3093 17.8003 31.2731C17.7384 31.2369 17.7154 31.1611 17.7489 31.1038C17.7824 31.0465 17.8597 31.0293 17.9216 31.0655C17.9835 31.1017 18.0065 31.1775 17.973 31.2348Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M14.4826 33.5769C14.4603 33.6149 14.4089 33.6263 14.3678 33.6023C14.3267 33.5782 14.3115 33.5279 14.3337 33.4898C14.356 33.4518 14.4073 33.4404 14.4485 33.4644C14.4896 33.4885 14.5048 33.5388 14.4826 33.5769Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M13.4143 32.263C13.3872 32.3093 13.3247 32.3232 13.2747 32.2939C13.2247 32.2647 13.2061 32.2034 13.2332 32.1571C13.2603 32.1108 13.3228 32.097 13.3728 32.1262C13.4228 32.1554 13.4414 32.2167 13.4143 32.263Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M27.9801 29.0672C27.9558 29.1089 27.8995 29.1213 27.8546 29.095C27.8096 29.0687 27.7929 29.0136 27.8172 28.9719C27.8416 28.9303 27.8978 28.9178 27.9428 28.9441C27.9878 28.9704 28.0045 29.0255 27.9801 29.0672Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M16.2996 29.2935C16.2606 29.3601 16.1707 29.38 16.0988 29.3379C16.0269 29.2959 16.0001 29.2078 16.0391 29.1411C16.078 29.0745 16.1679 29.0546 16.2399 29.0967C16.3118 29.1387 16.3385 29.2268 16.2996 29.2935Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M28.0597 29.7416C28.0064 29.8328 27.8834 29.86 27.785 29.8025C27.6866 29.7449 27.65 29.6244 27.7033 29.5332C27.7566 29.4421 27.8796 29.4148 27.978 29.4724C28.0764 29.5299 28.113 29.6505 28.0597 29.7416Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M20.1483 24.3557C20.1179 24.4078 20.0477 24.4233 19.9915 24.3905C19.9354 24.3576 19.9145 24.2888 19.9449 24.2368C19.9753 24.1848 20.0455 24.1692 20.1017 24.2021C20.1579 24.2349 20.1788 24.3037 20.1483 24.3557Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M18.042 23.0214C17.9849 23.1191 17.8531 23.1483 17.7475 23.0866C17.642 23.0249 17.6028 22.8957 17.66 22.798C17.7171 22.7003 17.849 22.6711 17.9545 22.7328C18.06 22.7945 18.0992 22.9237 18.042 23.0214Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M18.6074 23.8481C18.5651 23.9204 18.4675 23.942 18.3894 23.8964C18.3113 23.8507 18.2822 23.755 18.3245 23.6827C18.3668 23.6104 18.4644 23.5888 18.5425 23.6345C18.6206 23.6801 18.6497 23.7758 18.6074 23.8481Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M18.3069 21.8116C18.285 21.849 18.2345 21.8602 18.1941 21.8366C18.1537 21.8129 18.1387 21.7634 18.1606 21.726C18.1824 21.6885 18.233 21.6774 18.2734 21.701C18.3138 21.7246 18.3288 21.7741 18.3069 21.8116Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M16.698 21.1713C16.6798 21.2024 16.6379 21.2117 16.6043 21.1921C16.5708 21.1724 16.5583 21.1313 16.5765 21.1002C16.5946 21.0691 16.6366 21.0599 16.6702 21.0795C16.7037 21.0991 16.7162 21.1402 16.698 21.1713Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M15.3807 24.837C15.3183 24.9438 15.1741 24.9757 15.0588 24.9083C14.9435 24.8408 14.9006 24.6996 14.9631 24.5928C15.0255 24.486 15.1697 24.4541 15.285 24.5215C15.4003 24.589 15.4432 24.7302 15.3807 24.837Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M16.2829 24.7993C16.2527 24.8509 16.1831 24.8664 16.1274 24.8338C16.0716 24.8012 16.0509 24.7329 16.0811 24.6813C16.1113 24.6297 16.1809 24.6143 16.2366 24.6469C16.2924 24.6795 16.3131 24.7477 16.2829 24.7993Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M14.6357 24.7471C14.615 24.7827 14.567 24.7933 14.5286 24.7709C14.4903 24.7484 14.476 24.7014 14.4968 24.6659C14.5176 24.6304 14.5655 24.6198 14.6039 24.6422C14.6423 24.6646 14.6565 24.7116 14.6357 24.7471Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M18.8225 26.3108C18.7394 26.4529 18.5476 26.4954 18.3941 26.4057C18.2407 26.3159 18.1836 26.128 18.2668 25.9858C18.3499 25.8437 18.5416 25.8013 18.6951 25.891C18.8486 25.9807 18.9056 26.1687 18.8225 26.3108Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M24.2319 30.4219C24.1804 30.5101 24.0614 30.5364 23.9661 30.4807C23.8709 30.4251 23.8355 30.3084 23.8871 30.2202C23.9387 30.132 24.0577 30.1057 24.1529 30.1614C24.2481 30.2171 24.2835 30.3337 24.2319 30.4219Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M22.3645 30.0453C22.3419 30.084 22.2897 30.0956 22.2479 30.0711C22.2061 30.0467 22.1905 29.9955 22.2132 29.9568C22.2358 29.9181 22.288 29.9065 22.3298 29.931C22.3716 29.9554 22.3871 30.0066 22.3645 30.0453Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M23.506 27.7037C23.4485 27.8021 23.3158 27.8314 23.2096 27.7693C23.1034 27.7072 23.064 27.5772 23.1215 27.4788C23.179 27.3805 23.3117 27.3511 23.4179 27.4132C23.5241 27.4753 23.5635 27.6054 23.506 27.7037Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M25.9569 30.5641C25.8928 30.6737 25.745 30.7064 25.6267 30.6372C25.5084 30.568 25.4645 30.4231 25.5285 30.3136C25.5926 30.204 25.7404 30.1713 25.8587 30.2405C25.977 30.3097 26.021 30.4545 25.9569 30.5641Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M23.0344 26.8293C23.0115 26.8684 22.9587 26.8801 22.9165 26.8554C22.8742 26.8307 22.8585 26.7789 22.8814 26.7398C22.9043 26.7007 22.9571 26.689 22.9993 26.7137C23.0416 26.7384 23.0573 26.7901 23.0344 26.8293Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M4.77091 25.9964C4.68892 26.1366 4.49971 26.1785 4.34831 26.09C4.1969 26.0014 4.14063 25.816 4.22263 25.6758C4.30462 25.5355 4.49383 25.4936 4.64524 25.5822C4.79664 25.6707 4.85291 25.8562 4.77091 25.9964Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M7.61738 32.6854C7.57113 32.7645 7.46439 32.7881 7.37899 32.7382C7.29358 32.6883 7.26184 32.5836 7.30809 32.5045C7.35435 32.4254 7.46108 32.4018 7.54649 32.4518C7.6319 32.5017 7.66364 32.6063 7.61738 32.6854Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M6.17498 31.7356C6.15111 31.7764 6.09603 31.7886 6.05196 31.7628C6.00789 31.7371 5.99151 31.6831 6.01538 31.6423C6.03925 31.6014 6.09432 31.5893 6.1384 31.615C6.18247 31.6408 6.19885 31.6948 6.17498 31.7356Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M5.13043 29.7105C5.10248 29.7583 5.03799 29.7726 4.98638 29.7424C4.93477 29.7122 4.91558 29.649 4.94353 29.6012C4.97148 29.5534 5.03598 29.5391 5.08759 29.5693C5.1392 29.5995 5.15838 29.6627 5.13043 29.7105Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M7.5835 31.1687C7.55035 31.2254 7.47387 31.2424 7.41267 31.2066C7.35147 31.1708 7.32872 31.0958 7.36187 31.0391C7.39501 30.9825 7.47149 30.9655 7.53269 31.0013C7.59389 31.0371 7.61664 31.1121 7.5835 31.1687Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M9.85988 31.9033C9.82909 31.9559 9.75803 31.9716 9.70117 31.9384C9.64431 31.9051 9.62317 31.8355 9.65396 31.7828C9.68475 31.7302 9.75581 31.7145 9.81268 31.7477C9.86954 31.781 9.89067 31.8506 9.85988 31.9033Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M9.61433 20.5109C9.59689 20.5407 9.55665 20.5496 9.52445 20.5308C9.49225 20.5119 9.48028 20.4725 9.49772 20.4427C9.51516 20.4128 9.5554 20.4039 9.5876 20.4228C9.6198 20.4416 9.63176 20.481 9.61433 20.5109Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M11.9201 22.6905C11.8696 22.7768 11.7532 22.8025 11.66 22.748C11.5669 22.6936 11.5322 22.5794 11.5827 22.4932C11.6332 22.4069 11.7496 22.3811 11.8428 22.4356C11.9359 22.4901 11.9706 22.6042 11.9201 22.6905Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M13.6687 22.3397C13.6224 22.4188 13.5157 22.4424 13.4303 22.3925C13.3449 22.3425 13.3131 22.2379 13.3594 22.1588C13.4056 22.0797 13.5124 22.0561 13.5978 22.1061C13.6832 22.156 13.7149 22.2606 13.6687 22.3397Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M12.8755 21.2243C12.8576 21.2549 12.8162 21.2641 12.7831 21.2447C12.75 21.2254 12.7377 21.1848 12.7556 21.1542C12.7735 21.1235 12.8149 21.1143 12.848 21.1337C12.8812 21.1531 12.8935 21.1936 12.8755 21.2243Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M14.1995 20.4083C14.1634 20.4701 14.0801 20.4885 14.0134 20.4495C13.9467 20.4105 13.9219 20.3288 13.958 20.2671C13.9942 20.2053 14.0775 20.1869 14.1442 20.2259C14.2109 20.2649 14.2356 20.3465 14.1995 20.4083Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M15.4351 22.2766C15.3685 22.3906 15.2147 22.4247 15.0916 22.3527C14.9685 22.2807 14.9228 22.13 14.9894 22.016C15.0561 21.902 15.2099 21.8679 15.333 21.9399C15.4561 22.0119 15.5018 22.1626 15.4351 22.2766Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M6.17712 25.9227C6.1462 25.9756 6.07486 25.9914 6.01777 25.958C5.96067 25.9246 5.93946 25.8547 5.97038 25.8018C6.0013 25.7489 6.07265 25.7331 6.12974 25.7665C6.18683 25.7999 6.20804 25.8698 6.17712 25.9227Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M7.0279 21.2655C6.97732 21.352 6.86059 21.3779 6.76719 21.3233C6.67379 21.2686 6.63908 21.1542 6.68966 21.0677C6.74025 20.9813 6.85697 20.9554 6.95037 21.01C7.04377 21.0646 7.07848 21.179 7.0279 21.2655Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M3.18467 24.9051C3.1472 24.9692 3.06073 24.9884 2.99153 24.9479C2.92234 24.9074 2.89663 24.8227 2.9341 24.7586C2.97157 24.6945 3.05805 24.6754 3.12724 24.7158C3.19643 24.7563 3.22215 24.8411 3.18467 24.9051Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M7.94181 24.3387C7.87849 24.447 7.73238 24.4793 7.61546 24.4109C7.49854 24.3426 7.45508 24.1994 7.5184 24.0911C7.58173 23.9828 7.72784 23.9504 7.84476 24.0188C7.96168 24.0872 8.00513 24.2304 7.94181 24.3387Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M9.85455 27.8447C9.80187 27.9348 9.68029 27.9617 9.58301 27.9048C9.48573 27.848 9.44958 27.7288 9.50226 27.6387C9.55495 27.5486 9.67652 27.5217 9.7738 27.5786C9.87108 27.6355 9.90723 27.7546 9.85455 27.8447Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M9.59505 28.894C9.57576 28.927 9.53124 28.9368 9.49562 28.916C9.45999 28.8951 9.44675 28.8515 9.46605 28.8185C9.48534 28.7855 9.52986 28.7757 9.56548 28.7965C9.60111 28.8173 9.61435 28.861 9.59505 28.894Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M11.5484 25.41C11.5186 25.461 11.4498 25.4762 11.3948 25.444C11.3398 25.4118 11.3193 25.3444 11.3491 25.2935C11.3789 25.2425 11.4477 25.2273 11.5027 25.2594C11.5578 25.2916 11.5782 25.359 11.5484 25.41Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M10.3448 24.1938C10.3113 24.2511 10.234 24.2683 10.1721 24.2321C10.1102 24.1959 10.0872 24.1201 10.1207 24.0628C10.1542 24.0054 10.2316 23.9883 10.2935 24.0245C10.3553 24.0607 10.3783 24.1365 10.3448 24.1938Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M6.85464 26.5359C6.83238 26.5739 6.78102 26.5853 6.73991 26.5613C6.69881 26.5372 6.68353 26.4869 6.70579 26.4488C6.72805 26.4107 6.77942 26.3994 6.82052 26.4234C6.86163 26.4474 6.8769 26.4978 6.85464 26.5359Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M5.78637 25.222C5.75928 25.2683 5.69678 25.2821 5.64677 25.2529C5.59676 25.2237 5.57817 25.1624 5.60526 25.1161C5.63234 25.0698 5.69484 25.0559 5.74485 25.0852C5.79486 25.1144 5.81345 25.1757 5.78637 25.222Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M20.352 22.0262C20.3276 22.0678 20.2714 22.0803 20.2264 22.054C20.1814 22.0277 20.1647 21.9726 20.189 21.9309C20.2134 21.8892 20.2696 21.8768 20.3146 21.9031C20.3596 21.9294 20.3763 21.9845 20.352 22.0262Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M8.67165 22.252C8.63269 22.3186 8.5428 22.3385 8.47086 22.2964C8.39893 22.2544 8.37219 22.1662 8.41115 22.0996C8.45011 22.033 8.54 22.0131 8.61194 22.0552C8.68387 22.0972 8.71061 22.1853 8.67165 22.252Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("path",{d:"M20.432 22.7006C20.3787 22.7918 20.2557 22.819 20.1573 22.7615C20.0589 22.7039 20.0223 22.5833 20.0756 22.4922C20.1289 22.401 20.2519 22.3738 20.3503 22.4314C20.4488 22.4889 20.4853 22.6095 20.432 22.7006Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,d.jsx)("g",{filter:"url(#filter3_f_984_3528)",children:(0,d.jsx)("ellipse",{cx:"27.0676",cy:"1.07755",rx:"27.0676",ry:"1.07755",transform:"matrix(0.999991 -0.00412603 -0.0157148 0.999877 62.8184 55.2852)",fill:"black",fillOpacity:"0.3"})}),(0,d.jsxs)("defs",{children:[(0,d.jsxs)("filter",{id:"filter0_f_984_3528",x:"10.7648",y:"34.7484",width:"54.2751",height:"19.3957",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,d.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,d.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,d.jsx)("feGaussianBlur",{stdDeviation:"4.30889",result:"effect1_foregroundBlur_984_3528"})]}),(0,d.jsxs)("filter",{id:"filter1_f_984_3528",x:"77.752",y:"-9.04834",width:"65.2285",height:"74.4771",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,d.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,d.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,d.jsx)("feGaussianBlur",{stdDeviation:"8",result:"effect1_foregroundBlur_984_3528"})]}),(0,d.jsxs)("filter",{id:"filter2_f_984_3528",x:"3.53052",y:"12.2002",width:"48.8203",height:"42.6914",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,d.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,d.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,d.jsx)("feGaussianBlur",{stdDeviation:"5",result:"effect1_foregroundBlur_984_3528"})]}),(0,d.jsxs)("filter",{id:"filter3_f_984_3528",x:"54.1837",y:"46.5497",width:"71.3703",height:"19.402",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,d.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,d.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,d.jsx)("feGaussianBlur",{stdDeviation:"4.30889",result:"effect1_foregroundBlur_984_3528"})]}),(0,d.jsxs)("linearGradient",{id:"paint0_linear_984_3528",x1:"92.353",y1:"36.874",x2:"101.227",y2:"34.7389",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#01AD6C"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#1FF073"})]}),(0,d.jsxs)("linearGradient",{id:"paint1_linear_984_3528",x1:"92.353",y1:"36.874",x2:"101.227",y2:"34.7389",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#01AD6C"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#1FF073"})]}),(0,d.jsxs)("linearGradient",{id:"paint2_linear_984_3528",x1:"75.9646",y1:"47.1873",x2:"67.0168",y2:"46.61",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#01AD6C"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#1FF073"})]}),(0,d.jsxs)("linearGradient",{id:"paint3_linear_984_3528",x1:"85.4899",y1:"22.0784",x2:"79.1399",y2:"46.3238",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#1FF073"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#04795D"})]}),(0,d.jsxs)("linearGradient",{id:"paint4_linear_984_3528",x1:"73.0373",y1:"35.4811",x2:"75.0918",y2:"39.2643",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#20AD78"}),(0,d.jsx)("stop",{offset:"0.929244",stopColor:"#1FF073"})]}),(0,d.jsxs)("linearGradient",{id:"paint5_linear_984_3528",x1:"88.087",y1:"45.1729",x2:"88.087",y2:"56.7183",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#06805E"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#1FF073"})]}),(0,d.jsxs)("linearGradient",{id:"paint6_linear_984_3528",x1:"50.9837",y1:"29.3127",x2:"55.5727",y2:"25.6798",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#EA5547"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#FF7171"})]}),(0,d.jsxs)("linearGradient",{id:"paint7_linear_984_3528",x1:"34.7316",y1:"39.0656",x2:"37.2173",y2:"35.6239",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#FF7171"}),(0,d.jsx)("stop",{offset:"0.746441",stopColor:"#EA5547"})]}),(0,d.jsxs)("linearGradient",{id:"paint8_linear_984_3528",x1:"41.3515",y1:"2.73535",x2:"41.3515",y2:"37.9116",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#FF7171"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#E85345"})]}),(0,d.jsxs)("linearGradient",{id:"paint9_linear_984_3528",x1:"49.6453",y1:"41.3586",x2:"42.5705",y2:"36.0048",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#FF7171"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#EB574A"})]}),(0,d.jsxs)("linearGradient",{id:"paint10_linear_984_3528",x1:"27.4652",y1:"23.0017",x2:"37.4081",y2:"27.7818",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{offset:"0.0666008",stopColor:"#FF7171"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#EA5548"})]})]})]}))})),xc=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"88",height:"64",viewBox:"0 0 88 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("path",{d:"M36.5605 53.6982C36.7835 55.2272 37.0957 58.9922 36.5605 61.8207H39.1884",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,d.jsx)("path",{d:"M40.5254 53.1299C41.1784 54.5951 42.5321 58.0511 42.7232 60.1534H45.8767",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,d.jsx)("path",{d:"M42.3889 48.0681C43.9656 47.5266 47.2242 45.4402 47.6446 41.4268",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,d.jsx)("path",{d:"M36.4167 40.9876C40.9557 40.032 42.8669 46.4822 42.8669 48.3933C43.488 48.3933 44.6825 49.2056 44.8736 50.1134C45.0647 51.0212 44.5392 52.2861 43.3447 52.7891C42.7929 53.0214 40.6213 53.7446 38.8534 54.1269C37.0856 54.5091 34.84 54.4613 33.5977 54.4613C32.3554 54.4613 31.0654 53.6491 31.0176 52.2157C30.9794 51.069 32.021 50.2727 32.5466 50.0178C31.6865 46.2911 31.8777 41.9432 36.4167 40.9876Z",fill:"url(#paint0_linear_984_3740)"}),(0,d.jsx)("ellipse",{cx:"40.9367",cy:"47.6442",rx:"0.62113",ry:"0.66891",transform:"rotate(-17.4862 40.9367 47.6442)",fill:"#3B314F"}),(0,d.jsx)("ellipse",{cx:"37.592",cy:"48.5109",rx:"0.62113",ry:"0.66891",transform:"rotate(-17.4862 37.592 48.5109)",fill:"#3B314F"}),(0,d.jsx)("path",{d:"M33.2148 49.5933C33.8041 51.8867 34.6291 57.0086 33.2148 59.1491",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,d.jsx)("g",{opacity:"0.2",filter:"url(#filter0_f_984_3740)",children:(0,d.jsx)("path",{d:"M51.813 57.4693L39.0826 47.9892C37.7661 47.0089 36.9904 45.4641 36.9904 43.8227L36.9903 20.5046C36.9902 18.8982 37.7333 17.3823 39.003 16.3983L51.8887 6.41212C53.7325 4.98324 56.3026 4.95849 58.1736 6.35161L70.764 15.7266C72.0806 16.7069 72.8564 18.2518 72.8564 19.8933V43.2402C72.8564 44.8301 72.1283 46.3324 70.8805 47.3176L58.1349 57.3802C56.2904 58.8364 53.6979 58.873 51.813 57.4693Z",fill:"#F9E05C"})}),(0,d.jsx)("path",{d:"M55.5088 58.4805L35.2649 32.5458L55.417 25.5369L55.5088 58.4805Z",fill:"#FFDAA4"}),(0,d.jsx)("path",{d:"M55.5088 5.00396L75.7527 32.5431L55.417 25.5338L55.5088 5.00396Z",fill:"#FFA827"}),(0,d.jsx)("path",{d:"M55.509 58.4762L55.4172 25.533L75.7529 32.5419L55.509 58.4762Z",fill:"#FFBC57"}),(0,d.jsx)("path",{d:"M55.5094 5.0057L55.4176 25.5352L35.2656 32.5445L55.5094 5.0057Z",fill:"#FFBC57"}),(0,d.jsx)("path",{d:"M44.3614 35.6885C44.4628 35.6658 44.5252 35.5585 44.5006 35.449C44.4761 35.3395 44.374 35.2691 44.2725 35.2919C44.1711 35.3146 44.1088 35.4218 44.1333 35.5313C44.1578 35.6409 44.26 35.7112 44.3614 35.6885Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M43.2599 31.5314C43.4504 31.4887 43.5674 31.2873 43.5213 31.0816C43.4753 30.8759 43.2835 30.7438 43.093 30.7865C42.9025 30.8292 42.7854 31.0305 42.8315 31.2362C42.8776 31.4419 43.0694 31.5741 43.2599 31.5314Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M44.332 32.8868C44.473 32.8552 44.5597 32.7061 44.5255 32.5539C44.4914 32.4016 44.3495 32.3038 44.2085 32.3354C44.0674 32.367 43.9808 32.516 44.0149 32.6683C44.049 32.8206 44.191 32.9184 44.332 32.8868Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M41.1395 31.3275C41.2124 31.3112 41.2573 31.2341 41.2396 31.1552C41.222 31.0764 41.1485 31.0258 41.0755 31.0422C41.0025 31.0585 40.9577 31.1357 40.9753 31.2145C40.993 31.2933 41.0665 31.3439 41.1395 31.3275Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M40.9363 28.3491C40.9969 28.3356 41.0341 28.2715 41.0195 28.206C41.0048 28.1406 40.9438 28.0985 40.8832 28.1121C40.8226 28.1257 40.7853 28.1898 40.8 28.2552C40.8147 28.3207 40.8757 28.3627 40.9363 28.3491Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M47.6376 28.1043C47.8458 28.0576 47.9738 27.8375 47.9234 27.6127C47.873 27.3878 47.6634 27.2434 47.4551 27.29C47.2469 27.3367 47.119 27.5568 47.1693 27.7816C47.2197 28.0065 47.4294 28.1509 47.6376 28.1043Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M47.1121 29.564C47.2127 29.5415 47.2746 29.4351 47.2502 29.3265C47.2259 29.2179 47.1246 29.1481 47.024 29.1706C46.9234 29.1932 46.8615 29.2995 46.8859 29.4081C46.9102 29.5168 47.0115 29.5866 47.1121 29.564Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M47.8795 26.8268C47.9488 26.8112 47.9913 26.738 47.9746 26.6632C47.9578 26.5884 47.8881 26.5404 47.8188 26.5559C47.7495 26.5714 47.7069 26.6446 47.7237 26.7194C47.7405 26.7942 47.8102 26.8423 47.8795 26.8268Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M48.2591 34.5287C48.5362 34.4666 48.7065 34.1737 48.6395 33.8745C48.5724 33.5753 48.2934 33.3831 48.0164 33.4452C47.7393 33.5073 47.569 33.8002 47.636 34.0994C47.7031 34.3986 47.9821 34.5908 48.2591 34.5287Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M52.1798 45.5748C52.3517 45.5362 52.4574 45.3545 52.4158 45.1688C52.3742 44.9832 52.201 44.8639 52.0291 44.9024C51.8572 44.9409 51.7515 45.1227 51.7931 45.3083C51.8347 45.494 52.0078 45.6133 52.1798 45.5748Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M52.5436 42.3108C52.619 42.2939 52.6654 42.2142 52.6471 42.1327C52.6289 42.0512 52.5529 41.9989 52.4774 42.0158C52.402 42.0327 52.3556 42.1124 52.3739 42.1939C52.3921 42.2754 52.4681 42.3277 52.5436 42.3108Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M48.0972 42.9552C48.2889 42.9122 48.4067 42.7095 48.3604 42.5025C48.314 42.2955 48.1209 42.1624 47.9292 42.2054C47.7375 42.2484 47.6196 42.451 47.666 42.6581C47.7124 42.8651 47.9055 42.9981 48.0972 42.9552Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M51.5065 48.4853C51.7201 48.4375 51.8514 48.2117 51.7997 47.9811C51.748 47.7505 51.5329 47.6023 51.3194 47.6502C51.1058 47.698 50.9745 47.9238 51.0262 48.1544C51.0779 48.385 51.2929 48.5332 51.5065 48.4853Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M46.9081 41.717C46.9844 41.6999 47.0312 41.6193 47.0128 41.5369C46.9943 41.4546 46.9175 41.4017 46.8412 41.4188C46.765 41.4359 46.7181 41.5165 46.7365 41.5988C46.755 41.6812 46.8318 41.7341 46.9081 41.717Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M55.1037 11.2745C55.377 11.2132 55.545 10.9243 55.4789 10.6291C55.4127 10.3339 55.1375 10.1442 54.8641 10.2055C54.5908 10.2667 54.4228 10.5557 54.4889 10.8509C54.5551 11.1461 54.8303 11.3357 55.1037 11.2745Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M64.6028 19.4692C64.757 19.4346 64.8518 19.2716 64.8145 19.1051C64.7772 18.9386 64.6219 18.8316 64.4677 18.8661C64.3135 18.9007 64.2187 19.0637 64.256 19.2302C64.2933 19.3967 64.4486 19.5037 64.6028 19.4692Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M63.8076 16.5938C63.8871 16.576 63.936 16.4919 63.9168 16.406C63.8975 16.32 63.8174 16.2648 63.7378 16.2827C63.6583 16.3005 63.6094 16.3846 63.6286 16.4705C63.6479 16.5565 63.728 16.6117 63.8076 16.5938Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M61.0238 13.8105C61.117 13.7896 61.1742 13.6911 61.1517 13.5905C61.1292 13.4898 61.0353 13.4252 60.9422 13.4461C60.849 13.467 60.7917 13.5655 60.8143 13.6661C60.8368 13.7667 60.9306 13.8313 61.0238 13.8105Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M62.1328 18.6099C62.2433 18.5852 62.3112 18.4684 62.2845 18.349C62.2578 18.2297 62.1465 18.1531 62.036 18.1778C61.9255 18.2026 61.8576 18.3194 61.8843 18.4387C61.9111 18.558 62.0223 18.6347 62.1328 18.6099Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M62.1508 22.7348C62.2535 22.7118 62.3166 22.6033 62.2918 22.4924C62.2669 22.3816 62.1635 22.3103 62.0609 22.3333C61.9582 22.3564 61.8951 22.4649 61.92 22.5757C61.9448 22.6866 62.0482 22.7578 62.1508 22.7348Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M43.5507 16.3532C43.6089 16.3401 43.6446 16.2787 43.6305 16.2159C43.6165 16.1531 43.5579 16.1128 43.4998 16.1258C43.4417 16.1389 43.4059 16.2003 43.42 16.2631C43.4341 16.3259 43.4926 16.3662 43.5507 16.3532Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M45.9296 21.2937C46.0978 21.256 46.2012 21.0782 46.1605 20.8965C46.1198 20.7148 45.9504 20.5981 45.7822 20.6358C45.6139 20.6735 45.5105 20.8514 45.5512 21.033C45.5919 21.2147 45.7613 21.3314 45.9296 21.2937Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M44.4358 23.9858C44.59 23.9512 44.6848 23.7882 44.6475 23.6217C44.6102 23.4552 44.4549 23.3482 44.3007 23.3827C44.1465 23.4173 44.0517 23.5803 44.089 23.7468C44.1264 23.9133 44.2816 24.0203 44.4358 23.9858Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M43.0161 22.0919C43.0759 22.0785 43.1126 22.0153 43.0982 21.9507C43.0837 21.8861 43.0235 21.8447 42.9637 21.8581C42.9039 21.8715 42.8672 21.9347 42.8817 21.9992C42.8961 22.0638 42.9563 22.1053 43.0161 22.0919Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M40.9876 23.8433C41.108 23.8164 41.182 23.6891 41.1528 23.5591C41.1237 23.4291 41.0025 23.3456 40.8821 23.3725C40.7617 23.3995 40.6877 23.5268 40.7168 23.6568C40.7459 23.7868 40.8672 23.8703 40.9876 23.8433Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M43.4018 26.8565C43.6241 26.8067 43.7606 26.5718 43.7069 26.3318C43.6531 26.0918 43.4293 25.9377 43.2071 25.9875C42.9849 26.0373 42.8483 26.2722 42.9021 26.5122C42.9558 26.7521 43.1796 26.9063 43.4018 26.8565Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M54.2487 13.5517C54.3518 13.5286 54.4151 13.4196 54.3902 13.3083C54.3652 13.197 54.2614 13.1255 54.1583 13.1486C54.0553 13.1717 53.9919 13.2807 54.0168 13.392C54.0418 13.5033 54.1456 13.5748 54.2487 13.5517Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M46.1494 12.5124C46.318 12.4746 46.4217 12.2964 46.3809 12.1143C46.3401 11.9322 46.1703 11.8152 46.0016 11.853C45.833 11.8908 45.7294 12.069 45.7702 12.2511C45.811 12.4332 45.9808 12.5502 46.1494 12.5124Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M54.1541 8.09849C54.279 8.07049 54.3558 7.93844 54.3255 7.80353C54.2953 7.66862 54.1695 7.58196 54.0446 7.60995C53.9196 7.63795 53.8429 7.77001 53.8731 7.90491C53.9033 8.03982 54.0291 8.12649 54.1541 8.09849Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M50.7303 15.6158C50.9414 15.5685 51.0712 15.3454 51.0201 15.1174C50.969 14.8895 50.7565 14.743 50.5453 14.7903C50.3342 14.8376 50.2045 15.0608 50.2556 15.2887C50.3067 15.5167 50.5192 15.6631 50.7303 15.6158Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M55.4759 20.6048C55.6515 20.5655 55.7594 20.3798 55.7169 20.1901C55.6744 20.0005 55.4976 19.8786 55.3219 19.918C55.1463 19.9574 55.0384 20.143 55.0809 20.3327C55.1234 20.5223 55.3002 20.6442 55.4759 20.6048Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M57.3427 20.721C57.4071 20.7066 57.4466 20.6386 57.431 20.5692C57.4155 20.4997 57.3507 20.4551 57.2864 20.4695C57.2221 20.4839 57.1825 20.5519 57.1981 20.6214C57.2137 20.6908 57.2784 20.7354 57.3427 20.721Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M50.5981 22.1031C50.6974 22.0809 50.7585 21.9758 50.7345 21.8685C50.7104 21.7612 50.6104 21.6923 50.511 21.7146C50.4116 21.7368 50.3505 21.8419 50.3746 21.9492C50.3986 22.0565 50.4987 22.1254 50.5981 22.1031Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M49.225 19.4858C49.3368 19.4608 49.4055 19.3427 49.3784 19.222C49.3514 19.1014 49.2389 19.0239 49.1271 19.0489C49.0154 19.0739 48.9467 19.1921 48.9738 19.3127C49.0008 19.4334 49.1133 19.5109 49.225 19.4858Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M54.9084 14.9891C54.9826 14.9725 55.0282 14.894 55.0103 14.8139C54.9923 14.7338 54.9176 14.6823 54.8434 14.6989C54.7691 14.7155 54.7235 14.794 54.7415 14.8741C54.7595 14.9543 54.8342 15.0057 54.9084 14.9891Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M53.3032 12.5411C53.3935 12.5208 53.449 12.4254 53.4271 12.3279C53.4053 12.2304 53.3143 12.1677 53.224 12.188C53.1337 12.2082 53.0783 12.3037 53.1001 12.4012C53.122 12.4987 53.2129 12.5613 53.3032 12.5411Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M40.4194 34.794C40.5007 34.7758 40.5506 34.6899 40.5309 34.6022C40.5113 34.5145 40.4295 34.4581 40.3483 34.4763C40.267 34.4945 40.2171 34.5804 40.2368 34.6681C40.2564 34.7558 40.3382 34.8122 40.4194 34.794Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M46.9134 15.7237C47.0433 15.6946 47.1231 15.5574 47.0917 15.4171C47.0603 15.2769 46.9295 15.1868 46.7996 15.2159C46.6697 15.245 46.5899 15.3822 46.6214 15.5225C46.6528 15.6627 46.7836 15.7528 46.9134 15.7237Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M41.4951 35.2932C41.6728 35.2534 41.782 35.0656 41.739 34.8737C41.696 34.6818 41.5171 34.5585 41.3394 34.5983C41.1616 34.6381 41.0524 34.826 41.0954 35.0179C41.1384 35.2098 41.3174 35.333 41.4951 35.2932Z",fill:"#FEFAD1"}),(0,d.jsx)("path",{d:"M40.0562 15.6717C39.0994 16.1972 34.683 20.1329 30.0166 15.1157",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,d.jsx)("path",{d:"M40.1444 6.25539C36.461 8.6505 38.2173 13.7245 39.5559 15.9621C37.836 17.5222 39.2525 21.7045 42.1451 20.8461C45.0376 19.9876 49.874 17.4031 51.2657 15.923C52.6574 14.443 52.6086 12.9595 51.8221 11.7881C51.193 10.851 49.6663 10.6864 48.9816 10.7213C48.5895 9.65542 44.7488 3.2615 40.1444 6.25539Z",fill:"url(#paint1_linear_984_3740)"}),(0,d.jsx)("ellipse",{cx:"41.885",cy:"16.7125",rx:"0.62113",ry:"0.66891",transform:"rotate(-32.9344 41.885 16.7125)",fill:"#3B314F"}),(0,d.jsx)("ellipse",{cx:"46.3391",cy:"15.1265",rx:"0.62113",ry:"0.66891",transform:"rotate(-32.9344 46.3391 15.1265)",fill:"#3B314F"}),(0,d.jsx)("path",{d:"M42.0649 20.5144C40.9028 21.396 39.7246 23.0952 40.1341 24.8315C40.4617 26.2205 43.0536 26.7067 44.3085 26.7762L43.375 29.5077",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,d.jsx)("path",{d:"M47.3618 18.2199C46.4897 19.1211 45.2895 22.0707 46.1073 24.0551C46.7616 25.6427 48.9355 25.6513 49.9407 25.4571L49.8284 28.7325",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,d.jsx)("path",{d:"M48.2781 10.8869C50.7148 9.7849 53.6596 8.96932 51.6456 2.10901",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,d.jsx)("path",{d:"M62.6381 49.9814C63.0681 51.1759 65.0748 54.4727 64.2148 60.3495L61.5869 61.3529",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,d.jsx)("path",{d:"M67.5586 51.2217C67.9408 52.0339 69.5175 55.3785 69.852 60.7298L72.4799 61.3987",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,d.jsx)("path",{d:"M60.3443 47.832C60.1213 49.0106 59.8092 52.2755 60.3443 55.9067",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,d.jsx)("path",{d:"M68.4671 39.1842C63.9758 37.9898 61.7302 43.5322 61.6824 44.6311C58.3379 44.6311 58.5854 47.6055 59.2935 48.5968C59.7712 49.2657 60.9657 50.4124 63.6414 51.3202C66.317 52.228 69.2315 52.6102 70.0438 52.5147C70.856 52.4191 71.9072 52.5147 72.6716 50.699C73.2832 49.2466 72.2257 48.0871 71.7161 47.689C72.2894 45.0133 72.9583 40.3787 68.4671 39.1842Z",fill:"url(#paint2_linear_984_3740)"}),(0,d.jsx)("ellipse",{cx:"63.5246",cy:"45.1634",rx:"0.62113",ry:"0.66891",transform:"rotate(23.8851 63.5246 45.1634)",fill:"#3B314F"}),(0,d.jsx)("ellipse",{cx:"67.7287",cy:"46.4036",rx:"0.62113",ry:"0.66891",transform:"rotate(23.8851 67.7287 46.4036)",fill:"#3B314F"}),(0,d.jsx)("path",{d:"M71.6201 48.4521C72.2572 50.0607 73.4071 54.0519 72.9102 57.148",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,d.jsx)("path",{d:"M20.145 63.6075C23.0354 63.9597 23.3634 56.2253 23.2194 55.2206C21.5676 53.8165 19.6962 54.5606 18.9226 55.4634C19.5738 59.2952 17.2546 63.2552 20.145 63.6075Z",fill:"#DE493C"}),(0,d.jsx)("path",{d:"M30.3865 39.8813C32.3935 41.9266 25.5688 46.7855 24.6632 47.207C22.3282 46.273 24.5563 43.068 24.8845 41.945C28.393 40.4214 28.9597 38.4273 30.3865 39.8813Z",fill:"url(#paint3_linear_984_3740)"}),(0,d.jsx)("path",{d:"M24.4403 31.7859C20.483 25.4958 14.8185 25.4956 11.1737 28.6496C7.72002 32.3139 10.2029 36.5304 10.2029 40.0957C10.2029 43.5223 9.82932 45.0172 9.32514 49.0115C8.80332 53.1455 10.4938 59.2357 17.4273 58.6916C24.3607 58.1476 25.7828 49.4922 26.1202 46.7916C26.4576 44.091 27.7106 36.984 24.4403 31.7859Z",fill:"url(#paint4_linear_984_3740)"}),(0,d.jsx)("path",{d:"M21.1092 38.4605C22.8952 38.0025 24.0422 36.7626 24.4306 35.9472C23.9447 34.9181 22.6342 32.6511 21.2789 31.8168C19.5847 30.7738 17.3338 31.9431 16.3749 33.7377C15.6079 35.1734 15.4166 36.747 15.1673 37.8663C16.2696 38.4476 18.6857 39.082 21.1092 38.4605Z",fill:"#FEF9F5"}),(0,d.jsx)("mask",{id:"mask0_984_3740",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"17",y:"31",width:"7",height:"7",children:(0,d.jsx)("path",{d:"M23.0629 33.9957C23.2368 35.7556 22.1502 37.3037 20.6358 37.4534C19.1214 37.603 17.318 36.4011 17.1441 34.6411C16.9702 32.8811 18.4915 31.2297 20.0059 31.08C21.5203 30.9303 22.8889 32.2357 23.0629 33.9957Z",fill:"black"})}),(0,d.jsx)("g",{mask:"url(#mask0_984_3740)",children:(0,d.jsx)("path",{d:"M21.192 39.188C22.9168 38.5367 24.1249 36.743 24.5133 35.9276C24.0275 34.8984 22.7169 32.6315 21.3616 31.7971C19.6675 30.7541 17.4165 31.9234 16.4577 33.7181C15.6906 35.1538 15.1952 37.2809 14.8764 38.2203C15.9787 38.8015 19.0359 40.0022 21.192 39.188Z",fill:"black"})}),(0,d.jsx)("path",{d:"M23.4984 39.9709C25.3429 42.1639 19.8388 46.1352 18.9332 46.5567C15.9017 46.6803 15.8002 44.4652 16.1285 43.3422C19.6369 41.8186 21.654 37.7778 23.4984 39.9709Z",fill:"url(#paint5_linear_984_3740)"}),(0,d.jsx)("path",{d:"M14.355 63.6075C17.2454 63.9597 17.5734 56.2253 17.4293 55.2206C15.7775 53.8165 13.9062 54.5606 13.1326 55.4634C13.7837 59.2952 11.4645 63.2552 14.355 63.6075Z",fill:"url(#paint6_linear_984_3740)"}),(0,d.jsx)("path",{d:"M23.4486 42.4438C20.273 46.2733 18.7785 46.678 18.3115 46.9271C18.654 46.9583 19.7508 46.7459 20.74 46.0865C21.5806 45.5261 23.2618 43.6581 23.4486 42.4438Z",fill:"#DB422A"}),(0,d.jsx)("path",{d:"M18.1252 20.2033C19.4329 20.0165 22.5898 18.5594 24.7567 14.2256",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,d.jsx)("path",{d:"M18.6916 24.4998C19.9313 24.31 23.0314 25.0378 24.1767 26.8531C25.0928 28.3053 23.8419 30.0833 23.1019 30.7908L25.8383 32.5945",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,d.jsx)("path",{d:"M12.5205 14.3927C17.0117 13.1983 19.2573 18.7407 19.3051 19.8396C22.6497 19.8396 22.4021 22.814 21.6941 23.8053C21.2163 24.4742 20.0218 25.6209 17.3462 26.5287C14.6705 27.4365 11.756 27.8187 10.9438 27.7232C10.1315 27.6276 9.08037 27.7232 8.3159 25.9075C7.70433 24.4551 8.76184 23.2956 9.27149 22.8975C8.69814 20.2218 8.02923 15.5872 12.5205 14.3927Z",fill:"url(#paint7_linear_984_3740)"}),(0,d.jsx)("ellipse",{cx:"0.62113",cy:"0.66891",rx:"0.62113",ry:"0.66891",transform:"matrix(-0.914359 0.404904 0.404904 0.914359 17.76 19.5088)",fill:"#3B314F"}),(0,d.jsx)("ellipse",{cx:"0.62113",cy:"0.66891",rx:"0.62113",ry:"0.66891",transform:"matrix(-0.914359 0.404904 0.404904 0.914359 13.5559 20.749)",fill:"#3B314F"}),(0,d.jsx)("path",{d:"M12.9106 26.7704C14.0096 25.8114 15.9126 25.0025 17.5296 25.7559C18.8233 26.3586 18.7734 28.9951 18.5868 30.2381L21.4509 29.8784",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,d.jsx)("path",{d:"M10.4656 23.3862C9.71841 24.5382 8.89648 27.8882 11.5864 32.0726",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,d.jsxs)("defs",{children:[(0,d.jsxs)("filter",{id:"filter0_f_984_3740",x:"21.9902",y:"-9.67676",width:"65.8662",height:"83.1743",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,d.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,d.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,d.jsx)("feGaussianBlur",{stdDeviation:"7.5",result:"effect1_foregroundBlur_984_3740"})]}),(0,d.jsxs)("linearGradient",{id:"paint0_linear_984_3740",x1:"37.9643",y1:"40.8916",x2:"37.9643",y2:"54.4632",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#F783F2"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#E040DA"})]}),(0,d.jsxs)("linearGradient",{id:"paint1_linear_984_3740",x1:"44.4854",y1:"5.26389",x2:"45.9754",y2:"20.5246",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#F783F2"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#E040DA"})]}),(0,d.jsxs)("linearGradient",{id:"paint2_linear_984_3740",x1:"65.8551",y1:"39.0166",x2:"65.8551",y2:"52.5289",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#F783F2"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#E040DA"})]}),(0,d.jsxs)("linearGradient",{id:"paint3_linear_984_3740",x1:"30.8827",y1:"40.8875",x2:"23.3158",y2:"45.8258",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#E04D40"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#F15F56"})]}),(0,d.jsxs)("linearGradient",{id:"paint4_linear_984_3740",x1:"15.9451",y1:"25.9191",x2:"15.8128",y2:"60.321",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#F46A6A"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#EA5749"})]}),(0,d.jsxs)("linearGradient",{id:"paint5_linear_984_3740",x1:"23.9946",y1:"40.9772",x2:"16.4278",y2:"45.9155",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#FF6F66"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#EF6058"})]}),(0,d.jsxs)("linearGradient",{id:"paint6_linear_984_3740",x1:"15.4868",y1:"63.4712",x2:"15.4888",y2:"54.2896",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#DA4639"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#EC5B4F"})]}),(0,d.jsxs)("linearGradient",{id:"paint7_linear_984_3740",x1:"15.1324",y1:"14.2251",x2:"15.1324",y2:"27.7374",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#F783F2"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#E040DA"})]})]})]}))})),mc=["pricingSystems"],vc={diamondIcon:{width:90,height:90,flexShrink:0,objectFit:"contain"},paper:{paddingRight:6,display:"flex"},subscription:{display:"flex",flex:1,borderRadius:8,padding:16}},bc={individual:{title:(0,d.jsx)(b.Trans,{id:"For Individuals"}),description:(0,d.jsx)(b.Trans,{id:"Hobbyists and indie devs"}),icon:(0,d.jsx)(hc,{style:{width:115,height:100}})},team:{title:(0,d.jsx)(b.Trans,{id:"For Teams"}),description:(0,d.jsx)(b.Trans,{id:"Companies, studios and agencies"}),icon:(0,d.jsx)(gc,{style:{width:175,height:100}})},education:{title:(0,d.jsx)(b.Trans,{id:"For Education"}),description:(0,d.jsx)(b.Trans,{id:"Teachers, courses and universities"}),icon:(0,d.jsx)(xc,{style:{width:110,height:100}})}},Cc=function(e){var t=e.subscription,n=e.subscriptionPlansWithPricingSystems,r=e.isManageSubscriptionLoading,c=e.onManageSubscription,u=e.simulateNativeMobileApp,p=l.useContext(Ro.o).openSubscriptionDialog,h=(0,lt.Z)().showAlert,g=l.useContext(f.Z),x=l.useState(null),m=(0,s.Z)(x,2),v=m[0],j=m[1],y=l.useState(null),Z=(0,s.Z)(y,2),k=Z[0],w=Z[1],S=l.useState(!1),P=(0,s.Z)(S,2),E=P[0],I=P[1];l.useEffect((function(){(0,o.Z)((0,i.Z)().mark((function e(){var r,o,s,l,c,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(null),I(!0),e.prev=2,t){e.next=6;break}return j(null),e.abrupt("return");case 6:if(r=t.planId,o=t.pricingSystemId,r&&o){e.next=10;break}return j(null),e.abrupt("return");case 10:if(s=n.find((function(e){return t.planId===e.id}))){e.next=15;break}return w((0,d.jsx)(b.Trans,{id:"Couldn't find a subscription matching your account. Please get in touch with us to fix this issue."})),j(null),e.abrupt("return");case 15:if(l=s.pricingSystems,c=(0,Bi.Z)(s,mc),(0,nr.kM)(o)){e.next=19;break}return j((0,a.Z)((0,a.Z)({},c),{},{pricingSystems:[]})),e.abrupt("return");case 19:if(u=l.find((function(e){return e.id===t.pricingSystemId}))){e.next=24;break}return e.next=23,(0,nr.tY)(o);case 23:u=e.sent;case 24:if(u){e.next=28;break}return w((0,d.jsx)(b.Trans,{id:"Couldn't find a subscription price matching your account. Please get in touch with us to fix this issue."})),j(null),e.abrupt("return");case 28:j((0,a.Z)((0,a.Z)({},c),{},{pricingSystems:[u]}));case 29:return e.prev=29,I(!1),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[2,,29,32]])})))()}),[t,n]);var M=t&&t.redemptionCodeValidUntil,A=!!M&&M<Date.now(),O=(0,$l._F)()||u;return k?(0,d.jsx)(fr.Z,{children:k}):!t||E?(0,d.jsx)(Xe.Z,{}):(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(L.x1,{alignItems:"center",children:(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Subscriptions"})}),(0,d.jsx)(F.Z,{size:"body",noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Publish to Android, iOS, unlock more cloud projects, leaderboards, collaboration features and more online services. <0>Learn more</0>",components:[(0,d.jsx)(Ie.Z,{href:"https://gdevelop.io/pricing#feature-comparison",onClick:function(){return Y.ZP.openExternalURL("https://gdevelop.io/pricing#feature-comparison")}})]})})]})}),v&&v.id&&!A?O?(0,d.jsx)(de.Z,{background:"medium",variant:"outlined",style:vc.paper,children:(0,d.jsxs)(C.ep,{alignItems:"center",expand:!0,noMargin:!0,children:[(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,d.jsxs)(C.pJ,{alignItems:"center",children:[(0,d.jsx)("img",{src:"res/diamond.svg",style:vc.diamondIcon,alt:"diamond"}),(0,d.jsx)(F.Z,{noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"You have unlocked full access to GDevelop to create without limits!"})})]})}),(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Manage subscription"}),primary:!0,onClick:function(){(0,nr.rq)(t)||h({title:{id:"Subscription outside the app store"},message:{id:"The subscription of this account comes from outside the app store. Connect with your account on gdevelop.io from your web-browser to manage it."}})}})})]})}):(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(fc,{subscriptionPlanWithPricingSystems:v,hidePrice:!!M||(0,nr.rq)(t)||!!t.benefitsFromEducationPlan,actions:t.benefitsFromEducationPlan?null:[M||(0,nr.rq)(t)||(0,nr.mX)(t)?null:(0,d.jsx)(J.Z,{label:(0,d.jsx)(Sr.Z,{isLoading:r,children:(0,d.jsx)(b.Trans,{id:"Manage payments"})}),primary:!0,onClick:c,disabled:r},"manage-payments"),(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Manage subscription"}),primary:!0,onClick:function(){return p({analyticsMetadata:{reason:"Consult profile"}})},disabled:r},"manage-subscription")].filter(Boolean),isHighlighted:!0,background:"medium"}),t.cancelAtPeriodEnd&&(0,d.jsx)(De.Z,{kind:"warning",children:(0,d.jsx)(b.Trans,{id:"Your subscription is being cancelled: you will lose the benefits at the end of the period you already paid for."})}),!!M&&(0,d.jsx)(b.I18n,{children:function(e){var n=e.i18n;return(0,d.jsx)(de.Z,{background:"dark",variant:"outlined",children:(0,d.jsxs)(C.pJ,{alignItems:"center",noMargin:!0,children:[(0,d.jsx)("img",{src:"res/diamond.svg",style:vc.diamondIcon,alt:"diamond"}),(0,d.jsx)(L.sg,{children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Thanks to the redemption code you've used, you have this subscription enabled until {0}.",values:{0:n.date(t.redemptionCodeValidUntil)}})})})]})})}})]}):A?(0,d.jsx)(de.Z,{background:"medium",variant:"outlined",style:vc.paper,children:(0,d.jsxs)(C.ep,{alignItems:"center",expand:!0,noMargin:!0,children:[(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,d.jsxs)(C.pJ,{alignItems:"center",children:[(0,d.jsx)("img",{src:"res/diamond.svg",style:vc.diamondIcon,alt:"diamond"}),(0,d.jsx)(F.Z,{noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Oh no! Your subscription from the redemption code has expired. You can renew it by redeeming a new code or getting a new subscription."})})]})}),(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Choose a subscription"}),primary:!0,onClick:function(){return p({analyticsMetadata:{reason:"Consult profile"}})}})})]})}):O?(0,d.jsx)(de.Z,{background:"medium",variant:"outlined",style:vc.paper,children:(0,d.jsxs)(C.ep,{alignItems:"center",expand:!0,noMargin:!0,children:[(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,d.jsxs)(C.pJ,{alignItems:"center",children:[(0,d.jsx)("img",{src:"res/diamond.svg",style:vc.diamondIcon,alt:"diamond"}),(0,d.jsx)(F.Z,{noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Unlock full access to GDevelop to create without limits!"})})]})}),(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Choose a subscription"}),primary:!0,onClick:function(){return p({analyticsMetadata:{reason:"Consult profile"}})}})})]})}):(0,d.jsx)(C.ep,{noColumnMargin:!0,children:Object.keys(bc).map((function(e){var t=bc[e],n=t.title,r=t.description,i=t.icon;return(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},vc.subscription),{},{border:"1px solid ".concat(g.palette.secondary)}),children:(0,d.jsxs)(L.sg,{expand:!0,alignItems:"center",justifyContent:"space-between",noMargin:!0,children:[i,(0,d.jsxs)(L.sg,{noMargin:!0,alignItems:"center",expand:!0,children:[(0,d.jsx)(F.Z,{size:"sub-title",noMargin:!0,align:"center",children:n}),(0,d.jsx)(F.Z,{size:"body-small",noMargin:!0,color:"secondary",align:"center",children:r})]}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(T.Z,{primary:!0,onClick:function(){return p({analyticsMetadata:{reason:"Consult profile"},filter:e})},label:(0,d.jsx)(b.Trans,{id:"See plans"}),fullWidth:!0})]},e)},e)}))})]})},jc=function(e){var t=e.fullName,n=e.previewIconUrl,r=e.shortDescription;return(0,d.jsxs)(L.x1,{children:[n&&(0,d.jsx)(mr.q,{alt:t,src:n,size:64}),(0,d.jsxs)(L.sg,{expand:!0,children:[(0,d.jsx)(F.Z,{noMargin:!0,children:t}),(0,d.jsx)(F.Z,{noMargin:!0,size:"body2",children:r})]})]})},yc=function(e){var t=e.examples;return e.exampleError?(0,d.jsx)(L.sg,{children:(0,d.jsx)(L.x1,{alignItems:"center",children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Error retrieving the examples"})})})}):(0,d.jsxs)(si.UQ,{children:[(0,d.jsx)(si._m,{children:(0,d.jsx)(F.Z,{displayInlineAsSpan:!0,children:(0,d.jsx)(b.Trans,{id:"Examples ({0})",values:{0:t.length}})})}),(0,d.jsx)(si.X1,{disableGutters:!0,children:0===t.length?(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"You haven't contributed any examples"})}):(0,d.jsx)(L.sg,{children:t.map((function(e){return(0,d.jsx)(jc,{shortDescription:e.shortDescription,fullName:e.name,previewIconUrl:e.previewImageUrls?e.previewImageUrls[0]:""},e.name)}))})})]})},Zc=function(e){var t=e.extensions;return e.extensionError?(0,d.jsx)(L.sg,{children:(0,d.jsx)(L.x1,{alignItems:"center",children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Error retrieving the extensions"})})})}):(0,d.jsxs)(si.UQ,{children:[(0,d.jsx)(si._m,{children:(0,d.jsx)(F.Z,{displayInlineAsSpan:!0,children:(0,d.jsx)(b.Trans,{id:"Extensions ({0})",values:{0:t.length}})})}),(0,d.jsx)(si.X1,{disableGutters:!0,children:0===t.length?(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"You haven't contributed any extensions"})}):(0,d.jsx)(L.sg,{children:t.map((function(e){return(0,d.jsx)(jc,{shortDescription:e.shortDescription,fullName:e.fullName,previewIconUrl:e.previewIconUrl},e.name)}))})})]})},kc=function(e){e.examples;return(0,d.jsx)(si.UQ,{disabled:!0,children:(0,d.jsx)(si._m,{children:(0,d.jsx)(F.Z,{displayInlineAsSpan:!0,children:(0,d.jsx)(b.Trans,{id:"Assets (coming soon!)"})})})})},wc=function(e){var t=e.userId,n=l.useState(null),r=(0,s.Z)(n,2),a=r[0],c=r[1],u=l.useState(null),p=(0,s.Z)(u,2),f=p[0],h=p[1],g=l.useState(null),x=(0,s.Z)(g,2),m=x[0],v=x[1],C=l.useState(null),j=(0,s.Z)(C,2),y=j[0],Z=j[1],k=l.useCallback((function(){(0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,Tr.y7)(t);case 5:n=e.sent,c(n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error while loading extensions:",e.t0),v(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))()}),[t]);l.useEffect((function(){k()}),[k]);var w=l.useCallback((function(){(0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,bi.Ex)(t);case 5:n=e.sent,h(n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error while loading examples:",e.t0),Z(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))()}),[t]);return l.useEffect((function(){w()}),[w]),(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(L.x1,{alignItems:"center",children:(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Contributions"})})}),f&&a?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Zc,{extensions:a,extensionError:m}),(0,d.jsx)(yc,{examples:f,exampleError:y}),(0,d.jsx)(kc,{examples:f}),(0,d.jsx)(L.sg,{children:(0,d.jsx)(Ta.Z,{children:(0,d.jsx)(b.Trans,{id:"Missing some contributions? If you are the author, create a Pull Request on the corresponding GitHub repository after adding your username in the authors of the example or the extension - or directly ask the original author to add your username."})})})]}):(0,d.jsx)(Xe.Z,{})]})},Tc=n(42061),Sc=function(e){var t=e.children,n=e.invisible,r=e.overlap,i=e.color,o=void 0===i?"secondary":i,s=function(e){return(0,R.Z)((function(t){return(0,D.Z)((0,a.Z)({root:{flexDirection:"column"},anchorOriginTopRightCircle:{top:"8%",right:"8%"}},"success"===e?{dot:{backgroundColor:t.palette.success.main}}:{}))}))()}(o),l="success"===o?void 0:o;return(0,d.jsx)(Tc.Z,{color:l,variant:"dot",classes:s,invisible:n,overlap:r,children:t})},Pc={achievementsContainer:{maxHeight:250},lockedAchievement:{opacity:.4},unlockedAchievement:{}},Ec=function(e){var t=e.badges,n=e.achievements,r=e.displayUnclaimedAchievements,i=e.displayNotifications,o=l.useState([]),c=(0,s.Z)(o,2),u=c[0],p=c[1];return l.useEffect((function(){var e=t.reduce((function(e,t){return e[t.achievementId]=t,e}),{}),i=n.reduce((function(t,n){var i=e[n.id],o=!!i;return(o||!o&&r)&&t.push((0,a.Z)((0,a.Z)({},n),{},{seen:o?i.seen:void 0,unlockedAt:o?(0,aa.Z)(i.unlockedAt):null})),t}),[]);i.sort(Xr.tP),p(i)}),[t,n,r]),(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(b.I18n,{children:function(e){var t=e.i18n;return(0,d.jsx)(Tt.Z,{style:Pc.achievementsContainer,children:u.map((function(e){return(0,d.jsxs)(L.x1,{justifyContent:"space-between",children:[(0,d.jsxs)(L.sg,{justifyContent:"center",alignItems:"flex-start",children:[(0,d.jsx)(Sc,{invisible:!(i&&!1===e.seen),children:(0,d.jsx)(F.Z,{noMargin:!0,size:"sub-title",style:e.unlockedAt?Pc.unlockedAchievement:Pc.lockedAchievement,children:e.name})}),r&&(0,d.jsx)(F.Z,{noMargin:!0,style:e.unlockedAt?Pc.unlockedAchievement:Pc.lockedAchievement,size:"body2",children:e.description})]}),(0,d.jsx)(L.sg,{children:e.unlockedAt?(0,d.jsx)(F.Z,{children:t.date(e.unlockedAt)}):(0,d.jsx)(Qi,{style:Pc.lockedAchievement})})]},e.id)}))})}})})},Ic=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{viewBox:"0 0 528.9 511.62",children:(0,d.jsx)("g",{id:"Calque_2","data-name":"Calque 2",children:(0,d.jsxs)("g",{id:"Calque_4","data-name":"Calque 4",children:[(0,d.jsx)("path",{d:"M144 60.33S80.75-18.31 35.82 21s-17.56 93.4-17.56 93.4 32.3 82.85 35.81 109.53S77 279.4 77 279.4s16.42 21.77 52.94 13.35 66-34.41 66-34.41ZM385 60.33S448.14-18.31 493.08 21s17.55 93.39 17.55 93.39-32.29 82.85-35.81 109.53-22.9 55.47-22.9 55.47-16.42 21.78-52.92 13.36-66-34.41-66-34.41Z",style:{fill:"none",stroke:"currentColor",strokeWidth:"20px",strokeMiterlimit:10}}),(0,d.jsx)("path",{d:"M395.53 429.67H352s-46.34-34.41-44.94-61.09C455.92 297 434.85 63.14 434.85 63.14H88.1S67 297 215.89 368.58c1.41 26.68-44.89 61.09-44.89 61.09h-43.58v24.57h-23.87v56.88h315.86v-56.88h-23.88Z",style:{fill:"inherit",strokeMiterlimit:10}})]})})}))})),Mc={summary:{textAlign:"center"},leftContainer:{flex:1,margin:"20px",display:"flex",alignItems:"center",justifyContent:"center"},rightContainer:{flex:2}},Lc=function(e){var t=e.achievements,n=e.badges,r=e.displayUnclaimedAchievements,i=e.displayNotifications,o=(0,w.U)().isMobile;return(0,d.jsx)(C.ep,{children:n&&t?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{style:Mc.leftContainer,children:(0,d.jsxs)("div",{style:(0,a.Z)((0,a.Z)({},Mc.summary),{},{padding:o?"0 20":"20"}),children:[(0,d.jsx)(Ic,{color:"secondary",fontSize:"large"}),(0,d.jsxs)(F.Z,{size:"block-title",children:[(0,d.jsx)(b.Trans,{id:"{0}/{1} achievements",values:{0:n.length,1:t.length}}),0===n.length&&(0,d.jsxs)(d.Fragment,{children:[" ",(0,d.jsx)(b.Trans,{id:"(yet!)"})]})]})]})}),n.length>0&&(0,d.jsx)("div",{style:Mc.rightContainer,children:n&&t&&(0,d.jsx)(Ec,{badges:n,achievements:t,displayUnclaimedAchievements:r,displayNotifications:i})})]}):(0,d.jsx)(Xe.Z,{})})},Ac=n(54458),Fc=function(e,t,n){var r=(0,l.useRef)(null);(0,l.useEffect)((function(){if(e)return r.current=new IntersectionObserver(t,(0,a.Z)({root:null,threshold:.8},n)),r.current.observe(e),function(){r.current&&r.current.disconnect()}}),[e,t,n])},Oc=n(88585),Rc=function(e){var t=e.open,n=e.onClose,r=l.useRef(null),a=l.useRef(!1),c=(0,Oc.Z)({includeLegacy:!0}).subscriptionPlansWithPricingSystems,u=l.useContext(tr.ZP),p="done"!==u.loginState,f=l.useRef(null),h=l.useCallback((function(e){if(u.authenticated&&u.profile&&!a.current){if(!e[0].isIntersecting&&r.current)return clearTimeout(r.current),void(r.current=null);if(e[0].isIntersecting){if(r.current)return;r.current=setTimeout((function(){(0,Xr.M7)(u),a.current=!0}),5e3)}}}),[u]);Fc(f.current,h);var g=l.useState(!1),x=(0,s.Z)(g,2),m=x[0],v=x[1],C=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var t,n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.getAuthorizationHeader,n=u.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,v(!0),e.next=7,(0,nr.jj)(t,n.uid);case 7:r=e.sent,Y.ZP.openExternalURL(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),(0,Ur.gR)({message:"Unable to load the portal to manage your subscription. Please contact us on billing@gdevelop.io",rawError:e.t0,errorId:"subscription-portal-error"});case 14:return e.prev=14,v(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[3,11,14,17]])}))),[u]);l.useEffect((function(){t&&u.onRefreshUserProfile()}),[u.onRefreshUserProfile,t]);var j=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.onLogout();case 2:n();case 3:case"end":return e.stop()}}),e)}))),[u,n]),y=u.authenticated&&u.profile;return(0,d.jsx)(te.ZP,{title:y?(0,d.jsx)(b.Trans,{id:"My profile"}):null,actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Close"}),primary:!1,onClick:n},"close")],secondaryActions:[(0,d.jsx)(Hn.Z,{helpPagePath:"/interface/profile"},"help"),y&&(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Logout"}),onClick:j,disabled:p},"logout")],onRequestClose:n,open:t,fullHeight:!!y,maxWidth:y?"md":"sm",flexColumnBody:!0,children:y||"loggingIn"!==u.loginState?u.authenticated&&u.profile?(0,d.jsx)(L.x1,{children:(0,d.jsxs)(L.sg,{expand:!0,noMargin:!0,children:[(0,d.jsx)(cc,{authenticatedUser:u,onOpenEditProfileDialog:u.onOpenEditProfileDialog,onOpenChangeEmailDialog:u.onOpenChangeEmailDialog}),c?(0,d.jsx)(Cc,{subscription:u.subscription,subscriptionPlansWithPricingSystems:c,onManageSubscription:C,isManageSubscriptionLoading:m}):(0,d.jsx)(Xe.Z,{}),(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(L.x1,{alignItems:"center",children:(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"GDevelop credits"})}),(0,d.jsx)(F.Z,{size:"body",noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Get perks and cloud benefits when getting closer to your game launch. <0>Learn more</0>",components:[(0,d.jsx)(Ie.Z,{href:"https://wiki.gdevelop.io/gdevelop5/interface/profile/credits",onClick:function(){return Y.ZP.openExternalURL("https://wiki.gdevelop.io/gdevelop5/interface/profile/credits")}})]})})]})}),(0,d.jsx)(Qa.Z,{displayPurchaseAction:!0})]}),(0,d.jsx)(wc,{userId:u.profile.id}),y&&(0,d.jsx)("div",{ref:f,children:(0,d.jsx)(Lc,{achievements:u.achievements,badges:u.badges,displayUnclaimedAchievements:!0,displayNotifications:!0})})]})}):(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,d.jsx)(Ac.Z,{onOpenLoginDialog:u.onOpenLoginDialog,onOpenCreateAccountDialog:u.onOpenCreateAccountDialog,message:(0,d.jsx)(b.Trans,{id:"Create an account to register your games and to get access to metrics collected anonymously, like the number of daily players and retention of the players after a few days."})})}):(0,d.jsx)(Xe.Z,{})})},Dc=function(e){return(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Profile"}),scope:"profile",onClose:e.onClose,children:(0,d.jsx)(Rc,(0,a.Z)({},e))})},_c={tabContentContainer:{width:"100%",position:"relative",textAlign:"initial",minHeight:0,display:"flex",flex:1},tabLabel:{maxWidth:360,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"15px"},tabLabelAndIcon:{display:"flex",alignItems:"center",marginLeft:10,marginRight:10},closeButton:{marginRight:5,marginLeft:5}},Bc=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){return(0,ot.Z)(this,n),t.apply(this,arguments)}return(0,at.Z)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.active||e.active}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.active;return(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},_c.tabContentContainer),n?void 0:{display:"none"}),children:t})}}]),n}(l.Component),Nc=function(e){var t=e.hideLabels,n=e.children,r=l.useRef(null),i={maxWidth:"100%",display:t?"none":"flex",flexWrap:"nowrap",overflowX:"overlay",overflowY:"hidden",marginTop:6},o=l.useCallback((function(e){var t=r.current;t&&(t.scrollLeft+=e.deltaY)}),[]);return(0,d.jsx)("div",{ref:r,className:"almost-invisible-scrollbar",style:i,onWheel:o,children:n})};function Uc(e){var t=e.id,n=e.data,r=e.active,i=e.onClose,o=e.onCloseOthers,s=e.onCloseAll,c=e.label,u=e.icon,p=e.closable,h=e.onClick,g=e.onActivated;l.useEffect((function(){r&&g()}),[r,g]);var x=l.useRef(null),m=function(e){e.stopPropagation(),x.current&&x.current.open(e.clientX,e.clientY)},v=l.useCallback((function(e){e.nativeEvent&&1===e.nativeEvent.button&&i()}),[i]),b=(0,As.i)(l.useCallback((function(e){x.current&&x.current.open(e.clientX,e.clientY)}),[x])),C=l.useContext(f.Z),j=r?C.closableTabs.selectedTextColor:C.closableTabs.textColor;return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsxs)("span",{id:t,style:{flexShrink:0,position:"relative",display:"inline-block",marginRight:2,borderTopRightRadius:8,borderTopLeftRadius:8,borderTop:"1px solid black",borderRight:"1px solid black",borderLeft:"1px solid black",borderBottom:"none",borderColor:r?C.closableTabs.selectedBorderColor:C.closableTabs.backgroundColor,backgroundColor:r?C.closableTabs.selectedBackgroundColor:C.closableTabs.backgroundColor},children:[(0,d.jsx)(O.Z,(0,a.Z)((0,a.Z)((0,a.Z)({onClick:h,onAuxClick:p?v:void 0,onContextMenu:m,"data-active":r?"true":void 0,id:t?"".concat(t,"-button"):void 0},(0,Fs.Y)(n)),b),{},{focusRipple:!0,disableTouchRipple:!0,children:(0,d.jsxs)("span",{style:(0,a.Z)((0,a.Z)({},_c.tabLabelAndIcon),{},{height:C.closableTabs.height,color:j,fontFamily:C.closableTabs.fontFamily}),children:[u,u&&c?(0,d.jsx)(L.LZ,{}):null,c&&(0,d.jsx)("span",{style:_c.tabLabel,children:c})]})})),p&&(0,d.jsx)(O.Z,(0,a.Z)((0,a.Z)({onClick:i,onAuxClick:v,onContextMenu:m},b),{},{focusRipple:!0,children:(0,d.jsx)(_.Z,{style:(0,a.Z)((0,a.Z)({},_c.closeButton),{},{width:C.closableTabs.height/2,height:C.closableTabs.height}),htmlColor:j})}))]}),(0,d.jsx)(za.Z,{ref:x,buildMenuTemplate:function(e){return[{label:e._({id:"Close"}),click:i,enabled:p},{label:e._({id:"Close others"}),click:o},{label:e._({id:"Close all"}),click:s}]}})]})}var Hc={columnDropIndicator:{borderRight:"1px solid",borderLeft:"1px solid",width:8,marginLeft:"-1px",height:"100%",boxSizing:"border-box"}};function Vc(){var e=l.useContext(f.Z);return(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},Hc.columnDropIndicator),{},{backgroundColor:e.dropIndicator.canDrop,borderColor:e.dropIndicator.border})})}var zc=n(92402),Wc=n.n(zc),Gc=n(97326),Yc=n(97230),qc=n(50394),Xc=n.n(qc),Kc=function(e){return e.selectedEvents.map((function(e){return e.event}))},Jc=function(e){return e.selectedEvents.length?e.selectedEvents[e.selectedEvents.length-1]:null},Qc=function(e){var t=e.selectedEvents.filter((function(e){return e.event.canHaveSubEvents()}));return t.length?t[t.length-1]:null},$c=function(e){var t=Xc()(e.selectedEvents);return t.filter((function(e){return!t.some((function(t){return t!==e&&(!!t.event.canHaveSubEvents()&&t.event.getSubEvents().contains(e.event,!0))}))}))},eu=function(e){var t=$c(e);return t.length?t[t.length-1]:null},tu=function(e){return e.selectedInstructions.map((function(e){return e.instruction}))},nu=function(e){return e.selectedInstructions.map((function(e){return e.eventContext.event}))},ru=function(e){return e.selectedInstructions},iu=function(e){return e.selectedInstructions[e.selectedInstructions.length-1]||null},ou=function(e){var t=e.selectedInstructions.filter((function(e){return e.eventContext.event.canHaveSubEvents()}));return t.length?t[t.length-1].eventContext:null},au=function(e,t){return e.selectedEvents.some((function(e){return e.event.ptr===t.ptr}))},su=function(e,t){return e.selectedInstructions.some((function(e){return e.instruction.ptr===t.ptr}))},lu=function(e){return!!e.selectedEvents.length},cu=function(e){return!!e.selectedInstructions.length},uu=function(e){return!!e.selectedInstructionsLists.length},du=function(e){return cu(e)||uu(e)||lu(e)},pu=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.event;if(au(e,r))return e;var i=n?e:{selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]};return(0,a.Z)((0,a.Z)({},i),{},{selectedEvents:[].concat((0,v.Z)(i.selectedEvents),[t])})},fu=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=n.instruction;if(su(t,i))return t;var o=r?t:{selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]};return(0,a.Z)((0,a.Z)({},o),{},{selectedInstructions:[].concat((0,v.Z)(o.selectedInstructions),[(0,a.Z)((0,a.Z)({},n),{},{eventContext:e})])})},hu=function(e){var t={selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]};return e.forEach((function(e){t.selectedEvents.push(e)})),t},gu="selectable",xu="icon",mu="large-selectable",vu="large-selected",bu="executable-event-container",Cu="actions-container",ju="conditions-container",yu="small-width-container",Zu="instruction-parameter",ku="instruction-invalid-parameter",wu="disabled-text",Tu="drop-indicator",Su="cant-drop-indicator",Pu="name-and-icon-container",Eu=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){return(0,ot.Z)(this,n),t.apply(this,arguments)}return(0,at.Z)(n,[{key:"render",value:function(){var e;return(0,d.jsx)("p",{className:Pn()((e={},(0,r.Z)(e,mu,!0),(0,r.Z)(e,vu,this.props.selected),e)),children:"Unknown event of type "+this.props.event.getType()})}}]),n}(l.Component);function Iu(e){var t=e.canDrop;return(0,d.jsx)("div",{className:t?Tu:Su})}var Mu=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.parameterMetadata,o=i?i.getDescription():void 0;return(0,d.jsx)(An.Z,{margin:e.isInline?"none":"dense",commitOnBlur:!0,value:e.value,floatingLabelText:o,helperMarkdownText:i?i.getLongDescription():void 0,onChange:function(t){return e.onChange(t)},ref:n,fullWidth:!0})})),Lu={"=":{id:"= (equal to)"},"<":{id:"< (less than)"},">":{id:"> (greater than)"},"<=":{id:"\u2264 (less or equal to)"},">=":{id:"\u2265 (greater or equal to)"},"!=":{id:"\u2260 (not equal to)"},startsWith:{id:"starts with"},endsWith:{id:"ends with"},contains:{id:"contains"}},Au={unknown:Object.keys(Lu),number:["=","<",">","<=",">=","!="],time:["<",">","<=",">="],string:["=","!=","startsWith","endsWith","contains"],color:["=","!="]},Fu={number:"=",time:">=",string:"=",color:"="},Ou=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.parameterMetadata,o=i?i.getDescription():void 0,a=i?i.getExtraInfo():"unknown",s=Au[a]||Au.unknown;if(!e.value){var c=Fu[a];c&&e.onChange(c)}return(0,d.jsx)(K.Z,{margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:o,helperMarkdownText:i?i.getLongDescription():void 0,value:e.value,onChange:function(t,n,r){return e.onChange(r)},ref:n,translatableHintText:{id:"Choose an operator"},children:s.map((function(e){return(0,d.jsx)($.Z,{value:e,label:Lu[e]},e)}))})})),Ru={"=":{id:"= (set to)"},"+":{id:"+ (add)"},"-":{id:"- (subtract)"},"*":{id:"* (multiply by)"},"/":{id:"/ (divide by)"}},Du={unknown:Object.keys(Ru),number:["=","+","-","*","/"],string:["=","+"],color:["=","+"]},_u=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.parameterMetadata,o=e.value,a=e.onChange,s=i?i.getDescription():void 0,c=i?i.getExtraInfo():"unknown",u=Du[c]||Du.unknown;return l.useEffect((function(){o||"unknown"===c||a("=")}),[o,a,c]),(0,d.jsx)(K.Z,{margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:s,helperMarkdownText:i?i.getLongDescription():void 0,value:o,onChange:function(e,t,n){return a(n)},ref:n,translatableHintText:{id:"Choose an operator"},id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-operator-field"):void 0,children:u.map((function(e){return(0,d.jsx)($.Z,{value:e,label:Ru[e]},e)}))})})),Bu=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.parameterMetadata,o=e.value,a=i?i.getDescription():void 0;return(0,d.jsxs)(K.Z,{margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:a,helperMarkdownText:i?i.getLongDescription():void 0,value:o,ref:n,onChange:function(t,n,r){return e.onChange(r)},translatableHintText:{id:"Choose a mouse button"},children:[(0,d.jsx)($.Z,{value:"Left",label:{id:"Left (primary)"}}),(0,d.jsx)($.Z,{value:"Right",label:{id:"Right (secondary)"}}),(0,d.jsx)($.Z,{value:"Middle",label:{id:"Middle (Auxiliary button, usually the wheel button)"}}),(0,d.jsx)($.Z,{value:"Back",label:{id:"Back (Additional button, typically the Browser Back button)"}}),(0,d.jsx)($.Z,{value:"Forward",label:{id:"Forward (Additional button, typically the Browser Forward button)"}})]})})),Nu=n(72402),Uu=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","Num0","Num1","Num2","Num3","Num4","Num5","Num6","Num7","Num8","Num9","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","LShift","RShift","LControl","RControl","LAlt","RAlt","LSystem","RSystem","SemiColon","Comma","Period","Quote","Slash","BackSlash","Tilde","Equal","Dash","Space","Back","Tab","Delete","Insert","Escape","PageUp","PageDown","End","Home","Return","NumpadPageUp","NumpadPageDown","NumpadEnd","NumpadHome","NumpadReturn","Add","Subtract","Multiply","Divide","NumpadAdd","NumpadSubtract","NumpadMultiply","NumpadDivide","Left","Up","Right","Down","NumpadLeft","NumpadUp","NumpadRight","NumpadDown","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Pause"],Hu=function(e){return-1!==Uu.indexOf(e)},Vu=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.value,o=e.onChange,a=e.isInline,s=e.parameterMetadata,c=e.onRequestClose,u=e.onApply;return(0,d.jsx)(Nu.ZP,{margin:e.isInline?"none":"dense",floatingLabelText:s?s.getDescription():void 0,helperMarkdownText:s?s.getLongDescription():void 0,fullWidth:!0,value:i,onChange:o,dataSource:Uu.map((function(e){return{text:e,value:e}})),openOnFocus:!a,onRequestClose:c,onApply:u,ref:n,errorText:i?Hu(i)?void 0:(0,d.jsx)(b.Trans,{id:'You must select a valid key. "{value}" is not valid.',values:{value:i}}):(0,d.jsx)(b.Trans,{id:"You must select a key."})})})),zu=n(10952),Wu=n.n(zu),Gu=n.g.gd,Yu=function(e){var t=e.getCurrentPlatform().getAllPlatformExtensions();return Wu()((0,Et.mapFor)(0,t.size(),(function(e){var n=t.at(e);return n.getExtensionObjectsTypes().toJSArray().map((function(e){return n.getObjectMetadata(e)})).filter((function(e){return!e.isHidden()})).map((function(e){return{extension:n,objectMetadata:e,name:e.getName(),fullName:e.getFullName(),description:e.getDescription(),iconFilename:e.getIconFilename(),categoryFullName:e.getCategoryFullName()}}))})))},qu=function(e){return(0,Et.mapFor)(0,e.count(),(function(t){return e.getAt(t)}))},Xu=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=function(i){return(!n||Gu.getTypeOfObject(e,t,i.getName(),!1)===n)&&r.every((function(n){return Gu.getBehaviorNamesInObjectOrGroup(e,t,i.getName(),n,!1).size()>0}))},o=function(i){return(!n||Gu.getTypeOfObject(e,t,i.getName(),!0)===n)&&r.every((function(n){return Gu.getBehaviorNamesInObjectOrGroup(e,t,i.getName(),n,!0).size()>0}))},a=(0,Et.mapFor)(0,t.getObjectsCount(),(function(e){return t.getObjectAt(e)})).filter(i).map((function(e){return{object:e,global:!1}})),s=t.getObjectGroups(),l=qu(s).filter(o).map((function(e){return{group:e,global:!1}})),c=e===t?[]:(0,Et.mapFor)(0,e.getObjectsCount(),(function(t){return e.getObjectAt(t)})).filter(i).map((function(e){return{object:e,global:!0}})),u=e.getObjectGroups(),d=e===t?[]:qu(u).filter(o).map((function(e){return{group:e,global:!0}}));return{allObjectsList:a.concat(c),allGroupsList:l.concat(d)}};function Ku(e,t,n){return t&&t.hasObjectNamed(n)?t.getObject(n):e.hasObjectNamed(n)?e.getObject(n):null}var Ju=n(182),Qu=["value","onChange","onChoose","project","globalObjectsContainer","objectsContainer","allowedObjectType","noGroups","errorTextIfInvalid","margin","onRequestClose","onApply","id","excludedObjectOrGroupNames","hintText","requiredBehaviorTypes"],$u=n.g.gd,ed=function(e){var t=e.globalObjectsContainer,n=e.objectsContainer,r=e.requiredBehaviorTypes,i=e.objectName;return!r||0===r.length||(!Ku(t,n,i)||r.every((function(e){return $u.getBehaviorNamesInObjectOrGroup(t,n,i,e,!1).size()>0})))},td=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)},i=(0,Gr.bX)();l.useImperativeHandle(t,(function(){return{focus:r}}));var o=e.value,s=e.onChange,c=e.onChoose,u=e.project,p=e.globalObjectsContainer,f=e.objectsContainer,h=e.allowedObjectType,g=e.noGroups,x=e.errorTextIfInvalid,m=e.margin,C=e.onRequestClose,j=e.onApply,y=e.id,Z=e.excludedObjectOrGroupNames,k=e.hintText,w=e.requiredBehaviorTypes,T=(0,Bi.Z)(e,Qu),S=function(e){var t=e.project,n=e.globalObjectsContainer,r=e.objectsContainer,i=e.noGroups,o=e.allowedObjectType,a=e.requiredBehaviorTypes,s=e.excludedObjectOrGroupNames,l=Xu(n,r,o||void 0,a||[]),c=l.allObjectsList,u=l.allGroupsList,p=c.map((function(e){var n=e.object;return{text:n.getName(),value:n.getName(),renderIcon:t?function(){return(0,d.jsx)(Ms.Z,{iconSize:24,src:Ju.Z.getThumbnail(t,n.getConfiguration())})}:void 0}})),f=i?[]:u.map((function(e){var t=e.group;return{text:t.getName(),value:t.getName()}})),h=0===f.length?p:[].concat((0,v.Z)(p),[{type:"separator"}],(0,v.Z)(f));return s?h.filter((function(e){var t=e.value;return!s.includes(t)})):h}({project:u,globalObjectsContainer:p,objectsContainer:f,noGroups:g,allowedObjectType:h,requiredBehaviorTypes:w,excludedObjectOrGroupNames:Z}),P=0!==S.filter((function(e){return void 0!==e.text&&o===e.text})).length,E=ed({globalObjectsContainer:p,objectsContainer:f,objectName:o,requiredBehaviorTypes:w})?P?void 0:x:(0,d.jsx)(b.Trans,{id:"This object exists, but can't be used here."});return i?(0,d.jsx)(Nu.ZP,(0,a.Z)({margin:m,hintText:k||{id:"Choose an object"},value:o,onChange:s,onChoose:c,onRequestClose:C,onApply:j,dataSource:S,errorText:E,ref:n,id:y},T)):(0,d.jsx)(b.I18n,{children:function(e){var t=e.i18n;return(0,d.jsx)(K.Z,{margin:m,value:o,onChange:function(e,t,n){s(n),c&&c(n),j&&j()},translatableHintText:k||{id:"Choose an object"},style:{flex:T.fullWidth?1:void 0},errorText:E,helperMarkdownText:T.helperMarkdownText,floatingLabelText:T.floatingLabelText,id:y,children:S.map((function(e,n){return"separator"===e.type?(0,d.jsx)("optgroup",{label:t._({id:"Groups"})},"group-divider"):(0,d.jsx)($.Z,{label:e.value,value:e.value,shouldNotTranslate:!0},e.value)}))})}})})),nd=td,rd=n.g.gd,id=function(e,t,n){for(var r=[],i=n+1;i<t.getParametersCount();i++){var o=t.getParameter(i);if("behavior"!==o.getType())break;var a=o.getExtraInfo();rd.MetadataProvider.getBehaviorMetadata(e,a).isHidden()&&r.push(a)}return r},od=l.forwardRef((function(e,t){var n=l.useContext(Yr.Z).currentlyRunningInAppTutorial,r=l.useRef(null),i=function(e){r.current&&!n&&r.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:i}}));var o=e.project,a=e.parameterMetadata,s=e.parameterIndex,c=e.instructionMetadata,u=e.expressionMetadata,p=a?a.getDescription():void 0,f=a?a.getLongDescription():void 0,h=a?a.getExtraInfo():void 0,g=l.useMemo((function(){var e=c||u;return o&&e&&void 0!==s?id(o.getCurrentPlatform(),e,s):[]}),[u,c,s,o]);return(0,d.jsx)(nd,{margin:e.isInline?"none":"dense",project:o,value:e.value,onChange:e.onChange,onRequestClose:e.onRequestClose,onApply:e.onApply,allowedObjectType:h,requiredBehaviorTypes:g,globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,floatingLabelText:p,helperMarkdownText:f,id:void 0!==s?"parameter-".concat(s,"-object-selector"):void 0,fullWidth:!0,errorTextIfInvalid:h||g.length>0?(0,d.jsx)(b.Trans,{id:"The object does not exist or can't be used here."}):(0,d.jsx)(b.Trans,{id:"Enter the name of an object."}),openOnFocus:!e.value,ref:r})})),ad=function(e,t){return e||(t&&t.isOptional()?t.getDefaultValue():"")},sd=n(78265),ld={description:{marginRight:5}},cd=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focusLeftButton()};l.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.parameterMetadata,o=e.value,a=i?i.getDescription():null,s=i?i.getLongDescription():null,c=ad(o,i);return(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsxs)(L.x1,{alignItems:"center",justifyContent:"space-between",children:[(0,d.jsx)(F.Z,{style:ld.description,displayInlineAsSpan:!0,children:a}),(0,d.jsx)(sd.Z,{value:c,leftButton:{label:(0,d.jsx)(b.Trans,{id:"Yes"}),value:"yes",id:"yes-button"},rightButton:{label:(0,d.jsx)(b.Trans,{id:"No"}),value:"no",id:"no-button"},onChange:e.onChange,ref:n})]}),s?(0,d.jsx)(Lo.Z,{variant:"filled",margin:"dense",children:(0,d.jsx)(Ke.r,{source:s})}):null]})})),ud={description:{marginRight:5}},dd=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focusLeftButton()};l.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.parameterMetadata,o=e.value,a=i?i.getDescription():void 0,s=i?i.getLongDescription():null,c=ad(o,i);return(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsxs)(L.x1,{alignItems:"center",justifyContent:"space-between",children:[(0,d.jsx)(F.Z,{style:ud.description,displayInlineAsSpan:!0,children:a}),(0,d.jsx)(sd.Z,{value:c,leftButton:{label:(0,d.jsx)(b.Trans,{id:"True"}),value:"True"},rightButton:{label:(0,d.jsx)(b.Trans,{id:"False"}),value:"False"},onChange:e.onChange,ref:n})]}),s?(0,d.jsx)(Lo.Z,{variant:"filled",margin:"dense",children:(0,d.jsx)(Ke.r,{source:s})}):null]})})),pd=n(16973),fd=n(80845),hd=n(15979),gd=function(e,t){if(!t)return e;switch(e){case"Ads":return t._({id:"Ads"});case"Visual effect":return t._({id:"Visual effect"});case"Text":return t._({id:"Text"});case"Audio":return t._({id:"Audio"});case"Advanced":return t._({id:"Advanced"});case"Camera":return t._({id:"Camera"});case"Input":return t._({id:"Input"});case"Game mechanic":return t._({id:"Game mechanic"});case"Movement":return t._({id:"Movement"});case"Network":return t._({id:"Network"});case"Third-party":return t._({id:"Third-party"});case"User interface":return t._({id:"User interface"});case"General":return t._({id:"General"});default:return e}},xd=n.g.gd,md={BuiltinObject:["Create","CreateByName"],BuiltinCamera:["CentreCamera"],Scene3D:["Scene3D::TurnCameraTowardObject"]},vd=function(e,t,n){for(var r=-1,i=0;i<e.getParametersCount();i++){if(!e.getParameter(i).isCodeOnly()){r=i;break}}if(-1===r)return!1;var o=e.getParameter(r);if(!xd.ParameterMetadata.isObject(o.getType()))return!1;if(t&&""!==o.getExtraInfo()&&o.getExtraInfo()!==t)return!1;if(!n)return!0;for(var a=r+1;a<e.getParametersCount();a++){var s=e.getParameter(a);if(!xd.ParameterMetadata.isBehavior(s.getType()))return!0;if(!n.has(s.getExtraInfo()))return!1}return!0},bd=function(e,t){for(var n=-1,r=0;r<e.getParametersCount();r++){if(!e.getParameter(r).isCodeOnly()){n=r;break}}if(-1===n)return!1;var i=e.getParameter(n);if(!xd.ParameterMetadata.isObject(i.getType()))return!1;if(n===e.getParametersCount()-1)return!1;var o=e.getParameter(n+1);return xd.ParameterMetadata.isBehavior(o.getType())&&(!t||o.getExtraInfo()===t)},Cd=function(e,t){return gd(e.getCategory(),t)+"/"+e.getFullName()},jd=function(e,t,n,r,i,o){for(var a=e?t.getAllConditions():t.getAllActions(),s=a.keys(),l=[],c=0;c<s.size();++c){var u=s.at(c),d=a.get(u);!d.isHidden()&&bd(d,n)&&l.push(kd(r,u,d,i,o))}return l},yd=function(e,t,n,r,i,o){for(var a=e?t.getAllConditions():t.getAllActions(),s=a.keys(),l=[],c=0;c<s.size();++c){var u=s.at(c),d=a.get(u);!d.isHidden()&&vd(d,n,r)&&l.push(kd("",u,d,i,o))}return l},Zd=function(e,t,n,r){for(var i=e?t.getAllConditions():t.getAllActions(),o=Cd(t,r),a=md[t.getName()],s=i.keys(),l=[],c=0;c<s.size();++c){var u=s.at(c),d=i.get(u),p=a&&-1!==a.indexOf(u);d.isHidden()||!p&&(vd(d)||bd(d))||l.push(kd(o,u,d,n,r,p))}return l},kd=function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=n.getFullName(),s=n.getDescription();if(s.length>140){var l=s.indexOf(" ",140);l>=0&&(s=s.substring(0,l))}var c=i?i._(n.getGroup()):n.getGroup(),u=n.getIconFilename();return{type:t,metadata:n,iconFilename:u,displayedName:a,description:s,fullGroupName:o?e:[e,c].filter(Boolean).join("/"),scope:r,isPrivate:n.isPrivate(),isRelevantForLayoutEvents:n.isRelevantForLayoutEvents(),isRelevantForFunctionEvents:n.isRelevantForFunctionEvents(),isRelevantForAsynchronousFunctionEvents:n.isRelevantForAsynchronousFunctionEvents(),isRelevantForCustomObjectEvents:n.isRelevantForCustomObjectEvents()}},wd=function(e,t,n,r,i,o){for(var a=t.keys(),s=[],l=0;l<a.size();++l){var c=a.at(l),u=t.get(c);u.isHidden()||i&&!vd(u,i,o)||s.push(kd(e,c,u,n,r))}return s},Td=function(e,t,n,r,i){var o=[],a=xd.getTypeOfObject(t,n,r,!0),s=xd.getBehaviorsOfObject(t,n,r,!0).toJSArray(),l=new Set(s.map((function(e){return xd.getTypeOfBehavior(t,n,e,!1)}))),c=xd.MetadataProvider.getExtensionAndObjectMetadata(xd.JsPlatform.get(),a),u=c.getExtension(),d=c.getMetadata(),p={extension:u,objectMetadata:d};o=[].concat((0,v.Z)(o),(0,v.Z)(wd("",e?u.getAllConditionsForObject(a):u.getAllActionsForObject(a),p,i)));for(var f=xd.asPlatform(xd.JsPlatform.get()).getAllPlatformExtensions(),h=0;h<f.size();++h){var g=f.at(h),x={extension:g,objectMetadata:d};o=[].concat((0,v.Z)(o),(0,v.Z)(yd(e,g,a,l,x,i)))}if(""!==a){var m=xd.MetadataProvider.getExtensionAndObjectMetadata(xd.JsPlatform.get(),"").getExtension();o=[].concat((0,v.Z)(o),(0,v.Z)(wd("",e?m.getAllConditionsForObject(""):m.getAllActionsForObject(""),p,i)))}for(var b=function(){var t=f.at(C);t.getBehaviorsTypes().toJSArray().filter((function(e){return l.has(e)})).forEach((function(n){for(var r=t.getBehaviorMetadata(n),s={extension:t,behaviorMetadata:r},c=[],u=0;u<f.size();++u){var d=f.at(u);c.push.apply(c,jd(e,d,n,"",s,i))}o=[].concat((0,v.Z)(wd("",e?t.getAllConditionsForBehavior(n):t.getAllActionsForBehavior(n),s,i,a,l)),c,(0,v.Z)(o))}))},C=0;C<f.size();++C)b();return t.getObjectGroups().has(r)||n.getObjectGroups().has(r)||(o=o.filter((function(e){return"CreateByName"!==e.type}))),function(e){var t=e.filter((function(e){return 0===e.fullGroupName.length})),n=e.filter((function(e){return 0!==e.fullGroupName.length}));return[].concat((0,v.Z)(t),(0,v.Z)(n))}(o)},Sd=function(e,t){for(var n=[],r=xd.asPlatform(xd.JsPlatform.get()).getAllPlatformExtensions(),i=0;i<r.size();++i){var o=r.at(i);n.push.apply(n,Zd(e,o,{extension:o,objectMetadata:void 0,behaviorMetadata:void 0},t))}return n},Pd=function(e){var t=e.getParametersCount();if(t>=1){var n=e.getParameter(0).getType();if("object"===n)return 0;if(xd.ParameterMetadata.isObject(n))return 0;if(("objectsContext"===n||"currentScene"===n)&&t>=2){var r=e.getParameter(1).getType();if(xd.ParameterMetadata.isObject(r))return 1}}return-1},Ed=n.g.gd,Id=function(e){return"number"===e},Md=function(e,t,n){return(0,Et.mapVector)(t.keys(),(function(r){var i=t.get(r);if(!i.isShown())return null;for(var o=[],a=0;a<i.getParametersCount();a++)n.objectMetadata&&0===a||n.behaviorMetadata&&a<=1||i.getParameter(a).isCodeOnly()||o.push(i.getParameter(a));var s=i.getGroup();return{type:r,name:r,displayedName:i.getFullName(),fullGroupName:[e,s].filter(Boolean).join("/"),iconFilename:i.getSmallIconFilename(),metadata:i,parameters:o,scope:n,isPrivate:i.isPrivate(),isRelevantForLayoutEvents:i.isRelevantForLayoutEvents(),isRelevantForFunctionEvents:i.isRelevantForFunctionEvents(),isRelevantForAsynchronousFunctionEvents:i.isRelevantForAsynchronousFunctionEvents(),isRelevantForCustomObjectEvents:i.isRelevantForCustomObjectEvents()}})).filter(Boolean)},Ld=function(e,t){var n=Ed.asPlatform(Ed.JsPlatform.get()).getAllPlatformExtensions();return Wu()((0,Et.mapVector)(n,(function(n){var r=Cd(n,t),i={extension:n,objectMetadata:void 0,behaviorMetadata:void 0};return[].concat((0,v.Z)(Id(e)?[]:Md(r,n.getAllStrExpressions(),i)),(0,v.Z)(Md(r,n.getAllExpressions(),i)))})))},Ad=function(e,t){var n=Ed.MetadataProvider.getExtensionAndBehaviorMetadata(Ed.JsPlatform.get(),t),r=n.getExtension(),i={extension:r,behaviorMetadata:n.getMetadata()};return[].concat((0,v.Z)(Id(e)?[]:Md("",r.getAllStrExpressionsForBehavior(t),i)),(0,v.Z)(Md("",r.getAllExpressionsForBehavior(t),i)))},Fd=function(e,t){if(!t)return e;var n=t.toLowerCase();return function(e){if(!t)return e;for(var r=0;r<e.length;++r)if(e[r].type.toLowerCase()===n){var i=e[r];e.splice(r,1),e.unshift(i)}return e}(e.filter((function(e){return-1!==e.type.toLowerCase().indexOf(n)})))},Od=n(40755),Rd=n(79266),Dd=n.n(Rd),_d=n(32319),Bd=n.n(_d),Nd=function(e){var t={};return e.forEach((function(e){var n=Bd()(e.fullGroupName.split("/"));n.length||(n=[""]),Dd()(t,n,(function(t){var n=t||{};return(0,a.Z)((0,a.Z)({},n),{},(0,r.Z)({},e.type,e))}))})),t},Ud=function e(t,n){if(!n)return null;for(var r=Object.keys(t),i=0;i<r.length;++i){var o=r[i],a=t[o];if(!a)return null;if("string"===typeof a.type){if(a.type===n)return[]}else{var s=e(a,n);if(s)return[o].concat((0,v.Z)(s))}}return null},Hd=function(e){return"object-or-object-group-value-".concat(e)},Vd=function(e){return"instruction-value-".concat(e)},zd=function(e){var t,n=e.id,r=e.instructionOrExpressionMetadata,i=e.iconSize,o=e.onClick,a=e.selectedValue,s=e.matches,l=function(e){var t=r[e];if(s&&s.length){var n=s.filter((function(t){return t.key===e}));n.length&&(t=(0,d.jsx)(Zr,{text:t,matchesCoordinates:n[0].indices}))}return t};return(0,d.jsx)(He.HC,{id:n,selected:a===Vd(r.type),primaryText:l("displayedName"),secondaryText:l("fullGroupName"),leftIcon:(0,d.jsx)(Ms.Z,{iconSize:i,src:r.iconFilename}),onClick:o,disableAutoTranslate:!0},"instruction-key-".concat((t=r).fullGroupName).concat(t.scope.objectMetadata?"-"+t.scope.objectMetadata.getName():"","-").concat(t.type))},Wd=n(84506),Gd=n(36607),Yd=function e(t){var n=t.instructionTreeNode,r=t.onChoose,i=t.iconSize,o=t.useSubheaders,a=t.selectedValue,s=t.selectedItemRef,l=t.initiallyOpenedPath,c=t.getGroupIconSrc,u=t.parentGroupIconSrc,p=l||[],f=(0,Wd.Z)(p),h=f[0],g=f.slice(1);return Wu()(Object.keys(n).map((function(t){var l=n[t];if(!l)return null;if("string"===typeof l.type){var p=l,f=Vd(l.type),x=a===f;return(0,d.jsx)(He.HC,{primaryText:p.displayedName,selected:x,id:"instruction-item-"+p.type.replace(/:/g,"-"),leftIcon:(0,d.jsx)(Ms.Z,{iconSize:i,src:p.iconFilename}),onClick:function(){r(p.type,p)},ref:x?s:void 0},f)}var m=l;if(o){var v=c(t)||u;return[(0,d.jsx)(Gd.Z,{children:t},(b=t,"subheader-key-".concat(b)))].concat(e({instructionTreeNode:m,onChoose:r,iconSize:i,useSubheaders:!1,selectedValue:a,selectedItemRef:s,initiallyOpenedPath:g,getGroupIconSrc:c,parentGroupIconSrc:v}))}var b,C=h===t,j=c(t)||u;return(0,d.jsx)(He.HC,{primaryText:t,autoGenerateNestedIndicator:!0,initiallyOpen:C,leftIcon:j?(0,d.jsx)(Ms.Z,{iconSize:i,src:j}):null,renderNestedItems:function(){return e({instructionTreeNode:m,onChoose:r,iconSize:i,selectedValue:a,selectedItemRef:s,initiallyOpenedPath:C?g:void 0,getGroupIconSrc:c,parentGroupIconSrc:j})}},t)})))},qd=n(82069),Xd=n.g.gd,Kd=function(e){return Xd.JsPlatform.get().getInstructionOrExpressionGroupMetadata(e).getIcon()},Jd=function(e){var t=e.focusOnMount,n=e.instructionsInfo,r=e.instructionsInfoTree,i=e.selectedType,o=e.onChoose,c=e.iconSize,u=e.useSubheaders,p=e.searchPlaceholderObjectName,f=e.searchPlaceholderIsCondition,h=e.helpPagePath,g=e.style,x=e.onClickMore,m=e.id,v=l.useRef(null),j=l.useRef(null),y=l.useRef(null),Z=l.useState(""),k=(0,s.Z)(Z,2),w=k[0],S=k[1],P=l.useMemo((function(){return new Od.Z(n,(0,a.Z)((0,a.Z)({},qd.KE),{},{keys:[{name:"displayedName",weight:2},{name:"fullGroupName",weight:1}]}))}),[n]),E=l.useRef(Ud(r,i)),I=w&&P?P.search((0,qd.G9)(w,["displayedName","fullGroupName"])).map((function(e){return{item:e.item,matches:(0,qd.zi)(e,w)}})):[],M=!w||!!I.length;return l.useEffect((function(){y.current&&j.current&&j.current.scrollTo(y.current)}),[]),(0,d.jsxs)("div",{style:(0,a.Z)({minHeight:0},g),id:m,children:[(0,d.jsx)(st.Z,{value:w,onChange:S,onRequestSearch:function(){I.length&&o(I[0].item.type,I[0].item)},placeholder:p?f?{id:"Search {searchPlaceholderObjectName} conditions",values:{searchPlaceholderObjectName:p}}:{id:"Search {searchPlaceholderObjectName} actions",values:{searchPlaceholderObjectName:p}}:void 0,helpPagePath:h,ref:v,autoFocus:t?"desktop":void 0}),(0,d.jsxs)(Tt.Z,{autoHideScrollbar:!0,ref:j,children:[M&&(0,d.jsx)(He.aV,{children:w?I.map((function(e){var t,n=e.item,r=e.matches;return zd({instructionOrExpressionMetadata:n,id:(t=n,"instruction-or-expression-".concat(t.scope.objectMetadata?t.scope.objectMetadata.getName().replace(/:/g,"-")+"-":"").concat(t.type.replace(/:/g,"-"))),iconSize:c,onClick:function(){return o(n.type,n)},matches:r,selectedValue:Vd(i)})})):(0,d.jsxs)(d.Fragment,{children:[Yd({instructionTreeNode:r,iconSize:c,onChoose:o,useSubheaders:u,selectedValue:Vd(i),initiallyOpenedPath:E.current,selectedItemRef:y,getGroupIconSrc:Kd}),x&&(0,d.jsx)(C.ep,{justifyContent:"center",children:(0,d.jsx)(T.Z,{primary:!0,icon:(0,d.jsx)(vt.Z,{}),onClick:x,label:(0,d.jsx)(b.Trans,{id:"Add a new behavior to the object"})})})]})}),!M&&(0,d.jsx)(L.x1,{children:(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"Nothing corresponding to your search. Try browsing the list instead."})})})]})]})},Qd=n.g.gd,$d=function(e,t){return e.filter((function(e){return ep(e,t)}))},ep=function(e,t){var n=e.scope,r=n.behaviorMetadata,i=n.extension,o=t.eventsBasedBehavior,a=t.eventsFunctionsExtension;return!(!(e.isRelevantForLayoutEvents&&(t.layout||t.externalEvents)||e.isRelevantForFunctionEvents&&t.eventsFunction||e.isRelevantForAsynchronousFunctionEvents&&t.eventsFunction&&t.eventsFunction.isAsync()||e.isRelevantForCustomObjectEvents&&t.eventsBasedObject)||(e.isPrivate||r&&r.isPrivate())&&!(r&&o&&a&&Qd.PlatformExtension.getBehaviorFullType(a.getName(),o.getName())===r.getName())&&(!a||a.getName()!==i.getName()||e.isPrivate&&r))},tp=["expressionType","scope","i18n"],np={flex:1,display:"flex",flexDirection:"column"},rp=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).instructionsInfo=$d(function(e,t){var n=[],r=[],i=Ld(e,t),o=Ed.asPlatform(Ed.JsPlatform.get()).getAllPlatformExtensions();return(0,Et.mapVector)(o,(function(i){var o=Cd(i,t);(0,Et.mapVector)(i.getExtensionObjectsTypes(),(function(t){var r=i.getObjectMetadata(t),a={extension:i,objectMetadata:r};Id(e)||n.push.apply(n,Md(o,i.getAllStrExpressionsForObject(t),a)),n.push.apply(n,Md(o,i.getAllExpressionsForObject(t),a))})),(0,Et.mapVector)(i.getBehaviorsTypes(),(function(t){var n=i.getBehaviorMetadata(t),a={extension:i,behaviorMetadata:n};Id(e)||r.push.apply(r,Md(o,i.getAllStrExpressionsForBehavior(t),a)),r.push.apply(r,Md(o,i.getAllExpressionsForBehavior(t),a))}))})),[].concat((0,v.Z)(i),n,r)}(e.props.expressionType,e.props.i18n),e.props.scope),e.instructionsInfoTree=Nd(e.instructionsInfo),e}return(0,at.Z)(n,[{key:"render",value:function(){var e=this.props,t=(e.expressionType,e.scope,e.i18n,(0,Bi.Z)(e,tp));return(0,d.jsx)(Jd,(0,a.Z)({id:"expression-selector",style:np,instructionsInfo:this.instructionsInfo,instructionsInfoTree:this.instructionsInfoTree,iconSize:16,useSubheaders:!0,helpPagePath:"/all-features/expressions-reference"},t))}}]),n}(l.Component),ip=function(e){return 0!==(0,Et.mapFor)(0,e.getParametersCount(),(function(t){return!e.getParameter(t).isCodeOnly()})).filter((function(e){return e})).length},op=function(e){var t=e.expressionMetadata,n=e.parameterValues,r=e.project,i=e.scope,o=e.globalObjectsContainer,a=e.objectsContainer,s=e.parameterRenderingService,c=e.onChangeParameter;if(!s)return console.error("Missing parameterRenderingService for ExpressionParametersEditor"),null;var u=t.getParametersCount(),p={getParametersCount:function(){return u},getParameter:function(e){return n[e]||""}};return(0,d.jsxs)(C.ak,{children:[(0,Et.mapFor)(0,t.getParametersCount(),(function(e){var u=t.getParameter(e),f=s.getParameterComponent(u.getType());return u.isCodeOnly()?null:(0,d.jsx)(l.Fragment,{children:(0,d.jsx)(f,{expressionMetadata:t,expression:p,parameterMetadata:u,parameterIndex:e,value:n[e],onChange:function(t){return c(e,t)},project:r,scope:i,globalObjectsContainer:o,objectsContainer:a,parameterRenderingService:s})},e)})),!ip(t)&&(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"There is nothing to configure."})})]})},ap={minHeightContainer:{minHeight:300,flex:1,flexDirection:"column"}},sp=function(e){var t=e.project,n=e.scope,r=e.onDone,i=e.onRequestClose,o=e.globalObjectsContainer,a=e.objectsContainer,c=e.expressionMetadata,u=e.parameterRenderingService,p=l.useState(Array(c.getParametersCount()).fill("")),f=(0,s.Z)(p,2),h=f[0],g=f[1];return(0,d.jsx)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Enter the expression parameters"}),id:"expression-parameters-editor-dialog",open:!0,actions:[(0,d.jsx)(te.vF,{id:"apply-button",label:(0,d.jsx)(b.Trans,{id:"Apply"}),primary:!0,onClick:function(){return r(h)}},"apply")],secondaryActions:c.getHelpPath()?[(0,d.jsx)(Hn.Z,{helpPagePath:c.getHelpPath()},"help-button")]:[],onRequestClose:i,onApply:function(){return r(h)},children:(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsxs)("div",{style:ap.minHeightContainer,children:[(0,d.jsx)(F.Z,{children:c.getDescription()}),(0,d.jsx)(op,{project:t,scope:n,globalObjectsContainer:o,objectsContainer:a,expressionMetadata:c,parameterValues:h,onChangeParameter:function(e,t){g(h.map((function(n,r){return r===e?t:n})))},parameterRenderingService:u})]})})})},lp=function(e,t,n){var r=t.getParametersCount();return e.filter((function(e,i){return!(i<n)&&(i<r&&!t.getParameter(i).isCodeOnly())}))},cp=function(e,t,n){var r=-1,i=-1,o=e.map((function(e,n){var o=t.getParameter(n);return o.isOptional()||(r=n),e.length>0?(i=n,e):o.getDefaultValue()})),a=Math.max(r,i,0);return o.filter((function(e,r){return n<=r&&r<=a&&!t.getParameter(r).isCodeOnly()}))},up=function(e){var t=(0,Et.mapVector)(e.metadata.getParameters(),(function(e){return e.getType()}));return e.scope.objectMetadata?lp(t,e.metadata,1):e.scope.behaviorMetadata?lp(t,e.metadata,2):lp(t,e.metadata,0)},dp={width:"100%",position:"absolute",whiteSpace:"pre-wrap",wordWrap:"break-word",color:"transparent"},pp={backgroundColor:"rgba(244, 67, 54, 0.15)",borderSizing:"border-box",borderBottom:"3px solid rgba(244, 67, 54, 0.7)"},fp=function(e){var t=e.value,n=e.style,r=e.highlights.slice().sort((function(e,t){return e.begin-t.begin})),i=[],o=0;return r.forEach((function(e,n){var r=Math.max(e.begin,o);r!==o&&i.push((0,d.jsx)("span",{children:t.substring(o,r)},"defaultText-".concat(n))),o<e.end&&(i.push((0,d.jsx)("span",{style:pp,children:t.substring(r,e.end)},"highlightedText-".concat(n))),o=e.end)})),o<t.length&&i.push((0,d.jsx)("span",{children:t.substring(o)},"defaultText-end")),(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},dp),n),children:i})},hp=n(71046),gp=n.n(hp),xp=n.g.gd,mp=function(e){var t=e.instructionMetadata,n=e.instruction,r=e.expressionMetadata,i=e.expression,o=e.parameterIndex;if(void 0===o||null==o)return null;var a=null;if(t&&n){var s=xp.ParameterMetadataTools.getObjectParameterIndexFor(t.getParameters(),o);s>=0&&s<n.getParametersCount()&&(a=n.getParameter(s).getPlainString())}else if(r&&i){var l=xp.ParameterMetadataTools.getObjectParameterIndexFor(r.getParameters(),o);l>=0&&l<i.getParametersCount()&&(a=i.getParameter(l))}return a},vp=function(e){var t=e.instruction,n=e.expression,r=e.parameterIndex;if(void 0===r||null==r)return null;if(t){if(r>=1&&r<t.getParametersCount())return t.getParameter(r-1).getPlainString()}else if(n&&r>=1&&r<n.getParametersCount())return n.getParameter(r-1);return null},bp=function(e){if(!e)return null;var t=e.trim();return t.length>=2&&'"'===t[0]&&'"'===t[t.length-1]?t.substr(1,t.length-2):null},Cp=function(e){if(!e)return[];try{return JSON.parse(e.getExtraInfo())}catch(t){console.error("The parameter seems misconfigured, as an array of choices could not be extracted - verify that your properly wrote a list of choices in JSON format. Full exception is:",t)}return[]},jp=n(8278),yp=n.g.gd,Zp=function(e,t,n){return(0,Et.mapVector)(t.getParametersForEvents(e),(function(e){return e.isCodeOnly()||yp.ParameterMetadata.isObject(e.getType())||yp.ParameterMetadata.isBehavior(e.getType())||0!==n.length&&!n.includes(yp.ValueTypeMetadata.getPrimitiveValueType(e.getType()))?null:e})).filter(Boolean)},kp=n.g.gd,wp=function(e,t,n,r,i,o){return e.filter((function(e){return!i||e.type===t})).map((function(e){return e.name&&e.parameters?{kind:"Expression",completion:e.name,replacementStartPosition:n,replacementEndPosition:r,enumeratedExpressionMetadata:e,addParenthesis:!0,hasVisibleParameters:0!==up(e).length,isExact:i,shouldConvertToString:"string"===o&&"number"===e.metadata.getReturnType()}:null})).filter(Boolean)},Tp=function(e,t){var n=t.getPrefix(),r=t.getType(),i=t.getObjectName(),o=t.isExact(),a=e.gd,s=e.projectScopedContainers,l=s.getObjectsContainersList().getTypeOfObject(i),c=function(e,t){var n=Ed.MetadataProvider.getExtensionAndObjectMetadata(Ed.JsPlatform.get(),t),r=n.getExtension(),i={extension:r,objectMetadata:n.getMetadata()},o=[].concat((0,v.Z)(Id(e)?[]:Md("",r.getAllStrExpressionsForObject(t),i)),(0,v.Z)(Md("",r.getAllExpressionsForObject(t),i)));if(""!==t){var a=Ed.MetadataProvider.getExtensionAndObjectMetadata(Ed.JsPlatform.get(),"").getExtension();o=[].concat((0,v.Z)(o),(0,v.Z)(Id(e)?[]:Md("",a.getAllStrExpressionsForObject(""),i)),(0,v.Z)(Md("",a.getAllExpressionsForObject(""),i)))}return o}(r,l),u=$d(Fd(c,n),e.scope),d=wp(u,n,t.getReplacementStartPosition(),t.getReplacementEndPosition(),o,r),p=s.getObjectsContainersList().getBehaviorsOfObject(i,!0);return(0,Et.mapVector)(p,(function(l){var c=s.getObjectsContainersList().getTypeOfBehaviorInObjectOrGroup(i,l,!0);if(c){var u=Ad(r,c),p=$d(Fd(u,n),e.scope),f=wp(p,n,t.getReplacementStartPosition(),t.getReplacementEndPosition(),o,r);f.forEach((function(e){e.completion=l+a.PlatformExtension.getNamespaceSeparator()+e.completion})),d.push.apply(d,f)}})),d},Sp=function(e,t){var n,r=t.getPrefix(),i=t.getType(),o=e.project,a=e.scope,s=[];if("layer"===i){var l=a.layout;if(l)for(var c=0;c<l.getLayersCount();c++)s.push('"'.concat(l.getLayerAt(c).getName(),'"'))}else if("sceneName"===i){if(o)for(var u=0;u<o.getLayoutsCount();u++)s.push('"'.concat(o.getLayoutAt(u).getName(),'"'))}else if("stringWithSelector"===i)s=(n=t.getParameterMetadata(),Cp(n).map((function(e){return{kind:"Text",completion:'"'.concat(e,'"')}}))).map((function(e){return e.completion}));else if("objectPointName"===i){var d=t.getObjectName();if(!d)return[];var p=Ku(o,a.layout,d);if(!p)return[];if("Sprite"!==p.getType())return[];var f=kp.asSpriteConfiguration(p.getConfiguration()).getAnimations();s=(0,jp.ge)(f).map((function(e){return e.length>0?'"'.concat(e,'"'):null})).filter(Boolean)}else if("objectAnimationName"===i){var h=t.getObjectName();if(!h)return[];var g=Ku(o,a.layout,h);if(!g)return[];if("Sprite"!==g.getType())return[];var x=kp.asSpriteConfiguration(g.getConfiguration()).getAnimations();s=(0,Et.mapFor)(0,x.getAnimationsCount(),(function(e){var t=x.getAnimation(e).getName();return t.length>0?'"'.concat(t,'"'):null})).filter(Boolean)}else if("functionParameterName"===i){var m=a.eventsBasedBehavior||a.eventsBasedObject,v=m?m.getEventsFunctions():a.eventsFunctionsExtension,b=a.eventsFunction;if(b&&v){var C=t.getParameterMetadata().getExtraInfo().split(",");s=Zp(v,b,C).map((function(e){return'"'.concat(e.getName(),'"')}))}}var j,y,Z=(j=s,y=r,function(e,t,n){if(!t)return e;var r=t.toLowerCase();return e.filter((function(e){return-1!==n(e).toLowerCase().indexOf(r)}))}(j,y,(function(e){return e}))).sort(),k=t.isLastParameter();return Z.map((function(e){return{kind:"Text",completion:e,replacementStartPosition:t.getReplacementStartPosition(),replacementEndPosition:t.getReplacementEndPosition(),addParameterSeparator:!k}}))},Pp=function(e,t,n){var r=e.gd;return Wu()((0,Et.mapVector)(t,(function(t){var i=t.getCompletionKind();if(i===r.ExpressionCompletionDescription.ExpressionWithPrefix){var o=t.getObjectName();return t.getBehaviorName()?function(e,t){var n=t.getPrefix(),r=t.getType(),i=t.getBehaviorName(),o=t.isExact(),a=e.projectScopedContainers.getObjectsContainersList().getTypeOfBehavior(i,!0),s=Ad(r,a),l=$d(Fd(s,n),e.scope);return wp(l,n,t.getReplacementStartPosition(),t.getReplacementEndPosition(),o,r)}(e,t):o?Tp(e,t):function(e,t,n){var r=t.getPrefix(),i=t.getType(),o=t.isExact(),a=Ld(i,n),s=$d(Fd(a,r),e.scope);return wp(s,r,t.getReplacementStartPosition(),t.getReplacementEndPosition(),o,i)}(e,t,n)}return i===r.ExpressionCompletionDescription.Object?[{kind:"Object",completion:t.getCompletion(),replacementStartPosition:t.getReplacementStartPosition(),replacementEndPosition:t.getReplacementEndPosition(),objectConfiguration:t.hasObjectConfiguration()?t.getObjectConfiguration():null,addDot:!r.ParameterMetadata.isObject(t.getType())}]:i===r.ExpressionCompletionDescription.BehaviorWithPrefix?function(e,t){var n=t.getPrefix(),r=t.isExact(),i=t.getObjectName(),o=e.projectScopedContainers;return o.getObjectsContainersList().getBehaviorsOfObject(i,!0).toJSArray().filter((function(e){return-1!==e.indexOf(n)})).map((function(e){var n=o.getObjectsContainersList().getTypeOfBehaviorInObjectOrGroup(i,e,!0);return{kind:"Behavior",completion:e,replacementStartPosition:t.getReplacementStartPosition(),replacementEndPosition:t.getReplacementEndPosition(),addNamespaceSeparator:!0,isExact:r,behaviorType:n}}))}(e,t):i===r.ExpressionCompletionDescription.TextWithPrefix?Sp(e,t):i===r.ExpressionCompletionDescription.Variable?[{kind:"Variable",completion:t.getCompletion(),replacementStartPosition:t.getReplacementStartPosition(),replacementEndPosition:t.getReplacementEndPosition(),variableType:t.getVariableType()}]:i===r.ExpressionCompletionDescription.Property?[{kind:"Property",completion:t.getCompletion(),replacementStartPosition:t.getReplacementStartPosition(),replacementEndPosition:t.getReplacementEndPosition(),propertyType:t.getType()}]:i===r.ExpressionCompletionDescription.Parameter?[{kind:"Parameter",completion:t.getCompletion(),replacementStartPosition:t.getReplacementStartPosition(),replacementEndPosition:t.getReplacementEndPosition(),parameterType:t.getType()}]:[]})))},Ep=function(e){var t=e.expression,n=e.wordStartPosition,r=e.wordEndPosition,i=e.insertedWord,o=function(e){for(var t,n=[],r=new RegExp(/[^\w\d.:]/g);t=r.exec(e);)n.push(t.index);return Math.max.apply(Math,n)}(t.substring(0,n)),a=t.substring(0,o+1),s=t.substring(o+1,n);return{expression:a+"ToString("+s+i+")"+t.substring(r),caretLocation:a.length+s.length+i.length+9}},Ip=function(e){return e.renderEverything?0:Math.max(0,e.autocompletions.length-7)},Mp=function(e,t){var n=e.autocompletions.length!==t.length;return{autocompletions:t,selectedCompletionIndex:n?0:e.selectedCompletionIndex,renderEverything:!n&&e.renderEverything}},Lp=n.g.gd,Ap={overflow:"hidden",overflowWrap:"break-word"},Fp={maxWidth:16,maxHeight:16},Op=function(e){return"number"===e?fn()[Lp.Variable.Number]:"boolean"===e?fn()[Lp.Variable.Boolean]:fn()[Lp.Variable.String]},Rp=l.memo((function(e){var t=e.src,n="dark"===l.useContext(f.Z).palette.type&&(t.startsWith("data:image/svg+xml")||t.includes("_black"));return(0,d.jsx)("img",{src:t,alt:"",style:(0,a.Z)((0,a.Z)({},Fp),{},{filter:n?"grayscale(1) invert(1)":void 0})})})),Dp=l.forwardRef((function(e,t){var n=e.icon,r=e.iconSrc,i=e.label,o=e.parametersLabel,a=e.isSelected,s=e.onClick,l=i.length>46?i.substr(0,46)+"\u2026":i;return(0,d.jsxs)(O.Z,{style:Bp.button,onPointerDown:function(e){return e.preventDefault()},onClick:s,ref:t,children:[n||(r?(0,d.jsx)(Rp,{src:r}):null),(0,d.jsx)(L.LZ,{}),(0,d.jsxs)(F.Z,{style:Ap,noMargin:!0,align:"left",children:[a?(0,d.jsx)("b",{children:l}):l,o&&(0,d.jsxs)(d.Fragment,{children:["(",(0,d.jsx)("i",{children:o}),")"]})]})]})})),_p=function(e){var t=e.expressionMetadata,n=e.i18n,r=e.parameterRenderingService;return(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(F.Z,{style:Ap,size:"body2",children:t.getDescription()}),(0,Et.mapVector)(t.getParameters(),(function(e,i){return function(e,t){var n=e.getParameter(t);return!n.isCodeOnly()&&(0!==t||"object"!==n.getType())&&(1!==t||"behavior"!==n.getType())}(t,i)&&(0,d.jsxs)(F.Z,{style:Ap,size:"body2",children:[(0,d.jsx)("i",{children:n._(r.getUserFriendlyTypeName(e.getType()))})," \uff0d "+e.getDescription()]},i)}))]})},Bp={container:{width:370,maxHeight:150,display:"flex",overflowX:"hidden"},button:{width:"100%",paddingLeft:8,paddingRight:8,justifyContent:"flex-start"},tooManyTextContainer:{width:"100%"},popperStyle:{zIndex:fd.default.tooltip+100,flex:1,display:"flex",flexDirection:"row"}};function Np(e){var t=e.project,n=e.expressionAutocompletions,r=e.remainingCount,i=e.selectedCompletionIndex,o=e.anchorEl,a=e.onChoose,s=e.onScroll,c=e.parameterRenderingService,u=l.useRef(null),p=l.useRef(null);return l.useEffect((function(){u.current&&p.current&&u.current.scrollTo(p.current)}),[u,p,i]),0===n.length?null:(0,d.jsx)(b.I18n,{children:function(e){var l=e.i18n;return(0,d.jsxs)(pd.Z,{style:Bp.popperStyle,open:!0,anchorEl:o,placement:"bottom-start",disablePortal:!1,children:[(0,d.jsx)(de.Z,{variant:"outlined",square:!0,style:Bp.container,background:"light",children:(0,d.jsxs)(Tt.Z,{ref:u,onScroll:s,children:[n.map((function(e,n){var r=i===n,o=r?p:void 0,s=e.enumeratedExpressionMetadata?function(e,t,n){return up(n).map((function(n){var r=e.getUserFriendlyTypeName(n);return r?t._(r):n})).join(", ")}(c,l,e.enumeratedExpressionMetadata):null,u=e.completion,f="Expression"===e.kind?e.enumeratedExpressionMetadata.iconFilename:"Object"===e.kind?t&&e.objectConfiguration?Ju.Z.getThumbnail(t,e.objectConfiguration):"res/types/object.png":"Behavior"===e.kind?t&&e.behaviorType?Lp.MetadataProvider.getBehaviorMetadata(t.getCurrentPlatform(),e.behaviorType).getIconFilename():"res/types/behavior.png":null,h="Variable"===e.kind?fn()[e.variableType]:"Property"===e.kind?Op(Lp.ValueTypeMetadata.getPrimitiveValueType(Lp.ValueTypeMetadata.convertPropertyTypeToValueType(e.propertyType))):"Parameter"===e.kind?Op(Lp.ValueTypeMetadata.getPrimitiveValueType(e.parameterType)):null,g=h?(0,d.jsx)(h,{style:Fp}):null;return"Expression"===e.kind&&e.isExact?null:(0,d.jsx)(Dp,{icon:g,iconSrc:f,label:u,parametersLabel:s,onClick:function(){return a(e)},isSelected:r,ref:o},n)})),r>0&&(0,d.jsx)(L.sg,{justifyContent:"flex-start",children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"And others..."})})})]})}),null!==i&&"Expression"===n[i].kind&&!n[i].isExact&&(0,d.jsx)(de.Z,{variant:"outlined",square:!0,style:Bp.container,background:"light",children:(0,d.jsx)(Tt.Z,{autoHideScrollbar:!0,children:(0,d.jsx)(L.sg,{children:(0,d.jsx)(L.x1,{noMargin:!0,expand:!0,alignItems:"center",children:(0,d.jsx)(_p,{expressionMetadata:n[i].enumeratedExpressionMetadata.metadata,i18n:l,parameterRenderingService:c})})})})})]})}})}var Up=n.g.gd,Hp=function(e,t,n){var r=e.project,i=e.layout,o=e.eventsFunctionsExtension,a=e.eventsBasedBehavior,s=e.eventsBasedObject,l=e.eventsFunction;if(i)return Up.ProjectScopedContainers.makeNewProjectScopedContainersForProjectAndLayout(r,i);var c=Up.ProjectScopedContainers.makeNewProjectScopedContainersFor(t,n);if(a&&(c.addPropertiesContainer(a.getSharedPropertyDescriptors()),c.addPropertiesContainer(a.getPropertyDescriptors())),s&&c.addPropertiesContainer(s.getPropertyDescriptors()),l){var u=s&&s.getEventsFunctions()||a&&a.getEventsFunctions()||o||null;if(!u)throw new Error("Called `getProjectScopedContainersFromScope` with an eventsFunction but without eventsBasedBehavior, eventsBasedObject or eventsFunctionsExtension");c.addParameters(l.getParametersForEvents(u))}return c},Vp=n.g.gd,zp={container:{display:"flex",alignItems:"flex-start"},textFieldContainer:{flex:1,minWidth:200},textFieldAndHighlightContainer:{position:"relative"},expressionSelectorPopoverContentSmall:{display:"flex",maxHeight:250},expressionSelectorPopoverContent:{display:"flex",maxHeight:350},input:{fontFamily:'"Lucida Console", Monaco, monospace',lineHeight:1.4},backgroundHighlightingWithFloatingLabel:{marginTop:22,paddingLeft:12,paddingRight:12,boxSizing:"border-box"},backgroundHighlightingInline:{marginTop:0,paddingLeft:0,paddingRight:0},backgroundHighlightingInlineWithFloatingLabel:{marginTop:22,paddingLeft:0,paddingRight:0}},Wp=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._field=null,e._fieldElementWidth=null,e._inputElement=null,e.state={popoverOpen:!1,parametersDialogOpen:!1,selectedExpressionInfo:null,validatedValue:e.props.value,errorText:null,errorHighlights:[],autocompletions:{autocompletions:[],selectedCompletionIndex:0,renderEverything:!1}},e.focus=function(t){e._field&&(e._field.focus(t),t&&t.selectAll&&e._inputElement&&e._inputElement.setSelectionRange(0,e.props.value.toString().length),e._enqueueValidation())},e._openExpressionPopover=function(){e.setState({popoverOpen:!0})},e._handleFocus=function(e){e.preventDefault()},e._handleRequestClose=function(){e.setState({popoverOpen:!1})},e._handleChange=function(t){e.setState({validatedValue:t},(function(){return e._enqueueValidation()}))},e._handleBlur=function(t){e.props.onChange&&e.props.onChange(t),e.setState({validatedValue:t},(function(){e._enqueueValidation.cancel(),e._doValidation(),e.setState({autocompletions:{autocompletions:[],selectedCompletionIndex:0,renderEverything:!1}})}))},e._handleBlurEvent=function(t){e._handleBlur(t.currentTarget.value)},e._shouldOpenParametersDialog=function(e){return ip(e.metadata)},e._handleExpressionChosen=function(t){var n={popoverOpen:!1};e._shouldOpenParametersDialog(t)?n=(0,a.Z)((0,a.Z)({},n),{},{parametersDialogOpen:!0,selectedExpressionInfo:t}):e.insertExpression(t,[]),e.setState(n)},e.insertExpression=function(t,n){if(e._inputElement){var r=e.props,i=r.globalObjectsContainer,o=r.objectsContainer,a=r.scope,s=r.expressionType,l=r.value,c=e._inputElement.selectionStart,u=new Vp.ExpressionParser2,d=u.parseExpression(l.substr(0,c)+"fakeIdentifier"+l.substr(c)).get(),p=Vp.ExpressionNodeLocationFinder.getNodeAtPosition(d,c+14-1),f=Hp(a,i,o),h=Vp.ExpressionTypeFinder.getType(Vp.JsPlatform.get(),f,s,p),g="number"===t.metadata.getReturnType()&&"string"===h,x=function(e,t,n){var r=e.name||"",i="";if(e.scope.objectMetadata){var o=t[0],a=cp(t,e.metadata,1).join(", ");i="".concat(o,".").concat(r,"(").concat(a,")")}else if(e.scope.behaviorMetadata){var s=t[0],l=t[1],c=cp(t,e.metadata,2).join(", ");i="".concat(s,".").concat(l,"::").concat(r,"(").concat(c,")")}else{var u=cp(t,e.metadata,0).join(", ");i="".concat(r,"(").concat(u,")")}return n.shouldConvertToString?"ToString(".concat(i,")"):i}(t,n,{shouldConvertToString:g});u.delete();var m=l.substr(0,c)+x+l.substr(c);e.props.onChange&&e.props.onChange(m),e.setState({validatedValue:m},(function(){return e._enqueueValidation()})),setTimeout((function(){e._field&&e._field.focus(),setTimeout((function(){e._inputElement&&e._inputElement.setSelectionRange(c,c+x.length)}),5)}),5)}},e._onExpressionAutocompletionsScroll=function(){var t;e.state.autocompletions.renderEverything||e.setState({autocompletions:(t=e.state.autocompletions,(0,a.Z)((0,a.Z)({},t),{},{renderEverything:!0}))})},e._insertAutocompletion=function(t){if(!t.isExact){var n=e._inputElement?e._inputElement.selectionStart:0,r=e.state.validatedValue,i="FullExpression"===t.kind?{expression:t.completion,caretLocation:t.completion.length}:function(e,t){var n=e.expression,r=e.caretLocation,i=t.addDot,o=t.addParameterSeparator,a=t.addNamespaceSeparator,s=t.addParenthesis,l=t.completion,c=t.shouldConvertToString,u=t.replacementStartPosition,d=t.replacementEndPosition,p=t.hasVisibleParameters,f=function(e){var t=i?".":o?", ":a?"::":s?"()":"",n=!e||!t||e[0]!==t[0];return l+(n?t:"")};if(r>n.length&&(r=n.length),0===r||!n){var h=f(void 0)+n;return{caretLocation:h.length,expression:c?"ToString(".concat(h,")"):h}}var g=u||0,x=d||n.length,m=f(n[x]),v=c?Ep({expression:n,insertedWord:m,wordEndPosition:x,wordStartPosition:g}):function(e){var t=e.expression,n=e.wordStartPosition,r=e.wordEndPosition,i=e.insertedWord,o=t.substring(0,n);return{expression:o+i+t.substring(r),caretLocation:o.length+i.length}}({expression:n,insertedWord:m,wordEndPosition:x,wordStartPosition:g});return s&&p&&(v.caretLocation=v.caretLocation-1),v}({expression:r,caretLocation:n},{completion:t.completion,replacementStartPosition:t.replacementStartPosition,replacementEndPosition:t.replacementEndPosition,addParenthesis:t.addParenthesis,addDot:t.addDot,addParameterSeparator:t.addParameterSeparator,addNamespaceSeparator:t.addNamespaceSeparator,hasVisibleParameters:t.hasVisibleParameters,shouldConvertToString:"Expression"===t.kind?t.shouldConvertToString:null}),o=i.expression,a=i.caretLocation;e._field&&e._field.forceSetValue(o),e.props.onChange&&e.props.onChange(o),e.setState({validatedValue:o},(function(){e._enqueueValidation(),e._field&&e._field.forceSetSelection(a,a)}))}},e._enqueueValidation=gp()((function(){e._doValidation()}),250),e._doValidation=function(){var t=e.props,n=t.project,r=t.globalObjectsContainer,i=t.objectsContainer,o=t.expressionType,a=t.scope,s=t.onGetAdditionalAutocompletions,l=t.onExtractAdditionalErrors;if(!n)return null;var c=e.state.validatedValue,u=new Vp.ExpressionParser2,d=u.parseExpression(c).get(),p=Hp(a,r,i),f=function(e,t,n,r,i){var o=new Vp.ExpressionValidator(Vp.JsPlatform.get(),n,r);i.visit(o);var a=o.getAllErrors(),s=(0,Et.mapVector)(a,(function(e){return{begin:e.getStartPosition(),end:e.getEndPosition()+1,message:e.getMessage(),type:"error"}})),l=Math.max(0,s.length-10),c=s.length>1,u=(l>0?s.slice(0,10):s).map((function(e,t){return(c?"[".concat(t+1,"] "):"")+e.message})).join(" ");return o.delete(),{errorText:u,errorHighlights:s}}(Vp.JsPlatform.get(),0,p,o,d),h=f.errorText,g=f.errorHighlights,x=[l?l(c,d):null,h].filter(Boolean).join(" - ");if(c.length>0&&" "===c.charAt(c.length-1))e.setState((function(e){return{errorText:x,errorHighlights:g,autocompletions:{autocompletions:[],selectedCompletionIndex:0,renderEverything:!1}}}));else{var m=e._inputElement?e._inputElement.selectionStart:0,v=Vp.ExpressionCompletionFinder.getCompletionDescriptionsFor(Vp.JsPlatform.get(),p,o,d,m-1),b=Pp({gd:Vp,project:n,projectScopedContainers:p,scope:a},v,null),C=s?s(c).concat(b):b;u.delete(),e.setState((function(e){return{errorText:x,errorHighlights:g,autocompletions:Mp(e.autocompletions,C)}}))}},e}return(0,at.Z)(n,[{key:"componentDidMount",value:function(){this._field&&(this._fieldElementWidth=this._field.getFieldWidth(),this._inputElement=this._field?this._field.getInputNode():null)}},{key:"componentWillUnmount",value:function(){this._enqueueValidation.cancel()}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.expressionType,i=t.parameterMetadata,o=t.project,s=t.scope,c=t.globalObjectsContainer,u=t.objectsContainer,p=t.parameterRenderingService,f=i?i.getDescription():this.props.isInline?void 0:"-",h=i?i.getLongDescription():void 0,g={width:this._fieldElementWidth||"auto",marginLeft:-5,zIndex:fd.default.tooltip+100},x=this.props.isInline?f?zp.backgroundHighlightingInlineWithFloatingLabel:zp.backgroundHighlightingInline:zp.backgroundHighlightingWithFloatingLabel;return(0,d.jsx)(b.I18n,{children:function(t){var i=t.i18n;return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(C.ad,{margin:e.props.isInline?"none":"dense",renderTextField:function(){return(0,d.jsxs)("div",{style:zp.textFieldContainer,children:[(0,d.jsxs)("div",{style:zp.textFieldAndHighlightContainer,children:[(0,d.jsx)(fp,{value:e.state.validatedValue,style:(0,a.Z)((0,a.Z)({},zp.input),x),highlights:e.state.errorHighlights}),(0,d.jsx)(An.Z,{id:e.props.id,margin:e.props.isInline?"none":"dense",value:n,floatingLabelText:f,helperMarkdownText:h,hintText:"string"===r?'""':void 0,inputStyle:zp.input,onChange:e._handleChange,onBlur:e._handleBlurEvent,ref:function(t){return e._field=t},onFocus:e._handleFocus,errorText:e.state.errorText,onClick:function(){return e._enqueueValidation()},onKeyDown:function(t){var n=function(e,t){var n=t.event,r=t.onUpdateAutocompletions,i=t.onInsertAutocompletion;if("ArrowDown"!==n.key&&"ArrowUp"!==n.key&&"ArrowLeft"!==n.key&&"ArrowRight"!==n.key||r(),!e.autocompletions.length)return e;if("ArrowDown"===n.key)return n.preventDefault(),(0,a.Z)((0,a.Z)({},e),{},{renderEverything:!0,selectedCompletionIndex:(e.selectedCompletionIndex+1)%e.autocompletions.length});if("ArrowUp"===n.key)return n.preventDefault(),(0,a.Z)((0,a.Z)({},e),{},{renderEverything:!0,selectedCompletionIndex:(e.autocompletions.length+e.selectedCompletionIndex-1)%e.autocompletions.length});if((0,kn.W$)(n))return n.preventDefault(),n.stopPropagation(),{autocompletions:[],selectedCompletionIndex:0,renderEverything:!1};if((0,kn.ph)(n)||(0,kn.xj)(n)){var o=e.autocompletions[e.selectedCompletionIndex];if(o){if(o.isExact)return e;i(o),n.stopPropagation()}n.preventDefault()}return e}(e.state.autocompletions,{event:t,onUpdateAutocompletions:e._enqueueValidation,onInsertAutocompletion:e._insertAutocompletion});if(e.setState({autocompletions:n}),(0,kn.W$)(t)||(0,kn.Fc)(t)||(0,kn.ph)(t)){var r=t.currentTarget.value;e.props.onChange&&e.props.onChange(r)}},multiline:!0,fullWidth:!0})]}),e._inputElement&&e.state.popoverOpen&&(0,d.jsx)(mt.Z,{onClickAway:e._handleRequestClose,children:(0,d.jsx)(pd.Z,{style:g,open:e.state.popoverOpen,anchorEl:e._inputElement,placement:"bottom",disablePortal:!0,children:(0,d.jsx)(w.I,{children:function(t){var n=t.isMobile;return(0,d.jsx)(de.Z,{style:n?zp.expressionSelectorPopoverContentSmall:zp.expressionSelectorPopoverContent,background:"light",children:(0,d.jsx)(rp,{i18n:i,selectedType:"",onChoose:function(t,n){e._handleExpressionChosen(n)},expressionType:r,focusOnMount:!0,scope:s})})}})})}),e._inputElement&&!e.state.popoverOpen&&p&&(0,d.jsx)(Np,{project:o,anchorEl:e._inputElement,expressionAutocompletions:(t=e.state.autocompletions,0===Ip(t)?t.autocompletions:t.autocompletions.slice(0,7)),remainingCount:Ip(e.state.autocompletions),selectedCompletionIndex:e.state.autocompletions.selectedCompletionIndex,onScroll:e._onExpressionAutocompletionsScroll,onChoose:function(t){e._insertAutocompletion(t),setTimeout((function(){return e.focus()}),50)},parameterRenderingService:p})]});var t},renderButton:function(t){return(0,d.jsxs)(l.Fragment,{children:[!e.props.isInline&&e.props.renderExtraButton&&e.props.renderExtraButton({style:t,onChange:e._handleBlur}),!e.props.isInline&&(0,d.jsx)(T.Z,{id:"open-".concat(r,"-expression-popover-button"),icon:(0,d.jsx)(hd.Z,{}),label:"string"===r?'"ABC"':"number"===r?"123":"",primary:!0,style:t,onClick:e._openExpressionPopover})]})}}),e.state.parametersDialogOpen&&e.state.selectedExpressionInfo&&(0,d.jsx)(sp,{project:o,scope:s,globalObjectsContainer:c,objectsContainer:u,expressionMetadata:e.state.selectedExpressionInfo.metadata,onDone:function(t){e.state.selectedExpressionInfo&&(e.insertExpression(e.state.selectedExpressionInfo,t),e.setState({parametersDialogOpen:!1,selectedExpressionInfo:null}))},onRequestClose:function(){e.setState({parametersDialogOpen:!1,selectedExpressionInfo:null})},parameterRenderingService:p})]})}})}}]),n}(l.Component),Gp=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};return l.useImperativeHandle(t,(function(){return{focus:r}})),(0,d.jsx)(Wp,(0,a.Z)({expressionType:"number",ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-expression-field"):void 0},e))})),Yp=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};return l.useImperativeHandle(t,(function(){return{focus:r}})),(0,d.jsx)(Wp,(0,a.Z)((0,a.Z)({expressionType:"string",ref:n},e),{},{id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-string-field"):void 0}))})),qp=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({width:"17",height:"16",viewBox:"0 0 17 16",fill:"none"},e),{},{children:[(0,d.jsx)("path",{d:"M2.70396 4.03697C3.04778 3.69315 3.5141 3.5 4.00033 3.5H13.3337C13.8199 3.5 14.2862 3.69315 14.63 4.03697C14.9738 4.38079 15.167 4.8471 15.167 5.33333V8.66667C15.167 8.94281 14.9431 9.16667 14.667 9.16667C14.3909 9.16667 14.167 8.94281 14.167 8.66667V5.33333C14.167 5.11232 14.0792 4.90036 13.9229 4.74408C13.7666 4.5878 13.5547 4.5 13.3337 4.5H4.00033C3.77931 4.5 3.56735 4.5878 3.41107 4.74408C3.25479 4.90036 3.16699 5.11232 3.16699 5.33333V9.33333C3.16699 9.55435 3.25479 9.76631 3.41107 9.92259C3.56735 10.0789 3.77931 10.1667 4.00033 10.1667H8.66699C8.94313 10.1667 9.16699 10.3905 9.16699 10.6667C9.16699 10.9428 8.94313 11.1667 8.66699 11.1667H4.00033C3.5141 11.1667 3.04778 10.9735 2.70396 10.6297C2.36015 10.2859 2.16699 9.81956 2.16699 9.33333V5.33333C2.16699 4.8471 2.36015 4.38079 2.70396 4.03697Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M6.34333 6.96269C6.54766 7.14844 6.56272 7.46466 6.37697 7.669L6.3703 7.67633C6.18455 7.88066 5.86833 7.89573 5.664 7.70998C5.45967 7.52423 5.4446 7.208 5.63035 7.00367L5.63702 6.99634C5.82277 6.792 6.13899 6.77694 6.34333 6.96269Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M9.00999 6.96269C9.21433 7.14844 9.22939 7.46466 9.04364 7.669L9.03697 7.67633C8.85122 7.88066 8.535 7.89573 8.33067 7.70998C8.12633 7.52423 8.11127 7.208 8.29702 7.00367L8.30369 6.99634C8.48944 6.792 8.80566 6.77694 9.00999 6.96269Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M11.6767 6.96269C11.881 7.14844 11.8961 7.46466 11.7103 7.669L11.7036 7.67633C11.5179 7.88066 11.2017 7.89573 10.9973 7.70998C10.793 7.52423 10.7779 7.208 10.9637 7.00367L10.9704 6.99634C11.1561 6.792 11.4723 6.77694 11.6767 6.96269Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.9266 8.8887C11.7927 8.81037 11.6396 8.77063 11.4842 8.7742C11.3288 8.77777 11.1781 8.82444 11.0483 8.90799C10.9185 8.99148 10.8146 9.10851 10.7465 9.24564C10.6785 9.38273 10.6484 9.53559 10.6593 9.68809L10.6617 9.72044L11.5142 13.9045C11.6008 14.6744 12.6114 14.9468 13.0556 14.2738L13.8563 13.0609L15.2702 12.8494C16.0593 12.7315 16.2578 11.6868 15.5859 11.2793L11.9373 8.89497L11.9266 8.8887ZM14.7357 11.9183L11.7298 9.95395L12.4324 13.4026L13.2674 12.1378L14.7357 11.9183Z",fill:"currentColor"})]}))})),Xp=l.forwardRef((function(e,t){var n=e.value,r=e.onChange,i=e.parameterIndex,o=e.parameterMetadata,c=e.isInline,u=l.useRef(null),p=function(e){u.current&&u.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:p}}));var f=Cp(o),h=f.some((function(e){return'"'.concat(e,'"')===n})),g=l.useState(!!n&&!h),x=(0,s.Z)(g,2),m=x[0],v=x[1];l.useEffect((function(){!m&&!n&&f.length>0&&r('"'.concat(f[0],'"'))}),[f,m,r,n]);var j=function(){v(!m)},y=function(e,t){r(e.target.value)},Z=o?o.getDescription():void 0,k=f.map((function(e){return(0,d.jsx)($.Z,{value:'"'.concat(e,'"'),label:e,shouldNotTranslate:!0},e)}));return(0,d.jsx)(C.ad,{renderTextField:function(){return m?(0,d.jsx)(Wp,(0,a.Z)((0,a.Z)({expressionType:"string",ref:u,id:void 0!==i?"parameter-".concat(i,"-string-with-selector"):void 0},e),{},{onChange:r})):(0,d.jsx)(K.Z,{ref:u,id:void 0!==i?"parameter-".concat(i,"-string-with-selector"):void 0,value:n,onChange:y,margin:c?"none":"dense",fullWidth:!0,floatingLabelText:Z,translatableHintText:{id:"Choose a value"},helperMarkdownText:o&&o.getLongDescription()||null,children:k})},renderButton:function(e){return m?(0,d.jsx)(J.Z,{id:"switch-expression-select",leftIcon:(0,d.jsx)(qp,{}),style:e,primary:!0,label:(0,d.jsx)(b.Trans,{id:"Select a value"}),onClick:j}):(0,d.jsx)(T.Z,{id:"switch-expression-select",icon:(0,d.jsx)(hd.Z,{}),style:e,primary:!0,label:(0,d.jsx)(b.Trans,{id:"Use an expression"}),onClick:j})}})})),Kp=n.g.gd,Jp=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.parameterMetadata,o=l.useState(null),a=(0,s.Z)(o,2),c=a[0],u=a[1],p=l.useState([]),f=(0,s.Z)(p,2),h=f[0],g=f[1],x=i?i.getDescription():void 0,m=i?i.getLongDescription():void 0,v=i?i.getExtraInfo():void 0,C=l.useCallback((function(){var t=e.instructionMetadata,n=e.instruction,r=e.expressionMetadata,i=e.expression,o=e.parameterIndex,a=e.globalObjectsContainer,s=e.objectsContainer,l=mp({instructionMetadata:t,instruction:n,expressionMetadata:r,expression:i,parameterIndex:o});if(l){var c=Kp.getBehaviorsOfObject(a,s,l,!0).toJSArray().filter((function(e){return(!v||Kp.getTypeOfBehavior(a,s,e,!1)===v)&&(v||!Kp.isDefaultBehavior(a,s,l,e,!0))}));g(c),e.value&&0===c.length&&e.onChange("")}}),[e,v]),j=function(t){u(function(t){return t||e.value?0!==h.filter((function(t){return e.value===t})).length?null:"This behavior is not attached to the object":null}(t))},y=l.useCallback((function(){1===h.length&&e.value!==h[0]&&e.onChange(h[0])}),[h,e]);l.useEffect((function(){y()}),[y]),l.useEffect((function(){C()}),[C]);var Z=""!==v?(0,d.jsx)(b.Trans,{id:"The behavior is not attached to this object. Please select another object or add this behavior."}):(0,d.jsx)(b.Trans,{id:"This object has no behaviors: please add this behavior to the object first."});return(0,d.jsx)(Nu.ZP,{margin:e.isInline?"none":"dense",floatingLabelText:x,helperMarkdownText:m,fullWidth:!0,errorText:h.length?c:Z,value:e.value,onChange:e.onChange,onRequestClose:e.onRequestClose,onApply:e.onApply,onBlur:function(e){j(e.currentTarget.value)},dataSource:h.map((function(e){return{text:e,value:e}})),openOnFocus:!e.isInline,disabled:h.length<=1,ref:n})})),Qp=n(51029),$p=n.n(Qp),ef=n.g.gd,tf=function(e){for(var t=0;t<e.length;++t)if(-1!==",.\"()[]{}()[],+-<>?^=:!+-/* '".indexOf(e[t]))return!1;return!0},nf=function(e){if(!e)return[];var t=function e(t,n,r,i){var o=r?tf(t):i,a=n.getType(),s={name:t,isValidName:o,type:a};return a===ef.Variable.Structure?[s].concat((0,v.Z)($p()(n.getAllChildrenNames().toJSArray(),(function(r){return e(tf(r)?"".concat(t,".").concat(r):"".concat(t,"[").concat('"'+r.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"',"]"),n.getChild(r),!1,o)})))):a===ef.Variable.Array?[s].concat((0,v.Z)($p()(new Array(n.getChildrenCount()).fill(""),(function(r,i){return e("".concat(t,"[").concat(i,"]"),n.getAtIndex(i),!1,o)})))):[s]};return Wu()((0,Et.mapFor)(0,e.count(),(function(n){return t(e.getNameAt(n),e.getAt(n),!0,!0)})))},rf=n(63348),of=n.n(rf),af=0,sf=1,lf=2,cf=3,uf=4,df=function(e,t){if(!e)return af;for(var n=0;n<e.length;++n){var r=e[n];if("["===r)break;if(" "===r)return lf;if('"'===r)return sf;if("("===r||"+"===r||"-"===r||"/"===r||"*"===r)return cf}var i=e.indexOf("."),o=e.indexOf("["),a=-1!==i||-1!==o?e.substring(0,Math.min(-1===i?e.length:i,-1===o?e.length:o)):e;return t&&!t.some((function(e){return e.has(a)}))?uf:af},pf=l.forwardRef((function(e,t){var n=e.variablesContainers,r=e.value,i=e.onChange,o=e.isInline,a=e.onOpenDialog,c=e.parameterMetadata,u=e.onRequestClose,p=e.onApply,f=e.id,h=l.useRef(null),g=l.useState([]),x=(0,s.Z)(g,2),m=x[0],j=x[1],y=l.useCallback((function(){var e=0===n.length?[]:n.map((function(e){return nf(e).map((function(e){var t=e.name;return e.isValidName?t:null})).filter(Boolean)})).reduce((function(e,t){return of()(e,t)}));j(e.map((function(e){return{text:e,value:e}})))}),[n]),Z=function(e){h.current&&h.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:Z,updateAutocompletions:y}})),l.useEffect((function(){y()}),[y]);var k=c?c.getDescription():void 0,w=df(r,n),S=w===sf?(0,d.jsx)(b.Trans,{id:"It seems you entered a name with a quote. Variable names should not be quoted."}):w===lf?(0,d.jsx)(b.Trans,{id:"The variable name contains a space - this is not recommended. Prefer to use underscores or uppercase letters to separate words."}):w===cf?(0,d.jsx)(b.Trans,{id:"The variable name looks like you're building an expression or a formula. You can only use this for structure or arrays. For example: Score[3]."}):null,P=w===uf?{id:"This variable is not declared. It's recommended to use the *variables editor* to add it."}:null;return(0,d.jsx)(b.I18n,{children:function(e){var t=e.i18n;return(0,d.jsx)(C.ad,{renderTextField:function(){return(0,d.jsx)(Nu.ZP,{margin:o?"none":"dense",floatingLabelText:k,helperMarkdownText:P?t._(P):c?c.getLongDescription():void 0,errorText:S,fullWidth:!0,value:r,onChange:i,onRequestClose:u,onApply:p,dataSource:[].concat((0,v.Z)(m),[a&&1===n.length?{translatableValue:{id:"Add or edit variables..."},text:"",value:"",onClick:a}:null]).filter(Boolean),openOnFocus:!o,ref:h,id:f})},renderButton:function(e){return a&&!o?(0,d.jsx)(T.Z,{icon:(0,d.jsx)(ic.Z,{}),disabled:1!==n.length,primary:!0,style:e,onClick:a}):null}})}})})),ff=function(e,t,n){var i,o=e.value,a=e.parameterMetadata,s=e.expressionIsValid,c=e.InvalidParameterValue,u=e.MissingParameterValue;if(!o&&!a.isOptional())return(0,d.jsx)(u,{});var p=s?l.Fragment:c;return(0,d.jsx)("span",{title:n,className:Pn()((i={},(0,r.Z)(i,Pu,!0),(0,r.Z)(i,"instruction-warning-parameter",df(o)!==af),i)),children:(0,d.jsxs)(p,{children:[(0,d.jsx)(t,{className:Pn()((0,r.Z)({},xu,!0))}),o]})})},hf=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.50002 3.66669C4.03978 3.66669 3.66669 4.03978 3.66669 4.50002V11.5C3.66669 11.9603 4.03978 12.3334 4.50002 12.3334H11.5C11.9603 12.3334 12.3334 11.9603 12.3334 11.5V4.50002C12.3334 4.03978 11.9603 3.66669 11.5 3.66669H4.50002ZM2.66669 4.50002C2.66669 3.4875 3.4875 2.66669 4.50002 2.66669H11.5C12.5126 2.66669 13.3334 3.4875 13.3334 4.50002V11.5C13.3334 12.5126 12.5126 13.3334 11.5 13.3334H4.50002C3.4875 13.3334 2.66669 12.5126 2.66669 11.5V4.50002Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.16669 2.83335C5.44283 2.83335 5.66669 3.05721 5.66669 3.33335V12.6667C5.66669 12.9428 5.44283 13.1667 5.16669 13.1667C4.89054 13.1667 4.66669 12.9428 4.66669 12.6667V3.33335C4.66669 3.05721 4.89054 2.83335 5.16669 2.83335Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.8334 2.83335C11.1095 2.83335 11.3334 3.05721 11.3334 3.33335V12.6667C11.3334 12.9428 11.1095 13.1667 10.8334 13.1667C10.5572 13.1667 10.3334 12.9428 10.3334 12.6667V3.33335C10.3334 3.05721 10.5572 2.83335 10.8334 2.83335Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.83335 5.83335C2.83335 5.55721 3.05721 5.33335 3.33335 5.33335H5.00002C5.27616 5.33335 5.50002 5.55721 5.50002 5.83335C5.50002 6.1095 5.27616 6.33335 5.00002 6.33335H3.33335C3.05721 6.33335 2.83335 6.1095 2.83335 5.83335Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.8334 5.83335C10.8334 5.55721 11.0572 5.33335 11.3334 5.33335H12.6667C12.9428 5.33335 13.1667 5.55721 13.1667 5.83335C13.1667 6.1095 12.9428 6.33335 12.6667 6.33335H11.3334C11.0572 6.33335 10.8334 6.1095 10.8334 5.83335Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.83335 8.00002C2.83335 7.72388 3.05721 7.50002 3.33335 7.50002H12.6667C12.9428 7.50002 13.1667 7.72388 13.1667 8.00002C13.1667 8.27616 12.9428 8.50002 12.6667 8.50002H3.33335C3.05721 8.50002 2.83335 8.27616 2.83335 8.00002Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.83335 10.1667C2.83335 9.89054 3.05721 9.66669 3.33335 9.66669H5.00002C5.27616 9.66669 5.50002 9.89054 5.50002 10.1667C5.50002 10.4428 5.27616 10.6667 5.00002 10.6667H3.33335C3.05721 10.6667 2.83335 10.4428 2.83335 10.1667Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.8334 10.1667C10.8334 9.89054 11.0572 9.66669 11.3334 9.66669H12.6667C12.9428 9.66669 13.1667 9.89054 13.1667 10.1667C13.1667 10.4428 12.9428 10.6667 12.6667 10.6667H11.3334C11.0572 10.6667 10.8334 10.4428 10.8334 10.1667Z",fill:"currentColor"})]}))})),gf=l.forwardRef((function(e,t){var n=l.useRef(null),r=l.useState(!1),i=(0,s.Z)(r,2),o=i[0],a=i[1],c=function(e){n.current&&n.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:c}}));var u=e.project,p=e.scope,f=p.layout,h=l.useCallback((function(){return u&&f?fi.findAllLayoutVariables(u.getCurrentPlatform(),u,f):[]}),[u,f]),g=l.useMemo((function(){return f?[f.getVariables()]:[]}),[f]);return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(pf,{variablesContainers:g,parameterMetadata:e.parameterMetadata,value:e.value,onChange:e.onChange,isInline:e.isInline,onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n,onOpenDialog:function(){return a(!0)},globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,scope:p,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-scene-variable-field"):void 0}),o&&f&&u&&(0,d.jsx)(zn,{project:u,title:(0,d.jsx)(b.Trans,{id:"{0} variables",values:{0:f.getName()}}),open:!0,variablesContainer:f.getVariables(),onCancel:function(){return a(!1)},onApply:function(){a(!1),n.current&&n.current.updateAutocompletions()},emptyPlaceholderTitle:(0,d.jsx)(b.Trans,{id:"Add your first scene variable"}),emptyPlaceholderDescription:(0,d.jsx)(b.Trans,{id:"These variables hold additional information on a scene."}),helpPagePath:"/all-features/variables/scene-variables",onComputeAllVariableNames:h,preventRefactoringToDeleteInstructions:!0})]})})),xf=l.forwardRef((function(e,t){var n=l.useRef(null),r=l.useState(!1),i=(0,s.Z)(r,2),o=i[0],a=i[1],c=function(e){n.current&&n.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:c}}));var u=e.project,p=e.scope,f=l.useMemo((function(){return u?[u.getVariables()]:[]}),[u]);return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(pf,{variablesContainers:f,parameterMetadata:e.parameterMetadata,value:e.value,onChange:e.onChange,isInline:e.isInline,onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n,onOpenDialog:function(){return a(!0)},globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,scope:p}),o&&u&&(0,d.jsx)(zn,{project:u,title:(0,d.jsx)(b.Trans,{id:"Global Variables"}),open:o,variablesContainer:u.getVariables(),onCancel:function(){return a(!1)},onApply:function(){a(!1),n.current&&n.current.updateAutocompletions()},emptyPlaceholderTitle:(0,d.jsx)(b.Trans,{id:"Add your first global variable"}),emptyPlaceholderDescription:(0,d.jsx)(b.Trans,{id:"These variables hold additional information on a project."}),helpPagePath:"/all-features/variables/global-variables",onComputeAllVariableNames:function(){return u?fi.findAllGlobalVariables(u.getCurrentPlatform(),u):[]},preventRefactoringToDeleteInstructions:!0})]})}));function mf(e,t,n){return t&&t.getObjectGroups().has(n)?t.getObjectGroups().get(n):e.getObjectGroups().has(n)?e.getObjectGroups().get(n):null}var vf=l.memo(l.forwardRef((function(e,t){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,width:"24",height:"24",viewBox:"0 0 24 24",children:(0,d.jsxs)("g",{fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round",children:[(0,d.jsx)("path",{d:"M4.75 8L12 4.75L19.25 8L12 11.25L4.75 8Z",strokeLinecap:"round"}),(0,d.jsx)("path",{d:"M4.75 16L12 19.25L19.25 16",strokeLinecap:"round"}),(0,d.jsx)("path",{d:"m19.25 8v8"}),(0,d.jsx)("path",{d:"m4.75 8v8"}),(0,d.jsx)("path",{d:"M12 11.5V19"})]})}))}))),bf=l.forwardRef((function(e,t){var n=l.useRef(null),r=l.useState(!1),i=(0,s.Z)(r,2),o=i[0],a=i[1],c=function(e){n.current&&n.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:c}}));var u=e.project,p=e.globalObjectsContainer,f=e.objectsContainer,h=e.scope,g=e.instructionMetadata,x=e.instruction,m=e.expressionMetadata,v=e.expression,C=e.parameterIndex,j=mp({instructionMetadata:g,instruction:x,expressionMetadata:m,expression:v,parameterIndex:C}),y=h.layout,Z=j?Ku(p,f,j):null,k=l.useMemo((function(){return j?function(e,t,n){var r=Ku(e,t,n),i=[];if(r)i.push(r.getVariables());else{var o=mf(e,t,n);if(o){var a,s=(0,ia.Z)(o.getAllObjectsNames().toJSArray());try{for(s.s();!(a=s.n()).done;){var l=Ku(e,t,a.value);l&&i.push(l.getVariables())}}catch(c){s.e(c)}finally{s.f()}}}return i}(p,f,j):[]}),[j,p,f]);return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(pf,{variablesContainers:k,parameterMetadata:e.parameterMetadata,value:e.value,onChange:e.onChange,isInline:e.isInline,onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n,onOpenDialog:function(){return a(!0)},globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,scope:h,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-object-variable-field"):void 0}),o&&1===k.length&&u&&(0,d.jsx)(zn,{project:u,title:(0,d.jsx)(b.Trans,{id:"Object Variables"}),open:o,variablesContainer:k[0],emptyPlaceholderTitle:(0,d.jsx)(b.Trans,{id:"Add your first object variable"}),emptyPlaceholderDescription:(0,d.jsx)(b.Trans,{id:"These variables hold additional information on an object."}),helpPagePath:"/all-features/variables/object-variables",onComputeAllVariableNames:function(){return u&&y&&Z?fi.findAllObjectVariables(u.getCurrentPlatform(),u,y,Z):[]},onCancel:function(){return a(!1)},onApply:function(){a(!1),n.current&&n.current.updateAutocompletions()},preventRefactoringToDeleteInstructions:!0})]})})),Cf=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.scope.layout,o=i?(0,Et.mapFor)(0,i.getLayersCount(),(function(e){return i.getLayerAt(e).getName()})):[],c=!!o.find((function(t){return'"'.concat(t,'"')===e.value})),u=l.useState(!!e.value&&!c||e.scope.eventsFunctionsExtension),p=(0,s.Z)(u,2),f=p[0],h=p[1],g=function(){'""'===e.value&&e.onChange(""),h(!f)},x=function(t,n){e.onChange(t.target.value)},m=function(t){e.onChange(t)},v=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,j=o.map((function(e){var t=""===e;return(0,d.jsx)($.Z,{value:t?"":'"'.concat(e,'"'),label:t?{id:"Base layer"}:e,shouldNotTranslate:!t},t?"Base layer":e)}));return(0,d.jsx)(C.ad,{renderTextField:function(){return f?(0,d.jsx)(Wp,(0,a.Z)((0,a.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-layer-field"):void 0,expressionType:"string"},e),{},{onChange:m})):(0,d.jsx)(K.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-layer-field"):void 0,value:e.value,onChange:x,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:v,translatableHintText:{id:"Choose a layer"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:j})},renderButton:function(t){return e.scope.eventsFunctionsExtension?null:f?(0,d.jsx)(J.Z,{id:"switch-expression-select",leftIcon:(0,d.jsx)(qp,{}),style:t,primary:!0,label:(0,d.jsx)(b.Trans,{id:"Select a layer"}),onClick:g}):(0,d.jsx)(T.Z,{id:"switch-expression-select",icon:(0,d.jsx)(hd.Z,{}),style:t,primary:!0,label:(0,d.jsx)(b.Trans,{id:"Use an expression"}),onClick:g})}})})),jf=n(74661),yf=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};return l.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,d.jsx)(jf.Z,{margin:e.isInline?"none":"dense",project:e.project,resourceManagementProps:e.resourceManagementProps,resourcesLoader:Dl.Z,resourceKind:"image",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Choose the image file to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for ImageResourceField"),null)})),Zf=yf,kf=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};return l.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,d.jsx)(jf.Z,{margin:e.isInline?"none":"dense",project:e.project,resourceManagementProps:e.resourceManagementProps,resourcesLoader:Dl.Z,resourceKind:"audio",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Choose the audio file to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-audio-field"):void 0}):(console.error("Missing project or resourceManagementProps for AudioResourceField"),null)})),wf=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};return l.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,d.jsx)(jf.Z,{margin:e.isInline?"none":"dense",project:e.project,resourceManagementProps:e.resourceManagementProps,resourcesLoader:Dl.Z,resourceKind:"video",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Choose the video file to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for VideoResourceField"),null)})),Tf=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};return l.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,d.jsx)(jf.Z,{margin:e.isInline?"none":"dense",project:e.project,resourceManagementProps:e.resourceManagementProps,resourcesLoader:Dl.Z,resourceKind:"json",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Choose the json file to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for JsonResourceField"),null)})),Sf=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};return l.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,d.jsx)(jf.Z,{margin:e.isInline?"none":"dense",project:e.project,resourceManagementProps:e.resourceManagementProps,resourcesLoader:Dl.Z,resourceKind:"spine",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Choose the spine json file to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for SpineResourceField"),null)})),Pf=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};return l.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,d.jsx)(jf.Z,{margin:e.isInline?"none":"dense",project:e.project,resourceManagementProps:e.resourceManagementProps,resourcesLoader:Dl.Z,resourceKind:"bitmapFont",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Choose the bitmap font file (.fnt, .xml) to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for BitmapFontResourceField"),null)})),Ef=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};return l.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,d.jsx)(jf.Z,{margin:e.isInline?"none":"dense",project:e.project,resourceManagementProps:e.resourceManagementProps,resourcesLoader:Dl.Z,resourceKind:"font",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Choose the font file to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for FontResourceField"),null)})),If=n(37237),Mf=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};return l.useImperativeHandle(t,(function(){return{focus:r}})),(0,d.jsx)(Wp,(0,a.Z)({expressionType:"string",ref:n,renderExtraButton:function(t){var n=t.style,r=t.onChange;return(0,d.jsx)(If.Z,{style:n,disableAlpha:!0,color:(0,Qn.A0)(e.value),onChangeComplete:function(e){r('"'+e.rgb.r+";"+e.rgb.g+";"+e.rgb.b+'"')}})},onExtractAdditionalErrors:function(e,t){return e.trim().startsWith('"\\"')?"A color is a text in the format R;G;B, like 100;200;180 (numbers going from 0 to 255). You need to surround the text with quotes, but the text itself should not contain a quote inside.":null}},e))})),Lf=n(24289),Af=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&(0,Lf.o)(n.current)};l.useImperativeHandle(t,(function(){return{focus:r}}));var i=""!==e.value&&"1"!==e.value&&"0"!==e.value;return(0,d.jsxs)(L.sg,{expand:!0,noMargin:!0,children:[(0,d.jsxs)(L.x1,{expand:!0,alignItems:"center",children:[(0,d.jsx)(L.sg,{children:(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Instant"}),primary:""===e.value||"0"===e.value,onClick:function(){return e.onChange("0")},ref:n})}),(0,d.jsx)(L.sg,{children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"The force will only push the object during the time of one frame. Typically used in an event with no conditions or with conditions that stay valid for a certain amount of time."})})})]}),(0,d.jsxs)(L.x1,{expand:!0,alignItems:"center",children:[(0,d.jsx)(L.sg,{children:(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Permanent"}),primary:"1"===e.value,onClick:function(){return e.onChange("1")}})}),(0,d.jsx)(L.sg,{children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:'The force will push the object forever, unless you use the action "Stop the object". Typically used in an event with conditions that are only true once, or with a "Trigger Once" condition.'})})})]}),i&&(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(Ta.Z,{children:(0,d.jsx)(b.Trans,{id:"or"})}),(0,d.jsx)(L.x1,{expand:!0,children:(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(Wp,(0,a.Z)({expressionType:"number"},e))})}),(0,d.jsx)(Ta.Z,{children:(0,d.jsx)(b.Trans,{id:'The usage of a number or expression is deprecated. Please now use only "Permanent" or "Instant" for configuring forces.'})})]})]})})),Ff=function(e){return(0,Et.mapFor)(0,e.getLayoutsCount(),(function(t){return e.getLayoutAt(t)}))},Of=function(e){return(0,Et.mapFor)(0,e.getExternalEventsCount(),(function(t){return e.getExternalEventsAt(t)}))},Rf=function(e){return(0,Et.mapFor)(0,e.getExternalLayoutsCount(),(function(t){return e.getExternalLayoutAt(t)}))},Df=function(e){return(0,Et.mapFor)(0,e.getEventsFunctionsExtensionsCount(),(function(t){return e.getEventsFunctionsExtensionAt(t)}))},_f=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.project?Ff(e.project).map((function(e){return e.getName()})):[],o=!!i.find((function(t){return'"'.concat(t,'"')===e.value})),c=l.useState(!!e.value&&!o||e.scope.eventsFunctionsExtension),u=(0,s.Z)(c,2),p=u[0],f=u[1],h=function(){f(!p)},g=function(t,n){e.onChange(t.target.value)},x=function(t){e.onChange(t)},m=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,v=i.map((function(e){return(0,d.jsx)($.Z,{value:'"'.concat(e,'"'),label:e,shouldNotTranslate:!0},e)}));return(0,d.jsx)(C.ad,{renderTextField:function(){return p?(0,d.jsx)(Wp,(0,a.Z)((0,a.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-scene-field"):void 0,expressionType:"string"},e),{},{onChange:x})):(0,d.jsx)(K.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-scene-field"):void 0,value:e.value,onChange:g,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:m,translatableHintText:{id:"Choose a scene"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:v})},renderButton:function(e){return p?(0,d.jsx)(J.Z,{id:"switch-expression-select",leftIcon:(0,d.jsx)(qp,{}),style:e,primary:!0,label:(0,d.jsx)(b.Trans,{id:"Select a scene"}),onClick:h}):(0,d.jsx)(T.Z,{id:"switch-expression-select",icon:(0,d.jsx)(hd.Z,{}),style:e,primary:!0,label:(0,d.jsx)(b.Trans,{id:"Use an expression"}),onClick:h})}})})),Bf=function(e){return(0,Et.mapFor)(0,e.getEffectsCount(),(function(t){return e.getEffectAt(t).getName()}))},Nf=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.scope,o=e.instruction,c=e.expression,u=e.parameterIndex,p=function(){var e=i.layout;if(!e)return[];var t=bp(vp({instruction:o,expression:c,parameterIndex:u}))||"";if(!e.hasLayerNamed(t))return[];var n=e.getLayer(t);return Bf(n.getEffects()).sort()}(),f=!!p.find((function(t){return'"'.concat(t,'"')===e.value})),h=l.useState(!!e.value&&!f||e.scope.eventsFunctionsExtension),g=(0,s.Z)(h,2),x=g[0],m=g[1],v=function(){m(!x)},j=function(t,n){e.onChange(t.target.value)},y=function(t){e.onChange(t)},Z=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,k=p.map((function(e){return(0,d.jsx)($.Z,{value:'"'.concat(e,'"'),label:e,shouldNotTranslate:!0},e)}));return(0,d.jsx)(C.ad,{renderTextField:function(){return x?(0,d.jsx)(Wp,(0,a.Z)((0,a.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-layer-effect-name-field"):void 0,expressionType:"string"},e),{},{onChange:y})):(0,d.jsx)(K.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-layer-effect-name-field"):void 0,value:e.value,onChange:j,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:Z,translatableHintText:{id:"Choose an effect"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:k})},renderButton:function(t){return e.scope.eventsFunctionsExtension?null:x?(0,d.jsx)(J.Z,{id:"switch-expression-select",leftIcon:(0,d.jsx)(qp,{}),style:t,primary:!0,label:(0,d.jsx)(b.Trans,{id:"Select an effect"}),onClick:v}):(0,d.jsx)(T.Z,{id:"switch-expression-select",icon:(0,d.jsx)(hd.Z,{}),style:t,primary:!0,label:(0,d.jsx)(b.Trans,{id:"Use an expression"}),onClick:v})}})})),Uf=n.g.gd,Hf=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.project,o=e.scope,c=e.instruction,u=e.expression,p=e.parameterIndex,f=function(){var e=o.layout;if(!e||!i)return[];var t=bp(vp({instruction:c,expression:u,parameterIndex:p?p-1:null}))||"";if(!e.hasLayerNamed(t))return[];var n=e.getLayer(t),r=bp(vp({instruction:c,expression:u,parameterIndex:p}));if(!r||!n.getEffects().hasEffectNamed(r))return[];var a=n.getEffects().getEffect(r).getEffectType();return Uf.MetadataProvider.getEffectMetadata(i.getCurrentPlatform(),a).getProperties().keys().toJSArray().sort()}(),h=!!f.find((function(t){return'"'.concat(t,'"')===e.value})),g=l.useState(!!e.value&&!h||e.scope.eventsFunctionsExtension),x=(0,s.Z)(g,2),m=x[0],v=x[1],j=function(){v(!m)},y=function(t,n){e.onChange(t.target.value)},Z=function(t){e.onChange(t)},k=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,w=f.map((function(e){return(0,d.jsx)($.Z,{value:'"'.concat(e,'"'),label:e,shouldNotTranslate:!0},e)}));return(0,d.jsx)(C.ad,{renderTextField:function(){return m?(0,d.jsx)(Wp,(0,a.Z)((0,a.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-layer-effect-parameter-name-field"):void 0,expressionType:"string"},e),{},{onChange:Z})):(0,d.jsx)(K.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-layer-effect-parameter-name-field"):void 0,value:e.value,onChange:y,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:k,translatableHintText:{id:"Choose a parameter"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:w})},renderButton:function(t){return e.scope.eventsFunctionsExtension?null:m?(0,d.jsx)(J.Z,{id:"switch-expression-select",leftIcon:(0,d.jsx)(qp,{}),style:t,primary:!0,label:(0,d.jsx)(b.Trans,{id:"Select an effect property"}),onClick:j}):(0,d.jsx)(T.Z,{id:"switch-expression-select",icon:(0,d.jsx)(hd.Z,{}),style:t,primary:!0,label:(0,d.jsx)(b.Trans,{id:"Use an expression"}),onClick:j})}})})),Vf=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.project,o=e.scope,c=e.instructionMetadata,u=e.instruction,p=e.expressionMetadata,f=e.expression,h=e.parameterIndex,g=function(){var e=mp({instructionMetadata:c,instruction:u,expressionMetadata:p,expression:f,parameterIndex:h});if(!e||!i)return[];var t=Ku(i,o.layout,e);if(t)return Bf(t.getEffects()).sort();var n=mf(i,o.layout,e);if(n){var r=(0,Et.mapVector)(n.getAllObjectsNames(),(function(e){var t=Ku(i,o.layout,e);return t?Bf(t.getEffects()):null})).filter(Boolean);return of().apply(void 0,(0,v.Z)(r)).sort()}return[]}(),x=!!g.find((function(t){return'"'.concat(t,'"')===e.value})),m=l.useState(!!e.value&&!x||e.scope.eventsFunctionsExtension),j=(0,s.Z)(m,2),y=j[0],Z=j[1],k=function(){Z(!y)},w=function(t,n){e.onChange(t.target.value)},S=function(t){e.onChange(t)},P=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,E=g.map((function(e){return(0,d.jsx)($.Z,{value:'"'.concat(e,'"'),label:e,shouldNotTranslate:!0},e)}));return(0,d.jsx)(C.ad,{renderTextField:function(){return y?(0,d.jsx)(Wp,(0,a.Z)((0,a.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-object-effect-name-field"):void 0,expressionType:"string"},e),{},{onChange:S})):(0,d.jsx)(K.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-object-effect-name-field"):void 0,value:e.value,onChange:w,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:P,translatableHintText:{id:"Choose an effect"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:E})},renderButton:function(t){return e.scope.eventsFunctionsExtension?null:y?(0,d.jsx)(J.Z,{id:"switch-expression-select",leftIcon:(0,d.jsx)(qp,{}),style:t,primary:!0,label:(0,d.jsx)(b.Trans,{id:"Select an effect"}),onClick:k}):(0,d.jsx)(T.Z,{id:"switch-expression-select",icon:(0,d.jsx)(hd.Z,{}),style:t,primary:!0,label:(0,d.jsx)(b.Trans,{id:"Use an expression"}),onClick:k})}})})),zf=n(60575),Wf=n.n(zf),Gf=n.g.gd,Yf=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:r}}));var i=function(){var t=e.project,n=e.scope,r=e.instructionMetadata,i=e.instruction,o=e.expressionMetadata,a=e.expression,s=e.parameterIndex,l=mp({instructionMetadata:r,instruction:i,expressionMetadata:o,expression:a,parameterIndex:s}),c=bp(vp({instruction:i,expression:a,parameterIndex:s}));if(!l||!t||!c)return[];var u=null,d=Ku(t,n.layout,l);if(d&&d.getEffects().hasEffectNamed(c)&&(u=d.getEffects().getEffect(c).getEffectType()),!u){var p=mf(t,n.layout,l);if(p){var f=(0,Et.mapVector)(p.getAllObjectsNames(),(function(e){var r=Ku(t,n.layout,e);return r&&r.getEffects().hasEffectNamed(c)?r.getEffects().getEffect(c).getEffectType():null}));f.every((function(e){return!!e}))&&1===Wf()(f).length&&(u=f[0])}}return u?Gf.MetadataProvider.getEffectMetadata(t.getCurrentPlatform(),u).getProperties().keys().toJSArray().sort():[]}(),o=!!i.find((function(t){return'"'.concat(t,'"')===e.value})),c=l.useState(!!e.value&&!o||e.scope.eventsFunctionsExtension),u=(0,s.Z)(c,2),p=u[0],f=u[1],h=function(){f(!p)},g=function(t,n){e.onChange(t.target.value)},x=function(t){e.onChange(t)},m=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,v=i.map((function(e){return(0,d.jsx)($.Z,{value:'"'.concat(e,'"'),label:e,shouldNotTranslate:!0},e)}));return(0,d.jsx)(C.ad,{renderTextField:function(){return p?(0,d.jsx)(Wp,(0,a.Z)((0,a.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-layer-effect-parameter-name-field"):void 0,expressionType:"string"},e),{},{onChange:x})):(0,d.jsx)(K.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-layer-effect-parameter-name-field"):void 0,value:e.value,onChange:g,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:m,translatableHintText:{id:"Choose a parameter"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:v})},renderButton:function(t){return e.scope.eventsFunctionsExtension?null:p?(0,d.jsx)(J.Z,{id:"switch-expression-select",leftIcon:(0,d.jsx)(qp,{}),style:t,primary:!0,label:(0,d.jsx)(b.Trans,{id:"Select an effect property"}),onClick:h}):(0,d.jsx)(T.Z,{id:"switch-expression-select",icon:(0,d.jsx)(hd.Z,{}),style:t,primary:!0,label:(0,d.jsx)(b.Trans,{id:"Use an expression"}),onClick:h})}})})),qf=n.g.gd,Xf=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:r}}));return(0,d.jsx)(Wp,(0,a.Z)({expressionType:"string",onGetAdditionalAutocompletions:function(t){return function(){var t=e.project,n=e.scope,r=e.instructionMetadata,i=e.instruction,o=e.expressionMetadata,a=e.expression,s=e.parameterIndex,l=mp({instructionMetadata:r,instruction:i,expressionMetadata:o,expression:a,parameterIndex:s});if(!l||!t)return[];var c=Ku(t,n.layout,l);if(c&&"Sprite"===c.getType()){var u=qf.asSpriteConfiguration(c.getConfiguration()).getAnimations();return(0,jp.ge)(u).map((function(e){return e.length>0?e:null})).filter(Boolean).sort().map((function(e){return{kind:"Text",completion:'"'.concat(e,'"')}}))}var d=mf(t,n.layout,l);if(d){var p=(0,Et.mapVector)(d.getAllObjectsNames(),(function(e){var r=Ku(t,n.layout,e);if(!r||"Sprite"!==r.getType())return null;var i=qf.asSpriteConfiguration(r.getConfiguration()).getAnimations();return(0,jp.ge)(i).map((function(e){return e.length>0?e:null})).filter(Boolean)}));return p.some((function(e){return!e}))?[]:of().apply(void 0,(0,v.Z)(p)).sort().map((function(e){return{kind:"Text",completion:'"'.concat(e,'"')}}))}return[]}().filter((function(e){return 0===e.completion.indexOf(t)}))},ref:n},e))})),Kf=n.g.gd,Jf=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.project,o=e.scope,c=e.instructionMetadata,u=e.instruction,p=e.expressionMetadata,f=e.expression,h=e.parameterIndex,g=function(){var e=mp({instructionMetadata:c,instruction:u,expressionMetadata:p,expression:f,parameterIndex:h});if(!e||!i)return[];var t=Ku(i,o.layout,e);if(!t)return[];if("Sprite"===t.getType()){var n=Kf.asSpriteConfiguration(t.getConfiguration()).getAnimations();return(0,Et.mapFor)(0,n.getAnimationsCount(),(function(e){var t=n.getAnimation(e).getName();return t.length>0?t:null})).filter(Boolean)}if("Scene3D::Model3DObject"===t.getType()){var r=Kf.asModel3DConfiguration(t.getConfiguration());return(0,Et.mapFor)(0,r.getAnimationsCount(),(function(e){var t=r.getAnimation(e).getName();return t.length>0?t:null})).filter(Boolean).sort()}if("SpineObject::SpineObject"===t.getType()){var a=Kf.asSpineConfiguration(t.getConfiguration());return(0,Et.mapFor)(0,a.getAnimationsCount(),(function(e){var t=a.getAnimation(e).getName();return t.length>0?t:null})).filter(Boolean).sort()}if(i.hasEventsBasedObject(t.getType())&&i.getEventsBasedObject(t.getType()).isAnimatable()){var s=Kf.asCustomObjectConfiguration(t.getConfiguration()).getAnimations();return(0,Et.mapFor)(0,s.getAnimationsCount(),(function(e){var t=s.getAnimation(e).getName();return t.length>0?t:null})).filter(Boolean)}return[]}(),x=!!g.find((function(t){return'"'.concat(t,'"')===e.value})),m=l.useState(!!e.value&&!x||e.scope.eventsFunctionsExtension),v=(0,s.Z)(m,2),j=v[0],y=v[1],Z=function(){y(!j)},k=function(t,n){e.onChange(t.target.value)},w=function(t){e.onChange(t)},S=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,P=g.map((function(e){return(0,d.jsx)($.Z,{value:'"'.concat(e,'"'),label:e,shouldNotTranslate:!0},e)}));return(0,d.jsx)(C.ad,{renderTextField:function(){return j?(0,d.jsx)(Wp,(0,a.Z)((0,a.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-animation-name-field"):void 0,expressionType:"string"},e),{},{onChange:w})):(0,d.jsx)(K.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-animation-name-field"):void 0,value:e.value,onChange:k,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:S,translatableHintText:{id:"Choose an animation"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:P})},renderButton:function(t){return e.scope.eventsFunctionsExtension?null:j?(0,d.jsx)(J.Z,{id:"switch-expression-select",leftIcon:(0,d.jsx)(qp,{}),style:t,primary:!0,label:(0,d.jsx)(b.Trans,{id:"Select an animation"}),onClick:Z}):(0,d.jsx)(T.Z,{id:"switch-expression-select",icon:(0,d.jsx)(hd.Z,{}),style:t,primary:!0,label:(0,d.jsx)(b.Trans,{id:"Use an expression"}),onClick:Z})}})})),Qf=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.parameterMetadata,o=i&&i.getExtraInfo()?i.getExtraInfo().split(","):[],a=e.scope.eventsBasedBehavior||e.scope.eventsBasedObject,s=a?a.getEventsFunctions():e.scope.eventsFunctionsExtension,c=(e.scope.eventsFunction&&s?Zp(s,e.scope.eventsFunction,o):[]).map((function(e){var t=e.getName();return(0,d.jsx)($.Z,{value:'"'.concat(t,'"'),label:t,shouldNotTranslate:!0},t)})),u=e.parameterMetadata?e.parameterMetadata.getDescription():void 0;return(0,d.jsx)(K.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-function-parameter-field"):void 0,value:e.value,onChange:function(t,n){e.onChange(t.target.value)},margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:u,translatableHintText:{id:"Choose a parameter"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:c})})),$f=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.project?Rf(e.project).map((function(e){return e.getName()})):[],o=!!i.find((function(t){return'"'.concat(t,'"')===e.value})),c=l.useState(!!e.value&&!o||e.scope.eventsFunctionsExtension),u=(0,s.Z)(c,2),p=u[0],f=u[1],h=function(){f(!p)},g=function(t,n){e.onChange(t.target.value)},x=function(t){e.onChange(t)},m=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,v=i.map((function(e){return(0,d.jsx)($.Z,{value:'"'.concat(e,'"'),label:e,shouldNotTranslate:!0},e)}));return(0,d.jsx)(C.ad,{renderTextField:function(){return p?(0,d.jsx)(Wp,(0,a.Z)((0,a.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-external-layout-field"):void 0,expressionType:"string"},e),{},{onChange:x})):(0,d.jsx)(K.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-external-layout-field"):void 0,value:e.value,onChange:g,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:m,translatableHintText:{id:"Choose an external layout"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:v})},renderButton:function(e){return p?(0,d.jsx)(J.Z,{id:"switch-expression-select",leftIcon:(0,d.jsx)(qp,{}),style:e,primary:!0,label:(0,d.jsx)(b.Trans,{id:"Select an external layout"}),onClick:h}):(0,d.jsx)(T.Z,{id:"switch-expression-select",icon:(0,d.jsx)(hd.Z,{}),style:e,primary:!0,label:(0,d.jsx)(b.Trans,{id:"Use an expression"}),onClick:h})}})})),eh=function(e){var t=e.onClose,n=e.open,r=e.project,i=e.leaderboardId,o=l.useState(!1),a=(0,s.Z)(o,2),c=a[0],u=a[1];return(0,d.jsx)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Leaderboards"}),id:"leaderboard-admin-dialog",actions:[(0,d.jsx)(J.Z,{id:"close-button",label:(0,d.jsx)(b.Trans,{id:"Close"}),disabled:c,onClick:t},"Close")],secondaryActions:[(0,d.jsx)(Hn.Z,{helpPagePath:"/interface/games-dashboard/leaderboard-administration"},"help")],open:n,cannotBeDismissed:c,onRequestClose:t,flexBody:!0,fullHeight:!0,children:(0,d.jsx)(zo,{onLoading:u,project:r,leaderboardIdToSelectAtOpening:i})})},th=function(e,t){if(!e)return t;var n=e.find((function(e){return'"'.concat(e.id,'"')===t}));return n?n.name:t},nh=function(){var e=l.useContext(io),t=e.leaderboards,n=e.listLeaderboards,r=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Unable to fetch leaderboards",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),[n]);return l.useEffect((function(){t||r()}),[r,t]),t},rh=l.forwardRef((function(e,t){var n=(0,to.k)(),r=nh(),i=l.useState(!1),o=(0,s.Z)(i,2),c=o[0],u=o[1],p=l.useRef(null),f=function(e){p.current&&p.current.focus(e)};l.useImperativeHandle(t,(function(){return{focus:f}}));var h=r&&!!r.find((function(t){return'"'.concat(t.id,'"')===e.value})),g=l.useState(!r||!!e.value&&!h),x=(0,s.Z)(g,2),m=x[0],v=x[1],j=function(t,n){e.onChange(t.target.value)},y=function(t){e.onChange(t)},Z=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,w=r&&r.length>0,T=l.useMemo((function(){return r&&w?r.map((function(e){return(0,d.jsx)($.Z,{value:'"'.concat(e.id,'"'),label:"".concat(e.name," ").concat(e.id?"(".concat((0,no.GA)(e.id),")"):""),shouldNotTranslate:!0},e.id)})):[(0,d.jsx)($.Z,{disabled:!0,value:"empty",label:""},"empty")]}),[r,w]);return(0,d.jsx)(b.I18n,{children:function(t){var i=t.i18n;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(C.ad,{renderTextField:function(){return m?(0,d.jsx)(Wp,(0,a.Z)((0,a.Z)({ref:p,expressionType:"string"},e),{},{onChange:y,onExtractAdditionalErrors:function(e,t){if(!r)return n?"Your game may not be registered, create one in the leaderboard manager.":"Unable to fetch leaderboards as you are offline."}})):(0,d.jsx)(K.Z,{ref:p,value:e.value,onChange:j,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:Z,translatableHintText:w?e.parameterMetadata&&e.parameterMetadata.isOptional()?{id:"Choose a leaderboard (optional)"}:{id:"Choose a leaderboard"}:{id:"No leaderboards"},helperMarkdownText:w?e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null:i._({id:"There are currently no leaderboards created for this game. Open the leaderboards manager to create one."}),children:T})},renderButton:function(e){return(0,d.jsx)(k.Z,{id:"open-leaderboard-admin-button",icon:(0,d.jsx)(ic.Z,{}),style:e,primary:!0,onClick:function(){return u(!0)},buildMenuTemplate:function(e){return[{label:m?e._({id:"Select the leaderboard from a list"}):e._({id:"Enter the leaderboard id as a text or an expression"}),disabled:!r,click:function(){return v(!m)}}]}})}}),c&&!!e.project&&(0,d.jsx)(eh,{onClose:function(){return u(!1)},open:c,project:e.project,leaderboardId:h?e.value.replace(/"/g,""):void 0})]})}})})),ih=function(e){var t=e.value,n=e.parameterMetadata,r=e.InvalidParameterValue,i=nh();return t?(0,d.jsx)("span",{children:th(i,t)}):n.isOptional()?(0,d.jsx)("span",{children:(0,d.jsx)(b.Trans,{id:"No leaderboard chosen"})}):(0,d.jsx)(r,{isEmpty:!0,children:(0,d.jsx)(b.Trans,{id:"Choose a leaderboard"})})},oh=n.g.gd,ah=l.forwardRef((function(e,t){var n=e.project,r=e.scope,i=e.instructionMetadata,o=e.instruction,s=e.expressionMetadata,c=e.expression,u=e.parameterIndex,p=r.layout,f=mp({instructionMetadata:i,instruction:o,expressionMetadata:s,expression:c,parameterIndex:u})||"",h=l.useMemo((function(){if(!u)return[];var e=i?i.getParameter(u):s?s.getParameter(u):null,t=e?e.getExtraInfo():"";return(n&&p?oh.EventsIdentifiersFinder.findAllIdentifierExpressions(n.getCurrentPlatform(),n,p,t,f).toNewVectorString().toJSArray():[]).map((function(e){return{kind:"FullExpression",completion:e}}))}),[n,p,s,i,u,f]),g=l.useRef(null),x=function(e){g.current&&g.current.focus(e)};return l.useImperativeHandle(t,(function(){return{focus:x}})),l.useEffect((function(){x()}),[]),(0,d.jsx)(Wp,(0,a.Z)({expressionType:"string",onGetAdditionalAutocompletions:function(e){return h.filter((function(t){return 0===t.completion.indexOf(e)}))},id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-identifier"):void 0,ref:g},e))})),sh=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};return l.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,d.jsx)(jf.Z,{margin:e.isInline?"none":"dense",project:e.project,resourceManagementProps:e.resourceManagementProps,resourcesLoader:Dl.Z,resourceKind:"tilemap",fallbackResourceKind:"json",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Choose the JSON/LDtk file to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for TilemapResourceField"),null)})),lh=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};return l.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,d.jsx)(jf.Z,{margin:e.isInline?"none":"dense",project:e.project,resourceManagementProps:e.resourceManagementProps,resourcesLoader:Dl.Z,resourceKind:"tileset",fallbackResourceKind:"json",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Choose the tileset to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for TilesetResourceField"),null)})),ch=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};return l.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,d.jsx)(jf.Z,{margin:e.isInline?"none":"dense",project:e.project,resourceManagementProps:e.resourceManagementProps,resourcesLoader:Dl.Z,resourceKind:"model3D",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Choose the 3D model file (.glb) to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for Model3DResourceField"),null)})),uh=l.forwardRef((function(e,t){var n=l.useRef(null),r=function(e){n.current&&n.current.focus(e)};return l.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,d.jsx)(jf.Z,{margin:e.isInline?"none":"dense",project:e.project,resourceManagementProps:e.resourceManagementProps,resourcesLoader:Dl.Z,resourceKind:"atlas",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Choose the atlas file (.atlas) to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for AtlasResourceField"),null)})),dh=n.g.gd,ph={default:Mu,mouse:Bu,object:od,relationalOperator:Ou,operator:_u,yesorno:cd,trueorfalse:dd,number:Gp,expression:Gp,string:Yp,stringWithSelector:Xp,behavior:Jp,scenevar:gf,globalvar:xf,objectvar:bf,layer:Cf,key:Vu,file:Mu,musicfile:kf,soundfile:kf,imageResource:Zf,videoResource:wf,jsonResource:Tf,bitmapFontResource:Pf,fontResource:Ef,model3DResource:ch,atlasResource:uh,spineResource:Sf,color:Mf,police:Mu,forceMultiplier:Af,sceneName:_f,layerEffectName:Nf,layerEffectParameterName:Hf,objectEffectName:Vf,objectEffectParameterName:Yf,objectPointName:Xf,objectAnimationName:Jf,functionParameterName:Qf,externalLayoutName:$f,leaderboardId:rh,identifier:ah,tilemapResource:sh,tilesetResource:lh},fh={default:function(e){var t=e.value,n=e.expressionIsValid,r=e.parameterMetadata,i=e.InvalidParameterValue,o=e.MissingParameterValue;return t||r.isOptional()?n?t:(0,d.jsx)(i,{children:t}):(0,d.jsx)(o,{})},forceMultiplier:function(e){var t=e.value;return"1"===t?(0,d.jsx)(b.Trans,{id:"a permanent"}):"0"===t||""===t?(0,d.jsx)(b.Trans,{id:"an instant"}):"a (multiplier: "+t+")"},globalvar:function(e){return ff(e,Z,"global variable")},scenevar:function(e){return ff(e,hf,"scene variable")},objectvar:function(e){return ff(e,vf,"object variable")},key:function(e){var t=e.value,n=e.InvalidParameterValue;return t?Hu(t)?t:(0,d.jsx)(n,{children:t}):(0,d.jsx)(n,{isEmpty:!0,children:(0,d.jsx)(b.Trans,{id:"Choose a key"})})},mouse:function(e){var t=e.value,n=e.InvalidParameterValue;return t||(0,d.jsx)(n,{isEmpty:!0,children:(0,d.jsx)(b.Trans,{id:"Choose a mouse button"})})},object:function(e){var t=e.value,n=e.parameterMetadata,i=e.renderObjectThumbnail,o=e.expressionIsValid,a=e.InvalidParameterValue,s=e.MissingParameterValue;return t||n.isOptional()?(0,d.jsxs)("span",{title:t,className:Pn()((0,r.Z)({},Pu,!0)),children:[i(t),o?t:(0,d.jsx)(a,{children:t})]}):(0,d.jsx)(s,{})},yesorno:function(e){var t=e.value,n=e.parameterMetadata;return"yes"===ad(t,n)?(0,d.jsx)(b.Trans,{id:"yes"}):(0,d.jsx)(b.Trans,{id:"no"})},trueorfalse:function(e){var t=e.value,n=e.parameterMetadata;return"True"===ad(t,n)?(0,d.jsx)(b.Trans,{id:"true"}):(0,d.jsx)(b.Trans,{id:"false"})},operator:function(e){var t=e.value,n=e.InvalidParameterValue,r=e.useAssignmentOperators;if(!t)return(0,d.jsx)(n,{isEmpty:!0,children:(0,d.jsx)(b.Trans,{id:"Choose an operator"})});if(r){if("="===t)return"=";if("+"===t)return"+=";if("-"===t)return"-=";if("/"===t)return"/=";if("*"===t)return"*="}else{if("="===t)return(0,d.jsx)(b.Trans,{id:"set to"});if("+"===t)return(0,d.jsx)(b.Trans,{id:"add"});if("-"===t)return(0,d.jsx)(b.Trans,{id:"subtract"});if("/"===t)return(0,d.jsx)(b.Trans,{id:"divide by"});if("*"===t)return(0,d.jsx)(b.Trans,{id:"multiply by"})}return(0,d.jsx)(n,{children:t})},relationalOperator:function(e){var t=e.value,n=e.InvalidParameterValue;return t?"="!==t&&"<"!==t&&">"!==t&&"<="!==t&&">="!==t&&"!="!==t&&"startsWith"!==t&&"endsWith"!==t&&"contains"!==t?(0,d.jsx)(n,{children:t}):"<="===t?"\u2264":">="===t?"\u2265":"!="===t?"\u2260":"startsWith"===t?(0,d.jsx)(b.Trans,{id:"starts with"}):"endsWith"===t?(0,d.jsx)(b.Trans,{id:"ends with"}):"contains"===t?(0,d.jsx)(b.Trans,{id:"contains"}):t:(0,d.jsx)(n,{isEmpty:!0,children:(0,d.jsx)(b.Trans,{id:"Choose an operator"})})},leaderboardId:function(e){return(0,d.jsx)(ih,(0,a.Z)({},e))}},hh={mouse:{id:"Mouse button"},object:{id:"Object"},relationalOperator:{id:"Relational operator"},operator:{id:"Operator"},yesorno:{id:"Yes or No"},trueorfalse:{id:"True or False"},expression:{id:"Number"},number:{id:"Number"},string:{id:"String"},stringWithSelector:{id:"String"},behavior:{id:"Behavior"},scenevar:{id:"Scene variable"},globalvar:{id:"Global variable"},objectvar:{id:"Object variable"},layer:{id:"Layer"},key:{id:"Keyboard key"},musicfile:{id:"Audio resource"},soundfile:{id:"Audio resource"},imageResource:{id:"Image resource"},videoResource:{id:"Video resource"},bitmapFontResource:{id:"Bitmap font resource"},fontResource:{id:"Font resource"},jsonResource:{id:"JSON resource"},tilemapResource:{id:"Tile map resource"},atlasResource:{id:"Atlas resource"},spineResource:{id:"Spine json resource"},color:{id:"Color"},forceMultiplier:{id:"Instant or permanent force"},sceneName:{id:"Scene name"},layerEffectName:{id:"Layer effect name"},layerEffectParameterName:{id:"Layer effect property name"},objectEffectName:{id:"Object effect name"},objectEffectParameterName:{id:"Object effect property name"},objectPointName:{id:"Object point name"},objectAnimationName:{id:"Object animation name"},functionParameterName:{id:"Parameter name"},externalLayoutName:{id:"Name of the external layout"},identifier:{id:"Identifier"}},gh={components:ph,getParameterComponent:function(e){var t=dh.ParameterMetadata.isObject(e)?"object":e;return ph.hasOwnProperty(t)?ph[t]:ph.default},renderInlineParameter:function(e){var t=e.parameterMetadata.getType(),n=dh.ParameterMetadata.isObject(t)?"object":t;return(fh[n]||fh.default)(e)},getUserFriendlyTypeName:function(e){var t=dh.ParameterMetadata.isObject(e)?"object":e;return hh[t]||null}},xh=function(e){var t=e.children;return e.isEmpty?(0,d.jsxs)("span",{className:ku,children:["< ",t," >"]}):(0,d.jsx)("span",{className:ku,children:t})},mh=function(){return(0,d.jsx)("span",{className:"instruction-missing-parameter",children:"\xa0"})},vh=l.memo(l.forwardRef((function(e,t){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({viewBox:"10 10 54 54"},e),{},{ref:t,children:[(0,d.jsx)("path",{d:"M30.5461 30.5034L28.3521 34.288C30.0252 35.8147 31.6363 36.9026 34.934 37.9129L36.1222 33.5573C33.9641 32.8388 31.7827 31.6259 30.5461 30.5034Z",fill:"#29ABE1"}),(0,d.jsx)("path",{d:"M24.4035 30.8975C24.4035 30.8975 25.544 32.6156 26.0043 32.2051L27.8585 28.4191C25.9976 26.5822 24.4035 23.6184 24.4035 19.5989C24.4035 32.6265 24.4035 26.5737 24.4035 30.8975Z",fill:"#29ABE1"}),(0,d.jsx)("path",{d:"M44.9316 26.7094L55.9031 36.8682L44.9316 47.0269L44.9316 39.357C42.7099 39.3063 40.7076 39.1539 38.9796 38.8745L39.8706 34.288C41.1872 34.4658 43.2036 34.8111 44.9316 34.8365L44.9316 26.7094Z",fill:"#29ABE1"}),(0,d.jsx)("path",{d:"M20.4015 51.1301L24.4035 51.1301C24.758 37.0402 24.4035 22.938 24.4035 8.84436L20.4015 8.84435L20.4015 19.6497C20.4015 29.4361 20.669 40.0776 20.4015 51.1301Z",fill:"#2B3990"}),(0,d.jsx)("path",{d:"M22.4813 59.5759C26.4597 59.5759 29.6848 56.3507 29.6848 52.3723C29.6848 48.3939 26.4597 45.1688 22.4813 45.1688C18.5029 45.1688 15.2777 48.3939 15.2777 52.3723C15.2777 56.3507 18.5029 59.5759 22.4813 59.5759Z",fill:"#29ABE1"}),(0,d.jsx)("path",{d:"M22.4813 55.9741C24.4705 55.9741 26.083 54.3615 26.083 52.3723C26.083 50.3831 24.4705 48.7706 22.4813 48.7706C20.4921 48.7706 18.8795 50.3831 18.8795 52.3723C18.8795 54.3615 20.4921 55.9741 22.4813 55.9741Z",fill:"white"})]}))}))),bh=n(51458),Ch=n.g.gd,jh={container:{whiteSpace:"normal",overflowWrap:"anywhere",cursor:"pointer",marginBottom:1}},yh="GD_DRAGGED_INSTRUCTION",Zh=(0,Zt.x)(yh),kh=function(e){var t=l.useContext(pr.H).hasExtensionNamed,n=(0,bh._u)(e.instructionType),r=n.name,i=n.behaviorName,o=n.extensionName,a=t(o)?(0,d.jsx)(b.Trans,{id:"Try installing it from the extension store."}):"",s=(0,d.jsx)("span",{className:"function-name",children:r}),c=(0,d.jsx)("span",{className:"behavior-name",children:i}),u=(0,d.jsx)("span",{className:"extension-name",children:o});return i?e.isCondition?(0,d.jsxs)("span",{className:"instruction-missing",children:[(0,d.jsx)(b.Trans,{id:"{functionNode} condition on behavior {behaviorNode} from {extensionNode} extension is missing.",values:{functionNode:s,behaviorNode:c,extensionNode:u}})," ",a]}):(0,d.jsxs)("span",{className:"instruction-missing",children:[(0,d.jsx)(b.Trans,{id:"{functionNode} action on behavior {behaviorNode} from {extensionNode} extension is missing.",values:{functionNode:s,behaviorNode:c,extensionNode:u}})," ",a]}):e.isCondition?(0,d.jsxs)("span",{className:"instruction-missing",children:[(0,d.jsx)(b.Trans,{id:"{functionNode} condition from {extensionNode} extension is missing.",values:{functionNode:s,extensionNode:u}})," ",a]}):(0,d.jsxs)("span",{className:"instruction-missing",children:[(0,d.jsx)(b.Trans,{id:"{functionNode} action from {extensionNode} extension is missing.",values:{functionNode:s,extensionNode:u}})," ",a]})},wh=function(e){var t=e.platform,n=e.instruction,i=e.isCondition,o=e.onClick,s=e.onMoveToInstruction,c=e.onContextMenu,u=e.globalObjectsContainer,p=e.objectsContainer,h=e.id,g=e.resourcesManager,x=e.scope,m=l.useMemo((function(){return Ch.InstructionSentenceFormatter.get()}),[]),v=l.useContext(se.ZP),C=l.useContext(f.Z),j=C.palette.type,y=C.message.warning,Z=v.values.eventsSheetUseAssignmentOperators,k=v.values.showDeprecatedInstructionWarning,w=function(n,o){var a=e.instruction,s=e.disabled,l=e.renderObjectThumbnail,c=m.getAsFormattedText(a,n),f=n.getParametersCount();return(0,d.jsx)("span",{className:Pn()((0,r.Z)({},wu,s)),"data-instruction":a.getType(),"data-instruction-inverted":a.isInverted()?"true":void 0,children:(0,Et.mapFor)(0,c.size(),(function(s){var h,m=c.getTextFormatting(s),v=c.getString(s),b=m.getUserData();if(!(b>=0&&b<f))return"Unknown or unsupported instruction"===v?(0,d.jsx)(kh,{instructionType:a.getType(),isCondition:i},"unknown-behavior-instruction-".concat(s)):(0,d.jsx)("span",{children:v},s);var C=n.getParameter(b),j="expression"===C.getType()?"number":C.getType(),y=!0;if(!function(e){var t=e.value;return"layer"===e.parameterType&&""===t}({value:v,parameterType:j})){if(Ch.ParameterMetadata.isExpression("number",j)||Ch.ParameterMetadata.isExpression("string",j)||Ch.ParameterMetadata.isExpression("variable",j)){var k=a.getParameter(b).getRootNode(),w=new Ch.ExpressionValidator(Ch.JsPlatform.get(),Hp(x,u,p),j);k.visit(w),y=0===w.getAllErrors().size(),w.delete()}else if(Ch.ParameterMetadata.isObject(j)){var T=a.getParameter(b).getPlainString();y=(u.hasObjectNamed(T)||p.hasObjectNamed(T)||u.getObjectGroups().has(T)||p.getObjectGroups().has(T))&&(!C.getExtraInfo()||Ch.getTypeOfObject(u,p,T,!0)===C.getExtraInfo())&&ed({globalObjectsContainer:u,objectsContainer:p,objectName:T,requiredBehaviorTypes:id(t,n,b)})}else if(Ch.ParameterMetadata.isExpression("resource",j)){var S=a.getParameter(b).getPlainString();y=g.hasResource(S)}if(y&&"functionParameterName"===j){var P=e.scope.eventsFunction;if(P){var E=e.scope.eventsBasedBehavior||e.scope.eventsBasedObject,I=E?E.getEventsFunctions():e.scope.eventsFunctionsExtension;if(I){var M=C.getExtraInfo().split(","),L=Zp(I,P,M),A=a.getParameter(b).getPlainString(),F=A.substring(1,A.length-1);y=L.some((function(e){return e.getName()===F}))}}else y=!1}}var O=function(e){var t=e.value,n=e.parameterType,r=e.i18n;return""!==t&&'""'!==t||"layer"!==n?t:r._({id:"Base layer"})}({value:v,parameterType:j,i18n:o});return(0,d.jsx)("span",{className:Pn()((h={},(0,r.Z)(h,gu,!0),(0,r.Z)(h,Zu,!0),(0,r.Z)(h,j,!0),h)),onClick:function(t){e.onParameterClick(t,b),"touch"===e.screenType&&t.stopPropagation()},onKeyPress:function(t){(0,kn._x)(t)&&(e.onParameterClick(t,b),t.stopPropagation(),t.preventDefault())},tabIndex:0,children:gh.renderInlineParameter({value:O,expressionIsValid:y,parameterMetadata:C,renderObjectThumbnail:l,InvalidParameterValue:xh,MissingParameterValue:mh,useAssignmentOperators:Z})},s)}))})},T="touch"!==(0,Gr.BF)(),S=(0,As.i)(l.useCallback((function(e){c(e.clientX,e.clientY)}),[c]),{context:"events-tree-event-component"});return(0,d.jsx)(b.I18n,{children:function(t){var u=t.i18n;return(0,d.jsx)(Zh,{beginDrag:function(){return o(),{isCondition:i}},canDrag:function(){return T},canDrop:function(e){return e.isCondition===i},drop:function(){s()},children:function(t){var o,s=t.connectDragSource,p=t.connectDropTarget,f=t.isOver,g=t.canDrop,x=i?Ch.MetadataProvider.getConditionMetadata(Ch.JsPlatform.get(),n.getType()):Ch.MetadataProvider.getActionMetadata(Ch.JsPlatform.get(),n.getType()),m=x.getSmallIconFilename(),v=m.startsWith("data:image/svg+xml")||m.includes("_black"),C=s((0,d.jsxs)("div",(0,a.Z)((0,a.Z)({style:jh.container,className:Pn()((o={},(0,r.Z)(o,gu,!0),(0,r.Z)(o,"selected",e.selected),(0,r.Z)(o,"warning-instruction",k&&x.isHidden()),o)),onClick:function(t){t.stopPropagation(),"touch"===e.screenType&&e.selected?e.onDoubleClick():e.onClick()},onDoubleClick:function(t){t.stopPropagation(),e.onDoubleClick()},onContextMenu:function(e){e.stopPropagation(),c(e.clientX,e.clientY)}},S),{},{onKeyPress:function(t){(0,kn.ph)(t)?(e.onDoubleClick(),t.stopPropagation(),t.preventDefault()):(0,kn._x)(t)&&(e.onClick(),t.stopPropagation(),t.preventDefault())},tabIndex:0,id:h,children:[k&&x.isHidden()?(0,d.jsx)(Ze.ZP,{title:e.isCondition?(0,d.jsx)(b.Trans,{id:"Deprecated condition"}):(0,d.jsx)(b.Trans,{id:"Deprecated action"}),fontSize:"small",children:(0,d.jsx)(je.Z,{style:{color:y},className:Pn()((0,r.Z)({},xu,!0))})}):null,n.isInverted()&&(0,d.jsx)("img",{className:Pn()((0,r.Z)({},xu,!0)),src:"res/contraire.png",alt:"Condition is negated"}),x.isAsync()&&(!x.isOptionallyAsync()||n.isAwaited())&&(0,d.jsx)(Ze.ZP,{title:(0,d.jsx)(b.Trans,{id:"Next actions (and sub-events) will wait for this action to be finished before running."}),placement:"top",children:(0,d.jsx)(vh,{className:Pn()((0,r.Z)({},xu,!0))})}),(0,d.jsx)("img",{className:Pn()((0,r.Z)({},xu,!0)),src:m,alt:"",style:{filter:"dark"===j&&v?"grayscale(1) invert(1)":void 0}}),w(x,u)]}))),Z=C?p(C):null;return(0,d.jsxs)(l.Fragment,{children:[f&&(0,d.jsx)(Iu,{canDrop:g}),Z,x.canHaveSubInstructions()&&(0,d.jsx)(Dh,{platform:e.platform,style:{},className:"sub-instructions-container",instrsList:n.getSubInstructions(),areConditions:e.isCondition,selection:e.selection,onAddNewInstruction:e.onAddNewSubInstruction,onPasteInstructions:e.onPasteSubInstructions,onMoveToInstruction:e.onMoveToSubInstruction,onMoveToInstructionsList:e.onMoveToSubInstructionsList,onInstructionClick:e.onSubInstructionClick,onInstructionDoubleClick:e.onSubInstructionDoubleClick,onInstructionContextMenu:e.onSubInstructionContextMenu,onAddInstructionContextMenu:e.onAddSubInstructionContextMenu,onParameterClick:e.onSubParameterClick,addButtonLabel:(0,d.jsx)(b.Trans,{id:"Add a sub-condition"}),addButtonId:"add-sub-condition-button",disabled:e.disabled,renderObjectThumbnail:e.renderObjectThumbnail,screenType:e.screenType,windowSize:e.windowSize,scope:e.scope,resourcesManager:e.resourcesManager,globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,idPrefix:e.id})]})}})}})},Th=n.g.gd,Sh="EventsAndInstructions",Ph=function(){if(!Rt.has(Sh))return!1;var e=Rt.get(Sh),t=Ot.extractNumberProperty(e,"eventsCount");return null!==t&&t>0},Eh=function(){if(!Rt.has(Sh))return!1;var e=Rt.get(Sh),t=Ot.extractNumberProperty(e,"conditionsCount");return null!==t&&t>0},Ih=function(){if(!Rt.has(Sh))return!1;var e=Rt.get(Sh),t=Ot.extractNumberProperty(e,"actionsCount");return null!==t&&t>0},Mh=n(17777),Lh=function(e){var t=(0,Mh.DropTarget)(e,{canDrop:function(e,t){var n=t.getItem();return n&&e.canDrop(n)},hover:function(e,t){e.hover&&e.hover(t)},drop:function(e,t){t.didDrop()||e.drop(t)}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver({shallow:!0}),isOverLazy:t.isOver({shallow:!1}),canDrop:t.canDrop()}}))((function(e){return(0,e.children)({connectDropTarget:e.connectDropTarget,isOver:e.isOver,isOverLazy:e.isOverLazy,canDrop:e.canDrop})}));return function(e){return(0,d.jsx)(t,(0,a.Z)({},e))}},Ah={addButton:{cursor:"pointer"},pasteButtonContainer:{marginLeft:"4px"}},Fh=Lh(yh),Oh={id:"Right-click for quick menu"},Rh={id:"Long press for quick menu"};function Dh(e){var t=e.platform,n=e.addButtonId,r=e.addButtonLabel,i=e.areConditions,o=e.className,c=e.instrsList,u=e.onAddNewInstruction,p=e.onPasteInstructions,f=e.onMoveToInstruction,h=e.onMoveToInstructionsList,g=e.onInstructionClick,x=e.onInstructionContextMenu,m=e.onInstructionDoubleClick,v=e.onAddInstructionContextMenu,C=e.onParameterClick,j=e.selection,y=e.style,Z=e.disabled,k=e.renderObjectThumbnail,w=e.screenType,T=e.windowSize,S=e.scope,P=e.resourcesManager,E=e.globalObjectsContainer,I=e.objectsContainer,M=e.idPrefix,L=l.useState(!1),A=(0,s.Z)(L,2),F=A[0],O=A[1],R=l.useCallback((function(){u&&u({instrsList:c,isCondition:i})}),[u,c,i]),D=l.useCallback((function(){p({instrsList:c,isCondition:i})}),[p,c,i]),_=(0,Et.mapFor)(0,c.size(),(function(e){var n=c.get(e),r={isCondition:i,instrsList:c,instruction:n,indexInList:e};return(0,d.jsx)(wh,{platform:t,instruction:n,isCondition:i,selected:su(j,n),onMoveToInstruction:function(){return f(r)},onClick:function(){return g(r)},onDoubleClick:function(){return m(r)},onContextMenu:function(e,t){return x(e,t,r)},onParameterClick:function(e,t){return C({isCondition:r.isCondition,instrsList:r.instrsList,instruction:r.instruction,indexInList:r.indexInList,parameterIndex:t,domEvent:e})},selection:j,onAddNewSubInstruction:u,onPasteSubInstructions:p,onMoveToSubInstruction:f,onMoveToSubInstructionsList:h,onSubInstructionClick:g,onSubInstructionDoubleClick:m,onSubInstructionContextMenu:x,onAddSubInstructionContextMenu:v,onSubParameterClick:C,disabled:Z,renderObjectThumbnail:k,screenType:w,windowSize:T,scope:S,resourcesManager:P,globalObjectsContainer:E,objectsContainer:I,id:"".concat(M,"-").concat(i?"condition":"action","-").concat(e)},n.ptr)})),B={instrsList:c,isCondition:i},N=l.useRef(null),U=i?(0,d.jsx)(b.Trans,{id:"Add condition"}):(0,d.jsx)(b.Trans,{id:"Add action"}),H="touch"===w?Rh:Oh,V=(0,As.i)(l.useCallback((function(e){N.current&&v(N.current,B)}),[v,B,N]));return(0,d.jsx)(b.I18n,{children:function(e){var t=e.i18n;return(0,d.jsx)(Fh,{canDrop:function(e){return e.isCondition===i},drop:function(){h({isCondition:i,instrsList:c})},children:function(e){var s=e.connectDropTarget,l=e.isOver,c=e.canDrop;return s((0,d.jsxs)("div",{className:o,style:y,id:"".concat(M,"-").concat(i?"conditions":"actions"),children:[_,l&&(0,d.jsx)(Iu,{canDrop:c}),(0,d.jsxs)("span",{onPointerEnter:function(){O(i&&Eh()||!i&&Ih())},onPointerLeave:function(){O(!1)},children:[(0,d.jsx)("button",(0,a.Z)((0,a.Z)({style:Ah.addButton,className:"add-link",onClick:R,onContextMenu:function(e){e.stopPropagation(),v(e.currentTarget,B)}},V),{},{ref:N,id:n||"".concat(i?"add-condition-button":"add-action-button").concat(0===_.length?"-empty":""),title:t._(H),children:r||U})),F&&(0,d.jsx)("span",{style:Ah.pasteButtonContainer,children:(0,d.jsx)("button",{style:Ah.addButton,className:"add-link",onClick:D,children:i?(0,d.jsx)(b.Trans,{id:"(or paste conditions)"}):(0,d.jsx)(b.Trans,{id:"(or paste actions)"})})})]})]}))}})}})}var _h={oneColumnContainer:{display:"flex",flexDirection:"column"},twoColumnsContainer:{display:"flex"}},Bh=function(e){return"small"===e.windowSize?(0,d.jsxs)("div",{style:_h.oneColumnContainer,className:e.className,children:[e.renderConditionsList({style:{},className:"".concat(ju," ").concat(yu)}),e.renderActionsList({style:{},className:"".concat(Cu," ").concat(yu)})]}):(0,d.jsxs)("div",{style:_h.twoColumnsContainer,className:e.className,children:[e.renderConditionsList({style:{width:"calc(35vw - ".concat(e.leftIndentWidth,"px)")},className:ju}),e.renderActionsList({className:Cu})]})},Nh=n.g.gd,Uh={flex:1},Hh=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){return(0,ot.Z)(this,n),t.apply(this,arguments)}return(0,at.Z)(n,[{key:"render",value:function(){var e,t=this,n=Nh.asStandardEvent(this.props.event);return(0,d.jsx)(Bh,{leftIndentWidth:this.props.leftIndentWidth,windowSize:this.props.windowSize,className:Pn()((e={},(0,r.Z)(e,mu,!0),(0,r.Z)(e,vu,this.props.selected),(0,r.Z)(e,bu,!0),e)),renderConditionsList:function(e){var r=e.style,i=e.className;return(0,d.jsx)(Dh,{platform:t.props.project.getCurrentPlatform(),instrsList:n.getConditions(),style:r,className:i,selection:t.props.selection,areConditions:!0,onAddNewInstruction:t.props.onAddNewInstruction,onPasteInstructions:t.props.onPasteInstructions,onMoveToInstruction:t.props.onMoveToInstruction,onMoveToInstructionsList:t.props.onMoveToInstructionsList,onInstructionClick:t.props.onInstructionClick,onInstructionDoubleClick:t.props.onInstructionDoubleClick,onInstructionContextMenu:t.props.onInstructionContextMenu,onAddInstructionContextMenu:t.props.onAddInstructionContextMenu,onParameterClick:t.props.onParameterClick,disabled:t.props.disabled,renderObjectThumbnail:t.props.renderObjectThumbnail,screenType:t.props.screenType,windowSize:t.props.windowSize,scope:t.props.scope,resourcesManager:t.props.project.getResourcesManager(),globalObjectsContainer:t.props.globalObjectsContainer,objectsContainer:t.props.objectsContainer,idPrefix:t.props.idPrefix})},renderActionsList:function(e){var r=e.className;return(0,d.jsx)(Dh,{platform:t.props.project.getCurrentPlatform(),instrsList:n.getActions(),style:(0,a.Z)({},Uh),className:r,selection:t.props.selection,areConditions:!1,onAddNewInstruction:t.props.onAddNewInstruction,onPasteInstructions:t.props.onPasteInstructions,onMoveToInstruction:t.props.onMoveToInstruction,onMoveToInstructionsList:t.props.onMoveToInstructionsList,onInstructionClick:t.props.onInstructionClick,onInstructionDoubleClick:t.props.onInstructionDoubleClick,onInstructionContextMenu:t.props.onInstructionContextMenu,onAddInstructionContextMenu:t.props.onAddInstructionContextMenu,onParameterClick:t.props.onParameterClick,disabled:t.props.disabled,renderObjectThumbnail:t.props.renderObjectThumbnail,screenType:t.props.screenType,windowSize:t.props.windowSize,scope:t.props.scope,resourcesManager:t.props.project.getResourcesManager(),globalObjectsContainer:t.props.globalObjectsContainer,objectsContainer:t.props.objectsContainer,idPrefix:t.props.idPrefix})}})}}]),n}(l.Component),Vh=n.g.gd,zh={container:{height:"2.5em",display:"flex",alignItems:"center",padding:5,overflow:"hidden"},title:{fontSize:"1.3em",width:"100%"}},Wh=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={editing:!1,editingPreviousValue:null},e._textField=null,e.edit=function(){if(!e.state.editing){var t=Vh.asGroupEvent(e.props.event);e.state.editingPreviousValue||e.setState({editingPreviousValue:t.getName()}),e.setState({editing:!0},(function(){e._textField&&e._textField.focus()}))}},e.endEditing=function(){e.setState({editing:!1}),Vh.asGroupEvent(e.props.event).getName()!==e.state.editingPreviousValue&&(e.props.onEndEditingEvent(),e.setState({editingPreviousValue:null}))},e}return(0,at.Z)(n,[{key:"render",value:function(){var e,t,n=this,i=Vh.asGroupEvent(this.props.event),o=i.getBackgroundColorR(),s=i.getBackgroundColorG(),l=i.getBackgroundColorB(),c=(o+s+l)/3>200?"black":"white";return(0,d.jsx)("div",{className:Pn()((e={},(0,r.Z)(e,mu,!0),(0,r.Z)(e,vu,this.props.selected),e)),style:(0,a.Z)((0,a.Z)({},zh.container),{},{backgroundColor:"rgb(".concat(o,", ").concat(s,", ").concat(l,")")}),onClick:this.edit,onKeyUp:function(e){(0,kn._x)(e)&&n.edit()},tabIndex:0,id:"".concat(this.props.idPrefix,"-group-").concat(i.isFolded()?"folded":"unfolded"),children:this.state.editing?(0,d.jsx)($r.ZP,{margin:"none",ref:function(e){return n._textField=e},value:i.getName(),translatableHintText:{id:"<Enter group name>"},onBlur:this.endEditing,onChange:function(e,t){i.setName(t),n.forceUpdate()},style:zh.title,inputStyle:{color:c,WebkitTextFillColor:c},fullWidth:!0,onKeyUp:function(e){(0,kn.W$)(e)&&n.endEditing()},onKeyDown:function(e){((0,kn.ph)(e)||(0,kn.Fc)(e))&&n.endEditing()},underlineShow:!1}):(0,d.jsx)("span",(0,a.Z)((0,a.Z)({className:Pn()((t={},(0,r.Z)(t,gu,!0),(0,r.Z)(t,wu,this.props.disabled),t)),style:(0,a.Z)((0,a.Z)({},zh.title),{},{color:c})},(0,Fs.Y)({editableText:"true"})),{},{children:i.getName()?i.getName():(0,d.jsx)(b.Trans,{id:"<Enter group name>"})}))})}}]),n}(l.Component),Gh=n.g.gd,Yh={width:"100%"},qh={container:{display:"flex",flexWrap:"wrap",padding:5,overflow:"hidden",minHeight:"2.1em"},commentTextField:(0,a.Z)((0,a.Z)({},Yh),{},{fontSize:"inherit"}),commentSpan:(0,a.Z)((0,a.Z)({},Yh),{},{alignItems:"center",height:"100%",whiteSpace:"pre-wrap"})},Xh=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={editing:!1,editingPreviousValue:null},e.edit=function(){if(!e.state.editing){var t=Gh.asCommentEvent(e.props.event);e.setState({editing:!0,editingPreviousValue:t.getComment()},(function(){e._textField&&e._textField.focus({caretPosition:"end"})}))}},e.onChange=function(t,n){Gh.asCommentEvent(e.props.event).setComment(n),e.props.onUpdate(),e.forceUpdate()},e.endEditing=function(){if(e._textField){var t=Gh.asCommentEvent(e.props.event);e.state.editingPreviousValue!==t.getComment()&&e.props.onEndEditingEvent(),e.setState({editing:!1,editingPreviousValue:null},(function(){return e.props.onUpdate()}))}},e._getCommentHTML=function(){return Gh.asCommentEvent(e.props.event).getComment().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>")},e}return(0,at.Z)(n,[{key:"render",value:function(){var e,t,n=this,i=Gh.asCommentEvent(this.props.event),o="#".concat((0,Qn.vq)(i.getBackgroundColorRed(),i.getBackgroundColorGreen(),i.getBackgroundColorBlue())),s="#".concat((0,Qn.vq)(i.getTextColorRed(),i.getTextColorGreen(),i.getTextColorBlue()));return(0,d.jsx)("div",{className:Pn()((e={},(0,r.Z)(e,mu,!0),(0,r.Z)(e,vu,this.props.selected),e)),style:(0,a.Z)((0,a.Z)({},qh.container),{},{backgroundColor:o}),onClick:this.edit,onKeyUp:function(e){!n.state.editing&&(0,kn._x)(e)&&n.edit()},tabIndex:0,id:"".concat(this.props.idPrefix,"-comment"),children:this.state.editing?(0,d.jsx)($r.ZP,{multiline:!0,margin:"none",ref:function(e){return n._textField=e},value:i.getComment(),translatableHintText:{id:"<Enter comment>"},onBlur:this.endEditing,onChange:this.onChange,style:qh.commentTextField,inputStyle:{color:s,padding:0},fullWidth:!0,id:"comment-title",onKeyDown:function(e){((0,kn.W$)(e)||(0,kn.Fc)(e))&&n.endEditing()},underlineShow:!1}):(0,d.jsx)("span",(0,a.Z)({ref:function(e){return n._selectable=e},className:Pn()((t={},(0,r.Z)(t,gu,!0),(0,r.Z)(t,wu,this.props.disabled),t)),style:(0,a.Z)((0,a.Z)({},qh.commentSpan),{},{color:s}),dangerouslySetInnerHTML:{__html:this._getCommentHTML()}},(0,Fs.Y)({editableText:"true"})))})}}]),n}(l.Component),Kh=n(64207),Jh={paddingBottom:10,overflowY:"auto",overflowX:"hidden",minHeight:30,maxHeight:400,zIndex:5};function Qh(e){var t=l.useRef(null),n=l.useRef(null),r=(0,w.U)().isMobile;return(0,d.jsx)(mt.Z,{mouseEvent:"onMouseUp",onClickAway:function(t){(0,Kh.le)(t.composedPath())||(t instanceof MouseEvent?e.onApply():setTimeout((function(){e.onApply()}),50))},children:(0,d.jsx)(pd.Z,{open:e.open,anchorEl:e.anchorEl,style:(0,a.Z)((0,a.Z)({},Jh),{},{width:r?"100%":"auto",minWidth:r?"auto":320,maxWidth:r?320:600}),placement:"bottom-start",onKeyDown:function(r){(0,kn.W$)(r)?e.onRequestClose():(0,kn.Fc)(r)?e.onApply():(0,kn.ph)(r)&&(r.stopPropagation(),r.preventDefault(),e.onApply()),(0,kn.xj)(r)?r.target&&r.target===n.current&&(r.stopPropagation(),r.preventDefault(),t.current&&t.current.focus()):(0,kn.bo)(r)&&r.target&&r.target===t.current&&(r.stopPropagation(),r.preventDefault(),n.current&&n.current.focus())},children:(0,d.jsxs)(is,{children:[(0,d.jsx)("div",{tabIndex:0,ref:t}),(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(L.x1,{children:e.children})}),(0,d.jsx)("div",{tabIndex:0,ref:n})]})})})}var $h=n.g.gd,eg={container:{display:"flex",flexDirection:"column"},instructionsContainer:{display:"flex"},actionsList:{flex:1}},tg=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._objectField=null,e.state={editing:!1,editingPreviousValue:null,anchorEl:null},e.edit=function(t){var n=$h.asForEachEvent(e.props.event).getObjectToPick(),r=t.currentTarget;setTimeout((function(){return e.setState({editing:!0,editingPreviousValue:n,anchorEl:r},(function(){setTimeout((function(){e._objectField&&e._objectField.focus()}),10)}))}),10)},e.cancelEditing=function(){e.endEditing();var t=$h.asForEachEvent(e.props.event),n=e.state.editingPreviousValue;null!=n&&(t.setObjectToPick(n),e.forceUpdate())},e.endEditing=function(){var t=e.state.anchorEl;t&&t.focus(),e.setState({editing:!1,editingPreviousValue:null,anchorEl:null})},e}return(0,at.Z)(n,[{key:"render",value:function(){var e,t,n=this,i=$h.asForEachEvent(this.props.event),o=i.getObjectToPick();return(0,d.jsxs)("div",{style:eg.container,className:Pn()((e={},(0,r.Z)(e,mu,!0),(0,r.Z)(e,vu,this.props.selected),(0,r.Z)(e,bu,!0),e)),children:[(0,d.jsx)("div",{children:(0,d.jsx)("span",{className:Pn()((t={},(0,r.Z)(t,gu,!0),(0,r.Z)(t,wu,this.props.disabled),t)),onClick:this.edit,onKeyPress:function(e){(0,kn._x)(e)&&n.edit(e)},tabIndex:0,children:o?(0,d.jsx)(b.Trans,{id:"Repeat for each instance of {objectName}:",values:{objectName:o}}):(0,d.jsx)("i",{children:(0,d.jsx)(b.Trans,{id:"Click to choose for which objects this event will be repeated"})})})}),(0,d.jsx)(Bh,{leftIndentWidth:this.props.leftIndentWidth,windowSize:this.props.windowSize,renderConditionsList:function(e){var t=e.style,r=e.className;return(0,d.jsx)(Dh,{platform:n.props.project.getCurrentPlatform(),instrsList:i.getConditions(),style:t,className:r,selection:n.props.selection,areConditions:!0,onAddNewInstruction:n.props.onAddNewInstruction,onPasteInstructions:n.props.onPasteInstructions,onMoveToInstruction:n.props.onMoveToInstruction,onMoveToInstructionsList:n.props.onMoveToInstructionsList,onInstructionClick:n.props.onInstructionClick,onInstructionDoubleClick:n.props.onInstructionDoubleClick,onInstructionContextMenu:n.props.onInstructionContextMenu,onAddInstructionContextMenu:n.props.onAddInstructionContextMenu,onParameterClick:n.props.onParameterClick,disabled:n.props.disabled,renderObjectThumbnail:n.props.renderObjectThumbnail,screenType:n.props.screenType,windowSize:n.props.windowSize,scope:n.props.scope,resourcesManager:n.props.project.getResourcesManager(),globalObjectsContainer:n.props.globalObjectsContainer,objectsContainer:n.props.objectsContainer,idPrefix:n.props.idPrefix})},renderActionsList:function(e){var t=e.className;return(0,d.jsx)(Dh,{platform:n.props.project.getCurrentPlatform(),instrsList:i.getActions(),style:(0,a.Z)({},eg.actionsList),className:t,selection:n.props.selection,areConditions:!1,onAddNewInstruction:n.props.onAddNewInstruction,onPasteInstructions:n.props.onPasteInstructions,onMoveToInstruction:n.props.onMoveToInstruction,onMoveToInstructionsList:n.props.onMoveToInstructionsList,onInstructionClick:n.props.onInstructionClick,onInstructionDoubleClick:n.props.onInstructionDoubleClick,onInstructionContextMenu:n.props.onInstructionContextMenu,onAddInstructionContextMenu:n.props.onAddInstructionContextMenu,onParameterClick:n.props.onParameterClick,disabled:n.props.disabled,renderObjectThumbnail:n.props.renderObjectThumbnail,screenType:n.props.screenType,windowSize:n.props.windowSize,scope:n.props.scope,resourcesManager:n.props.project.getResourcesManager(),globalObjectsContainer:n.props.globalObjectsContainer,objectsContainer:n.props.objectsContainer,idPrefix:n.props.idPrefix})}}),(0,d.jsx)(Qh,{open:this.state.editing,anchorEl:this.state.anchorEl,onRequestClose:this.cancelEditing,onApply:this.endEditing,children:(0,d.jsx)(od,{project:this.props.project,scope:this.props.scope,globalObjectsContainer:this.props.globalObjectsContainer,objectsContainer:this.props.objectsContainer,value:o,onChange:function(e){i.setObjectToPick(e),n.props.onUpdate()},isInline:!0,onRequestClose:this.cancelEditing,onApply:this.endEditing,ref:function(e){return n._objectField=e}})})]})}}]),n}(l.Component),ng=n.g.gd,rg={container:{display:"flex",flexDirection:"column"},instructionsContainer:{display:"flex"},actionsList:{flex:1},variableContainer:{marginLeft:"3px",marginRight:"2px"},eventLabel:{marginLeft:"5px",whiteSpace:"normal",wordWrap:"break-word"}},ig=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._valueIteratorField=null,e._keyIteratorField=null,e._iterableField=null,e.state={editingValueIteratorVariableName:!1,editingKeyIteratorVariableName:!1,editingIterableVariableName:!1,editingPreviousValue:null,anchorEl:null},e.edit=function(t,n){var r=ng.asForEachChildVariableEvent(e.props.event),i=r.getValueIteratorVariableName(),o=r.getKeyIteratorVariableName(),a=r.getIterableVariableName();setTimeout((function(){return e.setState({editingValueIteratorVariableName:"iteratorValue"===t,editingKeyIteratorVariableName:"iteratorKey"===t,editingIterableVariableName:"iterable"===t,editingPreviousValue:"iterable"===t?a:"iteratorValue"===t?i:o,anchorEl:n},(function(){setTimeout((function(){var n="iterable"===t?e._iterableField:"iteratorValue"===t?e._valueIteratorField:e._keyIteratorField;n&&n.focus()}),10)}))}),10)},e.cancelEditing=function(){e.endEditing();var t=ng.asForEachChildVariableEvent(e.props.event),n=e.state,r=n.editingPreviousValue,i=n.editingIterableVariableName,o=n.editingValueIteratorVariableName,a=n.editingKeyIteratorVariableName;null!=r&&(i?t.setIterableVariableName(r):o?t.setValueIteratorVariableName(r):a&&t.setKeyIteratorVariableName(r),e.forceUpdate())},e.endEditing=function(){var t=e.state.anchorEl;t&&t.focus(),e.setState({editingKeyIteratorVariableName:!1,editingValueIteratorVariableName:!1,editingIterableVariableName:!1,editingPreviousValue:null,anchorEl:null})},e}return(0,at.Z)(n,[{key:"render",value:function(){var e,t,n,i,o=this,s=ng.asForEachChildVariableEvent(this.props.event),l=s.getValueIteratorVariableName(),c=s.getKeyIteratorVariableName(),u=s.getIterableVariableName();return(0,d.jsxs)("div",{style:rg.container,className:Pn()((e={},(0,r.Z)(e,bu,!0),(0,r.Z)(e,mu,!0),(0,r.Z)(e,vu,this.props.selected),e)),children:[(0,d.jsx)("div",{style:rg.eventLabel,children:(0,d.jsx)(b.Trans,{id:"<0>For every child in<1><2/>{0}</1>, store the child in variable<3><4/>{1}</3>, the child name in<5><6/>{2}</5>and do:</0>",values:{0:0!==u.length?(0,d.jsx)("span",{children:u}):(0,d.jsx)("span",{className:"instruction-missing-parameter",children:(0,d.jsx)(b.Trans,{id:"<Select a variable>"})}),1:0!==l.length?(0,d.jsx)("span",{children:l}):(0,d.jsx)("span",{children:(0,d.jsx)(b.Trans,{id:"<Select a variable> (optional)"})}),2:0!==c.length?(0,d.jsx)("span",{children:c}):(0,d.jsx)("span",{children:(0,d.jsx)(b.Trans,{id:"<Select a variable> (optional)"})})},components:[(0,d.jsx)("span",{className:Pn()((0,r.Z)({},wu,this.props.disabled))}),(0,d.jsx)("span",{className:Pn()((t={},(0,r.Z)(t,gu,!0),(0,r.Z)(t,Zu,!0),(0,r.Z)(t,Pu,!0),(0,r.Z)(t,"scenevar",!0),t)),style:rg.variableContainer,onClick:function(e){return o.edit("iterable",e.currentTarget)},onKeyPress:function(e){(0,kn._x)(e)&&o.edit("iterable",e.currentTarget)},tabIndex:0}),(0,d.jsx)("img",{className:xu,src:"res/types/scenevar.png",alt:"Scene variable"}),(0,d.jsx)("span",{className:Pn()((n={},(0,r.Z)(n,gu,!0),(0,r.Z)(n,Zu,!0),(0,r.Z)(n,Pu,!0),(0,r.Z)(n,"scenevar",!0),n)),style:rg.variableContainer,onClick:function(e){return o.edit("iteratorValue",e.currentTarget)},onKeyPress:function(e){(0,kn._x)(e)&&o.edit("iteratorValue",e.currentTarget)},tabIndex:0}),(0,d.jsx)("img",{className:xu,src:"res/types/scenevar.png",alt:"Scene variable"}),(0,d.jsx)("span",{className:Pn()((i={},(0,r.Z)(i,gu,!0),(0,r.Z)(i,Zu,!0),(0,r.Z)(i,Pu,!0),(0,r.Z)(i,"scenevar",!0),i)),style:rg.variableContainer,onClick:function(e){return o.edit("iteratorKey",e.currentTarget)},onKeyPress:function(e){(0,kn._x)(e)&&o.edit("iteratorKey",e.currentTarget)},tabIndex:0}),(0,d.jsx)("img",{className:xu,src:"res/types/scenevar.png",alt:"Scene variable"})]})}),(0,d.jsx)(Bh,{leftIndentWidth:this.props.leftIndentWidth,windowSize:this.props.windowSize,renderConditionsList:function(e){var t=e.style,n=e.className;return(0,d.jsx)(Dh,{platform:o.props.project.getCurrentPlatform(),instrsList:s.getConditions(),style:t,className:n,selection:o.props.selection,areConditions:!0,onAddNewInstruction:o.props.onAddNewInstruction,onPasteInstructions:o.props.onPasteInstructions,onMoveToInstruction:o.props.onMoveToInstruction,onMoveToInstructionsList:o.props.onMoveToInstructionsList,onInstructionClick:o.props.onInstructionClick,onInstructionDoubleClick:o.props.onInstructionDoubleClick,onInstructionContextMenu:o.props.onInstructionContextMenu,onAddInstructionContextMenu:o.props.onAddInstructionContextMenu,onParameterClick:o.props.onParameterClick,disabled:o.props.disabled,renderObjectThumbnail:o.props.renderObjectThumbnail,screenType:o.props.screenType,windowSize:o.props.windowSize,scope:o.props.scope,resourcesManager:o.props.project.getResourcesManager(),globalObjectsContainer:o.props.globalObjectsContainer,objectsContainer:o.props.objectsContainer,idPrefix:o.props.idPrefix})},renderActionsList:function(e){var t=e.className;return(0,d.jsx)(Dh,{platform:o.props.project.getCurrentPlatform(),instrsList:s.getActions(),style:(0,a.Z)({},rg.actionsList),className:t,selection:o.props.selection,areConditions:!1,onAddNewInstruction:o.props.onAddNewInstruction,onPasteInstructions:o.props.onPasteInstructions,onMoveToInstruction:o.props.onMoveToInstruction,onMoveToInstructionsList:o.props.onMoveToInstructionsList,onInstructionClick:o.props.onInstructionClick,onInstructionDoubleClick:o.props.onInstructionDoubleClick,onInstructionContextMenu:o.props.onInstructionContextMenu,onAddInstructionContextMenu:o.props.onAddInstructionContextMenu,onParameterClick:o.props.onParameterClick,disabled:o.props.disabled,renderObjectThumbnail:o.props.renderObjectThumbnail,screenType:o.props.screenType,windowSize:o.props.windowSize,scope:o.props.scope,resourcesManager:o.props.project.getResourcesManager(),globalObjectsContainer:o.props.globalObjectsContainer,objectsContainer:o.props.objectsContainer,idPrefix:o.props.idPrefix})}}),(0,d.jsx)(Qh,{open:this.state.editingValueIteratorVariableName,anchorEl:this.state.anchorEl,onRequestClose:this.cancelEditing,onApply:this.endEditing,children:(0,d.jsx)(gf,{project:this.props.project,scope:this.props.scope,globalObjectsContainer:this.props.globalObjectsContainer,objectsContainer:this.props.objectsContainer,value:l,onChange:function(e){s.setValueIteratorVariableName(e),o.props.onUpdate()},isInline:!0,onRequestClose:this.cancelEditing,onApply:this.endEditing,ref:function(e){return o._valueIteratorField=e}})}),(0,d.jsx)(Qh,{open:this.state.editingKeyIteratorVariableName,anchorEl:this.state.anchorEl,onRequestClose:this.cancelEditing,onApply:this.endEditing,children:(0,d.jsx)(gf,{project:this.props.project,scope:this.props.scope,globalObjectsContainer:this.props.globalObjectsContainer,objectsContainer:this.props.objectsContainer,value:c,onChange:function(e){s.setKeyIteratorVariableName(e),o.props.onUpdate()},isInline:!0,onRequestClose:this.cancelEditing,onApply:this.endEditing,ref:function(e){return o._keyIteratorField=e}})}),(0,d.jsx)(Qh,{open:this.state.editingIterableVariableName,anchorEl:this.state.anchorEl,onRequestClose:this.cancelEditing,onApply:this.endEditing,children:(0,d.jsx)(gf,{project:this.props.project,scope:this.props.scope,globalObjectsContainer:this.props.globalObjectsContainer,objectsContainer:this.props.objectsContainer,value:u,onChange:function(e){s.setIterableVariableName(e),o.props.onUpdate()},isInline:!0,onRequestClose:this.cancelEditing,onApply:this.endEditing,ref:function(e){return o._iterableField=e}})})]})}}]),n}(l.Component),og=n.g.gd,ag={container:{display:"flex",flexDirection:"column"},instructionsContainer:{display:"flex"},actionsList:{flex:1}},sg=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._field=null,e.state={editing:!1,editingPreviousValue:null,anchorEl:null},e.edit=function(t){var n=og.asRepeatEvent(e.props.event).getRepeatExpression(),r=t.currentTarget;setTimeout((function(){return e.setState({editing:!0,editingPreviousValue:n,anchorEl:r},(function(){setTimeout((function(){e._field&&e._field.focus()}),10)}))}),10)},e.cancelEditing=function(){e.endEditing();var t=og.asRepeatEvent(e.props.event),n=e.state.editingPreviousValue;null!=n&&(t.setRepeatExpression(n),e.forceUpdate())},e.endEditing=function(){var t=e.state.anchorEl;t&&t.focus(),e.setState({editing:!1,editingPreviousValue:null,anchorEl:null})},e}return(0,at.Z)(n,[{key:"render",value:function(){var e,t,n=this,i=og.asRepeatEvent(this.props.event),o=i.getRepeatExpression();return(0,d.jsxs)("div",{style:ag.container,className:Pn()((e={},(0,r.Z)(e,mu,!0),(0,r.Z)(e,vu,this.props.selected),(0,r.Z)(e,bu,!0),e)),children:[(0,d.jsx)("div",{children:(0,d.jsx)("span",{className:Pn()((t={},(0,r.Z)(t,gu,!0),(0,r.Z)(t,wu,this.props.disabled),t)),onClick:this.edit,onKeyPress:function(e){(0,kn._x)(e)&&n.edit(e)},tabIndex:0,children:o?(0,d.jsx)(b.Trans,{id:"Repeat {expression} times:",values:{expression:o}}):(0,d.jsx)("i",{children:(0,d.jsx)(b.Trans,{id:"Click to choose how many times will be repeated"})})})}),(0,d.jsx)(Bh,{leftIndentWidth:this.props.leftIndentWidth,windowSize:this.props.windowSize,renderConditionsList:function(e){var t=e.style,r=e.className;return(0,d.jsx)(Dh,{platform:n.props.project.getCurrentPlatform(),instrsList:i.getConditions(),style:t,className:r,selection:n.props.selection,areConditions:!0,onAddNewInstruction:n.props.onAddNewInstruction,onPasteInstructions:n.props.onPasteInstructions,onMoveToInstruction:n.props.onMoveToInstruction,onMoveToInstructionsList:n.props.onMoveToInstructionsList,onInstructionClick:n.props.onInstructionClick,onInstructionDoubleClick:n.props.onInstructionDoubleClick,onInstructionContextMenu:n.props.onInstructionContextMenu,onAddInstructionContextMenu:n.props.onAddInstructionContextMenu,onParameterClick:n.props.onParameterClick,disabled:n.props.disabled,renderObjectThumbnail:n.props.renderObjectThumbnail,screenType:n.props.screenType,windowSize:n.props.windowSize,scope:n.props.scope,resourcesManager:n.props.project.getResourcesManager(),globalObjectsContainer:n.props.globalObjectsContainer,objectsContainer:n.props.objectsContainer,idPrefix:n.props.idPrefix})},renderActionsList:function(e){var t=e.className;return(0,d.jsx)(Dh,{platform:n.props.project.getCurrentPlatform(),instrsList:i.getActions(),style:(0,a.Z)({},ag.actionsList),className:t,selection:n.props.selection,areConditions:!1,onAddNewInstruction:n.props.onAddNewInstruction,onPasteInstructions:n.props.onPasteInstructions,onMoveToInstruction:n.props.onMoveToInstruction,onMoveToInstructionsList:n.props.onMoveToInstructionsList,onInstructionClick:n.props.onInstructionClick,onInstructionDoubleClick:n.props.onInstructionDoubleClick,onInstructionContextMenu:n.props.onInstructionContextMenu,onAddInstructionContextMenu:n.props.onAddInstructionContextMenu,onParameterClick:n.props.onParameterClick,disabled:n.props.disabled,renderObjectThumbnail:n.props.renderObjectThumbnail,screenType:n.props.screenType,windowSize:n.props.windowSize,scope:n.props.scope,resourcesManager:n.props.project.getResourcesManager(),globalObjectsContainer:n.props.globalObjectsContainer,objectsContainer:n.props.objectsContainer,idPrefix:n.props.idPrefix})}}),(0,d.jsx)(Qh,{open:this.state.editing,anchorEl:this.state.anchorEl,onRequestClose:this.cancelEditing,onApply:this.endEditing,children:(0,d.jsx)(Gp,{project:this.props.project,scope:this.props.scope,globalObjectsContainer:this.props.globalObjectsContainer,objectsContainer:this.props.objectsContainer,value:o,onChange:function(e){i.setRepeatExpression(e),n.props.onUpdate()},parameterRenderingService:gh,isInline:!0,ref:function(e){return n._field=e}})})]})}}]),n}(l.Component),lg=n.g.gd,cg={container:{display:"flex",flexDirection:"column"},instructionsContainer:{display:"flex"},actionsList:{flex:1}},ug=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){return(0,ot.Z)(this,n),t.apply(this,arguments)}return(0,at.Z)(n,[{key:"render",value:function(){var e,t=this,n=lg.asWhileEvent(this.props.event);return(0,d.jsxs)("div",{style:cg.container,className:Pn()((e={},(0,r.Z)(e,mu,!0),(0,r.Z)(e,vu,this.props.selected),(0,r.Z)(e,bu,!0),e)),children:[(0,d.jsx)("div",{className:Pn()((0,r.Z)({},wu,this.props.disabled)),children:(0,d.jsx)(b.Trans,{id:"While these conditions are true:"})}),(0,d.jsx)(Dh,{platform:this.props.project.getCurrentPlatform(),instrsList:n.getWhileConditions(),style:{},className:ju,selection:this.props.selection,areConditions:!0,onAddNewInstruction:this.props.onAddNewInstruction,onPasteInstructions:this.props.onPasteInstructions,onMoveToInstruction:this.props.onMoveToInstruction,onMoveToInstructionsList:this.props.onMoveToInstructionsList,onInstructionClick:this.props.onInstructionClick,onInstructionDoubleClick:this.props.onInstructionDoubleClick,onInstructionContextMenu:this.props.onInstructionContextMenu,onAddInstructionContextMenu:this.props.onAddInstructionContextMenu,onParameterClick:this.props.onParameterClick,disabled:this.props.disabled,renderObjectThumbnail:this.props.renderObjectThumbnail,screenType:this.props.screenType,windowSize:this.props.windowSize,scope:this.props.scope,resourcesManager:this.props.project.getResourcesManager(),globalObjectsContainer:this.props.globalObjectsContainer,objectsContainer:this.props.objectsContainer,idPrefix:this.props.idPrefix}),(0,d.jsx)("div",{className:Pn()((0,r.Z)({},wu,this.props.disabled)),children:(0,d.jsx)(b.Trans,{id:"Repeat these:"})}),(0,d.jsx)(Bh,{leftIndentWidth:this.props.leftIndentWidth,windowSize:this.props.windowSize,renderConditionsList:function(e){var r=e.style,i=e.className;return(0,d.jsx)(Dh,{platform:t.props.project.getCurrentPlatform(),instrsList:n.getConditions(),style:r,className:i,selection:t.props.selection,areConditions:!0,onAddNewInstruction:t.props.onAddNewInstruction,onPasteInstructions:t.props.onPasteInstructions,onMoveToInstruction:t.props.onMoveToInstruction,onMoveToInstructionsList:t.props.onMoveToInstructionsList,onInstructionClick:t.props.onInstructionClick,onInstructionDoubleClick:t.props.onInstructionDoubleClick,onInstructionContextMenu:t.props.onInstructionContextMenu,onAddInstructionContextMenu:t.props.onAddInstructionContextMenu,onParameterClick:t.props.onParameterClick,disabled:t.props.disabled,renderObjectThumbnail:t.props.renderObjectThumbnail,screenType:t.props.screenType,windowSize:t.props.windowSize,scope:t.props.scope,resourcesManager:t.props.project.getResourcesManager(),globalObjectsContainer:t.props.globalObjectsContainer,objectsContainer:t.props.objectsContainer,idPrefix:t.props.idPrefix})},renderActionsList:function(e){var r=e.className;return(0,d.jsx)(Dh,{platform:t.props.project.getCurrentPlatform(),instrsList:n.getActions(),style:(0,a.Z)({},cg.actionsList),className:r,selection:t.props.selection,areConditions:!1,onAddNewInstruction:t.props.onAddNewInstruction,onPasteInstructions:t.props.onPasteInstructions,onMoveToInstruction:t.props.onMoveToInstruction,onMoveToInstructionsList:t.props.onMoveToInstructionsList,onInstructionClick:t.props.onInstructionClick,onInstructionDoubleClick:t.props.onInstructionDoubleClick,onInstructionContextMenu:t.props.onInstructionContextMenu,onAddInstructionContextMenu:t.props.onAddInstructionContextMenu,onParameterClick:t.props.onParameterClick,disabled:t.props.disabled,renderObjectThumbnail:t.props.renderObjectThumbnail,screenType:t.props.screenType,windowSize:t.props.windowSize,scope:t.props.scope,resourcesManager:t.props.project.getResourcesManager(),globalObjectsContainer:t.props.globalObjectsContainer,objectsContainer:t.props.objectsContainer,idPrefix:t.props.idPrefix})}})]})}}]),n}(l.Component),dg=function(e,t,n){if(!n||!e)return[];var r=Of(n).filter((function(e){return e.getName()!==t})).map((function(e){return{text:e.getName(),value:e.getName()}})),i=Ff(n).filter((function(t){return t.getName()!==e})).map((function(e){return{text:e.getName(),value:e.getName()}}));return[].concat((0,v.Z)(r),[{type:"separator"}],(0,v.Z)(i))},pg=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){return(0,ot.Z)(this,n),t.apply(this,arguments)}return(0,at.Z)(n,[{key:"focus",value:function(){this._field&&this._field.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.onChange,i=t.onRequestClose,o=t.onApply,a=t.isInline,s=t.project,l=t.sceneName,c=t.externalEventsName;return(0,d.jsx)(Nu.ZP,{margin:this.props.isInline?"none":"dense",fullWidth:!0,id:"external-events-field",value:n,onChange:r,onRequestClose:i,onApply:o,dataSource:dg(l,c,s),openOnFocus:!a,ref:function(t){return e._field=t}})}}]),n}(l.Component),fg=n.g.gd,hg={container:{height:"4em",display:"flex",alignItems:"center",padding:5},title:{fontSize:"1.2em",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},openInNewIcon:{fontSize:"1.5em"}},gg=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._externalEventsAutoComplete=null,e.state={editing:!1,editingPreviousValue:null,anchorEl:null},e.edit=function(t){var n=fg.asLinkEvent(e.props.event).getTarget(),r=t.currentTarget;setTimeout((function(){return e.setState({editing:!0,editingPreviousValue:n,anchorEl:r},(function(){setTimeout((function(){e._externalEventsAutoComplete&&e._externalEventsAutoComplete.focus()}),10)}))}),10)},e.openTarget=function(t){var n=e.props,r=n.project,i=n.event,o=n.onOpenLayout,a=n.onOpenExternalEvents,s=fg.asLinkEvent(i).getTarget();r.hasExternalEventsNamed(s)?a(s):r.hasLayoutNamed(s)?o(s):(0,Ur.T4)(t._({id:"The specified external events do not exist in the game. Be sure that the name is correctly spelled or create them using the project manager."}))},e.cancelEditing=function(){e.endEditing();var t=fg.asLinkEvent(e.props.event),n=e.state.editingPreviousValue;null!=n&&(t.setTarget(n),e.forceUpdate())},e.endEditing=function(){var t=e.state.anchorEl,n=fg.asLinkEvent(e.props.event);t&&t.focus(),e.state.editingPreviousValue!==n.getTarget()&&e.props.onEndEditingEvent(),e.setState({editing:!1,editingPreviousValue:null,anchorEl:null})},e}return(0,at.Z)(n,[{key:"render",value:function(){var e=this,t=fg.asLinkEvent(this.props.event),n=t.getTarget();return(0,d.jsx)(b.I18n,{children:function(i){var o,a=i.i18n;return(0,d.jsxs)("div",{className:Pn()((o={},(0,r.Z)(o,mu,!0),(0,r.Z)(o,vu,e.props.selected),(0,r.Z)(o,"link-container",!0),o)),style:hg.container,id:"".concat(e.props.idPrefix,"-link"),children:[(0,d.jsx)("span",{style:hg.title,className:Pn()((0,r.Z)({},wu,e.props.disabled)),children:e.props.scope.layout?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(b.Trans,{id:"Include events from"})," ",(0,d.jsx)("i",{className:Pn()((0,r.Z)({},gu,!0)),onClick:e.edit,onKeyPress:function(t){(0,kn._x)(t)&&e.edit(t)},tabIndex:0,children:n||(0,d.jsx)(b.Trans,{id:"<Enter the name of external events>"})})," "]}):(0,d.jsx)(b.Trans,{id:"Links can't be used outside of a scene."})}),(0,d.jsx)(M.Z,{onClick:function(){return e.openTarget(a)},disabled:!n,children:(0,d.jsx)(ic.Z,{style:hg.openInNewIcon})}),(0,d.jsx)(Qh,{open:e.state.editing,anchorEl:e.state.anchorEl,onRequestClose:e.cancelEditing,onApply:e.endEditing,children:(0,d.jsx)(pg,{project:e.props.project,value:n,sceneName:e.props.scope.layout?e.props.scope.layout.getName():void 0,externalEventsName:e.props.scope.externalEvents?e.props.scope.externalEvents.getName():void 0,onChange:function(n){t.setTarget(n),e.props.onUpdate()},isInline:!0,onRequestClose:e.cancelEditing,onApply:e.endEditing,ref:function(t){return e._externalEventsAutoComplete=t}})})]})}})}}]),n}(l.Component),xg=n(39949),mg=n(74149),vg=ae()("fs"),bg=ae()("path"),Cg={scrollBeyondLastLine:!1,minimap:{enabled:!1}},jg=!1,yg=!1,Zg=function(e){(0,ei.Z)(r,e);var t=(0,ti.Z)(r);function r(){var e;(0,ot.Z)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={MonacoEditor:null,error:null},e.setupEditorThemes=function(e){yg||(yg=!0,ie().forEach((function(t){t.themeData&&e.editor.defineTheme(t.themeName,t.themeData)})))},e.setUpSaveOnEditorBlur=function(t){t.onDidBlurEditorText(e.props.onBlur)},e.setUpEditorFocus=function(t){t.onDidFocusEditorText(e.props.onFocus)},e.setupEditorCompletions=function(t,n){e.setUpEditorFocus(t),e.setUpSaveOnEditorBlur(t),jg||(jg=!0,n.languages.typescript.javascriptDefaults.setCompilerOptions({target:n.languages.typescript.ScriptTarget.ES6,allowNonTsExtensions:!0,allowJs:!0,checkJs:!0}),function(e){var t=function(t){return vg.readdir(t,(function(n,r){n?console.error("Unable to read GDJS files for setting up autocompletions:",n):r.forEach((function(n){if(n.endsWith(".ts")||n.endsWith(".js")){var r=bg.join(t,n);vg.readFile(r,"utf8",(function(t,n){t?console.error("Unable to read ".concat(r," for setting up autocompletions:"),t):e.languages.typescript.javascriptDefaults.addExtraLib(n,r)}))}}))}))};(0,mg.findGDJS)().then((function(n){var r=n.gdjsRoot,i=bg.join(r,"Runtime-sources"),o=bg.join(i,"types"),a=bg.join(i,"libs"),s=bg.join(i,"pixi-renderers"),l=bg.join(i,"cocos-renderers"),c=bg.join(i,"howler-sound-manager"),u=bg.join(i,"cocos-sound-manager"),d=bg.join(i,"fontfaceobserver-font-manager"),p=bg.join(i,"Extensions"),f=bg.join(i,"events-tools");t(i),t(o),t(a),t(s),t(l),t(c),t(u),t(d),t(f),vg.readdir(p,(function(e,n){e?console.error("Unable to read Extensions folders for setting up autocompletions:",e):n.filter((function(e){return!e.endsWith(".txt")&&!e.endsWith(".md")&&!e.endsWith(".flow.js")&&!e.endsWith(".gitignore")})).forEach((function(e){return t(bg.join(p,e))}))})),e.languages.typescript.javascriptDefaults.addExtraLib("\n/** Represents the scene being played. */\nvar runtimeScene = new gdjs.RuntimeScene();\n\n/**\n * The instances of objects that are passed to your JavaScript function.\n * @type {gdjs.RuntimeObject[]}\n */\nvar objects = [];\n\n/**\n * @type {EventsFunctionContext}\n */\nvar eventsFunctionContext = {};\n","this-mock-the-context-of-events.js")}))}(n)),e.props.onEditorMounted&&e.props.onEditorMounted()},e._handleContextMenu=function(e){e.preventDefault(),e.stopPropagation()},e}return(0,at.Z)(r,[{key:"componentDidMount",value:function(){this.loadMonacoEditor()}},{key:"handleLoadError",value:function(e){this.setState({error:e})}},{key:"loadMonacoEditor",value:function(){var e=this;this.setState({error:null}),window.MonacoEnvironment={getWorkerUrl:function(e,t){return"external/monaco-editor-min/vs/base/worker/workerMain.js"}},n.e(2462).then(n.bind(n,37848)).then((function(t){return e.setState({MonacoEditor:t.default})})).catch(this.handleLoadError)}},{key:"render",value:function(){var e=this,t=this.state,n=t.MonacoEditor;return t.error?(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Unable to load the code editor"})}),(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Retry"}),onClick:this.loadMonacoEditor})]}):n?(0,d.jsx)("div",{onContextMenu:this._handleContextMenu,children:(0,d.jsx)(se.ZP.Consumer,{children:function(t){var r=t.values;return(0,d.jsx)(n,{width:e.props.width||600,height:e.props.height||200,language:"javascript",theme:r.codeEditorThemeName,value:e.props.value,onChange:e.props.onChange,editorWillMount:e.setupEditorThemes,editorDidMount:e.setupEditorCompletions,options:(0,a.Z)((0,a.Z)({},Cg),{},{fontSize:r.eventsSheetZoomLevel,wordWrap:"on"})})}})}):(0,d.jsx)(Xe.Z,{})}}]),r}(l.Component),kg=n(29324),wg=n.g.gd,Tg={container:{minHeight:30,display:"flex",flexDirection:"column",backgroundColor:"#1e1e1e"},wrappingText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:"0.95em",paddingLeft:5,paddingRight:5,paddingTop:2,paddingBottom:2,margin:0,backgroundColor:"#1e1e1e",color:"#d4d4d4",overflowX:"hidden",maxWidth:"100%",whiteSpace:"normal",wordBreak:"normal",overflowWrap:"anywhere"},comment:{color:"#777"},commentLink:{cursor:"pointer",color:"#777",textDecoration:"underline"},expandIcon:{color:"#d4d4d4"}},Sg=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._objectField=null,e.state={editingObject:!1,editingPreviousValue:null,anchorEl:null},e.onFocus=function(){var t=wg.asJsCodeEvent(e.props.event);e._inlineCodeBeforeChanges=t.getInlineCode()},e.onBlur=function(){var t=wg.asJsCodeEvent(e.props.event).getInlineCode();e._inlineCodeBeforeChanges!==t&&e.props.onEndEditingEvent()},e.onChange=function(t){wg.asJsCodeEvent(e.props.event).setInlineCode(t)},e.editObject=function(t){var n=wg.asJsCodeEvent(e.props.event).getParameterObjects(),r=t.currentTarget;setTimeout((function(){return e.setState({editingObject:!0,editingPreviousValue:n,anchorEl:r},(function(){setTimeout((function(){e._objectField&&e._objectField.focus()}),10)}))}),10)},e.cancelObjectEditing=function(){e.endObjectEditing();var t=wg.asJsCodeEvent(e.props.event),n=e.state.editingPreviousValue;null!=n&&(t.setParameterObjects(n),e.forceUpdate())},e.endObjectEditing=function(){var t=e.state.anchorEl;t&&t.focus();var n=wg.asJsCodeEvent(e.props.event);e.state.editingPreviousValue!==n.getParameterObjects()&&e.props.onEndEditingEvent(),e.setState({editingObject:!1,editingPreviousValue:null,anchorEl:null})},e.toggleExpanded=function(){var t=wg.asJsCodeEvent(e.props.event);t.setEventsSheetExpanded(!t.isEventsSheetExpanded())},e._getCodeEditorHeight=function(){if(!wg.asJsCodeEvent(e.props.event).isEventsSheetExpanded())return 200;var t=e.props.eventsSheetHeight-100;return Math.max(200,t)},e}return(0,at.Z)(n,[{key:"render",value:function(){var e=this,t=wg.asJsCodeEvent(this.props.event),n=t.getParameterObjects(),i=this.props.disabled?Tg.comment:void 0,o=(0,d.jsx)("span",{className:Pn()((0,r.Z)({},gu,!0)),onClick:this.editObject,onKeyPress:function(t){(0,kn._x)(t)&&e.editObject(t)},tabIndex:0,style:i,children:n?(0,d.jsx)(b.Trans,{id:", objects /*{parameterObjects}*/",values:{parameterObjects:n}}):(0,d.jsxs)(d.Fragment,{children:[" ",(0,d.jsx)(b.Trans,{id:"/* Click here to choose objects to pass to JavaScript */"})]})}),a=this.props.scope.eventsFunction?(0,d.jsx)("span",{style:i,children:", eventsFunctionContext"}):null,s=(0,d.jsxs)("p",{style:Tg.wrappingText,children:[(0,d.jsxs)("span",{style:i,children:[this.props.disabled?"/*":"","(function(runtimeScene"]}),o,a,(0,d.jsx)("span",{style:i,children:") {"})]}),l=(0,d.jsxs)("p",{style:Tg.wrappingText,children:[(0,d.jsx)("span",{style:i,children:"})(runtimeScene"}),o,a,(0,d.jsxs)("span",{style:i,children:[");",this.props.disabled?"*/":""]}),(0,d.jsxs)("span",{style:Tg.comment,children:[" // ",(0,d.jsx)("a",{href:(0,xg.vA)("/events/js-code"),target:"_blank",rel:"noopener noreferrer",style:Tg.commentLink,children:"Read the documentation and help"})]})]}),c=(0,d.jsx)("div",{style:Tg.expandIcon,children:t.isEventsSheetExpanded()?(0,d.jsx)(kg.Z,{fontSize:"small",color:"inherit"}):(0,d.jsx)(jt.Z,{fontSize:"small",color:"inherit"})});return(0,d.jsx)(xt.Z,{bounds:!0,children:function(i){var o,a=i.measureRef,u=i.contentRect;return(0,d.jsxs)("div",{style:Tg.container,className:Pn()((o={},(0,r.Z)(o,mu,!0),(0,r.Z)(o,vu,e.props.selected),o)),ref:a,id:"".concat(e.props.idPrefix,"-js-code"),children:[s,(0,d.jsx)(Zg,{value:t.getInlineCode(),onChange:e.onChange,width:u.bounds.width-5,height:e._getCodeEditorHeight(),onEditorMounted:function(){e.props.onUpdate()},onFocus:e.onFocus,onBlur:e.onBlur}),l,(0,d.jsx)(Wr.Z,{onClick:e.toggleExpanded,fullWidth:!0,size:"small",children:c}),(0,d.jsx)(Qh,{open:e.state.editingObject,anchorEl:e.state.anchorEl,onRequestClose:e.cancelObjectEditing,onApply:e.endObjectEditing,children:(0,d.jsx)(od,{project:e.props.project,scope:e.props.scope,globalObjectsContainer:e.props.globalObjectsContainer,objectsContainer:e.props.objectsContainer,value:n,onChange:function(n){t.setParameterObjects(n),e.props.onUpdate()},isInline:!0,onRequestClose:e.cancelObjectEditing,onApply:e.endObjectEditing,ref:function(t){return e._objectField=t}})})]})}})}}]),n}(l.Component),Pg={components:{unknownEvent:Eu,"BuiltinCommonInstructions::Standard":Hh,"BuiltinCommonInstructions::Group":Wh,"BuiltinCommonInstructions::Comment":Xh,"BuiltinCommonInstructions::ForEach":tg,"BuiltinCommonInstructions::ForEachChildVariable":ig,"BuiltinCommonInstructions::Repeat":sg,"BuiltinCommonInstructions::While":ug,"BuiltinCommonInstructions::Link":gg,"BuiltinCommonInstructions::JsCode":Sg},getEventComponent:function(e){return this.components.hasOwnProperty(e.getType())?this.components[e.getType()]:this.components.unknownEvent},registerEvent:function(e,t){this.components.hasOwnProperty(e)?this.components[e]=t:console.warn('Tried to register renderer for events "'+e+'", but a renderer already exists.')}},Eg=function(){function e(t){(0,ot.Z)(this,e),this.eventHeights={},this.updateTimeoutId=null,this.component=null,this.component=t}return(0,at.Z)(e,[{key:"_notifyComponent",value:function(){var e=this;this.updateTimeoutId||(this.updateTimeoutId=setTimeout((function(){e.component?e.component.onHeightsChanged((function(){return e.updateTimeoutId=null})):e.updateTimeoutId=null}),0))}},{key:"setEventHeight",value:function(e,t){if(0!==t){var n=this.eventHeights[e.ptr];void 0!==n&&n===t||this._notifyComponent(),this.eventHeights[e.ptr]=t}else this._notifyComponent()}},{key:"getEventHeight",value:function(e){return this.eventHeights[e.ptr]||0}}]),e}(),Ig=(n(63376),n(54168)),Mg=n.g.gd,Lg=function(){var e=Mg.asPlatform(Mg.JsPlatform.get()).getAllPlatformExtensions();return Wu()((0,Et.mapFor)(0,e.size(),(function(t){var n=e.at(t).getAllEvents();return n.keys().toJSArray().filter((function(e){return"BuiltinAsync::Async"!==e})).map((function(e){var t=n.get(e);return{type:e,fullName:t.getFullName(),description:t.getDescription()}}))})))},Ag=function(e){var t=e.targetEventsList,n=e.movingEvent,r=e.initialEventsList,i=e.toIndex;r.moveEventToAnotherEventsList(n,t,i)},Fg=function(e){var t=e.targetNode,n=e.node;t.event&&n.event&&Ag({targetEventsList:t.event.getSubEvents(),movingEvent:n.event,initialEventsList:n.eventsList,toIndex:0})},Og=function(e){var t=e.targetNode,n=e.node;if(t.event&&n.event){var r=n.depth===t.depth&&n.indexInList<t.indexInList?t.indexInList:t.indexInList+1;Ag({targetEventsList:t.eventsList,movingEvent:n.event,initialEventsList:n.eventsList,toIndex:r})}},Rg=function(e){var t=e.targetNode,n=e.node;if(t.event&&n.event){var r=n.depth===t.depth&&n.indexInList<t.indexInList?t.indexInList-1:t.indexInList;Ag({targetEventsList:t.eventsList,movingEvent:n.event,initialEventsList:n.eventsList,toIndex:r})}},Dg={addButton:{cursor:"pointer"},dropIndicator:{border:"2px solid black",outline:"1px solid white"}},_g=function(e){return function(){return Lg().map((function(t){return{label:t.fullName,click:function(){return e(t.type)}}}))}},Bg={id:"Right-click for more events"},Ng={id:"Long press for more events"};function Ug(e){var t=e.onAddEvent,n=e.DnDComponent,r=e.draggedNode,i=e.rootEventsList,o=(0,Gr.BF)(),s=l.useContext(f.Z),c=function(){r&&Ag({targetEventsList:i,movingEvent:r.event,initialEventsList:r.eventsList,toIndex:-1})};return(0,d.jsx)(b.I18n,{children:function(e){var r=e.i18n;return(0,d.jsx)(n,{canDrop:function(){return!0},drop:c,children:function(e){var n=e.connectDropTarget,i=e.isOver;return n((0,d.jsxs)("div",{children:[i&&(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},Dg.dropIndicator),{},{borderColor:s.dropIndicator.canDrop,outlineColor:s.dropIndicator.border})}),(0,d.jsx)(L.sg,{children:(0,d.jsxs)(L.x1,{justifyContent:"space-between",children:[(0,d.jsx)(Ig.Z,{openMenuWithSecondaryClick:!0,element:(0,d.jsx)("button",{style:Dg.addButton,className:"add-link",onClick:function(){return t("BuiltinCommonInstructions::Standard")},title:r._("touch"===o?Ng:Bg),children:(0,d.jsx)(b.Trans,{id:"Add a new event"})}),buildMenuTemplate:_g(t)}),(0,d.jsx)(Ig.Z,{element:(0,d.jsx)("button",{style:Dg.addButton,className:"add-link",children:(0,d.jsx)(b.Trans,{id:"Add..."})}),buildMenuTemplate:_g(t)})]})})]}))}})}})}var Hg=n(23818),Vg=n(4346),zg=n(32515),Wg={dropArea:{zIndex:1,position:"absolute"},dropIndicator:{position:"absolute",zIndex:2,border:"2px solid black",outline:"1px solid white"},autoScroll:{width:"100%",position:"absolute",height:"10%",zIndex:2}};function Gg(e){var t=e.DnDComponent,n=e.canDrop,r=e.onDrop,i=e.style,o=l.useContext(f.Z);return(0,d.jsx)(t,{canDrop:n,drop:r,children:function(e){var t=e.isOver,n=e.connectDropTarget,r=e.canDrop;return n((0,d.jsxs)("div",{children:[(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},Wg.dropArea),i.dropArea)}),r&&t&&(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)((0,a.Z)({},Wg.dropIndicator),i.dropIndicator),{},{borderColor:o.dropIndicator.canDrop,outlineColor:o.dropIndicator.border})})]}))}})}function Yg(e){var t=e.DnDComponent,n=e.onDrop,r=(e.activateTargets,e.getNodeAtPath),i=e.node,o=e.draggedNode,a=e.indentWidth,s=e.draggedNodeHeight,l=i.depth;return(0,d.jsx)(d.Fragment,{children:new Array(l).fill(0).map((function(e,c){return c===o.depth?null:(0,d.jsx)(Gg,{DnDComponent:t,onDrop:function(){return n(Og,r(i.nodePath.slice(0,c+1)))},canDrop:function(){return!0},style:{dropArea:{top:"100%",bottom:"-".concat(s,"px"),left:"-".concat(a*(l-c),"px"),width:a},dropIndicator:{left:"-".concat(a*(l-c),"px"),right:"0px",bottom:"-2px"}}},c)}))})}function qg(e){var t=e.node,n=e.draggedNode,r=e.DnDComponent,i=e.onDrop,o=e.activateTargets,s=e.windowSize,l=e.draggedNodeHeight,c=e.getNodeAtPath,u=function(e,t){if(e.depth!==t.depth)return!1;var n=e.nodePath,r=t.nodePath;return n.slice(0,-1).every((function(e,t){return e===r[t]}))}(t,n),p=function(e,t){var n=t.nodePath,r=e.nodePath;return 0!==n[n.length-1]&&n[n.length-1]-1===r[r.length-1]}(t,n),f=!!t.event&&t.event.canHaveSubEvents(),h=tx(s),g=function(e,t,n){return{"bottom-left":{left:"0px",bottom:"0px",top:"50%",width:e},"bottom-right":{left:"".concat(e,"px"),right:"0px",bottom:"0px",top:"50%"},top:{left:"0px",right:"0px",top:"0px",bottom:"50%"},bottom:{left:"0px",right:"0px",top:"50%",bottom:"0px"},"below-left":{left:n?"10px":"0px",top:"100%",height:t,width:e},"below-right":{left:"".concat(n?e:e+10,"px"),right:"0px",top:"100%",height:t}}}(h,l,u),x=function(e){return{bottom:{left:"0px",right:"0px",bottom:"-2px"},"bottom-right":{left:"".concat(e,"px"),right:"0px",bottom:"-2px"},top:{left:"0px",right:"0px",top:"-2px"}}}(h),m={DnDComponent:r,canDrop:function(){return!0}};return(0,d.jsxs)("div",{style:{visibility:o?"visible":"hidden"},children:[(0,d.jsx)(Gg,(0,a.Z)({style:{dropIndicator:x.top,dropArea:g.top},onDrop:function(){return i(Rg,t)}},m)),f?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Gg,(0,a.Z)({style:{dropIndicator:x["bottom-right"],dropArea:g["bottom-right"]},onDrop:function(){return i(Fg,t)}},m)),(0,d.jsx)(Gg,(0,a.Z)({style:{dropIndicator:x.bottom,dropArea:g["bottom-left"]},onDrop:function(){return i(Og,t)}},m)),p&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Gg,(0,a.Z)({style:{dropIndicator:x.bottom,dropArea:g["below-left"]},onDrop:function(){return i(Og,t)}},m)),(0,d.jsx)(Gg,(0,a.Z)({style:{dropIndicator:x["bottom-right"],dropArea:g["below-right"]},onDrop:function(){return i(Fg,t)}},m))]})]}):(0,d.jsx)(Gg,(0,a.Z)({style:{dropIndicator:x.bottom,dropArea:g.bottom},onDrop:function(){return i(Og,t)}},m)),p&&(0,d.jsx)(Yg,{node:t,draggedNode:n,DnDComponent:r,activateTargets:o,onDrop:i,indentWidth:h,draggedNodeHeight:l,getNodeAtPath:c})]})}function Xg(e){var t=e.direction,n=e.DnDComponent,r=e.activateTargets,i=e.onHover,o=l.useRef(null),c=l.useState(!1),u=(0,s.Z)(c,2),p=u[0],f=u[1];return l.useEffect((function(){return r?o.current=setTimeout((function(){f(!0)}),100):(f(!1),clearTimeout(o.current),o.current=null),function(){o.current&&clearTimeout(o.current)}}),[r]),(0,d.jsx)(n,{canDrop:function(){return!0},drop:function(){},children:function(e){var n=e.isOverLazy,r=e.connectDropTarget;n&&i();var o=(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},Wg.autoScroll),"top"===t?{top:0}:{bottom:0})});return p?r(o):null}})}var Kg=["className"],Jg=n.g.gd,Qg="events-sheet-events-dnd-type",$g=Ju.Z.getThumbnail.bind(Ju.Z),ex={container:{flex:1,position:"relative"},defaultEventContainer:{marginRight:10,position:"relative"},smallEventContainer:{marginRight:0,position:"relative"},eventComponentContainer:{display:"flex",flexDirection:"row",justifyContent:"stretch",position:"relative"}},tx=function(e){return"small"===e?11:22},nx={visibility:"hidden"},rx=function(e){var t=e.event,n=e.project,r=e.scope,i=e.disabled,o=e.eventsHeightsCache,s=e.onEventContextMenu,c=(0,Pt.Z)(),u=l.useRef(null),p=u.current?u.current.offsetHeight:0;l.useEffect((function(){o.setEventHeight(t,p)}),[t,o,p]);var f=l.useCallback((function(e){e.preventDefault(),s(e.clientX,e.clientY)}),[s]),h=(0,As.i)(l.useCallback((function(e){s(e.clientX,e.clientY)}),[s]),{context:"events-tree-event-component"}),g=Pg.getEventComponent(t);return(0,d.jsx)("div",(0,a.Z)((0,a.Z)({ref:u,onClick:e.onEventClick,onContextMenu:f},h),{},{style:o.getEventHeight(t)?void 0:nx,children:!!g&&(0,d.jsxs)("div",{style:ex.eventComponentContainer,children:[e.connectDragSource((0,d.jsx)("div",{className:"move-handle"})),(0,d.jsx)("div",{style:ex.container,children:(0,d.jsx)(g,{project:n,scope:r,event:t,globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,selected:au(e.selection,t),selection:e.selection,leftIndentWidth:e.leftIndentWidth,onUpdate:c,onAddNewInstruction:e.onAddNewInstruction,onPasteInstructions:e.onPasteInstructions,onMoveToInstruction:e.onMoveToInstruction,onMoveToInstructionsList:e.onMoveToInstructionsList,onInstructionClick:e.onInstructionClick,onInstructionDoubleClick:e.onInstructionDoubleClick,onInstructionContextMenu:e.onInstructionContextMenu,onAddInstructionContextMenu:e.onAddInstructionContextMenu,onEndEditingEvent:e.onEndEditingEvent,onParameterClick:e.onParameterClick,onOpenExternalEvents:e.onOpenExternalEvents,onOpenLayout:e.onOpenLayout,disabled:i,renderObjectThumbnail:e.renderObjectThumbnail,screenType:e.screenType,eventsSheetHeight:e.eventsSheetHeight,windowSize:e.windowSize,idPrefix:e.idPrefix})})]})}))},ix=function(e){var t=e.className,n=(0,Bi.Z)(e,Kg),r=l.useContext(f.Z);return(0,d.jsx)(Yc.oP,(0,a.Z)({className:"".concat("events-tree"," ").concat("light"===r.palette.type?"light-theme":"dark-theme"," ").concat(t)},n))},ox=function(){},ax=function(e){return e.treeIndex},sx=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(e){var i;return(0,ot.Z)(this,n),(i=t.call(this,e)).DragSourceAndDropTarget=(0,Zt.x)(Qg),i.DropTarget=Lh(Qg),i._eventsToTreeData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=(0,Et.mapFor)(0,e.getEventsCount(),(function(s){var l=e.getEventAt(s);t.push(l);var c=r||l.isDisabled(),u=t.length-1,d=o.concat(t.length-1),p=[].concat((0,v.Z)(a||[]),[s]);return{title:i._renderEvent,event:l,eventsList:e,indexInList:s,rowIndex:u,expanded:!l.isFolded(),disabled:c,depth:n,key:l.ptr,children:i._eventsToTreeData(l.getSubEvents(),l.isFolded()?[]:t,n+1,c,d,p).treeData,nodePath:d,relativeNodePath:p}})),l=(0,zg.Z)(i.props.preferences,i.props.tutorials,"intro-event-system"),c=[0===n?{title:function(){return(0,d.jsx)(Ug,{onAddEvent:function(e){return i.props.onAddNewEvent(e,i.props.events)},DnDComponent:i.DropTarget,draggedNode:i.state.draggedNode,rootEventsList:e})},event:null,indexInList:e.getEventsCount(),disabled:!1,depth:0,fixedHeight:40,children:[]}:null,0===n&&0!==e.getEventsCount()&&l?{title:function(){return(0,d.jsx)(L.x1,{justifyContent:"center",children:(0,d.jsx)(Vg.Z,{tutorial:l})})},event:null,indexInList:e.getEventsCount()+1,disabled:!1,depth:0,fixedHeight:150,children:[],key:"eventstree-tutorial-node"}:null,0===n&&0===e.getEventsCount()?{title:function(){return(0,d.jsx)(wt.$,{title:(0,d.jsx)(b.Trans,{id:"Add your first event"}),description:(0,d.jsx)(b.Trans,{id:"Events define the rules of a game."}),actionLabel:(0,d.jsx)(b.Trans,{id:"Add an event"}),helpPagePath:"/events",tutorialId:"intro-event-system",actionButtonId:"add-event-button",onAction:function(){return i.props.onAddNewEvent("BuiltinCommonInstructions::Standard",i.props.events)}})},event:null,indexInList:e.getEventsCount()+1,disabled:!1,depth:0,fixedHeight:300,children:[]}:null].filter(Boolean);return{treeData:c.length?s.concat(c):s,flatData:t}},i._canDrag=function(e){return!!e&&!!e.event},i._canDrop=function(e){return!0},i._onDrop=function(e,t){var n=i.state.draggedNode;if(n){e({node:n,targetNode:t});var r=n.nodePath,o=n.event;if(i._onEndDrag(),!o)return void console.warn("EventsSheet: No event found in dragged node.");var a=i.getEventRow(o);i.props.onEventMoved(r[r.length-1],a)}},i._onVisibilityToggle=function(e){var t=e.node.event;t&&(t.setFolded(!t.isFolded()),i.forceEventsUpdate())},i._renderObjectThumbnail=function(e){var t=i.props,n=t.project,o=t.scope;if(!t.showObjectThumbnails)return null;var a=Ku(n,o.layout,e);return a?(0,d.jsx)(Hg.W,{className:Pn()((0,r.Z)({},xu,!0)),alt:"",src:$g(n,a.getConfiguration())}):null},i._temporaryUnfoldNode=function(e,t){var n=t.event;if(n){var r=i.temporaryUnfoldedNodes.some((function(e){return t.key===e.key}));e?i._hoverTimerId||t.expanded||r||(i._hoverTimerId=window.setTimeout((function(){n.setFolded(!1),i.temporaryUnfoldedNodes.push(t),i.forceEventsUpdate()}),1e3)):(window.clearTimeout(i._hoverTimerId),i._hoverTimerId=null)}},i._restoreFoldedNodes=function(){i.temporaryUnfoldedNodes.forEach((function(e){return e.event&&e.event.setFolded(!0)})),i.temporaryUnfoldedNodes=[],i.forceEventsUpdate()},i._getRowHeight=function(e){var t=e.node;return t?t.event?i.eventsHeightsCache.getEventHeight(t.event):t.fixedHeight||0:0},i._onEndDrag=function(){i.state.draggedNode&&(i.setState({draggedNode:null}),i._restoreFoldedNodes(),i.forceEventsUpdate())},i._renderEvent=function(e){var t=e.node,n=t.event,r=t.depth,o=t.disabled;if(!n)return null;var s=(0,Gc.Z)(i),l=s.DragSourceAndDropTarget,c=s.DropTarget,u=!!i.state.draggedNode&&(function(e,t){if(t.depth<=e.depth)return!1;var n=e.nodePath,r=t.nodePath;return n.every((function(e,t){return e===r[t]}))}(i.state.draggedNode,t)||t.key===i.state.draggedNode.key);return(0,d.jsx)(l,{beginDrag:function(){return i.setState({draggedNode:t}),t},canDrag:function(){return i._canDrag(t)},canDrop:function(){return i._canDrop(t)},drop:function(){},endDrag:i._onEndDrag,children:function(e){var s=e.connectDragSource,l=e.connectDropTarget,p=e.isOverLazy;i._temporaryUnfoldNode(p,t);var f,h={eventsList:t.eventsList,event:n,indexInList:t.indexInList},g=(0,d.jsxs)("div",(0,a.Z)((0,a.Z)({style:(0,a.Z)({opacity:u?.5:1},(f=i.props.windowSize,"small"===f?ex.smallEventContainer:ex.defaultEventContainer))},(0,Fs.Y)({rowIndex:t.rowIndex.toString()})),{},{children:[(0,d.jsx)(rx,{project:i.props.project,scope:i.props.scope,globalObjectsContainer:i.props.globalObjectsContainer,objectsContainer:i.props.objectsContainer,event:n,eventsHeightsCache:i.eventsHeightsCache,selection:i.props.selection,leftIndentWidth:r*tx(i.props.windowSize),onAddNewInstruction:function(e){return i.props.onAddNewInstruction(h,e)},onPasteInstructions:function(e){return i.props.onPasteInstructions(h,e)},onMoveToInstruction:function(e){return i.props.onMoveToInstruction(h,e)},onMoveToInstructionsList:function(e){return i.props.onMoveToInstructionsList(h,e)},onInstructionClick:function(e){return i.props.onInstructionClick(h,e)},onInstructionDoubleClick:function(e){return i.props.onInstructionDoubleClick(h,e)},onParameterClick:function(e){return i.props.onParameterClick(h,e)},onEventClick:function(){return i.props.onEventClick({eventsList:t.eventsList,event:n,indexInList:t.indexInList})},onEndEditingEvent:function(){return i.props.onEndEditingEvent(n)},onEventContextMenu:function(e,r){return i.props.onEventContextMenu(e,r,{eventsList:t.eventsList,event:n,indexInList:t.indexInList})},onInstructionContextMenu:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.props).onInstructionContextMenu.apply(e,[h].concat(n))},onAddInstructionContextMenu:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.props).onAddInstructionContextMenu.apply(e,[h].concat(n))},onOpenExternalEvents:i.props.onOpenExternalEvents,onOpenLayout:function(e){i.props.onOpenLayout(e)},disabled:o,renderObjectThumbnail:i._renderObjectThumbnail,screenType:i.props.screenType,eventsSheetHeight:i.props.eventsSheetHeight,connectDragSource:s,windowSize:i.props.windowSize,idPrefix:"event-".concat(t.relativeNodePath.join("-"))},n.ptr),i.state.draggedNode&&(0,d.jsx)(qg,{node:t,draggedNode:i.state.draggedNode,draggedNodeHeight:i._getRowHeight({node:i.state.draggedNode}),DnDComponent:c,onDrop:i._onDrop,activateTargets:!u&&!!i.state.draggedNode,windowSize:i.props.windowSize,getNodeAtPath:function(e){return(0,Yc.PC)({path:e,treeData:i.state.treeData,getNodeKey:ax}).node}})]}));return u?g:l(g)}})},i._isNodeHighlighted=function(e){var t=e.node,n=e.searchQuery;if(!n)return!1;var r=t.event;return!!r&&n.find((function(e){return Jg.compare(e,r)}))},i._scrollUp=function(){i._list&&i._list.container.scrollBy({top:-5})},i._scrollDown=function(){i._list&&i._list.container.scrollBy({top:5})},i.temporaryUnfoldedNodes=[],i.eventsHeightsCache=new Eg((0,Gc.Z)(i)),i.state=(0,a.Z)((0,a.Z)({},i._eventsToTreeData(e.events)),{},{draggedNode:null,isScrolledTop:!0,isScrolledBottom:!1}),i}return(0,at.Z)(n,[{key:"componentDidMount",value:function(){this.onHeightsChanged()}},{key:"componentDidUpdate",value:function(e){var t=this.props.preferences.values.hiddenTutorialHints,n=e.preferences.values.hiddenTutorialHints;t["intro-event-system"]!==n["intro-event-system"]&&this.setState((0,a.Z)((0,a.Z)({},this.state),{},{treeData:this.state.treeData.filter((function(e){return"eventstree-tutorial-node"!==e.key}))}))}},{key:"componentWillUnmount",value:function(){this._hoverTimerId&&clearTimeout(this._hoverTimerId)}},{key:"onHeightsChanged",value:function(e){var t=this;this.forceUpdate((function(){t._list&&t._list.wrappedInstance.current&&t._list.wrappedInstance.current.recomputeRowHeights(),e&&e()}))}},{key:"forceEventsUpdate",value:function(e){var t=this;this.setState(this._eventsToTreeData(this.props.events),(function(){t._list&&t._list.wrappedInstance.current&&t._list.wrappedInstance.current.recomputeRowHeights(),e&&e()}))}},{key:"scrollToRow",value:function(e){if(-1!==e){var t=this._list;if(t){var n=t.wrappedInstance.current;n&&n.scrollToRow(e)}}}},{key:"unfoldForEvent",value:function(e){Jg.EventsListUnfolder.unfoldWhenContaining(this.props.events,e),this.forceEventsUpdate()}},{key:"foldAll",value:function(){Jg.EventsListUnfolder.foldAll(this.props.events),this.forceEventsUpdate()}},{key:"unfoldToLevel",value:function(e){Jg.EventsListUnfolder.unfoldToLevel(this.props.events,e),this.forceEventsUpdate()}},{key:"getEventRow",value:function(e){return Wc()(this.state.flatData,(function(t){return t.ptr===e.ptr}))}},{key:"getEventContextAtRowIndexes",value:function(e){var t=(0,Yc.Pg)({treeData:this.state.treeData,getNodeKey:ax,ignoreCollapsed:!0});return e.map((function(e){if(!t[e])return null;var n=t[e].node,r=n.event,i=n.eventsList,o=n.indexInList;return r?{event:r,eventsList:i,indexInList:o}:null})).filter(Boolean)}},{key:"render",value:function(){var e=this,t=this.state.treeData?(0,v.Z)(this.state.treeData):null,n=this.props.fontSize||14;return(0,d.jsxs)("div",{style:(0,a.Z)((0,a.Z)({},ex.container),{},{fontSize:"".concat(n,"px"),"--icon-size":"".concat(Math.round(1.14*n),"px"),"--instruction-missing-parameter-min-height":"".concat(Math.round(1.1*n),"px"),"--instruction-missing-parameter-min-width":"".concat(Math.round(3*n),"px")}),children:["touch"!==this.props.screenType&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Xg,{DnDComponent:this.DropTarget,direction:"top",activateTargets:!!this.state.draggedNode&&!this.state.isScrolledTop,onHover:this._scrollUp}),(0,d.jsx)(Xg,{DnDComponent:this.DropTarget,direction:"bottom",activateTargets:!!this.state.draggedNode&&!this.state.isScrolledBottom,onHover:this._scrollDown})]}),(0,d.jsx)(ix,{treeData:t,scaffoldBlockPxWidth:tx(this.props.windowSize),onChange:ox,onVisibilityToggle:this._onVisibilityToggle,canDrag:!1,rowHeight:this._getRowHeight,searchMethod:this._isNodeHighlighted,searchQuery:this.props.searchResults,searchFocusOffset:this.props.searchFocusOffset,className:this.props.searchResults?"with-search-results":"",reactVirtualizedListProps:{ref:function(t){return e._list=t},onScroll:function(t){e.props.onScroll&&e.props.onScroll(),e.setState({isScrolledTop:0===t.scrollTop,isScrolledBottom:t.clientHeight+t.scrollTop>=t.scrollHeight})},scrollToAlignment:"center"},slideRegionSize:-10})]})}}]),n}(l.Component);sx.defaultProps={selection:{selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]}};var lx=n.g.gd,cx=function(e){var t=e.instructionType,n=e.isCondition,r=e.project;return t?n?lx.MetadataProvider.getConditionMetadata(r.getCurrentPlatform(),t):lx.MetadataProvider.getActionMetadata(r.getCurrentPlatform(),t):null},ux=function(e){var t=e.instruction,n=e.isCondition,r=e.project,i=e.isNewInstruction,o=e.scope,c=e.globalObjectsContainer,u=e.objectsContainer,d=e.i18n,p=function(e,r){var i,a,s=$d(Td(n,c,u,e,d),o);t.getType()&&r&&((i=s,a=t.getType(),i.find((function(e){return e.type===a})))||t.setType(""));return{chosenObjectName:e,chosenObjectInstructionsInfo:s,chosenObjectInstructionsInfoTree:Nd(s)}},f=l.useState((function(){if(!i){var e=t.getType(),o=n?lx.MetadataProvider.getConditionMetadata(r.getCurrentPlatform(),e):lx.MetadataProvider.getActionMetadata(r.getCurrentPlatform(),e),a=Pd(o);if(-1!==a)return p(t.getParameter(a).getPlainString(),!1)}return{chosenObjectName:null,chosenObjectInstructionsInfo:null,chosenObjectInstructionsInfoTree:null}})),h=(0,s.Z)(f,2),g=h[0],x=h[1];return[g,{chooseInstruction:function(e){t.setType(e);return x({chosenObjectName:null,chosenObjectInstructionsInfo:null,chosenObjectInstructionsInfoTree:null}),(0,a.Z)({instruction:t},{chosenObjectName:null,chosenObjectInstructionsInfo:null,chosenObjectInstructionsInfoTree:null})},chooseObject:function(e){var n=p(e,!0);return x(n),(0,a.Z)({instruction:t},n)},chooseObjectInstruction:function(e){if(t.setType(e),g.chosenObjectName){var n=p(g.chosenObjectName,!0);return x(n),(0,a.Z)({instruction:t},n)}return(0,a.Z)({instruction:t},g)}}]},dx=n(44397),px=n.g.gd,fx=function(e,t,n,r,i){if(n.setParametersCount(r.getParametersCount()),i){var o=Pd(r);if(-1!==o){n.setParameter(o,i);var a=o+1;if(a<r.getParametersCount()){var s=r.getParameter(a);if(!px.ParameterMetadata.isBehavior(s.getType()))return;var l=s.getExtraInfo(),c=px.getBehaviorsOfObject(e,t,i,!0).toJSArray().filter((function(n){return(!l||px.getTypeOfBehavior(e,t,n,!1)===l)&&(l||!px.isDefaultBehavior(e,t,i,n,!0))}));if(1===c.length||l&&c.length>0){var u=n.getParameter(a).getPlainString();c.some((function(e){return u===e}))||n.setParameter(a,c[0])}}}else console.error('Instruction "'.concat(r.getFullName(),'" is used for an object, but does not have an object as first parameter'))}},hx=n.g.gd,gx={emptyContainer:{display:"flex",alignItems:"center",justifyContent:"center"},parametersContainer:{flex:1},icon:{width:24,height:24,marginRight:8,paddingTop:6,flexShrink:0},invertToggle:{marginTop:8},description:{whiteSpace:"pre-wrap"}},xx=function(e,t,n){return!e.isCodeOnly()&&t!==n},mx=l.forwardRef((function(e,t){var n=e.instruction,r=e.project,i=e.globalObjectsContainer,o=e.objectsContainer,c=e.noHelpButton,u=e.objectName,p=e.isCondition,h=e.scope,g=e.focusOnMount,x=e.style,m=e.openInstructionOrExpression,v=e.resourceManagementProps,j=l.useRef(null),y=l.useState(!1),Z=(0,s.Z)(y,2),k=Z[0],w=Z[1],T=l.useContext(f.Z).palette.type,S=(0,Pt.Z)(),P=l.useCallback((function(e){0!==E(cx({instructionType:n.getType(),isCondition:p,project:r}),u)&&j.current&&j.current.focus&&j.current.focus(e)}),[r,u,n,p]);l.useImperativeHandle(t,(function(){return{focus:P}}));var E=function(e,t){if(!e)return 0;var n=t?Pd(e):-1;return(0,Et.mapFor)(0,e.getParametersCount(),(function(t){if(!e)return!1;var r=e.getParameter(t);return xx(r,t,n)})).filter((function(e){return e})).length};l.useEffect((function(){if(g){var e=setTimeout((function(){P()}),300);return function(){return clearTimeout(e)}}}),[P,g]);var I=n.getType(),M=cx({instructionType:I,isCondition:p,project:r});if(!M)return(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},gx.emptyContainer),x)});var A=M.getHelpPath(),O=(0,dx.zZ)(I),R=(0,li.cT)(I),D=u?Pd(M):-1;fx(i,o,n,M,u);var _=M.getIconFilename()||"",B="dark"===T&&(_.startsWith("data:image/svg+xml")||_.includes("_black")),N=0;return(0,d.jsx)(b.I18n,{children:function(e){var t=e.i18n;return(0,d.jsx)(Tt.Z,{autoHideScrollbar:!0,children:(0,d.jsxs)(L.sg,{expand:!0,children:[(0,d.jsxs)(L.x1,{alignItems:"flex-start",children:[(0,d.jsx)("img",{src:_,alt:"",style:(0,a.Z)((0,a.Z)({},gx.icon),{},{filter:B?"grayscale(1) invert(1)":void 0})}),(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(F.Z,{style:gx.description,children:M.getDescription()})})]}),O&&(0,d.jsx)(L.x1,{children:void 0===O.identifier?(0,d.jsx)(De.Z,{kind:O.kind,children:t._(O.message)}):(0,d.jsx)(he.Z,{kind:O.kind,identifier:O.identifier,children:t._(O.message)})}),R.length?(0,d.jsx)(L.x1,{children:(0,d.jsx)(C.ak,{expand:!0,children:R.map((function(e){return(0,d.jsx)(ai.Z,{tutorialId:e},e)}))})}):null,(0,d.jsx)(L.LZ,{}),(0,d.jsxs)("div",{style:gx.parametersContainer,id:"instruction-parameters-container",children:[(0,d.jsx)(C.ak,{noMargin:!0,children:(0,Et.mapFor)(0,M.getParametersCount(),(function(e){var t=M.getParameter(e);if(!xx(t,e,D))return null;var a=t.getType(),s=gh.getParameterComponent(a),l=0===N;return N++,(0,d.jsx)(s,{instructionMetadata:M,instruction:n,parameterMetadata:t,parameterIndex:e,value:n.getParameter(e).getPlainString(),onChange:function(t){n.getParameter(e).getPlainString()!==t&&(n.setParameter(e,t),w(!0),S())},project:r,scope:h,globalObjectsContainer:i,objectsContainer:o,parameterRenderingService:gh,resourceManagementProps:v,ref:function(e){l&&(j.current=e)}},e)}))}),0===E(M,u)&&(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"There is nothing to configure."})}),p&&(0,d.jsx)(ee.Z,{label:(0,d.jsx)(b.Trans,{id:"Invert condition"}),labelPosition:"right",toggled:n.isInverted(),style:gx.invertToggle,onToggle:function(e,t){n.setInverted(t),S()}}),M.isOptionallyAsync()&&(0,d.jsx)(ee.Z,{label:(0,d.jsx)(b.Trans,{id:"Wait for the action to end before executing the actions (and subevents) following it"}),labelPosition:"right",toggled:n.isAwaited(),style:gx.invertToggle,onToggle:function(e,t){n.setAwaited(t),S()}}),(0,bh.xo)(M)&&(0,d.jsx)(L.x1,{children:(0,d.jsx)(J.Z,{label:p?(0,d.jsx)(b.Trans,{id:"Edit this condition events"}):(0,d.jsx)(b.Trans,{id:"Edit this action events"}),onClick:function(){!function(e){if(k&&!Y.ZP.showConfirmDialog(e._({id:"You've made some changes here. Are you sure you want to discard them and open the function?"})))return;var t=n.getType();if(!t)return null;var i=p?hx.MetadataProvider.getExtensionAndConditionMetadata(r.getCurrentPlatform(),t).getExtension():hx.MetadataProvider.getExtensionAndActionMetadata(r.getCurrentPlatform(),t).getExtension();m(i,t)}(t)},leftIcon:(0,d.jsx)(bt.Z,{})},"open-extension")})]},I),(0,d.jsx)(L.x1,{children:!c&&A&&(0,d.jsx)(Hn.Z,{helpPagePath:M.getHelpPath(),label:p?(0,d.jsx)(b.Trans,{id:"Help for this condition"}):(0,d.jsx)(b.Trans,{id:"Help for this action"})})})]})})}})})),vx=mx,bx=function(e){var t=e.project,n=e.objectWithContext,r=e.iconSize,i=e.onClick,o=e.selectedValue,a=e.matchesCoordinates,s=e.id,l=e.data,c=e.withIndent,u=e.keyPrefix,p=n.object.getName();return(0,d.jsx)(He.HC,{id:s,data:l,selected:o===Hd(p),style:c?Sx.indentedListItem:void 0,primaryText:(0,d.jsx)(Zr,{text:p,matchesCoordinates:a}),leftIcon:(0,d.jsx)(Ms.Z,{iconSize:r,src:Ju.Z.getThumbnail(t,n.object.getConfiguration())}),onClick:i,disableAutoTranslate:!0},(u||"")+function(e){return"object-key-".concat(e.object.getName(),"-").concat(e.global?"-global":"")}(n))},Cx=function(e){return e.isFolder()?e.getFolderName():e.getObject().getName()},jx=function e(t,n,r){(0,Et.mapFor)(0,t.getChildrenCount(),(function(i){var o=t.getChildAt(i);if(o.isFolder()){var a=n?n+" > "+o.getFolderName():o.getFolderName();r.push({path:a,folder:o}),e(o,a,r)}}))},yx=function e(t,n){(0,Et.mapFor)(0,t.getChildrenCount(),(function(r){var i=t.getChildAt(r);i.isFolder()?e(i,n):n.push(i.getObject())}))},Zx=function(e){if(!e.isFolder())return[];var t=[];return yx(e,t),t},kx=function(e){var t=e.getRootFolder(),n=[];return jx(t,"",n),n},wx=function e(t){if(t.isRootFolder())return[];var n=t.getParent();return n.isRootFolder()?[]:[n].concat((0,v.Z)(e(n)))},Tx=n.g.gd,Sx={noObjectsText:{opacity:.7},indentedListItem:{paddingLeft:45}},Px=function(e){var t=e.filter((function(e){return e.item.fullGroupName.includes("deprecated")})),n=e.filter((function(e){return!e.item.fullGroupName.includes("deprecated")}));return[].concat((0,v.Z)(n),(0,v.Z)(t))},Ex=24,Ix=function(e){return Tx.JsPlatform.get().getInstructionOrExpressionGroupMetadata(e).getIcon()},Mx=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={searchText:"",searchResults:{objects:[],groups:[],instructions:[],folders:[]}},e._searchBar=l.createRef(),e._scrollView=l.createRef(),e._selectedItem=l.createRef(),e.freeInstructionsInfo=$d(Sd(e.props.isCondition,e.props.i18n),e.props.scope),e.freeInstructionsInfoTree=Nd(e.freeInstructionsInfo),e.initialInstructionTypePath=Ud(e.freeInstructionsInfoTree,e.props.chosenInstructionType),e.instructionSearchApi=null,e.objectSearchApi=null,e.groupSearchApi=null,e.folderSearchApi=null,e.reEnumerateInstructions=function(t){e.freeInstructionsInfo=$d(Sd(e.props.isCondition,t),e.props.scope),e.freeInstructionsInfoTree=Nd(e.freeInstructionsInfo),e.forceUpdate()},e.allInstructionsInfo=$d(function(e,t){for(var n=[],r=xd.asPlatform(xd.JsPlatform.get()).getAllPlatformExtensions(),i=0;i<r.size();++i){var o=r.at(i),a=o.getExtensionObjectsTypes(),s=o.getBehaviorsTypes(),l=Cd(o,t),c=wd(l,e?o.getAllConditions():o.getAllActions(),{extension:o,objectMetadata:void 0,behaviorMetadata:void 0},t);n=[].concat((0,v.Z)(n),(0,v.Z)(c));for(var u=0;u<a.size();++u){var d=a.at(u),p=o.getObjectMetadata(d),f={extension:o,objectMetadata:p};n=[].concat((0,v.Z)(n),(0,v.Z)(wd(l,e?o.getAllConditionsForObject(d):o.getAllActionsForObject(d),f,t)))}for(var h=0;h<s.size();++h){var g=s.at(h),x=o.getBehaviorMetadata(g),m={extension:o,behaviorMetadata:x};n=[].concat((0,v.Z)(n),(0,v.Z)(wd(l,e?o.getAllConditionsForBehavior(g):o.getAllActionsForBehavior(g),m,t)))}}return n}(e.props.isCondition,e.props.i18n),e.props.scope),e._search=function(t){if(""!==t){var n=(0,qd.dr)(t);e.setState({searchResults:{objects:e.objectSearchApi?e.objectSearchApi.search(n).map((function(e){return{item:e.item,matches:(0,qd.zi)(e,t)}})):[],groups:e.groupSearchApi?e.groupSearchApi.search(n).map((function(e){return{item:e.item,matches:(0,qd.zi)(e,t)}})):[],folders:e.folderSearchApi?e.folderSearchApi.search(n).map((function(e){return{item:e.item,matches:(0,qd.zi)(e,t)}})):[],instructions:e.instructionSearchApi?Px(e.instructionSearchApi.search((0,qd.G9)(t,["displayedName","fullGroupName","description"])).map((function(e){return{item:e.item,matches:(0,qd.zi)(e,t)}}))):[]}})}},e}return(0,at.Z)(n,[{key:"componentDidMount",value:function(){this._selectedItem.current&&this._scrollView.current&&this._scrollView.current.scrollTo(this._selectedItem.current);var e=Xu(this.props.globalObjectsContainer,this.props.objectsContainer),t=e.allObjectsList,n=e.allGroupsList,r=[].concat((0,v.Z)(kx(this.props.globalObjectsContainer).map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{global:!0})}))),(0,v.Z)(kx(this.props.objectsContainer).map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{global:!1})}))));this.instructionSearchApi=new Od.Z(this.allInstructionsInfo,(0,a.Z)((0,a.Z)({},qd.KE),{},{keys:[{name:"displayedName",weight:5},{name:"fullGroupName",weight:1},{name:"description",weight:3}]})),this.objectSearchApi=new Od.Z(t,(0,a.Z)((0,a.Z)({},qd.KE),{},{getFn:function(e,t){return e.object.getName()},keys:["name"]})),this.groupSearchApi=new Od.Z(n,(0,a.Z)((0,a.Z)({},qd.KE),{},{getFn:function(e,t){return e.group.getName()},keys:["name"]})),this.folderSearchApi=new Od.Z(r,(0,a.Z)((0,a.Z)({},qd.KE),{},{getFn:function(e,t){return e.path},keys:["name"]}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.style,r=t.globalObjectsContainer,i=t.objectsContainer,o=t.project,s=t.chosenInstructionType,c=t.onChooseInstruction,u=t.chosenObjectName,p=t.onChooseObject,f=t.isCondition,h=t.currentTab,g=t.onChangeTab,x=t.onSearchStartOrReset,m=t.onClickMore,j=this.state,y=j.searchText,Z=j.searchResults,k=r!==o,w=Xu(r,i),S=w.allObjectsList,P=w.allGroupsList,E=!!y,I=[],M=[],A=[],O=[];E?(I=Z.objects,M=Z.groups,A=Z.instructions,O=Z.folders):(I=S.map((function(e){return{item:e,matches:[]}})),M=P.map((function(e){return{item:e,matches:[]}})));var R=A.slice(0,20),D=E?Math.max(A.length-20,0):0,_=!E||!!I.length||!!M.length||!!R.length||!!O,B=function(){E&&(I.length>0?p(I[0].item.object.getName()):M.length>0?p(M[0].item.group.getName()):R.length>0&&c(R[0].item.type,R[0].item))};return(0,d.jsx)(b.I18n,{children:function(t){t.i18n;return(0,d.jsxs)("div",{id:"instruction-or-object-selector",style:(0,a.Z)({minHeight:0},n),children:[(0,d.jsx)(st.Z,{id:"search-bar",value:y,onChange:function(t){var n=e.state.searchText;t&&e._search(t),e.setState({searchText:t}),(!n&&t||n&&!t)&&x&&x()},onRequestSearch:B,ref:e._searchBar,autoFocus:e.props.focusOnMount?"desktop":void 0,placeholder:f?{id:"Search objects or conditions"}:{id:"Search objects or actions"}}),!E&&(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,d.jsx)(le.m,{value:h,onChange:g,options:[{label:(0,d.jsx)(b.Trans,{id:"Objects"}),value:"objects"},{label:f?(0,d.jsx)(b.Trans,{id:"Other conditions"}):(0,d.jsx)(b.Trans,{id:"Other actions"}),value:"free-instructions"}]})})}),(0,d.jsxs)(Tt.Z,{ref:e._scrollView,autoHideScrollbar:!0,children:[_&&(0,d.jsxs)(He.aV,{children:[(E||"objects"===h)&&(0,d.jsxs)(l.Fragment,{children:[I.map((function(e,t){var n=e.item,r=e.matches;return bx({project:o,objectWithContext:n,iconSize:Ex,onClick:function(){return p(n.object.getName())},matchesCoordinates:r.length?r[0].indices:[],selectedValue:u?Hd(u):void 0,id:"object-item-"+t,data:{objectName:n.object.getName()}})})),M.length>0&&(0,d.jsx)(Gd.Z,{children:(0,d.jsx)(b.Trans,{id:"Object groups"})}),M.map((function(e){var t=e.item,n=e.matches,a=[];if(a.push(function(e){var t=e.groupWithContext,n=e.iconSize,r=e.onClick,i=e.selectedValue,o=e.matchesCoordinates,a=t.group.getName();return(0,d.jsx)(He.HC,{selected:i===Hd(a),primaryText:(0,d.jsx)(Zr,{text:a,matchesCoordinates:o}),leftIcon:(0,d.jsx)(Ms.Z,{iconSize:n,src:"res/ribbon_default/objectsgroups64.png"}),onClick:r,disableAutoTranslate:!0},function(e){return"object-group-key-".concat(e.group.getName(),"-").concat(e.global?"-global":"")}(t))}({groupWithContext:t,iconSize:Ex,onClick:function(){return p(t.group.getName())},matchesCoordinates:n.length?n[0].indices:[],selectedValue:u?Hd(u):void 0})),E){var s=t.group,l=t.global,c=s.getName(),f=s.getAllObjectsNames().toJSArray().map((function(e){var t=Ku(r,i,e);return t?bx({project:o,objectWithContext:{object:t,global:l},keyPrefix:"group-".concat(c),withIndent:!0,iconSize:Ex,onClick:function(){return p(e)},matchesCoordinates:[],selectedValue:u?Hd(u):void 0}):null})).filter(Boolean);0===f.length?a.push((0,d.jsx)(He.HC,{primaryText:(0,d.jsx)(F.Z,{style:Sx.noObjectsText,noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"No objects in the group"})}),style:Sx.indentedListItem},"".concat(s.getName(),"-empty"))):a.push.apply(a,(0,v.Z)(f))}return a})),O.length>0&&(0,d.jsx)(Gd.Z,{children:(0,d.jsx)(b.Trans,{id:"Folders"})}),O.map((function(e){var t=e.item,n=e.matches,r=[];r.push(function(e){var t=e.folderWithPath,n=e.iconSize,r=e.matchesCoordinates,i=t.path;return(0,d.jsx)(He.HC,{selected:!1,primaryText:(0,d.jsx)(Zr,{text:i,matchesCoordinates:r}),leftIcon:(0,d.jsx)(Is,{width:n}),disableAutoTranslate:!0},i)}({folderWithPath:t,iconSize:Ex,matchesCoordinates:n.length?n[0].indices:[]}));var i,a=(i=t.folder).isFolder()?(0,Et.mapFor)(0,i.getChildrenCount(),(function(e){var t=i.getChildAt(e);return t.isFolder()?null:t.getObject()})).filter(Boolean):[];return 0===a.length?r.push((0,d.jsx)(He.HC,{primaryText:(0,d.jsx)(F.Z,{style:Sx.noObjectsText,noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"No objects in the folder"})}),style:Sx.indentedListItem},"".concat(t.path,"-empty"))):r.push.apply(r,(0,v.Z)(a.map((function(e){return bx({project:o,selectedValue:u?Hd(u):void 0,keyPrefix:"folder-".concat(t.path),iconSize:Ex,matchesCoordinates:[],objectWithContext:{object:e,global:t.global},withIndent:!0,onClick:function(){return p(e.getName())}})})))),r}))]}),E&&R.length>0&&(0,d.jsx)(Gd.Z,{children:f?(0,d.jsx)(b.Trans,{id:"Conditions"}):(0,d.jsx)(b.Trans,{id:"Actions"})}),E&&R.map((function(e){var t=e.item,n=e.matches;return zd({instructionOrExpressionMetadata:t,iconSize:Ex,id:"instruction-item-".concat(t.type.replace(/:/g,"-")),onClick:function(){return c(t.type,t)},selectedValue:s?Vd(s):void 0,matches:n})})),!E&&"free-instructions"===h&&(0,d.jsxs)(d.Fragment,{children:[Yd({instructionTreeNode:e.freeInstructionsInfoTree,onChoose:c,iconSize:Ex,useSubheaders:!0,selectedValue:s?Vd(s):void 0,initiallyOpenedPath:e.initialInstructionTypePath,selectedItemRef:e._selectedItem,getGroupIconSrc:Ix}),m&&(0,d.jsx)(C.ep,{justifyContent:"center",children:(0,d.jsx)(T.Z,{primary:!0,icon:(0,d.jsx)(vt.Z,{}),onClick:m,label:f?(0,d.jsx)(b.Trans,{id:"Search for new conditions in extensions"}):(0,d.jsx)(b.Trans,{id:"Search for new actions in extensions"})})})]}),D>0&&(0,d.jsx)(He.HC,{primaryText:(0,d.jsx)(b.Trans,{id:"And {remainingResultsCount} more results.",values:{remainingResultsCount:D}}),disabled:!0,secondaryText:(0,d.jsx)(b.Trans,{id:"Refine your search with more specific keyword to see them."})})]}),!E&&"objects"===h&&!S.length&&(0,d.jsx)(qe.Z,{children:k?(0,d.jsx)(b.Trans,{id:"There are no objects. Objects will appear if you add some as parameters."}):(0,d.jsx)(b.Trans,{id:"There is no object in your game or in this scene. Start by adding an new object in the scene editor, using the objects list."})}),!_&&(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"Nothing corresponding to your search. Choose an object first or browse the list of actions/conditions."})})]})]})}})}}]),n}(l.PureComponent),Lx={display:"flex"},Ax=function(e){var t=e.columnsRenderer,n=e.getColumns,r=l.useContext(f.Z),i=n();return(0,d.jsx)(L.x1,{noMargin:!0,expand:!0,children:i.map((function(e,n){var o=e.columnName,s=t[o],l=i[n].ratio||1;if(!s)return null;var c=0===n,u=n===i.length-1,p=c?0:l>1?4*(l+1):4,f=u?0:l>1?4*(l+1):4;return(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},Lx),{},{flex:l,paddingLeft:p,paddingRight:f,borderRight:u?void 0:"2px solid ".concat(r.dialog.separator)}),children:s()},o)}))})},Fx=function(e,t,n){var r=e.getAllPlatformExtensions();return Wu()((0,Et.mapFor)(0,r.size(),(function(e){var t=r.at(e);return t.getBehaviorsTypes().toJSArray().map((function(e){return{behaviorType:e,behaviorMetadata:t.getBehaviorMetadata(e)}})).filter((function(e){return!e.behaviorMetadata.isPrivate()||n&&t.getName()===n.getName()})).map((function(e){var n=e.behaviorType,r=e.behaviorMetadata;return{extension:t,behaviorMetadata:r,type:n,defaultName:r.getDefaultName(),fullName:r.getFullName(),description:r.getDescription(),previewIconUrl:r.getIconFilename(),objectType:r.getObjectType(),category:t.getCategory(),tags:t.getTags().toJSArray()}}))})))},Ox=n(8162),Rx=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"22",height:"22",viewBox:"-2 -2 20 20",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99999 7.99996C8.36818 7.99996 8.66666 8.29844 8.66666 8.66663V9.99996C8.66666 10.3681 8.36818 10.6666 7.99999 10.6666C7.6318 10.6666 7.33332 10.3681 7.33332 9.99996V8.66663C7.33332 8.29844 7.6318 7.99996 7.99999 7.99996Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M7.99999 6.66663C8.36818 6.66663 8.66666 6.36815 8.66666 5.99996C8.66666 5.63177 8.36818 5.33329 7.99999 5.33329C7.6318 5.33329 7.33332 5.63177 7.33332 5.99996C7.33332 6.36815 7.6318 6.66663 7.99999 6.66663Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99999 3.66663C5.60676 3.66663 3.66666 5.60673 3.66666 7.99996C3.66666 10.3932 5.60676 12.3333 7.99999 12.3333C10.3932 12.3333 12.3333 10.3932 12.3333 7.99996C12.3333 5.60673 10.3932 3.66663 7.99999 3.66663ZM2.66666 7.99996C2.66666 5.05444 5.05447 2.66663 7.99999 2.66663C10.9455 2.66663 13.3333 5.05444 13.3333 7.99996C13.3333 10.9455 10.9455 13.3333 7.99999 13.3333C5.05447 13.3333 2.66666 10.9455 2.66666 7.99996Z",fill:"currentColor"})]}))})),Dx=n.g.gd,_x={button:{width:"100%"},container:{display:"flex",textAlign:"left",overflow:"hidden",width:"100%"}},Bx=function(e){var t=e.id,n=e.objectType,r=e.objectBehaviorsTypes,i=e.behaviorShortHeader,o=e.matches,s=e.onChoose,c=e.onShowDetails,u=e.onHeightComputed,p=e.platform,f=r.includes(i.type),h=(!i.objectType||n===i.objectType)&&i.allRequiredBehaviorTypes.every((function(e){return!Dx.MetadataProvider.getBehaviorMetadata(p,e).isHidden()||r.includes(e)})),g=l.useRef(null);l.useLayoutEffect((function(){g.current&&u(g.current.getBoundingClientRect().height)}));var x=function(e){var t=i[e];if(!o)return t;var n=o.filter((function(t){return t.key===e}));return 0===n.length?t:(0,d.jsx)(Zr,{text:t,matchesCoordinates:n[0].indices})},m=!f&&h,v=l.useCallback((function(){m&&s()}),[m,s]),j=f||!h||"community"===i.tier||i.isDeprecated||!1,y={paddingTop:i.authors||!1?10:j?6:4};return(0,d.jsx)(O.Z,{id:t,onClick:v,focusRipple:!0,style:_x.button,children:(0,d.jsx)("div",{style:m?_x.container:(0,a.Z)((0,a.Z)({},_x.container),{},{opacity:.384}),ref:g,children:(0,d.jsxs)(C.pJ,{children:[(0,d.jsx)("div",{style:y,children:(0,d.jsx)(mr.q,{alt:i.fullName,src:i.previewIconUrl,size:32})}),(0,d.jsxs)(L.sg,{expand:!0,children:[(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[(0,d.jsx)(F.Z,{noMargin:!0,allowBrowserAutoTranslate:!1,displayInlineAsSpan:!0,children:x("fullName")}),f&&(0,d.jsx)(be.Z,{size:"small",label:(0,d.jsx)(b.Trans,{id:"Already added"}),color:"secondary",variant:"outlined"}),!h&&(0,d.jsx)(be.Z,{size:"small",label:(0,d.jsx)(b.Trans,{id:"Incompatible with the object"}),color:"secondary",variant:"outlined"}),"community"===i.tier&&(0,d.jsx)(be.Z,{size:"small",label:(0,d.jsx)(b.Trans,{id:"Community-made"}),color:"primary"}),i.isDeprecated&&(0,d.jsx)(be.Z,{size:"small",label:(0,d.jsx)(b.Trans,{id:"Deprecated"}),color:"primary"}),i.authors&&(0,d.jsx)(Ze.ZP,{title:i.authors.length>0?(0,d.jsx)(L.x1,{children:(0,d.jsx)("div",{style:{flexWrap:"wrap"},children:i.authors.map((function(e){return(0,d.jsx)(jr,{user:e,variant:"outlined"},e.id)}))})}):"",children:(0,d.jsx)(M.Z,{size:"small",onClick:function(e){e.stopPropagation(),c()},children:(0,d.jsx)(Rx,{})})})]}),(0,d.jsx)(F.Z,{noMargin:!0,size:"body2",allowBrowserAutoTranslate:!1,displayInlineAsSpan:!0,children:x("description")})]})]})})})},Nx=function(e){return e.type},Ux=function(e){var t=e.isInstalling,n=e.project,r=e.objectType,a=e.objectBehaviorsTypes,c=e.installedBehaviorMetadataList,u=e.deprecatedBehaviorMetadataList,p=e.onInstall,f=e.onChoose,h=l.useContext(se.ZP),g=l.useState(null),x=(0,s.Z)(g,2),m=x[0],b=x[1],j=l.useContext(Ox.y),y=j.filters,Z=j.searchResults,k=j.error,w=j.fetchBehaviors,T=j.filtersState,S=j.searchText,P=j.setSearchText,E=j.allCategories,I=j.chosenCategory,A=j.setChosenCategory,F=j.setInstalledBehaviorMetadataList,O=l.useState(!1),R=(0,s.Z)(O,2),D=R[0],_=R[1];l.useEffect((function(){F(D?[].concat((0,v.Z)(c),(0,v.Z)(u)):c)}),[u,c,F,D]),l.useEffect((function(){w()}),[w]);var B=Z||null,N=l.useMemo((function(){return{add:T.addFilter,remove:T.removeFilter,chosenTags:T.chosenFilters}}),[T]),U=l.useCallback((function(e){if(!Z)return[];var t=Z.find((function(t){return t.item.type===e.type}));return t?t.matches:[]}),[Z]),H=(0,gt.Z)("intro-behaviors-and-functions").DismissableTutorialMessage,V=function(){var e=(0,lt.Z)().showConfirmation;return(0,o.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({title:{id:"Extension update"},message:{id:"This behavior needs an extension update. You may have to do some adaptations to make sure your game still works.{0}Do you want to update it now ?",values:{0:"\n\n"}},confirmButtonLabel:{id:"Update the extension"},dismissButtonLabel:{id:"Cancel"}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))}(),z=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.extensionName&&n.hasEventsFunctionsExtensionNamed(t.extensionName))){e.next=7;break}return e.next=4,V();case 4:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:if(!t.url){e.next=15;break}return(0,Ar.ix)(t.name),e.next=11,p(t);case 11:e.sent&&f(t.type),e.next=16;break;case 15:f(t.type);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,f,V,p]);return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsxs)(C.ak,{expand:!0,noMargin:!0,useFullHeight:!0,children:[(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsxs)(Dr,{value:I,onChange:function(e,t,n){A(n)},children:[(0,d.jsx)($.Z,{value:"",label:{id:"All categories"}}),E.map((function(e){return(0,d.jsx)($.Z,{value:e,label:e},e)}))]}),(0,d.jsxs)(L.x1,{expand:!0,noMargin:!0,children:[(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,d.jsx)(st.Z,{id:"extension-search-bar",value:S,onChange:P,onRequestSearch:function(){},tagsHandler:N,tags:y&&y.allTags,placeholder:{id:"Search behaviors"},autoFocus:"desktop"})}),(0,d.jsx)(Ig.Z,{element:(0,d.jsx)(M.Z,{size:"small",children:(0,d.jsx)(Ls.Z,{})}),buildMenuTemplate:function(e){return[{label:h.values.showCommunityExtensions?e._({id:"Hide community behaviors (not officially reviewed)"}):e._({id:"Show community behaviors (not officially reviewed)"}),click:function(){h.setShowCommunityExtensions(!h.values.showCommunityExtensions)}},{label:D?e._({id:"Hide deprecated behaviors (prefer not to use anymore)"}):e._({id:"Show deprecated behaviors (prefer not to use anymore)"}),click:function(){_(!D)}}]}},"menu")]})]}),H]}),(0,d.jsx)(xr,{disableAutoTranslate:!0,onRetry:w,error:k,searchItems:B&&B.map((function(e){return e.item})),getSearchItemUniqueId:Nx,renderSearchItem:function(e,t){return(0,d.jsx)(Bx,{id:"behavior-item-"+e.type.replace(/:/g,"-"),objectType:r,objectBehaviorsTypes:a,onHeightComputed:t,behaviorShortHeader:e,matches:U(e),onChoose:function(){z(e)},onShowDetails:function(){e.headerUrl&&b(e)},platform:n.getCurrentPlatform()},e.type)}})]}),!!m&&(0,d.jsx)(Lr,{project:n,isInstalling:t,extensionShortHeader:m,onClose:function(){return b(null)}})]})},Hx=n.g.gd;function Vx(e){var t=e.project,n=e.eventsFunctionsExtension,r=e.open,a=e.onClose,c=e.onChoose,u=e.objectType,p=e.objectBehaviorsTypes,f=l.useState(!1),h=(0,s.Z)(f,2),g=h[0],x=h[1],m=l.useContext(Nr.Z),v=l.useContext(tr.ZP),C=(0,Xr.zi)(v,Xr.Ch,Vr),j=l.useMemo((function(){return(0,dx.du)()}),[]),y=l.useCallback((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,Et.mapVector)(e.getRequiredBehaviorTypes(),(function(e){if(!n.includes(e)){n.push(e);var r=Hx.MetadataProvider.getBehaviorMetadata(t.getCurrentPlatform(),e);y(r,n)}})),n}),[t]),Z=l.useMemo((function(){var e=t.getCurrentPlatform();return(t&&e?Fx(e,0,n):[]).filter((function(e){return!e.behaviorMetadata.isHidden()})).map((function(e){return{type:e.type,fullName:e.fullName,description:e.description,previewIconUrl:e.previewIconUrl,objectType:e.objectType,category:e.category,allRequiredBehaviorTypes:y(e.behaviorMetadata),tags:e.tags}}))}),[t,n,y]),k=l.useMemo((function(){return Z.filter((function(e){return!j[e.type]}))}),[Z,j]),w=l.useMemo((function(){var e=Z.filter((function(e){return j[e.type]}));return e.forEach((function(e){return e.isDeprecated=!0})),e}),[Z,j]);if(!r||!t)return null;var T=(0,Xr.zi)(v,Xr.Ey,(function(e,n){j[n]&&(0,Ur.N0)(e._(j[n].warning));var r=Hx.MetadataProvider.getBehaviorMetadata(t.getCurrentPlatform(),n);return c(n,r.getDefaultName())})),S=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,r){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,C(n,t,m,r);case 4:return o=e.sent,e.abrupt("return",o);case 6:return e.prev=6,x(!1),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[1,,6,9]])})));return function(t,n){return e.apply(this,arguments)}}();return(0,d.jsx)(b.I18n,{children:function(e){var n=e.i18n;return(0,d.jsx)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Add a new behavior to the object"}),actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Close"}),primary:!1,onClick:a},"close")],secondaryActions:[(0,d.jsx)(Hn.Z,{helpPagePath:"/behaviors"},"help")],open:!0,onRequestClose:a,flexBody:!0,fullHeight:!0,id:"new-behavior-dialog",children:(0,d.jsx)(Ux,{project:t,objectType:u,objectBehaviorsTypes:p,isInstalling:g,onInstall:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S(n,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onChoose:function(e){return T(n,e)},installedBehaviorMetadataList:k,deprecatedBehaviorMetadataList:w})})}})}var zx=n.g.gd,Wx=function(e,t,n,r){if(function(e,t){return e.getAllBehaviorNames().toJSArray().filter((function(n){return e.getBehavior(n).getTypeName()===t})).length}(t,n)&&!Y.ZP.showConfirmDialog("There is already a behavior of this type attached to the object. It's possible to add this behavior again, but it's unusual and may not always be supported properly. Are you sure you want to add this behavior again?"))return!1;var i=(0,It.Z)(r,(function(e){return t.hasBehaviorNamed(e)}));return zx.WholeProjectRefactorer.addBehaviorAndRequiredBehaviors(e,t,n,i),!0},Gx=function(e){return e.getAllBehaviorNames().toJSArray().map((function(t){return e.getBehavior(t).getTypeName()}))},Yx={fullHeightSelector:{flex:1,display:"flex",flexDirection:"column"}},qx=function(e){var t=e.project,n=e.globalObjectsContainer,r=e.objectsContainer,i=e.onCancel,o=e.open,a=e.instruction,c=e.isCondition,u=e.isNewInstruction,p=e.scope,f=e.onSubmit,h=e.resourceManagementProps,g=e.openInstructionOrExpression,x=e.i18n,m=(0,Pt.Z)(),v=ux({instruction:a,isCondition:c,project:t,isNewInstruction:u,scope:p,globalObjectsContainer:n,objectsContainer:r,i18n:x}),C=(0,s.Z)(v,2),j=C[0],y=C[1],Z=j.chosenObjectName,k=j.chosenObjectInstructionsInfo,T=j.chosenObjectInstructionsInfoTree,S=y.chooseInstruction,P=y.chooseObject,E=y.chooseObjectInstruction,I=!!k&&!!T,M=Z?Ku(t,p.layout,Z):null,L=l.useRef(null),A=l.useState((function(){return function(e){return e?"object-or-free-instructions":"parameters"}(u)})),F=(0,s.Z)(A,2),O=F[0],R=F[1],D=l.useState((function(){return function(e,t){return e||t?"objects":"free-instructions"}(u,I)})),_=(0,s.Z)(D,2),B=_[0],N=_[1],U=(0,w.U)(),H=U.isMobile,V=U.windowSize,z=U.isMediumScreen,W="large"===V||"xlarge"===V,G=a.getType(),Y=l.useState(!1),q=(0,s.Z)(Y,2),X=q[0],K=q[1],Q=l.useState(!1),$=(0,s.Z)(Q,2),ee=$[0],ne=$[1],re=(0,Gr.bX)(),ie=l.useRef(null);l.useEffect((function(){re&&"parameters"===O&&ie.current&&ie.current.focus()}),[O,re]);var oe=cx({instructionType:G,isCondition:c,project:t}),ae=oe?oe.getHelpPath():void 0;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(te.ZP,{title:c?(0,d.jsx)(b.Trans,{id:"Condition"}):(0,d.jsx)(b.Trans,{id:"Action"}),actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),primary:!1,onClick:i},"cancel"),(0,d.jsx)(te.vF,{label:(0,d.jsx)(b.Trans,{id:"Ok"}),primary:!0,disabled:!G,onClick:f,id:"ok-button"},"ok")],secondaryActions:[(H||z)&&"object-or-free-instructions"!==O?(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Back"}),primary:!1,onClick:function(){R("parameters"===O&&Z?z?"object-or-free-instructions":"object-instructions":"object-or-free-instructions")}},"back"):null,(0,d.jsx)(Hn.Z,{helpPagePath:ae||"/events",label:!ae||H||"object-or-free-instructions"===O?(0,d.jsx)(b.Trans,{id:"Help"}):c?(0,d.jsx)(b.Trans,{id:"Help for this condition"}):(0,d.jsx)(b.Trans,{id:"Help for this action"})},"help")],open:o,onRequestClose:i,onApply:G?f:null,maxWidth:!1,flexBody:!0,fullHeight:!0,id:"instruction-editor-dialog",children:(0,d.jsx)(Ax,{columnsRenderer:{"instruction-or-object-selector":function(){return(0,d.jsx)(b.I18n,{children:function(e){var i=e.i18n;return(0,d.jsx)(Mx,{style:Yx.fullHeightSelector,project:t,scope:p,ref:L,currentTab:B,onChangeTab:N,globalObjectsContainer:n,objectsContainer:r,isCondition:c,chosenInstructionType:Z?void 0:G,onChooseInstruction:function(e){S(e),R("parameters")},chosenObjectName:Z,onChooseObject:function(e){P(e),R("object-instructions")},focusOnMount:re&&!G,onSearchStartOrReset:m,onClickMore:function(){return ne(!0)},i18n:i},"instruction-or-object-selector")}})},"object-instruction-selector":function(){return T&&k?(0,d.jsx)(Jd,{style:Yx.fullHeightSelector,instructionsInfo:k,instructionsInfoTree:T,iconSize:24,onChoose:function(e){E(e),R("parameters")},selectedType:G,useSubheaders:!0,focusOnMount:re&&!G,searchPlaceholderObjectName:Z,searchPlaceholderIsCondition:c,onClickMore:function(){return K(!0)},id:"object-instruction-selector"},"object-instruction-selector"):null},parameters:function(){return(0,d.jsx)(vx,{project:t,scope:p,globalObjectsContainer:n,objectsContainer:r,objectName:Z,isCondition:c,instruction:a,resourceManagementProps:h,openInstructionOrExpression:g,ref:ie,focusOnMount:re&&!!G,noHelpButton:!0},"parameters")}},getColumns:function(){return W?[{columnName:"instruction-or-object-selector"},Z?{columnName:"object-instruction-selector"}:null,{columnName:"parameters",ratio:Z?1:2}].filter(Boolean):z?"object-or-free-instructions"===O?[{columnName:"instruction-or-object-selector",ratio:1}]:[Z?{columnName:"object-instruction-selector"}:null,{columnName:"parameters"}].filter(Boolean):"object-or-free-instructions"===O?[{columnName:"instruction-or-object-selector"}]:"object-instructions"===O?[{columnName:"object-instruction-selector"}]:[{columnName:"parameters"}]}})}),X&&M&&(0,d.jsx)(Vx,{project:t,eventsFunctionsExtension:p.eventsFunctionsExtension,open:X,objectType:M.getType(),objectBehaviorsTypes:Gx(M),onClose:function(){return K(!1)},onChoose:function(e,n){M&&(Wx(t,M,e,n)&&(K(!1),(0,Ar.qH)({behaviorType:e,parentEditor:"instruction-editor-dialog"})),P(M.getName()))}}),ee&&(0,d.jsx)(b.I18n,{children:function(e){var n=e.i18n;return(0,d.jsx)(Qr,{project:t,onClose:function(){return ne(!1)},onInstallExtension:function(){},onExtensionInstalled:function(){return function(e){ne(!1),L.current&&L.current.reEnumerateInstructions(e)}(n)}})}})]})},Xx=function(e){return(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Instruction editor"}),scope:"scene-events-instruction-editor",onClose:e.onCancel,children:(0,d.jsx)(qx,(0,a.Z)({},e))})},Kx=n(64684),Jx=n(42699),Qx=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{children:(0,d.jsx)("path",{d:"M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z"})}))})),$x={fullHeightSelector:{flex:1,display:"flex",flexDirection:"column",height:"400px",width:"400px"}},em=function(e){var t=e.project,n=e.globalObjectsContainer,r=e.objectsContainer,i=e.onCancel,o=e.open,a=e.instruction,c=e.isCondition,u=e.isNewInstruction,p=e.anchorEl,f=e.scope,h=e.onSubmit,g=e.canPasteInstructions,x=e.onPasteInstructions,m=e.i18n,v=(0,Pt.Z)(),C=ux({instruction:a,isCondition:c,project:t,isNewInstruction:u,scope:f,globalObjectsContainer:n,objectsContainer:r,i18n:m}),j=(0,s.Z)(C,2),y=j[0],Z=j[1],k=y.chosenObjectName,w=y.chosenObjectInstructionsInfo,T=y.chosenObjectInstructionsInfoTree,S=Z.chooseInstruction,P=Z.chooseObject,E=Z.chooseObjectInstruction,I=l.useState("object-or-free-instructions"),M=(0,s.Z)(I,2),A=M[0],F=M[1],O=l.useState("objects"),R=(0,s.Z)(O,2),D=R[0],_=R[1],B=a.getType(),N=function(e){var i=e.instruction,o=e.chosenObjectName,a=cx({instructionType:i.getType(),isCondition:c,project:t});a&&fx(n,r,i,a,o),h()};return(0,d.jsx)(Kx.ZP,{open:o,onClose:i,anchorEl:p,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,d.jsxs)(L.sg,{children:[(0,d.jsx)(L.x1,{children:(0,d.jsx)(Ax,{columnsRenderer:{"instruction-or-object-selector":function(){return(0,d.jsx)(b.I18n,{children:function(e){var i=e.i18n;return(0,d.jsx)(Mx,{style:$x.fullHeightSelector,project:t,scope:f,currentTab:D,onChangeTab:_,globalObjectsContainer:n,objectsContainer:r,isCondition:c,chosenInstructionType:k?void 0:B,onChooseInstruction:function(e){var t=S(e),n=t.instruction,r=t.chosenObjectName;N({instruction:n,chosenObjectName:r})},chosenObjectName:k,onChooseObject:function(e){P(e),F("object-instructions")},focusOnMount:!B,onSearchStartOrReset:v,i18n:i},"instruction-or-object-selector")}})},"object-instruction-selector":function(){return T&&w?(0,d.jsx)(Jd,{style:$x.fullHeightSelector,instructionsInfo:w,instructionsInfoTree:T,iconSize:24,onChoose:function(e){var t=E(e),n=t.instruction,r=t.chosenObjectName;N({instruction:n,chosenObjectName:r})},selectedType:B,useSubheaders:!0,focusOnMount:!B,searchPlaceholderObjectName:k,searchPlaceholderIsCondition:c},"object-instruction-selector"):null}},getColumns:function(){return"object-or-free-instructions"===A?[{columnName:"instruction-or-object-selector"}]:[{columnName:"object-instruction-selector"}]}})}),(0,d.jsx)(L.x1,{noMargin:!0,justifyContent:"flex-end",children:(0,d.jsx)(Jx.Z,{label:c?(0,d.jsx)(b.Trans,{id:"Paste condition(s)"}):(0,d.jsx)(b.Trans,{id:"Paste action(s)"}),icon:(0,d.jsx)(Qx,{}),disabled:!g,onClick:function(){return x()}})})]})})},tm=n(94854),nm=n.g.gd,rm={sizeTextField:{width:90}},im={r:255,g:255,b:255},om={r:0,g:0,b:0},am=function(e){return e.filter((function(e){return["BuiltinCommonInstructions::Group","BuiltinCommonInstructions::Comment"].includes(e.getType())}))},sm=function(e){var t=e.event,n=e.onClose,r=l.useState(""),i=(0,s.Z)(r,2),o=i[0],a=i[1],c=l.useState(om),u=(0,s.Z)(c,2),p=u[0],f=u[1],h=l.useState(om),g=(0,s.Z)(h,2),x=g[0],m=g[1],v=t.getType();l.useEffect((function(){if("BuiltinCommonInstructions::Comment"===v){var e=nm.asCommentEvent(t);f({r:e.getTextColorRed(),g:e.getTextColorGreen(),b:e.getTextColorBlue()}),m({r:e.getBackgroundColorRed(),g:e.getBackgroundColorGreen(),b:e.getBackgroundColorBlue()}),a(nm.asCommentEvent(t).getComment())}else if("BuiltinCommonInstructions::Group"===v){var n=nm.asGroupEvent(t),r=n.getBackgroundColorR(),i=n.getBackgroundColorG(),o=n.getBackgroundColorB();f((function(){return(r+i+o)/3>200?om:im})),m({r:n.getBackgroundColorR(),g:n.getBackgroundColorG(),b:n.getBackgroundColorB()}),a(nm.asGroupEvent(t).getName())}else console.error("Dialog was opened for an unsupported event type: "+v)}),[t,v]);var C=l.useCallback((function(){"BuiltinCommonInstructions::Comment"===v?(nm.asCommentEvent(t).setComment(o),nm.asCommentEvent(t).setTextColor(p.r,p.g,p.b),nm.asCommentEvent(t).setBackgroundColor(x.r,x.g,x.b)):"BuiltinCommonInstructions::Group"===v&&(nm.asGroupEvent(t).setName(o),nm.asGroupEvent(t).setBackgroundColor(x.r,x.g,x.b)),e.onApply()}),[e,t,v,o,p,x]);return(0,d.jsx)(te.ZP,{title:"BuiltinCommonInstructions::Comment"===v?(0,d.jsx)(b.Trans,{id:"Edit comment"}):(0,d.jsx)(b.Trans,{id:"Edit group"}),open:!0,actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),primary:!1,onClick:n},"close"),(0,d.jsx)(te.vF,{label:(0,d.jsx)(b.Trans,{id:"Apply"}),primary:!0,onClick:C},"Apply")],onRequestClose:n,onApply:C,children:(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsxs)(tm.Z,{noPadding:!0,children:[(0,d.jsx)(tm.c,{firstChild:!0,children:(0,d.jsx)(b.Trans,{id:"Background color:"})}),(0,d.jsx)(If.Z,{style:rm.sizeTextField,disableAlpha:!0,color:x,onChangeComplete:function(e){m(e.rgb)}}),"BuiltinCommonInstructions::Comment"===v&&(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(tm.c,{children:(0,d.jsx)(b.Trans,{id:"Text color:"})}),(0,d.jsx)(If.Z,{style:rm.sizeTextField,disableAlpha:!0,color:p,onChangeComplete:function(e){f(e.rgb)}})]})]}),(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,d.jsx)(L.x1,{children:(0,d.jsx)(An.Z,{commitOnBlur:!0,translatableHintText:{id:"Enter the text to be displayed"},fullWidth:!0,multiline:!0,rows:8,rowsMax:30,value:o,onChange:function(e){a(e)}})})})})]})})},lm=function(){var e=l.useContext(f.Z);return(0,d.jsx)("span",{style:{height:32,marginLeft:3,marginRight:3,borderLeftStyle:"solid",borderLeftWidth:1,borderColor:e.toolbar.separatorColor}})},cm=function(e){var t=e.onAddEvent;return(0,xi.YZ)("ADD_STANDARD_EVENT",!0,{handler:e.onAddStandardEvent}),(0,xi.YZ)("ADD_SUBEVENT",e.canAddSubEvent,{handler:e.onAddSubEvent}),(0,xi.YZ)("ADD_COMMENT_EVENT",!0,{handler:e.onAddCommentEvent}),(0,xi.YZ)("TOGGLE_EVENT_DISABLED",e.canToggleEventDisabled,{handler:e.onToggleDisabledEvent}),(0,xi.YZ)("TOGGLE_CONDITION_INVERTED",e.canToggleInstructionInverted,{handler:e.onToggleInvertedCondition}),(0,xi.gT)("CHOOSE_AND_ADD_EVENT",!0,{generateOptions:l.useCallback((function(){return e.allEventsMetadata.map((function(e){return{text:e.fullName,handler:function(){t(e.type)}}}))}),[e.allEventsMetadata,t])}),(0,xi.YZ)("MOVE_EVENTS_IN_NEW_GROUP",e.canMoveEventsIntoNewGroup,{handler:e.moveEventsIntoNewGroup}),(0,xi.YZ)("DELETE_SELECTION",e.canRemove,{handler:e.onRemove}),(0,xi.YZ)("EVENTS_EDITOR_UNDO",e.canUndo,{handler:e.undo}),(0,xi.YZ)("EVENTS_EDITOR_REDO",e.canRedo,{handler:e.redo}),(0,xi.YZ)("SEARCH_EVENTS",!0,{handler:e.onToggleSearchPanel}),(0,xi.YZ)("OPEN_EXTENSION_SETTINGS",!!e.onOpenSettings,{handler:e.onOpenSettings||function(){}}),null},um=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.86269 16.5425V16.5425L2.86268 13.9464C2.86272 12.9799 3.64619 12.1964 4.61266 12.1964H8.99999C9.4142 12.1964 9.74999 12.5322 9.74999 12.9464C9.74999 13.3606 9.4142 13.6964 8.99999 13.6964H4.61271V13.6964C4.47466 13.6964 4.3627 13.8083 4.36268 13.9464V13.9464L4.36269 16.5426C4.36269 16.6806 4.47462 16.7926 4.61266 16.7926L8 16.7926C8.41422 16.7926 8.75 17.1283 8.75 17.5426C8.75 17.9568 8.41422 18.2926 8 18.2926L4.61271 18.2926V18.2926C3.64623 18.2926 2.86268 17.509 2.86269 16.5425Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.6127 9.34224C3.6462 9.34228 2.86265 8.55873 2.86268 7.59222L2.86267 4.99606C2.86271 4.02959 3.64618 3.24608 4.61265 3.24605L16.7304 3.24605C16.7355 3.24576 16.741 3.24545 16.747 3.24515C16.7751 3.24371 16.8131 3.24223 16.8596 3.24151C16.9524 3.24005 17.0808 3.24156 17.2332 3.25267C17.5335 3.27457 17.9502 3.33538 18.3792 3.49966C18.8104 3.66478 19.2795 3.94472 19.64 4.41799C20.0062 4.89887 20.2171 5.52306 20.2171 6.29597C20.2171 7.06887 20.0062 7.69299 19.6398 8.17368C19.2791 8.64675 18.8097 8.92619 18.3784 9.09077C17.9493 9.25452 17.5325 9.31477 17.2322 9.33627C17.0797 9.34718 16.9514 9.34851 16.8586 9.34693C16.8121 9.34614 16.7741 9.34462 16.746 9.34314C16.7402 9.34284 16.7349 9.34254 16.7299 9.34225L4.6127 9.34224ZM16.8163 7.84477C16.7958 7.84309 16.7753 7.84225 16.7548 7.84225L4.61268 7.84224C4.47464 7.84225 4.36268 7.73032 4.36269 7.59228L4.36267 4.99608C4.36268 4.85801 4.47461 4.74607 4.61268 4.74605V4.74605L16.7548 4.74605C16.7751 4.74605 16.7953 4.74523 16.8155 4.74359L16.8128 4.74381L16.8235 4.74319C16.8352 4.7426 16.8555 4.74176 16.8831 4.74132C16.9386 4.74045 17.0222 4.74127 17.1241 4.7487C17.3323 4.76388 17.5937 4.80508 17.8428 4.90046C18.0896 4.99501 18.2986 5.13239 18.4467 5.32685C18.589 5.51369 18.7171 5.80762 18.7171 6.29597C18.7171 6.78434 18.589 7.07788 18.4469 7.26423C18.299 7.4582 18.0903 7.59518 17.8436 7.68934C17.5946 7.78435 17.3333 7.82519 17.1251 7.8401C17.0232 7.84739 16.9396 7.84809 16.8841 7.84715C16.8565 7.84668 16.8362 7.84581 16.8245 7.8452L16.8138 7.84457V7.84457M16.8138 7.84457L16.8163 7.84477Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M13 16.75C13 16.3358 13.3358 16 13.75 16H15V14.75C15 14.3358 15.3358 14 15.75 14C16.1642 14 16.5 14.3358 16.5 14.75V16H17.75C18.1642 16 18.5 16.3358 18.5 16.75C18.5 17.1642 18.1642 17.5 17.75 17.5H16.5V18.75C16.5 19.1642 16.1642 19.5 15.75 19.5C15.3358 19.5 15 19.1642 15 18.75V17.5H13.75C13.3358 17.5 13 17.1642 13 16.75Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 16.75C10 13.5744 12.5744 11 15.75 11C18.9257 11 21.5 13.5744 21.5 16.75C21.5 19.9257 18.9257 22.5 15.75 22.5C12.5744 22.5 10 19.9257 10 16.75ZM15.75 12.5C13.4028 12.5 11.5 14.4028 11.5 16.75C11.5 19.0972 13.4028 21 15.75 21C18.0972 21 20 19.0972 20 16.75C20 14.4028 18.0972 12.5 15.75 12.5Z",fill:"currentColor"})]}))})),dm=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.86268 16.5425V16.5425L6.86267 13.9464C6.86271 12.9799 7.64618 12.1964 8.61265 12.1964H9.99998C10.4142 12.1964 10.75 12.5321 10.75 12.9464C10.75 13.3606 10.4142 13.6964 9.99998 13.6964H8.6127V13.6964C8.47465 13.6964 8.36269 13.8083 8.36267 13.9464V13.9464L8.36268 16.5426C8.36268 16.6806 8.47461 16.7926 8.61265 16.7926H8.99999C9.41421 16.7926 9.74999 17.1283 9.74999 17.5426C9.74999 17.9568 9.4142 18.2926 8.99999 18.2926H8.6127V18.2926C7.64622 18.2926 6.86267 17.509 6.86268 16.5425Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.6127 9.34224C4.6462 9.34228 3.86265 8.55873 3.86268 7.59222L3.86267 4.99606C3.86271 4.02959 4.64618 3.24608 5.61265 3.24605L17.7304 3.24605C17.7355 3.24576 17.741 3.24545 17.747 3.24515C17.7751 3.24371 17.8131 3.24223 17.8596 3.24151C17.9524 3.24005 18.0808 3.24156 18.2332 3.25267C18.5335 3.27457 18.9502 3.33538 19.3792 3.49966C19.8104 3.66478 20.2795 3.94472 20.64 4.41799C21.0062 4.89887 21.2171 5.52306 21.2171 6.29597C21.2171 7.06887 21.0062 7.69299 20.6398 8.17368C20.2791 8.64675 19.8097 8.92619 19.3784 9.09077C18.9493 9.25452 18.5325 9.31477 18.2322 9.33627C18.0797 9.34718 17.9514 9.34851 17.8586 9.34693C17.8121 9.34614 17.7741 9.34462 17.746 9.34314C17.7402 9.34284 17.7349 9.34254 17.7299 9.34225L5.6127 9.34224ZM17.8163 7.84477C17.7958 7.84309 17.7753 7.84225 17.7548 7.84225L5.61268 7.84224C5.47464 7.84225 5.36268 7.73032 5.36269 7.59228L5.36267 4.99608C5.36268 4.85801 5.47461 4.74607 5.61268 4.74605V4.74605L17.7548 4.74605C17.7751 4.74605 17.7953 4.74523 17.8155 4.74359L17.8128 4.74381L17.8235 4.74319C17.8352 4.7426 17.8555 4.74176 17.8831 4.74132C17.9386 4.74045 18.0222 4.74127 18.1241 4.7487C18.3323 4.76388 18.5937 4.80508 18.8428 4.90046C19.0896 4.99501 19.2986 5.13239 19.4467 5.32685C19.589 5.51369 19.7171 5.80762 19.7171 6.29597C19.7171 6.78434 19.589 7.07788 19.4469 7.26423C19.299 7.4582 19.0903 7.59518 18.8436 7.68934C18.5946 7.78435 18.3333 7.82519 18.1251 7.8401C18.0232 7.84739 17.9396 7.84809 17.8841 7.84715C17.8565 7.84668 17.8362 7.84581 17.8245 7.8452L17.8138 7.84457V7.84457M17.8138 7.84457L17.8163 7.84477Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.75 12.5C14.4028 12.5 12.5 14.4028 12.5 16.75C12.5 19.0972 14.4028 21 16.75 21C19.0972 21 21 19.0972 21 16.75C21 14.4028 19.0972 12.5 16.75 12.5ZM11 16.75C11 13.5744 13.5744 11 16.75 11C19.9257 11 22.5 13.5744 22.5 16.75C22.5 19.9257 19.9257 22.5 16.75 22.5C13.5744 22.5 11 19.9257 11 16.75Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 16.75C14 16.3358 14.3358 16 14.75 16H18.75C19.1642 16 19.5 16.3358 19.5 16.75C19.5 17.1642 19.1642 17.5 18.75 17.5H14.75C14.3358 17.5 14 17.1642 14 16.75Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.75 14C17.1642 14 17.5 14.3358 17.5 14.75V18.75C17.5 19.1642 17.1642 19.5 16.75 19.5C16.3358 19.5 16 19.1642 16 18.75V14.75C16 14.3358 16.3358 14 16.75 14Z",fill:"currentColor"})]}))})),pm=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.75 5.5C6.05964 5.5 5.5 6.05964 5.5 6.75V14.25C5.5 14.9404 6.05964 15.5 6.75 15.5H9.375C9.59127 15.5 9.79702 15.5934 9.93943 15.7561L12 18.1111L14.0606 15.7561C14.203 15.5934 14.4087 15.5 14.625 15.5H17.25C17.9404 15.5 18.5 14.9404 18.5 14.25V6.75C18.5 6.05964 17.9404 5.5 17.25 5.5H6.75ZM4 6.75C4 5.23122 5.23122 4 6.75 4H17.25C18.7688 4 20 5.23122 20 6.75V14.25C20 15.7688 18.7688 17 17.25 17H14.9653L12.5644 19.7439C12.422 19.9066 12.2163 20 12 20C11.7837 20 11.578 19.9066 11.4356 19.7439L9.03467 17H6.75C5.23122 17 4 15.7688 4 14.25V6.75Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 11C8 10.4478 8.44769 10 9 10C9.55231 10 10 10.4478 10 11C10 11.5522 9.55231 12 9 12C8.44769 12 8 11.5522 8 11Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 11C11 10.4478 11.4478 10 12 10C12.5522 10 13 10.4478 13 11C13 11.5522 12.5522 12 12 12C11.4478 12 11 11.5522 11 11Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 11C14 10.4478 14.4478 10 15 10C15.5522 10 16 10.4478 16 11C16 11.5522 15.5522 12 15 12C14.4478 12 14 11.5522 14 11Z",fill:"currentColor"})]}))})),fm=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5C8.41015 5.5 5.5 8.41015 5.5 12C5.5 15.5899 8.41015 18.5 12 18.5C15.5899 18.5 18.5 15.5899 18.5 12C18.5 8.41015 15.5899 5.5 12 5.5ZM4 12C4 7.58173 7.58173 4 12 4C16.4183 4 20 7.58173 20 12C20 16.4183 16.4183 20 12 20C7.58173 20 4 16.4183 4 12Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 8.00003C12.4142 8.00003 12.75 8.33582 12.75 8.75003V15.25C12.75 15.6642 12.4142 16 12 16C11.5858 16 11.25 15.6642 11.25 15.25V8.75003C11.25 8.33582 11.5858 8.00003 12 8.00003Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 12C8 11.5858 8.33579 11.25 8.75 11.25H15.25C15.6642 11.25 16 11.5858 16 12C16 12.4142 15.6642 12.75 15.25 12.75H8.75C8.33579 12.75 8 12.4142 8 12Z",fill:"currentColor"})]}))})),hm=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 5.5C7.96243 5.5 5.5 7.96243 5.5 11C5.5 14.0376 7.96243 16.5 11 16.5C14.0376 16.5 16.5 14.0376 16.5 11C16.5 7.96243 14.0376 5.5 11 5.5ZM4 11C4 7.13401 7.13401 4 11 4C14.866 4 18 7.13401 18 11C18 14.866 14.866 18 11 18C7.13401 18 4 14.866 4 11Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.9697 14.9697C15.2626 14.6768 15.7374 14.6768 16.0303 14.9697L19.7803 18.7197C20.0732 19.0126 20.0732 19.4874 19.7803 19.7803C19.4874 20.0732 19.0126 20.0732 18.7197 19.7803L14.9697 16.0303C14.6768 15.7374 14.6768 15.2626 14.9697 14.9697Z",fill:"currentColor"})]}))})),gm=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.75 5.5C5.05964 5.5 4.5 6.05964 4.5 6.75V17.25C4.5 17.9404 5.05964 18.5 5.75 18.5H16.25C16.9404 18.5 17.5 17.9404 17.5 17.25V16C17.5 15.5858 17.8358 15.25 18.25 15.25C18.6642 15.25 19 15.5858 19 16V17.25C19 18.7688 17.7688 20 16.25 20H5.75C4.23122 20 3 18.7688 3 17.25V6.75C3 5.23122 4.23122 4 5.75 4H16.25C16.7321 4 17.1874 4.12471 17.5829 4.3442C17.9451 4.54518 18.0758 5.00171 17.8748 5.3639C17.6738 5.72609 17.2173 5.85678 16.8551 5.6558C16.6765 5.55671 16.471 5.5 16.25 5.5H5.75Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 4.25C15.4142 4.25 15.75 4.58579 15.75 5V7C15.75 7.41421 15.4142 7.75 15 7.75C14.5858 7.75 14.25 7.41421 14.25 7V5C14.25 4.58579 14.5858 4.25 15 4.25Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 17.25C15.4142 17.25 15.75 17.5858 15.75 18V19C15.75 19.4142 15.4142 19.75 15 19.75C14.5858 19.75 14.25 19.4142 14.25 19V18C14.25 17.5858 14.5858 17.25 15 17.25Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.75 4.25C7.16421 4.25 7.5 4.58579 7.5 5V19C7.5 19.4142 7.16421 19.75 6.75 19.75C6.33579 19.75 6 19.4142 6 19V5C6 4.58579 6.33579 4.25 6.75 4.25Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.25 8.75C3.25 8.33579 3.58579 8 4 8H6.5C6.91421 8 7.25 8.33579 7.25 8.75C7.25 9.16421 6.91421 9.5 6.5 9.5H4C3.58579 9.5 3.25 9.16421 3.25 8.75Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.25 12C3.25 11.5858 3.58579 11.25 4 11.25H10C10.4142 11.25 10.75 11.5858 10.75 12C10.75 12.4142 10.4142 12.75 10 12.75H4C3.58579 12.75 3.25 12.4142 3.25 12Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.25 15.25C3.25 14.8358 3.58579 14.5 4 14.5H6.5C6.91421 14.5 7.25 14.8358 7.25 15.25C7.25 15.6642 6.91421 16 6.5 16H4C3.58579 16 3.25 15.6642 3.25 15.25Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.909 5.68137C19.4841 5.1062 20.4167 5.10621 20.9918 5.68139L22.3186 7.0082C22.8938 7.58335 22.8938 8.51584 22.3187 9.09099L15.6021 15.8076C15.5035 15.9062 15.3793 15.9754 15.2435 16.0073L12.1718 16.7301C11.9189 16.7896 11.6533 16.714 11.4697 16.5303C11.286 16.3467 11.2104 16.0811 11.2699 15.8282L11.9927 12.7565C12.0246 12.6207 12.0938 12.4965 12.1924 12.3979L18.909 5.68137C18.909 5.68137 18.909 5.68136 18.909 5.68137ZM19.9311 6.74203C19.9312 6.74204 19.9311 6.74202 19.9311 6.74203V6.74203ZM19.9504 6.76129L21.2387 8.0496L14.6923 14.596L13.0076 14.9924L13.404 13.3077L19.9504 6.76129Z",fill:"currentColor"})]}))})),xm=l.memo((function(e){var t=e.onAddStandardEvent,n=e.onAddSubEvent,r=e.canAddSubEvent,i=e.onAddCommentEvent,o=e.allEventsMetadata,a=e.onAddEvent,s=e.onToggleInvertedCondition,l=e.onToggleDisabledEvent,c=e.canToggleEventDisabled,u=e.canToggleInstructionInverted,p=e.onRemove,f=e.canRemove,h=e.undo,g=e.canUndo,x=e.redo,v=e.canRedo,b=e.onToggleSearchPanel,C=e.onOpenSettings,j=e.settingsIcon,y=e.moveEventsIntoNewGroup,Z=e.canMoveEventsIntoNewGroup,k=(0,ue.LB)();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(cm,{onAddCommentEvent:i,onAddSubEvent:n,canAddSubEvent:r,onAddStandardEvent:t,onAddEvent:a,allEventsMetadata:o,onToggleInvertedCondition:s,onToggleDisabledEvent:l,canToggleEventDisabled:c,canToggleInstructionInverted:u,onRemove:p,canRemove:f,undo:h,canUndo:g,redo:x,canRedo:v,onToggleSearchPanel:b,onOpenSettings:C,moveEventsIntoNewGroup:y,canMoveEventsIntoNewGroup:Z}),(0,d.jsxs)(m,{lastChild:!0,children:[(0,d.jsx)(M.Z,{size:"small",color:"default",onClick:t,id:"toolbar-add-event-button",tooltip:{id:"Add a new empty event"},acceleratorString:(0,ue.$3)(k.ADD_STANDARD_EVENT),children:(0,d.jsx)(um,{})}),(0,d.jsx)(M.Z,{size:"small",color:"default",onClick:n,disabled:!r,id:"toolbar-add-sub-event-button",tooltip:{id:"Add a sub-event to the selected event"},acceleratorString:(0,ue.$3)(k.ADD_SUBEVENT),children:(0,d.jsx)(dm,{})}),(0,d.jsx)(M.Z,{size:"small",color:"default",onClick:i,id:"toolbar-add-comment-button",tooltip:{id:"Add a comment"},acceleratorString:(0,ue.$3)(k.ADD_COMMENT_EVENT),children:(0,d.jsx)(pm,{})}),(0,d.jsx)(Ig.Z,{element:(0,d.jsx)(M.Z,{size:"small",color:"default",tooltip:{id:"Choose and add an event"},acceleratorString:(0,ue.$3)(k.CHOOSE_AND_ADD_EVENT),children:(0,d.jsx)(fm,{})}),buildMenuTemplate:function(){return o.map((function(e){return{label:e.fullName,click:function(){a(e.type)}}}))}}),(0,d.jsx)(lm,{}),(0,d.jsx)(M.Z,{size:"small",color:"default",onClick:p,disabled:!f,tooltip:{id:"Delete the selected event(s)"},acceleratorString:"Delete",children:(0,d.jsx)(vn.Z,{})}),(0,d.jsx)(M.Z,{size:"small",color:"default",onClick:h,disabled:!g,tooltip:{id:"Undo the last changes"},acceleratorString:"CmdOrCtrl+Z",children:(0,d.jsx)(ye,{})}),(0,d.jsx)(M.Z,{size:"small",color:"default",onClick:x,disabled:!v,tooltip:{id:"Redo the last changes"},acceleratorString:"CmdOrCtrl+Shift+Z",children:(0,d.jsx)(mn,{})}),(0,d.jsx)(lm,{}),(0,d.jsx)(M.Z,{size:"small",color:"default",onClick:function(){return b()},tooltip:{id:"Search in events"},acceleratorString:"CmdOrCtrl+F",children:(0,d.jsx)(hm,{})}),C&&(0,d.jsx)(lm,{}),C&&(0,d.jsx)(M.Z,{size:"small",color:"default",onClick:C,tooltip:{id:"Open settings"},children:j||(0,d.jsx)(gm,{})})]})]})})),mm=xm,vm=n(82054),bm=n(19131),Cm=n.g.gd,jm=function(e){var t=e.project,n=e.scope,r=e.globalObjectsContainer,i=e.objectsContainer,o=e.open,c=e.onRequestClose,u=e.onApply,p=e.onChange,f=e.instruction,h=e.isCondition,g=e.parameterIndex,x=e.anchorEl,m=e.resourceManagementProps,v=l.useState(null),b=(0,s.Z)(v,2),C=b[0],j=b[1],y=l.useState(null),Z=(0,s.Z)(y,2),k=Z[0],w=Z[1],T=l.useState(null),S=(0,s.Z)(T,2),P=S[0],E=S[1],I=l.useRef(null),M=(0,bm.T)(),A=function(){j(null),w(null),E(null)},F=l.useCallback((function(){if(!f)return A();var e=f.getType(),n=h?Cm.MetadataProvider.getConditionMetadata(t.getCurrentPlatform(),e):Cm.MetadataProvider.getActionMetadata(t.getCurrentPlatform(),e);if(g>=n.getParametersCount())return A();var r=n.getParameter(g),i=gh.getParameterComponent(r.getType());E(i),j(r),w(n),setTimeout((function(){I.current&&I.current.focus({selectAll:!0})}),10)}),[f,h,g,t]);l.useEffect((function(){o&&f&&F()}),[o,f,F]);var O=l.useCallback((function(){if(f&&k){var e=Pd(k);fx(r,i,f,k,-1!==e?f.getParameter(e).getPlainString():null)}u()}),[f,k,u,i,r]);if(!P||!o||!f||!C||!k)return null;var R=(0,d.jsx)(P,{instruction:f,instructionMetadata:k,parameterMetadata:C,parameterIndex:g,value:f.getParameter(g).getPlainString(),onChange:p,onRequestClose:c,onApply:O,project:t,scope:n,globalObjectsContainer:r,objectsContainer:i,ref:I,parameterRenderingService:gh,isInline:!0,resourceManagementProps:m},f.ptr);return(0,$l._F)()?(0,d.jsx)(vm.ZP,{anchor:"bottom",open:!0,onClose:u,transitionDuration:0,PaperProps:{style:(0,a.Z)((0,a.Z)({},(0,bm.E)(M)),{},{paddingBottom:40,maxWidth:600,margin:"auto"})},children:(0,d.jsx)(L.sg,{children:(0,d.jsx)(L.x1,{children:R})})}):(0,d.jsx)(Qh,{open:!0,anchorEl:x,onRequestClose:c,onApply:O,children:R})},ym=n.g.gd,Zm=function(e){var t=e.getObjectNames().toNewVectorString().toJSArray(),n=e.getReferencedObjectOrGroupNames().toNewVectorString().toJSArray(),r={};return n.forEach((function(t){var n=e.getBehaviorNamesOfObjectOrGroup(t).toNewVectorString().toJSArray();n.length&&(r[t]=n)})),{objectsNames:t,objectOrGroupNames:n,objectOrGroupBehaviorNames:r}},km=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){return(0,ot.Z)(this,n),t.apply(this,arguments)}return(0,at.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.eventsContextResult,r=[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Close"}),primary:!0,onClick:this.props.onClose},"close")];return(0,d.jsxs)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Events analysis"}),actions:r,open:!0,onRequestClose:t,children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Objects or groups being directly referenced in the events: {0}",values:{0:n.objectOrGroupNames.join(", ")}})}),(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"All objects potentially used in events: {0}",values:{0:n.objectsNames.join(", ")}})}),(0,d.jsxs)(F.Z,{children:[(0,d.jsx)(b.Trans,{id:"All behaviors being directly referenced in the events:"})," ",Object.keys(n.objectOrGroupBehaviorNames).map((function(e){return(0,d.jsx)(b.Trans,{id:"Behaviors of {objectOrGroupName}: {0} ;",values:{0:n.objectOrGroupBehaviorNames[e].join(", "),objectOrGroupName:e}},e)}))]})]})}}]),n}(l.Component),wm=function(e,t){var n=e.onSearchInEvents,r=e.onReplaceInEvents,i=e.onCloseSearchPanel,o=e.resultsCount,a=e.hasEventSelected,c=e.onGoToPreviousSearchResult,u=e.onGoToNextSearchResult,p=e.searchFocusOffset,f=(0,w.U)().isMobile,h=l.useRef(null),g=l.useRef(null),x=l.useState(""),m=(0,s.Z)(x,2),v=m[0],j=m[1],y=l.useState(""),Z=(0,s.Z)(y,2),k=Z[0],S=Z[1],P=l.useState(!1),E=(0,s.Z)(P,2),I=E[0],A=E[1],O=l.useState(!0),R=(0,s.Z)(O,2),D=R[0],B=R[1],N=l.useState(!0),U=(0,s.Z)(N,2),H=U[0],V=U[1],z=l.useState(!0),W=(0,s.Z)(z,2),G=W[0],Y=W[1],q=l.useState(!1),X=(0,s.Z)(q,2),K=X[0],Q=(X[1],l.useState(!1)),$=(0,s.Z)(Q,2),ee=$[0],te=$[1],ne=l.useState("search-and-replace"),re=(0,s.Z)(ne,2),ie=re[0],oe=re[1],ae=l.useCallback((function(){return!!v&&!ee}),[v,ee]),se=(0,Gr.bX)(),ce=l.useCallback((function(){h.current&&h.current.focus()}),[]),ue=l.useCallback((function(){g.current&&g.current.focus()}),[]),de=l.useCallback((function(){te(!0)}),[]);l.useImperativeHandle(t,(function(){return{isSearchOngoing:ae,focus:ce,markSearchResultsDirty:de}})),l.useEffect((function(){te(!0)}),[v,D,H,G,I]),l.useEffect((function(){se&&ce()}),[ie,ce,se]),l.useEffect(de,[ie,de]);var pe=function(){r({searchInSelection:K,searchText:v,replaceText:k,matchCase:I,searchInActions:D,searchInConditions:H,searchInEventStrings:G})},fe=function(){ee&&(n({searchInSelection:K,searchText:v,matchCase:I,searchInActions:D,searchInConditions:H,searchInEventStrings:G,searchInEventSentences:!he()}),te(!1))},he=l.useCallback((function(){return"search-and-replace"===ie}),[ie]),ge=!v,xe=!v||!a&&K;return(0,d.jsx)(is,{noFullHeight:!0,noExpand:!0,children:(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{expand:!0,noOverflowParent:!0,children:(0,d.jsx)(le.m,{value:ie,onChange:oe,options:[{value:"search-and-replace",label:(0,d.jsx)(b.Trans,{id:"Search and replace in parameters"})},{value:"search-in-event-sentences",label:(0,d.jsx)(b.Trans,{id:"Search in event sentences"})}],variant:f?"scrollable":void 0})})}),(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsxs)(C.ak,{expand:!0,children:[(0,d.jsxs)(C.pJ,{alignItems:"baseline",noMargin:!0,children:[(0,d.jsx)($r.ZP,{ref:h,margin:"dense",endAdornment:v?(0,d.jsx)(M.Z,{onClick:function(){j(""),se&&ce()},edge:"end",children:(0,d.jsx)(_.Z,{fontSize:"small"})}):null,translatableHintText:he()?{id:"Text to search in parameters"}:{id:"Text to search in event sentences"},onChange:function(e,t){j(t)},onKeyPress:function(e){(0,kn.Zq)(e)?c():(0,kn.ph)(e)&&(ee?ge||fe():u())},onKeyUp:function(e){(0,kn.W$)(e)&&i()},value:v,fullWidth:!0}),(0,d.jsx)(T.Z,{disabled:ge,primary:!0,label:(0,d.jsx)(b.Trans,{id:"Search"}),onClick:function(){ee?fe():u()}})]}),he()&&(0,d.jsxs)(C.pJ,{alignItems:"baseline",noMargin:!0,children:[(0,d.jsx)($r.ZP,{margin:"dense",ref:g,endAdornment:k?(0,d.jsx)(M.Z,{onClick:function(){S(""),se&&ue()},edge:"end",children:(0,d.jsx)(_.Z,{fontSize:"small"})}):null,translatableHintText:{id:"Text to replace in parameters"},onChange:function(e,t){S(t)},onKeyPress:function(e){(0,kn.ph)(e)&&(xe||pe())},onKeyUp:function(e){(0,kn.W$)(e)&&i()},value:k,fullWidth:!0}),(0,d.jsx)(T.Z,{disabled:xe,label:(0,d.jsx)(b.Trans,{id:"Replace"}),onClick:pe})]}),(0,d.jsxs)(C.ep,{noMargin:!0,alignItems:"center",justifyContent:"space-between",children:[(0,d.jsxs)(C.ep,{noMargin:!0,alignItems:"center",children:[(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[(0,d.jsx)(Xa.Z,{label:(0,d.jsx)(b.Trans,{id:"Case insensitive"}),checked:!I,onCheck:function(e,t){A(!t)}}),!f&&(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Search in:"})}),(0,d.jsx)(Xa.Z,{label:(0,d.jsx)(b.Trans,{id:"Conditions"}),checked:H,onCheck:function(e,t){V(t)}})]}),(0,d.jsxs)(L.x1,{noMargin:!0,alignItems:"center",children:[(0,d.jsx)(Xa.Z,{label:(0,d.jsx)(b.Trans,{id:"Actions"}),checked:D,onCheck:function(e,t){B(t)}}),(0,d.jsx)(Xa.Z,{label:(0,d.jsx)(b.Trans,{id:"Texts"}),checked:G,onCheck:function(e,t){Y(t)}})]})]}),(0,d.jsxs)(L.x1,{noMargin:!0,alignItems:"center",justifyContent:"flex-end",children:[(0,d.jsx)(F.Z,{children:null===o||void 0===o?"":0===o?(0,d.jsx)(b.Trans,{id:"No results"}):null===p||void 0===p?(0,d.jsx)(b.Trans,{id:"{resultsCount} results",values:{resultsCount:o}}):(0,d.jsx)(b.Trans,{id:"Showing {0} of {resultsCount}",values:{0:p+1,resultsCount:o}})}),(0,d.jsx)(M.Z,{disabled:!o,onClick:function(){c()},children:(0,d.jsx)(Co.Z,{})}),(0,d.jsx)(M.Z,{disabled:!o,onClick:function(){u()},children:(0,d.jsx)(Ct.Z,{})}),(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Close"}),primary:!1,onClick:function(){i()}},"close")]})]})]})})]})})},Tm=l.forwardRef(wm),Sm=n(29118),Pm=n.n(Sm),Em=n.g.gd,Im=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={eventsSearchResults:null,searchFocusOffset:null},e._resultEvents=null,e.reset=function(){e.state.eventsSearchResults&&e.state.eventsSearchResults.delete(),e._resultEvents=null,e.setState({eventsSearchResults:null,searchFocusOffset:null})},e._deduplicateEventSearchResults=function(e){var t=(0,Et.mapFor)(0,e.size(),(function(t){var n=e.at(t);return n.isEventValid()?n.getEvent():null})).filter(Boolean);return Pm()(t,(function(e){return e.ptr}))},e._doReplaceInEvents=function(t,n){var r=t.searchInSelection,i=t.searchText,o=t.replaceText,a=t.matchCase,s=t.searchInConditions,l=t.searchInActions,c=t.searchInEventStrings,u=e.props,d=u.globalObjectsContainer,p=u.objectsContainer,f=u.events;r&&console.error("Replace in selection is not implemented yet");var h=Em.EventsRefactorer.replaceStringInEvents(d,p,f,i,o,a,s,l,c);return e.state.eventsSearchResults&&e.state.eventsSearchResults.delete(),e.setState({eventsSearchResults:h.clone(),searchFocusOffset:null},(function(){e._updateListOfResultEvents(),n()})),e._deduplicateEventSearchResults(h)},e._doSearchInEvents=function(t,n){var r=t.searchInSelection,i=t.searchText,o=t.matchCase,a=t.searchInConditions,s=t.searchInActions,l=t.searchInEventStrings,c=t.searchInEventSentences,u=e.props.events;r&&console.error("Search in selection is not implemented yet");var d=Em.EventsRefactorer.searchInEvents(e.props.project.getCurrentPlatform(),u,i,o,a,s,l,c);e.state.eventsSearchResults&&e.state.eventsSearchResults.delete(),e.setState({eventsSearchResults:d.clone(),searchFocusOffset:null},(function(){e._updateListOfResultEvents(),n()}))},e._updateListOfResultEvents=function(){var t=e.state.eventsSearchResults;e._resultEvents=t?e._deduplicateEventSearchResults(t):null},e._goToSearchResults=function(t){if(e._updateListOfResultEvents(),!e._resultEvents||0===e._resultEvents.length)return e.setState({searchFocusOffset:null}),null;var n=e.state.searchFocusOffset,r=null===n||void 0===n?function(e,t,n){var r=Kc(n);if(!r.length)return 0;var i=[r[0]].concat((0,v.Z)(t)),o=new Em.EventsPositionFinder;i.forEach((function(e){return o.addEventToSearch(e)})),o.launch(e);var a=o.getPositions().toJSArray(),s=(0,Wd.Z)(a),l=s[0],c=s.slice(1);o.delete();for(var u=0;u<c.length;u++)if(c[u]>=l)return u;return 0}(e.props.events,e._resultEvents,e.props.selection):(n+t)%e._resultEvents.length;r<0&&(r+=e._resultEvents.length);var i=e._resultEvents[r];return setTimeout((function(){return e.setState({searchFocusOffset:r})}),0),i},e._goToPreviousSearchResult=function(){return e._goToSearchResults(-1)},e._goToNextSearchResult=function(){return e._goToSearchResults(1)},e}return(0,at.Z)(n,[{key:"componentWillUnmount",value:function(){this.reset()}},{key:"render",value:function(){return this.props.children({eventsSearchResultEvents:this._resultEvents,searchFocusOffset:this.state.searchFocusOffset,searchInEvents:this._doSearchInEvents,replaceInEvents:this._doReplaceInEvents,goToNextSearchResult:this._goToNextSearchResult,goToPreviousSearchResult:this._goToPreviousSearchResult,clearSearchResults:this.reset})}}]),n}(l.Component),Mm=n.g.gd,Lm=function e(t,n){var r=t.getSubInstructions();if(Mm.compare(r,n))return!0;for(var i=0;i<r.size();++i){if(e(r.get(i),n))return!0}return!1},Am=n.g.gd,Fm=function(e){return Am.Project.isNameSafe(e)},Om=function(e){return Am.Project.isNameSafe(e)},Rm=function(e,t){return!e.hasEventsFunctionsExtensionNamed(t)},Dm=function(e,t,n){return!e.hasEventsFunctionsExtensionNamed(t)||!e.getEventsFunctionsExtension(t).hasEventsFunctionNamed(n.getName())},_m=function(e,t,n){return""!==t&&Om(t)&&""!==n.getName()&&Fm(n.getName())&&Dm(e,t,n)&&""!==n.getFullName()&&""!==n.getSentence()},Bm=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={objectMetadata:Yu(e.props.project)},e}return(0,at.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.value,r=e.onChange,i=e.floatingLabelText,o=e.allowedObjectTypes,a=this.state.objectMetadata,s=function(e){return!!o&&-1===o.indexOf(e)};return(0,d.jsxs)(K.Z,{floatingLabelText:i||(0,d.jsx)(b.Trans,{id:"Object type"}),value:n,onChange:function(e,t,n){r(n)},disabled:t,fullWidth:!0,children:[(0,d.jsx)($.Z,{value:"",label:{id:"Any object"},disabled:s("")}),a.map((function(e){return""===e.name?null:(0,d.jsx)($.Z,{value:e.name,label:e.fullName,disabled:s(e.name)},e.name)}))]})}}]),n}(l.Component),Nm=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={behaviorMetadata:Fx(e.props.project.getCurrentPlatform(),e.props.project,e.props.eventsFunctionsExtension)},e}return(0,at.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.objectType,r=e.value,i=e.onChange,o=this.state.behaviorMetadata,a=!!o.find((function(e){return e.type===r}));return(0,d.jsxs)(K.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Behavior type"}),value:r,onChange:function(e,t,n){i(n)},disabled:t,fullWidth:!0,children:[o.map((function(e){return(0,d.jsx)($.Z,{value:e.type,label:e.fullName,disabled:""!==e.objectType&&e.objectType!==n},e.type)})),!a&&r&&(0,d.jsx)($.Z,{value:r,label:r})]})}}]),n}(l.Component),Um=function(e){var t=e.extraInfo,n=e.setExtraInfo,r=e.disabled,i=function(){return n(t)};return(0,d.jsx)(C.ep,{children:(0,d.jsxs)(L.sg,{justifyContent:"flex-end",expand:!0,noMargin:!0,children:[t.map((function(e,n){return(0,d.jsxs)(L.x1,{justifyContent:"flex-end",expand:!0,alignItems:"center",noMargin:!0,children:[(0,d.jsx)(An.Z,{disabled:r,commitOnBlur:!0,value:e,onChange:function(e){t[n]=e,i()},fullWidth:!0}),(0,d.jsx)(xn.Z,{disabled:r,tooltip:{id:"Delete option"},onClick:function(){t.splice(n,1),i()},children:(0,d.jsx)(vn.Z,{})})]},n)})),(0,d.jsx)(L.x1,{justifyContent:"flex-end",expand:!0,children:(0,d.jsx)(T.Z,{disabled:r,primary:!0,onClick:function(){t.push("New Option"),i()},label:(0,d.jsx)(b.Trans,{id:"Add a new option"}),icon:(0,d.jsx)(vt.Z,{})})})]})})},Hm=function(e){var t=e.getExtraInfo(),n=[];try{""!==t&&(n=JSON.parse(t)),Array.isArray(n)||(n=[])}catch(r){console.error("Cannot parse parameter extraInfo: ",r)}return n},Vm=function(e){return e.startsWith("object")?"object":"scene"},zm=function(e){return e.startsWith("object")?e.substring(6):e.substring(5)};function Wm(e){var t=e.project,n=e.valueTypeMetadata,r=e.disabled,i=e.isTypeSelectorShown,o=e.onTypeUpdated,a=e.getLastObjectParameterObjectType,s=e.isExpressionType,l=(0,Pt.Z)();return(0,d.jsx)(b.I18n,{children:function(e){e.i18n;return(0,d.jsxs)(C.ak,{noMargin:!0,expand:!0,children:[(0,d.jsxs)(C.ep,{noMargin:!0,children:[i&&(0,d.jsxs)(K.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Type"}),value:n.getName(),onChange:function(e,t,r){n.setName(r),n.setOptional(!1),n.setDefaultValue(""),l(),o()},disabled:r,fullWidth:!0,children:[!s&&(0,d.jsx)($.Z,{value:"objectList",label:{id:"Objects"}}),!s&&(0,d.jsx)($.Z,{value:"behavior",label:{id:"Behavior (for the previous object)"}}),(0,d.jsx)($.Z,{value:"expression",label:{id:"Number"}}),(0,d.jsx)($.Z,{value:"string",label:{id:"String (text)"}}),(0,d.jsx)($.Z,{value:"stringWithSelector",label:{id:"String from a list of options (text)"}}),(0,d.jsx)($.Z,{value:"key",label:{id:"Keyboard Key (text)"}}),(0,d.jsx)($.Z,{value:"mouse",label:{id:"Mouse button (text)"}}),(0,d.jsx)($.Z,{value:"color",label:{id:"Color (text)"}}),(0,d.jsx)($.Z,{value:"layer",label:{id:"Layer (text)"}}),(0,d.jsx)($.Z,{value:"sceneName",label:{id:"Scene name (text)"}}),!s&&(0,d.jsx)($.Z,{value:"yesorno",label:{id:"Yes or No (boolean)"}}),!s&&(0,d.jsx)($.Z,{value:"trueorfalse",label:{id:"True or False (boolean)"}}),(0,d.jsx)($.Z,{value:"objectPointName",label:{id:"Object point (text)"}}),(0,d.jsx)($.Z,{value:"objectAnimationName",label:{id:"Object animation (text)"}}),(0,d.jsx)($.Z,{value:"layerEffectName",label:{id:"Layer effect (text)"}}),(0,d.jsx)($.Z,{value:"layerEffectParameterName",label:{id:"Layer effect property (text)"}}),(0,d.jsx)($.Z,{value:"objectEffectName",label:{id:"Object effect (text)"}}),(0,d.jsx)($.Z,{value:"objectEffectParameterName",label:{id:"Object effect property (text)"}}),(0,d.jsx)($.Z,{value:"leaderboardId",label:{id:"Leaderboard (text)"}}),(0,d.jsx)($.Z,{value:"identifier",label:{id:"Identifier (text)"}}),(0,d.jsx)($.Z,{value:"scenevar",label:{id:"Scene variable"}}),!s&&(0,d.jsx)($.Z,{value:"objectListOrEmptyIfJustDeclared",label:{id:"Created objects"}}),!s&&(0,d.jsx)($.Z,{value:"imageResource",label:{id:"Image resource (JavaScript only)"}}),!s&&(0,d.jsx)($.Z,{value:"audioResource",label:{id:"Audio resource (JavaScript only)"}}),!s&&(0,d.jsx)($.Z,{value:"jsonResource",label:{id:"JSON resource (JavaScript only)"}}),!s&&(0,d.jsx)($.Z,{value:"fontResource",label:{id:"Font resource (JavaScript only)"}}),!s&&(0,d.jsx)($.Z,{value:"bitmapFontResource",label:{id:"Bitmap font resource (JavaScript only)"}})]}),n.isObject()&&(0,d.jsx)(Bm,{project:t,value:n.getExtraInfo(),onChange:function(e){n.setExtraInfo(e),l(),o()},disabled:r}),n.isBehavior()&&(0,d.jsx)(Nm,{project:t,objectType:a(),value:n.getExtraInfo(),onChange:function(e){n.setExtraInfo(e),l(),o()},disabled:r}),"yesorno"===n.getName()&&(0,d.jsxs)(K.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Default value"}),value:"yes"===n.getDefaultValue()?"yes":"no",onChange:function(e,t,r){n.setOptional(!0),n.setDefaultValue(r),l(),o()},fullWidth:!0,children:[(0,d.jsx)($.Z,{value:"yes",label:{id:"Yes"}}),(0,d.jsx)($.Z,{value:"no",label:{id:"No"}})]}),"trueorfalse"===n.getName()&&(0,d.jsxs)(K.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Default value"}),value:"True"===n.getDefaultValue()?"True":"False",onChange:function(e,t,r){n.setOptional(!0),n.setDefaultValue(r),l(),o()},fullWidth:!0,children:[(0,d.jsx)($.Z,{value:"True",label:{id:"True"}}),(0,d.jsx)($.Z,{value:"False",label:{id:"False"}})]}),"identifier"===n.getName()&&(0,d.jsxs)(K.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Scope"}),value:Vm(n.getExtraInfo()),onChange:function(e,t,r){var i=zm(n.getExtraInfo());n.setExtraInfo(r+i),l(),o()},fullWidth:!0,children:[(0,d.jsx)($.Z,{value:"scene",label:{id:"Scene"}}),(0,d.jsx)($.Z,{value:"object",label:{id:"Object"}})]}),"identifier"===n.getName()&&(0,d.jsx)(An.Z,{commitOnBlur:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Identifier name"}),floatingLabelFixed:!0,value:zm(n.getExtraInfo()),onChange:function(e){var t=Vm(n.getExtraInfo());n.setExtraInfo(t+e),l(),o()},fullWidth:!0})]}),"stringWithSelector"===n.getName()&&(0,d.jsx)(Um,{disabled:r,extraInfo:Hm(n),setExtraInfo:function(e){n.setExtraInfo(JSON.stringify(e)),l(),o()}})]})}})}var Gm=n.g.gd,Ym={parametersContainer:{flex:1}},qm=function(e){var t=e.project,n=e.eventsFunction,i=e.eventsBasedBehavior,o=e.eventsBasedObject,c=e.eventsFunctionsContainer,u=e.onParametersUpdated,p=e.helpPagePath,f=e.freezeParameters,h=e.onMoveFreeEventsParameter,g=e.onMoveBehaviorEventsParameter,x=e.onMoveObjectEventsParameter,m=l.useState({}),v=(0,s.Z)(m,2),j=v[0],y=v[1],Z=(0,Pt.Z)(),k=l.useCallback((function(e){var t=n.getParameters(),r=(0,Et.mapVector)(t,(function(e){return e.getName()})),i=new Gm.ParameterMetadata;i.setType("objectList");var o=(0,It.Z)("Parameter",(function(e){return r.includes(e)}));i.setName(o),t.insertIntoVectorParameterMetadata(e,i),i.delete(),Z(),u()}),[n,Z,u]),w=l.useCallback((function(){var e=n.getParameters();k(e.size())}),[k,n]),S=l.useCallback((function(e){var t=n.getParameters();Gm.removeFromVectorParameterMetadata(t,e),Z(),u()}),[n,Z,u]),P=l.useCallback((function(e){y((0,a.Z)((0,a.Z)({},j),{},(0,r.Z)({},e,!0)))}),[j]),E=l.useCallback((function(e){n.getParameters().at(e).setLongDescription(""),y((0,a.Z)((0,a.Z)({},j),{},(0,r.Z)({},e,!1)))}),[n,j]),I=l.useCallback((function(e,t){var r=n.getParameters();i?g&&g(i,n,e,t,(function(n){n&&(Gm.swapInVectorParameterMetadata(r,e,t),Z(),u())})):o?x&&x(o,n,e,t,(function(n){n&&(Gm.swapInVectorParameterMetadata(r,e,t),Z(),u())})):h&&h(n,e,t,(function(n){n&&(Gm.swapInVectorParameterMetadata(r,e,t),Z(),u())}))}),[i,o,n,Z,g,h,x,u]),A=c&&n.getFunctionType()===Gm.EventsFunction.ActionWithOperator?n.getParametersForEvents(c):n.getParameters(),F=i?2:o?1:0,O=function(e){return n.getFunctionType()===Gm.EventsFunction.ActionWithOperator||f||e<F},R=F,D=F+(n.getFunctionType()===Gm.EventsFunction.ActionWithOperator?1:0),_=l.useCallback((function(e){return e>=D}),[D]),B=l.useCallback((function(e,t){return _(t)&&(!!e.getLongDescription()||!!j[t])}),[_,j]),N=i?bh.mK.BehaviorFunction:o?bh.mK.ObjectFunction:bh.mK.FreeFunction;return!!i&&Gm.MetadataDeclarationHelper.isBehaviorLifecycleEventsFunction(n.getName())?(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:'This is a "lifecycle method". It will be called automatically by the game engine and has two parameters: "Object" (the object the behavior is acting on) and "Behavior" (the behavior itself).'})}):!i&&Gm.MetadataDeclarationHelper.isExtensionLifecycleEventsFunction(n.getName())?(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(he.Z,{kind:"info",identifier:"lifecycle-events-function-included-only-if-extension-used",children:(0,d.jsx)(b.Trans,{id:"For the lifecycle functions to be executed, you need the extension to be used in the game, either by having at least one action, condition or expression used, or a behavior of the extension added to an object. Otherwise, the extension won't be included in the game."})}),(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:'This is a "lifecycle function". It will be called automatically by the game engine. It has no parameters. Only global objects can be used as the events will be run for all scenes in your game.'})})]}):(0,d.jsx)(b.I18n,{children:function(e){e.i18n;return(0,d.jsxs)(L.sg,{noMargin:!0,expand:!0,children:[(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsxs)("div",{style:Ym.parametersContainer,children:[(0,Et.mapVector)(A,(function(e,n){return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsxs)(tm.Z,{noPadding:!0,children:[(0,d.jsx)(tm.c,{firstChild:!0,children:(0,d.jsx)(b.Trans,{id:"Parameter #{0}:",values:{0:n+N}})}),(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,d.jsx)(An.Z,{commitOnBlur:!0,margin:"none",translatableHintText:{id:"Enter the parameter name (mandatory)"},value:e.getName(),onChange:function(t){e.setName(Gm.Project.getSafeName(t)),Z(),u()},disabled:O(n),fullWidth:!0})}),(0,d.jsx)(Ig.Z,{element:(0,d.jsx)(M.Z,{children:(0,d.jsx)(Ls.Z,{})}),buildMenuTemplate:function(t){return[{label:t._({id:"Delete"}),enabled:!O(n),click:function(){return S(n)}},{label:t._({id:"Add a parameter below"}),enabled:!O(n),click:function(){return k(n+1)}},{type:"separator"},{label:t._({id:"Add a Long Description"}),enabled:!O(n),visible:!B(e,n),click:function(){return P(n)}},{label:t._({id:"Remove the Long Description"}),enabled:!O(n),visible:B(e,n),click:function(){return E(n)}},{label:t._({id:"Move up"}),click:function(){return I(n,n-1)},enabled:!O(n)&&n-1>=0&&!O(n-1)},{label:t._({id:"Move down"}),click:function(){return I(n,n+1)},enabled:!O(n)&&n+1<A.size()&&!O(n+1)}]}})]}),(0,d.jsx)(L.x1,{children:(0,d.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[(0,d.jsx)(Wm,{project:t,valueTypeMetadata:e.getValueTypeMetadata(),disabled:O(n),isTypeSelectorShown:(r=n,r>=R),onTypeUpdated:function(){return u()},getLastObjectParameterObjectType:function(){return function(e,t){var n=xp.ParameterMetadataTools.getObjectParameterIndexFor(e,t);return n<0||n>=e.size()?"":e.at(n).getExtraInfo()}(A,n)}}),_(n)&&(0,d.jsx)(An.Z,{commitOnBlur:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Label"}),floatingLabelFixed:!0,value:e.getDescription(),onChange:function(t){e.setDescription(t),Z()},fullWidth:!0,disabled:O(n)&&!f}),B(e,n)&&(0,d.jsx)(An.Z,{commitOnBlur:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Long description"}),floatingLabelFixed:!0,value:e.getLongDescription(),onChange:function(t){e.setLongDescription(t),Z()},multiline:!0,fullWidth:!0,disabled:O(n)&&!f})]})})]},n);var r})),0===A.size()?(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"No parameters for this function."})}):null,(0,d.jsx)(L.sg,{children:(0,d.jsx)(L.x1,{justifyContent:"flex-end",expand:!0,children:!f&&(0,d.jsx)(T.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Add a parameter"}),onClick:w,icon:(0,d.jsx)(vt.Z,{}),disabled:n.getFunctionType()===Gm.EventsFunction.ActionWithOperator})})})]})}),p?(0,d.jsx)(L.x1,{children:(0,d.jsx)(Hn.Z,{helpPagePath:p})}):(0,d.jsx)(L.LZ,{})]})}})},Xm=n.g.gd,Km=function(e,t,n,r){var i=r.getSentence();if(!i)return e._({id:"Enter the sentence that will be displayed in the events sheet"});var o,a=t?bh.mK.BehaviorFunction:n?bh.mK.ObjectFunction:bh.mK.FreeFunction,s=r.getFunctionType(),l=(t||n)&&s===Xm.EventsFunction.ExpressionAndCondition,c=(0,Et.mapVector)(r.getParameters(),(function(e,t){if(e.getValueTypeMetadata().isBehavior())return null;if(0===t&&l)return null;var n="_PARAM".concat(t+a,"_");return-1===i.indexOf(n)?n:null})).filter(Boolean),u=r.getParameters().size(),d=i.matchAll(/_PARAM(\d+)_/g),p=[],f=(0,ia.Z)(d);try{for(f.s();!(o=f.n()).done;){var h=o.value,g=parseInt(h[1],10);(g-a>=u||g-a<0)&&p.push(h[0])}}catch(x){f.e(x)}finally{f.f()}return c.length||p.length?[c.length?e._({id:"The sentence is probably missing this/these parameter(s):"})+" "+c.join(", "):null,p.length?e._({id:"The sentence displays one or more wrongs parameters:"})+" "+p.join(", "):null].filter(Boolean).join(" - "):void 0},Jm=function(e,t){return e===Xm.EventsFunction.Condition?{id:"Example: Is flashing"}:e===Xm.EventsFunction.Expression?t.isNumber()?{id:"Example: Remaining life"}:{id:"Example: Equipped shield name"}:{id:"Example: Flash the object"}},Qm=function(e,t){return e===Xm.EventsFunction.Condition?{id:"Example: Check if the object is flashing."}:e===Xm.EventsFunction.Expression?t.isNumber()?{id:"Example: Return the number of remaining lives for the player."}:{id:"Example: Return the name of the shield equipped by the player."}:{id:"Example: Make the object flash for 5 seconds."}},$m=function(e){var t=e.project,n=e.eventsFunction,r=e.freezeEventsFunctionType,i=e.onConfigurationUpdated,o=e.helpPagePath,a=e.renderConfigurationHeader,c=e.eventsBasedBehavior,u=e.eventsBasedObject,p=e.getFunctionGroupNames,f=e.eventsFunctionsContainer,h=(0,Pt.Z)(),g=l.useState(null),x=(0,s.Z)(g,2),m=x[0],v=x[1],j=n.getFunctionType();if(!!c&&!u&&Xm.MetadataDeclarationHelper.isBehaviorLifecycleEventsFunction(n.getName()))return(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:'This is a "lifecycle method". It will be called automatically by the game engine for each instance living on the scene having the behavior.'})});if(!!u&&!c&&Xm.MetadataDeclarationHelper.isObjectLifecycleEventsFunction(n.getName()))return(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:'This is a "lifecycle method". It will be called automatically by the game engine for each instance living on the scene.'})});if(!c&&!u&&Xm.MetadataDeclarationHelper.isExtensionLifecycleEventsFunction(n.getName()))return(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(he.Z,{kind:"info",identifier:"lifecycle-events-function-included-only-if-extension-used",children:(0,d.jsx)(b.Trans,{id:"For the lifecycle functions to be executed, you need the extension to be used in the game, either by having at least one action, condition or expression used, or a behavior of the extension added to an object. Otherwise, the extension won't be included in the game."})}),(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:'This is a "lifecycle function". It will be called automatically by the game engine. It has no parameters. Only global objects can be used as the events will be run for all scenes in your game.'})})]});var y=f&&j===Xm.EventsFunction.ActionWithOperator&&f.hasEventsFunctionNamed(n.getGetterName())?f.getEventsFunction(n.getGetterName()):null;return(0,d.jsx)(b.I18n,{children:function(e){var s=e.i18n;return(0,d.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[a?a():null,(0,d.jsx)(xt.Z,{bounds:!0,onResize:function(e){v(e.bounds.width)},children:function(e){e.contentRect;var a=e.measureRef;return(0,d.jsx)("div",{ref:a,children:(0,d.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[(0,d.jsxs)(C.ep,{alignItems:"center",noMargin:!0,forceMobileLayout:!!m&&m<650,children:[(0,d.jsx)(L.x1,{alignItems:"center",noMargin:!0,children:(0,d.jsxs)(K.Z,{value:j,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Function type"}),fullWidth:!0,disabled:!!r,onChange:function(e,t,r){var o=r;n.setFunctionType(o),i&&i("type"),h()},children:[(0,d.jsx)($.Z,{value:Xm.EventsFunction.Action,label:{id:"Action"}}),(0,d.jsx)($.Z,{value:Xm.EventsFunction.Condition,label:{id:"Condition"}}),(0,d.jsx)($.Z,{value:Xm.EventsFunction.Expression,label:{id:"Expression"}}),(0,d.jsx)($.Z,{value:Xm.EventsFunction.ExpressionAndCondition,label:{id:"Expression and condition"}}),(0,d.jsx)($.Z,{value:Xm.EventsFunction.ActionWithOperator,label:{id:"Action with operator"}})]})}),(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:j===Xm.EventsFunction.ActionWithOperator?(0,d.jsx)(K.Z,{value:y&&y.getName()||"",floatingLabelText:(0,d.jsx)(b.Trans,{id:"Related expression and condition"}),fullWidth:!0,onChange:function(e,t,r){n.setGetterName(r),i&&i(),h()},children:f?(0,Et.mapFor)(0,f.getEventsFunctionsCount(),(function(e){var t=f.getEventsFunctionAt(e);return t.getFunctionType()===Xm.EventsFunction.ExpressionAndCondition&&(0,d.jsx)($.Z,{value:t.getName(),label:t.getFullName()||t.getName()},t.getName())})):[]}):(0,d.jsx)(An.Z,{commitOnBlur:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Full name displayed in editor"}),translatableHintText:Jm(j,n.getExpressionType()),value:n.getFullName(),onChange:function(e){n.setFullName(e),i&&i(),h()},fullWidth:!0})}),(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:j===Xm.EventsFunction.ActionWithOperator?(0,d.jsx)(An.Z,{disabled:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Group name"}),fullWidth:!0,value:y?y.getGroup():"",onChange:function(e){}}):(0,d.jsx)(Nu.ZP,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Group name"}),hintText:{id:"Leave it empty to use the default group for this extension."},fullWidth:!0,value:n.getGroup(),onChange:function(e){n.setGroup(e),i&&i(),h()},dataSource:p?p().map((function(e){return{text:e,value:e}})):[],openOnFocus:!0})})]}),(0,d.jsx)(L.x1,{noMargin:!0,children:j===Xm.EventsFunction.ActionWithOperator?(0,d.jsx)(An.Z,{disabled:!0,commitOnBlur:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Description, displayed in editor"}),fullWidth:!0,multiline:!0,value:y?"Change "+y.getDescription():"",onChange:function(e){}}):(0,d.jsx)(An.Z,{commitOnBlur:!0,floatingLabelText:j===Xm.EventsFunction.ExpressionAndCondition?(0,d.jsx)(b.Trans,{id:'Description, displayed in editor (automatically prefixed by "Compare" or "Return")'}):(0,d.jsx)(b.Trans,{id:"Description, displayed in editor"}),translatableHintText:Qm(j,n.getExpressionType()),fullWidth:!0,multiline:!0,value:n.getDescription(),onChange:function(e){n.setDescription(e),i&&i(),h()}})}),j===Xm.EventsFunction.ActionWithOperator?(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)(An.Z,{disabled:!0,commitOnBlur:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Sentence in Events Sheet"}),fullWidth:!0,value:y?"Change "+y.getSentence()+(c||u?" of _PARAM0_":"")+": [...]":"",onChange:function(e){}})}):(j===Xm.EventsFunction.Action||j===Xm.EventsFunction.Condition||j===Xm.EventsFunction.ExpressionAndCondition)&&(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)(An.Z,{commitOnBlur:!0,floatingLabelText:c&&j===Xm.EventsFunction.ExpressionAndCondition?(0,d.jsx)(b.Trans,{id:'Sentence in Events Sheet (automatically suffixed by "of _PARAM0_")'}):(0,d.jsx)(b.Trans,{id:"Sentence in Events Sheet"}),translatableHintText:{id:"Note: write _PARAMx_ for parameters, e.g: Flash _PARAM1_ for 5 seconds"},fullWidth:!0,value:n.getSentence(),onChange:function(e){n.setSentence(e),i&&i(),h()},errorText:Km(s,c,u,n)})}),n.isExpression()&&(0,d.jsx)(Wm,{isExpressionType:!0,project:t,valueTypeMetadata:n.getExpressionType(),isTypeSelectorShown:!0,onTypeUpdated:function(){i&&i()},getLastObjectParameterObjectType:function(){return""}}),(0,d.jsx)(Wn.Z,{label:(0,d.jsx)(b.Trans,{id:"Private"}),checked:n.isPrivate(),onCheck:function(e,t){n.setPrivate(t),i&&i("isPrivate"),h()}}),(0,d.jsx)(Wn.Z,{label:(0,d.jsx)(b.Trans,{id:"Asynchronous"}),checked:n.isAsync(),onCheck:function(e,t){n.setAsync(t),i&&i("isAsync"),h()}}),n.isAsync()&&(0,d.jsx)(De.Z,{kind:"info",children:(0,d.jsx)(b.Trans,{id:'This is an asynchronous action, meaning that the actions and sub-events following it will wait for it to end. Don\'t forget to use the action "End asynchronous function" to mark the end of the action.'})}),o?(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)(Hn.Z,{helpPagePath:o})}):(0,d.jsx)(L.LZ,{})]})})}})]})}})},ev=n.g.gd,tv="<create a new extension>",nv=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={eventsFunction:null,extensionName:"",createNewExtension:!1},e._getFunctionGroupNames=function(){var t=e.state,n=t.createNewExtension,r=t.extensionName;if(n||!r)return[];for(var i=new Set,o=e.props.project.getEventsFunctionsExtension(r),a=0;a<o.getEventsFunctionsCount();a++){var s=o.getEventsFunctionAt(a).getGroup();s&&i.add(s)}return(0,v.Z)(i).sort((function(e,t){return e.localeCompare(t)}))},e}return(0,at.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.project,n=e.scope,r=e.globalObjectsContainer,i=e.objectsContainer,o=e.serializedEvents,a=new ev.EventsFunction;!function(e){var t=e.globalObjectsContainer,n=e.objectsContainer,r=e.scope,i=e.serializedEvents,o=e.project,a=e.eventsFunction;a.setName("MyFunction"),a.setFunctionType(Am.EventsFunction.Action),(0,Dt.qx)(a.getEvents(),i,"unserializeFrom",o);var s=Hp(r,t,n),l=new Am.EventsContextAnalyzer(Am.JsPlatform.get());l.launch(a.getEvents(),s);var c=l.getEventsContext(),u=c.getReferencedObjectOrGroupNames().toNewVectorString().toJSArray(),d=c.getObjectNames().toNewVectorString().toJSArray(),p=u.filter((function(e){return-1===d.indexOf(e)})).map((function(e){return mf(t,n,e)})).filter(Boolean),f=p.filter((function(e){return!u.some((function(t){return e.find(t)}))})),h=f.map((function(e){return e.getName()})),g=d.filter((function(e){return!f.some((function(t){return t.find(e)}))})),x=a.getParameters();x.clear(),[].concat((0,v.Z)(h),(0,v.Z)(g)).forEach((function(e){var t=new Am.ParameterMetadata;t.setType("objectList"),t.setName(e),t.setExtraInfo(s.getObjectsContainersList().getTypeOfObject(e)),x.push_back(t),c.getBehaviorNamesOfObjectOrGroup(e).toNewVectorString().toJSArray().forEach((function(e){var t=new Am.ParameterMetadata;t.setType("behavior"),t.setName(e),t.setExtraInfo(s.getObjectsContainersList().getTypeOfBehavior(e,!1)),x.push_back(t)}))})),p.filter((function(e){return!h.includes(e.getName())})).forEach((function(e){e&&a.getObjectGroups().insert(e,0)})),l.delete()}({project:t,scope:n,globalObjectsContainer:r,objectsContainer:i,serializedEvents:o,eventsFunction:a}),this.setState({eventsFunction:a}),0===Df(t).length&&this.setState({createNewExtension:!0})}},{key:"componentWillUnmount",value:function(){var e=this.state.eventsFunction;e&&e.delete()}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.onClose,i=t.onCreate,o=this.state,a=o.eventsFunction,s=o.extensionName,l=o.createNewExtension;if(!a)return null;var c=Df(n),u=function(e){return e.getParameters().size()>7}(a),p=function(){_m(n,s,a)?i(s,a):r()};return(0,d.jsx)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Extract the events in a function"}),secondaryActions:[(0,d.jsx)(Hn.Z,{helpPagePath:"/events/functions/extract-events"},"help")],actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),onClick:r},"cancel"),(0,d.jsx)(te.vF,{label:(0,d.jsx)(b.Trans,{id:"Create"}),primary:!0,disabled:!_m(n,s,a),onClick:p},"create")],open:!0,cannotBeDismissed:!0,onRequestClose:r,onApply:p,children:(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(he.Z,{identifier:"function-extractor-explanation",kind:"info",children:"After creating a function, it will be usable in the events sheet. Functions are grouped by extensions. Choose, or enter the name of a new extension, and a function name, then configure the function and its parameters."}),(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsxs)(C.ep,{noMargin:!0,expand:!0,children:[(0,d.jsxs)(K.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Extension (storing the function)"}),value:l?tv:s,onChange:function(t,n,r){r===tv?e.setState({createNewExtension:!0,extensionName:""}):e.setState({createNewExtension:!1,extensionName:r})},fullWidth:!0,children:[c.map((function(e){return(0,d.jsx)($.Z,{value:e.getName(),label:e.getFullName()||e.getName()},e.getName())})),(0,d.jsx)($.Z,{value:tv,label:{id:"<Create a New Extension>"}})]}),l?(0,d.jsx)(An.Z,{commitOnBlur:!0,value:s,floatingLabelText:(0,d.jsx)(b.Trans,{id:"New extension name"}),onChange:function(t){return e.setState({extensionName:t})},fullWidth:!0,errorText:Rm(n,s)?Om(s)?void 0:(0,d.jsx)(b.Trans,{id:"This name is not valid. Only use alphanumeric characters (0-9, a-z) and underscores."}):(0,d.jsx)(b.Trans,{id:"This name is already taken by another extension."})}):null]}),(0,d.jsx)(L.x1,{children:(0,d.jsx)(An.Z,{commitOnBlur:!0,value:a.getName(),floatingLabelText:(0,d.jsx)(b.Trans,{id:"Function name"}),onChange:function(t){a.setName(t),e.forceUpdate()},fullWidth:!0,errorText:Dm(n,s,a)?Fm(a.getName())?void 0:(0,d.jsx)(b.Trans,{id:"This name is not valid. Only use alphanumeric characters (0-9, a-z) and underscores."}):(0,d.jsx)(b.Trans,{id:"This name is already taken by another function. Choose another name."})})}),u?(0,d.jsx)(L.x1,{children:(0,d.jsx)(De.Z,{kind:"warning",children:(0,d.jsx)(b.Trans,{id:"This function will have a lot of parameters. Consider creating groups or functions for a smaller set of objects so that the function is easier to reuse."})})}):null]}),(0,d.jsx)($m,{project:n,eventsFunction:a,eventsBasedBehavior:null,eventsBasedObject:null,eventsFunctionsContainer:null,onConfigurationUpdated:function(){e.forceUpdate()},freezeEventsFunctionType:!0,getFunctionGroupNames:this._getFunctionGroupNames}),(0,d.jsx)(qm,{project:n,eventsFunction:a,eventsBasedBehavior:null,eventsBasedObject:null,eventsFunctionsContainer:null,onParametersUpdated:function(){e.forceUpdate()},freezeParameters:!0})]})})}}]),n}(l.Component),rv=n(72291),iv={},ov=1,av=function(e){var t=(ov++).toString();return iv[t]=e,t},sv=function(e){e&&iv[e]&&delete iv[e]},lv=function(e){var t=e.getStorageProvider,n=e.fileMetadata,r=e.isProjectSplitInMultipleFiles,i=l.useContext(se.ZP).values.watchProjectFolderFilesForLocalProjects,o=n?n.fileIdentifier:null,a=l.useCallback((function(e){Dl.Z.burstAllUrlsCache(),Object.keys(iv).forEach((function(t){return iv[t](e)}))}),[]);l.useEffect((function(){var e=t();if(("LocalFile"!==e.internalName||i)&&(o&&e.setupResourcesWatcher))return e.setupResourcesWatcher({fileIdentifier:o,callback:a,options:{isProjectSplitInMultipleFiles:r}})}),[o,a,t,i,r])},cv=n.g.gd,uv=1,dv=50,pv={container:{display:"flex",width:"100%",flexDirection:"column",flex:1,position:"relative"}},fv=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(e){var r;return(0,ot.Z)(this,n),(r=t.call(this,e))._containerDiv=l.createRef(),r._keyboardShortcuts=new St.ZP({isActive:function(){return!r.state.inlineEditing&&!r.state.editedInstruction.instruction&&!r.state.analyzedEventsContextResult&&!r.state.serializedEventsToExtract},shortcutCallbacks:{onDelete:function(){return r.deleteSelection()},onCopy:function(){return r.copySelection()},onCut:function(){return r.cutSelection()},onPaste:function(){return r.pasteEventsOrInstructions()},onSearch:function(){return r._toggleSearchPanel()},onEscape:function(){return r._closeSearchPanel()},onUndo:function(){return r.undo()},onRedo:function(){return r.redo()},onZoomIn:function(e){return r.onZoomEvent("IN")(e)},onZoomOut:function(e){return r.onZoomEvent("OUT")(e)}}}),r.state={eventsHistory:_t(r.props.events,{historyMaxSize:100}),editedInstruction:{isCondition:!0,instruction:null,instrsList:null,indexInList:0,eventContext:null},editedParameter:{isCondition:!0,instruction:null,instrsList:null,parameterIndex:0,eventContext:null},selection:{selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]},inlineEditing:!1,inlineEditingAnchorEl:null,inlineInstructionEditorAnchorEl:null,inlineEditingPreviousValue:null,analyzedEventsContextResult:null,serializedEventsToExtract:null,showSearchPanel:!1,searchResults:null,searchFocusOffset:null,allEventsMetadata:[],textEditedEvent:null,fontSize:14},r.onResourceExternallyChanged=function(e){r._eventsTree&&r._eventsTree.forceEventsUpdate()},r._addStandardEvent=function(){r.addNewEvent("BuiltinCommonInstructions::Standard")},r._addCommentEvent=function(){r.addNewEvent("BuiltinCommonInstructions::Comment")},r._toggleSearchPanel=function(){r.setState((function(e){if(!(e.showSearchPanel&&r._searchPanel&&r._searchPanel.isSearchOngoing())){var t=!e.showSearchPanel;return t||r._eventSearcher&&r._eventSearcher.reset(),{showSearchPanel:t}}r._searchPanel.focus()}),(function(){r.state.showSearchPanel&&r._searchPanel&&r._searchPanel.focus()}))},r._closeSearchPanel=function(){r._eventSearcher&&r._eventSearcher.reset(),r.setState({showSearchPanel:!1})},r.addSubEvent=function(){var e=r.props.project,t=Qc(r.state.selection)||ou(r.state.selection);if(t){var n=t.event.getSubEvents().insertNewEvent(e,"BuiltinCommonInstructions::Standard",t.event.getSubEvents().getEventsCount());r._eventsTree&&r._eventsTree.forceEventsUpdate((function(){var e=r._getChangedEventRows([n]);r._saveChangesToHistory("ADD",{positionsBeforeAction:e,positionAfterAction:e})}))}},r._selectionCanHaveSubEvents=function(){return!!(Qc(r.state.selection)||ou(r.state.selection))},r._selectionCanToggleDisabled=function(){return Kc(r.state.selection).some((function(e){return e.isExecutable()}))},r._addNewEvent=function(e,t){var n,i=r.props.project,o=Jc(r.state.selection),a=iu(r.state.selection),s=!1;if("BuiltinCommonInstructions::Comment"!==e&&"BuiltinCommonInstructions::Group"!==e||(s=!0),t)n=t;else if(o)n={eventsList:o.eventsList,indexInList:s?o.indexInList-1:o.indexInList};else if(a){var l=a.eventContext;n={eventsList:l.eventsList,indexInList:s?l.indexInList-1:l.indexInList}}else n={eventsList:r.props.events,indexInList:r.props.events.getEventsCount()};var c=n.eventsList.insertNewEvent(i,e,n.indexInList+1),u=r._eventsTree;return u&&u.forceEventsUpdate((function(){var n=r._getChangedEventRows([c]);if(r._saveChangesToHistory("ADD",{positionsBeforeAction:n,positionAfterAction:n},(function(){t||o||u.scrollToRow(u.getEventRow(c))})),"touch"!==(0,Gr.BF)()&&("BuiltinCommonInstructions::Comment"===e||"BuiltinCommonInstructions::Group"===e)){var i=u.getEventRow(c),a=document.querySelector('[data-row-index="'.concat(i,'"] [data-editable-text="true"]'));a&&a.click()}})),[c]},r.openEventTextDialog=function(){var e=am(Kc(r.state.selection));if(e.length){var t=e[e.length-1];r.setState({textEditedEvent:t})}},r.closeEventTextDialog=function(){if(r.state.textEditedEvent){var e=r._getChangedEventRows([r.state.textEditedEvent]);r._saveChangesToHistory("EDIT",{positionsBeforeAction:e,positionAfterAction:e})}r.setState({textEditedEvent:null})},r._buildInstructionContextMenu=function(e){return[{label:e._({id:"Copy"}),click:function(){return r.copySelection()},accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return r.cutSelection()},accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),click:function(){return r.pasteInstructions()},enabled:Eh()||Ih(),accelerator:"CmdOrCtrl+V"},{label:e._({id:"Delete"}),click:function(){return r.deleteSelection()},accelerator:"Delete"},(t=r.state.selection,ru(t).some((function(e){return e.isCondition}))?{label:e._({id:"Invert Condition"}),click:function(){return r._invertSelectedConditions()},accelerator:(0,ue.$3)(r.props.shortcutMap.TOGGLE_CONDITION_INVERTED)}:null),r._hasSelectedOptionallyAsyncActions()?{label:e._({id:"Toggle Wait the Action to End"}),click:function(){return r._toggleAwaitingActions()}}:null].filter(Boolean);var t},r.openAddInstructionContextMenu=function(e,t,n){r.openInstructionEditor(e,n,t)},r.openInstructionEditor=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r.state.editedInstruction.instruction&&(r.state.editedInstruction.instruction.delete(),console.warn("state.editedInstruction.instruction was containing an instruction - deleting it. Verify the logic handling the state in EventsSheet because that should not happen.")),r.setState({inlineInstructionEditorAnchorEl:n,editedInstruction:{instrsList:t.instrsList,isCondition:t.isCondition,instruction:t.instruction?t.instruction.clone():new cv.Instruction,indexInList:void 0!==t.indexInList?t.indexInList:void 0,eventContext:e}})},r.moveSelectionToInstruction=function(e,t){r.moveSelectionToInstructionsList(e,{instrsList:t.instrsList,isCondition:t.isCondition},t.indexInList)},r.moveSelectionToInstructionsList=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=tu(r.state.selection),o=void 0===n||null===n?t.instrsList.size():n;if(!!!i.filter((function(e){return Lm(e,t.instrsList)})).length){i.forEach((function(e,n){return t.instrsList.insert(e,o+n)}));var a=nu(r.state.selection),s=r._getChangedEventRows(a),l=r._getChangedEventRows([e.event]);r._keyboardShortcuts.shouldCloneInstances()||r.deleteSelection({deleteEvents:!1,shouldSaveInHistory:!1}),r._saveChangesToHistory("EDIT",{positionsBeforeAction:s,positionAfterAction:l})}},r.selectEvent=function(e){var t=r._keyboardShortcuts.shouldMultiSelect();r.setState({selection:pu(r.state.selection,e,t)},(function(){return r.updateToolbar()}))},r.collapseAll=function(){r._eventsTree&&r._eventsTree.foldAll()},r.expandToLevel=function(e){r._eventsTree&&r._eventsTree.unfoldToLevel(e)},r._buildEventContextMenu=function(e){return[{label:e._({id:"Edit"}),click:function(){return r.openEventTextDialog()},visible:am(Kc(r.state.selection)).length>0},{label:e._({id:"Copy"}),click:function(){return r.copySelection()},accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return r.cutSelection()},accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),click:function(){return r.pasteEvents()},enabled:Ph(),accelerator:"CmdOrCtrl+V"},{label:e._({id:"Delete"}),click:function(){return r.deleteSelection()},accelerator:"Delete"},{label:e._({id:"Toggle Disabled"}),click:function(){return r.toggleDisabled()},enabled:r._selectionCanToggleDisabled(),accelerator:(0,ue.$3)(r.props.shortcutMap.TOGGLE_EVENT_DISABLED||"KeyD")},{type:"separator"},{label:e._({id:"Add"}),submenu:[{label:e._({id:"Add New Event Below"}),click:function(){r.addNewEvent("BuiltinCommonInstructions::Standard")},accelerator:(0,ue.$3)(r.props.shortcutMap.ADD_STANDARD_EVENT)},{label:e._({id:"Add Sub Event"}),click:function(){return r.addSubEvent()},enabled:r._selectionCanHaveSubEvents(),accelerator:(0,ue.$3)(r.props.shortcutMap.ADD_SUBEVENT)},{label:e._({id:"Add Comment"}),click:function(){r.addNewEvent("BuiltinCommonInstructions::Comment")},accelerator:(0,ue.$3)(r.props.shortcutMap.ADD_COMMENT_EVENT)}].concat((0,v.Z)(r.state.allEventsMetadata.filter((function(e){return"BuiltinCommonInstructions::Standard"!==e.type&&"BuiltinCommonInstructions::Comment"!==e.type})).map((function(t){return{label:e._({id:"Add {0}",values:{0:t.fullName}}),click:function(){r.addNewEvent(t.type)}}}))))},{label:e._({id:"Replace"}),submenu:[{label:e._({id:"Extract Events to a Function"}),click:function(){return r.extractEventsToFunction()}},{label:e._({id:"Move Events into a Group"}),click:function(){return r.moveEventsIntoNewGroup()},accelerator:(0,ue.$3)(r.props.shortcutMap.MOVE_EVENTS_IN_NEW_GROUP)},{label:e._({id:"Analyze Objects Used in this Event"}),click:r._openEventsContextAnalyzer}]},{type:"separator"},{label:e._({id:"Events Sheet"}),submenu:[{label:e._({id:"Zoom In"}),click:function(){return r.onZoomEvent("IN")()},accelerator:"CmdOrCtrl+=",enabled:r.props.preferences.values.eventsSheetZoomLevel<dv},{label:e._({id:"Zoom Out"}),click:function(){return r.onZoomEvent("OUT")()},accelerator:"CmdOrCtrl+-",enabled:r.props.preferences.values.eventsSheetZoomLevel>uv},{type:"separator"},{label:e._({id:"Collapse All"}),click:r.collapseAll},{label:e._({id:"Expand All to Level"}),submenu:[{label:e._({id:"All"}),click:function(){return r.expandToLevel(-1)}},{type:"separator"}].concat((0,v.Z)([0,1,2,3,4,5,6,7,8].map((function(t){return{label:e._({id:"Level {0}",values:{0:t+1}}),click:function(){return r.expandToLevel(t)}}}))))}]}]},r.openEventContextMenu=function(e,t,n){var i=r._keyboardShortcuts.shouldMultiSelect();r.setState({selection:pu(r.state.selection,n,i)},(function(){r.updateToolbar(),r.eventContextMenu&&r.eventContextMenu.open(e,t)}))},r.openInstructionContextMenu=function(e,t,n,i){var o=r._keyboardShortcuts.shouldMultiSelect();r.setState({selection:fu(e,r.state.selection,i,o)},(function(){r.updateToolbar(),r.instructionContextMenu&&r.instructionContextMenu.open(t,n)}))},r.selectInstruction=function(e,t){var n=r._keyboardShortcuts.shouldMultiSelect();r.setState({selection:fu(e,r.state.selection,t,n)},(function(){return r.updateToolbar()}))},r.openParameterEditor=function(e,t){var n=t.instruction,i=t.parameterIndex;r.setState({editedParameter:(0,a.Z)({eventContext:e},t),inlineEditing:!0,inlineEditingAnchorEl:t.domEvent?t.domEvent.currentTarget:null,inlineEditingPreviousValue:n.getParameter(i).getPlainString()})},r.closeParameterEditor=function(e){var t=r.state.editedParameter,n=t.instruction,i=t.parameterIndex,o=t.eventContext;if(n&&(e&&"string"===typeof r.state.inlineEditingPreviousValue&&n.setParameter(i,r.state.inlineEditingPreviousValue),!e&&r.state.inlineEditingPreviousValue!==n.getParameter(i)&&o)){var a=r._getChangedEventRows([o.event]);r._saveChangesToHistory("EDIT",{positionsBeforeAction:a,positionAfterAction:a})}var s=r.state.inlineEditingAnchorEl;r.setState({editedParameter:{isCondition:!0,instruction:null,instrsList:null,parameterIndex:0,eventContext:null},inlineEditing:!1,inlineEditingAnchorEl:null},(function(){s&&s.focus()}))},r.toggleDisabled=function(){var e=!1,t=Kc(r.state.selection);if(t.forEach((function(t){t.isExecutable()&&(t.setDisabled(!t.isDisabled()),e=!0)})),e){var n=r._getChangedEventRows(t);r._saveChangesToHistory("DELETE",{positionsBeforeAction:n,positionAfterAction:n},(function(){r._eventsTree&&r._eventsTree.forceEventsUpdate()}))}},r.deleteSelection=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.deleteInstructions,n=void 0===t||t,i=e.deleteEvents,o=void 0===i||i,a=e.shouldSaveInHistory,s=void 0===a||a,l=r.props.events,c=new cv.EventsRemover,u=[];if(o){var d=Kc(r.state.selection);d.forEach((function(e){return c.addEventToRemove(e)})),u=u.concat(d)}n&&(tu(r.state.selection).forEach((function(e){return c.addInstructionToRemove(e)})),u=u.concat(nu(r.state.selection)));var p=r._getChangedEventRows(u);c.launch(l),c.delete(),r._eventsTree&&r._eventsTree.forceEventsUpdate(),r.setState({selection:{selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]},inlineEditing:!1,inlineEditingAnchorEl:null},(function(){s&&r._saveChangesToHistory("DELETE",{positionsBeforeAction:p,positionAfterAction:p}),r._ensureFocused()}))},r.copySelection=function(){!function(e){var t=new Th.EventsList,n=new Th.InstructionsList,r=new Th.InstructionsList;Kc(e).forEach((function(e){return t.insertEvent(e,t.getEventsCount())})),ru(e).forEach((function(e){e.isCondition?r.insert(e.instruction,r.size()):n.insert(e.instruction,n.size())})),Rt.set(Sh,{eventsList:(0,Dt.XH)(t),eventsCount:t.getEventsCount(),actionsList:(0,Dt.XH)(n),actionsCount:n.size(),conditionsList:(0,Dt.XH)(r),conditionsCount:r.size()}),t.delete(),n.delete(),r.delete()}(r.state.selection)},r.cutSelection=function(){r.copySelection(),r.deleteSelection()},r.pasteEvents=function(){if(function(e,t){var n=Jc(t);if(!n||!Ph())return!1;var r=Rt.get(Sh),i=Ot.extractArrayProperty(r,"eventsList");if(!i)return!1;var o=new Th.EventsList;return(0,Dt.qx)(o,i,"unserializeFrom",e),n.eventsList.insertEvents(o,0,o.getEventsCount(),n.indexInList),o.delete(),!0}(r.props.project,r.state.selection)){var e=r._getChangedEventRows(Kc(r.state.selection));r._saveChangesToHistory("ADD",{positionsBeforeAction:e,positionAfterAction:e},(function(){r._eventsTree&&r._eventsTree.forceEventsUpdate()}))}},r.pasteInstructions=function(){if(function(e,t){if(!cu(t)&&!uu(t)||!Eh()&&!Ih())return!1;var n=Rt.get(Sh),r=Ot.extractArrayProperty(n,"actionsList"),i=Ot.extractArrayProperty(n,"conditionsList");if(!r||!i)return!1;var o=new Th.InstructionsList,a=new Th.InstructionsList;(0,Dt.qx)(o,r,"unserializeFrom",e),(0,Dt.qx)(a,i,"unserializeFrom",e);var s=iu(t);s&&(s.isCondition?s.instrsList.insertInstructions(a,0,a.size(),s.indexInList):s.instrsList.insertInstructions(o,0,o.size(),s.indexInList));var l=function(e){return e.selectedInstructionsLists[e.selectedInstructionsLists.length-1]||null}(t);return l&&(l.isCondition?l.instrsList.insertInstructions(a,0,a.size(),l.instrsList.size()):l.instrsList.insertInstructions(o,0,o.size(),l.instrsList.size())),a.delete(),o.delete(),!0}(r.props.project,r.state.selection)){var e=nu(r.state.selection),t=r._getChangedEventRows(e);r._saveChangesToHistory("EDIT",{positionsBeforeAction:t,positionAfterAction:t},(function(){r._eventsTree&&r._eventsTree.forceEventsUpdate()}))}},r.pasteEventsOrInstructions=function(){lu(r.state.selection)?r.pasteEvents():(cu(r.state.selection)||uu(r.state.selection))&&r.pasteInstructions()},r.pasteInstructionsInInstructionsList=function(e,t){if(function(e,t){if(!Eh()&&!Ih())return!1;var n=Rt.get(Sh),r=Ot.extractArrayProperty(n,"actionsList"),i=Ot.extractArrayProperty(n,"conditionsList");if(r&&i){var o=new Th.InstructionsList,a=new Th.InstructionsList;return(0,Dt.qx)(o,r,"unserializeFrom",e),(0,Dt.qx)(a,i,"unserializeFrom",e),t.isCondition?t.instrsList.insertInstructions(a,0,a.size(),t.instrsList.size()):t.instrsList.insertInstructions(o,0,o.size(),t.instrsList.size()),a.delete(),o.delete(),!0}}(r.props.project,t)){var n=r._getChangedEventRows([e.event]);r._saveChangesToHistory("EDIT",{positionsBeforeAction:n,positionAfterAction:n},(function(){r._eventsTree&&r._eventsTree.forceEventsUpdate()}))}},r._invertSelectedConditions=function(){ru(r.state.selection).forEach((function(e){e.isCondition&&e.instruction.setInverted(!e.instruction.isInverted())}));var e=nu(r.state.selection),t=r._getChangedEventRows(e);r._saveChangesToHistory("EDIT",{positionsBeforeAction:t,positionAfterAction:t},(function(){r._eventsTree&&r._eventsTree.forceEventsUpdate()}))},r._hasSelectedOptionallyAsyncActions=function(){return ru(r.state.selection).some((function(e){if(!e.isCondition){var t=cx({instructionType:e.instruction.getType(),project:r.props.project,isCondition:!1});if(t&&t.isOptionallyAsync())return!0}return!1}))},r._toggleAwaitingActions=function(){ru(r.state.selection).forEach((function(e){if(!e.isCondition){var t=cx({instructionType:e.instruction.getType(),project:r.props.project,isCondition:!1});t&&t.isOptionallyAsync()&&e.instruction.setAwaited(!e.instruction.isAwaited())}}));var e=nu(r.state.selection),t=r._getChangedEventRows(e);r._saveChangesToHistory("EDIT",{positionsBeforeAction:t,positionAfterAction:t},(function(){r._eventsTree&&r._eventsTree.forceEventsUpdate()}))},r._onEndEditingStringEvent=function(e){var t=r._getChangedEventRows([e]);r._saveChangesToHistory("EDIT",{positionsBeforeAction:t,positionAfterAction:t})},r._getChangedEventRows=function(e){var t=r._eventsTree;return t?e.map((function(e){return t.getEventRow(e)})):[]},r._saveChangesToHistory=function(e,t,n){r.setState({eventsHistory:Ut(r.state.eventsHistory,r.props.events,e,{positions:t})},(function(){r.updateToolbar(),n&&n()})),r._searchPanel&&r._searchPanel.markSearchResultsDirty()},r.undo=function(){if(Nt(r.state.eventsHistory)){var e=r.props,t=e.events,n=e.project,i=Ht(r.state.eventsHistory,t,n);r._eventSearcher&&r._eventSearcher.reset();var o=(0,Gc.Z)(r)._eventsTree;o&&o.forceEventsUpdate((function(){var e=i.futureActions[i.futureActions.length-1],t=e.changeContext.positions,n={selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]};if("ADD"===e.type)n={selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]};else{var a=o.getEventContextAtRowIndexes(t.positionsBeforeAction);n=hu(a)}r.setState({selection:n,eventsHistory:i},(function(){o.scrollToRow(t.positionsBeforeAction[0]),setTimeout((function(){o.scrollToRow(t.positionsBeforeAction[0])}),70),r.updateToolbar()}))}))}},r.redo=function(){if(Bt(r.state.eventsHistory)){var e=r.props,t=e.events,n=e.project,i=Vt(r.state.eventsHistory,t,n);r._eventSearcher&&r._eventSearcher.reset();var o=(0,Gc.Z)(r)._eventsTree;o&&o.forceEventsUpdate((function(){var e=i.previousActions[i.previousActions.length-1],t=e.changeContext.positions,n={selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]};if("DELETE"===e.type)n={selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]};else{var a=o.getEventContextAtRowIndexes(t.positionAfterAction);n=hu(a)}r.setState({selection:n,eventsHistory:i},(function(){o.scrollToRow(t.positionsBeforeAction[0]),setTimeout((function(){o.scrollToRow(t.positionsBeforeAction[0])}),70),r.updateToolbar()}))}))}},r.onZoomEvent=function(e){var t="IN"===e?1:-1;return function(e){e&&(e.preventDefault(),e.stopPropagation()),r.props.preferences.setEventsSheetZoomLevel(Math.min(Math.max(r.props.preferences.values.eventsSheetZoomLevel+1*t,uv),dv)),setTimeout((function(){var e=(0,Gc.Z)(r)._eventsTree;e&&e.forceEventsUpdate()}))}},r._openEventsContextAnalyzer=function(){var e=r.props,t=e.scope,n=e.globalObjectsContainer,i=e.objectsContainer,o=Hp(t,n,i),a=new cv.EventsContextAnalyzer(cv.JsPlatform.get()),s=new cv.EventsList;Kc(r.state.selection).forEach((function(e){return s.insertEvent(e,s.getEventsCount())})),a.launch(s,o),s.delete(),r.setState({analyzedEventsContextResult:Zm(a.getEventsContext())}),a.delete()},r._closeEventsContextAnalyzer=function(){r.setState({analyzedEventsContextResult:null})},r.extractEventsToFunction=function(){var e=new cv.EventsList;$c(r.state.selection).forEach((function(t){var n=t.event;return e.insertEvent(n,e.getEventsCount())})),r.props.onBeginCreateEventsFunction(),r.setState({serializedEventsToExtract:(0,Dt.XH)(e)}),e.delete()},r.moveEventsIntoNewGroup=function(){var e=new cv.EventsList;$c(r.state.selection).forEach((function(t){var n=t.event;return e.insertEvent(n,e.getEventsCount())})),r._replaceSelectionByGroupOfEvents(e),e.delete()},r._replaceSelectionByEventsFunction=function(e,t){var n=eu(r.state.selection);if(n){var i=r.props.project,o=n.eventsList.insertNewEvent(i,"BuiltinCommonInstructions::Standard",n.indexInList),a=cv.asStandardEvent(o),s=function(e,t){var n=new Am.Instruction;return n.setType((0,bh.Op)(e,t)),n.setParametersCount(t.getParameters().size()+1+1),(0,Et.mapVector)(t.getParameters(),(function(e,t){n.setParameter(1+t,e.getName())})),n}(e,t);a.getActions().push_back(s),s.delete(),r.deleteSelection({deleteInstructions:!1})}},r._replaceSelectionByGroupOfEvents=function(e){var t=eu(r.state.selection);if(t){var n=r.props.project,i=t.eventsList.insertNewEvent(n,"BuiltinCommonInstructions::Group",t.indexInList),o=cv.asGroupEvent(i);o.setName("Grouped events"),o.setFolded(!0),o.getSubEvents().insertEvents(e,0,e.getEventsCount(),0),r.deleteSelection({deleteInstructions:!1})}},r._ensureEventUnfolded=function(e){var t=e();t&&r._eventsTree&&r._eventsTree.unfoldForEvent(t)},r._replaceInEvents=function(e,t){var n=e(t,(function(){r.forceUpdate((function(){r._eventsTree&&r._eventsTree.forceEventsUpdate()}))}));if(n.length){var i=r._getChangedEventRows(n);r._saveChangesToHistory("EDIT",{positionsBeforeAction:i,positionAfterAction:i})}},r._searchInEvents=function(e,t){e(t,(function(){r.forceUpdate((function(){r._eventsTree&&r._eventsTree.forceEventsUpdate()}))}))},r._onEventMoved=function(e,t){r._saveChangesToHistory("EDIT",{positionsBeforeAction:[e],positionAfterAction:[t]})},r._renderInstructionEditorDialog=function(){var e=r.props,t=e.project,n=e.scope,i=e.globalObjectsContainer,o=e.objectsContainer,a=r.state.inlineInstructionEditorAnchorEl?em:Xx,s=r.state.editedInstruction.instruction;return s?(0,d.jsx)(b.I18n,{children:function(e){var l=e.i18n;return(0,d.jsx)(a,{i18n:l,project:t,scope:n,globalObjectsContainer:i,objectsContainer:o,instruction:s,isCondition:r.state.editedInstruction.isCondition,isNewInstruction:void 0===r.state.editedInstruction.indexInList,anchorEl:r.state.inlineInstructionEditorAnchorEl,open:!0,onCancel:function(){return r.closeInstructionEditor()},onSubmit:function(){var e=r.state.editedInstruction,t=e.instrsList,n=e.instruction,i=e.indexInList;t&&n&&(void 0!==i&&null!==i?t.set(i,n):t.insert(n,t.size()),r.closeInstructionEditor(!0),function(e){for(var t=!1,n=!1,r=e.size()-1;r>=0;--r){var i=e.get(r);r===e.size()-1?"BuiltinCommonInstructions::Once"===i.getType()&&(t=!0):"BuiltinCommonInstructions::Once"===i.getType()&&(e.removeAt(r),n=!0)}if(n&&!t){var o=new ym.Instruction;o.setType("BuiltinCommonInstructions::Once"),e.insert(o,e.size()),o.delete()}}(t),r._eventsTree&&r._eventsTree.forceEventsUpdate())},resourceManagementProps:r.props.resourceManagementProps,openInstructionOrExpression:function(e,t){r.closeInstructionEditor(),r.props.openInstructionOrExpression(e,t)},canPasteInstructions:r.state.editedInstruction.isCondition?Eh():Ih(),onPasteInstructions:function(){var e=r.state.editedInstruction,t=e.instrsList,n=e.isCondition,i=e.eventContext;t&&i&&r.pasteInstructionsInInstructionsList(i,{instrsList:t,isCondition:n})}})}}):void 0},r._ensureFocused=function(){if(r._containerDiv&&document){var e=r._containerDiv.current;if(document.activeElement!==e&&e){if(document.activeElement!==document.body&&e.contains(document.activeElement))return;e.focus()}}},r.addNewEvent=(0,Xr.zi)(r.props.authenticatedUser,Xr.l8,r._addNewEvent),r}return(0,at.Z)(n,[{key:"componentDidMount",value:function(){this.setState({allEventsMetadata:Lg()}),this.resourceExternallyChangedCallbackId=av(this.onResourceExternallyChanged.bind(this))}},{key:"componentWillUnmount",value:function(){sv(this.resourceExternallyChangedCallbackId)}},{key:"componentDidUpdate",value:function(e,t){this.addNewEvent=(0,Xr.zi)(this.props.authenticatedUser,Xr.l8,this._addNewEvent),this.state.eventsHistory!==t.eventsHistory&&this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges(),!e.isActive&&this.props.isActive&&this._ensureFocused()}},{key:"updateToolbar",value:function(){if(this.props.setToolbar){var e=this._selectionCanHaveSubEvents();this.props.setToolbar((0,d.jsx)(mm,{allEventsMetadata:this.state.allEventsMetadata,onAddStandardEvent:this._addStandardEvent,onAddSubEvent:this.addSubEvent,canAddSubEvent:e,canToggleEventDisabled:lu(this.state.selection)&&this._selectionCanToggleDisabled(),canToggleInstructionInverted:cu(this.state.selection),onAddCommentEvent:this._addCommentEvent,onAddEvent:this.addNewEvent,onToggleInvertedCondition:this._invertSelectedConditions,onToggleDisabledEvent:this.toggleDisabled,canRemove:du(this.state.selection),onRemove:this.deleteSelection,canUndo:Nt(this.state.eventsHistory),canRedo:Bt(this.state.eventsHistory),undo:this.undo,redo:this.redo,onOpenSettings:this.props.onOpenSettings,settingsIcon:this.props.settingsIcon,onToggleSearchPanel:this._toggleSearchPanel,canMoveEventsIntoNewGroup:du(this.state.selection),moveEventsIntoNewGroup:this.moveEventsIntoNewGroup}))}}},{key:"closeInstructionEditor",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.state.editedInstruction,r=n.instruction,i=n.eventContext;this.setState({editedInstruction:{isCondition:!0,instruction:null,instrsList:null,indexInList:0,eventContext:null}},(function(){if(r&&r.delete(),t&&i){var n=e._getChangedEventRows([i.event]);e._saveChangesToHistory("EDIT",{positionsBeforeAction:n,positionAfterAction:n})}}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.isActive,r=t.project,i=t.scope,o=t.events,a=t.onOpenExternalEvents,s=t.onOpenLayout,l=t.globalObjectsContainer,c=t.objectsContainer,u=t.preferences,p=t.resourceManagementProps,f=t.onCreateEventsFunction,h=t.tutorials;if(!r)return null;var g=(0,Gr.BF)(),x=i.eventsFunctionsExtension&&i.eventsFunction&&(!i.eventsBasedBehavior&&!i.eventsBasedObject&&cv.EventsFunctionSelfCallChecker.isFreeFunctionOnlyCallingItself(r,i.eventsFunctionsExtension,i.eventsFunction)||i.eventsBasedBehavior&&cv.EventsFunctionSelfCallChecker.isBehaviorFunctionOnlyCallingItself(r,i.eventsFunctionsExtension,i.eventsBasedBehavior,i.eventsFunction)||i.eventsBasedObject&&cv.EventsFunctionSelfCallChecker.isObjectFunctionOnlyCallingItself(r,i.eventsFunctionsExtension,i.eventsBasedObject,i.eventsFunction));return(0,d.jsx)(w.I,{children:function(t){var m=t.windowSize;return(0,d.jsx)(Im,{ref:function(t){return e._eventSearcher=t},events:o,globalObjectsContainer:l,objectsContainer:c,selection:e.state.selection,project:r,children:function(t){var v=t.eventsSearchResultEvents,C=t.searchFocusOffset,j=t.searchInEvents,y=t.replaceInEvents,Z=t.goToPreviousSearchResult,k=t.goToNextSearchResult;return(0,d.jsxs)("div",{id:"events-editor","data-active":n?"true":void 0,className:"gd-events-sheet",style:pv.container,onKeyDown:e._keyboardShortcuts.onKeyDown,onKeyUp:e._keyboardShortcuts.onKeyUp,onDragOver:e._keyboardShortcuts.onDragOver,ref:e._containerDiv,tabIndex:0,children:[x&&(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(De.Z,{kind:"warning",children:(0,d.jsx)(b.Trans,{id:'This function calls itself (it is "recursive"). Ensure this is expected and there is a proper condition to stop it if necessary.'})})})}),(0,d.jsx)(sx,{ref:function(t){return e._eventsTree=t},onScroll:e._ensureFocused,events:o,project:r,scope:i,globalObjectsContainer:l,objectsContainer:c,selection:e.state.selection,onInstructionClick:e.selectInstruction,onInstructionDoubleClick:e.openInstructionEditor,onInstructionContextMenu:e.openInstructionContextMenu,onAddInstructionContextMenu:e.openAddInstructionContextMenu,onAddNewInstruction:e.openInstructionEditor,onPasteInstructions:e.pasteInstructionsInInstructionsList,onMoveToInstruction:e.moveSelectionToInstruction,onMoveToInstructionsList:e.moveSelectionToInstructionsList,onParameterClick:e.openParameterEditor,onEventClick:e.selectEvent,onEventContextMenu:e.openEventContextMenu,onAddNewEvent:function(t,n){e.addNewEvent(t,{eventsList:n,indexInList:n.getEventsCount()})},onOpenExternalEvents:a,onOpenLayout:s,searchResults:v,searchFocusOffset:C,onEventMoved:e._onEventMoved,onEndEditingEvent:e._onEndEditingStringEvent,showObjectThumbnails:u.values.eventsSheetShowObjectThumbnails,screenType:g,windowSize:m,eventsSheetHeight:e._containerDiv.current?e._containerDiv.current.clientHeight:0,fontSize:u.values.eventsSheetZoomLevel,preferences:u,tutorials:h},o.ptr),e.state.showSearchPanel&&(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Search panel"}),scope:"scene-events-search",onClose:function(){return e._closeSearchPanel()},children:(0,d.jsx)(Tm,{ref:function(t){return e._searchPanel=t},onSearchInEvents:function(t){return e._searchInEvents(j,t)},onReplaceInEvents:function(t){e._replaceInEvents(y,t)},resultsCount:v?v.length:null,hasEventSelected:lu(e.state.selection),onGoToPreviousSearchResult:function(){return e._ensureEventUnfolded(Z)},onCloseSearchPanel:function(){e._closeSearchPanel()},onGoToNextSearchResult:function(){return e._ensureEventUnfolded(k)},searchFocusOffset:C})}),(0,d.jsx)(jm,{open:e.state.inlineEditing,anchorEl:e.state.inlineEditingAnchorEl,onRequestClose:function(){e.closeParameterEditor("cancel"===u.values.eventsSheetCancelInlineParameter)},onApply:function(){e.closeParameterEditor(!1)},project:r,scope:i,globalObjectsContainer:l,objectsContainer:c,isCondition:e.state.editedParameter.isCondition,instruction:e.state.editedParameter.instruction,parameterIndex:e.state.editedParameter.parameterIndex,onChange:function(t){var n=e.state.editedParameter,r=n.instruction,i=n.parameterIndex;r&&e.state.inlineEditing&&(r.setParameter(i,t),e.forceUpdate(),e._searchPanel&&e._searchPanel.markSearchResultsDirty())},resourceManagementProps:p}),(0,d.jsx)(za.Z,{ref:function(t){return e.eventContextMenu=t},buildMenuTemplate:e._buildEventContextMenu}),(0,d.jsx)(za.Z,{ref:function(t){return e.instructionContextMenu=t},buildMenuTemplate:e._buildInstructionContextMenu}),e._renderInstructionEditorDialog(),e.state.analyzedEventsContextResult&&(0,d.jsx)(km,{onClose:e._closeEventsContextAnalyzer,eventsContextResult:e.state.analyzedEventsContextResult}),e.state.serializedEventsToExtract&&(0,d.jsx)(nv,{project:r,scope:i,globalObjectsContainer:l,objectsContainer:c,onClose:function(){return e.setState({serializedEventsToExtract:null})},serializedEvents:e.state.serializedEventsToExtract,onCreate:function(t,n){f(t,n),e._replaceSelectionByEventsFunction(t,n),e.setState({serializedEventsToExtract:null})}}),e.state.textEditedEvent&&(0,d.jsx)(sm,{event:e.state.textEditedEvent,onApply:function(){e.closeEventTextDialog()},onClose:e.closeEventTextDialog})]})}},o.ptr)}})}}]),n}(l.Component),hv=function(e,t){l.useImperativeHandle(t,(function(){return{updateToolbar:r,onResourceExternallyChanged:i}}));var n=l.useRef(null),r=function(){n.current&&n.current.updateToolbar()},i=function(e){n.current&&n.current.onResourceExternallyChanged(e)},o=l.useContext(tr.ZP),s=l.useContext(se.ZP),c=l.useContext(rv.n).tutorials,u=l.useContext(io),p=(0,ue.LB)();return(0,d.jsx)(fv,(0,a.Z)({ref:n,authenticatedUser:o,preferences:s,tutorials:c,leaderboardsManager:u,shortcutMap:p},e))},gv=l.forwardRef(hv),xv=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).onBeginCreateEventsFunction=function(){(0,Ar.cc)({step:"begin",parentEditor:"scene-events-editor"})},e.onCreateEventsFunction=function(t,n){e.props.onCreateEventsFunction(t,n,"scene-events-editor")},e}return(0,at.Z)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.isActive||e.isActive}},{key:"componentDidMount",value:function(){if(this.props.isActive){var e=this.getLayout();this.props.setPreviewedLayout(e?e.getName():null)}}},{key:"componentDidUpdate",value:function(e){if(!e.isActive&&this.props.isActive){var t=this.getLayout();this.props.setPreviewedLayout(t?t.getName():null)}}},{key:"getProject",value:function(){return this.props.project}},{key:"updateToolbar",value:function(){this.editor&&this.editor.updateToolbar()}},{key:"forceUpdateEditor",value:function(){}},{key:"getLayout",value:function(){var e=this.props,t=e.project,n=e.projectItemName;return t&&n&&t.hasLayoutNamed(n)?t.getLayout(n):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.projectItemName,i=this.getLayout();return i&&n?(0,d.jsx)(gv,{ref:function(t){return e.editor=t},setToolbar:this.props.setToolbar,onOpenLayout:this.props.onOpenLayout,resourceManagementProps:this.props.resourceManagementProps,openInstructionOrExpression:this.props.openInstructionOrExpression,onCreateEventsFunction:this.onCreateEventsFunction,onBeginCreateEventsFunction:this.onBeginCreateEventsFunction,unsavedChanges:this.props.unsavedChanges,project:n,scope:{project:n,layout:i},globalObjectsContainer:n,objectsContainer:i,events:i.getEvents(),onOpenExternalEvents:this.props.onOpenExternalEvents,isActive:this.props.isActive}):(0,d.jsxs)("div",{children:["No layout called ",r," found!"]})}}]),n}(l.Component),mv=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.25 5.75C8.66015 5.75 5.75 8.66015 5.75 12.25C5.75 15.8399 8.66015 18.75 12.25 18.75C15.8399 18.75 18.75 15.8399 18.75 12.25C18.75 8.66015 15.8399 5.75 12.25 5.75ZM4.25 12.25C4.25 7.83172 7.83172 4.25 12.25 4.25C16.6683 4.25 20.25 7.83172 20.25 12.25C20.25 16.6683 16.6683 20.25 12.25 20.25C7.83172 20.25 4.25 16.6683 4.25 12.25Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5303 8.46967C14.8232 8.76256 14.8232 9.23744 14.5303 9.53033L10.5303 13.5303C10.2374 13.8232 9.76256 13.8232 9.46967 13.5303C9.17678 13.2374 9.17678 12.7626 9.46967 12.4697L13.4697 8.46967C13.7626 8.17678 14.2374 8.17678 14.5303 8.46967Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.25 13C5.25 12.5858 5.58579 12.25 6 12.25H18.5C18.9142 12.25 19.25 12.5858 19.25 13C19.25 13.4142 18.9142 13.75 18.5 13.75H6C5.58579 13.75 5.25 13.4142 5.25 13Z",fill:"currentColor"})]}))})),vv=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.75 5.5C6.05964 5.5 5.5 6.05964 5.5 6.75V17.25C5.5 17.9404 6.05964 18.5 6.75 18.5H17.25C17.9404 18.5 18.5 17.9404 18.5 17.25V6.75C18.5 6.05964 17.9404 5.5 17.25 5.5H6.75ZM4 6.75C4 5.23122 5.23122 4 6.75 4H17.25C18.7688 4 20 5.23122 20 6.75V17.25C20 18.7688 18.7688 20 17.25 20H6.75C5.23122 20 4 18.7688 4 17.25V6.75Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.19253 10.2483C8.46962 9.94039 8.94384 9.91543 9.25172 10.1925L11.7517 12.4425C11.9098 12.5848 12 12.7874 12 13C12 13.2126 11.9098 13.4152 11.7517 13.5575L9.25172 15.8075C8.94384 16.0846 8.46962 16.0596 8.19253 15.7517C7.91543 15.4438 7.94039 14.9696 8.24828 14.6925L10.1289 13L8.24828 11.3075C7.94039 11.0304 7.91543 10.5562 8.19253 10.2483Z",fill:"currentColor"})]}))})),bv=n(58758),Cv=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){return(0,ot.Z)(this,n),t.apply(this,arguments)}return(0,at.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.onPlay,n=e.onPause,r=e.canPlay,i=e.canPause,o=e.onToggleProfiler,a=e.canOpenProfiler,s=e.onToggleConsole,l=e.canOpenConsole,c=e.isProfilerShown,u=e.isConsoleShown;return(0,d.jsxs)(m,{lastChild:!0,children:[(0,d.jsx)(M.Z,{size:"small",color:"default",onClick:o,disabled:!a,selected:c,tooltip:{id:"Open the performance profiler"},children:(0,d.jsx)(mv,{})}),(0,d.jsx)(M.Z,{size:"small",color:"default",onClick:s,disabled:!l,selected:u,tooltip:{id:"Open the console"},children:(0,d.jsx)(vv,{})}),i?(0,d.jsx)(J.Z,{primary:!0,onClick:n,leftIcon:(0,d.jsx)(bv.Z,{}),label:(0,d.jsx)(b.Trans,{id:"Pause"})}):(0,d.jsx)(T.Z,{primary:!0,onClick:t,icon:(0,d.jsx)(j,{}),label:(0,d.jsx)(b.Trans,{id:"Play"}),disabled:!r})]})}}]),n}(l.PureComponent),jv=Cv,yv=n(29459),Zv=n(36502),kv=n.n(Zv),wv={container:{flex:1,display:"flex"},list:{overflowY:"scroll",flex:1}},Tv=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){return(0,ot.Z)(this,n),t.apply(this,arguments)}return(0,at.Z)(n,[{key:"_renderInspectorList",value:function(e,t,n){var r=this;return t(e).map((function(t){if(!t)return null;var i=n.concat(t.key),o=t.getSubInspectors;return(0,d.jsx)(He.HC,{primaryText:t.label,initiallyOpen:!!t.initiallyOpen,onClick:function(){return r.props.onChooseInspector(t,i)},renderNestedItems:o?function(){return r._renderInspectorList(kv()(e,t.key,null),o,i)}:void 0},i.join("."))}))}},{key:"render",value:function(){return this.props.gameData?(0,d.jsx)(He.aV,{style:wv.list,children:this._renderInspectorList(this.props.gameData,this.props.getInspectorDescriptions,[])}):null}}]),n}(l.Component),Sv=n(54122),Pv=n.n(Sv),Ev=n(73529),Iv=n.n(Ev),Mv=function e(t){if(!t)return null;var n={type:t._type,value:null};return"string"===t._type?n.value=t._str:"number"===t._type?n.value=t._value:"boolean"===t._type?n.value=t._bool:"structure"===t._type?n.value=Iv()(t._children,e):"array"===t._type&&(n.value=t._childrenArray.map(e)),n},Lv=function(e,t){var n=t.onCall,r=(t.onEdit,t.variablesContainer);if(r){var i=function(e,t){var n,r=e.shift(),i=["_variables","items",r],o=t._variables.items[r],a=!1,s=(0,ia.Z)(e);try{for(s.s();!(n=s.n()).done;){var l=n.value;if(!(a=!a))if("structure"===o._type)i.push("_children",l),o=o._children[l];else{if("array"!==o._type)return{path:null,variable:null};i.push("_childrenArray",l),o=o._childrenArray[parseInt(l,10)]}}}catch(c){s.e(c)}finally{s.f()}return{path:i,variable:o}}(e.namespace,r),o=i.path,a=i.variable;if(!o)return console.error("Invalid path passed to the debugger: ",e),!1;if(!a)return console.error("Variable doesn't exist: ",e),!1;if("type"===e.name){if(o.push("castTo"),"string"!==e.new_value&&"number"!==e.new_value&&"boolean"!==e.new_value&&"structure"!==e.new_value&&"array"!==e.new_value)return console.error("Invalid type name: "+e.new_value),!1;e.new_value!==a._type&&n(o,[e.new_value])}else if("value"===e.name){if("string"===a._type&&"string"!==typeof e.new_value)e.new_value=""+e.new_value;else if("number"===a._type&&"number"!==typeof e.new_value){if(e.new_value=parseFloat(e.new_value),isNaN(e.new_value))return console.error("Cannot set variable of type number to NaN!"),!1}else if("boolean"===a._type&&"boolean"!==typeof e.new_value)e.new_value="string"===typeof e.new_value?"false"!==e.new_value.toLowerCase()&&"0"!==e.new_value:!!e.new_value;else if("structure"===a._type||"array"===a._type)return console.error("Cannot set the value of a collection."),!1;o.push("setValue"),n(o,[e.new_value])}return!0}},Av=function(e){return(0,d.jsx)(Pv(),{collapsed:!1,name:!1,src:e.variablesContainer?(t=e.variablesContainer,t&&t._variables&&t._variables.items?Iv()(t._variables.items,Mv):null):null,enableClipboard:!1,displayDataTypes:!1,displayObjectSize:!1,onEdit:function(t){return Lv(t,e)},groupArraysAfterLength:50,theme:"monokai",validationMessage:"Invalid value"});var t},Fv=function(e){return(0,d.jsx)(Pv(),{collapsed:!1,name:!1,src:e.timers?(t=e.timers,t?Object.entries(t.items).map((function(e){var t=(0,s.Z)(e,2),n=(t[0],t[1]);return{"Timer name":n._name,"Time (in seconds)":n._time/1e3,"Is paused":n._paused}})):null):null,enableClipboard:!1,displayDataTypes:!1,displayObjectSize:!1,groupArraysAfterLength:50,theme:"monokai"});var t},Ov=function(e){if(!e)return null;var t={"X position":e.x,"Y position":e.y,Angle:e.angle,Layer:e.layer,"Z order":e.zOrder,"Is hidden?":e.hidden};return"undefined"!==typeof e._z&&(t["Z position"]=e._z,t["Rotation around X axis"]=e._rotationX,t["Rotation around Y axis"]=e._rotationY,t["Rotation around Z axis (Angle)"]=t.Angle,delete t.Angle),t},Rv=function(e){return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"General:"})}),(0,d.jsx)(Pv(),{collapsed:!1,name:!1,src:Ov(e.runtimeObject),enableClipboard:!1,displayDataTypes:!1,displayObjectSize:!1,onEdit:function(t){return function(e,t){var n=t.onCall;if(t.onEdit,"X position"===e.name)n(["setX"],[parseFloat(e.new_value)]);else if("Y position"===e.name)n(["setY"],[parseFloat(e.new_value)]);else if("Z position"===e.name)n(["setZ"],[parseFloat(e.new_value)]);else if("Rotation around X axis"===e.name)n(["setRotationX"],[parseFloat(e.new_value)]);else if("Rotation around Y axis"===e.name)n(["setRotationY"],[parseFloat(e.new_value)]);else if("Angle"===e.name||"Rotation around Z axis (Angle)"===e.name)n(["setAngle"],[parseFloat(e.new_value)]);else if("Layer"===e.name)n(["setLayer"],[e.new_value]);else if("Z order"===e.name)n(["setZOrder"],[parseFloat(e.new_value)]);else{if("Is hidden?"!==e.name)return!1;n(["hide"],[!!e.new_value])}return!0}(t,e)},groupArraysAfterLength:50,theme:"monokai"}),(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Instance variables:"})}),(0,d.jsx)(Av,{variablesContainer:e.runtimeObject?e.runtimeObject._variables:null,onEdit:function(t,n){return e.onEdit(["_variables"].concat(t),n)},onCall:function(t,n){return e.onCall(["_variables"].concat(t),n)}}),(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Timers:"})}),(0,d.jsx)(Fv,{timers:e.runtimeObject?e.runtimeObject._timers:null})]})},Dv=function(e){return e?{"Camera rotation (in deg)":e._cameraRotation,"Camera zoom":e._zoomFactor,"Layer is hidden":!!e._hidden,"Camera X position":e._cameraX,"Camera Y position":e._cameraY,"Time scale":e._timeScale}:null},_v=function(e){return e?{"Time scale":e._timeManager?e._timeManager._timeScale:null,Layers:e._layers&&e._layers.items?Iv()(e._layers.items,Dv):null,"Actions waiting to be finished":e._asyncTasksManager.tasksWithCallback.length}:null},Bv=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={newObjectName:""},e}return(0,at.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.runtimeScene,r=t.onCall;return n?(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Layers:"})}),(0,d.jsx)(Pv(),{collapsed:!1,name:!1,src:_v(n),enableClipboard:!1,displayDataTypes:!1,displayObjectSize:!1,onEdit:function(t){return function(e,t){var n=t.onCall;if(t.onEdit,0===e.namespace.length&&"Time scale"===e.name)n(["_timeManager","setTimeScale"],[parseFloat(e.new_value)]);else{if(!(e.namespace.length>=2))return!1;"Layers"===e.namespace[0]&&("Camera rotation (in deg)"===e.name?n(["_layers","items",e.namespace[1],"setCameraRotation"],[parseFloat(e.new_value)]):"Camera zoom"===e.name?n(["_layers","items",e.namespace[1],"setCameraZoom"],[parseFloat(e.new_value)]):"Layer is hidden"===e.name?n(["_layers","items",e.namespace[1],"show"],[!e.new_value]):"Camera X position"===e.name?n(["_layers","items",e.namespace[1],"setCameraX"],[parseFloat(e.new_value)]):"Camera Y position"===e.name?n(["_layers","items",e.namespace[1],"setCameraY"],[parseFloat(e.new_value)]):"Time scale"===e.name&&n(["_layers","items",e.namespace[1],"setTimeScale"],[parseFloat(e.new_value)]))}return!0}(t,e.props)},groupArraysAfterLength:50,theme:"monokai"}),(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Timers:"})}),(0,d.jsx)(Fv,{timers:n._timeManager._timers}),(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Create a new instance on the scene (will be at position 0;0):"})}),n._objects&&n._objects.items&&(0,d.jsx)(C.ad,{noFloatingLabelText:!0,renderTextField:function(){return(0,d.jsx)(Nu.ZP,{hintText:{id:"Enter the name of the object"},value:e.state.newObjectName,onChange:function(t){e.setState({newObjectName:t})},dataSource:Object.keys(n._objects.items).map((function(e){return{text:e,value:e}})),openOnFocus:!0,fullWidth:!0})},renderButton:function(t){return(0,d.jsx)(T.Z,{style:t,label:(0,d.jsx)(b.Trans,{id:"Create"}),primary:!0,onClick:function(){r(["createObject"],[e.state.newObjectName])}})}})]}):null}}]),n}(l.Component),Nv=function(e){return[{label:"Global variables",key:"_variables",renderInspector:function(e,t){var n=t.onCall,r=t.onEdit;return(0,d.jsx)(Av,{variablesContainer:e,onCall:n,onEdit:r})}},{label:"Scenes",key:["_sceneStack","_stack"],renderInspector:function(){return null},initiallyOpen:!0,getSubInspectors:function(e){return e?e.map((function(e,t){return{label:e._name,key:t,renderInspector:function(e,t){var n=t.onCall,r=t.onEdit;return(0,d.jsx)(Bv,{runtimeScene:e,onCall:n,onEdit:r})},initiallyOpen:!0,getSubInspectors:function(e){return[{label:"Scene variables",key:"_variables",renderInspector:function(e,t){var n=t.onCall,r=t.onEdit;return(0,d.jsx)(Av,{variablesContainer:e,onCall:n,onEdit:r})}},{label:"Instances",key:"_instances",renderInspector:function(){return null},initiallyOpen:!0,getSubInspectors:function(e){return e&&e.items?Object.keys(e.items).map((function(t){return e.items[t]&&"undefined"!==typeof e.items[t].length?{label:"".concat(t," (").concat(e.items[t].length,")"),key:["items",t],renderInspector:function(){return null},getSubInspectors:function(e){return e?e.filter((function(e){return!!e})).map((function(e,t){return{label:"#".concat(e.id),key:t,renderInspector:function(e,t){var n=t.onCall,r=t.onEdit;return(0,d.jsx)(Rv,{runtimeObject:e,onCall:n,onEdit:r})}}})):[]}}:null})):[]}}]}}})):[]}}]},Uv=function(e){var t=e.gameData,n=e.onEdit;return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"You are in raw mode. You can edit the fields, but be aware that this can lead to unexpected results or even crash the debugged game!"})}),(0,d.jsx)(Pv(),{collapsed:1,name:!1,src:t,onEdit:function(e){return n(e.namespace.concat(e.name),e.new_value)},groupArraysAfterLength:50,theme:"monokai"})]})},Hv=n(55661),Vv=n(90953),zv={indent:{display:"flex",alignItems:"center"}},Wv=function(e){var t=l.useState({}),n=(0,s.Z)(t,2),i=n[0],o=n[1],c=function(e){return i[e]},u=function(e){var t=e.index;return t<0?"tableHeaderRow":t%2===0?"tableEvenRow":"tableOddRow"},p=function(e){var t=e.rowData;return(0,d.jsxs)("div",{style:zv.indent,children:[(0,d.jsx)("div",{style:{width:8*t.depth}}),t.hasSubsections?(0,d.jsx)(M.Z,{onClick:function(){return function(e){o((0,a.Z)((0,a.Z)({},i),{},(0,r.Z)({},e,!i[e])))}(t.path)},children:t.isCollapsed?(0,d.jsx)(Ct.Z,{}):(0,d.jsx)(jt.Z,{})}):(0,d.jsx)("div",{style:{width:24}}),(0,d.jsx)("span",{children:t.name})]})},f=e.profilerMeasures;if(!f)return null;var h=function t(n,r,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=e.profilerMeasures,l=r&&i.time&&0!==r.time?i.time/r.time*100:100,u=s&&i.time&&0!==s.time?i.time/s.time*100:100,d=c(a);return[{name:n,time:i.time?"".concat(i.time.toFixed(2),"ms"):"?",parentPercent:"".concat(l.toFixed(2),"%"),totalPercent:"".concat(u.toFixed(2),"%"),depth:o,hasSubsections:!!Object.keys(i.subsections).length,path:a,isCollapsed:d}].concat((0,v.Z)(d?[]:$p()(i.subsections,(function(e,n){return t(n,i,e,o+1,"".concat(a,">").concat(o,".").concat(n))}))))}("All",null,f);return(0,d.jsx)(hr.qj,{children:function(e){var t=e.height,n=e.width;return(0,d.jsxs)(hr.iA,{headerHeight:30,height:t,className:"gd-table",headerClassName:"tableHeaderColumn",rowCount:h.length,rowGetter:function(e){var t=e.index;return h[t]},rowHeight:35,onRowClick:function(){},rowClassName:u,width:n,children:[(0,d.jsx)(hr.sg,{label:(0,d.jsx)(b.Trans,{id:"Section name"}),dataKey:"name",width:.4*n,className:"tableColumn",cellRenderer:p}),(0,d.jsx)(hr.sg,{label:(0,d.jsx)(b.Trans,{id:"Time (ms)"}),dataKey:"time",width:.2*n,className:"tableColumn"}),(0,d.jsx)(hr.sg,{label:(0,d.jsx)(b.Trans,{id:"% of parent"}),dataKey:"parentPercent",width:.2*n,className:"tableColumn"}),(0,d.jsx)(hr.sg,{label:(0,d.jsx)(b.Trans,{id:"% of total"}),dataKey:"totalPercent",width:.2*n,className:"tableColumn"})]})}})},Gv={tableContainer:{flex:1}},Yv=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){return(0,ot.Z)(this,n),t.apply(this,arguments)}return(0,at.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.onStart,n=e.onStop,r=e.profilerOutput,i=e.profilingInProgress;return(0,d.jsxs)(is,{children:[(0,d.jsxs)(L.x1,{alignItems:"center",justifyContent:"center",children:[!i&&r&&(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Last run collected on {0} frames.",values:{0:r.stats.framesCount}})}),!i&&r&&(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Restart"}),onClick:t}),!i&&!r&&(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Start profiling"}),onClick:t}),i&&(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Stop profiling"}),onClick:n})]}),i&&(0,d.jsx)(L.x1,{alignItems:"center",children:(0,d.jsx)(Sa.Z,{})}),(0,d.jsxs)("div",{style:Gv.tableContainer,children:[r&&(0,d.jsx)(Wv,{profilerMeasures:r.framesAverageMeasures}),!r&&(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"Start profiling and then stop it after a few seconds to see the results."})})]})]})}}]),n}(l.Component),qv=n(25588),Xv=n(47956),Kv=n(9311),Jv=n(75268),Qv=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33337 9.83329C3.33337 9.55715 3.55723 9.33329 3.83337 9.33329H5.50004C6.51256 9.33329 7.33337 10.1541 7.33337 11.1666V12.8333C7.33337 13.1094 7.10952 13.3333 6.83337 13.3333C6.55723 13.3333 6.33337 13.1094 6.33337 12.8333V11.1666C6.33337 10.7064 5.96028 10.3333 5.50004 10.3333H3.83337C3.55723 10.3333 3.33337 10.1094 3.33337 9.83329Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.8334 10.3333C11.3731 10.3333 11 10.7064 11 11.1666V12.8333C11 13.1094 10.7762 13.3333 10.5 13.3333C10.2239 13.3333 10 13.1094 10 12.8333V11.1666C10 10.1541 10.8208 9.33329 11.8334 9.33329H13.5C13.7762 9.33329 14 9.55715 14 9.83329C14 10.1094 13.7762 10.3333 13.5 10.3333H11.8334Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 2.66663C10.7762 2.66663 11 2.89048 11 3.16663V4.83329C11 5.29354 11.3731 5.66663 11.8334 5.66663H13.5C13.7762 5.66663 14 5.89048 14 6.16663C14 6.44277 13.7762 6.66663 13.5 6.66663H11.8334C10.8208 6.66663 10 5.84581 10 4.83329V3.16663C10 2.89048 10.2239 2.66663 10.5 2.66663Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.83337 2.66663C7.10952 2.66663 7.33337 2.89048 7.33337 3.16663V4.83329C7.33337 5.84582 6.51256 6.66663 5.50004 6.66663H3.83337C3.55723 6.66663 3.33337 6.44277 3.33337 6.16663C3.33337 5.89048 3.55723 5.66663 3.83337 5.66663H5.50004C5.96028 5.66663 6.33337 5.29353 6.33337 4.83329V3.16663C6.33337 2.89048 6.55723 2.66663 6.83337 2.66663Z",fill:"currentColor"})]}))})),$v=function(){function e(){(0,ot.Z)(this,e),this.logs=[],this.groups=new Set,this._onNewLog=new Set,this._onNewGroup=new Set,this._pendingLogs=[],this._pendingCommit=!1}return(0,at.Z)(e,[{key:"_commitLogs",value:function(){var e;(e=this.logs).unshift.apply(e,(0,v.Z)(this._pendingLogs)),this._pendingLogs.length=0,this._pendingCommit=!1,this._onNewLog.forEach((function(e){return e()}))}},{key:"addLog",value:function(e){this._pendingLogs.unshift(e),this.groups.has(e.group)||(this.groups.add(e.group),this._onNewGroup.forEach((function(e){return e()}))),this._pendingCommit||(setTimeout(this._commitLogs.bind(this),200),this._pendingCommit=!0)}},{key:"on",value:function(e,t){"group"===e&&this._onNewGroup.add(t),"log"===e&&this._onNewLog.add(t)}},{key:"off",value:function(e,t){"group"===e&&this._onNewGroup.delete(t),"log"===e&&this._onNewLog.delete(t)}}]),e}(),eb={userSelect:"text",cursor:"text",wordBreak:"break-word"},tb={list:{overflowX:"hidden",overflowY:"scroll"},tag:{marginRight:2},consoleTextArea:(0,a.Z)((0,a.Z)({},eb),{},{width:"100%",backgroundColor:"#292929",borderRadius:"4px",border:"1px solid slategray",color:"white",fontFamily:"'Courier New', monospace",fontSize:11,padding:3})},nb=function(e){var t=e.icon,n=e.label;return(0,d.jsx)(be.Z,{icon:t,style:tb.tag,size:"small",label:(0,d.jsx)("span",{style:eb,children:n})})},rb={info:(0,d.jsx)(Xv.Z,{color:"primary",fontSize:"small"}),warning:(0,d.jsx)(je.Z,{color:"secondary",fontSize:"small"}),error:(0,d.jsx)(yo,{color:"error",fontSize:"small"})},ib=function(e){var t=e.logsManager,n=(0,Pt.Z)(),r=t.logs,i=t.groups;l.useEffect((function(){var e=function(){n()};return t.on("log",e),function(){t.off("log",e)}}),[n,t]);var o=l.useRef(0),c=l.useMemo((function(){return new hr.t1({defaultHeight:45,minHeight:25,fixedWidth:!0,keyMapper:function(e){return r.length-e}})}),[r]),u=l.useState(!1),p=(0,s.Z)(u,2),f=p[0],h=p[1],g=l.useState(!0),x=(0,s.Z)(g,2),m=x[0],v=x[1],C=l.useState(!1),j=(0,s.Z)(C,2),y=j[0],Z=j[1],k=l.useRef(new Set).current;l.useEffect((function(){if(y){var e=function(){return n()};return t.on("group",e),function(){t.off("group",e)}}}),[y,n,t]);var w=r.filter((function(e){var t=e.internal;return!(f&&t)})).filter((function(e){var t=e.group;return!k.has(t)}));return(0,d.jsxs)(L.sg,{noMargin:!0,noOverflowParent:!0,expand:!0,children:[(0,d.jsx)(L.x1,{noMargin:!0,expand:!0,children:(0,d.jsx)(hr.qj,{children:function(e){var t=e.width,n=e.height;return t&&n?(o.current!==t&&(c.clearAll(),o.current=t),(0,d.jsx)(hr.aV,{deferredMeasurementCache:c,height:n,width:t,style:tb.list,rowCount:w.length,rowHeight:c.rowHeight,rowRenderer:function(e){var t=e.index,n=e.key,r=e.parent,i=e.style;return(0,d.jsx)(hr.Z8,{cache:c,columnIndex:0,parent:r,rowIndex:t,children:function(e){var r=e.registerChild;return(0,d.jsxs)("div",{style:(0,a.Z)((0,a.Z)({},i),{},{padding:2,display:"flex",alignItems:"flex-start"}),ref:r,children:[(0,d.jsx)(L.sg,{noMargin:!0,children:rb[w[t].type]||rb.info}),(0,d.jsx)(L.LZ,{}),(0,d.jsxs)(L.sg,{noMargin:!0,expand:!0,children:[(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)("div",{style:tb.consoleTextArea,children:w[t].message})}),m&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.LZ,{}),(0,d.jsxs)(L.x1,{noMargin:!0,children:[w[t].group?(0,d.jsx)(nb,{icon:(0,d.jsx)(Is,{}),label:(0,d.jsx)(b.Trans,{id:"Group: {0}",values:{0:w[t].group}})}):null,(0,d.jsx)(nb,{icon:(0,d.jsx)(qv.Z,{}),label:(0,d.jsx)(b.Trans,{id:"Timestamp: {0}",values:{0:Math.round(1e3*w[t].timestamp)/1e6+"s"}})})]})]})]})]},n)}},n)}})):null}})}),(0,d.jsx)(tm.Z,{children:(0,d.jsxs)(L.x1,{justifyContent:"space-between",alignItems:"center",noMargin:!0,children:[(0,d.jsx)(Wn.Z,{label:m?(0,d.jsx)(b.Trans,{id:"Hide details"}):(0,d.jsx)(b.Trans,{id:"Show details"}),checkedIcon:(0,d.jsx)(Qv,{}),uncheckedIcon:(0,d.jsx)(Jv.Z,{}),checked:m,onCheck:function(e,t){return v(t),void c.clearAll()}}),(0,d.jsx)(Wn.Z,{label:(0,d.jsx)(b.Trans,{id:"Show internal"}),checkedIcon:(0,d.jsx)(Ki.Z,{}),uncheckedIcon:(0,d.jsx)(Ji,{}),checked:!f,onCheck:function(e,t){return h(!t)}}),(0,d.jsx)(M.Z,{tooltip:{id:"Filter the logs by group"},onClick:function(){return Z(!0)},edge:"start",size:"small",children:(0,d.jsx)(Kv.Z,{})})]})}),y&&(0,d.jsx)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Select log groups to display"}),maxWidth:"sm",open:!0,actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Close"}),primary:!1,onClick:function(){return Z(!1)}},"close")],onRequestClose:function(){return Z(!1)},onApply:function(){return Z(!1)},children:(0,d.jsx)(L.sg,{children:function(){var e,t=[],r=(0,ia.Z)(i.values());try{var o=function(){var r=e.value;t.push((0,d.jsx)(L.x1,{children:(0,d.jsx)(Wn.Z,{label:r,checked:!k.has(r),onCheck:function(e,t){t?k.delete(r):k.add(r),n()}})},r))};for(r.s();!(e=r.n()).done;)o()}catch(a){r.e(a)}finally{r.f()}return t}()})})]})},ob={direction:"column",first:{direction:"row",first:"inspectors",second:"selected-inspector",splitPercentage:25},second:{direction:"row",first:"profiler",second:"console",splitPercentage:25},splitPercentage:65},ab=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={selectedInspector:null,selectedInspectorFullPath:[],rawMode:!1},e._editors=null,e.isProfilerShown=function(){return!!e._editors&&e._editors.getOpenedEditorNames().includes("profiler")},e.isConsoleShown=function(){return!!e._editors&&e._editors.getOpenedEditorNames().includes("console")},e.toggleProfiler=function(){e._editors&&e._editors.toggleEditor("profiler","end",75,"row")},e.toggleConsole=function(){e._editors&&e._editors.toggleEditor("console","end",75,"row")},e}return(0,at.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.gameData,r=t.onRefresh,i=t.onCall,o=t.onEdit,a=t.onStartProfiler,s=t.onStopProfiler,l=t.profilerOutput,c=t.profilingInProgress,u=t.logsManager,p=t.onOpenedEditorsChanged,f=this.state,h=f.selectedInspector,g=f.selectedInspectorFullPath,x=f.rawMode,m={inspectors:{type:"primary",title:{id:"Inspectors"},toolbarControls:[],renderEditor:function(){return(0,d.jsx)(is,{children:(0,d.jsxs)(L.sg,{expand:!0,noMargin:!0,useFullHeight:!0,children:[(0,d.jsx)(L.x1,{justifyContent:"center",children:(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Refresh"}),onClick:r,primary:!0})}),(0,d.jsx)(Tv,{gameData:n,getInspectorDescriptions:Nv,onChooseInspector:function(t,n){return e.setState({selectedInspector:t,selectedInspectorFullPath:n})}})]})})}},"selected-inspector":{type:"primary",noTitleBar:!0,renderEditor:function(){return(0,d.jsxs)(is,{children:[(0,d.jsx)(Tt.Z,{children:(0,d.jsx)(L.sg,{children:h?x?(0,d.jsx)(Uv,{gameData:kv()(n,g,null),onEdit:function(e,t){return o(g.concat(e),t)}}):h.renderInspector(kv()(n,g,null),{onCall:function(e,t){return i(g.concat(e),t)},onEdit:function(e,t){return o(g.concat(e),t)}})||(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"No inspector, choose another element in the list or toggle the raw data view."})}):(0,d.jsx)(qe.Z,{children:n?(0,d.jsx)(b.Trans,{id:"Choose an element to inspect in the list"}):(0,d.jsx)(b.Trans,{id:"Pause the game (from the toolbar) or hit refresh (on the left) to inspect the game"})})})}),(0,d.jsx)(tm.Z,{children:(0,d.jsxs)(L.x1,{justifyContent:"space-between",alignItems:"center",noMargin:!0,children:[(0,d.jsx)(Hn.Z,{helpPagePath:"/interface/debugger"}),(0,d.jsx)("div",{children:(0,d.jsx)(Wn.Z,{checkedIcon:(0,d.jsx)(Hv.Z,{}),uncheckedIcon:(0,d.jsx)(Vv.Z,{}),checked:x,onCheck:function(t,n){return e.setState({rawMode:n})}})})]})})]})}},profiler:{type:"secondary",title:{id:"Profiler"},renderEditor:function(){return(0,d.jsx)(Yv,{onStart:a,onStop:s,profilerOutput:l,profilingInProgress:c})}},console:{type:"secondary",title:{id:"Console"},renderEditor:function(){return(0,d.jsx)(is,{children:(0,d.jsx)(ib,{logsManager:u||[]})})}}};return(0,d.jsx)(se.ZP.Consumer,{children:function(t){var n=t.getDefaultEditorMosaicNode,r=t.setDefaultEditorMosaicNode;return(0,d.jsx)(yv.Z,{ref:function(t){return e._editors=t},editors:m,initialNodes:n("debugger")||ob,onPersistNodes:function(e){return r("debugger",e)},onOpenedEditorsChanged:p})}})}}]),n}(l.Component),sb=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){return(0,ot.Z)(this,n),t.apply(this,arguments)}return(0,at.Z)(n,[{key:"render",value:function(){var e=this,t=!!this.props.debuggerIds.length;return(0,d.jsxs)(K.Z,{fullWidth:!0,value:t?this.props.selectedId:0,onChange:function(t,n,r){return e.props.onChooseDebugger(parseInt(r,10)||0)},disabled:!t,children:[this.props.debuggerIds.map((function(e){return(0,d.jsx)($.Z,{value:e,label:{id:"Game preview #{id}",values:{id:e}}},e)})),!t&&(0,d.jsx)($.Z,{value:0,label:{id:"No preview running. Run a preview and you will be able to inspect it with the debugger"}})]})}}]),n}(l.Component),lb=n(41332),cb=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={debuggerServerState:e.props.previewDebuggerServer.getServerState(),debuggerServerError:null,debuggerIds:e.props.previewDebuggerServer.getExistingDebuggerIds(),unregisterDebuggerServerCallbacks:null,debuggerGameData:{},profilerOutputs:{},profilingInProgress:{},gameIsPaused:{},selectedId:0,logs:{}},e._debuggerContents={},e._debuggerLogs=new Map,e.updateToolbar=function(){var t=e.state,n=t.selectedId,r=t.gameIsPaused,i=e._debuggerContents[e.state.selectedId];e.props.setToolbar((0,d.jsx)(jv,{onPlay:function(){return e._play(e.state.selectedId)},onPause:function(){return e._pause(e.state.selectedId)},canPlay:e._hasSelectedDebugger()&&r[n],canPause:e._hasSelectedDebugger()&&!r[n],canOpenProfiler:e._hasSelectedDebugger(),isProfilerShown:!!i&&i.isProfilerShown(),onToggleProfiler:function(){e._debuggerContents[e.state.selectedId]&&e._debuggerContents[e.state.selectedId].toggleProfiler()},canOpenConsole:e._hasSelectedDebugger(),isConsoleShown:!!i&&i.isConsoleShown(),onToggleConsole:function(){e._debuggerContents[e.state.selectedId]&&e._debuggerContents[e.state.selectedId].toggleConsole()}}))},e._registerServerCallbacks=function(){var t=e.props.previewDebuggerServer,n=e.state.unregisterDebuggerServerCallbacks;if(!n||"started"!==t.getServerState()){n&&n();var r=t.registerCallbacks({onErrorReceived:function(t){e.setState({debuggerServerError:t},(function(){return e.updateToolbar()}))},onConnectionClosed:function(t){var n=t.id,r=t.debuggerIds;e._debuggerLogs.delete(n),e.setState((function(e){var t=e.selectedId,i=e.debuggerGameData,o=e.profilerOutputs,a=e.profilingInProgress,s=e.gameIsPaused;return i[n]&&delete i[n],o[n]&&delete o[n],a[n]&&delete a[n],s[n]&&delete s[n],{debuggerIds:r,selectedId:t!==n?t:r.length?r[r.length-1]:t,debuggerGameData:i,profilerOutputs:o,profilingInProgress:a,gameIsPaused:s}}),(function(){return e.updateToolbar()}))},onConnectionOpened:function(t){var n=t.id,r=t.debuggerIds;e.setState({debuggerIds:r,selectedId:n},(function(){return e.updateToolbar()}))},onConnectionErrored:function(t){var n=t.id,r=t.errorMessage;e._getLogsManager(n).addLog({type:"error",timestamp:performance.now(),group:"Debugger connection",message:"The debugger connection errored: "+r})},onServerStateChanged:function(){e.setState({debuggerServerState:t.getServerState()},(function(){return e.updateToolbar()}))},onHandleParsedMessage:function(t){var n=t.id,r=t.parsedMessage;e._handleMessage(n,r)}});e.setState({unregisterDebuggerServerCallbacks:r})}},e._handleMessage=function(t,n){if("dump"===n.command)e.setState({debuggerGameData:(0,a.Z)((0,a.Z)({},e.state.debuggerGameData),{},(0,r.Z)({},t,n.payload))});else if("profiler.output"===n.command)e.setState({profilerOutputs:(0,a.Z)((0,a.Z)({},e.state.profilerOutputs),{},(0,r.Z)({},t,n.payload))});else if("profiler.started"===n.command)e.setState((function(e){return{profilingInProgress:(0,a.Z)((0,a.Z)({},e.profilingInProgress),{},(0,r.Z)({},t,!0))}}));else if("profiler.stopped"===n.command)e.setState((function(e){return{profilingInProgress:(0,a.Z)((0,a.Z)({},e.profilingInProgress),{},(0,r.Z)({},t,!1))}}));else if("game.resumed"===n.command)e.setState((function(e){return{gameIsPaused:(0,a.Z)((0,a.Z)({},e.gameIsPaused),{},(0,r.Z)({},t,!1))}}),(function(){return e.updateToolbar()}));else if("game.paused"===n.command)e.setState((function(e){return{gameIsPaused:(0,a.Z)((0,a.Z)({},e.gameIsPaused),{},(0,r.Z)({},t,!0))}}),(function(){return e.updateToolbar()}));else if("hotReloader.logs"===n.command);else if("console.log"===n.command){if(function(e){var t=e.group,n=e.message;return"JavaScript"===t&&(n.includes("Electron Security Warning")||n.includes("Warning: This is a browser-targeted Firebase bundle"))}(n.payload))return;e._getLogsManager(t).addLog(n.payload)}else console.warn("Unknown command received from debugger client:",n.command)},e._play=function(t){e.props.previewDebuggerServer.sendMessage(t,{command:"play"}),e.setState((function(e){return{gameIsPaused:(0,a.Z)((0,a.Z)({},e.gameIsPaused),{},(0,r.Z)({},t,!1))}}),(function(){return e.updateToolbar()}))},e._pause=function(t){e.props.previewDebuggerServer.sendMessage(t,{command:"pause"}),e.setState((function(e){return{gameIsPaused:(0,a.Z)((0,a.Z)({},e.gameIsPaused),{},(0,r.Z)({},t,!0))}}),(function(){return e.updateToolbar()}))},e._refresh=function(t){e.props.previewDebuggerServer.sendMessage(t,{command:"refresh"})},e._edit=function(t,n,r){return e.props.previewDebuggerServer.sendMessage(t,{command:"set",path:n,newValue:r}),setTimeout((function(){return e._refresh(t)}),100),!0},e._call=function(t,n,r){return e.props.previewDebuggerServer.sendMessage(t,{command:"call",path:n,args:r}),setTimeout((function(){return e._refresh(t)}),100),!0},e._startProfiler=function(t){e.props.previewDebuggerServer.sendMessage(t,{command:"profiler.start"})},e._stopProfiler=function(t){e.props.previewDebuggerServer.sendMessage(t,{command:"profiler.stop"})},e._hasSelectedDebugger=function(){var t=e.state,n=t.selectedId;return-1!==t.debuggerIds.indexOf(n)},e}return(0,at.Z)(n,[{key:"componentDidMount",value:function(){this._registerServerCallbacks()}},{key:"componentWillUnmount",value:function(){this.state.unregisterDebuggerServerCallbacks&&this.state.unregisterDebuggerServerCallbacks()}},{key:"_getLogsManager",value:function(e){var t=this._debuggerLogs.get(e);return t||(t=new $v,this._debuggerLogs.set(e,t)),t}},{key:"render",value:function(){var e=this,t=this.state,n=t.debuggerServerError,r=t.debuggerServerState,i=t.selectedId,o=t.debuggerIds,a=t.debuggerGameData,s=t.profilerOutputs,l=t.profilingInProgress;return(0,d.jsxs)(is,{children:["stopped"===r&&!n&&(0,d.jsxs)(lb.Z,{children:[(0,d.jsx)(Xe.Z,{}),(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Debugger is starting..."})})]}),"stopped"===r&&n&&(0,d.jsx)(lb.Z,{children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Unable to start the debugger server! Make sure that you are authorized to run servers on this computer."})})}),"started"===r&&(0,d.jsxs)(L.sg,{expand:!0,noMargin:!0,children:[(0,d.jsx)(sb,{selectedId:i,debuggerIds:o,onChooseDebugger:function(t){return e.setState({selectedId:t},(function(){return e.updateToolbar()}))}}),this._hasSelectedDebugger()&&(0,d.jsx)(ab,{ref:function(t){return e._debuggerContents[i]=t},gameData:a[i],onPlay:function(){return e._play(i)},onPause:function(){return e._pause(i)},onRefresh:function(){return e._refresh(i)},onEdit:function(t,n){return e._edit(i,t,n)},onCall:function(t,n){return e._call(i,t,n)},onStartProfiler:function(){return e._startProfiler(i)},onStopProfiler:function(){return e._stopProfiler(i)},profilerOutput:s[i],profilingInProgress:l[i],logsManager:this._getLogsManager(i),onOpenedEditorsChanged:this.updateToolbar}),!this._hasSelectedDebugger()&&(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"Run a preview and you will be able to inspect it with the debugger."})})]})]})}}]),n}(l.Component),ub=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={subscriptionChecked:!1},e}return(0,at.Z)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.isActive||e.isActive}},{key:"getProject",value:function(){return this.props.project}},{key:"getLayout",value:function(){return null}},{key:"updateToolbar",value:function(){this.editor&&this.editor.updateToolbar()}},{key:"forceUpdateEditor",value:function(){}},{key:"UNSAFE_componentWillReceiveProps",value:function(){this._checkUserHasSubscription()}},{key:"componentDidMount",value:function(){this._checkUserHasSubscription()}},{key:"_checkUserHasSubscription",value:function(){this._subscriptionChecker&&this.props.isActive&&!this.state.subscriptionChecked&&(this._subscriptionChecker.checkUserHasSubscription(),this.setState({subscriptionChecked:!0}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.previewDebuggerServer;return n&&r?(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(cb,{project:n,setToolbar:this.props.setToolbar,previewDebuggerServer:r,ref:function(t){return e.editor=t}}),(0,d.jsx)(Kn.Z,{ref:function(t){return e._subscriptionChecker=t},id:"Debugger",title:(0,d.jsx)(b.Trans,{id:"Debugger"}),mode:"try"})]}):null}}]),n}(l.Component),db="scene-groups",pb="global-groups",fb="global-empty-placeholder",hb={listContainer:{flex:1,display:"flex",flexDirection:"column"}},gb=function(e){return{label:e._({id:"There is no global group yet."}),id:fb,isPlaceholder:!0}},xb=function(e){return{label:e._({id:"Start by adding a new group."}),id:"scene-empty-placeholder",isPlaceholder:!0}},mb=function(e){return e.isRoot||e.isPlaceholder?e.label:e.group.getName()},vb=function(e){return e.isRoot?e.children:null},bb=function(e){return e.isRoot||e.isPlaceholder?e.id:"group-item-".concat(e.group.getName())},Cb=l.forwardRef((function(e,t){var n=e.globalObjectGroups,r=e.objectGroups,a=e.onGroupAdded,c=e.onDeleteGroup,u=e.onGroupRemoved,p=e.getValidatedObjectOrGroupName,f=e.onRenameGroup,h=e.onGroupRenamed,g=e.beforeSetAsGlobalGroup,x=e.unsavedChanges,m=e.onEditGroup,v=e.canSetAsGlobalGroup,C=l.useState(null),j=(0,s.Z)(C,2),y=j[0],Z=j[1],k=l.useState(""),w=(0,s.Z)(k,2),T=w[0],P=w[1],E=l.useRef(null),I=(0,Pt.Z)(),M=(0,lt.Z)(),A=M.showDeleteConfirmation,F=M.showConfirmation,O=M.showAlert;l.useImperativeHandle(t,(function(){return{forceUpdate:I}}));var R=l.useCallback((function(e){E.current&&E.current.scrollToItem(e)}),[]),D=l.useCallback((function(e){E.current&&E.current.renameItem(e)}),[]),_=l.useCallback((function(){x&&x.triggerUnsavedChanges(),I()}),[x,I]),B=l.useCallback((function(){var e=(0,It.Z)("Group",(function(e){return r.has(e)||n.has(e)})),t=r.insertNew(e,r.count());_(),a&&a();var i={group:t,global:!1};E.current&&E.current.openItems([db]),setTimeout((function(){R(i)}),100),D(i)}),[n,r,a,D,_,R]),N=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.group,a=t.global,e.next=3,A({title:{id:"Remove group"},message:{id:"Are you sure you want to remove this group? This can't be undone."}});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:c(t,(function(e){e&&(a?n.remove(o.getName()):r.remove(o.getName()),_(),u&&u())}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,r,c,u,_,A]),U=l.useCallback((function(e){var t=e.group,i=e.global,o=(0,It.Z)(t.getName(),(function(e){return r.has(e)||n.has(e)}),""),a=i?n:r,s=(0,Dt.XH)(t),l=a.insertNew(o,a.getPosition(t.getName())+1);(0,Dt.qx)(l,s,"unserializeFrom"),l.setName(o),_()}),[n,r,_]),H=l.useCallback((function(e,t){var n=e.group,r=e.global;if(n.getName()!==t){var i=p(t,r);f(e,i,(function(e){e&&(n.setName(i),_(),h&&h())}))}}),[p,_,f,h]),V=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,o){var a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.group,s=a.getName(),!n.has(s)){e.next=6;break}return e.next=5,O({title:{id:"Set as global group"},message:{id:"A global object with this name already exists. Please change the group name before setting it as a global group"}});case 5:return e.abrupt("return");case 6:if(!g||g(s)){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,F({title:{id:"Set as global group"},message:{id:"Global elements help to manage objects across multiple scenes and it is recommended for the most used objects. This action cannot be undone. Do you want to set as global group?"},confirmButtonLabel:{id:"Set as global"}});case 10:if(e.sent){e.next=13;break}return e.abrupt("return");case 13:E.current&&E.current.openItems([pb]),n.insert(a,"number"===typeof o?o:n.count()),r.remove(s),_(),setTimeout((function(){R(t)}),100);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n,r,_,g,R,F,O]),z=l.useCallback((function(e){return!e.isRoot&&(!!y&&(e.isPlaceholder?e.id===fb&&!y.global:!(y.global!==e.global&&(y.global||!e.global))))}),[y]),W=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,o){var a,s,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isRoot){e.next=2;break}return e.abrupt("return",!1);case 2:if(y){e.next=4;break}return e.abrupt("return");case 4:if(!t.isPlaceholder){e.next=9;break}if(t.id!==fb||y.global){e.next=8;break}return e.next=8,V(y,0);case 8:return e.abrupt("return");case 9:if(!(y.global===t.global)){e.next=16;break}a=y.global?n:r,s=a.getPosition(y.group.getName()),l=a.getPosition(t.group.getName()),e.next=24;break;case 16:if(y.global||!t.global){e.next=23;break}return c=n.getPosition(t.group.getName()),e.next=20,V(y,c);case 20:case 23:return e.abrupt("return");case 24:l>s&&(l-=1),"after"===o&&(l+=1),a.move(s,l),_(),E.current&&E.current.forceUpdateList();case 29:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n,r,_,y,V]),G=l.useCallback((function(e){e.isRoot||e.isPlaceholder||m(e.group)}),[m]),Y=l.useCallback((function(e){return function(t,n){return t.isRoot||t.isPlaceholder?[]:[{label:e._({id:"Duplicate"}),click:function(){return U(t)}},{type:"separator"},{label:e._({id:"Edit group"}),click:function(){return G(t)}},{type:"separator"},{label:e._({id:"Rename"}),click:function(){return D(t)}},{label:e._({id:"Set as global group"}),enabled:(r=t,!r.global),click:function(){return V(t)},visible:!1!==v},{label:e._({id:"Delete"}),click:function(){return N(t)}},{type:"separator"},{label:e._({id:"Add a new group..."}),click:B}];var r}}),[B,D,G,N,U,v,V]),q=l.useCallback((function(e){var t=qu(r).map((function(e){return{group:e,global:!1}})),i=qu(n).map((function(e){return{group:e,global:!0}}));return[{label:e._({id:"Global Groups"}),children:i.length>0?i:[gb(e)],isRoot:!0,id:pb},{label:e._({id:"Scene Groups"}),children:t.length>0?t:[xb(e)],isRoot:!0,id:db}]}),[n,r]),X=r.ptr+";"+n.ptr;return(0,d.jsxs)(is,{children:[(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(st.Z,{value:T,onRequestSearch:function(){},onChange:P,placeholder:{id:"Search object groups"}})})}),(0,d.jsx)("div",{style:hb.listContainer,children:(0,d.jsx)(b.I18n,{children:function(e){var t=e.i18n,n=q(t),r=n[0],i=[r.isRoot&&1===r.children.length&&r.children[0].isPlaceholder?null:pb,db].filter(Boolean);return(0,d.jsx)("div",{style:{flex:1},children:(0,d.jsx)(hr.qj,{style:{width:"100%"},disableWidth:!0,children:function(e){var r=e.height;return(0,d.jsx)(zs,{ref:E,items:n,height:r,searchText:T,getItemName:mb,getItemChildren:vb,multiSelect:!1,getItemId:bb,onEditItem:G,selectedItems:y?[y]:[],onSelectItems:function(e){e||Z(null);var t=e[0];t.isRoot||t.isPlaceholder||Z(t||null)},onRenameItem:H,buildMenuTemplate:Y(t),onMoveSelectionToItem:W,canMoveSelectionToItem:z,reactDndType:"GD_GROUP_WITH_CONTEXT",initiallyOpenedNodeIds:i,shouldSelectUponContextMenuOpening:!0},X)}})})}})}),(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(S,{label:(0,d.jsx)(b.Trans,{id:"Add a new group"}),primary:!0,onClick:B,id:"add-new-group-button",icon:(0,d.jsx)(vt.Z,{})})})})]})})),jb=function(e,t){return e.globalObjectGroups===t.globalObjectGroups||e.objectGroups===t.objectGroups},yb=l.memo(Cb,jb),Zb=l.forwardRef((function(e,t){return(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Object groups list"}),scope:"scene-editor-object-groups-list",children:(0,d.jsx)(yb,(0,a.Z)({ref:t},e))})})),kb=n.g.gd,wb={objectSelector:{position:"sticky",bottom:0}},Tb=function(e){var t=e.project,n=e.group,r=e.globalObjectsContainer,i=e.objectsContainer,o=e.onSizeUpdated,a=e.onObjectGroupUpdated,c=l.useState(""),u=(0,s.Z)(c,2),p=u[0],f=u[1],h=n.getAllObjectsNames().toJSArray();return(0,d.jsxs)(C.ak,{noMargin:!0,children:[function(){var e=void 0;if(0===h.length)return null;h.forEach((function(t){var n=kb.getTypeOfObject(r,i,t,!1);e=void 0===e||n===e?n:""}));var t=""===e?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(b.Trans,{id:"This group contains objects of different kinds. You'll only be able to use actions and conditions common to all objects with this group."})," ",(0,d.jsx)(b.Trans,{id:"Variables declared in all objects of the group will be visible in event expressions."})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(b.Trans,{id:"This group contains objects of the same kind ({type}). You can use actions and conditions related to this kind of objects in events with this group.",values:{type:e}})," ",(0,d.jsx)(b.Trans,{id:"Variables declared in all objects of the group will be visible in event expressions."})]});return(0,d.jsx)(De.Z,{kind:"info",children:t})}(),(0,d.jsx)(He.aV,{children:n.getAllObjectsNames().toJSArray().map((function(e){var s=Ku(r,i,e),l=t&&s?(0,d.jsx)(Ms.Z,{iconSize:24,src:Ju.Z.getThumbnail(t,s.getConfiguration())}):null;return(0,d.jsx)(He.HC,{primaryText:e,displayRemoveButton:!0,onRemove:function(){return function(e){n.removeObject(e),o&&o(),a&&a()}(e)},leftIcon:l},e)}))}),(0,d.jsx)(de.Z,{style:wb.objectSelector,background:"medium",children:(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(nd,{project:t,globalObjectsContainer:r,objectsContainer:i,value:p,excludedObjectOrGroupNames:h,onChange:f,onChoose:function(e){n.addObject(e),f(""),o&&o(),a&&a()},openOnFocus:!0,noGroups:!0,hintText:{id:"Choose an object to add to the group"},fullWidth:!0})})})]})},Sb=function(e){var t=e.project,n=e.group,r=e.onApply,i=e.onCancel,o=e.globalObjectsContainer,a=e.objectsContainer,s=(0,Pt.Z)(),l=ut({serializableObject:n,onCancel:i}),c=l.onCancelChanges,u=l.notifyOfChange;return(0,d.jsx)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Edit {0}",values:{0:n.getName()}}),actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),keyboardFocused:!0,onClick:c},"cancel"),(0,d.jsx)(te.vF,{label:(0,d.jsx)(b.Trans,{id:"Apply"}),primary:!0,onClick:r},"apply")],onRequestClose:c,onApply:r,open:!0,children:(0,d.jsx)(Tb,{project:t,group:n,globalObjectsContainer:o,objectsContainer:a,onSizeUpdated:s,onObjectGroupUpdated:u})},n.ptr)},Pb=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={editedGroup:null},e.editGroup=function(t){return e.setState({editedGroup:t})},e}return(0,at.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.objectsContainer,i=t.globalObjectsContainer,o=t.objectGroups,a=t.globalObjectGroups;return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(Zb,{globalObjectGroups:a,objectGroups:o,onEditGroup:this.editGroup,onDeleteGroup:this.props.onDeleteGroup,onRenameGroup:this.props.onRenameGroup,getValidatedObjectOrGroupName:this.props.getValidatedObjectOrGroupName,onGroupAdded:this.props.onGroupsUpdated,onGroupRemoved:this.props.onGroupsUpdated,onGroupRenamed:this.props.onGroupsUpdated,canSetAsGlobalGroup:this.props.canSetAsGlobalGroup,unsavedChanges:this.props.unsavedChanges}),this.state.editedGroup&&(0,d.jsx)(Sb,{project:n,group:this.state.editedGroup,globalObjectsContainer:i,objectsContainer:r,onCancel:function(){return e.editGroup(null)},onApply:function(){e.props.onGroupsUpdated&&e.props.onGroupsUpdated(),e.editGroup(null)}},i.ptr+";"+r.ptr)]})}}]),n}(l.Component),Eb=n.g.gd,Ib=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={currentTab:"config"},e._getValidatedObjectOrGroupName=function(t){var n=e.props,r=n.objectsContainer,i=n.globalObjectsContainer;return(0,It.Z)(Eb.Project.getSafeName(t),(function(e){return!!(r.hasObjectNamed(e)||i.hasObjectNamed(e)||r.getObjectGroups().has(e)||i.getObjectGroups().has(e))}))},e._onDeleteGroup=function(t,n){var r=t.group,i=e.props,o=i.project,a=i.eventsFunction,s=i.globalObjectsContainer,l=i.objectsContainer,c=Y.ZP.showConfirmDialog("Do you want to remove all references to this group in events (actions and conditions using the group)?");Eb.WholeProjectRefactorer.objectOrGroupRemovedInEventsFunction(o,a,s,l,r.getName(),!0,!!c),n(!0)},e._onRenameGroup=function(t,n,r){var i=t.group,o=e.props,a=o.project,s=o.eventsFunction,l=o.globalObjectsContainer,c=o.objectsContainer;i.getName()!==n&&Eb.WholeProjectRefactorer.objectOrGroupRenamedInEventsFunction(a,s,l,c,i.getName(),n,!0),r(!0)},e._chooseTab=function(t){return e.setState({currentTab:t})},e}return(0,at.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.project,n=e.globalObjectsContainer,r=e.objectsContainer,i=e.eventsFunction,o=e.eventsBasedBehavior,a=e.eventsBasedObject,s=e.freezeEventsFunctionType,l=e.onConfigurationUpdated,c=e.onParametersOrGroupsUpdated,u=e.freezeParameters,p=e.helpPagePath,f=e.renderConfigurationHeader,h=e.onMoveFreeEventsParameter,g=e.onMoveBehaviorEventsParameter,x=e.onMoveObjectEventsParameter,m=e.getFunctionGroupNames,v=e.eventsFunctionsContainer;return(0,d.jsxs)(L.sg,{expand:!0,useFullHeight:!0,noOverflowParent:!0,children:[(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,noOverflowParent:!0,children:(0,d.jsx)(le.m,{value:this.state.currentTab,onChange:this._chooseTab,options:[{value:"config",label:(0,d.jsx)(b.Trans,{id:"Configuration"})},{value:"parameters",label:(0,d.jsx)(b.Trans,{id:"Parameters"})},{value:"groups",label:(0,d.jsx)(b.Trans,{id:"Object groups"})}]})})}),"config"===this.state.currentTab?(0,d.jsx)(Tt.Z,{children:(0,d.jsx)(L.x1,{children:(0,d.jsx)($m,{project:t,eventsFunction:i,eventsBasedBehavior:o,eventsBasedObject:a,eventsFunctionsContainer:v,helpPagePath:p,onConfigurationUpdated:l,renderConfigurationHeader:f,freezeEventsFunctionType:s,getFunctionGroupNames:m})})}):null,"parameters"===this.state.currentTab?(0,d.jsx)(Tt.Z,{children:(0,d.jsx)(L.x1,{children:(0,d.jsx)(qm,{project:t,eventsFunction:i,eventsBasedBehavior:o,eventsBasedObject:a,eventsFunctionsContainer:v,onParametersUpdated:c,helpPagePath:p,freezeParameters:u,onMoveFreeEventsParameter:h,onMoveBehaviorEventsParameter:g,onMoveObjectEventsParameter:x},i?i.ptr:null)})}):null,"groups"===this.state.currentTab?(0,d.jsx)(Pb,{project:t,globalObjectsContainer:n,objectsContainer:r,globalObjectGroups:n.getObjectGroups(),objectGroups:i.getObjectGroups(),getValidatedObjectOrGroupName:this._getValidatedObjectOrGroupName,onRenameGroup:this._onRenameGroup,onDeleteGroup:this._onDeleteGroup,onGroupsUpdated:c,canSetAsGlobalGroup:!1,unsavedChanges:this.props.unsavedChanges}):null]})}}]),n}(l.Component),Mb=n(9011),Lb=n.g.gd,Ab="Events Function",Fb={marginRight:5,verticalAlign:"bottom"},Ob=function(e){return"function-".concat(e.ptr)},Rb=function(e,t){var n=e.getName();return"behavior"===t?!Lb.MetadataDeclarationHelper.isBehaviorLifecycleEventsFunction(n):"object"===t?!Lb.MetadataDeclarationHelper.isObjectLifecycleEventsFunction(n):!Lb.MetadataDeclarationHelper.isExtensionLifecycleEventsFunction(n)},Db=function(){function e(t,n){(0,ot.Z)(this,e),this.eventsFunction=t,this.props=n}return(0,at.Z)(e,[{key:"getEventsFunctionsContainer",value:function(){return this.props.eventsFunctionsContainer}},{key:"getEventsFunction",value:function(){return this.eventsFunction}},{key:"getEventsBasedBehavior",value:function(){return this.props.eventsBasedBehavior}},{key:"getEventsBasedObject",value:function(){return this.props.eventsBasedObject}},{key:"isDescendantOf",value:function(e){return null===e.getEventsFunction()&&(this.getEventsBasedBehavior()===e.getEventsBasedBehavior()||this.getEventsBasedObject()===e.getEventsBasedObject()||this.getEventsBasedBehavior()&&e.getId()===Yb||this.getEventsBasedObject()&&e.getId()===Gb||e.getId()===qb)}},{key:"getName",value:function(){return this.eventsFunction.getName()}},{key:"getId",value:function(){return Ob(this.eventsFunction)}},{key:"getHtmlId",value:function(e){return"function-item-".concat(e)}},{key:"getThumbnail",value:function(){switch(this.eventsFunction.getFunctionType()){default:return"res/functions/function.svg";case Lb.EventsFunction.Action:case Lb.EventsFunction.ActionWithOperator:switch(this.eventsFunction.getName()){default:return"res/functions/action.svg";case"onSceneUnloading":case"onDestroy":return"res/functions/destroy.svg";case"onSceneResumed":case"onActivate":return"res/functions/activate.svg";case"onScenePaused":case"onDeActivate":return"res/functions/deactivate.svg";case"onScenePreEvents":case"onScenePostEvents":case"doStepPreEvents":case"doStepPostEvents":return"res/functions/step.svg";case"onSceneLoaded":case"onFirstSceneLoaded":case"onCreated":return"res/functions/create.svg";case"onHotReloading":return"res/functions/reload.svg"}case Lb.EventsFunction.Condition:return"res/functions/condition.svg";case Lb.EventsFunction.Expression:case Lb.EventsFunction.ExpressionAndCondition:return"res/functions/expression.svg"}}},{key:"getDataset",value:function(){return null}},{key:"onSelect",value:function(){this.props.onSelectEventsFunction(this.eventsFunction,this.props.eventsBasedBehavior,this.props.eventsBasedObject)}},{key:"rename",value:function(e){var t=this;this.eventsFunction.getName()!==e&&this.props.onRenameEventsFunction(this.props.eventsBasedBehavior,this.props.eventsBasedObject,this.eventsFunction,e,(function(e){e&&t._onEventsFunctionModified()}))}},{key:"edit",value:function(){this.canBeRenamed()&&this.props.editName(this.getId())}},{key:"canBeRenamed",value:function(){return Rb(this.eventsFunction,this.getEventsBasedBehavior()?"behavior":this.getEventsBasedObject()?"object":"extension")}},{key:"buildMenuTemplate",value:function(e,t){var n=this;return[{label:e._({id:"Rename"}),click:function(){return n.edit()},enabled:this.canBeRenamed(),accelerator:"F2"},{label:this.eventsFunction.isPrivate()?e._({id:"Make public"}):e._({id:"Make private"}),click:function(){return n._togglePrivate()}},{label:this.eventsFunction.isAsync()?e._({id:"Make synchronous"}):e._({id:"Make asynchronous"}),click:function(){return n._toggleAsync()}},{label:e._({id:"Delete"}),click:function(){return n.delete()},accelerator:"Backspace"},{type:"separator"},{label:e._({id:"Copy"}),click:function(){return n.copy()},accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return n.cut()},accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),enabled:Rt.has(Ab),click:function(){return n.paste()},accelerator:"CmdOrCtrl+V"},{label:e._({id:"Duplicate"}),click:function(){return n._duplicateEventsFunction()}}]}},{key:"renderRightComponent",value:function(e){var t=[];return this.eventsFunction.isPrivate()&&t.push((0,d.jsx)(Ze.ZP,{title:(0,d.jsx)(b.Trans,{id:"This function won't be visible in the events editor."}),children:(0,d.jsx)(Ji,{fontSize:"small",style:(0,a.Z)((0,a.Z)({},Fb),{},{color:this.props.gdevelopTheme.text.color.disabled})})},"visibility")),this.eventsFunction.isAsync()&&t.push((0,d.jsx)(Ze.ZP,{title:(0,d.jsx)(b.Trans,{id:'This function is asynchronous - it will only allow subsequent events to run after calling the action "End asynchronous task" within the function.'}),children:(0,d.jsx)(Mb.Z,{fontSize:"small",style:(0,a.Z)((0,a.Z)({},Fb),{},{color:this.props.gdevelopTheme.text.color.disabled})})},"async")),t.length>0?t:null}},{key:"_togglePrivate",value:function(){this.eventsFunction.setPrivate(!this.eventsFunction.isPrivate()),this.props.forceUpdateEditor()}},{key:"_toggleAsync",value:function(){this.eventsFunction.setAsync(!this.eventsFunction.isAsync()),this.props.forceUpdateEditor()}},{key:"delete",value:function(){this._deleteEventsFunction({askForConfirmation:!0})}},{key:"_deleteEventsFunction",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,o=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.askForConfirmation,r=this.props.eventsFunctionsContainer,!n){e.next=8;break}return e.next=5,this.props.showDeleteConfirmation({title:{id:"Remove function"},message:{id:"Are you sure you want to remove this function? This can't be undone."}});case 5:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:this.props.onDeleteEventsFunction(this.eventsFunction,(function(e){e&&(r.removeEventsFunction(o.eventsFunction.getName()),o._onEventsFunctionModified())}));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIndex",value:function(){return this.props.eventsFunctionsContainer.getEventsFunctionPosition(this.eventsFunction)}},{key:"moveAt",value:function(e){var t=this.getIndex();this.props.eventsFunctionsContainer.moveEventsFunction(t,e+(e<=t?0:-1))}},{key:"copy",value:function(){Rt.set(Ab,{eventsFunction:(0,Dt.XH)(this.eventsFunction),name:this.eventsFunction.getName()})}},{key:"cut",value:function(){this.copy(),this._deleteEventsFunction({askForConfirmation:!1})}},{key:"paste",value:function(){if(Rt.has(Ab)){var e=Rt.get(Ab),t=Ot.extractObjectProperty(e,"eventsFunction"),n=Ot.extractStringProperty(e,"name");if(n&&t){var r=this.props,i=r.project,o=r.eventsFunctionsContainer,a=(0,It.Z)(n,(function(e){return o.hasEventsFunctionNamed(e)})),s=o.insertNewEventsFunction(a,this.getIndex()+1);(0,Dt.qx)(s,t,"unserializeFrom",i),s.setName(a),this.props.onEventsFunctionAdded(s),this._onEventsFunctionModified(),this.props.onSelectEventsFunction(s,this.props.eventsBasedBehavior,this.props.eventsBasedObject),this.props.editName(Ob(s))}}}},{key:"_duplicateEventsFunction",value:function(){var e=this.props.eventsFunctionsContainer,t=(0,It.Z)(this.eventsFunction.getName(),(function(t){return e.hasEventsFunctionNamed(t)})),n=e.insertEventsFunction(this.eventsFunction,this.getIndex()+1);n.setName(t),this.props.onEventsFunctionAdded(n),this._onEventsFunctionModified(),this.props.onSelectEventsFunction(n,this.props.eventsBasedBehavior,this.props.eventsBasedObject),this.props.editName(Ob(n))}},{key:"_onEventsFunctionModified",value:function(){this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges(),this.props.forceUpdate()}},{key:"getRightButton",value:function(e){return null}},{key:"addFunctionAtSelection",value:function(){}}]),e}(),_b="Events Based Behavior",Bb={marginRight:5,verticalAlign:"bottom"},Nb=function(e){return"behavior-"+e.ptr},Ub=function(){function e(t,n){(0,ot.Z)(this,e),this.eventsBasedBehavior=t,this.props=n}return(0,at.Z)(e,[{key:"getEventsFunctionsContainer",value:function(){return this.eventsBasedBehavior.getEventsFunctions()}},{key:"getEventsFunction",value:function(){return null}},{key:"getEventsBasedBehavior",value:function(){return this.eventsBasedBehavior}},{key:"getEventsBasedObject",value:function(){return null}},{key:"isDescendantOf",value:function(e){return e.getId()===Yb}},{key:"getName",value:function(){return this.eventsBasedBehavior.getName()}},{key:"getId",value:function(){return Nb(this.eventsBasedBehavior)}},{key:"getHtmlId",value:function(e){return"behavior-item-".concat(e)}},{key:"getThumbnail",value:function(){return"res/functions/behavior_black.svg"}},{key:"getDataset",value:function(){return null}},{key:"onSelect",value:function(){this.props.onSelectEventsBasedBehavior(this.eventsBasedBehavior)}},{key:"rename",value:function(e){var t=this;this.eventsBasedBehavior.getName()!==e&&this.props.onRenameEventsBasedBehavior(this.eventsBasedBehavior,e,(function(e){e&&(t._onEventsBasedBehaviorModified(),t.props.onEventsBasedBehaviorRenamed(t.eventsBasedBehavior))}))}},{key:"edit",value:function(){this.props.editName(this.getId())}},{key:"buildMenuTemplate",value:function(e,t){var n=this;return[{label:e._({id:"Add a function"}),click:function(){return n.addFunctionAtSelection()}},{type:"separator"},{label:e._({id:"Rename"}),click:function(){return n.edit()},accelerator:"F2"},{label:e._({id:"Delete"}),click:function(){return n.delete()},accelerator:"Backspace"},{label:this.eventsBasedBehavior.isPrivate()?e._({id:"Make public"}):e._({id:"Make private"}),click:function(){return n._togglePrivate()}},{type:"separator"},{label:e._({id:"Copy"}),click:function(){return n.copy()},accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return n.cut()},accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),enabled:Rt.has(_b),click:function(){return n.paste()},accelerator:"CmdOrCtrl+V"}]}},{key:"renderRightComponent",value:function(e){return this.eventsBasedBehavior.isPrivate()?(0,d.jsx)(Ze.ZP,{title:(0,d.jsx)(b.Trans,{id:"This behavior won't be visible in the events editor."}),children:(0,d.jsx)(Ji,{fontSize:"small",style:(0,a.Z)((0,a.Z)({},Bb),{},{color:this.props.gdevelopTheme.text.color.disabled})})}):null}},{key:"delete",value:function(){this._deleteEventsBasedBehavior({askForConfirmation:!0})}},{key:"_deleteEventsBasedBehavior",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,o=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.askForConfirmation,r=this.props.eventsBasedBehaviorsList,!n){e.next=8;break}return e.next=5,this.props.showDeleteConfirmation({title:{id:"Remove behavior"},message:{id:"Are you sure you want to remove this behavior? This can't be undone."}});case 5:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:this.props.onDeleteEventsBasedBehavior(this.eventsBasedBehavior,(function(e){e&&(r.remove(o.eventsBasedBehavior.getName()),o._onEventsBasedBehaviorModified())}));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_togglePrivate",value:function(){this.eventsBasedBehavior.setPrivate(!this.eventsBasedBehavior.isPrivate()),this.props.forceUpdateEditor()}},{key:"getIndex",value:function(){return this.props.eventsBasedBehaviorsList.getPosition(this.eventsBasedBehavior)}},{key:"moveAt",value:function(e){var t=this.getIndex();this.props.eventsBasedBehaviorsList.move(t,e+(e<=t?0:-1))}},{key:"copy",value:function(){Rt.set(_b,{eventsBasedBehavior:(0,Dt.XH)(this.eventsBasedBehavior),name:this.eventsBasedBehavior.getName(),extensionName:this.props.eventsFunctionsExtension.getName()})}},{key:"cut",value:function(){this.copy(),this._deleteEventsBasedBehavior({askForConfirmation:!1})}},{key:"paste",value:function(){if(Rt.has(_b)){var e=Rt.get(_b),t=Ot.extractObjectProperty(e,"eventsBasedBehavior"),n=Ot.extractStringProperty(e,"name");if(n&&t){var r=this.props,i=r.project,o=r.eventsBasedBehaviorsList,a=(0,It.Z)(n,(function(e){return o.has(e)})),s=o.insertNew(a,this.getIndex()+1);(0,Dt.qx)(s,t,"unserializeFrom",i),s.setName(a);var l=Ot.extractStringProperty(e,"extensionName");l&&this.props.onEventsBasedBehaviorPasted(s,l),this._onEventsBasedBehaviorModified(),this.props.onSelectEventsBasedBehavior(s),this.props.editName(Nb(s))}}}},{key:"_addNewEventsBasedBehavior",value:function(){var e=this,t=this.props.eventsBasedBehaviorsList,n=(0,It.Z)("MyBehavior",(function(e){return t.has(e)})),r=t.insertNew(n,t.getCount());this._onEventsBasedBehaviorModified();var i=Nb(r);setTimeout((function(){e.props.scrollToItem(i)}),100),this.props.onSelectEventsBasedBehavior(r),this.props.editName(i)}},{key:"_onEventsBasedBehaviorModified",value:function(){this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges(),this.props.forceUpdate()}},{key:"getRightButton",value:function(e){var t=this;return{icon:(0,d.jsx)(vt.Z,{}),label:e._({id:"Add a function"}),click:function(){return t.addFunctionAtSelection()}}}},{key:"addFunctionAtSelection",value:function(){var e=this.props,t=e.selectedEventsFunction,n=e.selectedEventsBasedBehavior,r=this.eventsBasedBehavior.getEventsFunctions(),i=n===this.eventsBasedBehavior&&t?r.getEventsFunctionPosition(t)+1:r.getEventsFunctionsCount();this.props.addNewEventsFunction({itemContent:this,eventsBasedBehavior:this.eventsBasedBehavior,eventsBasedObject:null,index:i})}}]),e}(),Hb="Events Based Object",Vb=function(e){return"object-"+e.ptr},zb=function(){function e(t,n){(0,ot.Z)(this,e),this.eventsBasedObject=t,this.props=n}return(0,at.Z)(e,[{key:"getEventsFunctionsContainer",value:function(){return this.eventsBasedObject.getEventsFunctions()}},{key:"getEventsFunction",value:function(){return null}},{key:"getEventsBasedBehavior",value:function(){return null}},{key:"getEventsBasedObject",value:function(){return this.eventsBasedObject}},{key:"isDescendantOf",value:function(e){return e.getId()===Gb}},{key:"getName",value:function(){return this.eventsBasedObject.getName()}},{key:"getId",value:function(){return Vb(this.eventsBasedObject)}},{key:"getHtmlId",value:function(e){return"object-item-".concat(e)}},{key:"getThumbnail",value:function(){return"res/functions/object_black.svg"}},{key:"getDataset",value:function(){return null}},{key:"onSelect",value:function(){this.props.onSelectEventsBasedObject(this.eventsBasedObject)}},{key:"rename",value:function(e){var t=this;this.eventsBasedObject.getName()!==e&&this.props.onRenameEventsBasedObject(this.eventsBasedObject,e,(function(e){e&&(t._onEventsBasedObjectModified(),t.props.onEventsBasedObjectRenamed(t.eventsBasedObject))}))}},{key:"edit",value:function(){this.props.editName(this.getId())}},{key:"buildMenuTemplate",value:function(e,t){var n=this;return[{label:e._({id:"Add a function"}),click:function(){return n.addFunctionAtSelection()}},{type:"separator"},{label:e._({id:"Rename"}),click:function(){return n.props.editName(n.getId())},accelerator:"F2"},{label:e._({id:"Delete"}),click:function(){return n.delete()},accelerator:"Backspace"},{type:"separator"},{label:e._({id:"Copy"}),click:function(){return n.copy()},accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return n.cut()},accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),enabled:Rt.has(Hb),click:function(){return n.paste()},accelerator:"CmdOrCtrl+V"}]}},{key:"renderRightComponent",value:function(e){return null}},{key:"delete",value:function(){this._deleteEventsBasedObject({askForConfirmation:!0})}},{key:"_deleteEventsBasedObject",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,o=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.askForConfirmation,r=this.props.eventsBasedObjectsList,!n){e.next=8;break}return e.next=5,this.props.showDeleteConfirmation({title:{id:"Remove object"},message:{id:"Are you sure you want to remove this object? This can't be undone."}});case 5:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:this.props.onDeleteEventsBasedObject(this.eventsBasedObject,(function(e){e&&(r.remove(o.eventsBasedObject.getName()),o._onEventsBasedObjectModified())}));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIndex",value:function(){return this.props.eventsBasedObjectsList.getPosition(this.eventsBasedObject)}},{key:"moveAt",value:function(e){var t=this.getIndex();this.props.eventsBasedObjectsList.move(t,e+(e<=t?0:-1))}},{key:"copy",value:function(){Rt.set(Hb,{eventsBasedObject:(0,Dt.XH)(this.eventsBasedObject),name:this.eventsBasedObject.getName()})}},{key:"cut",value:function(){this.copy(),this._deleteEventsBasedObject({askForConfirmation:!1})}},{key:"paste",value:function(){if(Rt.has(Hb)){var e=Rt.get(Hb),t=Ot.extractObjectProperty(e,"eventsBasedObject"),n=Ot.extractStringProperty(e,"name");if(n&&t){var r=this.props,i=r.project,o=r.eventsBasedObjectsList,a=(0,It.Z)(n,(function(e){return o.has(e)})),s=o.insertNew(a,this.getIndex()+1);(0,Dt.qx)(s,t,"unserializeFrom",i),s.setName(a),this._onEventsBasedObjectModified(),this.props.onSelectEventsBasedObject(s),this.props.editName(Vb(s))}}}},{key:"_addNewEventsBasedObject",value:function(){var e=this,t=this.props.eventsBasedObjectsList,n=(0,It.Z)("MyObject",(function(e){return t.has(e)})),r=t.insertNew(n,t.getCount());this._onEventsBasedObjectModified();var i=Vb(r);setTimeout((function(){e.props.scrollToItem(i)}),100),this.props.onSelectEventsBasedObject(r),this.props.editName(i)}},{key:"_onEventsBasedObjectModified",value:function(){this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges(),this.props.forceUpdate()}},{key:"getRightButton",value:function(e){var t=this;return{icon:(0,d.jsx)(vt.Z,{}),label:e._({id:"Add a function"}),click:function(){return t.addFunctionAtSelection()}}}},{key:"addFunctionAtSelection",value:function(){var e=this.props,t=e.selectedEventsFunction,n=e.selectedEventsBasedObject,r=this.eventsBasedObject.getEventsFunctions(),i=n===this.eventsBasedObject&&t?r.getEventsFunctionPosition(t)+1:r.getEventsFunctionsCount();this.props.addNewEventsFunction({itemContent:this,eventsBasedBehavior:null,eventsBasedObject:this.eventsBasedObject,index:i})}}]),e}(),Wb=n.g.gd,Gb="extension-objects",Yb="extension-behaviors",qb="extension-functions",Xb={listContainer:{flex:1,display:"flex",flexDirection:"column"},autoSizerContainer:{flex:1},autoSizer:{width:"100%"}},Kb=function(){function e(t,n,r){(0,ot.Z)(this,e),this.content=new zb(t,n),this.eventFunctionProps=r}return(0,at.Z)(e,[{key:"getChildren",value:function(e){var t=this.content.eventsBasedObject,n=t.getEventsFunctions(),r=(0,a.Z)({eventsBasedObject:t,eventsFunctionsContainer:n},this.eventFunctionProps),i=t.getEventsFunctions();return 0===i.getEventsFunctionsCount()?[new $b("events-object-functions-placeholder."+t.getName(),e._({id:"Start by adding a new function."}))]:(0,Et.mapFor)(0,i.getEventsFunctionsCount(),(function(e){return new Qb(new Db(i.getEventsFunctionAt(e),r))}))}}]),e}(),Jb=function(){function e(t,n,r){(0,ot.Z)(this,e),this.content=new Ub(t,n),this.eventFunctionProps=r}return(0,at.Z)(e,[{key:"getChildren",value:function(e){var t=this.content.eventsBasedBehavior,n=t.getEventsFunctions(),r=(0,a.Z)({eventsBasedBehavior:t,eventsFunctionsContainer:n},this.eventFunctionProps);return 0===n.getEventsFunctionsCount()?[new $b("events-behavior-functions-placeholder."+t.getName(),e._({id:"Start by adding a new function."}))]:(0,Et.mapFor)(0,n.getEventsFunctionsCount(),(function(e){return new Qb(new Db(n.getEventsFunctionAt(e),r))}))}}]),e}(),Qb=function(){function e(t){(0,ot.Z)(this,e),this.content=t}return(0,at.Z)(e,[{key:"getChildren",value:function(e){return null}}]),e}(),$b=function(){function e(t,n){(0,ot.Z)(this,e),this.isPlaceholder=!0,this.content=new eC(t,n)}return(0,at.Z)(e,[{key:"getChildren",value:function(e){return null}}]),e}(),eC=function(){function e(t,n,r){(0,ot.Z)(this,e),this.id=t,this.label=n,this.buildMenuTemplateFunction=function(e,t){return r?[{label:r.label,click:r.click}]:[]},this.rightButton=r}return(0,at.Z)(e,[{key:"getName",value:function(){return this.label}},{key:"getId",value:function(){return this.id}},{key:"getRightButton",value:function(e){return this.rightButton}},{key:"getEventsFunctionsContainer",value:function(){return null}},{key:"getEventsFunction",value:function(){return null}},{key:"getEventsBasedBehavior",value:function(){return null}},{key:"getEventsBasedObject",value:function(){return null}},{key:"getHtmlId",value:function(e){return null}},{key:"getThumbnail",value:function(){return null}},{key:"getDataset",value:function(){return null}},{key:"onSelect",value:function(){}},{key:"buildMenuTemplate",value:function(e,t){return this.buildMenuTemplateFunction(e,t)}},{key:"renderRightComponent",value:function(e){return null}},{key:"rename",value:function(e){}},{key:"edit",value:function(){}},{key:"delete",value:function(){}},{key:"copy",value:function(){}},{key:"paste",value:function(){}},{key:"cut",value:function(){}},{key:"getIndex",value:function(){return 0}},{key:"moveAt",value:function(e){}},{key:"isDescendantOf",value:function(e){return!1}},{key:"addFunctionAtSelection",value:function(e,t,n){}}]),e}(),tC=function(e){return e.content.getName()},nC=function(e){return e.content.getId()},rC=function(e,t){return e.content.getHtmlId(t)},iC=function(e){return function(t){return t.getChildren(e)}},oC=function(e){return e.content.getThumbnail()},aC=function(e){return e.content.getDataset()},sC=function(e){return function(t,n){return t.content.buildMenuTemplate(e,n)}},lC=function(e){return function(t){return t.content.renderRightComponent(e)}},cC=function(e,t){e.content.rename(t)},uC=function(e){e.content.edit()},dC=function(e){return function(t){return t.content.getRightButton(e)}},pC=l.forwardRef((function(e,t){var n=e.project,r=e.eventsFunctionsExtension,i=e.unsavedChanges,o=e.onSelectEventsFunction,c=e.onDeleteEventsFunction,u=e.onRenameEventsFunction,p=e.onAddEventsFunction,h=e.onEventsFunctionAdded,g=e.onSelectEventsBasedBehavior,x=e.onDeleteEventsBasedBehavior,m=e.onRenameEventsBasedBehavior,j=e.onEventsBasedBehaviorRenamed,y=e.onEventsBasedBehaviorPasted,Z=e.onSelectEventsBasedObject,k=e.onDeleteEventsBasedObject,T=e.onRenameEventsBasedObject,S=e.onEventsBasedObjectRenamed,P=e.selectedEventsFunction,E=e.selectedEventsBasedBehavior,I=e.selectedEventsBasedObject,M=e.forceUpdateEditor,A=l.useState([]),F=(0,s.Z)(A,2),O=F[0],R=F[1],D=l.useContext(se.ZP),_=l.useContext(f.Z),B=D.getShowEventBasedObjectsEditor,N=l.useContext(Yr.Z).currentlyRunningInAppTutorial,U=l.useRef(null),H=(0,Pt.Z)(),V=(0,w.U)().isMobile,z=(0,lt.Z)().showDeleteConfirmation,W=l.useCallback((function(){H(),U.current&&U.current.forceUpdateList()}),[H]);l.useImperativeHandle(t,(function(){return{forceUpdateList:function(){H(),U.current&&U.current.forceUpdateList()}}}));var G=l.useState(""),Y=(0,s.Z)(G,2),q=Y[0],X=Y[1],K=l.useCallback((function(e){U.current&&U.current.scrollToItemFromId(e)}),[]),J=l.useCallback((function(e){var t=U.current;t&&(V&&t.scrollToItemFromId(e,"start"),t.renameItemFromId(e))}),[V]),Q=l.useCallback((function(e){var t=e.itemContent,a=e.eventsBasedBehavior,s=e.eventsBasedObject,l=e.index,c=a||s,u=c?c.getEventsFunctions():r;a&&g(a),s&&Z(s),p(a,s,(function(e){if(e){var r=e.name||(0,It.Z)("Function",(function(e){return u.hasEventsFunctionNamed(e)})),c=u.insertNewEventsFunction(r,l||u.getEventsFunctionsCount());c.setFunctionType(e.functionType),c.isCondition()&&!c.isExpression()&&Wb.PropertyFunctionGenerator.generateConditionSkeleton(n,c);var d=Ob(c);U.current&&U.current.openItems([t?t.getId():qb]),setTimeout((function(){K(d)}),100),h(c),i&&i.triggerUnsavedChanges(),H(),o(c,a,s),Rb(c,a?"behavior":s?"object":"extension")&&J(d)}}))}),[J,r,H,p,h,g,Z,n,o,K,i]),$=l.useCallback((function(){var e=r.getEventsBasedBehaviors(),t=(0,It.Z)("MyBehavior",(function(t){return e.has(t)})),n=e.insertNew(t,e.getCount());i&&i.triggerUnsavedChanges(),H();var o=Nb(n);U.current&&U.current.openItems([o,Yb]),setTimeout((function(){K(o)}),100),g(n),J(o)}),[J,r,H,K,g,i]),ee=l.useCallback((function(){var e=r.getEventsBasedObjects(),t=(0,It.Z)("MyObject",(function(t){return e.has(t)})),n=e.insertNew(t,e.getCount());i&&i.triggerUnsavedChanges(),H();var o=Vb(n);U.current&&U.current.openItems([o,Gb]),setTimeout((function(){K(o)}),100),Z(n),J(o)}),[J,r,H,K,Z,i]),te=l.useCallback((function(e){i&&i.triggerUnsavedChanges(),e?W():H()}),[H,W,i]),ne=l.useRef(new St.ZP({shortcutCallbacks:{}}));l.useEffect((function(){ne.current&&(ne.current.setShortcutCallback("onDelete",(function(){O.length>0&&O[0].content.delete()})),ne.current.setShortcutCallback("onRename",(function(){O.length>0&&J(O[0].content.getId())})),ne.current.setShortcutCallback("onCopy",(function(){O.length>0&&O[0].content.copy()})),ne.current.setShortcutCallback("onPaste",(function(){O.length>0&&O[0].content.paste()})),ne.current.setShortcutCallback("onCut",(function(){O.length>0&&O[0].content.cut()})))}),[J,O]);var re=l.useMemo((function(){return{project:n,eventsFunctionsExtension:r,unsavedChanges:i,preferences:D,forceUpdateEditor:M,gdevelopTheme:_,forceUpdate:H,forceUpdateList:W,showDeleteConfirmation:z,editName:J,scrollToItem:K,onSelectEventsFunction:o,onDeleteEventsFunction:c,onRenameEventsFunction:u,onAddEventsFunction:p,onEventsFunctionAdded:h,selectedEventsBasedBehavior:E,selectedEventsBasedObject:I,selectedEventsFunction:P}}),[n,r,i,D,M,_,H,W,z,J,K,o,c,u,p,h,E,I,P]),ie=r.getEventsBasedBehaviors(),oe=l.useMemo((function(){return{project:n,eventsFunctionsExtension:r,eventsBasedBehaviorsList:ie,unsavedChanges:i,forceUpdateEditor:M,preferences:D,gdevelopTheme:_,forceUpdate:H,forceUpdateList:W,showDeleteConfirmation:z,editName:J,scrollToItem:K,onSelectEventsBasedBehavior:g,onDeleteEventsBasedBehavior:x,onRenameEventsBasedBehavior:m,onEventsBasedBehaviorRenamed:j,onEventsBasedBehaviorPasted:y,addNewEventsFunction:Q,selectedEventsBasedBehavior:E,selectedEventsBasedObject:I,selectedEventsFunction:P}}),[n,r,ie,i,M,D,_,H,W,z,J,K,g,x,m,j,y,Q,E,I,P]),ae=r.getEventsBasedObjects(),le=l.useMemo((function(){return{project:n,eventsFunctionsExtension:r,eventsBasedObjectsList:ae,unsavedChanges:i,preferences:D,forceUpdateEditor:M,gdevelopTheme:_,forceUpdate:H,forceUpdateList:W,showDeleteConfirmation:z,editName:J,scrollToItem:K,onSelectEventsBasedObject:Z,onDeleteEventsBasedObject:k,onRenameEventsBasedObject:T,onEventsBasedObjectRenamed:S,addNewEventsFunction:Q,selectedEventsBasedBehavior:E,selectedEventsBasedObject:I,selectedEventsFunction:P}}),[n,r,ae,i,D,M,_,H,W,z,J,K,Z,k,T,S,Q,E,I,P]),ce=(0,Et.mapFor)(0,ae.size(),(function(e){return new Kb(ae.at(e),le,re)})),ue=(0,Et.mapFor)(0,ie.size(),(function(e){return new Jb(ie.at(e),oe,re)})),de=l.useCallback((function(e){return[B()?{isRoot:!0,content:new eC(Gb,e._({id:"Objects"}),{icon:(0,d.jsx)(vt.Z,{}),label:e._({id:"Add an object"}),click:ee}),getChildren:function(e){return 0===ce.length?[new $b("extension-objects-placeholder",e._({id:"Start by adding a new object."}))]:ce}}:null,{isRoot:!0,content:new eC(Yb,e._({id:"Behaviors"}),{icon:(0,d.jsx)(vt.Z,{}),label:e._({id:"Add a behavior"}),click:$}),getChildren:function(e){return 0===ue.length?[new $b("extension-behaviors-placeholder",e._({id:"Start by adding a new behavior."}))]:ue}},{isRoot:!0,content:new eC(qb,e._({id:"Functions"}),{icon:(0,d.jsx)(vt.Z,{}),label:e._({id:"Add a function"}),click:function(){var e=E||I||!P?r.getEventsFunctionsCount():r.getEventsFunctionPosition(P)+1;Q({itemContent:null,eventsBasedBehavior:null,eventsBasedObject:null,index:e})}}),getChildren:function(e){if(0===r.getEventsFunctionsCount())return[new $b("extension-functions-placeholder",e._({id:"Start by adding a new function."}))];var t=(0,a.Z)({eventsFunctionsContainer:r},re);return(0,Et.mapFor)(0,r.getEventsFunctionsCount(),(function(e){return new Qb(new Db(r.getEventsFunctionAt(e),t))}))}}].filter(Boolean)}),[B,ee,$,ce,ue,E,I,P,r,Q,re]),pe=l.useCallback((function(e,t){return O.every((function(n){return n.content.getEventsFunction()?e.content.getEventsFunction()&&n.content.getEventsFunctionsContainer()===e.content.getEventsFunctionsContainer():!e.content.getEventsFunction()&&"inside"!==t&&(n.content.getEventsBasedBehavior()&&e.content.getEventsBasedBehavior()||n.content.getEventsBasedObject()&&e.content.getEventsBasedObject())}))}),[O]),fe=l.useCallback((function(e,t,n){0!==O.length&&(O[0].content.moveAt(t.content.getIndex()+("after"===n?1:0)),te(!0))}),[te,O]),he=l.useCallback((function(e){1!==O.length||e.isPlaceholder||O[0].content.isDescendantOf(e.content)&&(R([]),o(null,null,null))}),[O,o]),ge=n.ptr+";"+r.ptr,xe=[Gb,Yb,qb].concat((0,v.Z)(ce.map((function(e){return e.content.getId()}))),(0,v.Z)(ue.map((function(e){return e.content.getId()}))));return l.useEffect((function(){if(P){var e=E||I,t=e?e.getEventsFunctions():r,n=(0,a.Z)({eventsBasedBehavior:E,eventsBasedObject:I,eventsFunctionsContainer:t},re);R([new Qb(new Db(P,n))])}else R(E?[new Jb(E,oe,re)]:I?[new Kb(I,le,re)]:[])}),[oe,re,le,r,E,I,P]),(0,d.jsxs)(is,{maxWidth:!0,children:[(0,d.jsx)(L.sg,{children:(0,d.jsx)(C.pJ,{children:(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,d.jsx)(st.Z,{value:q,onRequestSearch:function(){},onChange:function(e){return X(e)},placeholder:{id:"Search functions"}})})})}),(0,d.jsx)("div",{style:Xb.listContainer,onKeyDown:ne.current.onKeyDown,onKeyUp:ne.current.onKeyUp,id:"events-function-list",children:(0,d.jsx)(b.I18n,{children:function(e){var t=e.i18n;return(0,d.jsx)("div",{style:Xb.autoSizerContainer,children:(0,d.jsx)(hr.qj,{style:Xb.autoSizer,disableWidth:!0,children:function(e){var n=e.height;return(0,d.jsx)(zs,{ref:U,items:de(t),height:n,forceAllOpened:!!N,searchText:q,getItemName:tC,getItemThumbnail:oC,getItemChildren:iC(t),multiSelect:!1,getItemId:nC,getItemHtmlId:rC,getItemDataset:aC,onEditItem:uC,onCollapseItem:he,selectedItems:O,onSelectItems:function(e){var t=e[0];t&&(t.isRoot||(t.content.onSelect(),R(e)))},onRenameItem:cC,buildMenuTemplate:sC(t),getItemRightButton:dC(t),renderRightComponent:lC(t),onMoveSelectionToItem:function(e,n){return fe(t,e,n)},canMoveSelectionToItem:pe,reactDndType:"GD_EXTENSION_ITEM",initiallyOpenedNodeIds:xe,forceDefaultDraggingPreview:!0,shouldHideMenuIcon:function(){return!0}},ge)}})})}})})]})})),fC=function(e,t){return e.selectedEventsFunction===t.selectedEventsFunction&&e.project===t.project&&e.eventsFunctionsExtension===t.eventsFunctionsExtension},hC=l.memo(pC,fC),gC=l.forwardRef((function(e,t){return(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Objects list"}),scope:"scene-editor-objects-list",children:(0,d.jsx)(hC,(0,a.Z)({ref:t},e))})})),xC=n(33258),mC=n(12813),vC=n(10641),bC=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,We().get(t,{responseType:"arraybuffer"});case 3:if(n=e.sent,!((r=btoa(new Uint8Array(n.data).reduce((function(e,t){return e+String.fromCharCode(t)}),""))).length>102400)){e.next=7;break}throw new Error("Icon is too big (size after base64 conversion: ".concat(r.length,")"));case 7:if("image/svg+xml"===(o=n.headers?n.headers["content-type"].toLowerCase():"")){e.next=10;break}throw new Error('Wrong content type. Got: "'.concat(o,'", expected "image/svg+xml"'));case 10:return e.abrupt("return","data:".concat(o,";base64,").concat(r));case 13:throw e.prev=13,e.t0=e.catch(0),console.error("Unable to import the icon.",e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),CC=function(e){var t=e.i18n,n=e.helpPath,r=e.onChangeHelpPath,i=(0,xg.KL)(n),o=(0,xg.Q1)(n),a=n?(o?t._({id:"This is a relative path that will open in the GDevelop wiki."}):t._({id:"This is link to a webpage."}))+" [".concat(t._({id:"Click here to test the link."}),"](").concat((0,xg.vA)(n),")"):t._({id:"This can either be a URL to a web page, or a path starting with a slash that will be opened in the GDevelop wiki. Leave empty if there is no help page, although it's recommended you eventually write one if you distribute the extension."});return(0,d.jsx)($r.ZP,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Help page URL"}),value:n,onChange:function(e,t){r(t)},errorText:!n||i||o?null:(0,d.jsx)(b.Trans,{id:'This is not a URL starting with "http://" or "https://".'}),helperMarkdownText:a,fullWidth:!0})},jC=function(e){var t=e.eventsFunctionsExtension,n=e.onLoadChange,r=e.isLoading,i=(0,Pt.Z)(),o=l.useState(!1),a=(0,s.Z)(o,2),c=a[0],u=a[1],p=(0,mC.t)();return(0,d.jsx)(b.I18n,{children:function(e){var o=e.i18n;return(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)($r.ZP,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Name"}),value:t.getName(),disabled:!0,fullWidth:!0}),(0,d.jsx)(C.ad,{renderButton:function(e){return(0,d.jsx)(T.Z,{onClick:function(){u(!0)},primary:!0,label:(0,d.jsx)(b.Trans,{id:"Choose"}),disabled:r,style:e})},renderTextField:function(){return(0,d.jsx)(An.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Icon URL"}),value:t.getPreviewIconUrl(),onChange:function(e){t.setPreviewIconUrl(e)},disabled:!0,fullWidth:!0})}}),(0,d.jsx)($r.ZP,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Name displayed in editor"}),value:t.getFullName(),onChange:function(e,n){t.setFullName(n),i()},fullWidth:!0}),(0,d.jsx)($r.ZP,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Short description"}),value:t.getShortDescription(),onChange:function(e,n){t.setShortDescription(n),i()},multiline:!0,fullWidth:!0,rows:2,rowsMax:2}),(0,d.jsx)($r.ZP,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Description (markdown supported)"}),value:t.getDescription(),onChange:function(e,n){t.setDescription(n),i()},multiline:!0,fullWidth:!0,rows:5,rowsMax:15,helperMarkdownText:o._({id:"Explain and give some examples of what can be achieved with this extension."})}),(0,d.jsx)($r.ZP,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Version"}),value:t.getVersion(),onChange:function(e,n){t.setVersion(n),i()},fullWidth:!0}),(0,d.jsx)(Nu.ZP,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Category (shown in the editor)"}),fullWidth:!0,value:t.getCategory(),onChange:function(e){t.setCategory(e),i()},dataSource:[{text:"",value:"General",translatableValue:"General"},{text:"Ads",value:"Ads",translatableValue:"Ads"},{text:"Visual effect",value:"Visual effect",translatableValue:"Visual effect"},{text:"Audio",value:"Audio",translatableValue:"Audio"},{text:"Advanced",value:"Advanced",translatableValue:"Advanced"},{text:"Camera",value:"Camera",translatableValue:"Camera"},{text:"Input",value:"Input",translatableValue:"Input"},{text:"Game mechanic",value:"Game mechanic",translatableValue:"Game mechanic"},{text:"Movement",value:"Movement",translatableValue:"Movement"},{text:"Network",value:"Network",translatableValue:"Network"},{text:"Third-party",value:"Third-party",translatableValue:"Third-party"},{text:"User interface",value:"User interface",translatableValue:"User interface"}]}),(0,d.jsx)(An.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Tags (comma separated)"}),value:t.getTags().toJSArray().join(", "),onChange:function(e){var n=t.getTags();n.clear(),e.split(",").map((function(e){return e.trim()})).filter(Boolean).forEach((function(e){n.push_back(e)})),i()},fullWidth:!0}),(0,d.jsx)(CC,{i18n:o,helpPath:t.getHelpPath(),onChangeHelpPath:function(e){t.setHelpPath(e),i()}}),(0,d.jsx)(vC.D,{userIds:t.getAuthorIds().toJSArray(),onChange:function(e){var n=t.getAuthorIds();n.clear(),e.forEach((function(e){return n.push_back(e.userId)}))},floatingLabelText:(0,d.jsx)(b.Trans,{id:"Authors"}),helperText:(0,d.jsx)(b.Trans,{id:"Select the usernames of the contributors to this extension. They will be displayed in the order selected. Do not see your name? Go to the Profile section and create an account!"})}),c&&(0,d.jsx)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Choose an icon for the extension"}),actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),primary:!1,onClick:function(){u(!1)}},"cancel")],flexColumnBody:!0,fullHeight:!0,open:!0,onRequestClose:function(){u(!1)},children:(0,d.jsx)(xC.L,{onChoose:function(e){u(!1),n(!0),bC(e.url).then((function(n){p.current&&(t.setPreviewIconUrl(e.url),t.setIconUrl(n))}),(function(e){p.current&&(0,Ur.gR)({message:o._({id:"Unable to download the icon. Verify your internet connection or try again later."}),rawError:e,errorId:"icon-download-error"})})).then((function(){p.current&&n(!1)}))},resourceKind:"svg"})})]})}})},yC=n(67449),ZC=n(11374),kC={paper:{minWidth:"100%"}},wC=function(e,t){for(var n=0;n<t.size();n++)if(t.at(n).getName()===e)return!0;return!1},TC=function(e){var t=e.eventsFunctionsExtension,n=t.getAllDependencies(),r=(0,Pt.Z)();return(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(L.x1,{expand:!0,children:(0,d.jsxs)(yC.Z,{component:function(e){var t=e.children;return(0,d.jsx)(de.Z,{style:kC.paper,background:"medium",children:t})},children:[(0,d.jsxs)(ZC.iA,{children:[(0,d.jsx)(ZC.xD,{children:(0,d.jsxs)(ZC.SC,{children:[(0,d.jsx)(ZC.bY,{children:(0,d.jsx)(b.Trans,{id:"Name"})}),(0,d.jsx)(ZC.bY,{children:(0,d.jsx)(b.Trans,{id:"Export name"})}),(0,d.jsx)(ZC.bY,{children:(0,d.jsx)(b.Trans,{id:"Version"})}),(0,d.jsx)(ZC.bY,{children:(0,d.jsx)(b.Trans,{id:"Dependency type"})}),(0,d.jsx)(ZC.bY,{children:(0,d.jsx)(b.Trans,{id:"Action"})})]})}),(0,d.jsx)(ZC.RM,{children:(0,Et.mapVector)(t.getAllDependencies(),(function(e,i){return(0,d.jsxs)(ZC.SC,{children:[(0,d.jsx)(ZC.Nn,{children:(0,d.jsx)(An.Z,{commitOnBlur:!0,value:e.getName(),onChange:function(t){t!==e.getName()&&(wC(t,n)?(0,Ur.T4)("This name is already in use! Please use a unique name.",{delayToNextTick:!0}):(e.setName(t),r()))},margin:"none"})}),(0,d.jsx)(ZC.Nn,{children:(0,d.jsx)(An.Z,{commitOnBlur:!0,value:e.getExportName(),onChange:function(t){t!==e.getExportName()&&(e.setExportName(t),r())},margin:"none"})}),(0,d.jsx)(ZC.Nn,{children:(0,d.jsx)(An.Z,{commitOnBlur:!0,value:e.getVersion(),onChange:function(t){t!==e.getVersion()&&(e.setVersion(t),r())},margin:"none"})}),(0,d.jsx)(ZC.Nn,{children:(0,d.jsxs)(K.Z,{value:e.getDependencyType(),onChange:function(t,n,i){i!==e.getDependencyType()&&(e.setDependencyType(i),r())},margin:"none",children:[(0,d.jsx)($.Z,{value:"npm",label:{id:"NPM"}}),(0,d.jsx)($.Z,{value:"cordova",label:{id:"Cordova"}})]})}),(0,d.jsx)(ZC.Nn,{children:(0,d.jsx)(M.Z,{tooltip:{id:"Delete"},onClick:function(){t.removeDependencyAt(i),r()},size:"small",children:(0,d.jsx)(vn.Z,{})})})]},e.getName())}))})]}),(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(L.x1,{justifyContent:"flex-end",children:(0,d.jsx)(T.Z,{primary:!0,icon:(0,d.jsx)(vt.Z,{}),label:(0,d.jsx)(b.Trans,{id:"Add"}),onClick:function(){t.addDependency().setName((0,It.Z)("New Dependency",(function(e){return wC(e,n)}))).setExportName("my-dependency").setVersion("1.0.0").setDependencyType("cordova"),r()}})})})]})}),(0,d.jsx)(L.x1,{children:(0,d.jsx)(Ta.Z,{children:(0,d.jsx)(b.Trans,{id:"Dependencies allow to add additional libraries in the exported games. NPM dependencies will be included for Electron builds (Windows, macOS, Linux) and Cordova dependencies will be included for Cordova builds (Android, iOS). Note that this is intended for usage in JavaScript events only. If you are only using standard events, you should not worry about this."})})})]})},SC=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.16666 9.33329C3.44281 9.33329 3.66666 9.55715 3.66666 9.83329V10.8333C3.66666 11.6617 4.33823 12.3333 5.16666 12.3333H10.8333C11.6618 12.3333 12.3333 11.6618 12.3333 10.8333V9.83329C12.3333 9.55715 12.5572 9.33329 12.8333 9.33329C13.1095 9.33329 13.3333 9.55715 13.3333 9.83329V10.8333C13.3333 12.214 12.2141 13.3333 10.8333 13.3333H5.16666C3.78596 13.3333 2.66666 12.214 2.66666 10.8333V9.83329C2.66666 9.55715 2.89052 9.33329 3.16666 9.33329Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2.83329C8.27614 2.83329 8.5 3.05715 8.5 3.33329V9.49996C8.5 9.7761 8.27614 9.99996 8 9.99996C7.72386 9.99996 7.5 9.7761 7.5 9.49996V3.33329C7.5 3.05715 7.72386 2.83329 8 2.83329Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2.66663C8.13903 2.66663 8.27179 2.72452 8.36639 2.8264L10.5331 5.15973C10.721 5.36209 10.7092 5.67845 10.5069 5.86636C10.3045 6.05426 9.98817 6.04254 9.80027 5.84018L8 3.90143L6.19973 5.84018C6.01183 6.04254 5.69546 6.05426 5.49311 5.86636C5.29075 5.67845 5.27903 5.36209 5.46693 5.15973L7.6336 2.8264C7.72821 2.72452 7.86096 2.66663 8 2.66663Z",fill:"currentColor"})]}))})),PC=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getEventsFunctionsExtensionWriter()){e.next=3;break}throw new Error("The extension can't be exported because it's not supported by the web-app.");case 3:return e.next=5,r.chooseEventsFunctionExtensionFile(n.getName());case 5:if(o=e.sent){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,r.writeEventsFunctionsExtension(n,o);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),EC=function(){Y.ZP.openExternalURL("https://github.com/GDevelopApp/GDevelop-extensions/issues/new?assignees=&labels=%E2%9C%A8+New+extension&template=new-extension.yml&title=New+extension%3A+%3Ctitle%3E")},IC=function(e){var t=l.useContext(Nr.Z);return(0,d.jsx)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Export extension"}),secondaryActions:[(0,d.jsx)(Hn.Z,{helpPagePath:"/extensions/share-extension/"},"help"),(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Submit to the community"}),onClick:EC})],actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Close"}),keyboardFocused:!0,onClick:function(){e.onClose()}},"close"),(0,d.jsx)(te.vF,{icon:(0,d.jsx)(SC,{}),primary:!0,label:(0,d.jsx)(b.Trans,{id:"Export to a file"}),onClick:function(){PC(t,e.eventsFunctionsExtension)}},"export")],open:!0,onRequestClose:e.onClose,maxWidth:"sm",children:(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,d.jsx)(L.x1,{children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"You can export the extension to a file to easily import it in another project. If your extension is providing useful and reusable functions or behaviors, consider sharing it with the GDevelop community!"})})})})})};function MC(e){var t=e.eventsFunctionsExtension,n=e.onClose,r=e.open,i=l.useState("options"),o=(0,s.Z)(i,2),a=o[0],c=o[1],u=l.useState(!1),p=(0,s.Z)(u,2),f=p[0],h=p[1],g=l.useState(!1),x=(0,s.Z)(g,2),m=x[0],v=x[1],C=l.useContext(Nr.Z).getEventsFunctionsExtensionWriter();return(0,d.jsxs)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"{0} options",values:{0:t.getName()}}),secondaryActions:[(0,d.jsx)(Hn.Z,{helpPagePath:"/extensions/create"},"help"),C?(0,d.jsx)(J.Z,{leftIcon:(0,d.jsx)(SC,{}),label:(0,d.jsx)(b.Trans,{id:"Export extension"}),onClick:function(){v(!0)},disabled:f},"export"):null],actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Close"}),primary:!0,keyboardFocused:!0,onClick:n,disabled:f},"close")],open:r,fixedContent:(0,d.jsx)(le.m,{value:a,onChange:c,options:[{value:"options",label:(0,d.jsx)(b.Trans,{id:"Options"})},{value:"dependencies",label:(0,d.jsx)(b.Trans,{id:"Dependencies"})}]}),cannotBeDismissed:f,onRequestClose:f?function(){}:n,children:["options"===a&&(0,d.jsx)(L.x1,{children:(0,d.jsx)(jC,{eventsFunctionsExtension:t,onLoadChange:h,isLoading:f})}),"dependencies"===a&&(0,d.jsx)(L.x1,{children:(0,d.jsx)(TC,{eventsFunctionsExtension:t})}),m&&(0,d.jsx)(IC,{eventsFunctionsExtension:t,onClose:function(){return v(!1)}})]})}var LC=n.g.gd;function AC(e){var t=e.project,n=e.eventsFunctionsExtension,r=e.eventsBasedBehavior,i=e.unsavedChanges,o=e.onConfigurationUpdated,a=(0,Pt.Z)(),s=l.useCallback((function(){i&&i.triggerUnsavedChanges(),a()}),[a,i]),c=l.useMemo((function(){return LC.WholeProjectRefactorer.getAllObjectTypesUsingEventsBasedBehavior(t,n,r).toNewVectorString().toJSArray()}),[t,n,r]);return(0,d.jsx)(b.I18n,{children:function(e){var n=e.i18n;return(0,d.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[(0,d.jsx)(he.Z,{identifier:"events-based-behavior-explanation",kind:"info",children:(0,d.jsx)(b.Trans,{id:"This is the configuration of your behavior. Make sure to choose a proper internal name as it's hard to change it later. Enter a description explaining what the behavior is doing to the object."})}),(0,d.jsx)($r.ZP,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Internal Name"}),value:r.getName(),disabled:!0,fullWidth:!0}),(0,d.jsx)(An.Z,{commitOnBlur:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Name displayed in editor"}),value:r.getFullName(),onChange:function(e){r.setFullName(e),s()},fullWidth:!0}),(0,d.jsx)(An.Z,{commitOnBlur:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Description"}),helperMarkdownText:n._({id:"Explain what the behavior is doing to the object. Start with a verb when possible."}),value:r.getDescription(),onChange:function(e){r.setDescription(e),s()},multiline:!0,fullWidth:!0,rows:3}),(0,d.jsx)(Bm,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Object on which this behavior can be used"}),project:t,value:r.getObjectType(),onChange:function(e){r.setObjectType(e),s()},allowedObjectTypes:0===c.length?void 0:1===c.length?["",c[0]]:[""]}),c.length>1&&(0,d.jsx)(De.Z,{kind:"info",children:(0,d.jsx)(b.Trans,{id:"This behavior is being used by multiple types of objects. Thus, you can't restrict its usage to any particular object type. All the object types using this behavior are listed here: {0}",values:{0:c.join(", ")}})}),(0,d.jsx)(Wn.Z,{label:(0,d.jsx)(b.Trans,{id:"Private"}),checked:r.isPrivate(),onCheck:function(e,t){r.setPrivate(t),o&&o("isPrivate"),s()}}),0===r.getEventsFunctions().getEventsFunctionsCount()&&(0,d.jsx)(he.Z,{identifier:"empty-events-based-behavior-explanation",kind:"info",children:(0,d.jsx)(b.Trans,{id:"Once you're done, start adding some functions to the behavior. Then, test the behavior by adding it to an object in a scene."})}),(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)(Hn.Z,{helpPagePath:"/behaviors/events-based-behaviors"},"help")})]})}})}var FC=function(e){var t=(0,w.U)().isMobile;return(0,d.jsx)(J.Z,(0,a.Z)((0,a.Z)({},e),{},{label:t?"":e.label}))},OC=n.g.gd,RC="Properties",DC=(0,Zt.x)("behavior-properties-list"),_C={rowContainer:{display:"flex",flexDirection:"column",marginTop:5},rowContent:{display:"flex",flex:1,alignItems:"center"}},BC=function(){var e=(0,lt.Z)().showConfirmation;return function(){var t=(0,o.Z)((0,i.Z)().mark((function t(n){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({title:{id:"Existing properties"},message:{id:"These properties already exist:{0}Do you want to replace them?",values:{0:"\n\n - "+n.join("\n\n - ")+"\n\n"}},confirmButtonLabel:{id:"Replace"},dismissButtonLabel:{id:"Omit"}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},NC=function(e,t,n){return(0,It.Z)(OC.Project.getSafeName(n),(function(e){return!(!t.has(e)&&"name"!==e&&"type"!==e)}))},UC=function(e){return e.getExtraInfo().toJSArray()};function HC(e){var t=e.properties,n=e.onPropertiesUpdated,r=e.onEventsFunctionsAdded,c=l.useRef(null),u=l.useState(null),p=(0,s.Z)(u,2),h=p[0],g=p[1],x=l.useRef(null);l.useEffect((function(){c.current&&x.current&&h&&(c.current.scrollTo(x.current),g(null),x.current=null)}),[h]);var m=l.useRef(null),j=l.useContext(f.Z),y=BC(),Z=(0,Pt.Z)(),k=l.useCallback((function(){var e=(0,It.Z)("Property",(function(e){return t.has(e)}));t.insertNew(e,t.getCount()).setType("Number"),Z(),n&&n(),g(e)}),[Z,n,t]),w=l.useCallback((function(e){t.remove(e),Z(),n&&n()}),[Z,n,t]),S=l.useCallback((function(e){Rt.set(RC,[{name:e.getName(),serializedProperty:(0,Dt.XH)(e)}]),Z()}),[Z]),P=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(r){var o,a,s,l,c,u,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=Rt.get(RC),a=Ot.extractArray(o)){e.next=4;break}return e.abrupt("return");case 4:if(s=[],l=[],a.forEach((function(e){var n=Ot.extractStringProperty(e,"name"),r=Ot.extractObjectProperty(e,"serializedProperty");n&&r&&(t.has(n)?l.push({name:n,serializedProperty:r}):s.push({name:n,serializedProperty:r}))})),c=null,u=r,s.forEach((function(e){var n=e.name,r=e.serializedProperty,i=t.insertNew(n,u);u++,(0,Dt.qx)(i,r),c||(c=n)})),d=!1,!(l.length>0)){e.next=16;break}return e.next=14,y(l.map((function(e){return e.name})));case 14:(d=e.sent)&&l.forEach((function(e){var n=e.name,r=e.serializedProperty;if(t.has(n)){var i=t.get(n);(0,Dt.qx)(i,r)}}));case 16:Z(),c?g(c):1===l.length&&g(l[0].name),(c||d)&&n&&n();case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Z,t,y,n]),E=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t.getCount());case 2:case"end":return e.stop()}}),e)}))),[t,P]),I=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t.getPosition(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,P]),A=l.useCallback((function(e,r){t.move(e,r),Z(),n&&n()}),[Z,n,t]),F=l.useCallback((function(e){var r=m.current;if(r){var i=t.getPosition(r),o=t.getPosition(e);t.move(i,o>i?o-1:o),Z(),n&&n()}}),[t,Z,n]),O=l.useCallback((function(e){return function(t){var n=UC(e).indexOf(e.getValue()),r=new OC.VectorString;t.forEach((function(e){return r.push_back(e)})),e.setExtraInfo(r),r.delete(),e.setValue(t[n]||""),Z()}}),[Z]),R=l.useCallback((function(){for(var e=new Set,n=0;n<t.size();n++){var r=t.at(n).getGroup()||"";e.add(r)}return(0,v.Z)(e).sort((function(e,t){return e.localeCompare(t)}))}),[t]),D=l.useCallback((function(e,t){e.setHidden(t),Z(),n&&n()}),[Z,n]),_=l.useCallback((function(e,t){e.setAdvanced(t),Z(),n&&n()}),[Z,n]),B=l.useCallback((function(e,t){e.setDeprecated(t),Z(),n&&n()}),[Z,n]),N=Rt.has(RC);return(0,d.jsx)(b.I18n,{children:function(n){var i=n.i18n;return(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,useFullHeight:!0,children:t.getCount()>0?(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(Tt.Z,{ref:c,children:(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,children:(0,Et.mapVector)(t,(function(n,o){var s=h===n.getName()?x:null;return(0,d.jsx)(DC,{beginDrag:function(){return m.current=n,{}},canDrag:function(){return!0},canDrop:function(){return!0},drop:function(){F(n)},children:function(l){var c=l.connectDragSource,u=l.connectDropTarget,p=l.isOver,f=l.canDrop;return u((0,d.jsxs)("div",{style:_C.rowContainer,children:[p&&(0,d.jsx)(kt.Z,{canDrop:f}),(0,d.jsxs)("div",{ref:s,style:(0,a.Z)((0,a.Z)({},_C.rowContent),{},{backgroundColor:j.list.itemsBackgroundColor}),children:[c((0,d.jsx)("span",{children:(0,d.jsx)(L.sg,{children:(0,d.jsx)(yt.V,{})})})),(0,d.jsxs)(C.ep,{expand:!0,children:[(0,d.jsx)(L.x1,{noMargin:!0,expand:!0,alignItems:"center",children:(0,d.jsx)(An.Z,{margin:"none",commitOnBlur:!0,translatableHintText:{id:"Enter the property name"},value:n.getName(),onChange:function(r){if(r!==n.getName()){var o=NC(i,t,r);e.onRenameProperty(n.getName(),o),n.setName(o),Z(),e.onPropertiesUpdated&&e.onPropertiesUpdated()}},fullWidth:!0})}),(0,d.jsx)(L.x1,{noMargin:!0,alignItems:"center",justifyContent:"flex-end",children:(0,d.jsxs)(K.Z,{value:n.isHidden()?"Hidden":n.isDeprecated()?"Deprecated":n.isAdvanced()?"Advanced":"Visible",onChange:function(e,t,r){"Hidden"===r?(D(n,!0),B(n,!1),_(n,!1)):"Deprecated"===r?(D(n,!1),B(n,!0),_(n,!1)):"Advanced"===r?(D(n,!1),B(n,!1),_(n,!0)):"Visible"===r&&(D(n,!1),B(n,!1),_(n,!1))},fullWidth:!0,children:[(0,d.jsx)($.Z,{value:"Visible",label:{id:"Visible in editor"}},"visibility-visible"),(0,d.jsx)($.Z,{value:"Advanced",label:{id:"Advanced"}},"visibility-advanced"),(0,d.jsx)($.Z,{value:"Deprecated",label:{id:"Deprecated"}},"visibility-deprecated"),(0,d.jsx)($.Z,{value:"Hidden",label:{id:"Hidden"}},"visibility-hidden")]})})]}),(0,d.jsx)(Ig.Z,{element:(0,d.jsx)(M.Z,{children:(0,d.jsx)(Ls.Z,{})}),buildMenuTemplate:function(i){return[{label:i._({id:"Delete"}),click:function(){return w(n.getName())}},{label:i._({id:"Copy"}),click:function(){return S(n)}},{label:i._({id:"Paste"}),click:function(){return I(n)},enabled:N},{type:"separator"},{label:i._({id:"Move up"}),click:function(){return A(o,o-1)},enabled:o-1>=0},{label:i._({id:"Move down"}),click:function(){return A(o,o+1)},enabled:o+1<t.getCount()},{label:i._({id:"Generate expression and action"}),click:function(){OC.PropertyFunctionGenerator.generateBehaviorGetterAndSetter(e.project,e.extension,e.eventsBasedBehavior,n,!!e.isSceneProperties),r()},enabled:OC.PropertyFunctionGenerator.canGenerateGetterAndSetter(e.eventsBasedBehavior,n)}]}}),(0,d.jsx)(L.LZ,{})]}),(0,d.jsx)(L.x1,{expand:!0,children:(0,d.jsxs)(C.ak,{expand:!0,children:[(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsxs)(K.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Type"}),value:n.getType(),onChange:function(t,r,i){n.setType(i),"Behavior"===i&&n.setHidden(!1),Z(),e.onPropertiesUpdated&&e.onPropertiesUpdated()},fullWidth:!0,children:[(0,d.jsx)($.Z,{value:"Number",label:{id:"Number"}},"property-type-number"),(0,d.jsx)($.Z,{value:"String",label:{id:"String"}},"property-type-string"),(0,d.jsx)($.Z,{value:"Boolean",label:{id:"Boolean (checkbox)"}},"property-type-boolean"),(0,d.jsx)($.Z,{value:"Choice",label:{id:"String from a list of options (text)"}},"property-type-choice"),(0,d.jsx)($.Z,{value:"Color",label:{id:"Color (text)"}},"property-type-color"),!e.isSceneProperties&&(0,d.jsx)($.Z,{value:"Behavior",label:{id:"Required behavior"}},"property-type-behavior")]}),"Number"===n.getType()&&(0,d.jsx)(K.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Measurement unit"}),value:n.getMeasurementUnit().getName(),onChange:function(t,r,i){n.setMeasurementUnit(OC.MeasurementUnit.getDefaultMeasurementUnitByName(i)),Z(),e.onPropertiesUpdated&&e.onPropertiesUpdated()},fullWidth:!0,children:(0,Et.mapFor)(0,OC.MeasurementUnit.getDefaultMeasurementUnitsCount(),(function(e){var t=OC.MeasurementUnit.getDefaultMeasurementUnitAtIndex(e),n=(0,qn.j)(t),r=t.getLabel()+(n.length>0?"\u2002\u2014\u2002"+n:"");return(0,d.jsx)($.Z,{value:t.getName(),label:r},"measurement-unit-"+t.getName())}))}),("String"===n.getType()||"Number"===n.getType())&&(0,d.jsx)(An.Z,{commitOnBlur:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Default value"}),hintText:"Number"===n.getType()?"123":"ABC",value:n.getValue(),onChange:function(t){n.setValue(t),Z(),e.onPropertiesUpdated&&e.onPropertiesUpdated()},fullWidth:!0}),"Boolean"===n.getType()&&(0,d.jsxs)(K.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Default value"}),value:"true"===n.getValue()?"true":"false",onChange:function(t,r,i){n.setValue(i),Z(),e.onPropertiesUpdated&&e.onPropertiesUpdated()},fullWidth:!0,children:[(0,d.jsx)($.Z,{value:"true",label:{id:"True (checked)"}},"boolean-true"),(0,d.jsx)($.Z,{value:"false",label:{id:"False (not checked)"}},"boolean-false")]}),"Behavior"===n.getType()&&(0,d.jsx)(Nm,{project:e.project,objectType:e.behaviorObjectType||"",value:0===n.getExtraInfo().size()?"":n.getExtraInfo().at(0),onChange:function(t){var r=n.getExtraInfo();0===r.size()?r.push_back(t):r.set(0,t),Z(),e.onPropertiesUpdated&&e.onPropertiesUpdated()},disabled:!1}),"Color"===n.getType()&&(0,d.jsx)(Jn.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Default value"}),disableAlpha:!0,fullWidth:!0,color:n.getValue(),onChange:function(t){n.setValue(t),Z(),e.onPropertiesUpdated&&e.onPropertiesUpdated()}}),"Choice"===n.getType()&&(0,d.jsx)(K.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Default value"}),value:n.getValue(),onChange:function(t,r,i){n.setValue(i),Z(),e.onPropertiesUpdated&&e.onPropertiesUpdated()},fullWidth:!0,children:UC(n).map((function(e,t){return(0,d.jsx)($.Z,{value:e,label:e},t)}))})]}),"Choice"===n.getType()&&(0,d.jsx)(Um,{extraInfo:UC(n),setExtraInfo:O(n)}),(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsx)(An.Z,{commitOnBlur:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Short label"}),translatableHintText:{id:"Make the purpose of the property easy to understand"},floatingLabelFixed:!0,value:n.getLabel(),onChange:function(e){n.setLabel(e),Z()},fullWidth:!0}),(0,d.jsx)(Nu.ZP,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Group name"}),hintText:{id:"Leave it empty to use the default group"},fullWidth:!0,value:n.getGroup(),onChange:function(t){n.setGroup(t),Z(),e.onPropertiesUpdated&&e.onPropertiesUpdated()},dataSource:R().map((function(e){return{text:e,value:e}})),openOnFocus:!0})]}),(0,d.jsx)(An.Z,{commitOnBlur:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Description"}),translatableHintText:{id:"Optionally, explain the purpose of the property in more details"},floatingLabelFixed:!0,value:n.getDescription(),onChange:function(e){n.setDescription(e),Z()},fullWidth:!0})]})})]},n.ptr))}},n.ptr)}))})})}),(0,d.jsx)(L.sg,{children:(0,d.jsxs)(L.x1,{noMargin:!0,children:[(0,d.jsx)(C.pJ,{expand:!0,children:(0,d.jsx)(FC,{leftIcon:(0,d.jsx)(Cn,{}),label:(0,d.jsx)(b.Trans,{id:"Paste"}),onClick:function(){E()},disabled:!N},"paste-properties")}),(0,d.jsx)(C.pJ,{justifyContent:"flex-end",expand:!0,children:(0,d.jsx)(T.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Add a property"}),onClick:k,icon:(0,d.jsx)(vt.Z,{})})})]})})]}):(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,d.jsx)(wt.$,{title:(0,d.jsx)(b.Trans,{id:"Add your first property"}),description:(0,d.jsx)(b.Trans,{id:"Properties store data inside behaviors."}),actionLabel:(0,d.jsx)(b.Trans,{id:"Add a property"}),helpPagePath:"/behaviors/events-based-behaviors",helpPageAnchor:"add-and-use-properties-in-a-behavior",onAction:k,secondaryActionIcon:(0,d.jsx)(Cn,{}),secondaryActionLabel:N?(0,d.jsx)(b.Trans,{id:"Paste"}):null,onSecondaryAction:function(){E()}})})})}})}function VC(e){var t=e.eventsBasedBehavior,n=e.eventsFunctionsExtension,r=e.project,i=e.onRenameProperty,o=e.onRenameSharedProperty,a=e.unsavedChanges,c=e.onEventsFunctionsAdded,u=e.onConfigurationUpdated,p=l.useState("configuration"),f=(0,s.Z)(p,2),h=f[0],g=f[1],x=l.useCallback((function(){a&&a.triggerUnsavedChanges()}),[a]);return(0,d.jsx)(is,{children:(0,d.jsxs)(L.sg,{expand:!0,useFullHeight:!0,noOverflowParent:!0,children:[(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,noOverflowParent:!0,children:(0,d.jsx)(le.m,{value:h,onChange:g,options:[{value:"configuration",label:(0,d.jsx)(b.Trans,{id:"Configuration"})},{value:"behavior-properties",label:(0,d.jsx)(b.Trans,{id:"Behavior properties"})},{value:"scene-properties",label:(0,d.jsx)(b.Trans,{id:"Scene properties"})}]})})}),"configuration"===h&&(0,d.jsx)(AC,{project:r,eventsFunctionsExtension:n,eventsBasedBehavior:t,unsavedChanges:a,onConfigurationUpdated:u}),"behavior-properties"===h&&(0,d.jsx)(HC,{project:r,extension:n,eventsBasedBehavior:t,properties:t.getPropertyDescriptors(),onRenameProperty:i,behaviorObjectType:t.getObjectType(),onPropertiesUpdated:x,onEventsFunctionsAdded:c}),"scene-properties"===h&&(0,d.jsx)(HC,{isSceneProperties:!0,project:r,extension:n,eventsBasedBehavior:t,properties:t.getSharedPropertyDescriptors(),onRenameProperty:o,onPropertiesUpdated:x,onEventsFunctionsAdded:c})]})})}var zC=n.g.gd;function WC(e){var t=e.eventsBasedObject,n=e.unsavedChanges,r=(0,Pt.Z)(),i=l.useCallback((function(){n&&n.triggerUnsavedChanges(),r()}),[r,n]);return(0,d.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[(0,d.jsx)(De.Z,{kind:"warning",children:(0,d.jsx)(b.Trans,{id:"The custom object editor is at a very early stage. A lot of features are missing or broken. Extensions written with it may no longer work in future GDevelop releases."})}),(0,d.jsx)(he.Z,{identifier:"events-based-object-explanation",kind:"info",children:(0,d.jsx)(b.Trans,{id:"This is the configuration of your object. Make sure to choose a proper internal name as it's hard to change it later. Enter a description explaining how the object works."})}),(0,d.jsx)($r.ZP,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Internal Name"}),value:t.getName(),disabled:!0,fullWidth:!0}),(0,d.jsx)(An.Z,{commitOnBlur:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Name displayed in editor"}),value:t.getFullName(),onChange:function(e){t.setFullName(e),i()},fullWidth:!0}),(0,d.jsx)(An.Z,{commitOnBlur:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Description"}),floatingLabelFixed:!0,translatableHintText:{id:"The description of the object should explain what the object is doing, and, briefly, how to use it."},value:t.getDescription(),onChange:function(e){t.setDescription(e),i()},multiline:!0,fullWidth:!0,rows:3}),(0,d.jsx)(An.Z,{commitOnBlur:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Default name for created objects"}),value:t.getDefaultName()||t.getName(),onChange:function(e){t.setDefaultName(zC.Project.getSafeName(e)),i()},fullWidth:!0}),(0,d.jsx)(Wn.Z,{label:(0,d.jsx)(b.Trans,{id:"Use 3D rendering"}),checked:t.isRenderedIn3D(),onCheck:function(e,n){t.markAsRenderedIn3D(n),i()}}),(0,d.jsx)(Wn.Z,{label:(0,d.jsx)(b.Trans,{id:"Has animations"}),checked:t.isAnimatable(),onCheck:function(e,n){t.markAsAnimatable(n),i()}}),(0,d.jsx)(Wn.Z,{label:(0,d.jsx)(b.Trans,{id:"Contains text"}),checked:t.isTextContainer(),onCheck:function(e,n){t.markAsTextContainer(n),i()}}),0===t.getEventsFunctions().getEventsFunctionsCount()&&(0,d.jsx)(he.Z,{identifier:"empty-events-based-object-explanation",kind:"info",children:(0,d.jsx)(b.Trans,{id:"Once you're done, start adding some functions to the object. Then, test the object by adding it to a scene."})}),(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)(Hn.Z,{helpPagePath:"/objects/events-based-objects"},"help")})]})}var GC=n.g.gd,YC={propertiesContainer:{flex:1}},qC=["name","type"],XC=function(e,t,n){return(0,It.Z)(GC.Project.getSafeName(n),(function(e){return!(!t.has(e)&&!qC.includes(e))}))},KC=function(e){return e.getExtraInfo().toJSArray()};function JC(e){var t=e.project,n=e.extension,r=e.eventsBasedObject,i=e.onPropertiesUpdated,o=e.onRenameProperty,a=e.onEventsFunctionsAdded,s=l.useRef(null),c=(0,Pt.Z)(),u=l.useCallback((function(){var e=r.getPropertyDescriptors(),t=(0,It.Z)("Property",(function(t){return e.has(t)}));e.insertNew(t,e.getCount()).setType("Number"),c(),i&&i()}),[r,c,i]),p=l.useCallback((function(e){r.getPropertyDescriptors().remove(e),c(),i&&i()}),[r,c,i]),f=l.useCallback((function(e,t){r.getPropertyDescriptors().move(e,t),c(),i&&i()}),[r,c,i]),h=l.useCallback((function(e){return function(t){var n=KC(e).indexOf(e.getValue()),r=new GC.VectorString;t.forEach((function(e){return r.push_back(e)})),e.setExtraInfo(r),r.delete(),e.setValue(t[n]||""),c()}}),[c]),g=l.useCallback((function(){for(var e=r.getPropertyDescriptors(),t=new Set,n=0;n<e.size();n++){var i=e.at(n).getGroup()||"";t.add(i)}return(0,v.Z)(t).sort((function(e,t){return e.localeCompare(t)}))}),[r]),x=r.getPropertyDescriptors();return(0,d.jsx)(b.I18n,{children:function(e){var m=e.i18n;return(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,useFullHeight:!0,children:(0,d.jsx)(Tt.Z,{ref:s,children:(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsxs)("div",{style:YC.propertiesContainer,children:[(0,Et.mapVector)(x,(function(e,s){return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsxs)(tm.Z,{noPadding:!0,children:[(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,d.jsx)(An.Z,{margin:"none",commitOnBlur:!0,translatableHintText:{id:"Enter the property name"},value:e.getName(),onChange:function(t){if(t!==e.getName()){var n=XC(m,x,t);o(e.getName(),n),e.setName(n),c(),i&&i()}},fullWidth:!0})}),(0,d.jsx)(Xa.Z,{label:e.isHidden()?(0,d.jsx)(b.Trans,{id:"Hidden"}):(0,d.jsx)(b.Trans,{id:"Visible in editor"}),checked:!e.isHidden(),onCheck:function(t,n){e.setHidden(!n),c(),i&&i()},checkedIcon:(0,d.jsx)(Ki.Z,{}),uncheckedIcon:(0,d.jsx)(Ji,{})}),(0,d.jsx)(Ig.Z,{element:(0,d.jsx)(M.Z,{children:(0,d.jsx)(Ls.Z,{})}),buildMenuTemplate:function(i){return[{label:i._({id:"Delete"}),click:function(){return p(e.getName())}},{type:"separator"},{label:i._({id:"Move up"}),click:function(){return f(s,s-1)},enabled:s-1>=0},{label:i._({id:"Move down"}),click:function(){return f(s,s+1)},enabled:s+1<x.getCount()},{label:i._({id:"Generate expression and action"}),click:function(){GC.PropertyFunctionGenerator.generateObjectGetterAndSetter(t,n,r,e),a()},enabled:GC.PropertyFunctionGenerator.canGenerateGetterAndSetter(r,e)}]}})]}),(0,d.jsx)(L.x1,{children:(0,d.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsxs)(K.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Type"}),value:e.getType(),onChange:function(t,n,r){e.setType(r),c(),i&&i()},fullWidth:!0,children:[(0,d.jsx)($.Z,{value:"Number",label:{id:"Number"}}),(0,d.jsx)($.Z,{value:"String",label:{id:"String"}}),(0,d.jsx)($.Z,{value:"Boolean",label:{id:"Boolean (checkbox)"}}),(0,d.jsx)($.Z,{value:"Choice",label:{id:"String from a list of options (text)"}}),(0,d.jsx)($.Z,{value:"Color",label:{id:"Color (text)"}})]}),"Number"===e.getType()&&(0,d.jsx)(K.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Measurement unit"}),value:e.getMeasurementUnit().getName(),onChange:function(t,n,r){e.setMeasurementUnit(GC.MeasurementUnit.getDefaultMeasurementUnitByName(r)),c(),i&&i()},fullWidth:!0,children:(0,Et.mapFor)(0,GC.MeasurementUnit.getDefaultMeasurementUnitsCount(),(function(e){var t=GC.MeasurementUnit.getDefaultMeasurementUnitAtIndex(e),n=(0,qn.j)(t),r=t.getLabel()+(n.length>0?"\u2002\u2014\u2002"+n:"");return(0,d.jsx)($.Z,{value:t.getName(),label:r})}))}),("String"===e.getType()||"Number"===e.getType())&&(0,d.jsx)(An.Z,{commitOnBlur:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Default value"}),hintText:"Number"===e.getType()?"123":"ABC",value:e.getValue(),onChange:function(t){e.setValue(t),c(),i&&i()},fullWidth:!0}),"Boolean"===e.getType()&&(0,d.jsxs)(K.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Default value"}),value:"true"===e.getValue()?"true":"false",onChange:function(t,n,r){e.setValue(r),c(),i&&i()},fullWidth:!0,children:[(0,d.jsx)($.Z,{value:"true",label:{id:"True (checked)"}}),(0,d.jsx)($.Z,{value:"false",label:{id:"False (not checked)"}})]}),"Choice"===e.getType()&&(0,d.jsx)(K.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Default value"}),value:e.getValue(),onChange:function(t,n,r){e.setValue(r),c(),i&&i()},fullWidth:!0,children:KC(e).map((function(e,t){return(0,d.jsx)($.Z,{value:e,label:e},t)}))})]}),"Choice"===e.getType()&&(0,d.jsx)(Um,{extraInfo:KC(e),setExtraInfo:h(e)}),"Color"===e.getType()&&(0,d.jsx)(Jn.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Color"}),disableAlpha:!0,fullWidth:!0,color:e.getValue(),onChange:function(t){e.setValue(t),c(),i&&i()}}),(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsx)(An.Z,{commitOnBlur:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Short label"}),translatableHintText:{id:"Make the purpose of the property easy to understand"},floatingLabelFixed:!0,value:e.getLabel(),onChange:function(t){e.setLabel(t),c()},fullWidth:!0}),(0,d.jsx)(Nu.ZP,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Group name"}),hintText:{id:"Leave it empty to use the default group"},fullWidth:!0,value:e.getGroup(),onChange:function(t){e.setGroup(t),c(),i&&i()},dataSource:g().map((function(e){return{text:e,value:e}})),openOnFocus:!0})]}),(0,d.jsx)(An.Z,{commitOnBlur:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Description"}),translatableHintText:{id:"Optionally, explain the purpose of the property in more details"},floatingLabelFixed:!0,value:e.getDescription(),onChange:function(t){e.setDescription(t),c()},fullWidth:!0})]})})]},s)})),0===x.getCount()?(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"No properties for this object. Add one to store data inside this object (for example: health, ammo, speed, etc...)"})}):null,(0,d.jsx)(L.sg,{children:(0,d.jsx)(L.x1,{justifyContent:"flex-end",expand:!0,children:(0,d.jsx)(T.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Add a property"}),onClick:u,icon:(0,d.jsx)(vt.Z,{})})})})]})})})})}})}var QC=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.66669 5.33337C2.66669 5.05723 2.89054 4.83337 3.16669 4.83337H4.83335C5.1095 4.83337 5.33335 5.05723 5.33335 5.33337C5.33335 5.60952 5.1095 5.83337 4.83335 5.83337H3.16669C2.89054 5.83337 2.66669 5.60952 2.66669 5.33337Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00002 5.33337C8.00002 5.05723 8.22388 4.83337 8.50002 4.83337H12.8334C13.1095 4.83337 13.3334 5.05723 13.3334 5.33337C13.3334 5.60952 13.1095 5.83337 12.8334 5.83337H8.50002C8.22388 5.83337 8.00002 5.60952 8.00002 5.33337Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.66669 4.33337C6.1144 4.33337 5.66669 4.78109 5.66669 5.33337C5.66669 5.88566 6.1144 6.33337 6.66669 6.33337C7.21897 6.33337 7.66669 5.88566 7.66669 5.33337C7.66669 4.78109 7.21897 4.33337 6.66669 4.33337ZM4.66669 5.33337C4.66669 4.2288 5.56212 3.33337 6.66669 3.33337C7.77126 3.33337 8.66669 4.2288 8.66669 5.33337C8.66669 6.43794 7.77126 7.33337 6.66669 7.33337C5.56212 7.33337 4.66669 6.43794 4.66669 5.33337Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.66669 10.6667C2.66669 10.3906 2.89054 10.1667 3.16669 10.1667H8.16669C8.44283 10.1667 8.66669 10.3906 8.66669 10.6667C8.66669 10.9428 8.44283 11.1667 8.16669 11.1667H3.16669C2.89054 11.1667 2.66669 10.9428 2.66669 10.6667Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3334 10.6667C11.3334 10.3906 11.5572 10.1667 11.8334 10.1667H12.8334C13.1095 10.1667 13.3334 10.3906 13.3334 10.6667C13.3334 10.9428 13.1095 11.1667 12.8334 11.1667H11.8334C11.5572 11.1667 11.3334 10.9428 11.3334 10.6667Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 9.66671C9.44774 9.66671 9.00002 10.1144 9.00002 10.6667C9.00002 11.219 9.44774 11.6667 10 11.6667C10.5523 11.6667 11 11.219 11 10.6667C11 10.1144 10.5523 9.66671 10 9.66671ZM8.00002 10.6667C8.00002 9.56214 8.89545 8.66671 10 8.66671C11.1046 8.66671 12 9.56214 12 10.6667C12 11.7713 11.1046 12.6667 10 12.6667C8.89545 12.6667 8.00002 11.7713 8.00002 10.6667Z",fill:"currentColor"})]}))})),$C=n(84140),ej=n(39818),tj=n(84090),nj={container:{position:"relative",display:"inline-block"},picker:{position:"absolute",right:"8px",top:"19px"},pickerNoLabel:{position:"absolute",right:"8px",top:"8px"}},rj=function(e){return/^#{0,1}[0-9a-fA-F]{6}$/.test(e)?(0,Qn.f5)(e):null},ij=function(e){var t,n,r=e.fullWidth,i=e.disableAlpha,o=e.id,c=e.floatingLabelText,u=e.helperMarkdownText,p=e.onChange,f=e.color,h=l.useState(f?(0,Qn.TU)(f.r,f.g,f.b):""),g=(0,s.Z)(h,2),x=g[0],m=g[1];t=f,n=rj(x),(t&&(0,Qn.Y9)(t.r,t.g,t.b))!==(n&&(0,Qn.Y9)(n.r,n.g,n.b))&&m(f?(0,Qn.TU)(f.r,f.g,f.b):"");var v=function(e){var t=rj(x),n=rj(e);m(e),n!==t&&p(n)};return(0,d.jsxs)("div",{style:(0,a.Z)((0,a.Z)({},nj.container),{},{width:r?"100%":void 0}),children:[(0,d.jsx)($r.ZP,{id:o,fullWidth:i,floatingLabelText:c,floatingLabelFixed:!0,helperMarkdownText:u,type:"text",hintText:"#ff8844",value:x,onChange:function(e){return v(e.target.value)}}),(0,d.jsx)("div",{style:c?nj.picker:nj.pickerNoLabel,children:(0,d.jsx)(If.Z,{disableAlpha:!0,onChangeComplete:function(e){m((0,Qn.TU)(e.rgb.r,e.rgb.g,e.rgb.b)),p(e.rgb)},color:rj(x)})})]})},oj=n(91153),aj=function(e){var t=e.filterKey,n=e.title,r=e.choices,i=e.isChoiceChecked,o=e.setChoiceChecked;return(0,d.jsx)(b.I18n,{children:function(e){var a=e.i18n;return(0,d.jsxs)(si.UQ,{defaultExpanded:!0,children:[(0,d.jsx)(si._m,{children:(0,d.jsx)(F.Z,{displayInlineAsSpan:!0,children:n})}),(0,d.jsx)(si.X1,{children:(0,d.jsx)(C.ak,{children:r.map((function(e){return(0,d.jsx)(Xa.Z,{label:a._(e.label),checked:i(e.value),onCheck:function(t,n){return o(e.value,n)}},e.value)}))})})]},t)}})},sj=function(e){var t=e.filterKey,n=e.title,r=e.choices,i=e.values,o=e.setValues;return(0,d.jsx)(aj,{filterKey:t,title:n,choices:r,isChoiceChecked:function(e){return i.has(e)},setChoiceChecked:function(e,t){t?i.add(e):i.delete(e),o(i)}})},lj=function(e){var t=e.filterKey,n=e.title,r=e.choices,i=e.searchFilter,o=e.setSearchFilter,a=e.onFilterChange;return(0,d.jsx)(sj,{filterKey:t,title:n,choices:r,values:i.tags,setValues:function(e){o(new ej.GI(e)),a()}})},cj=function(e){var t=e.filterKey,n=e.title,r=e.min,i=e.max,o=e.scale,a=e.step,s=e.range,l=e.setRange;return(0,d.jsx)(b.I18n,{children:function(e){e.i18n;return(0,d.jsxs)(si.UQ,{defaultExpanded:!0,children:[(0,d.jsx)(si._m,{children:(0,d.jsx)(F.Z,{displayInlineAsSpan:!0,children:n})}),(0,d.jsx)(si.X1,{children:(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)(oj.Z,{value:s,min:r,max:i,step:a,scale:o,marks:!0,valueLabelDisplay:"auto",onChange:function(e){return l(e)}})})})})]},t)}})},uj=function(e){var t=e.filterKey,n=e.title,r=e.color,i=e.setColor;return(0,d.jsx)(b.I18n,{children:function(e){e.i18n;return(0,d.jsxs)(si.UQ,{defaultExpanded:!0,children:[(0,d.jsx)(si._m,{children:(0,d.jsx)(F.Z,{displayInlineAsSpan:!0,children:n})}),(0,d.jsx)(si.X1,{children:(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)(ij,{disableAlpha:!0,fullWidth:!0,color:r,onChange:i})})})})]},t)}})},dj=function(){var e=l.useContext(tj.KY),t=e.assetFiltersState,n=e.assetPackFiltersState,r=e.clearAllFilters,i=e.shopNavigationState,o=l.useContext(tr.ZP).receivedAssetPacks,a=l.useCallback((function(){i.openSearchResultPage()}),[i]);return(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(aj,{filterKey:"PackType",title:(0,d.jsx)(b.Trans,{id:"Pack type"}),choices:[{label:{id:"Free"},value:"free"},{label:{id:"Premium"},value:"premium"},{label:{id:"Owned"},value:"owned"}],isChoiceChecked:function(e){return"free"===e&&n.typeFilter.isFree||"premium"===e&&n.typeFilter.isPremium||"owned"===e&&n.typeFilter.isOwned},setChoiceChecked:function(e,t){var r=n.typeFilter,i="free"===e?t:r.isFree,s="premium"===e?t:r.isPremium,l="owned"===e?t:r.isOwned;n.setTypeFilter(new ej.lz({isFree:i,isPremium:s,isOwned:l,receivedAssetPacks:o})),a()}}),(0,d.jsx)(aj,{filterKey:"Animation",title:(0,d.jsx)(b.Trans,{id:"Animation"}),choices:[{label:{id:"Multiple frames"},value:"multiple-frames"},{label:{id:"Multiple states"},value:"multiple-states"}],isChoiceChecked:function(e){return"multiple-frames"===e&&t.animatedFilter.mustBeAnimated||"multiple-states"===e&&t.animatedFilter.mustHaveSeveralState},setChoiceChecked:function(e,n){var r=t.animatedFilter,i="multiple-frames"===e?n:r.mustBeAnimated,o="multiple-states"===e?n:r.mustHaveSeveralState;t.setAnimatedFilter(new ej.FL(i,o)),a()}}),(0,d.jsx)(lj,{filterKey:"Viewpoint",title:(0,d.jsx)(b.Trans,{id:"Viewpoint"}),choices:[{label:{id:"Top-down"},value:"top-down"},{label:{id:"Side view"},value:"side view"},{label:{id:"Isometric"},value:"isometric"}],searchFilter:t.viewpointFilter,setSearchFilter:t.setViewpointFilter,onFilterChange:a}),(0,d.jsx)(cj,{filterKey:"PixelSize",title:(0,d.jsx)(b.Trans,{id:"Pixel size"}),min:Math.log2(ej.C9.boundMin),max:Math.log2(ej.C9.boundMax),step:.5,scale:function(e){return Math.round(Math.pow(2,e))},range:[Math.log2(t.dimensionFilter.dimensionMin),Math.log2(t.dimensionFilter.dimensionMax)],setRange:function(e){t.setDimensionFilter(new ej.C9(Math.pow(2,e[0]),Math.pow(2,e[1]))),a()}}),(0,d.jsx)(sj,{filterKey:"ObjectType",title:(0,d.jsx)(b.Trans,{id:"Type of objects"}),choices:[{label:{id:"Sprite"},value:"sprite"},{label:{id:"Tiled sprite"},value:"tiled"},{label:{id:"Panel sprite"},value:"9patch"},{label:{id:"3D model"},value:"Scene3D::Model3DObject"}],values:t.objectTypeFilter.objectTypes,setValues:function(e){t.setObjectTypeFilter(new ej.Jk(e)),a()}}),(0,d.jsx)(uj,{filterKey:"Color",title:(0,d.jsx)(b.Trans,{id:"Color"}),color:t.colorFilter.color,setColor:function(e){t.setColorFilter(new ej.ad(e)),a()}}),(0,d.jsx)(aj,{filterKey:"License",title:(0,d.jsx)(b.Trans,{id:"License"}),choices:[{label:{id:"Exclude attribution requirements"},value:"without-attribution"}],isChoiceChecked:function(e){return t.licenseFilter.attributionFreeOnly},setChoiceChecked:function(e,n){t.setLicenseFilter(new ej.t3(n)),a()}}),(0,d.jsx)(L.x1,{justifyContent:"center",children:(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Clear all filters"}),primary:!1,onClick:function(){r(),a()}})})]})},pj=n(35038),fj=function(e,t,n,r){for(var i=0,o=0,a=[];i<e.length||o<t.length;){var s=e.slice(i,i+n),l=t.slice(o,o+r);i+=n,o+=r,s.forEach((function(e){return a.push(e)})),l.forEach((function(e){return a.push(e)}))}return a},hj=n(65522),gj=n.n(hj),xj=n(16021),mj=n(10008),vj=n(31226),bj=n(15859),Cj=n(39909),jj=n(58893),yj=n(76683),Zj={previewContainer:{display:"flex",justifyContent:"center",alignItems:"center"},previewImage:{position:"relative",objectFit:"contain",verticalAlign:"middle",pointerEvents:"none"},previewImagePixelated:{width:"100%",imageRendering:(0,Cj.g)(),padding:15},icon:{color:"#fff"},cardContainer:{overflow:"hidden",position:"relative",borderRadius:8},titleContainer:{position:"absolute",bottom:0,left:0,right:0,color:"#fff",backgroundColor:"rgb(0,0,0,0.5)",display:"inline-block",textAlign:"center",flexDirection:"column"},title:(0,a.Z)((0,a.Z)({},B.t),{},{overflowWrap:"break-word"})},kj=function(e){var t=e.id,n=e.assetShortHeader,r=e.size,i=n.previewImageUrls[0],o=(0,$C.kt)(n),s=(0,a.Z)((0,a.Z)({maxWidth:108,maxHeight:108},Zj.previewImage),(0,$C.V0)(n)?Zj.previewImagePixelated:void 0);return(0,d.jsxs)("div",{id:t,style:(0,a.Z)((0,a.Z)({},Zj.cardContainer),{},{width:r,height:r}),children:[(0,d.jsxs)("div",{style:(0,a.Z)((0,a.Z)({},Zj.previewContainer),{},{width:r,height:r}),children:[(0,d.jsx)(jj.Z,{}),o?(0,d.jsx)(yj.Z,{style:s,url:i,alt:n.name},i):(0,d.jsx)(Hg.W,{style:s,src:i,alt:n.name},i)]}),(0,d.jsxs)("div",{style:(0,a.Z)((0,a.Z)({},Zj.titleContainer),{},{height:n.shortDescription?40:20}),children:[(0,d.jsx)(F.Z,{noMargin:!0,style:Zj.title,color:"inherit",children:n.name}),n.shortDescription&&(0,d.jsx)(F.Z,{noMargin:!0,style:Zj.title,size:"body2",color:"inherit",children:n.shortDescription})]})]})},wj={priceTagContainer:{position:"absolute",top:10,left:10,cursor:"default"},previewImage:{width:"100%",aspectRatio:"16 / 9",objectFit:"cover",position:"relative"},thumbnailContainer:{position:"relative",display:"flex",flexDirection:"column"},redeemableContainer:{position:"absolute",bottom:0,left:0,right:0,display:"flex",justifyContent:"center",alignItems:"center",padding:"4px 8px",backgroundColor:"#FF8569",color:"#1D1D26"},redeemableDiamondIcon:{height:24},promoImage:{width:"20%",minWidth:200,margin:4},paper:{margin:4,display:"flex",flexDirection:"column"},packTitle:(0,a.Z)((0,a.Z)({},B.t),{},{overflowWrap:"break-word"}),folderTitle:{marginLeft:8},folderPaper:{height:55},folderIcon:{width:32,height:32},promoLineContainer:{borderRadius:8,padding:2,flex:1},promoImageContainer:{display:"flex",flex:0,justifyContent:"center"}},Tj=(0,vj.Z)((function(e){return(0,mj.Z)({root:{"&:focus":{outline:"1px solid ".concat(e.palette.primary.light)},"&:hover":{outline:"1px solid ".concat(e.palette.primary.light)}}})})),Sj=function(e){var t=e.assetShortHeader,n=e.onOpenDetails,r=e.size,i=e.margin,o=Tj();return(0,d.jsx)(xj.Z,{classes:o,tabIndex:0,onKeyPress:function(e){(0,kn.ph)(e)&&n()},onClick:n,style:{margin:i},children:(0,d.jsx)(kj,{id:"asset-card-".concat(t.name.replace(/\s/g,"-")),assetShortHeader:t,size:r})})},Pj=function(e){var t=e.tag,n=e.onSelect,r=e.style,i=Tj();return(0,d.jsx)(xj.Z,{classes:i,tabIndex:0,onKeyPress:function(e){(0,kn.ph)(e)&&n()},style:r,onClick:n,children:(0,d.jsx)(L.sg,{noMargin:!0,id:"asset-folder-".concat(t.replace(/\s/g,"-")),children:(0,d.jsxs)(L.x1,{alignItems:"center",children:[(0,d.jsx)(Is,{style:wj.folderIcon}),(0,d.jsx)(F.Z,{noMargin:!0,style:wj.folderTitle,size:"sub-title",children:gj()(t)})]})})})},Ej=function(e){var t=e.assetPack,n=e.onSelect,r=e.style,i=Tj();return(0,d.jsx)(xj.Z,{classes:i,tabIndex:0,onKeyPress:function(e){(0,kn.ph)(e)&&n()},style:r,onClick:n,children:(0,d.jsxs)(de.Z,{id:"asset-pack-".concat(t.tag.replace(/\s/g,"-")),elevation:2,style:wj.paper,background:"light",children:[(0,d.jsx)(Hg.W,{style:wj.previewImage,src:t.thumbnailUrl,alt:"Preview image of asset pack ".concat(t.name)},t.name),(0,d.jsx)(L.sg,{children:(0,d.jsxs)(L.x1,{justifyContent:"space-between",noMargin:!0,children:[(0,d.jsx)(F.Z,{style:wj.packTitle,size:"body2",children:t.name}),(0,d.jsxs)(F.Z,{style:wj.packTitle,color:"primary",size:"body2",children:[(0,d.jsx)(b.Trans,{id:"{0} Assets",values:{0:t.assetsCount}}),t.userFriendlyPrice?" - "+t.userFriendlyPrice:null]})]})})]})})},Ij=function(e){var t=e.assetPackListingData,n=e.onSelect,r=e.style,i=e.owned,o=Tj();return(0,d.jsx)(xj.Z,{classes:o,tabIndex:0,onKeyPress:function(e){(0,kn.ph)(e)&&n()},style:r,onClick:n,children:(0,d.jsxs)(de.Z,{elevation:2,style:wj.paper,background:"light",children:[(0,d.jsxs)("div",{style:wj.thumbnailContainer,children:[(0,d.jsx)(Hg.W,{style:wj.previewImage,src:t.thumbnailUrls[0],alt:"Preview image of asset pack ".concat(t.name)},t.name),t.redeemConditions&&!i&&(0,d.jsxs)("div",{style:wj.redeemableContainer,children:[(0,d.jsx)("img",{src:"res/small-diamond.svg",style:wj.redeemableDiamondIcon,alt:"diamond"}),(0,d.jsx)(F.Z,{color:"inherit",noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Claim this pack"})})]})]}),(0,d.jsx)("div",{style:wj.priceTagContainer,children:(0,d.jsx)(bj.ZP,{productListingData:t,withOverlay:!0,owned:i})}),(0,d.jsx)(L.sg,{children:(0,d.jsxs)(L.x1,{justifyContent:"space-between",noMargin:!0,children:[(0,d.jsx)(F.Z,{style:wj.packTitle,size:"body2",children:t.name}),(0,d.jsx)(F.Z,{style:wj.packTitle,color:"primary",size:"body2",children:t.description})]})})]})})},Mj=function(e){var t=e.productListingData,n=e.onSelect,r=e.owned,i=l.useContext(f.Z);return(0,d.jsx)(b.I18n,{children:function(e){var o=e.i18n;return(0,d.jsx)(L.x1,{expand:!0,children:(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},wj.promoLineContainer),{},{border:"2px solid ".concat(i.palette.secondary)}),children:(0,d.jsxs)(C.ep,{expand:!0,noMargin:!0,children:[(0,d.jsx)("div",{style:wj.promoImageContainer,children:(0,d.jsx)(Hg.W,{style:(0,a.Z)((0,a.Z)({},wj.previewImage),wj.promoImage),src:t.thumbnailUrls[0],alt:"Preview image of bundle ".concat(t.name)},t.name)}),(0,d.jsxs)(L.sg,{expand:!0,alignItems:"flex-start",justifyContent:"center",children:[(0,d.jsx)(F.Z,{color:"primary",size:"section-title",children:r?"ASSET_PACK"===t.productType?(0,d.jsx)(b.Trans,{id:"You already own this pack!"}):(0,d.jsx)(b.Trans,{id:"You already own this template!"}):(0,d.jsx)(b.Trans,{id:"Get {0}!",values:{0:t.description}})}),(0,d.jsx)(F.Z,{color:"primary",size:"body2",children:r?(0,d.jsx)(b.Trans,{id:"It is included in the bundle {0}.",values:{0:t.name}}):"ASSET_PACK"===t.productType?(0,d.jsx)(b.Trans,{id:"This pack is included in this bundle for {0} !",values:{0:(0,bj.e3)({i18n:o,productListingData:t,plainText:!0})}}):(0,d.jsx)(b.Trans,{id:"This template is included in this bundle for {0} !",values:{0:(0,bj.e3)({i18n:o,productListingData:t,plainText:!0})}})})]}),(0,d.jsx)(L.sg,{justifyContent:"center",children:(0,d.jsx)(L.x1,{justifyContent:"center",children:r?(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"See this bundle"}),onClick:n,primary:!0}):(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"See this bundle"}),onClick:n,primary:!0})})})]})})})}})},Lj=function(e){var t=e.id,n=e.title,r=e.imageSource,i=e.imageAlt,o=e.onSelect,s=e.style,c=Tj(),u=l.useContext(f.Z);return(0,d.jsx)(xj.Z,{classes:c,tabIndex:0,onKeyPress:function(e){(0,kn.ph)(e)&&o()},style:s,onClick:o,children:(0,d.jsxs)(de.Z,{id:t,elevation:2,style:wj.paper,background:"light",children:[(0,d.jsx)(Hg.W,{style:(0,a.Z)((0,a.Z)({},wj.previewImage),{},{background:u.palette.primary}),src:r,alt:i}),(0,d.jsx)(L.sg,{children:(0,d.jsx)(L.x1,{justifyContent:"center",noMargin:!0,children:(0,d.jsx)(F.Z,{style:wj.packTitle,size:"sub-title",children:n})})})]})})},Aj=function(e){var t=e.privateGameTemplateListingData,n=e.onSelect,r=e.style,i=e.owned,o=Tj();return(0,d.jsx)(xj.Z,{classes:o,tabIndex:0,onKeyPress:function(e){(0,kn.ph)(e)&&n()},style:r,onClick:n,children:(0,d.jsxs)(de.Z,{elevation:2,style:wj.paper,background:"light",children:[(0,d.jsx)(Hg.W,{style:wj.previewImage,src:t.thumbnailUrls[0],alt:"Preview image of game template ".concat(t.name)},t.name),(0,d.jsx)("div",{style:wj.priceTagContainer,children:(0,d.jsx)(bj.ZP,{productListingData:t,withOverlay:!0,owned:i})}),(0,d.jsx)(L.sg,{children:(0,d.jsx)(L.x1,{justifyContent:"flex-start",noMargin:!0,children:(0,d.jsx)(F.Z,{style:wj.packTitle,size:"body2",children:t.name})})})]})})},Fj=function(e){var t=e.exampleShortHeader,n=e.onSelect,r=e.style,i=Tj();return(0,d.jsx)(xj.Z,{classes:i,tabIndex:0,onKeyPress:function(e){(0,kn.ph)(e)&&n()},style:r,onClick:n,children:(0,d.jsxs)(de.Z,{elevation:2,style:wj.paper,background:"light",children:[(0,d.jsx)(Hg.W,{style:wj.previewImage,src:t.previewImageUrls?t.previewImageUrls[0]:"",alt:"Preview image of example ".concat(t.name)},t.name),(0,d.jsx)(L.sg,{children:(0,d.jsx)(L.x1,{justifyContent:"flex-start",noMargin:!0,children:(0,d.jsx)(F.Z,{style:wj.packTitle,size:"body2",children:t.name})})})]})})},Oj=n(96210),Rj=function(e){var t=e.promotion,n=e.navigateToRoute,r=t.productId;if(r){if("game-template"===t.type)return function(){return n("store",{"game-template":"product-".concat(r)})};if("asset-pack"===t.type)return function(){return n("store",{"asset-pack":"product-".concat(r)})}}var i=t.linkUrl;if(i)return function(){return Y.ZP.openExternalURL(i)}},Dj=n(48784),_j={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"absolute",borderRadius:4},Bj=function(e){var t=e.onClick,n=e.position,r=e.classes,i=l.useContext(f.Z);return(0,d.jsx)("div",{className:r.root,style:(0,a.Z)((0,a.Z)((0,a.Z)({},_j),{},{backgroundColor:i.paper.backgroundColor.light,width:30,height:30},"left"===n?{left:5}:{right:5}),{},{zIndex:3,top:"calc(50% - ".concat(Math.floor(15),"px)")}),onClick:t,tabIndex:0,onKeyUp:function(e){(0,kn.ph)(e)&&(t(),e.stopPropagation())},children:"left"===n?(0,d.jsx)(Co.Z,{}):(0,d.jsx)(Ct.Z,{})})},Nj=n(51265),Uj={skeletonContainer:{display:"flex",flex:1},itemSkeleton:{borderRadius:6},slidesContainer:{display:"flex",flex:1,position:"relative",overflow:"hidden",width:"100%",borderRadius:6},slideImage:{position:"absolute",width:"100%",height:"100%",objectFit:"cover",borderRadius:6,transition:"opacity 0.5s ease-in-out, transform 0.3s ease-in-out"}},Hj=function(e){var t=e.items,n=e.itemDesktopRatio,r=e.itemMobileRatio,i=e.additionalMarginForWidthCalculation;(0,Nj.Z)((0,Pt.Z)());var o=window.innerWidth,c=(0,R.Z)((function(e){return(0,D.Z)({root:{"&:hover":{filter:"dark"===e.palette.type?"brightness(130%)":"brightness(90%)"},"&:focus":{filter:"dark"===e.palette.type?"brightness(130%)":"brightness(90%)",outline:"none"},transition:"filter 100ms ease"}})}))(),u=(0,w.U)(),p=u.isMobile,f=u.isLandscape,h=p&&!f,g="touch"===(0,Gr.BF)(),x=function(e){var t=e.useMobileImage,n=e.componentWidth,r=e.itemDesktopRatio,i=e.itemMobileRatio,o=n-2*L.XW;return t?o/i:o/r}({useMobileImage:h,componentWidth:o-(i||0),itemDesktopRatio:n,itemMobileRatio:r}),m=(0,R.Z)((function(e){return(0,D.Z)({root:{"&:hover img":{transform:"scale(1.02)"},"&:focus":{outline:"none"},"&:focus img":{transform:"scale(1.02)",outline:"none"}}})}))(),v=l.useState(!1),b=(0,s.Z)(v,2),C=b[0],j=b[1],y=l.useRef(null),Z=l.useRef(null),k=l.useState(0),T=(0,s.Z)(k,2),S=T[0],P=T[1],E=l.useCallback((function(){t&&1!==t.length&&(Z.current&&(clearTimeout(Z.current),Z.current=null),P(0===S?t.length-1:S-1))}),[t,S]),I=l.useCallback((function(){t&&1!==t.length&&(Z.current&&(clearTimeout(Z.current),Z.current=null),P(S===t.length-1?0:S+1))}),[t,S]);l.useEffect((function(){return Z.current=setTimeout((function(){I()}),5e3),function(){clearTimeout(Z.current),Z.current=null}}),[I]);var M=l.useCallback((function(){y.current&&(clearTimeout(y.current),y.current=null),C||j(!0)}),[C]),A=l.useCallback((function(){C&&!y.current&&(y.current=setTimeout((function(){j(!1)}),1e3))}),[C]);if(!t)return(0,d.jsx)(de.Z,{square:!0,background:"dark",children:(0,d.jsx)(L.x1,{expand:!0,noMargin:!0,children:(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,d.jsx)(Dj.Z,{variant:"rect",height:x,style:Uj.itemSkeleton})})})});if(!t.length)return null;var F=t.length>1&&(C||p||g);return(0,d.jsx)(de.Z,{square:!0,background:"dark",children:(0,d.jsxs)("div",{style:(0,a.Z)((0,a.Z)({},Uj.slidesContainer),{},{height:x}),onPointerOver:M,onPointerLeave:A,tabIndex:0,onKeyUp:function(e){if((0,kn.ph)(e)){var n=t[S];n&&n.onClick&&n.onClick()}else!function(e){return"ArrowLeft"===e.key}(e)?function(e){return"ArrowRight"===e.key}(e)&&I():E()},onFocus:M,onBlur:A,className:m.root,children:[F&&(0,d.jsx)(Bj,{onClick:E,position:"left",classes:c}),t.map((function(e,t){return(0,d.jsx)("img",{src:h?e.mobileImageUrl:e.imageUrl,alt:"Slideshow item for ".concat(e.id),style:(0,a.Z)((0,a.Z)({},Uj.slideImage),{},{aspectRatio:h?r:n},t===S?{opacity:1,zIndex:2}:{opacity:0,zIndex:1}),onClick:e.onClick},e.id)})),F&&(0,d.jsx)(Bj,{onClick:I,position:"right",classes:c})]})})},Vj=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.80029 10.1735C8.61239 9.97112 8.62411 9.65475 8.82646 9.46685L10.7652 7.66658L8.82646 5.86631C8.62411 5.67841 8.61239 5.36205 8.80029 5.15969C8.98819 4.95734 9.30456 4.94562 9.50692 5.13352L11.8402 7.30019C11.9421 7.39479 12 7.52755 12 7.66658C12 7.80562 11.9421 7.93837 11.8402 8.03298L9.50691 10.1996C9.30456 10.3875 8.98819 10.3758 8.80029 10.1735Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.13361 10.1735C4.9457 9.97112 4.95742 9.65475 5.15978 9.46685L7.09853 7.66658L5.15978 5.86631C4.95742 5.67841 4.9457 5.36205 5.13361 5.15969C5.32151 4.95734 5.63787 4.94562 5.84023 5.13352L8.17356 7.30019C8.27545 7.39479 8.33334 7.52755 8.33334 7.66658C8.33334 7.80562 8.27545 7.93837 8.17356 8.03298L5.84023 10.1996C5.63787 10.3875 5.32151 10.3758 5.13361 10.1735Z",fill:"currentColor"})]}))})),zj={button:{justifyContent:"start",minWidth:0,minHeight:30,padding:"4px 6px",fontWeight:400,transition:"none"},buttonWithoutLabel:{marginTop:10,justifyContent:"center"},iconWrapperWithoutLabel:{justifyContent:"center",display:"flex"},iconWrapperWithLabel:{padding:"3px 8px",justifyContent:"center",display:"flex"}},Wj=function(e){var t=e.label,n=e.getIcon,r=e.onClick,i=e.isActive,o=e.hideLabel,s=e.id;return(0,d.jsxs)(Wr.Z,{variant:i?"contained":"text",size:"small",style:(0,a.Z)((0,a.Z)({},zj.button),o?zj.buttonWithoutLabel:{}),fullWidth:!0,onClick:r,color:i?"primary":"default",id:s,disableElevation:!0,children:[(0,d.jsx)("div",{style:o?zj.iconWrapperWithoutLabel:zj.iconWrapperWithLabel,children:n({color:i?"inherit":"secondary",fontSize:"small"})}),!o&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.LZ,{}),(0,d.jsx)("span",{children:t})]})]})},Gj=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"-2 -1 16 16",fill:"none",children:(0,d.jsx)("path",{d:"M6.48609 4C7.19334 4 7.87161 4.28095 8.37171 4.78105C8.87181 5.28115 9.15276 5.95942 9.15276 6.66667C9.15276 7.37391 8.87181 8.05219 8.37171 8.55229C7.87161 9.05238 7.19334 9.33333 6.48609 9.33333C5.77885 9.33333 5.10057 9.05238 4.60048 8.55229C4.10038 8.05219 3.81943 7.37391 3.81943 6.66667C3.81943 5.95942 4.10038 5.28115 4.60048 4.78105C5.10057 4.28095 5.77885 4 6.48609 4ZM6.48609 5.33333C6.13247 5.33333 5.79333 5.47381 5.54328 5.72386C5.29324 5.97391 5.15276 6.31304 5.15276 6.66667C5.15276 7.02029 5.29324 7.35943 5.54328 7.60948C5.79333 7.85952 6.13247 8 6.48609 8C6.83972 8 7.17885 7.85952 7.4289 7.60948C7.67895 7.35943 7.81943 7.02029 7.81943 6.66667C7.81943 6.31304 7.67895 5.97391 7.4289 5.72386C7.17885 5.47381 6.83972 5.33333 6.48609 5.33333ZM5.15276 13.3333C4.98609 13.3333 4.84609 13.2133 4.81943 13.0533L4.57276 11.2867C4.15276 11.12 3.79276 10.8933 3.44609 10.6267L1.78609 11.3C1.63943 11.3533 1.45943 11.3 1.37943 11.1533L0.0460937 8.84667C0.00529077 8.77798 -0.00909376 8.69677 0.00563013 8.61825C0.020354 8.53972 0.0631781 8.46924 0.126094 8.42L1.53276 7.31333L1.48609 6.66667L1.53276 6L0.126094 4.91333C0.0631781 4.86409 0.020354 4.79361 0.00563013 4.71509C-0.00909376 4.63656 0.00529077 4.55536 0.0460937 4.48667L1.37943 2.18C1.45943 2.03333 1.63943 1.97333 1.78609 2.03333L3.44609 2.7C3.79276 2.44 4.15276 2.21333 4.57276 2.04667L4.81943 0.28C4.84609 0.12 4.98609 0 5.15276 0H7.81943C7.98609 0 8.12609 0.12 8.15276 0.28L8.39943 2.04667C8.81943 2.21333 9.17943 2.44 9.52609 2.7L11.1861 2.03333C11.3328 1.97333 11.5128 2.03333 11.5928 2.18L12.9261 4.48667C13.0128 4.63333 12.9728 4.81333 12.8461 4.91333L11.4394 6L11.4861 6.66667L11.4394 7.33333L12.8461 8.42C12.9728 8.52 13.0128 8.7 12.9261 8.84667L11.5928 11.1533C11.5128 11.3 11.3328 11.36 11.1861 11.3L9.52609 10.6333C9.17943 10.8933 8.81943 11.12 8.39943 11.2867L8.15276 13.0533C8.12609 13.2133 7.98609 13.3333 7.81943 13.3333H5.15276ZM5.98609 1.33333L5.73943 3.07333C4.93943 3.24 4.23276 3.66667 3.71943 4.26L2.11276 3.56667L1.61276 4.43333L3.01943 5.46667C2.75276 6.24444 2.75276 7.08889 3.01943 7.86667L1.60609 8.90667L2.10609 9.77333L3.72609 9.08C4.23943 9.66667 4.93943 10.0933 5.73276 10.2533L5.97943 12H6.99276L7.23943 10.26C8.03276 10.0933 8.73276 9.66667 9.24609 9.08L10.8661 9.77333L11.3661 8.90667L9.95276 7.87333C10.2194 7.09333 10.2194 6.24667 9.95276 5.46667L11.3594 4.43333L10.8594 3.56667L9.25276 4.26C8.72891 3.65355 8.01832 3.23845 7.23276 3.08L6.98609 1.33333H5.98609Z",fill:"currentColor"})}))})),Yj=n(24893),qj=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.19971 5.15978C7.38761 5.36213 7.37589 5.6785 7.17354 5.8664L5.23478 7.66667L7.17354 9.46694C7.37589 9.65484 7.38761 9.97121 7.19971 10.1736C7.01181 10.3759 6.69544 10.3876 6.49309 10.1997L4.15975 8.03307C4.05787 7.93846 3.99998 7.8057 3.99998 7.66667C3.99998 7.52763 4.05787 7.39488 4.15975 7.30027L6.49309 5.13361C6.69544 4.9457 7.01181 4.95742 7.19971 5.15978Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.8664 5.15978C11.0543 5.36213 11.0426 5.6785 10.8402 5.8664L8.90147 7.66667L10.8402 9.46694C11.0426 9.65484 11.0543 9.97121 10.8664 10.1736C10.6785 10.3759 10.3621 10.3876 10.1598 10.1997L7.82644 8.03307C7.72456 7.93846 7.66666 7.8057 7.66666 7.66667C7.66666 7.52763 7.72456 7.39488 7.82644 7.30027L10.1598 5.13361C10.3621 4.9457 10.6785 4.95742 10.8664 5.15978Z",fill:"currentColor"})]}))})),Xj=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,d.jsx)("path",{fill:"currentColor",d:"M9.86003 7.08L2.33336 14.6L1.40002 13.6667L8.92002 6.14L9.86003 7.08ZM12.8467 5.15333L13.24 4.76L12.7134 4.23333L13.14 3.80666L12.1934 2.86L11.7667 3.28666L11.24 2.76L10.8467 3.15333C9.68669 2.20666 8.38002 1.44666 6.98003 0.91333L6.42669 2.10666C7.59336 2.72 8.66669 3.46 9.66669 4.33333L9.33336 4.66666L11.3334 6.66666L11.6667 6.33333C12.54 7.33333 13.28 8.40666 13.8934 9.57333L15.0867 9.02C14.5534 7.62 13.7934 6.31333 12.8467 5.15333Z"})}))})),Kj=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,d.jsx)("path",{fill:"currentColor",d:"M7.99996 2L0.666626 6L3.33329 7.45333V11.4533L7.99996 14L12.6666 11.4533V7.45333L14 6.72667V11.3333H15.3333V6L7.99996 2ZM12.5466 6L7.99996 8.48L3.45329 6L7.99996 3.52L12.5466 6ZM11.3333 10.6667L7.99996 12.48L4.66663 10.6667V8.18L7.99996 10L11.3333 8.18V10.6667Z"})}))})),Jj=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,d.jsx)("path",{fill:"currentColor",d:"M5.31331 10.6667L3.33331 12.6667C3.11331 12.8667 2.81998 13 2.49998 13C2.19056 13 1.89381 12.8771 1.67502 12.6583C1.45623 12.4395 1.33331 12.1428 1.33331 11.8333V11.6667L1.99998 6.74667C2.06719 5.99709 2.41221 5.29972 2.96729 4.79151C3.52237 4.2833 4.24739 4.00099 4.99998 4H11C12.5733 4 13.86 5.20667 14 6.74667L14.6666 11.6667V11.8333C14.6666 12.1428 14.5437 12.4395 14.3249 12.6583C14.1061 12.8771 13.8094 13 13.5 13C13.18 13 12.8866 12.8667 12.6666 12.6667L10.6866 10.6667H5.31331ZM4.66665 5.33333V6.66667H3.33331V7.33333H4.66665V8.66667H5.33331V7.33333H6.66665V6.66667H5.33331V5.33333H4.66665ZM11 5.33333C10.8674 5.33333 10.7402 5.38601 10.6464 5.47978C10.5527 5.57355 10.5 5.70073 10.5 5.83333C10.5 5.96594 10.5527 6.09312 10.6464 6.18689C10.7402 6.28065 10.8674 6.33333 11 6.33333C11.1326 6.33333 11.2598 6.28065 11.3535 6.18689C11.4473 6.09312 11.5 5.96594 11.5 5.83333C11.5 5.70073 11.4473 5.57355 11.3535 5.47978C11.2598 5.38601 11.1326 5.33333 11 5.33333ZM9.83331 6.5C9.7007 6.5 9.57353 6.55268 9.47976 6.64645C9.38599 6.74022 9.33331 6.86739 9.33331 7C9.33331 7.13261 9.38599 7.25978 9.47976 7.35355C9.57353 7.44732 9.7007 7.5 9.83331 7.5C9.96592 7.5 10.0931 7.44732 10.1869 7.35355C10.2806 7.25978 10.3333 7.13261 10.3333 7C10.3333 6.86739 10.2806 6.74022 10.1869 6.64645C10.0931 6.55268 9.96592 6.5 9.83331 6.5ZM12.1666 6.5C12.034 6.5 11.9069 6.55268 11.8131 6.64645C11.7193 6.74022 11.6666 6.86739 11.6666 7C11.6666 7.13261 11.7193 7.25978 11.8131 7.35355C11.9069 7.44732 12.034 7.5 12.1666 7.5C12.2993 7.5 12.4264 7.44732 12.5202 7.35355C12.614 7.25978 12.6666 7.13261 12.6666 7C12.6666 6.86739 12.614 6.74022 12.5202 6.64645C12.4264 6.55268 12.2993 6.5 12.1666 6.5ZM11 7.66667C10.8674 7.66667 10.7402 7.71935 10.6464 7.81311C10.5527 7.90688 10.5 8.03406 10.5 8.16667C10.5 8.29927 10.5527 8.42645 10.6464 8.52022C10.7402 8.61399 10.8674 8.66667 11 8.66667C11.1326 8.66667 11.2598 8.61399 11.3535 8.52022C11.4473 8.42645 11.5 8.29927 11.5 8.16667C11.5 8.03406 11.4473 7.90688 11.3535 7.81311C11.2598 7.71935 11.1326 7.66667 11 7.66667Z"})}))})),Qj=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,d.jsx)("path",{fill:"currentColor",d:"M10.9067 9.33337C10.96 8.89337 11 8.45337 11 8.00004C11 7.54671 10.96 7.10671 10.9067 6.66671H13.16C13.2667 7.09337 13.3334 7.54004 13.3334 8.00004C13.3334 8.46004 13.2667 8.90671 13.16 9.33337H10.9067ZM9.72671 13.04C10.1267 12.3 10.4334 11.5 10.6467 10.6667H12.6134C11.9675 11.7789 10.9428 12.6214 9.72671 13.04ZM9.56004 9.33337H6.44004C6.37337 8.89337 6.33337 8.45337 6.33337 8.00004C6.33337 7.54671 6.37337 7.10004 6.44004 6.66671H9.56004C9.62004 7.10004 9.66671 7.54671 9.66671 8.00004C9.66671 8.45337 9.62004 8.89337 9.56004 9.33337ZM8.00004 13.3067C7.44671 12.5067 7.00004 11.62 6.72671 10.6667H9.27337C9.00004 11.62 8.55337 12.5067 8.00004 13.3067ZM5.33337 5.33337H3.38671C4.02594 4.21818 5.0499 3.37436 6.26671 2.96004C5.86671 3.70004 5.56671 4.50004 5.33337 5.33337ZM3.38671 10.6667H5.33337C5.56671 11.5 5.86671 12.3 6.26671 13.04C5.05246 12.6212 4.02994 11.7785 3.38671 10.6667ZM2.84004 9.33337C2.73337 8.90671 2.66671 8.46004 2.66671 8.00004C2.66671 7.54004 2.73337 7.09337 2.84004 6.66671H5.09337C5.04004 7.10671 5.00004 7.54671 5.00004 8.00004C5.00004 8.45337 5.04004 8.89337 5.09337 9.33337H2.84004ZM8.00004 2.68671C8.55337 3.48671 9.00004 4.38004 9.27337 5.33337H6.72671C7.00004 4.38004 7.44671 3.48671 8.00004 2.68671ZM12.6134 5.33337H10.6467C10.4381 4.50768 10.1291 3.71064 9.72671 2.96004C10.9534 3.38004 11.9734 4.22671 12.6134 5.33337ZM8.00004 1.33337C4.31337 1.33337 1.33337 4.33337 1.33337 8.00004C1.33337 9.76815 2.03575 11.4638 3.286 12.7141C3.90505 13.3331 4.63998 13.8242 5.44882 14.1592C6.25766 14.4943 7.12456 14.6667 8.00004 14.6667C9.76815 14.6667 11.4638 13.9643 12.7141 12.7141C13.9643 11.4638 14.6667 9.76815 14.6667 8.00004C14.6667 7.12456 14.4943 6.25766 14.1592 5.44882C13.8242 4.63998 13.3331 3.90505 12.7141 3.286C12.095 2.66694 11.3601 2.17588 10.5513 1.84084C9.74243 1.50581 8.87552 1.33337 8.00004 1.33337Z"})}))})),$j=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"1 1 14 14",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.17647 6.83741C6.22614 7.39928 6.46235 7.93024 6.85157 8.32046C6.76585 8.53752 6.69961 8.72864 6.65166 8.87697C6.61933 8.97698 6.59517 9.058 6.57885 9.11497C6.57069 9.14347 6.56447 9.16599 6.56017 9.1819L6.55513 9.20074L6.55368 9.20631L6.55321 9.2081L6.55292 9.20922C6.4844 9.47673 6.64571 9.74914 6.91322 9.81766C7.18066 9.88616 7.45305 9.72477 7.52165 9.45736L7.52219 9.4553L7.52544 9.44313C7.52852 9.43176 7.53342 9.41397 7.54018 9.39039C7.5537 9.34319 7.57461 9.27295 7.60318 9.18455C7.63383 9.08973 7.67313 8.97456 7.72138 8.84495C7.96275 8.91684 8.21764 8.94222 8.47501 8.91532L8.4761 8.91521L8.5437 8.90839L8.54551 8.9082C8.83779 8.87764 9.11909 8.78241 9.37315 8.63081C9.62698 8.47934 9.84763 8.27523 10.0246 8.03324C10.2015 7.79133 10.3321 7.51539 10.4112 7.22207C10.4902 6.92885 10.5167 6.62167 10.4899 6.31818L10.3574 4.80767C10.3426 4.63964 10.2687 4.47192 10.1342 4.34705C9.99748 4.22008 9.80853 4.14918 9.6087 4.1703L8.0569 4.33427C7.77403 4.36403 7.50188 4.45629 7.25619 4.60298C7.01062 4.74958 6.79729 4.947 6.62622 5.18089C6.45522 5.4147 6.32906 5.68129 6.25267 5.96456C6.17627 6.24782 6.15057 6.54425 6.17647 6.83741ZM9.49372 6.40605L9.38787 5.1992L8.16198 5.32874C8.0274 5.34287 7.89359 5.3871 7.7688 5.4616C7.64379 5.53623 7.52903 5.64045 7.43337 5.77124C7.33765 5.90211 7.26372 6.05605 7.21817 6.22494C7.17262 6.39383 7.15694 6.57229 7.17259 6.74938C7.19024 6.94905 7.24591 7.13594 7.33093 7.29932C7.56898 6.87084 7.86977 6.42831 8.24111 6.0533C8.43541 5.85708 8.75199 5.85552 8.94821 6.04982C9.14443 6.24412 9.14599 6.5607 8.95169 6.75692C8.62331 7.08855 8.35145 7.50381 8.13471 7.91513C8.21345 7.9271 8.29292 7.92895 8.37161 7.92068L8.37366 7.92047L8.44149 7.91363L8.44226 7.91355C8.58579 7.89842 8.72797 7.85129 8.86071 7.77208C8.99391 7.6926 9.11593 7.58173 9.21747 7.44289C9.31908 7.30397 9.39742 7.14073 9.44563 6.96185C9.49385 6.78295 9.51035 6.59352 9.49372 6.40605Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.37034 13.2963C3.02653 12.9525 2.83337 12.4862 2.83337 12V3.83329C2.83337 3.39127 3.00897 2.96734 3.32153 2.65478C3.63409 2.34222 4.05801 2.16663 4.50004 2.16663H12.3167C12.5421 2.16663 12.7583 2.25618 12.9177 2.41559C13.0772 2.57499 13.1667 2.79119 13.1667 3.01663V10.6665C13.1667 10.9426 12.9428 11.1665 12.6667 11.1665L4.66671 11.1666C4.44569 11.1666 4.23373 11.2544 4.07745 11.4107C3.92117 11.567 3.83337 11.7789 3.83337 12C3.83337 12.221 3.92117 12.4329 4.07745 12.5892C4.23373 12.7455 4.44569 12.8333 4.66671 12.8333H12.6667C12.9428 12.8333 13.1667 13.0572 13.1667 13.3333C13.1667 13.6094 12.9428 13.8333 12.6667 13.8333H4.66671C4.18048 13.8333 3.71416 13.6401 3.37034 13.2963ZM4.02864 3.36189C4.15366 3.23686 4.32323 3.16663 4.50004 3.16663H12.1667V10.1666H4.66671C4.37429 10.1666 4.08907 10.2365 3.83337 10.367V3.83329C3.83337 3.65648 3.90361 3.48691 4.02864 3.36189Z",fill:"currentColor"})]}))})),ey=l.memo(l.forwardRef((function(e,t){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,width:"24",height:"24",viewBox:"0 0 24 24",children:(0,d.jsxs)("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"3.25"}),(0,d.jsx)("path",{d:"M12 2.75V4.25"}),(0,d.jsx)("path",{d:"M17.25 6.75L16.0659 7.93416"}),(0,d.jsx)("path",{d:"M21.25 12L19.75 12"}),(0,d.jsx)("path",{d:"M17.25 17.25L16.0659 16.066"}),(0,d.jsx)("path",{d:"M12 19.75V21.25"}),(0,d.jsx)("path",{d:"M7.9341 16.0659L6.75 17.25"}),(0,d.jsx)("path",{d:"M4.25 12L2.75 12"}),(0,d.jsx)("path",{d:"M7.93405 7.93423L6.75 6.75"})]})}))}))),ty=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"1 1 14 14",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.18971 3.90807C3.48721 3.25358 4.13978 2.83337 4.85871 2.83337H11.1416C11.8605 2.83337 12.5131 3.25359 12.8106 3.90803L13.1692 4.69689C13.2774 4.93513 13.3335 5.19384 13.3335 5.45552V11.5002C13.3335 12.5127 12.5127 13.3335 11.5001 13.3335H4.50016C3.48765 13.3335 2.66683 12.5127 2.66683 11.5002V5.45552C2.66683 5.1938 2.72287 4.93513 2.83115 4.69689L3.18971 3.90807C3.18971 3.90807 3.18971 3.90807 3.18971 3.90807ZM4.85871 3.83337C4.53193 3.83337 4.2353 4.02438 4.10008 4.32187L3.74153 5.11067C3.74153 5.11068 3.74153 5.11067 3.74153 5.11067C3.6923 5.21899 3.66683 5.33657 3.66683 5.45552V11.5002C3.66683 11.9604 4.03992 12.3335 4.50016 12.3335H11.5001C11.9604 12.3335 12.3335 11.9604 12.3335 11.5002V5.45552C12.3335 5.33656 12.308 5.21897 12.2588 5.11067M12.2588 5.11067L11.9003 4.3219C11.9003 4.32189 11.9003 4.32192 11.9003 4.3219C11.765 4.0244 11.4684 3.83337 11.1416 3.83337H4.85871",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.16667 4.66671C3.44281 4.66671 3.66667 4.89057 3.66667 5.16671C3.66667 5.48724 3.76452 5.78846 3.9324 5.99873C4.09013 6.19628 4.32286 6.33337 4.66667 6.33337C5.3577 6.33337 5.83333 5.753 5.83333 5.16671C5.83333 4.89057 6.05719 4.66671 6.33333 4.66671C6.60948 4.66671 6.83333 4.89057 6.83333 5.16671C6.83333 6.23727 5.97563 7.33337 4.66667 7.33337C4.01047 7.33337 3.4932 7.05135 3.15094 6.62267C2.81882 6.20672 2.66667 5.6746 2.66667 5.16671C2.66667 4.89057 2.89053 4.66671 3.16667 4.66671Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.66667 4.66671C9.94281 4.66671 10.1667 4.89057 10.1667 5.16671C10.1667 5.753 10.6423 6.33337 11.3333 6.33337C11.6771 6.33337 11.9099 6.19628 12.0676 5.99873C12.2355 5.78846 12.3333 5.48724 12.3333 5.16671C12.3333 4.89057 12.5572 4.66671 12.8333 4.66671C13.1095 4.66671 13.3333 4.89057 13.3333 5.16671C13.3333 5.6746 13.1812 6.20672 12.8491 6.62267C12.5068 7.05135 11.9895 7.33337 11.3333 7.33337C10.0244 7.33337 9.16667 6.23727 9.16667 5.16671C9.16667 4.89057 9.39053 4.66671 9.66667 4.66671Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.33333 4.66671C6.60948 4.66671 6.83333 4.89057 6.83333 5.16671C6.83333 5.753 7.30896 6.33337 8 6.33337C8.69104 6.33337 9.16667 5.753 9.16667 5.16671C9.16667 4.89057 9.39053 4.66671 9.66667 4.66671C9.94281 4.66671 10.1667 4.89057 10.1667 5.16671C10.1667 6.23727 9.30896 7.33337 8 7.33337C6.69104 7.33337 5.83333 6.23727 5.83333 5.16671C5.83333 4.89057 6.05719 4.66671 6.33333 4.66671Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.83307 9.66624C7.37287 9.66624 6.99975 10.0393 6.99975 10.4996V12.3329H8.99973V10.4996C8.99973 10.0393 8.62666 9.66624 8.1664 9.66624H7.83307ZM5.99975 10.4996C5.99975 9.48703 6.8206 8.66624 7.83307 8.66624H8.1664C9.17894 8.66624 9.99973 9.48703 9.99973 10.4996V12.8329C9.99973 13.109 9.77588 13.3329 9.49973 13.3329H6.49975C6.22361 13.3329 5.99975 13.109 5.99975 12.8329V10.4996Z",fill:"currentColor"})]}))})),ny=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"16",viewBox:"1 1 14 14",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.16671 3.66669C4.70647 3.66669 4.33337 4.03978 4.33337 4.50002V11.5C4.33337 11.9603 4.70646 12.3334 5.16671 12.3334H12.1667C12.627 12.3334 13 11.9603 13 11.5V4.50002C13 4.03978 12.627 3.66669 12.1667 3.66669H5.16671ZM3.33337 4.50002C3.33337 3.4875 4.15418 2.66669 5.16671 2.66669H12.1667C13.1793 2.66669 14 3.4875 14 4.50002V11.5C14 12.5126 13.1792 13.3334 12.1667 13.3334H5.16671C4.15419 13.3334 3.33337 12.5126 3.33337 11.5V4.50002Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.50004 6.00002C6.77618 6.00002 7.00004 6.22388 7.00004 6.50002V10.1667C7.00004 10.4428 6.77618 10.6667 6.50004 10.6667C6.2239 10.6667 6.00004 10.4428 6.00004 10.1667V6.50002C6.00004 6.22388 6.2239 6.00002 6.50004 6.00002Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.8334 6.00002C11.1095 6.00002 11.3334 6.22388 11.3334 6.50002V10.1667C11.3334 10.4428 11.1095 10.6667 10.8334 10.6667C10.5572 10.6667 10.3334 10.4428 10.3334 10.1667V6.50002C10.3334 6.22388 10.5572 6.00002 10.8334 6.00002Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.66671 8.00002C8.94285 8.00002 9.16671 8.22388 9.16671 8.50002V10.1667C9.16671 10.4428 8.94285 10.6667 8.66671 10.6667C8.39056 10.6667 8.16671 10.4428 8.16671 10.1667V8.50002C8.16671 8.22388 8.39056 8.00002 8.66671 8.00002Z",fill:"currentColor"})]}))})),ry={drawerContent:{height:"100%",width:250,paddingBottom:10,overflowX:"hidden",display:"flex",flexDirection:"column"},drawerTopButtonsContainer:{flex:1,marginTop:"env(safe-area-inset-top)"},drawerBottomButtonsContainer:{marginBottom:"env(safe-area-inset-bottom)"}},iy={"get-started":{label:(0,d.jsx)(b.Trans,{id:"Get Started"}),tab:"get-started",id:"home-get-started-tab",getIcon:function(e){var t=e.color,n=e.fontSize;return(0,d.jsx)(ey,{fontSize:n,color:t})}},build:{label:(0,d.jsx)(b.Trans,{id:"Build"}),tab:"build",id:"home-build-tab",getIcon:function(e){var t=e.color,n=e.fontSize;return(0,d.jsx)(Xj,{fontSize:n,color:t})}},manage:{label:(0,d.jsx)(b.Trans,{id:"Manage"}),tab:"manage",id:"home-manage-tab",getIcon:function(e){var t=e.color,n=e.fontSize;return(0,d.jsx)(ny,{fontSize:n,color:t})}},shop:{label:(0,d.jsx)(b.Trans,{id:"Shop"}),tab:"shop",id:"home-shop-tab",getIcon:function(e){var t=e.color,n=e.fontSize;return(0,d.jsx)(ty,{fontSize:n,color:t})}},learn:{label:(0,d.jsx)(b.Trans,{id:"Learn"}),tab:"learn",id:"home-learn-tab",getIcon:function(e){var t=e.color,n=e.fontSize;return(0,d.jsx)(Kj,{fontSize:n,color:t})}},play:{label:(0,d.jsx)(b.Trans,{id:"Play"}),tab:"play",id:"home-play-tab",getIcon:function(e){var t=e.color,n=e.fontSize;return(0,d.jsx)(Jj,{fontSize:n,color:t})}},community:{label:(0,d.jsx)(b.Trans,{id:"Community"}),tab:"community",id:"home-community-tab",getIcon:function(e){var t=e.color,n=e.fontSize;return(0,d.jsx)(Qj,{fontSize:n,color:t})}},"team-view":{label:(0,d.jsx)(b.Trans,{id:"Classrooms"}),tab:"team-view",id:"team-view-tab",getIcon:function(e){var t=e.color,n=e.fontSize;return(0,d.jsx)($j,{fontSize:n,color:t})}}},oy=function(e){var t=e.limits;return["get-started","build",t&&t.capabilities.classrooms&&t.capabilities.classrooms.showClassroomTab?"team-view":null,"manage","shop","learn",!t||!(t.capabilities.classrooms&&t.capabilities.classrooms.hidePlayTab)?"play":null,"community"].filter(Boolean).map((function(e){return iy[e]}))},ay=function(e){var t=e.setActiveTab,n=e.activeTab,r=e.onOpenPreferences,i=e.onOpenAbout,o=l.useContext(f.Z),c=l.useContext(tr.ZP).limits,u=l.useState(!1),p=(0,s.Z)(u,2),h=p[0],g=p[1],x=oy({limits:c}),m=[{label:(0,d.jsx)(b.Trans,{id:"Preferences"}),id:"settings",onClick:r,getIcon:function(e){var t=e.color,n=e.fontSize;return(0,d.jsx)(Gj,{fontSize:n,color:t})}},{label:(0,d.jsx)(b.Trans,{id:"About GDevelop"}),id:"about-gdevelop",onClick:i,getIcon:function(e){var t=e.color,n=e.fontSize;return(0,d.jsx)(Yj.Z,{fontSize:n,color:t})}}];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(cy,{activeTab:n,onOpenAbout:i,onOpenHomePageMenuDrawer:function(){return g(!0)},onOpenPreferences:r,setActiveTab:t}),(0,d.jsx)(vm.ZP,{open:h,PaperProps:{style:(0,a.Z)((0,a.Z)({},ry.drawerContent),{},{backgroundColor:o.home.header.backgroundColor}),className:"safe-area-aware-left-container"},onClose:function(){g(!1)},ModalProps:{keepMounted:!0},children:(0,d.jsx)(L.x1,{expand:!0,children:(0,d.jsxs)(L.sg,{expand:!0,children:[(0,d.jsx)("div",{style:ry.drawerTopButtonsContainer,children:(0,d.jsxs)(L.sg,{noMargin:!0,expand:!0,children:[(0,d.jsx)(L.x1,{noMargin:!0,justifyContent:"flex-end",children:(0,d.jsx)(M.Z,{onClick:function(){g(!1)},size:"small",children:(0,d.jsx)(qj,{})})}),x.map((function(e){var r=e.label,i=e.tab,o=e.getIcon,a=e.id;return(0,d.jsx)(Wj,{label:r,onClick:function(){t(i),g(!1)},getIcon:o,isActive:n===i},a)}))]})}),(0,d.jsx)("div",{style:ry.drawerBottomButtonsContainer,children:(0,d.jsx)(L.sg,{noMargin:!0,children:m.map((function(e){var t=e.label,n=e.getIcon,r=e.onClick,i=e.id;return(0,d.jsx)(Wj,{label:t,onClick:r,getIcon:n,isActive:!1},i)}))})})]})})})]})},sy=30+2*L.XW,ly={desktopMenu:{paddingTop:40,paddingBottom:10,minWidth:230,display:"flex",flexDirection:"column"},mobileMenu:{paddingTop:10,paddingBottom:10,display:"flex",flexDirection:"column"},mobileContainer:{width:"100%",fontSize:20,height:56},bottomButtonsContainer:{marginBottom:"env(safe-area-inset-bottom)"},mobileButton:{padding:"".concat(8,"px ").concat(8,"px ").concat(20,"px ").concat(8,"px"),fontSize:"inherit"},buttonLabel:{padding:4,display:"flex"}},cy=function(e){var t=e.setActiveTab,n=e.activeTab,r=e.onOpenPreferences,i=e.onOpenAbout,o=e.onOpenHomePageMenuDrawer,s=(0,w.U)(),c=s.isMobile,u=s.isMediumScreen,p=c||u,h=l.useContext(f.Z),x=l.useContext(tr.ZP).limits,v=oy({limits:x}),C=[{label:(0,d.jsx)(b.Trans,{id:"Preferences"}),id:"settings",onClick:r,getIcon:function(e){var t=e.color,n=e.fontSize;return(0,d.jsx)(Gj,{fontSize:n,color:t})}},{label:(0,d.jsx)(b.Trans,{id:"About GDevelop"}),id:"about-gdevelop",onClick:i,getIcon:function(e){var t=e.color,n=e.fontSize;return(0,d.jsx)(Yj.Z,{fontSize:n,color:t})}}];return c?(0,d.jsx)(de.Z,{background:"medium",square:!0,style:(0,a.Z)((0,a.Z)({},ly.mobileContainer),{},{borderTop:"1px solid ".concat(h.home.separator.color)}),children:(0,d.jsx)(g,{height:56,children:(0,d.jsx)(m,{children:v.map((function(e){e.label;var r=e.tab,i=e.getIcon,o=e.id,a=n===r;return(0,d.jsx)(M.Z,{color:"default",disableRipple:!0,disableFocusRipple:!0,style:ly.mobileButton,onClick:function(){t(r)},selected:a,id:o,children:(0,d.jsx)("span",{style:ly.buttonLabel,children:i({color:a?"inherit":"secondary",fontSize:"inherit"})})},o)}))})})}):(0,d.jsxs)(de.Z,{style:(0,a.Z)((0,a.Z)({},p?ly.mobileMenu:ly.desktopMenu),{},{borderRight:"1px solid ".concat(h.home.separator.color)}),square:!0,background:"dark",children:[(0,d.jsxs)(L.sg,{expand:!0,children:[p&&(0,d.jsx)(M.Z,{onClick:o,size:"small",children:(0,d.jsx)(Vj,{})}),v.map((function(e){var r=e.label,i=e.tab,o=e.getIcon,a=e.id;return(0,d.jsx)(Wj,{label:r,onClick:function(){return t(i)},getIcon:o,isActive:n===i,hideLabel:p,id:a},a)}))]}),(0,d.jsx)("div",{style:ly.bottomButtonsContainer,children:(0,d.jsx)(L.sg,{children:C.map((function(e){var t=e.label,n=e.getIcon,r=e.onClick,i=e.id;return(0,d.jsx)(Wj,{label:t,onClick:r,getIcon:n,isActive:!1,hideLabel:p,id:i},i)}))})})]})},uy=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.195 0.154763C5.38567 0.354512 5.37831 0.671009 5.17856 0.861679L1.89079 4L5.17856 7.13832C5.37831 7.32899 5.38567 7.64549 5.195 7.84524C5.00433 8.04499 4.68783 8.05235 4.48809 7.86168L0.821419 4.36168C0.722578 4.26733 0.666656 4.13664 0.666656 4C0.666656 3.86336 0.722578 3.73267 0.821419 3.63832L4.48809 0.138323C4.68783 -0.0523465 5.00433 -0.0449861 5.195 0.154763Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.833323 4C0.833323 3.72386 1.05718 3.5 1.33332 3.5H10.8333C11.1095 3.5 11.3333 3.72386 11.3333 4C11.3333 4.27614 11.1095 4.5 10.8333 4.5H1.33332C1.05718 4.5 0.833323 4.27614 0.833323 4Z",fill:"currentColor"})]}))})),dy=n(70804),py=function(e){var t=(0,dy.Z)(/\[!\[([^\][]*)\]\(([^\s]*)\)\]\(([^\s]*)\)/,{alt:1,imageSource:2,linkHref:3}),n=e.match(t),r=n&&n.groups;if(r&&r.alt&&r.imageSource&&r.linkHref){if(r.linkHref.startsWith("https://editor.gdevelop.io")){var i=new URLSearchParams(r.linkHref.replace(/.*\?/,"")),o=i.get("initial-dialog"),a={};if(i.forEach((function(e,t){"initial-dialog"!==t&&(a[t]=e)})),o)return{message:e.replace(t,"![".concat(r.alt,"](").concat(r.imageSource,")")),routeNavigationParams:{route:o,params:a},isClickableContent:!0}}return{message:e,isClickableContent:!0}}var s=(0,dy.Z)(/!\[([^\][]*)\]\(([^\s]*)\)/,{alt:1,imageSource:2});return(r=(n=e.match(s))&&n.groups)&&r.alt&&r.imageSource,{message:e}},fy={markdownContainer:{transition:"transform 0.3s ease-in-out"}},hy=function(e){var t=e.level,n=e.canClose,r=e.addMargins,i=e.hideLoader,o=l.useContext(Oj.i),a=o.announcements,s=o.error,c=o.fetchAnnouncementsAndPromotions,u=l.useContext(se.ZP),p=u.values,f=u.showAnnouncement,h=l.useContext(Ja.Z).navigateToRoute,g=(0,w.U)().isMobile,x=(0,R.Z)((function(e){return(0,D.Z)({root:{"&:hover":{transform:"scale(1.02)"},"&:focus":{transform:"scale(1.02)",outline:"none"}}})}))();if(s)return(0,d.jsx)(fr.Z,{onRetry:c,children:(0,d.jsx)(b.Trans,{id:"Can't load the announcements. Verify your internet connection or try again later."})});if(!a)return i?null:(0,d.jsx)(Xe.Z,{});var m=t?a.filter((function(e){return e.level===t})):a,v=n?m.filter((function(e){return!p.hiddenAnnouncements[e.id]})):m;return v.length?(0,d.jsx)(b.I18n,{children:function(e){var t=e.i18n;return(0,d.jsx)(de.Z,{square:!0,background:"dark",children:(0,d.jsx)(L.x1,{noMargin:!r,children:(0,d.jsx)(C.ak,{noMargin:!r,expand:!0,children:v.map((function(e,r){var i=e.buttonLabelByLocale,o=e.buttonUrl,a=function(e,t){var n=(0,uc.a)(e,t.titleByLocale),r=(0,uc.a)(e,t.markdownMessageByLocale),i=t.mobileMarkdownMessageByLocale?(0,uc.a)(e,t.mobileMarkdownMessageByLocale):r,o=py(r),a=o.message,s=o.routeNavigationParams,l=o.isClickableContent,c=py(i),u=c.message,d=c.routeNavigationParams,p=c.isClickableContent;return{title:n,desktopMessage:a,mobileMessage:u,desktopRouteNavigationParams:s,mobileRouteNavigationParams:d,isClickableContent:!!l||!!p}}(t,e),s=a.title,l=a.desktopMessage,c=a.mobileMessage,u=a.desktopRouteNavigationParams,p=a.mobileRouteNavigationParams,m=a.isClickableContent,v=u&&!g?function(){return h(u.route,u.params)}:p&&g?function(){return h(p.route,p.params)}:void 0;return(0,d.jsxs)(De.Z,{kind:e.type,renderRightButton:i&&o?function(){return(0,d.jsx)(T.Z,{label:(0,uc.a)(t,i),onClick:function(){return Y.ZP.openExternalURL(o)}})}:null,onHide:n?function(){f(e.id,!1)}:null,hideButtonSize:"small",markdownImageOnly:!s,children:[s?(0,d.jsx)(F.Z,{size:"block-title",children:s}):null,(0,d.jsx)("div",{onClick:v,className:m?x.root:void 0,style:fy.markdownContainer,children:g?(0,d.jsx)(Ke.r,{source:c,allowParagraphs:!1}):(0,d.jsx)(Ke.r,{source:l,allowParagraphs:!1})})]},e.id)}))})})})}}):null},gy=30,xy={title:{overflowWrap:"anywhere",textWrap:"wrap"},mobileContainer:{paddingTop:10,paddingLeft:5,paddingRight:5},desktopContainer:{paddingTop:gy,paddingLeft:gy,paddingRight:gy},mobileFooter:{padding:5},desktopFooter:{paddingLeft:gy},rowContainer:{display:"flex",flexDirection:"column",paddingBottom:gy},container:{flex:1},scrollContainer:{overflowY:"scroll"},noScrollContainer:{overflowY:"hidden"}},my=function(e){var t=e.children,n=e.expand;return(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},xy.rowContainer),n?{flex:1}:void 0),children:t})},vy=function(e){var t=e.children,n=e.title,r=e.titleAdornment,i=e.subtitleText,o=e.renderSubtitle,s=e.backAction,c=e.flexBody,u=e.renderFooter,p=e.noScroll,f=e.showUrgentAnnouncements,h=(0,w.U)().isMobile,g=l.useContext(Oj.i).announcements,x=h?xy.mobileContainer:xy.desktopContainer,m=p?xy.noScrollContainer:xy.scrollContainer,v=(0,a.Z)((0,a.Z)((0,a.Z)({},xy.container),{},{display:c?"flex":"block"},x),m);return(0,d.jsxs)(L.sg,{useFullHeight:!0,noMargin:!0,expand:!0,children:[(0,d.jsx)(de.Z,{style:v,square:!0,background:"dark",children:(0,d.jsxs)(L.sg,{noOverflowParent:!0,expand:!0,children:[f&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(hy,{canClose:!0,level:"urgent",hideLoader:!0}),g&&g.length>0&&(0,d.jsx)(L.LZ,{})]}),s&&(0,d.jsx)(L.x1,{children:(0,d.jsx)(Jx.Z,{onClick:s,icon:(0,d.jsx)(uy,{fontSize:"small"}),label:(0,d.jsx)(b.Trans,{id:"Back"})})}),n&&(0,d.jsxs)(my,{children:[(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",justifyContent:"space-between",children:[(0,d.jsx)(F.Z,{size:"bold-title",noMargin:!0,style:xy.title,children:n}),r&&(0,d.jsx)(L.sg,{noMargin:!0,children:r})]}),i&&(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)(F.Z,{noMargin:!0,children:i})}),o&&o()]}),t]})}),u&&(0,d.jsx)(de.Z,{style:h?xy.mobileFooter:xy.desktopFooter,square:!0,background:"dark",children:u()})]})},by=function(e){var t=e.type,n=l.useContext(Oj.i),r=n.promotions,i=n.error,o=l.useContext(Ja.Z).navigateToRoute,a=(0,w.U)(),s=a.isMobile,c=a.isMediumScreen,u=r&&t?r.filter((function(e){return e.type===t})):r,p=u?u.map((function(e){return{id:e.id,imageUrl:e.imageUrl,mobileImageUrl:e.mobileImageUrl,onClick:Rj({promotion:e,navigateToRoute:o})}})):null;return i?null:(0,d.jsx)(Hj,{items:p,itemDesktopRatio:10.9760348583878,itemMobileRatio:2.5714285714285716,additionalMarginForWidthCalculation:s?0:c?sy+60:290})},Cy=n(18876),jy=function(e){var t=e.badges;return!t||!t.some((function(e){return"github-star"===e.achievementId}))},yy=function(e){var t=e.onOpenProfile,n=e.achievements,r=n&&n.find((function(e){return"github-star"===e.id}))||null;return(0,d.jsx)(Cy.r,{renderImage:function(e){return(0,d.jsx)("img",{src:"res/github-star-credits.svg",alt:"Star on GitHub",style:e})},children:(0,d.jsxs)(C.ep,{noMargin:!0,expand:!0,alignItems:"stretch",children:[(0,d.jsxs)(C.ak,{alignItems:"flex-start",expand:!0,noMargin:!0,children:[(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Star GDevelop on GitHub and win credits"})}),(0,d.jsx)(F.Z,{size:"body",children:(0,d.jsx)(b.Trans,{id:"Get {0} credits by liking GDevelop on GitHub to help the open-source project gain visiblity. To collect your credits, make sure to add your GitHub user name to your in-app profile.",values:{0:r&&r.rewardValueInCredits||"-"}})})]}),(0,d.jsx)(L.LZ,{}),(0,d.jsxs)(C.ak,{justifyContent:"center",alignItems:"center",noMargin:!0,children:[(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Star GDevelop on GitHub"}),primary:!0,fullWidth:!0,onClick:function(){Y.ZP.openExternalURL("https://github.com/4ian/GDevelop")}}),(0,d.jsx)(Jx.Z,{label:(0,d.jsx)(b.Trans,{id:"Claim credits"}),fullWidth:!0,onClick:t})]})]})})},Zy=function(e,t){switch(e){case"small":return t?4:2;case"medium":default:return 3;case"large":return 4;case"xlarge":return 6}},ky=function(e,t){switch(e){case"small":return t?3:1;case"medium":default:return 2;case"large":return 3;case"xlarge":return 5}},wy={"game-template":{title:(0,d.jsx)(b.Trans,{id:"Ready-made games"}),imageAlt:"Premium game templates category",imageSource:"res/shop-categories/Game_Templates.jpeg"},"full-game-pack":{title:(0,d.jsx)(b.Trans,{id:"Full Game Asset Packs"}),imageAlt:"Full game asset packs category",imageSource:"res/shop-categories/Full_game_pack.jpeg"},character:{title:(0,d.jsx)(b.Trans,{id:"Characters"}),imageAlt:"Characters asset packs category",imageSource:"res/shop-categories/Characters.jpeg"},props:{title:(0,d.jsx)(b.Trans,{id:"Props"}),imageAlt:"Props asset packs category",imageSource:"res/shop-categories/Props.jpeg"},background:{title:(0,d.jsx)(b.Trans,{id:"Backgrounds"}),imageAlt:"Backgrounds asset packs category",imageSource:"res/shop-categories/Backgrounds.jpeg"},"visual-effect":{title:(0,d.jsx)(b.Trans,{id:"Visual Effects"}),imageAlt:"Visual effects asset packs category",imageSource:"res/shop-categories/Visual_Effects.jpeg"},interface:{title:(0,d.jsx)(b.Trans,{id:"UI/Interface"}),imageAlt:"User Interface asset packs category",imageSource:"res/shop-categories/Interface.jpeg"},prefab:{title:(0,d.jsx)(b.Trans,{id:"Prefabs (Ready-to-use Objects)"}),imageAlt:"Prefabs asset packs category",imageSource:"res/shop-categories/Prefabs.jpeg"},sounds:{title:(0,d.jsx)(b.Trans,{id:"Sounds and musics"}),imageAlt:"Sounds and musics asset packs category",imageSource:"res/shop-categories/Sounds.jpeg"}},Ty={grid:{margin:"0 10px",overflow:"unset"}},Sy=l.forwardRef((function(e,t){var n=e.publicAssetPacks.starterPacks,r=e.privateAssetPackListingDatas,i=e.privateGameTemplateListingDatas,o=e.onPublicAssetPackSelection,a=e.onPrivateAssetPackSelection,c=e.onPrivateGameTemplateSelection,u=e.onCategorySelection,p=e.openedShopCategory,f=e.hideGameTemplates,h=e.displayPromotions,g=e.onOpenProfile,x=(0,w.U)(),m=x.windowSize,j=x.isLandscape,y=l.useContext(tr.ZP),Z=y.receivedAssetPacks,k=y.receivedGameTemplates,T=y.badges,S=y.achievements,P=l.useRef(null);l.useImperativeHandle(t,(function(){return{getScrollPosition:function(){var e=P.current;return e?e.getScrollPosition():0},scrollToPosition:function(e){var t=P.current;t&&t.scrollToPosition(e)}}}));var E=l.useMemo((function(){return Object.entries(wy).map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1],i=r.title,o=r.imageSource,a=r.imageAlt;return f&&"game-template"===n?null:(0,d.jsx)(Lj,{id:"asset-pack-category-".concat(n.replace(/\s/g,"-")),imageSource:o,imageAlt:a,title:i,onSelect:function(){u(n)}},n)}))}),[u,f]),I=p?wy[p].title:null,M=n.filter((function(e){return!p||e.categories.includes(p)})).map((function(e,t){return(0,d.jsx)(Ej,{assetPack:e,onSelect:function(){return o(e)}},"".concat(e.tag,"-").concat(t))})),A=l.useMemo((function(){var e=[],t=[],n=[],i=[];r.filter((function(e){return!p||e.categories.includes(p)})).forEach((function(r){var o=!!Z&&!!Z.find((function(e){return e.id===r.id})),s=(0,d.jsx)(Ij,{assetPackListingData:r,onSelect:function(){a(r)},owned:o},r.id);r.includedListableProductIds&&r.includedListableProductIds.length?o?i.push(s):n.push(s):o?t.push(s):e.push(s)}));var o=[].concat(i,n);return{allStandAloneTiles:[].concat(t,(0,v.Z)(fj(e,M,2,1))),allBundleTiles:o}}),[r,p,a,M,Z]),O=A.allStandAloneTiles,R=A.allBundleTiles,D=l.useMemo((function(){return i.filter((function(e){return!p||"game-template"===p})).map((function(e,t){return(0,d.jsx)(Aj,{privateGameTemplateListingData:e,onSelect:function(){c(e)},owned:!!k&&!!k.find((function(t){return t.id===e.id}))},e.id)}))}),[i,p,c,k]),_=function(e){var t=e.list,n=e.numberPerPage,r=l.useState(1),i=(0,s.Z)(r,2),o=i[0],a=i[1],c=(0,Ea.N)((function(){a(o+1)}),20);return{displayedList:t.slice(0,o*n),onShowMore:c}}({list:O,numberPerPage:25}),B=_.displayedList,N=_.onShowMore;return(0,d.jsxs)(Tt.Z,{ref:P,id:"asset-store-home",data:{isFiltered:p?"true":"false"},onScroll:function(e){e.remainingScreensToBottom<=1.5&&N()},children:[p?null:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.sg,{children:(0,d.jsx)(L.x1,{children:(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Explore by category"})})})}),(0,d.jsx)(pj.Z,{cols:Zy(m,j),style:Ty.grid,cellHeight:"auto",spacing:2,children:E})]}),h?(0,d.jsxs)(C.ak,{children:[(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Promotions"})}),(0,d.jsx)(by,{}),g&&jy({badges:T})&&(0,d.jsx)(yy,{achievements:S,onOpenProfile:g})]}):null,R.length?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.sg,{children:(0,d.jsx)(L.x1,{children:(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Bundles"})})})}),(0,d.jsx)(pj.Z,{cols:ky(m,j),style:Ty.grid,cellHeight:"auto",spacing:2,children:R})]}):null,I&&(0,d.jsx)(L.sg,{children:(0,d.jsx)(L.x1,{children:(0,d.jsx)(F.Z,{size:"block-title",children:I})})}),!f&&(0,d.jsxs)(d.Fragment,{children:[!I&&(0,d.jsx)(L.sg,{children:(0,d.jsx)(L.x1,{children:(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"All game templates"})})})}),(0,d.jsx)(pj.Z,{cols:ky(m,j),style:Ty.grid,cellHeight:"auto",spacing:2,children:D})]}),!I&&(0,d.jsx)(L.sg,{children:(0,d.jsx)(L.x1,{children:(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"All asset packs"})})})}),(0,d.jsx)(pj.Z,{cols:ky(m,j),style:Ty.grid,cellHeight:"auto",spacing:2,children:B})]})})),Py=n(35924),Ey=n(74824),Iy=function(e){return(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,d.jsx)(wt.$,{title:(0,d.jsx)(b.Trans,{id:"No result"}),description:e.message||(0,d.jsx)(b.Trans,{id:"Try something else, browse the packs or create your object from scratch!"}),actionLabel:(0,d.jsx)(b.Trans,{id:"Clear all filters"}),actionButtonId:"clear-filters-button",onAction:e.onClear,actionIcon:(0,d.jsx)(Ey.Z,{})})})},My=n(24347),Ly=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33337 10.3333C4.78109 10.3333 4.33337 10.781 4.33337 11.3333C4.33337 11.8856 4.78109 12.3333 5.33337 12.3333C5.88566 12.3333 6.33337 11.8856 6.33337 11.3333C6.33337 10.781 5.88566 10.3333 5.33337 10.3333ZM3.33337 11.3333C3.33337 10.2287 4.2288 9.33329 5.33337 9.33329C6.43794 9.33329 7.33337 10.2287 7.33337 11.3333C7.33337 12.4379 6.43794 13.3333 5.33337 13.3333C4.2288 13.3333 3.33337 12.4379 3.33337 11.3333Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.16671 3.66663C7.70645 3.66663 7.33337 4.03972 7.33337 4.49996V11.3333C7.33337 11.6094 7.10952 11.8333 6.83337 11.8333C6.55723 11.8333 6.33337 11.6094 6.33337 11.3333V4.49996C6.33337 3.48744 7.15416 2.66663 8.16671 2.66663H12.1667C13.1793 2.66663 14 3.48744 14 4.49996V9.33329C14 9.60944 13.7762 9.83329 13.5 9.83329C13.2239 9.83329 13 9.60944 13 9.33329V4.49996C13 4.03972 12.627 3.66663 12.1667 3.66663H8.16671Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 8.33329C11.4478 8.33329 11 8.78101 11 9.33329C11 9.88558 11.4478 10.3333 12 10.3333C12.5523 10.3333 13 9.88558 13 9.33329C13 8.78101 12.5523 8.33329 12 8.33329ZM10 9.33329C10 8.22872 10.8955 7.33329 12 7.33329C13.1046 7.33329 14 8.22872 14 9.33329C14 10.4379 13.1046 11.3333 12 11.3333C10.8955 11.3333 10 10.4379 10 9.33329Z",fill:"currentColor"})]}))})),Ay=function(e){var t=e.assetPack,n=(0,w.U)().isMobile,r=l.useContext(My.Z).getPrivateAssetPackAudioArchiveUrl,a=l.useState(!1),c=(0,s.Z)(a,2),u=c[0],p=c[1];return(0,d.jsx)(L.sg,{expand:!0,alignItems:"center",justifyContent:"center",children:(0,d.jsx)(T.Z,{primary:!0,label:u?(0,d.jsx)(b.Trans,{id:"Loading..."}):n?(0,d.jsx)(b.Trans,{id:"Pack sounds"}):(0,d.jsx)(b.Trans,{id:"Download pack sounds"}),icon:(0,d.jsx)(Ly,{}),disabled:u,onClick:(0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,r(t.id);case 3:if(n=e.sent,p(!1),n){e.next=8;break}return console.error("Could not generate url for premium asset pack with name ".concat(t.name)),e.abrupt("return");case 8:Y.ZP.openExternalURL(n);case 9:case"end":return e.stop()}}),e)})))})})},Fy=n(6429),Oy=function(e){var t=e.steps;return(0,d.jsx)(Fy.Z,{separator:">","aria-label":"breadcrumb",children:t.map((function(e,t){return e.onClick?(0,d.jsx)(Ie.Z,{onClick:e.onClick,href:e.href,children:e.label},"breadcrumb".concat(t)):(0,d.jsx)(F.Z,{noMargin:!0,children:e.label},"breadcrumb".concat(t))}))})},Ry=n(2866),Dy=n(65875),_y=n(3698),By={buttonBase:{borderRadius:8,padding:8,cursor:"default",overflow:"hidden",boxSizing:"border-box",margin:1},contentWrapper:{height:"100%",width:"100%",display:"flex",flexDirection:"column"},radio:{padding:0},descriptionContainer:{paddingLeft:32}},Ny=function(e){var t=e.selected,n=e.onClick,r=e.name,i=e.description,o=e.formattedPrice,a=e.isLicenseOwned;return(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[(0,d.jsx)(L.sg,{noMargin:!0,children:a?(0,d.jsx)(Aa.Z,{}):n?(0,d.jsx)(_y.Z,{color:"secondary",checked:t,onChange:n,style:By.radio}):null}),(0,d.jsxs)(C.pJ,{justifyContent:"space-between",noMargin:!0,expand:!0,children:[(0,d.jsx)(F.Z,{noMargin:!0,size:"sub-title",children:r}),!a&&o]})]}),(0,d.jsx)(L.x1,{expand:!0,noMargin:!0,children:(0,d.jsx)("div",{style:By.descriptionContainer,children:(0,d.jsx)(F.Z,{noMargin:!0,align:"left",children:i})})})]})},Uy=function(e){var t=e.id,n=e.onClick,r=e.selected,i=e.name,o=e.description,a=e.formattedPrice,s=e.ownedLicense,l=e.disabled,c=function(e){return(0,R.Z)((function(t){return(0,D.Z)({root:{outline:e?"2px solid ".concat(t.palette.secondary.dark):"1px solid ".concat(t.palette.text.disabled),"&:focus":{backgroundColor:t.palette.action.hover},"&:hover":{backgroundColor:t.palette.action.hover},transition:"background-color 100ms ease"}})}))()}(r);if(s&&s!==t)return null;var u=s===t;return(0,d.jsx)(O.Z,{onClick:n,elevation:2,style:By.buttonBase,classes:c,tabIndex:0,onKeyPress:function(e){(0,kn.ph)(e)&&!r&&n()},disableTouchRipple:r,disabled:l||u,children:(0,d.jsx)("div",{style:By.contentWrapper,children:(0,d.jsx)(Ny,{description:o,formattedPrice:a,isLicenseOwned:u,name:i,onClick:n,selected:r})})})},Hy=function(e){var t=e.ownedLicense,n=e.productType,r=l.useContext(Dy.v),i=r.gameTemplateLicenses,o=r.assetPackLicenses,a="game-template"===n?i:o;if(r.error||!a)return null;var s=a.find((function(e){return e.id===t}));return s?(0,d.jsx)(b.I18n,{children:function(e){e.i18n;return(0,d.jsx)(Ny,{selected:!0,name:s.nameByLocale.en,description:s.descriptionByLocale.en,isLicenseOwned:!0})}}):null},Vy=function(e){var t=e.value,n=e.onChange,r=e.product,i=e.ownedLicense,o=e.disabled,a=l.useContext(Dy.v),s=a.gameTemplateLicenses,c=a.assetPackLicenses,u=a.error,p=a.fetchProductLicenses,f="GAME_TEMPLATE"===r.productType?"game-template":"asset-pack",h="game-template"===f?s:c;return l.useEffect((function(){p({productType:f})}),[p,f]),u?(0,d.jsx)(fr.Z,{onRetry:function(){return p({productType:f})},children:(0,d.jsx)(b.Trans,{id:"Can't load the licenses. Verify your internet connection or try again later."})}):h?(0,d.jsx)(b.I18n,{children:function(e){var a=e.i18n;return(0,d.jsx)(C.ak,{noMargin:!0,children:h.map((function(e){return r.prices.find((function(t){return t.usageType===e.id}))?(0,d.jsx)(Uy,{id:e.id,onClick:function(){return n(e.id)},selected:e.id===t,name:(0,uc.a)(a,e.nameByLocale),description:(0,uc.a)(a,e.descriptionByLocale),formattedPrice:(0,bj.e3)({i18n:a,productListingData:r,usageType:e.id}),ownedLicense:i,disabled:o},e.id):null}))})}}):(0,d.jsx)(Xe.Z,{})},zy=n(51137),Wy=n(84482),Gy=function(e){var t=e.otherProductListingDatasFromSameCreator,n=e.currentProductListingData,r=e.receivedProducts,i=e.onProductOpen;return!t||t.length<2?null:t.filter((function(e){return e.id!==n.id})).map((function(e){var t=!!r&&!!r.find((function(t){return t.id===e.id}));return"GAME_TEMPLATE"===e.productType?(0,d.jsx)(Aj,{privateGameTemplateListingData:e,onSelect:function(){return i(e)},owned:t},e.id):"ASSET_PACK"===e.productType?(0,d.jsx)(Ij,{assetPackListingData:e,onSelect:function(){return i(e)},owned:t},e.id):(console.error("Unexpected product type:",e.productType),null)})).filter(Boolean)},Yy=function(e){var t=e.product,n=e.productListingDatas,r=e.receivedProducts,i=e.onProductOpen;if(!t||!n)return null;var o=n.filter((function(e){return e.includedListableProductIds&&e.includedListableProductIds.includes(t.id)}));if(!o.length)return null;var a=o.filter((function(e){return!!r&&!!r.find((function(t){return t.id===e.id}))})),s=o.filter((function(e){return!a.find((function(t){return t.id===e.id}))}));return a.map((function(e){return(0,d.jsx)(Mj,{productListingData:e,onSelect:function(){return i(e)},owned:!0},e.id)})).concat(s.map((function(e){return(0,d.jsx)(Mj,{productListingData:e,onSelect:function(){return i(e)},owned:!1},e.id)})))},qy=function(e){var t=e.product,n=e.productListingDatas,r=e.productListingData,i=e.receivedProducts,o=e.onProductOpen;if(!t||!n)return null;var a=r.includedListableProductIds;return a?a.map((function(e){var t=n.find((function(t){return t.id===e}));if(!t)return console.warn("Included product ".concat(e," not found")),null;var r=!!i&&!!i.find((function(e){return e.id===t.id}));return"GAME_TEMPLATE"===t.productType?(0,d.jsx)(Aj,{privateGameTemplateListingData:t,onSelect:function(){return o(t)},owned:r},t.id):"ASSET_PACK"===t.productType?(0,d.jsx)(Ij,{assetPackListingData:t,onSelect:function(){return o(t)},owned:r},t.id):(console.error("Unexpected product type:",t.productType),null)})).filter(Boolean):null},Xy=function(e){var t=e.productId,n=e.receivedProducts,r=e.productPurchases,i=e.allProductListingDatas;if(!n||!r||!i)return null;var o=n.find((function(e){return e.id===t}));if(!o)return null;var a=r.find((function(e){return e.productId===o.id}));if(!a){var s=i.find((function(e){return e.includedListableProductIds&&e.includedListableProductIds.includes(t)}));if(s){var l=r.find((function(e){return e.productId===s.id}));if(l)return l.usageType}return null}return a.usageType},Ky=function(e){var t=e.productListingData,n=e.selectedUsageType,r=e.onUsageTypeChange,i=e.simulateAppStoreProduct,o=e.i18n,a=e.isAlreadyReceived,s=e.onClickBuy,c=e.onClickBuyWithCredits,u=l.useContext(tr.ZP).authenticated,p=i||(0,zy.PN)(),f=t.productType.toLowerCase(),h=t.creditPrices.find((function(e){return e.usageType===n}));if(!h&&(r(t.prices[0].usageType),!(h=t.creditPrices.find((function(e){return e.usageType===t.prices[0].usageType})))))return console.error("Unable to find a credit price for product ".concat(t.id,", usage type ").concat(t.prices[0].usageType)),null;var g=(0,bj.e3)({i18n:o,usageType:n,productListingData:t,plainText:!0});return p?(0,d.jsxs)(C.pJ,{children:[(0,d.jsx)(T.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Buy for {formattedProductPriceText}",values:{formattedProductPriceText:g}}),onClick:c,id:"buy-".concat(f,"-with-credits"),icon:(0,d.jsx)(Wy.Z,{fontSize:"small"})}),!a&&!u&&(0,d.jsx)(F.Z,{size:"body-small",children:(0,d.jsx)(Ie.Z,{onClick:s,href:"",children:(0,d.jsx)(b.Trans,{id:"Restore a previous purchase"})})})]}):(0,d.jsxs)(C.pJ,{children:[(0,d.jsx)(J.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Buy for {0} credits",values:{0:h.amount}}),onClick:c,id:"buy-".concat(f,"-with-credits"),leftIcon:(0,d.jsx)(Wy.Z,{fontSize:"small"})}),(0,d.jsx)(T.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Buy for {formattedProductPriceText}",values:{formattedProductPriceText:g}}),onClick:s,id:"buy-".concat(f)})]})},Jy=function(e){var t=e.productListingData,n=e.onClick,r=e.label;if("GAME_TEMPLATE"===t.productType&&t.includedListableProductIds)return null;var i=t.productType.toLowerCase();return(0,d.jsx)(L.sg,{noMargin:!0,alignItems:"flex-end",children:(0,d.jsx)(T.Z,{primary:!0,label:r,onClick:n,id:"open-".concat(i)})})},Qy=function(e){var t=e.productListingData,n=e.product,r=e.shouldSimulateAppStoreProduct;if(!n)return[];var i=[{kind:"image",url:(r||(0,zy.PN)())&&t.appStoreThumbnailUrls&&t.appStoreThumbnailUrls[0]||t.thumbnailUrls[0]}].concat((0,v.Z)(n.previewImageUrls.map((function(e){return{kind:"image",url:e}}))));return n.previewSoundUrls&&i.push.apply(i,(0,v.Z)(n.previewSoundUrls.map((function(e){return{kind:"audio",url:e}})))),i},$y=function(e){switch(e){case"small":return 80;case"medium":default:return 120;case"large":case"xlarge":return 130}},eZ=function(e,t){switch(e){case"small":return t?3:1;case"medium":default:return 2;case"large":return 3;case"xlarge":return 5}},tZ=function(e,t){switch(e){case"small":return t?2:1;case"medium":return 1;default:return 2}},nZ=function(e){return 250*(e+1)},rZ=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.filter((function(e){if(!t.length)return!0;var n=e.tags;return t.every((function(e){return n.includes(e)}))})),i=function(e){return 250*e}(n),o=Math.min(nZ(n),r.length);return 0===i&&o===r.length||(r=r.slice(i,o)),r},iZ={grid:{margin:"0 2px",overflow:"unset"},scrollView:{display:"flex",flexDirection:"column"},previewImageContainer:{display:"flex",flex:.7,alignItems:"flex-start"},previewImage:{width:"100%",aspectRatio:"16 / 9",objectFit:"contain",position:"relative"},openProductContainer:{display:"flex",paddingLeft:32,marginTop:8,marginBottom:8}},oZ=function(e){var t=e.currentPage,n=e.pageBreakIndex,r=e.setPageBreakIndex,i=e.assetShortHeaders,o=e.scrollView;return(0,d.jsx)(L.sg,{children:(0,d.jsxs)(C.pJ,{justifyContent:"center",children:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Show previous assets"}),onClick:function(){t.pageBreakIndex=Math.max(0,(t.pageBreakIndex||0)-1),r(t.pageBreakIndex),o&&o.scrollToPosition(0)},disabled:n<=0},"previous-assets"),(0,d.jsx)(T.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Show next assets"}),onClick:function(){t.pageBreakIndex=(t.pageBreakIndex||0)+1,r(t.pageBreakIndex),o&&o.scrollToPosition(0)},disabled:i.length<nZ(n)},"next-assets")]})})},aZ=l.forwardRef((function(e,t){var n=e.assetShortHeaders,r=e.onOpenDetails,c=e.noResultsPlaceHolder,u=e.privateAssetPackListingDatas,p=e.privateGameTemplateListingDatas,f=e.publicAssetPacks,h=e.onPrivateAssetPackSelection,g=e.onPublicAssetPackSelection,x=e.onPrivateGameTemplateSelection,m=e.onFolderSelection,j=e.onGoBackToFolderIndex,y=e.noScroll,Z=e.currentPage,k=l.useContext(tj.KY),T=k.error,S=k.fetchAssetsAndFilters,P=k.clearAllFilters,E=k.licenses,I=k.authors,M=k.assetFiltersState,A=k.assetPackFiltersState,O=k.privateAssetPackListingDatas,R=l.useContext(Ry.mJ),D=R.error,_=R.fetchGameTemplates,B=l.useContext(tr.ZP),N=B.receivedAssetPacks,U=B.receivedGameTemplates,H=B.assetPackPurchases,V=l.useState(null),z=(0,s.Z)(V,2),W=z[0],G=z[1],q=l.useState(!1),X=(0,s.Z)(q,2),K=X[0],Q=X[1],$=l.useState(!1),ee=(0,s.Z)($,2),te=ee[0],ne=ee[1],re=l.useMemo((function(){return Z?{openedAssetPack:Z.openedAssetPack,selectedFolders:Z.selectedFolders}:{openedAssetPack:null,selectedFolders:[]}}),[Z]),ie=re.openedAssetPack,oe=re.selectedFolders,ae=(0,w.U)(),se=ae.windowSize,le=ae.isLandscape,ce=l.useRef(null);l.useImperativeHandle(t,(function(){return{getScrollPosition:function(){var e=ce.current;return e?e.getScrollPosition():0},scrollToPosition:function(e){var t=ce.current;t&&t.scrollToPosition(e)}}}));var ue=l.useCallback((function(){S(),_()}),[S,_]),de=T||D,pe=l.useMemo((function(){return!ie&&A.typeFilter.hasFilters()}),[A,ie]),fe=l.useMemo((function(){return M.animatedFilter.hasFilters()||M.viewpointFilter.hasFilters()||M.colorFilter.hasFilters()||M.dimensionFilter.hasFilters()||M.licenseFilter.hasFilters()||M.objectTypeFilter.hasFilters()}),[M]),he=l.useMemo((function(){return!ie&&A.typeFilter.isOwned&&!A.typeFilter.isPremium&&!A.typeFilter.isFree&&!fe}),[A,fe,ie]),ge=c||(he?(0,d.jsx)(Iy,{message:(0,d.jsx)(b.Trans,{id:"You don't own any pack yet!"}),onClear:P}):pe&&fe?(0,d.jsx)(Iy,{message:(0,d.jsx)(b.Trans,{id:"Cannot filter on both asset packs and assets at the same time. Try clearing one of the filters!"}),onClear:P}):(0,d.jsx)(Iy,{onClear:P}));l.useEffect((function(){ne(!0);var e=setTimeout((function(){return ne(!1)}),100);return function(){return clearTimeout(e)}}),[oe]);var xe=l.useMemo((function(){return oe.length&&n?function(e){var t=e.assetShortHeaders,n=e.selectedFolders,r=[],i=new Set;t.forEach((function(e){var t=e.tags,o=n[n.length-1],a=n.filter((function(e){return e===o})).length,s=function(e,t,n){var r=0,i=-1;do{i=e.indexOf(t,i+1)}while(-1!==i&&++r<n);return i}(t,n[n.length-1],a);if(-1===s)return t;var l=t.filter((function(e,t){return t>s}));l.length>0&&r.push(l),l.forEach((function(e){return i.add(e)}))}));var o=Array.from(i).filter((function(e){return r.filter((function(t){return t.includes(e)})).length===r.length})),a=r.map((function(e){return e.filter((function(e){return!o.includes(e)}))})),s=new Set;return a.forEach((function(e){return s.add(e[0])})),Array.from(s).filter(Boolean)}({assetShortHeaders:n,selectedFolders:oe}):[]}),[n,oe]),me=l.useMemo((function(){return xe.length&&m?xe.map((function(e){return(0,d.jsx)(Pj,{tag:e,onSelect:function(){m(e)}},e)})):[]}),[xe,m]),ve=l.useMemo((function(){return O&&ie&&ie.id?O.find((function(e){return e.id===ie.id})):null}),[O,ie]),be=l.useState(Z&&Z.pageBreakIndex||0),Ce=(0,s.Z)(be,2),je=Ce[0],ye=Ce[1],Ze=l.useMemo((function(){return n?pe&&!ie?[]:rZ(n,oe,je).map((function(e){return(0,d.jsx)(Sj,{assetShortHeader:e,onOpenDetails:function(){return r(e)},size:$y(se),margin:4},e.id)})):null}),[n,pe,ie,oe,je,se,r]),ke=l.useMemo((function(){return f&&g&&!fe?f.map((function(e,t){return(0,d.jsx)(Ej,{assetPack:e,onSelect:function(){return g(e)}},"".concat(e.tag,"-").concat(t))})):[]}),[f,g,fe]),we=l.useMemo((function(){var e=[],t=[],n=[],r=[];if(!u||!N||fe)return{allStandAlonePackTiles:[],allBundlePackTiles:[]};h&&u.forEach((function(i){var o=!!N&&!!N.find((function(e){return e.id===i.id})),a=(0,d.jsx)(Ij,{assetPackListingData:i,onSelect:function(){h(i)},owned:o},i.id);i.includedListableProductIds&&i.includedListableProductIds.length?o?r.push(a):n.push(a):o?t.push(a):e.push(a)}));var i=[].concat(r,n);return{allStandAlonePackTiles:[].concat(t,(0,v.Z)(fj(e,ke,2,1))),allBundlePackTiles:i}}),[u,h,ke,N,fe]),Te=we.allStandAlonePackTiles,Se=we.allBundlePackTiles,Pe=l.useMemo((function(){return!p||!x||fe||pe?[]:p.map((function(e,t){return(0,d.jsx)(Aj,{privateGameTemplateListingData:e,onSelect:function(){x(e)},owned:!!U&&!!U.find((function(t){return t.id===e.id}))},e.id)}))}),[p,x,U,fe,pe]),Ee=ie?ie.thumbnailUrl?ie.thumbnailUrl:ie.previewImageUrls?ie.previewImageUrls[0]:null:null;l.useEffect((function(){(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ve){e.next=3;break}return G(null),e.abrupt("return");case 3:return e.prev=3,e.next=6,(0,oc.D1)(ve.sellerId);case 6:t=e.sent,G(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))()}),[ve]);var Me=l.useMemo((function(){return ie&&I&&ie.authors?ie.authors.map((function(e){return I.find((function(t){return t.name===e.name}))})).filter(Boolean):[]}),[ie,I]),Le=l.useMemo((function(){return ie&&E&&ie.licenses?ie.licenses.map((function(e){return E.find((function(t){return t.name===e.name}))})).filter(Boolean):[]}),[ie,E]),Ae=l.useMemo((function(){return Xy({productId:ie&&ie.id?ie.id:null,receivedProducts:N,productPurchases:H,allProductListingDatas:O})}),[H,ie,O,N]);return(0,d.jsxs)(Tt.Z,{ref:ce,id:"asset-store-listing",style:(0,a.Z)((0,a.Z)({},iZ.scrollView),y?{overflow:"hidden"}:{}),children:[!Ze&&!de&&(0,d.jsx)(Xe.Z,{}),!Ze&&de&&(0,d.jsx)(fr.Z,{onRetry:ue,children:(0,d.jsx)(b.Trans,{id:"Can't load the results. Verify your internet connection or retry later."})}),Z&&n&&n.length>nZ(0)&&je>0&&(0,d.jsx)(oZ,{currentPage:Z,pageBreakIndex:je,setPageBreakIndex:ye,assetShortHeaders:n,scrollView:ce.current}),!ie&&Pe.length&&0===je?(0,d.jsx)(L.x1,{expand:!0,children:(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,children:(0,d.jsx)(pj.Z,{cols:eZ(se,le),style:iZ.grid,cellHeight:"auto",spacing:4,children:Pe})})}):null,!ie&&Se.length&&0===je?(0,d.jsx)(L.x1,{expand:!0,children:(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,children:(0,d.jsx)(pj.Z,{cols:eZ(se,le),style:iZ.grid,cellHeight:"auto",spacing:4,children:Se})})}):null,!ie&&Te.length&&0===je?(0,d.jsx)(L.x1,{expand:!0,children:(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,children:(0,d.jsx)(pj.Z,{cols:eZ(se,le),style:iZ.grid,cellHeight:"auto",spacing:4,children:Te})})}):null,ie&&(0,d.jsx)(L.sg,{children:(0,d.jsxs)(C.ep,{children:[Ee&&(0,d.jsxs)("div",{style:iZ.previewImageContainer,children:[(0,d.jsx)(Hg.W,{style:iZ.previewImage,src:ie.thumbnailUrl?ie.thumbnailUrl:ie.previewImageUrls?ie.previewImageUrls[0]:"",alt:"Preview image of asset pack ".concat(ie.name)},ie.name),(0,d.jsx)(L.hS,{})]}),(0,d.jsxs)(L.sg,{noMargin:!0,alignItems:"flex-start",expand:!0,children:[(0,d.jsx)(F.Z,{size:"bold-title",children:ie.name}),!!Me&&Me.length>0&&(0,d.jsxs)(F.Z,{size:"body",displayInlineAsSpan:!0,children:[(0,d.jsx)(b.Trans,{id:"by"})," ",Me.map((function(e,t){return(0,d.jsxs)(l.Fragment,{children:[t>0&&(0,d.jsx)(d.Fragment,{children:", "}),(0,d.jsx)(Ie.Z,{href:e.website,onClick:function(){return Y.ZP.openExternalURL(e.website)},children:e.name},e.name)]},e.name)}))]}),!!Le&&Le.length>0&&(0,d.jsx)(F.Z,{size:"body",children:(0,d.jsx)(b.Trans,{id:"Type of License: <0>{0}</0>",values:{0:Le[0].name},components:[(0,d.jsx)(Ie.Z,{href:Le[0].website,onClick:function(){return Y.ZP.openExternalURL(Le[0].website)}})]})}),W&&(0,d.jsxs)(F.Z,{displayInlineAsSpan:!0,size:"sub-title",children:[(0,d.jsx)(b.Trans,{id:"by"})," ",(0,d.jsx)(Ie.Z,{onClick:function(){return Q(!0)},href:"#",children:W.username||""})]}),Ae&&h&&(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsxs)(L.x1,{noMargin:!0,children:[(0,d.jsx)(F.Z,{size:"sub-title",children:(0,d.jsx)(b.Trans,{id:"Licensing"})}),(0,d.jsx)(oi.Z,{size:"small",helpPagePath:"https://gdevelop.io/page/asset-store-license-agreement"})]}),(0,d.jsx)(Hy,{productType:"asset-pack",ownedLicense:Ae}),(0,d.jsx)("div",{style:iZ.openProductContainer,children:(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Open in Store"}),onClick:function(){if(ie.id&&O&&Z){var e=O.find((function(e){return e.id===ie.id}));e&&h(e,{forceProductPage:!0})}},primary:!0})})]})]})]})}),ie&&(me.length||Ze&&Ze.length)?(0,d.jsx)(L.sg,{children:(0,d.jsx)(F.Z,{size:"section-title",children:(0,d.jsx)(b.Trans,{id:"Content"})})}):null,oe.length>1&&j?(0,d.jsx)(L.sg,{children:(0,d.jsx)(L.x1,{children:(0,d.jsx)(Oy,{steps:oe.map((function(e,t){return t===oe.length-1?{label:gj()(e)}:{label:gj()(e),onClick:function(){j(t)},href:"#"}}))})})}):null,ie&&me.length?(0,d.jsxs)(L.sg,{justifyContent:"center",children:[(0,d.jsx)(pj.Z,{style:iZ.grid,cellHeight:"auto",cols:tZ(se,le),spacing:4,children:me}),(0,d.jsx)(L.hS,{})]}):null,te?(0,d.jsx)(Xe.Z,{}):Ze&&Ze.length?(0,d.jsx)(pj.Z,{style:iZ.grid,cellHeight:"auto",children:Ze}):ie&&ie.content&&(0,$C.s0)(ie)?(0,d.jsx)(Ay,{assetPack:ie}):null,Ze&&!Ze.length&&!Se.length&&!Te.length&&!Pe.length&&(!ie||!ie.content||!(0,$C.s0)(ie))&&ge,h&&x&&K&&W&&(0,d.jsx)(Ma.Z,{userId:W.id,onClose:function(){return Q(!1)},onAssetPackOpen:function(e){h(e),Q(!1),G(null)},onGameTemplateOpen:function(e){x(e),Q(!1),G(null)}}),Z&&n&&n.length>nZ(0)&&(0,d.jsx)(oZ,{currentPage:Z,pageBreakIndex:je,setPageBreakIndex:ye,assetShortHeaders:n,scrollView:ce.current})]})})),sZ=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.80498 0.154763C6.99565 -0.0449861 7.31215 -0.0523465 7.5119 0.138323L11.1786 3.63832C11.2774 3.73267 11.3333 3.86336 11.3333 4C11.3333 4.13664 11.2774 4.26733 11.1786 4.36168L7.5119 7.86168C7.31215 8.05235 6.99565 8.04499 6.80498 7.84524C6.61431 7.64549 6.62167 7.32899 6.82142 7.13832L10.1092 4L6.82142 0.861679C6.62167 0.671009 6.61431 0.354512 6.80498 0.154763Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.666656 4C0.666656 3.72386 0.890514 3.5 1.16666 3.5H10.6667C10.9428 3.5 11.1667 3.72386 11.1667 4C11.1667 4.27614 10.9428 4.5 10.6667 4.5H1.16666C0.890514 4.5 0.666656 4.27614 0.666656 4Z",fill:"currentColor"})]}))})),lZ={previewBackground:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",padding:10,width:300,height:250},chip:{marginBottom:2,marginRight:2},previewImage:{position:"relative",maxWidth:"100%",maxHeight:"100%",verticalAlign:"middle",pointerEvents:"none",flex:.6},arrowContainer:{padding:6}},cZ=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},uZ=l.forwardRef((function(e,t){var n=e.onTagSelection,r=e.assetShortHeader,c=e.onOpenDetails,u=e.onAssetLoaded,p=e.onPrivateAssetPackSelection,f=e.onPrivateGameTemplateSelection,h=l.useContext(tj.KY),g=h.authors,x=h.licenses,m=h.environment,v=h.error,j=h.useSearchItem,y=l.useState(null),Z=(0,s.Z)(y,2),k=Z[0],w=Z[1],T=l.useState(null),S=(0,s.Z)(T,2),P=S[0],E=S[1],I=l.useState(null),A=(0,s.Z)(I,2),O=A[0],R=A[1],D=(0,$C.kt)(r),_=l.useContext(My.Z).fetchPrivateAsset,B=l.useState([]),N=(0,s.Z)(B,2),U=N[0],H=N[1],V=l.useState(null),z=(0,s.Z)(V,2),W=z[0],G=z[1],q=l.useRef(null);l.useImperativeHandle(t,(function(){return{getScrollPosition:function(){var e=q.current;return e?e.getScrollPosition():0},scrollToPosition:function(e){var t=q.current;t&&t.scrollToPosition(e)}}}));var X=function(e){return(0,a.Z)((0,a.Z)({},lZ.previewImage),{},{imageRendering:(0,$C.V0)(e)?(0,Cj.g)():void 0})},J=l.useCallback((function(){(0,o.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,w(null),!D){e.next=8;break}return e.next=5,_(r,{environment:m});case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,(0,$C.WY)(r,{environment:m});case 10:e.t0=e.sent;case 11:if(t=e.t0){e.next=15;break}throw console.error("Cannot load private asset"),new Error("Cannot load private asset");case 15:w(t),"sprite"===t.objectType&&(n=t.objectAssets[0].object.animations[0].name,E(n)),e.next=23;break;case 19:e.prev=19,e.t1=e.catch(0),console.error("Error while loading asset:",e.t1),R(e.t1);case 23:u&&u();case 24:case"end":return e.stop()}}),e,null,[[0,19]])})))()}),[u,D,_,r,m]),Q=l.useMemo((function(){return!(0,$C.V0)(r)}),[r]);l.useEffect((function(){k||J()}),[k,J]);var ee=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var t,n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,0!==(t=k&&k.authorIds||[]).length){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,(0,oc.TL)(t);case 6:n=e.sent,r=Object.keys(n).map((function(e){return n[e]})),H(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error while loading author public profiles:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[k]);l.useEffect((function(){ee()}),[ee]);var te=k&&g?k.authors.map((function(e){return g.find((function(t){return t.name===e}))})).filter(Boolean):[],ne=!k||k.authors.length>0&&!g||k.authorIds&&U.length>0&&0===U.length,re=k&&x?x.find((function(e){return e.name===k.license})):null,ie=k&&k.objectAssets[0]?function(e){var t={};return e.resources.forEach((function(e){t[e.name]=e})),t}(k.objectAssets[0]):{},oe=k?k.objectAssets[0].object.animations:null,ae=oe?oe.find((function(e){return e.name===P})):null,se=ae?ae.directions[0]:null,le=k&&se?se.sprites.map((function(e){return ie[e.image]})):null,ce=j("",null,null,l.useMemo((function(){return[new ej.cx(r)]}),[r])),ue=ce&&ce.slice(0,60);return(0,d.jsx)(Tt.Z,{ref:q,children:(0,d.jsxs)(L.sg,{expand:!0,noMargin:!0,children:[(0,d.jsx)(L.x1,{justifyContent:"space-between",noMargin:!0,children:(0,d.jsxs)(L.sg,{children:[(0,d.jsxs)(C.pJ,{alignItems:"baseline",noMargin:!0,children:[(0,d.jsx)(F.Z,{size:"block-title",displayInlineAsSpan:!0,children:r.name}),!ne&&(0,d.jsxs)(C.pJ,{noMargin:!0,children:[(0,d.jsx)(F.Z,{size:"body",children:(0,d.jsx)(b.Trans,{id:"by"})}),!!te&&te.map((function(e){return(0,d.jsx)(F.Z,{size:"body",children:(0,d.jsx)(Ie.Z,{href:e.website,onClick:function(){return Y.ZP.openExternalURL(e.website)},children:e.name},e.name)},e.name)})),!!U.length&&U.map((function(e){var t=e.username||"GDevelop user";return(0,d.jsx)(F.Z,{size:"body",children:(0,d.jsx)(Ie.Z,{href:"#",onClick:function(){return G(e)},children:t},e.id)},e.id)}))]})]}),(0,d.jsx)(L.x1,{alignItems:"center",children:(0,d.jsxs)("div",{style:{flexWrap:"wrap"},children:[r.tags.slice(0,5).map((function(e,t){return(0,d.jsxs)(l.Fragment,{children:[0!==t&&(0,d.jsx)(L.LZ,{}),(0,d.jsx)(be.Z,{size:"small",style:lZ.chip,label:cZ(e),onClick:function(){n(e)}})]},e)})),r.tags.length>5&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.LZ,{}),(0,d.jsx)(be.Z,{size:"small",style:lZ.chip,label:(0,d.jsx)(b.Trans,{id:"+ {0} tag(s)",values:{0:r.tags.length-5}})})]})]})})]})}),(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsxs)(L.sg,{children:[k?(0,d.jsxs)(d.Fragment,{children:["sprite"===k.objectType&&le&&"string"===typeof P&&se&&(0,d.jsx)(Py.Z,{animationName:P,resourceNames:le.map((function(e){return e.name})),getImageResourceSource:function(e){var t=ie[e];return t?t.file:""},isImageResourceSmooth:function(){return Q},timeBetweenFrames:se.timeBetweenFrames,isLooping:!0,hideCheckeredBackground:!0,deactivateControls:!0,displaySpacedView:!0,fixedHeight:250,fixedWidth:300,isAssetPrivate:D}),"sprite"!==k.objectType&&(0,d.jsx)("div",{style:lZ.previewBackground,children:D?(0,d.jsx)(yj.Z,{style:X(k),url:k.previewImageUrls[0],alt:k.name}):(0,d.jsx)(Hg.W,{style:X(k),src:k.previewImageUrls[0],alt:k.name})})]}):(0,d.jsx)("div",{style:lZ.previewBackground,children:(0,d.jsx)(Xe.Z,{})}),oe&&oe.length>1&&"string"===typeof P&&(0,d.jsx)(de.Z,{elevation:4,variant:"outlined",background:"dark",children:(0,d.jsxs)(L.x1,{justifyContent:"center",alignItems:"center",noMargin:!0,children:[(0,d.jsx)("div",{style:lZ.arrowContainer,children:(0,d.jsx)(M.Z,{size:"small",onClick:function(){var e=oe.findIndex((function(e){return e.name===P})),t=0===e?oe.length-1:e-1;E(oe[t].name)},children:(0,d.jsx)(uy,{})})}),(0,d.jsx)(K.Z,{value:P,onChange:function(e,t,n){E(n)},fullWidth:!0,textAlign:"center",disableUnderline:!0,children:oe.map((function(e){var t=!e.name;return(0,d.jsx)($.Z,{value:e.name,label:t?{id:"Default"}:cZ(e.name),shouldNotTranslate:!t},e.name)}))}),(0,d.jsx)("div",{style:lZ.arrowContainer,children:(0,d.jsx)(M.Z,{size:"small",onClick:function(){var e=oe.findIndex((function(e){return e.name===P})),t=e===oe.length-1?0:e+1;E(oe[t].name)},children:(0,d.jsx)(sZ,{})})})]})})]}),(0,d.jsx)(L.sg,{expand:!0,children:k?(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(F.Z,{size:"body",children:!!re&&(0,d.jsx)(b.Trans,{id:"Type of License: <0>{0}</0>",values:{0:re.name},components:[(0,d.jsx)(Ie.Z,{href:re.website,onClick:function(){return Y.ZP.openExternalURL(re.website)}})]})}),(0,d.jsx)(F.Z,{size:"body",displayInlineAsSpan:!0,children:(0,d.jsx)(Ke.r,{source:k.description,allowParagraphs:!0})})]}):O?(0,d.jsx)(fr.Z,{onRetry:J,children:(0,d.jsx)(b.Trans,{id:"Error while loading the asset. Verify your internet connection or try again later."})}):(0,d.jsx)(Xe.Z,{})})]}),k&&(0,d.jsxs)(L.sg,{expand:!0,children:[(0,d.jsx)(L.LZ,{}),(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)(F.Z,{size:"block-title",displayInlineAsSpan:!0,children:(0,d.jsx)(b.Trans,{id:"You might like"})})}),(0,d.jsx)(L.x1,{expand:!0,noMargin:!0,justifyContent:"center",children:(0,d.jsx)(aZ,{assetShortHeaders:ue,onOpenDetails:function(e){w(null),c(e)},noScroll:!0,noResultsPlaceHolder:(0,d.jsx)(L.x1,{alignItems:"flex-start",children:(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"No similar asset was found."})})}),error:v})})]}),W&&(0,d.jsx)(Ma.Z,{userId:W.id,onClose:function(){return G(null)},onAssetPackOpen:function(e){p(e),G(null)},onGameTemplateOpen:function(e){f(e),G(null)}})]})})})),dZ=n(36465),pZ=n(39700),fZ=n(41693),hZ={selectedMedia:{width:"100%",aspectRatio:"16 / 9",objectFit:"cover",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"},carouselItem:{display:"inline-block",outlineOffset:-1,borderRadius:4},imageCarouselItem:{height:80,aspectRatio:"16 / 9",display:"block",borderRadius:4},mobileImageCarouselItem:{aspectRatio:"16 / 9",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"},desktopGallery:{flex:1,display:"grid",grid:"auto / auto-flow max-content",overflowX:"scroll",gap:"8px"},mobileGrid:{overflowX:"scroll",overflowY:"hidden",scrollSnapType:"x mandatory"},flex:{display:"flex"},flexColumn:{display:"flex",flexDirection:"column"},disabledText:{opacity:.6}},gZ=function(e){var t=e.mediaItems,n=e.altTextTemplate,r=e.horizontalOuterMarginToEatOnMobile,i=l.useState(0),o=(0,s.Z)(i,2),c=o[0],u=o[1],p=(0,w.U)().isMobile,f=p&&r?2*r:0,h=l.useMemo((function(){return(0,R.Z)({"spacing-xs-1":{margin:0,"& > .MuiGrid-item:first-child":{paddingLeft:f},"& > .MuiGrid-item:last-child":{paddingRight:f}},root:p?{scrollbarHeight:"none","-ms-overflow-style":"none","&::-webkit-scrollbar":{height:0}}:void 0})}),[f,p])(),g=l.useState(0),x=(0,s.Z)(g,2),m=x[0],v=x[1],b=l.useState(0),j=(0,s.Z)(b,2),y=j[0],Z=j[1],k=l.useState(0),T=(0,s.Z)(k,2),S=T[0],P=T[1],E=Math.max(m-30-(r||0),0)||320;l.useEffect((function(){if(E&&y){var e=Math.round(y/(E+1));P(e)}}),[E,y]);var I=t[c];return p?(0,d.jsxs)("div",{style:(0,a.Z)((0,a.Z)({},hZ.flexColumn),{},{marginLeft:r?-r:0,marginRight:r?-r:0}),children:[(0,d.jsx)(xt.Z,{bounds:!0,onResize:function(e){v(e.bounds.width)},children:function(e){e.contentRect;var i=e.measureRef;return(0,d.jsx)("div",{style:hZ.flex,ref:i,children:(0,d.jsx)(fZ.Z,{classes:h,container:!0,spacing:1,wrap:"nowrap",style:hZ.mobileGrid,onScroll:function(e){return Z(e.currentTarget.scrollLeft)},children:t.map((function(e,t){var i=e.kind,o=e.url;return(0,d.jsx)(fZ.Z,{item:!0,style:{scrollSnapAlign:r?"center":"start"},children:(0,d.jsx)(pZ.Z,{children:"image"===i?(0,d.jsx)(Hg.W,{src:o,style:(0,a.Z)((0,a.Z)({},hZ.mobileImageCarouselItem),{},{height:E/(16/9)}),alt:n.replace(/{mediaIndex}/g,String(c+1))}):(0,d.jsx)("div",{style:hZ.mobileImageCarouselItem,children:(0,d.jsx)("audio",{controls:!0,src:o,children:"Audio preview is unsupported."})})})},o)}))})})}}),(0,d.jsx)(L.x1,{justifyContent:"center",children:(0,d.jsxs)(F.Z,{noMargin:!0,size:"body2",style:hZ.disabledText,children:[S+1,"/",t.length]})})]}):(0,d.jsxs)(C.ak,{noMargin:!0,children:["image"===I.kind?(0,d.jsx)(Hg.W,{style:hZ.selectedMedia,src:I.url,alt:n.replace(/{mediaIndex}/g,String(c+1))}):(0,d.jsx)("div",{style:hZ.selectedMedia,children:(0,d.jsx)("audio",{controls:!0,src:I.url,children:"Audio preview is unsupported."})}),(0,d.jsx)("div",{style:hZ.desktopGallery,children:t.map((function(e,t){var r=e.kind,i=e.url;return(0,d.jsx)("div",{onClick:function(){return u(t)},tabIndex:0,style:(0,a.Z)((0,a.Z)({},hZ.carouselItem),{},{outline:t===c?"solid 1px white":void 0}),onKeyPress:function(e){(0,kn.ph)(e)&&u(t)},children:"image"===r?(0,d.jsx)(Hg.W,{src:i,style:hZ.imageCarouselItem,alt:n.replace(/{mediaIndex}/g,(t+1).toString())}):(0,d.jsx)("img",{src:"res/audio-placeholder.jpg",style:hZ.imageCarouselItem,alt:"sound"})},i)}))})]})},xZ=n(62903),mZ=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"38",height:"12",viewBox:"0 0 38 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("path",{d:"M16.5592 11.4736H13.6008L15.4498 0.293523H18.4085L16.5592 11.4736ZM11.112 0.293523L8.29154 7.9833L7.9578 6.32739L7.9581 6.32799L6.96263 1.30017C6.96263 1.30017 6.84226 0.293523 5.55925 0.293523H0.89651L0.841797 0.482829C0.841797 0.482829 2.26767 0.774713 3.93641 1.76072L6.50669 11.4739H9.58915L14.296 0.293523H11.112ZM34.3816 11.4736H37.0981L34.7296 0.293224H32.3515C31.2533 0.293224 30.9858 1.12641 30.9858 1.12641L26.5735 11.4736H29.6575L30.2742 9.81296H34.0351L34.3816 11.4736ZM31.1262 7.51886L32.6807 3.33498L33.5551 7.51886H31.1262ZM26.8048 2.98209L27.227 0.58122C27.227 0.58122 25.9242 0.09375 24.5661 0.09375C23.098 0.09375 19.6116 0.725069 19.6116 3.79494C19.6116 6.68328 23.7035 6.71917 23.7035 8.23631C23.7035 9.75345 20.0332 9.4816 18.8219 8.5249L18.3821 11.0352C18.3821 11.0352 19.7031 11.6665 21.7214 11.6665C23.7403 11.6665 26.786 10.6381 26.786 7.83885C26.786 4.93197 22.6573 4.66132 22.6573 3.39749C22.6576 2.13335 25.5388 2.29574 26.8048 2.98209Z",fill:"#2566AF"}),(0,d.jsx)("path",{d:"M7.9581 6.32744L6.96263 1.29961C6.96263 1.29961 6.84226 0.292969 5.55925 0.292969H0.89651L0.841797 0.482275C0.841797 0.482275 3.08289 0.939241 5.23249 2.65137C7.28787 4.28784 7.9581 6.32744 7.9581 6.32744Z",fill:"#E6A540"})]}))})),vZ=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"25",height:"16",viewBox:"0 0 25 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("path",{d:"M8.08247 15.3256C12.2238 15.3256 15.581 12.0225 15.581 7.94798C15.581 3.87341 12.2238 0.570312 8.08247 0.570312C3.94117 0.570312 0.583984 3.87341 0.583984 7.94798C0.583984 12.0225 3.94117 15.3256 8.08247 15.3256Z",fill:"#EB001B"}),(0,d.jsx)("path",{d:"M17.1391 15.3256C21.2804 15.3256 24.6376 12.0225 24.6376 7.94798C24.6376 3.87341 21.2804 0.570312 17.1391 0.570312C12.9978 0.570312 9.64062 3.87341 9.64062 7.94798C9.64062 12.0225 12.9978 15.3256 17.1391 15.3256Z",fill:"#F79E1B"}),(0,d.jsx)("path",{d:"M12.6086 2.05566C14.4141 3.40174 15.5766 5.53486 15.5766 7.93279C15.5766 10.3307 14.4141 12.4675 12.6086 13.8136C10.8032 12.4675 9.64062 10.3344 9.64062 7.93279C9.64062 5.53118 10.8069 3.40174 12.6086 2.05566Z",fill:"#FF5F00"})]}))})),bZ=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"15",height:"18",viewBox:"0 0 15 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("path",{d:"M13.3885 5.14941C13.3724 5.25071 13.354 5.35427 13.3333 5.46066C12.6218 9.05468 10.1877 10.2963 7.07893 10.2963H5.49607C5.11589 10.2963 4.79552 10.5679 4.73628 10.9369L3.92587 15.9937L3.69638 17.4271C3.68724 17.484 3.69073 17.5421 3.70661 17.5975C3.72249 17.6529 3.75039 17.7043 3.78838 17.7481C3.82637 17.7919 3.87355 17.827 3.92668 17.8511C3.97981 17.8753 4.03761 17.8878 4.09612 17.8878H6.90351C7.23595 17.8878 7.51836 17.6501 7.5707 17.3275L7.59831 17.1872L8.12688 13.8869L8.16082 13.7058C8.21258 13.3821 8.49557 13.1444 8.82801 13.1444H9.24788C11.9678 13.1444 14.0971 12.0579 14.7194 8.91377C14.9794 7.60032 14.8448 6.50361 14.1569 5.73229C13.9389 5.49369 13.6785 5.29617 13.3885 5.14941Z",fill:"#179BD7"}),(0,d.jsx)("path",{d:"M12.6443 4.85595C12.4171 4.79129 12.186 4.74083 11.9524 4.70486C11.4907 4.63505 11.0241 4.60156 10.557 4.60469H6.32839C6.16746 4.60457 6.0118 4.6611 5.88954 4.76406C5.76728 4.86701 5.68649 5.00961 5.66177 5.16607L4.76221 10.7719L4.73633 10.9354C4.76435 10.7569 4.85637 10.5943 4.99573 10.4768C5.13509 10.3593 5.31259 10.2947 5.49612 10.2948H7.07898C10.1878 10.2948 12.6219 9.05266 13.3333 5.4592C13.3546 5.35281 13.3724 5.24925 13.3886 5.14796C13.2008 5.05109 13.0051 4.96988 12.8036 4.90519C12.7508 4.88794 12.6977 4.87152 12.6443 4.85595Z",fill:"#222D65"}),(0,d.jsx)("path",{d:"M5.66241 5.16545C5.68691 5.00894 5.76766 4.86628 5.88998 4.76338C6.01231 4.66047 6.16809 4.60415 6.32903 4.60464H10.5576C11.0586 4.60464 11.5262 4.6369 11.953 4.7048C12.2418 4.74946 12.5266 4.81625 12.8048 4.90457C13.0148 4.97304 13.2097 5.05396 13.3898 5.14734C13.6014 3.81917 13.388 2.91487 12.6582 2.09601C11.8535 1.19454 10.4012 0.808594 8.54284 0.808594H3.14778C2.76817 0.808594 2.44435 1.08022 2.38569 1.44976L0.138512 15.4642C0.128045 15.5293 0.132028 15.5958 0.150185 15.6592C0.168343 15.7226 0.200245 15.7814 0.243697 15.8315C0.287149 15.8817 0.34112 15.9219 0.401897 15.9496C0.462674 15.9772 0.528815 15.9916 0.595769 15.9916H3.92656L4.76285 10.7712L5.66241 5.16545Z",fill:"#253B80"})]}))})),CZ={display:"flex",justifyContent:"center",alignItems:"center",padding:"4px 8px",borderRadius:8},jZ=function(e){var t=e.children,n=l.useContext(f.Z);return(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},CZ),{},{background:n.palette.secondary}),children:t})},yZ=function(){return(0,d.jsxs)(C.pJ,{children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Secure Checkout:"})}),(0,d.jsx)(jZ,{children:(0,d.jsx)(bZ,{})}),(0,d.jsx)(jZ,{children:(0,d.jsx)(mZ,{})}),(0,d.jsx)(jZ,{children:(0,d.jsx)(vZ,{})})]})},ZZ=n(23883),kZ=n(30268),wZ=function(e){var t=e.privateAssetPackListingData,n=e.usageType,r=e.onClose,c=e.simulateAppStoreProduct,u=l.useContext(tr.ZP),p=u.profile,f=u.onOpenLoginDialog,h=u.onOpenCreateAccountDialog,g=u.receivedAssetPacks,x=u.onPurchaseSuccessful,m=u.onRefreshAssetPackPurchases,v=u.assetPackPurchases,j=l.useState(!1),y=(0,s.Z)(j,2),Z=y[0],k=y[1],w=l.useState(!g),T=(0,s.Z)(w,2),S=T[0],P=T[1],E=l.useState(!1),I=(0,s.Z)(E,2),M=I[0],A=I[1],O=l.useState(!1),R=(0,s.Z)(O,2),D=R[0],_=R[1],B=l.useState(""),N=(0,s.Z)(B,2),U=N[0],H=N[1],V=(0,lt.Z)().showAlert,z=(0,zy.PN)()||c,W=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var r,o,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}return e.abrupt("return");case 2:if(_(!1),!z){e.next=12;break}return e.prev=4,k(!0),e.next=8,(0,zy.ZA)(t.appStoreProductId);case 8:return e.prev=8,k(!1),e.finish(8);case 11:return e.abrupt("return");case 12:if(r=t.prices.find((function(e){return e.usageType===n}))){e.next=18;break}return console.error("Unable to find the price for the usage type",n),e.next=17,V({title:{id:"An error happened"},message:{id:"Unable to find the price for this asset pack. Please try again later."}});case 17:return e.abrupt("return");case 18:e.prev=18,k(!0),o=(0,dZ.RB)((0,a.Z)({productId:t.id,priceName:r.name,userId:p.id,userEmail:p.email},U?{password:U}:void 0)),Y.ZP.openExternalURL(o),e.next=36;break;case 24:if(e.prev=24,e.t0=e.catch(18),!(s=(0,_o.T)(e.t0))||403!==s.status||"auth/wrong-password"!==s.code){e.next=32;break}return e.next=30,V({title:{id:"Operation not allowed"},message:{id:"The password you entered is incorrect. Please try again."}});case 30:e.next=35;break;case 32:return console.error("Unable to get the checkout URL",e.t0),e.next=35,V({title:{id:"An error happened"},message:{id:"Unable to get the checkout URL. Please try again later."}});case 35:k(!1);case 36:return e.prev=36,H(""),e.finish(36);case 39:case"end":return e.stop()}}),e,null,[[4,,8,11],[18,24,36,39]])})));return function(){return e.apply(this,arguments)}}(),G=function(){Y.ZP.isDev()?_(!0):W()};l.useEffect((function(){G()}),[]),l.useEffect((function(){var e=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Z&&v&&v.find((function(e){return e.productId===t.id})))){e.next=3;break}return e.next=3,x();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[Z,v,t,x,m]),(0,oo.Y)((function(){m()}),Z?3900:null),l.useEffect((function(){var e;return(0,o.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g&&(e=setTimeout((function(){return P(!1)}),3e3));case 1:case"end":return t.stop()}}),t)})))(),function(){clearTimeout(e)}}),[g]),l.useEffect((function(){g&&(g.find((function(e){return e.id===t.id}))&&(Z?(k(!1),A(!0)):M||r()))}),[g,t,Z,r,S,M]);var q=p?M?{subtitle:(0,d.jsx)(b.Trans,{id:"Your purchase has been processed!"}),content:(0,d.jsx)(L.x1,{justifyContent:"center",alignItems:"center",children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"You can now go back to the asset store to use the assets in your games."})})})}:Z?{subtitle:z?(0,d.jsx)(b.Trans,{id:"Complete your purchase with the app store."}):(0,d.jsx)(b.Trans,{id:"Complete your payment on the web browser"}),content:z?(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(C.ak,{justifyContent:"center",alignItems:"center",children:[(0,d.jsx)(eo.Z,{size:40}),(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"The purchase will be linked to your account once done."})})]})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(L.x1,{justifyContent:"center",alignItems:"center",children:[(0,d.jsx)(eo.Z,{size:20}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Waiting for the purchase confirmation..."})})]}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(L.x1,{justifyContent:"center",children:(0,d.jsx)(Ta.Z,{children:(0,d.jsx)(b.Trans,{id:"Once you're done, come back to GDevelop and the assets will be added to your account automatically."})})})]})}:S?{subtitle:(0,d.jsx)(b.Trans,{id:"Loading your profile..."}),content:(0,d.jsx)(L.x1,{justifyContent:"center",alignItems:"center",children:(0,d.jsx)(eo.Z,{size:20})})}:{subtitle:(0,d.jsx)(b.Trans,{id:"The asset pack {0} will be linked to your account {1}.",values:{0:t.name,1:p.email}}),content:z?null:(0,d.jsx)(L.x1,{justifyContent:"center",alignItems:"center",children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"A new secure window will open to complete the purchase."})})})}:{subtitle:(0,d.jsx)(b.Trans,{id:"Log-in to purchase this item"}),content:(0,d.jsx)(Ac.Z,{onOpenLoginDialog:f,onOpenCreateAccountDialog:h,message:(0,d.jsx)(b.Trans,{id:"Asset packs will be linked to your user account and available for all your projects. Log-in or sign-up to purchase this pack (or restore your existing purchase)."}),justifyContent:"center"})},X=p&&!Z&&!M&&!S,K=[(0,d.jsx)(J.Z,{label:M?(0,d.jsx)(b.Trans,{id:"Close"}):(0,d.jsx)(b.Trans,{id:"Cancel"}),onClick:r},"cancel"),X?(0,d.jsx)(te.vF,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Continue"}),onClick:G},"continue"):null];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"{0}",values:{0:t.name}}),maxWidth:"sm",open:!0,onRequestClose:r,actions:K,onApply:M?r:G,cannotBeDismissed:!0,flexColumnBody:!0,children:[(0,d.jsxs)(C.pJ,{justifyContent:"center",alignItems:"center",children:[M&&(0,d.jsx)(kZ.Z,{}),(0,d.jsx)(F.Z,{size:"sub-title",children:q.subtitle})]}),q.content]}),D&&(0,d.jsx)(ZZ.Z,{onApply:W,onClose:function(){return _(!1)},passwordValue:U,setPasswordValue:H})]})},TZ=function(e,t){switch(e){case"small":return t?4:2;case"medium":default:return 3;case"large":return 4;case"xlarge":return 5}},SZ=["sprite","9patch","tiled","particleEmitter","font","audio","Scene3D::Model3DObject","partial"],PZ={sprite:{id:"Sprites"},"9patch":{id:"Panel sprites"},tiled:{id:"Tiled sprites"},"Scene3D::Model3DObject":{id:"3D model"},particleEmitter:{id:"Particle emitters"},font:{id:"Fonts"},audio:{id:"Audios"},partial:{id:"Other"}},EZ={disabledText:{opacity:.6},scrollview:{overflowX:"hidden"},grid:{margin:"0 2px"},leftColumnContainer:{flex:3,minWidth:0},rightColumnContainer:{flex:2},avatar:{width:20,height:20},ownedTag:{padding:"4px 8px",borderRadius:4,color:"black"},redeemConditionsContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 8px",backgroundColor:"#FF8569",color:"#1D1D26"},redeemDiamondIcon:{height:24}},IZ=function(e){var t=e.privateAssetPackListingData,n=e.privateAssetPackListingDatasFromSameCreator,r=e.onAssetPackOpen,c=e.onGameTemplateOpen,u=e.simulateAppStoreProduct,p=t.id,h=t.name,g=t.sellerId,x=l.useContext(tj.KY).privateAssetPackListingDatas,m=(0,lt.Z)().showAlert,v=l.useContext(tr.ZP),j=v.receivedAssetPacks,y=v.profile,Z=v.limits,k=v.assetPackPurchases,S=v.getAuthorizationHeader,P=v.onOpenLoginDialog,E=v.subscription,I=v.onPurchaseSuccessful,M=v.onRefreshAssetPackPurchases,A=l.useContext(xZ.q$),O=A.openCreditsPackageDialog,R=A.openCreditsUsageDialog,D=l.useState(t.prices[0].usageType),_=(0,s.Z)(D,2),B=_[0],N=_[1],U=l.useState(null),H=(0,s.Z)(U,2),V=H[0],z=H[1],W=l.useContext(Ro.o).openSubscriptionDialog,G=l.useState(null),q=(0,s.Z)(G,2),X=q[0],K=q[1],J=l.useState(!1),Q=(0,s.Z)(J,2),$=Q[0],ee=Q[1],te=l.useState(!1),ne=(0,s.Z)(te,2),re=ne[0],ie=ne[1],oe=l.useState(!1),ae=(0,s.Z)(oe,2),se=ae[0],le=ae[1],ce=l.useState(null),ue=(0,s.Z)(ce,2),de=ue[0],pe=ue[1],fe=l.useState(!1),he=(0,s.Z)(fe,2),ge=he[0],xe=he[1],me=l.useState(""),ve=(0,s.Z)(me,2),be=ve[0],Ce=ve[1],je=l.useState(null),ye=(0,s.Z)(je,2),Ze=ye[0],ke=ye[1],we=(0,w.U)(),Te=we.isLandscape,Se=we.isMediumScreen,Pe=we.windowSize,Ee=l.useContext(f.Z),Me=(0,zy.PN)()||u,Le=l.useMemo((function(){return Xy({productId:t?t.id:null,receivedProducts:j,productPurchases:k,allProductListingDatas:x})}),[k,t,x,j]),Ae=!!Le,Fe=l.useMemo((function(){return qy({product:X,productListingDatas:x,productListingData:t,receivedProducts:j,onProductOpen:function(e){return r(e,{forceProductPage:!0})}})}),[X,x,j,r,t]),Oe=l.useMemo((function(){return Yy({product:X,productListingDatas:x,receivedProducts:j,onProductOpen:function(e){return r(e,{forceProductPage:!0})}})}),[X,x,j,r]),Re=l.useMemo((function(){return Gy({otherProductListingDatasFromSameCreator:n,currentProductListingData:t,receivedProducts:j,onProductOpen:function(e){return r(e,{forceProductPage:!0})}})}),[t,n,r,j]),_e=function(){Y.ZP.isDev()?xe(!0):Be()},Be=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y&&!re){e.next=2;break}return e.abrupt("return");case 2:return ie(!0),e.prev=3,e.next=6,(0,dZ.Po)({privateAssetPackListingData:t,getAuthorizationHeader:S,userId:y.id,password:be});case 6:return e.next=8,Promise.all([M(),I()]);case 8:case 16:e.next=21;break;case 10:if(e.prev=10,e.t0=e.catch(3),!(n=(0,_o.T)(e.t0))||402!==n.status||"product-redemption/old-redeemed-subscription"!==n.code){e.next=18;break}return e.next=16,m({title:{id:"Error when claiming asset pack"},message:{id:"The monthly free asset pack perk was not part of your plan at the time you got your subscription to GDevelop. To enjoy this perk, please purchase a new subscription."}});case 18:return console.error("An error occurred when claiming the asset pack:",n),e.next=21,m({title:{id:"Error when claiming asset pack"},message:{id:"Something wrong happened when claiming the asset pack. Please check your internet connection or try again later."}});case 21:return e.prev=21,ie(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[3,10,21,24]])}))),[t,S,y,m,be,I,re,M]);l.useEffect((function(){(0,o.Z)((0,i.Z)().mark((function e(){var t,n,r,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ee(!0),e.prev=1,e.next=4,Promise.all([(0,$C.tL)(p),(0,oc.D1)(g)]);case 4:t=e.sent,n=(0,s.Z)(t,2),r=n[0],o=n[1],K(r),pe(o),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),(a=(0,_o.T)(e.t0))&&404===a.status?ke((0,d.jsx)(b.Trans,{id:"Asset pack not found - An error occurred, please try again later."})):ke((0,d.jsx)(b.Trans,{id:"An error occurred, please try again later."}));case 16:return e.prev=16,ee(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])})))()}),[p,g]);var Ne=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(X){e.next=2;break}return e.abrupt("return");case 2:if(!Ae){e.next=5;break}return r(t),e.abrupt("return");case 5:try{n=t.prices.find((function(e){return e.usageType===B})),(0,Ar.GU)({assetPackId:X.id,assetPackName:X.name,assetPackTag:X.tag,assetPackKind:"private",usageType:B,currency:n?n.currency:void 0}),z(t)}catch(i){console.warn("Unable to send event",i)}case 6:case"end":return e.stop()}}),e)}))),[X,t,Ae,r,B]),Ue=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var n,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&X){e.next=2;break}return e.abrupt("return");case 2:if(y&&Z){e.next=5;break}return P(),e.abrupt("return");case 5:if(!Ae){e.next=8;break}return r(t),e.abrupt("return");case 8:if((0,Ar.GU)({assetPackId:X.id,assetPackName:X.name,assetPackTag:X.tag,assetPackKind:"private",currency:"CREDITS",usageType:B}),n=Z.credits.userBalance.amount,o=t.creditPrices.find((function(e){return e.usageType===B}))){e.next=14;break}return console.error("Unable to find the price for the selected usage type",B),e.abrupt("return");case 14:if(a=o.amount,!(n<a)){e.next=18;break}return O({missingCredits:a-n}),e.abrupt("return");case 18:R({title:(0,d.jsx)(b.Trans,{id:"Purchase {0}",values:{0:X.name}}),message:(0,d.jsx)(b.Trans,{id:"You are about to use {assetPackCreditsAmount} credits to purchase the asset pack {0}. Continue?",values:{0:X.name,assetPackCreditsAmount:a}}),onConfirm:function(){return(0,dZ.LN)(S,{productId:t.id,usageType:B,userId:y.id})},successMessage:(0,d.jsx)(b.Trans,{id:"\ud83c\udf89 You can now use your assets!"})});case 19:case"end":return e.stop()}}),e)}))),[y,Z,t,X,r,Ae,O,B,R,S,P]),He=l.useMemo((function(){return Qy({product:X,productListingData:t,shouldSimulateAppStoreProduct:u})}),[X,t,u]),Ve=(0,dZ.ID)({subscription:E,privateAssetPackListingData:t,isAlreadyReceived:Ae});return(0,d.jsx)(b.I18n,{children:function(e){var n=e.i18n;return(0,d.jsxs)(d.Fragment,{children:[Ze?(0,d.jsx)(L.x1,{alignItems:"center",justifyContent:"center",expand:!0,children:(0,d.jsx)(De.Z,{kind:"error",children:Ze})}):$?(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(Xe.Z,{})}):X&&de?(0,d.jsx)(L.sg,{noOverflowParent:!0,expand:!0,noMargin:!0,children:(0,d.jsxs)(Tt.Z,{autoHideScrollbar:!0,style:EZ.scrollview,children:[(0,d.jsxs)(C.ep,{noColumnMargin:!0,noMargin:!0,forceMobileLayout:Se,noResponsiveLandscape:!0,children:[(0,d.jsx)("div",{style:EZ.leftColumnContainer,children:(0,d.jsx)(gZ,{mediaItems:He,altTextTemplate:"Asset pack ".concat(h," preview image or sound {mediaIndex}"),horizontalOuterMarginToEatOnMobile:8})}),(0,d.jsx)("div",{style:EZ.rightColumnContainer,children:(0,d.jsxs)(C.ak,{children:[(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",justifyContent:"space-between",children:[(0,d.jsx)(F.Z,{noMargin:!0,size:"title",children:X.name}),Ae&&(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},EZ.ownedTag),{},{backgroundColor:Ee.statusIndicator.success}),children:(0,d.jsx)(F.Z,{color:"inherit",noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"OWNED"})})})]}),(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[(0,d.jsx)(Ni.Z,{src:de.iconUrl,style:EZ.avatar}),(0,d.jsx)(F.Z,{displayInlineAsSpan:!0,size:"sub-title",children:(0,d.jsx)(Ie.Z,{onClick:function(){return le(!0)},href:"#",children:de.username||""})})]}),Ve&&(0,d.jsxs)("div",{style:EZ.redeemConditionsContainer,children:[(0,d.jsxs)(L.x1,{noMargin:!0,alignItems:"center",children:[(0,d.jsx)("img",{src:"res/small-diamond.svg",style:EZ.redeemDiamondIcon,alt:"diamond"}),(0,d.jsx)(F.Z,{color:"inherit",noMargin:!0,children:Ve.message})]}),(0,d.jsx)(L.LZ,{}),Ve.actionLabel&&(0,d.jsx)("div",{style:{flexShrink:0},children:(0,d.jsx)(T.Z,{primary:!0,label:re?(0,d.jsx)(b.Trans,{id:"Please wait"}):Ve.actionLabel,disabled:re,onClick:Ve.canRedeemAssetPack?_e:function(){return W({analyticsMetadata:{reason:"Claim asset pack"},filter:"individual"})}})})]}),(0,d.jsxs)(L.x1,{noMargin:!0,children:[(0,d.jsx)(F.Z,{size:"sub-title",children:(0,d.jsx)(b.Trans,{id:"Licensing"})}),(0,d.jsx)(oi.Z,{size:"small",helpPagePath:"https://gdevelop.io/page/asset-store-license-agreement"})]}),(0,d.jsx)(Vy,{value:B,onChange:N,product:t,ownedLicense:Le}),(0,d.jsx)(L.LZ,{}),Ae?(0,d.jsx)(Jy,{productListingData:t,onClick:function(){return r(t)},label:(0,d.jsx)(b.Trans,{id:"Browse assets"})}):(0,d.jsxs)(d.Fragment,{children:[!Me&&(0,d.jsx)(yZ,{}),!Ze&&(0,d.jsx)(Ky,{i18n:n,productListingData:t,selectedUsageType:B,onUsageTypeChange:N,simulateAppStoreProduct:u,isAlreadyReceived:Ae,onClickBuy:Ne,onClickBuyWithCredits:Ue})]})]})})]}),(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(F.Z,{size:"body2",displayInlineAsSpan:!0,children:(0,d.jsx)(Ke.r,{source:X.longDescription,allowParagraphs:!0})}),(0,d.jsx)(F.Z,{size:"sub-title",children:(0,d.jsx)(b.Trans,{id:"Content"})}),SZ.map((function(e){return X.content[e]?(0,d.jsx)("li",{children:(0,d.jsxs)(F.Z,{displayInlineAsSpan:!0,noMargin:!0,children:[X.content[e]," ",n._(PZ[e])]})},e):null}))]}),Oe&&Oe.length?(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(L.hS,{}),Oe,(0,d.jsx)(L.hS,{})]})}):null,Fe&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.x1,{children:(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Included in this bundle"})})}),(0,d.jsx)(L.x1,{children:(0,d.jsx)(pj.Z,{cols:TZ(Pe,Te),cellHeight:"auto",spacing:4,style:EZ.grid,children:Fe})})]}),Re&&Re.length>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.x1,{children:(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"From the same author"})})}),(0,d.jsx)(L.x1,{children:(0,d.jsx)(pj.Z,{cols:TZ(Pe,Te),cellHeight:"auto",spacing:4,style:EZ.grid,children:Re})})]})]})}):null,se&&(0,d.jsx)(Ma.Z,{userId:g,onClose:function(){return le(!1)},onAssetPackOpen:function(e){r(e),le(!1)},onGameTemplateOpen:function(e){c(e),le(!1)}}),ge&&(0,d.jsx)(ZZ.Z,{onApply:Be,onClose:function(){return xe(!1)},passwordValue:be,setPasswordValue:Ce}),!!V&&(0,d.jsx)(wZ,{privateAssetPackListingData:V,usageType:B,onClose:function(){return z(null)}})]})}})},MZ=n(1525),LZ={paper:{display:"flex",width:250},drawerPaper:{display:"flex",maxWidth:"80%"}},AZ={style:LZ.drawerPaper},FZ={keepMounted:!0},OZ=function(e){var t=e.open,n=e.onClose,r=e.children;return(0,w.U)().isMobile?(0,d.jsx)(vm.ZP,{anchor:"right",open:t,onClose:n,PaperProps:AZ,ModalProps:FZ,children:r}):t?(0,d.jsx)(de.Z,{style:LZ.paper,background:"medium",children:r}):null},RZ=n(27817),DZ=n(14331),_Z=function(e){var t=e.privateGameTemplateListingData,n=e.usageType,r=e.onClose,c=e.simulateAppStoreProduct,u=l.useContext(tr.ZP),p=u.profile,f=u.onOpenLoginDialog,h=u.onOpenCreateAccountDialog,g=u.receivedGameTemplates,x=u.onPurchaseSuccessful,m=u.onRefreshGameTemplatePurchases,v=u.gameTemplatePurchases,j=l.useState(!1),y=(0,s.Z)(j,2),Z=y[0],k=y[1],w=l.useState(!g),T=(0,s.Z)(w,2),S=T[0],P=T[1],E=l.useState(!1),I=(0,s.Z)(E,2),M=I[0],A=I[1],O=l.useState(!1),R=(0,s.Z)(O,2),D=R[0],_=R[1],B=l.useState(""),N=(0,s.Z)(B,2),U=N[0],H=N[1],V=(0,lt.Z)().showAlert,z=(0,zy.PN)()||c,W=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var r,o,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}return e.abrupt("return");case 2:if(_(!1),!z){e.next=12;break}return e.prev=4,k(!0),e.next=8,(0,zy.ZA)(t.appStoreProductId);case 8:return e.prev=8,k(!1),e.finish(8);case 11:return e.abrupt("return");case 12:if(r=t.prices.find((function(e){return e.usageType===n}))){e.next=18;break}return console.error("Unable to find the price for the usage type",n),e.next=17,V({title:{id:"An error happened"},message:{id:"Unable to find the price for this game template. Please try again later."}});case 17:return e.abrupt("return");case 18:e.prev=18,k(!0),o=(0,dZ.RB)((0,a.Z)({productId:t.id,priceName:r.name,userId:p.id,userEmail:p.email},U?{password:U}:void 0)),Y.ZP.openExternalURL(o),e.next=36;break;case 24:if(e.prev=24,e.t0=e.catch(18),!(s=(0,_o.T)(e.t0))||403!==s.status||"auth/wrong-password"!==s.code){e.next=32;break}return e.next=30,V({title:{id:"Operation not allowed"},message:{id:"The password you entered is incorrect. Please try again."}});case 30:e.next=35;break;case 32:return console.error("Unable to get the checkout URL",e.t0),e.next=35,V({title:{id:"An error happened"},message:{id:"Unable to get the checkout URL. Please try again later."}});case 35:k(!1);case 36:return e.prev=36,H(""),e.finish(36);case 39:case"end":return e.stop()}}),e,null,[[4,,8,11],[18,24,36,39]])})));return function(){return e.apply(this,arguments)}}(),G=function(){Y.ZP.isDev()?_(!0):W()};l.useEffect((function(){G()}),[]),l.useEffect((function(){var e=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Z&&v&&v.find((function(e){return e.productId===t.id})))){e.next=3;break}return e.next=3,x();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[Z,v,t,x,m]),(0,oo.Y)((function(){m()}),Z?3900:null),l.useEffect((function(){var e;return(0,o.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g&&(e=setTimeout((function(){return P(!1)}),3e3));case 1:case"end":return t.stop()}}),t)})))(),function(){clearTimeout(e)}}),[g]),l.useEffect((function(){g&&(g.find((function(e){return e.id===t.id}))&&(Z?(k(!1),A(!0)):M||r()))}),[g,t,Z,r,S,M]);var q=p?M?{subtitle:(0,d.jsx)(b.Trans,{id:"Your purchase has been processed!"}),content:(0,d.jsx)(L.x1,{justifyContent:"center",alignItems:"center",children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"You can now go back to the store to use your new game template."})})})}:Z?{subtitle:z?(0,d.jsx)(b.Trans,{id:"Complete your purchase with the app store."}):(0,d.jsx)(b.Trans,{id:"Complete your payment on the web browser"}),content:z?(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(C.ak,{justifyContent:"center",alignItems:"center",children:[(0,d.jsx)(eo.Z,{size:40}),(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"The purchase will be linked to your account once done."})})]})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(L.x1,{justifyContent:"center",alignItems:"center",children:[(0,d.jsx)(eo.Z,{size:20}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Waiting for the purchase confirmation..."})})]}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(L.x1,{justifyContent:"center",children:(0,d.jsx)(Ta.Z,{children:(0,d.jsx)(b.Trans,{id:"Once you're done, come back to GDevelop and the game template will be added to your account automatically."})})})]})}:S?{subtitle:(0,d.jsx)(b.Trans,{id:"Loading your profile..."}),content:(0,d.jsx)(L.x1,{justifyContent:"center",alignItems:"center",children:(0,d.jsx)(eo.Z,{size:20})})}:{subtitle:(0,d.jsx)(b.Trans,{id:"The game template {0} will be linked to your account {1}.",values:{0:t.name,1:p.email}}),content:z?null:(0,d.jsx)(L.x1,{justifyContent:"center",alignItems:"center",children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"A new secure window will open to complete the purchase."})})})}:{subtitle:(0,d.jsx)(b.Trans,{id:"Log-in to purchase this item"}),content:(0,d.jsx)(Ac.Z,{onOpenLoginDialog:f,onOpenCreateAccountDialog:h,message:(0,d.jsx)(b.Trans,{id:"Game templates will be linked to your user account and available for all your projects. Log-in or sign-up to purchase this game template. (or restore your existing purchase)."}),justifyContent:"center"})},X=p&&!Z&&!M&&!S,K=[(0,d.jsx)(J.Z,{label:M?(0,d.jsx)(b.Trans,{id:"Close"}):(0,d.jsx)(b.Trans,{id:"Cancel"}),onClick:r},"cancel"),X?(0,d.jsx)(te.vF,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Continue"}),onClick:G},"continue"):null];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"{0}",values:{0:t.name}}),maxWidth:"sm",open:!0,onRequestClose:r,actions:K,onApply:M?r:G,cannotBeDismissed:!0,flexColumnBody:!0,children:[(0,d.jsxs)(C.pJ,{justifyContent:"center",alignItems:"center",children:[M&&(0,d.jsx)(kZ.Z,{}),(0,d.jsx)(F.Z,{size:"sub-title",children:q.subtitle})]}),q.content]}),D&&(0,d.jsx)(ZZ.Z,{onApply:W,onClose:function(){return _(!1)},passwordValue:U,setPasswordValue:H})]})},BZ=function(e,t){switch(e){case"small":return t?4:2;case"medium":default:return 3;case"large":return 4;case"xlarge":return 5}},NZ={disabledText:{opacity:.6},scrollview:{overflowX:"hidden"},grid:{margin:"0 2px"},leftColumnContainer:{flex:3,minWidth:0},rightColumnContainer:{flex:2},avatar:{width:20,height:20},ownedTag:{padding:"4px 8px",borderRadius:4,color:"black"},playIcon:{width:20,height:20}},UZ=function(e){var t=e.privateGameTemplateListingData,n=e.privateGameTemplateListingDatasFromSameCreator,r=e.onGameTemplateOpen,c=e.onAssetPackOpen,u=e.onCreateWithGameTemplate,p=e.simulateAppStoreProduct,h=t.id,g=t.name,x=t.sellerId,m=l.useContext(Ry.mJ).privateGameTemplateListingDatas,v=l.useContext(tr.ZP),j=v.receivedGameTemplates,y=v.profile,Z=v.limits,k=v.gameTemplatePurchases,S=v.getAuthorizationHeader,P=v.onOpenLoginDialog,E=l.useContext(xZ.q$),I=E.openCreditsPackageDialog,M=E.openCreditsUsageDialog,A=l.useState(null),O=(0,s.Z)(A,2),R=O[0],D=O[1],_=l.useState(t.prices[0].usageType),B=(0,s.Z)(_,2),N=B[0],U=B[1],H=l.useState(null),V=(0,s.Z)(H,2),z=V[0],W=V[1],G=l.useState(!1),q=(0,s.Z)(G,2),X=q[0],K=q[1],J=l.useState(!1),Q=(0,s.Z)(J,2),$=Q[0],ee=Q[1],te=l.useState(null),ne=(0,s.Z)(te,2),re=ne[0],ie=ne[1],oe=l.useState(null),ae=(0,s.Z)(oe,2),se=ae[0],le=ae[1],ce=(0,w.U)(),ue=ce.windowSize,de=ce.isLandscape,pe=ce.isMediumScreen,fe=l.useContext(f.Z),he=(0,zy.PN)()||p,ge=l.useMemo((function(){return Xy({productId:t?t.id:null,receivedProducts:j,productPurchases:k,allProductListingDatas:m})}),[k,t,m,j]),xe=!!ge,me=l.useMemo((function(){return qy({product:R,productListingDatas:m,productListingData:t,receivedProducts:j,onProductOpen:r})}),[R,m,j,r,t]),ve=l.useMemo((function(){return Yy({product:R,productListingDatas:m,receivedProducts:j,onProductOpen:r})}),[R,m,j,r]),be=l.useMemo((function(){return Gy({otherProductListingDatasFromSameCreator:n,currentProductListingData:t,receivedProducts:j,onProductOpen:r})}),[n,t,j,r]);l.useEffect((function(){(0,o.Z)((0,i.Z)().mark((function e(){var t,n,r,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(!0),e.prev=1,e.next=4,Promise.all([(0,$C.kI)(h),(0,oc.D1)(x)]);case 4:t=e.sent,n=(0,s.Z)(t,2),r=n[0],o=n[1],D(r),ie(o),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),(a=(0,_o.T)(e.t0))&&404===a.status?le((0,d.jsx)(b.Trans,{id:"Game template not found - An error occurred, please try again later."})):le((0,d.jsx)(b.Trans,{id:"An error occurred, please try again later."}));case 16:return e.prev=16,K(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])})))()}),[h,x]);var Ce=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R){e.next=2;break}return e.abrupt("return");case 2:if(!xe){e.next=5;break}return u(t),e.abrupt("return");case 5:try{n=t.prices.find((function(e){return e.usageType===N})),(0,Ar.ux)({gameTemplateId:R.id,gameTemplateName:R.name,gameTemplateTag:R.tag,currency:n?n.currency:void 0,usageType:N}),W(t)}catch(r){console.warn("Unable to send event",r)}case 6:case"end":return e.stop()}}),e)}))),[R,t,xe,u,N]),je=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var n,r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&R){e.next=2;break}return e.abrupt("return");case 2:if(y&&Z){e.next=5;break}return P(),e.abrupt("return");case 5:if(!xe){e.next=8;break}return u(t),e.abrupt("return");case 8:if((0,Ar.ux)({gameTemplateId:R.id,gameTemplateName:R.name,gameTemplateTag:R.tag,usageType:N,currency:"CREDITS"}),n=Z.credits.userBalance.amount,r=t.creditPrices.find((function(e){return e.usageType===N}))){e.next=14;break}return console.error("Unable to find the price for the selected usage type",N),e.abrupt("return");case 14:if(o=r.amount,!(n<o)){e.next=18;break}return I({missingCredits:o-n}),e.abrupt("return");case 18:M({title:(0,d.jsx)(b.Trans,{id:"Purchase {0}",values:{0:R.name}}),message:(0,d.jsx)(b.Trans,{id:"You are about to use {gameTemplateCreditsAmount} credits to purchase the game template {0}. Continue?",values:{0:R.name,gameTemplateCreditsAmount:o}}),onConfirm:function(){return(0,dZ.LN)(S,{productId:t.id,usageType:N,userId:y.id})},successMessage:(0,d.jsx)(b.Trans,{id:"\ud83c\udf89 You can now use your template!"})});case 19:case"end":return e.stop()}}),e)}))),[y,Z,t,R,u,xe,I,N,M,S,P]),ye=l.useMemo((function(){return Qy({product:R,productListingData:t,shouldSimulateAppStoreProduct:p})}),[R,t,p]);return(0,d.jsx)(b.I18n,{children:function(e){var n=e.i18n;return(0,d.jsxs)(d.Fragment,{children:[se?(0,d.jsx)(L.x1,{alignItems:"center",justifyContent:"center",expand:!0,children:(0,d.jsx)(De.Z,{kind:"error",children:se})}):X?(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(Xe.Z,{})}):R&&re?(0,d.jsx)(L.sg,{noOverflowParent:!0,expand:!0,noMargin:!0,children:(0,d.jsxs)(Tt.Z,{autoHideScrollbar:!0,style:NZ.scrollview,children:[(0,d.jsxs)(C.ep,{noColumnMargin:!0,noMargin:!0,forceMobileLayout:pe,noResponsiveLandscape:!0,useLargeSpacer:!0,children:[(0,d.jsx)("div",{style:NZ.leftColumnContainer,children:(0,d.jsx)(gZ,{mediaItems:ye,altTextTemplate:"Game template ".concat(g," preview image {mediaIndex}"),horizontalOuterMarginToEatOnMobile:8})}),(0,d.jsx)("div",{style:NZ.rightColumnContainer,children:(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",justifyContent:"space-between",children:[(0,d.jsx)(F.Z,{noMargin:!0,size:"title",children:R.name}),xe&&(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},NZ.ownedTag),{},{backgroundColor:fe.statusIndicator.success}),children:(0,d.jsx)(F.Z,{color:"inherit",noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"OWNED"})})})]}),(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[(0,d.jsx)(Ni.Z,{src:re.iconUrl,style:NZ.avatar}),(0,d.jsx)(F.Z,{displayInlineAsSpan:!0,size:"sub-title",children:(0,d.jsx)(Ie.Z,{onClick:function(){return ee(!0)},href:"#",children:re.username||""})})]}),(0,d.jsxs)(C.pJ,{noMargin:!0,justifyContent:"space-between",alignItems:"center",children:[(0,d.jsxs)(L.x1,{noMargin:!0,children:[(0,d.jsx)(F.Z,{size:"sub-title",children:(0,d.jsx)(b.Trans,{id:"Licensing"})}),(0,d.jsx)(oi.Z,{size:"small",helpPagePath:"https://gdevelop.io/page/asset-store-license-agreement"})]}),!xe&&!t.includedListableProductIds&&(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(T.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Try it online"}),onClick:function(){return Y.ZP.openExternalURL(R.gamePreviewLink)},icon:(0,d.jsx)(DZ.Z,{style:NZ.playIcon})})})]}),(0,d.jsx)(Vy,{value:N,onChange:U,product:t,ownedLicense:ge}),(0,d.jsx)(L.LZ,{}),xe?(0,d.jsx)(Jy,{productListingData:t,onClick:function(){return u(t)},label:(0,d.jsx)(b.Trans,{id:"Open template"})}):(0,d.jsxs)(d.Fragment,{children:[!he&&(0,d.jsx)(yZ,{}),!se&&(0,d.jsx)(Ky,{i18n:n,productListingData:t,selectedUsageType:N,onUsageTypeChange:U,simulateAppStoreProduct:p,isAlreadyReceived:xe,onClickBuy:Ce,onClickBuyWithCredits:je})]})]})})]}),(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(F.Z,{size:"body2",displayInlineAsSpan:!0,children:(0,d.jsx)(Ke.r,{source:R.longDescription,allowParagraphs:!0})})}),ve&&ve.length?(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(L.hS,{}),ve,(0,d.jsx)(L.hS,{})]})}):null,me&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.x1,{children:(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Included in this bundle"})})}),(0,d.jsx)(L.x1,{children:(0,d.jsx)(pj.Z,{cols:BZ(ue,de),cellHeight:"auto",spacing:4,style:NZ.grid,children:me})})]}),be&&be.length>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.x1,{children:(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"From the same author"})})}),(0,d.jsx)(L.x1,{children:(0,d.jsx)(pj.Z,{cols:BZ(ue,de),cellHeight:"auto",spacing:4,style:NZ.grid,children:be})})]})]})}):null,$&&(0,d.jsx)(Ma.Z,{userId:x,onClose:function(){return ee(!1)},onGameTemplateOpen:r?function(e){ee(!1),r(e)}:void 0,onAssetPackOpen:c?function(e){ee(!1),c(e)}:void 0}),!!z&&(0,d.jsx)(_Z,{privateGameTemplateListingData:z,usageType:N,onClose:function(){return W(null)}})]})}})},HZ=l.forwardRef((function(e,t){var n=e.hideGameTemplates,r=e.displayPromotions,a=e.onOpenPrivateGameTemplateListingData,c=e.onOpenProfile,u=l.useContext(tj.KY),f=u.assetShortHeadersSearchResults,h=u.publicAssetPacksSearchResults,g=u.privateAssetPackListingDatasSearchResults,x=u.publicAssetPacks,m=u.privateAssetPackListingDatas,v=u.error,j=u.fetchAssetsAndFilters,y=u.shopNavigationState,Z=u.searchText,k=u.setSearchText,T=u.clearAllFilters,S=l.useContext(Ry.mJ),P=S.privateGameTemplateListingDatas,E=S.error,I=S.fetchGameTemplates,A=S.shop,O=A.privateGameTemplateListingDatasSearchResults,R=A.setSearchText,D=y.getCurrentPage(),_=D.openedAssetPack,B=D.openedAssetShortHeader,N=D.openedShopCategory,U=D.openedPrivateAssetPackListingData,H=D.openedPrivateGameTemplateListingData,V=D.filtersState,z=(0,MZ.C$)(D),W=(0,MZ.wA)(D),G=l.useRef(null),q=(0,Gr.bX)(),X=(0,w.U)().isMobile,K=l.useState(!1),J=(0,s.Z)(K,2),Q=J[0],$=J[1],ee=l.useCallback((function(){X||$(!0)}),[X]),te=l.useContext(tr.ZP),ne=te.receivedAssetPacks,re=te.receivedGameTemplates,ie=l.useRef(!1),oe=l.useRef(null!=B),ae=l.useCallback((function(e){ie.current=!1,oe.current=null!==e.openedAssetShortHeader}),[]),se=l.useCallback((function(e){k(e),R(e)}),[k,R]),le=l.useCallback((function(){j(),I()}),[j,I]),ce=v||E,ue=l.useCallback((function(e){var t=e.searchText||"";return Z!==t&&(se(t),!0)}),[Z,se]),de=!B&&!U&&!H&&!(_&&_.content&&(0,$C.s0)(_)),pe=l.useRef(null),fe=l.useRef(null),he=l.useRef(null),ge=l.useCallback((function(){return pe.current||fe.current||he.current}),[]),xe=l.useCallback((function(){var e=ge();e&&(D.scrollPosition=e.getScrollPosition())}),[ge,D]),me=l.useCallback((function(e){if(!ie.current){var t=ge();if(t){var n=e.scrollPosition;n?t.scrollToPosition(n):t.scrollToPosition(0),ie.current=!0}}}),[ge]);l.useLayoutEffect((function(){var e=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!z){e.next=4;break}return T(),e.next=4,$(!1);case 4:oe.current||me(D);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[z,me,D]),l.useImperativeHandle(t,(function(){return{onClose:xe}}));var ve=l.useCallback((function(e){var t=_?_.name:null,n=_?_.tag:null,r=_&&_.id?_.id:null,i=function(e){var t=e.privateAssetPackListingDatas,n=e.publicAssetPacks,r=e.assetPack;return r?r.id&&t&&t.find((function(e){return e.id===r.id}))?"private":n&&n.starterPacks.find((function(e){return e.tag===r.tag}))?"public":"unknown":"unknown"}({assetPack:_,publicAssetPacks:x,privateAssetPackListingDatas:m});(0,Ar.In)({id:e.id,name:e.name,assetPackName:t,assetPackTag:n,assetPackId:r,assetPackKind:i}),xe();var o=Z;y.openAssetDetailPage({assetShortHeader:e,previousSearchText:o})}),[_,x,m,xe,y,Z]),be=l.useCallback((function(e){if((0,Ar.BA)({assetPackTag:e.tag,assetPackId:null,assetPackName:e.name,assetPackKind:"public",source:"store-home"}),e.externalWebLink)Y.ZP.openExternalURL(e.externalWebLink);else{xe();var t=Z;se(""),y.openPackPage({assetPack:e,previousSearchText:t}),ee()}}),[y,Z,xe,se,ee]),Ce=l.useCallback((function(e,t){var n=ne?ne.find((function(t){return t.id===e.id})):null;if(!n||t&&t.forceProductPage){(0,Ar.rg)({assetPackName:e.name,assetPackId:e.id,assetPackKind:"private"}),xe();var r=Z;return se(""),void y.openPrivateAssetPackInformationPage({privateAssetPackListingData:e,previousSearchText:r})}(0,Ar.BA)({assetPackName:e.name,assetPackId:e.id,assetPackTag:null,assetPackKind:"private",source:"store-home"}),xe();var i=Z;se(""),y.openPackPage({assetPack:n,previousSearchText:i}),ee()}),[ne,xe,y,se,ee,Z]),je=l.useCallback((function(e){y.navigateInsideFolder(e)}),[y]),ye=l.useCallback((function(e){y.goBackToFolderIndex(e)}),[y]),Ze=l.useCallback((function(e){(0,Ar.rG)({gameTemplateName:e.name,gameTemplateId:e.id,source:"store"}),xe();var t=Z;se(""),y.openPrivateGameTemplateInformationPage({privateGameTemplateListingData:e,previousSearchText:t})}),[xe,se,Z,y]),ke=l.useCallback((function(e){xe(),y.openShopCategoryPage(e)}),[y,xe]),we=l.useCallback((function(e){var t=ne&&ne.find((function(t){return t.tag===e})),n=x&&x.starterPacks.find((function(t){return t.tag===e}));xe(),se(""),t?y.openPackPage({assetPack:t,previousSearchText:""}):n?y.openPackPage({assetPack:n,previousSearchText:""}):y.openTagPage(e),T(),ee()}),[se,ne,x,xe,T,y,ee]);l.useEffect((function(){q&&G.current&&G.current.focus()}),[q]);var Te=l.useMemo((function(){if(!U||!m||!ne)return null;var e=ne.map((function(e){return e.id}));return m.filter((function(t){return t.sellerId===U.sellerId&&!e.includes(t.sellerId)})).sort((function(e,t){return e.name.localeCompare(t.name)}))}),[U,m,ne]),Se=l.useMemo((function(){if(!H||!P||!re)return null;var e=re.map((function(e){return e.id}));return P.filter((function(t){return t.sellerId===H.sellerId&&!e.includes(t.sellerId)})).sort((function(e,t){return e.name.localeCompare(t.name)}))}),[H,P,re]);return(0,d.jsxs)(L.sg,{expand:!0,noMargin:!0,useFullHeight:!0,noOverflowParent:!0,id:"asset-store",children:[(0,d.jsxs)(C.pJ,{children:[(0,d.jsx)(M.Z,{id:"home-button",tooltip:{id:"Back to discover"},onClick:function(){se("");var e=y.openHome();ae(e),T(),$(!1)},size:"small",children:(0,d.jsx)(p,{})},"back-discover"),(0,d.jsx)(L.sg,{expand:!0,useFullHeight:!0,noMargin:!0,children:(0,d.jsx)(st.Z,{placeholder:n?{id:"Search assets"}:"Search the shop",value:Z,onChange:W?se:function(e){se(e),e&&(y.clearHistory(),y.openSearchResultPage(),ee())},onRequestSearch:function(){},ref:G,id:"asset-store-search-bar"})}),(0,d.jsx)(M.Z,{onClick:function(){return $(!Q)},disabled:!de,selected:de&&Q,size:"small",children:(0,d.jsx)(QC,{})})]}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(L.x1,{justifyContent:"space-between",noMargin:!0,alignItems:"center",children:(!z||!!N)&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.sg,{expand:!0,alignItems:"flex-start",noMargin:!0,children:(0,d.jsx)(Jx.Z,{icon:(0,d.jsx)(Co.Z,{}),label:(0,d.jsx)(b.Trans,{id:"Back"}),onClick:(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y.backToPreviousPage(),!ue(t)){e.next=9;break}return e.next=5,new Promise((function(e){return setTimeout(e,500)}));case 5:ae(t),me(t),e.next=10;break;case 9:ae(t);case 10:case"end":return e.stop()}}),e)})))})}),(_||U||V.chosenCategory)&&(0,d.jsxs)(d.Fragment,{children:[!_&&!U&&(0,d.jsx)(L.sg,{expand:!0,alignItems:"center",children:(0,d.jsx)(F.Z,{size:"block-title",noMargin:!0,children:V.chosenCategory?(0,RZ.capitalize)(V.chosenCategory.node.name):""})}),(0,d.jsx)(L.sg,{expand:!0,alignItems:"flex-end",noMargin:!0,justifyContent:"center",children:_&&_.content&&(0,$C.O3)(_)&&!(0,$C.s0)(_)?(0,d.jsx)(Ay,{assetPack:_}):null})]})]})})}),(0,d.jsxs)(L.x1,{expand:!0,noMargin:!0,overflow:"hidden",children:[z?ce?(0,d.jsx)(fr.Z,{onRetry:le,children:(0,d.jsx)(De.Z,{kind:"error",children:(0,d.jsx)(b.Trans,{id:"An error occurred when fetching the store content. Please try again later."})})}):x&&m&&P?(0,d.jsx)(Sy,{ref:pe,publicAssetPacks:x,privateAssetPackListingDatas:m,privateGameTemplateListingDatas:P,onPublicAssetPackSelection:be,onPrivateAssetPackSelection:Ce,onPrivateGameTemplateSelection:Ze,onCategorySelection:ke,openedShopCategory:N,hideGameTemplates:n,displayPromotions:r,onOpenProfile:c}):(0,d.jsx)(Xe.Z,{}):W?(0,d.jsx)(aZ,{publicAssetPacks:h,privateAssetPackListingDatas:g,privateGameTemplateListingDatas:O,assetShortHeaders:f,ref:he,error:ce,onOpenDetails:ve,onPrivateAssetPackSelection:Ce,onPublicAssetPackSelection:be,onPrivateGameTemplateSelection:Ze,onFolderSelection:je,onGoBackToFolderIndex:ye,currentPage:y.getCurrentPage()}):B?(0,d.jsx)(uZ,{ref:fe,onTagSelection:we,assetShortHeader:B,onOpenDetails:ve,onAssetLoaded:function(){return me(D)},onPrivateAssetPackSelection:Ce,onPrivateGameTemplateSelection:Ze}):U?(0,d.jsx)(IZ,{privateAssetPackListingData:U,onAssetPackOpen:Ce,onGameTemplateOpen:Ze,privateAssetPackListingDatasFromSameCreator:Te}):H?(0,d.jsx)(UZ,{privateGameTemplateListingData:H,onCreateWithGameTemplate:function(){a&&a(H)},onAssetPackOpen:Ce,onGameTemplateOpen:Ze,privateGameTemplateListingDatasFromSameCreator:Se}):null,de&&(0,d.jsx)(OZ,{onClose:function(){return $(!1)},open:Q,children:(0,d.jsx)(Tt.Z,{children:(0,d.jsxs)(L.sg,{children:[(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsxs)(L.x1,{alignItems:"center",children:[(0,d.jsx)(QC,{}),(0,d.jsx)(Gd.Z,{children:(0,d.jsx)(b.Trans,{id:"Object filters"})})]})}),(0,d.jsx)(L.x1,{justifyContent:"space-between",alignItems:"center",children:(0,d.jsx)(dj,{})})]})})})]})]})})),VZ=n(57244),zZ=n(38428),WZ=n.n(zZ),GZ=n(50463),YZ=n(19345),qZ=function(e){var t=e.assetPack,n=e.assetShortHeaders,r=e.addedAssetIds,a=e.onClose,c=e.onAssetsAdded,u=e.project,p=e.objectsContainer,f=e.onObjectsAddedFromAssets,h=e.canInstallPrivateAsset,g=e.resourceManagementProps,x=n.filter((function(e){return!r.has(e.id)})),m=0===x.length,v=!m&&x.length===n.length,j=n.length>200,y=l.useState(!1),Z=(0,s.Z)(y,2),k=Z[0],w=Z[1],S=l.useMemo((function(){return n.some((function(e){return(0,$C.kt)(e)}))}),[n]),P=l.useMemo((function(){return h()}),[h]),E=l.useContext(Nr.Z),I=l.useContext(My.Z).installPrivateAsset,M=rk(),A=nk(),O=l.useState(""),R=(0,s.Z)(O,2),D=R[0],_=R[1],B=(0,Et.mapFor)(0,u.getLayoutsCount(),(function(e){return u.getLayoutAt(e).getName()})),N=p?null:(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Choose where to add the assets:"})}),(0,d.jsxs)(GZ.Z,{"aria-label":"Associated scene",name:"associated-layout",value:D,onChange:function(e){return _(e.target.value)},children:[(0,d.jsx)(YZ.Z,{value:"",control:(0,d.jsx)(_y.Z,{color:"secondary"}),label:(0,d.jsx)(b.Trans,{id:"Global objects in the project"}),disabled:k}),B.map((function(e){return(0,d.jsx)(YZ.Z,{value:e,control:(0,d.jsx)(_y.Z,{color:"secondary"}),label:e,disabled:k},e)}))]})]}),U=p||(u.hasLayoutNamed(D)?u.getLayout(D):u),H=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,a,s,l,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length){e.next=2;break}return e.abrupt("return");case 2:if(!(t.length>200)){e.next=4;break}return e.abrupt("return");case 4:return w(!0),e.prev=5,e.next=8,M(t);case 8:return n=e.sent,e.next=11,(0,Hr.Sg)({assets:n,project:u});case 11:if(r=e.sent,e.t0=r.outOfDateExtensionShortHeaders.length>0,!e.t0){e.next=17;break}return e.next=16,A(r.outOfDateExtensionShortHeaders);case 16:e.t0=e.sent;case 17:return a=e.t0,e.next=20,(0,Hr.UN)({requiredExtensionInstallation:r,shouldUpdateExtension:a,eventsFunctionsExtensionsState:E,project:u});case 20:return e.next=22,WZ().withConcurrency(6).for(n).process(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,$C.kt)(t)){e.next=6;break}return e.next=3,I({asset:t,project:u,objectsContainer:U});case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,(0,Hr.Lu)({asset:t,project:u,objectsContainer:U});case 8:e.t0=e.sent;case 9:if(n=e.t0){e.next=12;break}throw new Error("Unable to install the asset.");case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 22:if(s=e.sent,l=s.results,!(d=s.errors).length){e.next=27;break}throw new Error("Error(s) while installing assets. The first error is: "+d[0].message);case 27:return f(l.map((function(e){return e.createdObjects})).flat()),e.next=30,g.onFetchNewlyAddedResources();case 30:w(!1),c(),e.next=39;break;case 34:e.prev=34,e.t1=e.catch(5),w(!1),console.error("Error while installing the assets",e.t1),(0,Ur.gR)({message:"There was an error while installing the assets. Verify your internet connection or try again later.",rawError:e.t1,errorId:"install-asset-pack-error"});case 39:case"end":return e.stop()}}),e,null,[[5,34]])})));return function(t){return e.apply(this,arguments)}}(),[M,u,A,E,f,g,c,I,U]),V=S&&!P?{actionButton:(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Add the assets"}),primary:!0,disabled:!0,onClick:function(){}},"continue"),onApply:function(){},content:(0,d.jsx)(De.Z,{kind:"warning",children:(0,d.jsx)(b.Trans,{id:"You need to save this project as a cloud project to install premium assets. Please save your project and try again."})})}:j?{actionButton:(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Add the assets"}),primary:!0,disabled:!0,onClick:function(){}},"continue"),onApply:function(){},content:(0,d.jsx)(De.Z,{kind:"warning",children:(0,d.jsx)(b.Trans,{id:"You can only install up to {MAX_ASSETS_TO_INSTALL} assets at once. Try filtering the assets you would like to install, or install them one by one.",values:{MAX_ASSETS_TO_INSTALL:200}})})}:k?{actionButton:(0,d.jsx)(Jx.Z,{label:(0,d.jsx)(b.Trans,{id:"Please wait..."}),disabled:!0,onClick:function(){}},"loading"),onApply:function(){},content:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Installing assets..."})}),(0,d.jsx)(L.x1,{expand:!0,children:(0,d.jsx)(Sa.Z,{})})]})}:m?{actionButton:(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Install again"}),primary:!1,onClick:function(){return H(n)}},"install-again"),onApply:function(){return H(n)},content:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"You already have these {0} assets installed, do you want to add them again?",values:{0:n.length}})})}:v?{actionButton:(0,d.jsx)(T.Z,{label:n.length>1?(0,d.jsx)(b.Trans,{id:"Add the assets"}):(0,d.jsx)(b.Trans,{id:"Add asset"}),primary:!0,onClick:function(){return H(n)}},"continue"),onApply:function(){return H(n)},content:(0,d.jsx)(F.Z,{children:n.length>1?(0,d.jsx)(b.Trans,{id:"You're about to add {0} assets.",values:{0:n.length}}):(0,d.jsx)(b.Trans,{id:"You're about to add 1 asset."})})}:{actionButton:(0,d.jsx)(VZ.Z,{label:(0,d.jsx)(b.Trans,{id:"Install the missing assets"}),primary:!0,onClick:function(){H(x)},buildMenuTemplate:function(e){return[{label:e._({id:"Install all the assets"}),click:function(){return H(n)}}]}},"install-missing"),onApply:function(){return H(x)},content:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"You already have {0} asset(s) in your scene. Do you want to add the remaining {1} one(s)?",values:{0:n.length-x.length,1:x.length}})})};return(0,d.jsx)(te.ZP,{title:t?t.name:(0,d.jsx)(b.Trans,{id:"Assets"}),maxWidth:"sm",open:!0,onRequestClose:function(){k||a()},cannotBeDismissed:!0,actions:[k?null:(0,d.jsx)(Jx.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),onClick:a},"cancel"),V.actionButton],onApply:V.onApply,children:(0,d.jsxs)(L.sg,{noMargin:!0,children:[V.content,N]})})},XZ=function(e){var t=new Set;return(0,Et.mapFor)(0,e.getObjectsCount(),(function(n){var r=e.getObjectAt(n).getAssetStoreId();r&&t.add(r)})),t},KZ=function(e,t){var n=XZ(e);if(t){var r=XZ(t);n=new Set([].concat((0,v.Z)(n),(0,v.Z)(r)))}else(0,Et.mapFor)(0,e.getLayoutsCount(),(function(t){var r=e.getLayoutAt(t);n=new Set([].concat((0,v.Z)(n),(0,v.Z)(XZ(r))))}));return n},JZ=function(e){var t=e.enumeratedObjectMetadata,n=e.onClick,r=e.id;if(""===t.name)return null;var i=t.iconFilename||"";return(0,d.jsx)(He.HC,{id:r,leftIcon:(0,d.jsx)(Ms.Z,{src:i,iconSize:40,isGDevelopIcon:!0}),primaryText:t.fullName,secondaryText:t.description,secondaryTextLines:2,onClick:n},t.name)},QZ=function(e){var t=e.packTag,n=e.onAssetSelect,r=e.onBack,i=e.isAssetBeingInstalled,o=l.useContext(tj.KY),a=o.useSearchItem,s=o.error,c=a("",l.useMemo((function(){return{node:{name:t,allChildrenTags:[],children:[]},parentNodes:[]}}),[t]),null,l.useMemo((function(){return[]}),[]));return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(L.sg,{noMargin:!0,expand:!0,children:[(0,d.jsx)(L.x1,{children:(0,d.jsx)(Jx.Z,{icon:(0,d.jsx)(Co.Z,{}),label:(0,d.jsx)(b.Trans,{id:"Back"}),onClick:r,disabled:i})}),(0,d.jsx)(aZ,{assetShortHeaders:c,error:s,onOpenDetails:function(e){i||n(e)}})]}),(0,d.jsx)(Ql,{show:i})]})},$Z=function(e){var t,n=e.i18n,i=e.project,o=Yu(i),s=(t={},(0,r.Z)(t,gd("General",n),[{name:"Sprite"},{name:"TiledSpriteObject::TiledSprite"},{name:"PanelSpriteObject::PanelSprite"},{name:"Scene3D::Cube3DObject"},{name:"Scene3D::Model3DObject"}]),(0,r.Z)(t,gd("Input",n),[{name:"SpriteMultitouchJoystick::SpriteMultitouchJoystick",fullName:n._({id:"Multitouch Joystick"}),description:n._({id:"Joystick for touchscreens."}),iconFilename:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQo8L3N0eWxlPg0KPGNpcmNsZSBjbGFzcz0ic3QwIiBjeD0iMTYiIGN5PSIxNiIgcj0iMTMiLz4NCjxwb2x5bGluZSBjbGFzcz0ic3QwIiBwb2ludHM9IjI4LjQsMTIgMjAsMTIgMjAsMy42ICIvPg0KPHBvbHlsaW5lIGNsYXNzPSJzdDAiIHBvaW50cz0iMjAsMjguNCAyMCwyMCAyOC40LDIwICIvPg0KPHBvbHlsaW5lIGNsYXNzPSJzdDAiIHBvaW50cz0iMy42LDIwIDEyLDIwIDEyLDI4LjQgIi8+DQo8cG9seWxpbmUgY2xhc3M9InN0MCIgcG9pbnRzPSIxMiwzLjYgMTIsMTIgMy42LDEyICIvPg0KPHBvbHlnb24gY2xhc3M9InN0MCIgcG9pbnRzPSIxNiw2IDE2LjcsNyAxNS4zLDcgIi8+DQo8cG9seWdvbiBjbGFzcz0ic3QwIiBwb2ludHM9IjE2LDI2IDE1LjMsMjUgMTYuNywyNSAiLz4NCjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iNiwxNiA3LDE1LjMgNywxNi43ICIvPg0KPHBvbHlnb24gY2xhc3M9InN0MCIgcG9pbnRzPSIyNiwxNiAyNSwxNi43IDI1LDE1LjMgIi8+DQo8L3N2Zz4NCg==",assetStorePackTag:"multitouch joysticks",requiredExtensions:[{extensionName:"SpriteMultitouchJoystick",extensionVersion:"1.0.0"}]}]),(0,r.Z)(t,gd("Text",n),[{name:"TextObject::Text"},{name:"BBText::BBText"},{name:"BitmapText::BitmapTextObject"}]),(0,r.Z)(t,gd("User interface",n),[{name:"PanelSpriteButton::PanelSpriteButton",fullName:n._({id:"Panel sprite button"}),description:n._({id:"Resizable button with text customization."}),iconFilename:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQo8L3N0eWxlPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTI5LDIzSDNjLTEuMSwwLTItMC45LTItMlYxMWMwLTEuMSwwLjktMiwyLTJoMjZjMS4xLDAsMiwwLjksMiwydjEwQzMxLDIyLjEsMzAuMSwyMywyOSwyM3oiLz4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMywxOUwxMywxOWMtMS4xLDAtMi0wLjktMi0ydi0yYzAtMS4xLDAuOS0yLDItMmgwYzEuMSwwLDIsMC45LDIsMnYyQzE1LDE4LjEsMTQuMSwxOSwxMywxOXoiLz4NCjxsaW5lIGNsYXNzPSJzdDAiIHgxPSIxOCIgeTE9IjEzIiB4Mj0iMTgiIHkyPSIxOSIvPg0KPGxpbmUgY2xhc3M9InN0MCIgeDE9IjIxIiB5MT0iMTMiIHgyPSIxOCIgeTI9IjE3Ii8+DQo8bGluZSBjbGFzcz0ic3QwIiB4MT0iMjEiIHkxPSIxOSIgeDI9IjE5IiB5Mj0iMTYiLz4NCjwvc3ZnPg0K",assetStorePackTag:"menu buttons",requiredExtensions:[{extensionName:"PanelSpriteButton",extensionVersion:"1.0.0"}]},{name:"PanelSpriteSlider::PanelSpriteSlider",fullName:n._({id:"Slider"}),description:n._({id:"Let users select a numerical value by dragging a slider."}),iconFilename:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQo8L3N0eWxlPg0KPGNpcmNsZSBjbGFzcz0ic3QwIiBjeD0iMjMiIGN5PSI3IiByPSIzIi8+DQo8bGluZSBjbGFzcz0ic3QwIiB4MT0iMyIgeTE9IjciIHgyPSIyMCIgeTI9IjciLz4NCjxsaW5lIGNsYXNzPSJzdDAiIHgxPSIyOSIgeTE9IjciIHgyPSIyNiIgeTI9IjciLz4NCjxjaXJjbGUgY2xhc3M9InN0MCIgY3g9IjEyIiBjeT0iMTYiIHI9IjMiLz4NCjxsaW5lIGNsYXNzPSJzdDAiIHgxPSIzIiB5MT0iMTYiIHgyPSI5IiB5Mj0iMTYiLz4NCjxsaW5lIGNsYXNzPSJzdDAiIHgxPSIyOSIgeTE9IjE2IiB4Mj0iMTUiIHkyPSIxNiIvPg0KPGNpcmNsZSBjbGFzcz0ic3QwIiBjeD0iMjMiIGN5PSIyNSIgcj0iMyIvPg0KPGxpbmUgY2xhc3M9InN0MCIgeDE9IjMiIHkxPSIyNSIgeDI9IjIwIiB5Mj0iMjUiLz4NCjxsaW5lIGNsYXNzPSJzdDAiIHgxPSIyOSIgeTE9IjI1IiB4Mj0iMjYiIHkyPSIyNSIvPg0KPC9zdmc+DQo=",assetStorePackTag:"settings ui",requiredExtensions:[{extensionName:"PanelSpriteSlider",extensionVersion:"1.0.0"}]},{name:"SpriteToggleSwitch::SpriteToggleSwitch",fullName:n._({id:"Toggle switch"}),description:n._({id:"A toggle switch that users can click or touch."}),iconFilename:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQo8L3N0eWxlPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTIzLDIzSDljLTMuOSwwLTctMy4xLTctN3YwYzAtMy45LDMuMS03LDctN2gxNGMzLjksMCw3LDMuMSw3LDd2MEMzMCwxOS45LDI2LjksMjMsMjMsMjN6Ii8+DQo8Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI5IiBjeT0iMTYiIHI9IjQiLz4NCjwvc3ZnPg0K",assetStorePackTag:"settings ui",requiredExtensions:[{extensionName:"SpriteToggleSwitch",extensionVersion:"1.0.0"}]},{name:"PanelSpriteContinuousBar::PanelSpriteContinuousBar",fullName:n._({id:"Resource bar (continuous)"}),description:n._({id:"A bar that represents a resource in the game (health, mana, ammo, etc)."}),iconFilename:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBkPSJNMjgsMTJIMTRINGMtMi4yLDAtNCwxLjgtNCw0czEuOCw0LDQsNGgxMGgxNGMyLjIsMCw0LTEuOCw0LTRTMzAuMiwxMiwyOCwxMnogTTQsMThjLTEuMSwwLTItMC45LTItMnMwLjktMiwyLTJoMTANCgljMS4xLDAsMiwwLjksMiwycy0wLjksMi0yLDJINHoiLz4NCjwvc3ZnPg0K",assetStorePackTag:"resource bars",requiredExtensions:[{extensionName:"PanelSpriteContinuousBar",extensionVersion:"1.0.0"}]},{name:"TiledUnitsBar::TiledUnitsBar",fullName:n._({id:"Resource bar (separated units)"}),description:n._({id:"A bar that represents a resource in the game (health, mana, ammo, etc)."}),iconFilename:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLWRvdHMtaG9yaXpvbnRhbCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0xNiwxMkEyLDIgMCAwLDEgMTgsMTBBMiwyIDAgMCwxIDIwLDEyQTIsMiAwIDAsMSAxOCwxNEEyLDIgMCAwLDEgMTYsMTJNMTAsMTJBMiwyIDAgMCwxIDEyLDEwQTIsMiAwIDAsMSAxNCwxMkEyLDIgMCAwLDEgMTIsMTRBMiwyIDAgMCwxIDEwLDEyTTQsMTJBMiwyIDAgMCwxIDYsMTBBMiwyIDAgMCwxIDgsMTJBMiwyIDAgMCwxIDYsMTRBMiwyIDAgMCwxIDQsMTJaIiAvPjwvc3ZnPg==",assetStorePackTag:"resource bars",requiredExtensions:[{extensionName:"TiledUnitsBar",extensionVersion:"1.0.0"}]},{name:"TextInput::TextInputObject"},{name:"Video::VideoObject"}]),(0,r.Z)(t,gd("Visual effect",n),[{name:"Lighting::LightObject"},{name:"ParticleSystem::ParticleEmitter",assetStorePackTag:"particles emitter",requiredExtensions:[]},{name:"ParticleEmitter3D::ParticleEmitter3D",fullName:n._({id:"3D particle emitter"}),description:n._({id:"Displays a large number of particles to create visual effects."}),iconFilename:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLWZpcmUiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTcuNjYgMTEuMkMxNy40MyAxMC45IDE3LjE1IDEwLjY0IDE2Ljg5IDEwLjM4QzE2LjIyIDkuNzggMTUuNDYgOS4zNSAxNC44MiA4LjcyQzEzLjMzIDcuMjYgMTMgNC44NSAxMy45NSAzQzEzIDMuMjMgMTIuMTcgMy43NSAxMS40NiA0LjMyQzguODcgNi40IDcuODUgMTAuMDcgOS4wNyAxMy4yMkM5LjExIDEzLjMyIDkuMTUgMTMuNDIgOS4xNSAxMy41NUM5LjE1IDEzLjc3IDkgMTMuOTcgOC44IDE0LjA1QzguNTcgMTQuMTUgOC4zMyAxNC4wOSA4LjE0IDEzLjkzQzguMDggMTMuODggOC4wNCAxMy44MyA4IDEzLjc2QzYuODcgMTIuMzMgNi42OSAxMC4yOCA3LjQ1IDguNjRDNS43OCAxMCA0Ljg3IDEyLjMgNSAxNC40N0M1LjA2IDE0Ljk3IDUuMTIgMTUuNDcgNS4yOSAxNS45N0M1LjQzIDE2LjU3IDUuNyAxNy4xNyA2IDE3LjdDNy4wOCAxOS40MyA4Ljk1IDIwLjY3IDEwLjk2IDIwLjkyQzEzLjEgMjEuMTkgMTUuMzkgMjAuOCAxNy4wMyAxOS4zMkMxOC44NiAxNy42NiAxOS41IDE1IDE4LjU2IDEyLjcyTDE4LjQzIDEyLjQ2QzE4LjIyIDEyIDE3LjY2IDExLjIgMTcuNjYgMTEuMk0xNC41IDE3LjVDMTQuMjIgMTcuNzQgMTMuNzYgMTggMTMuNCAxOC4xQzEyLjI4IDE4LjUgMTEuMTYgMTcuOTQgMTAuNSAxNy4yOEMxMS42OSAxNyAxMi40IDE2LjEyIDEyLjYxIDE1LjIzQzEyLjc4IDE0LjQzIDEyLjQ2IDEzLjc3IDEyLjMzIDEzQzEyLjIxIDEyLjI2IDEyLjIzIDExLjYzIDEyLjUgMTAuOTRDMTIuNjkgMTEuMzIgMTIuODkgMTEuNyAxMy4xMyAxMkMxMy45IDEzIDE1LjExIDEzLjQ0IDE1LjM3IDE0LjhDMTUuNDEgMTQuOTQgMTUuNDMgMTUuMDggMTUuNDMgMTUuMjNDMTUuNDYgMTYuMDUgMTUuMSAxNi45NSAxNC41IDE3LjVIMTQuNVoiIC8+PC9zdmc+",assetStorePackTag:"3d particles",requiredExtensions:[{extensionName:"ParticleEmitter3D",extensionVersion:"1.0.0"}]}]),(0,r.Z)(t,gd("Advanced",n),[{name:"TileMap::TileMap"},{name:"TileMap::CollisionMask"},{name:"PrimitiveDrawing::Drawer"}]),t);return o.forEach((function(e){var t=gd(e.categoryFullName,n);s[t]=s[t]||[];var r=s[t].findIndex((function(t){return t.name===e.name}));if(-1!==r){var i=s[t][r];s[t][r]=(0,a.Z)((0,a.Z)({},i),e)}else s[t]=[].concat((0,v.Z)(s[t]),[e])})),s};function ek(e){var t=e.project,n=e.onCreateNewObject,r=e.onCustomObjectSelected,i=e.selectedCustomObject,o=e.onInstallAsset,a=e.isAssetBeingInstalled,s=e.i18n,c=l.useMemo((function(){return $Z({project:t,i18n:s})}),[t,s]),u=(0,gt.Z)("intro-object-types").DismissableTutorialMessage;return i&&i.assetStorePackTag?(0,d.jsx)(QZ,{packTag:i.assetStorePackTag,onAssetSelect:o,isAssetBeingInstalled:a,onBack:function(){return r(null)}}):(0,d.jsxs)(Tt.Z,{children:[u&&(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{expand:!0,children:u})}),(0,d.jsx)(He.aV,{children:Object.keys(c).map((function(e){var t=c[e];return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(Gd.Z,{children:e}),t.map((function(e){return(0,d.jsx)(JZ,{enumeratedObjectMetadata:e,id:"object-category-".concat(e.name).replace(/:/g,"-"),onClick:function(){(0,Ar.Tq)(e.name),e.assetStorePackTag?r(e):n(e.name)}},e.name)}))]},e)}))})]})}var tk=Y.ZP.isDev(),nk=function(){var e=(0,lt.Z)().showConfirmation;return function(){var t=(0,o.Z)((0,i.Z)().mark((function t(n){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({title:{id:"Extension update"},message:{id:"Before installing this asset, it's strongly recommended to update these extensions{0}Do you want to update it now ?",values:{0:"\n\n - "+n.map((function(e){return e.fullName})).join("\n\n - ")+"\n\n"}},confirmButtonLabel:{id:"Update the extension"},dismissButtonLabel:{id:"Skip the update"}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},rk=function(){var e=l.useContext(tj.KY).environment,t=l.useContext(My.Z).fetchPrivateAsset;return function(){var n=(0,o.Z)((0,i.Z)().mark((function n(r){var a,s;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,WZ().withConcurrency(6).for(r).process(function(){var n=(0,o.Z)((0,i.Z)().mark((function n(r){var o;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(0,$C.kt)(r)){n.next=6;break}return n.next=3,t(r,{environment:e});case 3:n.t0=n.sent,n.next=9;break;case 6:return n.next=8,(0,$C.WY)(r,{environment:e});case 8:n.t0=n.sent;case 9:if(o=n.t0){n.next=12;break}throw new Error("Unable to install the asset because it could not be fetched.");case 12:return n.abrupt("return",o);case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 2:if(!(a=n.sent).errors.length){n.next=5;break}throw new Error("Error(s) while installing assets. The first error is: "+a.errors[0].message);case 5:return s=a.results,n.abrupt("return",s);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()};function ik(e){var t=e.project,n=(e.layout,e.objectsContainer),r=e.resourceManagementProps,a=e.onClose,c=e.onCreateNewObject,u=e.onObjectsAddedFromAssets,p=e.canInstallPrivateAsset,f=(0,w.U)().isMobile,h=l.useContext(se.ZP),g=h.setNewObjectDialogDefaultTab,x=h.getNewObjectDialogDefaultTab,m=l.useState(x()),v=(0,s.Z)(m,2),C=v[0],j=v[1];l.useEffect((function(){return g(C)}),[g,C]);var y=l.useContext(tj.KY),Z=y.assetShortHeadersSearchResults,k=y.shopNavigationState,S=y.environment,P=y.setEnvironment,E=k.getCurrentPage(),I=E.openedAssetPack,M=E.openedAssetShortHeader,L=E.selectedFolders,A=l.useState(!1),F=(0,s.Z)(A,2),O=F[0],R=F[1],D=KZ(t,n),_=l.useState(!1),B=(0,s.Z)(_,2),N=B[0],U=B[1],H=l.useState(null),V=(0,s.Z)(H,2),z=V[0],W=V[1],G=l.useContext(Nr.Z),Y=M&&D.has(M.id),q=l.useContext(My.Z).installPrivateAsset,X=(0,lt.Z)().showAlert,K=rk(),Q=nk(),$=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(o){var a,s,l,c,d,f;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return",!1);case 2:if(U(!0),e.prev=3,!(a=(0,$C.kt)(o))){e.next=14;break}return e.next=8,p();case 8:if(e.sent){e.next=14;break}return e.next=12,X({title:{id:"Save your project"},message:{id:"You need to save this project as a cloud project to install this asset. Please save your project and try again."}});case 12:return U(!1),e.abrupt("return",!1);case 14:return e.next=16,K([o]);case 16:return s=e.sent,l=s[0],e.next=20,(0,Hr.Sg)({assets:s,project:t});case 20:if(c=e.sent,e.t0=c.outOfDateExtensionShortHeaders.length>0,!e.t0){e.next=26;break}return e.next=25,Q(c.outOfDateExtensionShortHeaders);case 25:e.t0=e.sent;case 26:return d=e.t0,e.next=29,(0,Hr.UN)({requiredExtensionInstallation:c,shouldUpdateExtension:d,eventsFunctionsExtensionsState:G,project:t});case 29:if(!a){e.next=35;break}return e.next=32,q({asset:l,project:t,objectsContainer:n});case 32:e.t1=e.sent,e.next=38;break;case 35:return e.next=37,(0,Hr.Lu)({asset:l,project:t,objectsContainer:n});case 37:e.t1=e.sent;case 38:if(f=e.t1){e.next=41;break}throw new Error("Unable to install private Asset.");case 41:return(0,Ar.Kr)({id:o.id,name:o.name,assetPackName:I?I.name:null,assetPackTag:I?I.tag:null,assetPackId:I&&I.id?I.id:null,assetPackKind:a?"private":"public"}),u(f.createdObjects),e.next=45,r.onFetchNewlyAddedResources();case 45:return U(!1),e.abrupt("return",!0);case 49:return e.prev=49,e.t2=e.catch(3),console.error("Error while installing the asset:",e.t2),X({title:{id:"Could not install the asset"},message:{id:'There was an error while installing the asset "{0}". Verify your internet connection or try again later.',values:{0:o.name}}}),U(!1),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[3,49]])})));return function(t){return e.apply(this,arguments)}}(),[K,t,Q,q,G,n,I,r,p,X,u]),ee=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var n,r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=z&&z.requiredExtensions,z&&n){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,U(!0),e.next=7,(0,Hr.bg)({requiredExtensions:n,project:t});case 7:if(r=e.sent,e.t0=r.outOfDateExtensionShortHeaders.length>0,!e.t0){e.next=13;break}return e.next=12,Q(r.outOfDateExtensionShortHeaders);case 12:e.t0=e.sent;case 13:return o=e.t0,e.next=16,(0,Hr.UN)({requiredExtensionInstallation:r,shouldUpdateExtension:o,eventsFunctionsExtensionsState:G,project:t});case 16:c(z.name),e.next=23;break;case 19:e.prev=19,e.t1=e.catch(3),console.error("Error while creating the object:",e.t1),X({title:{id:"Could not create the object"},message:{id:'There was an error while creating the object "{0}". Verify your internet connection or try again later.',values:{0:z.fullName}}});case 23:return e.prev=23,U(!1),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[3,19,23,26]])}))),[z,c,t,Q,G,X]),ne=l.useMemo((function(){return Z?rZ(Z,L):[]}),[Z,L]),re="asset-store"===C?I?(0,d.jsx)(T.Z,{primary:!0,label:1===ne.length?(0,d.jsx)(b.Trans,{id:"Add this asset to my scene"}):(0,d.jsx)(b.Trans,{id:"Add these assets to my scene"}),onClick:function(){return R(!0)},disabled:!ne||0===ne.length},"add-all-assets"):M?(0,d.jsx)(T.Z,{primary:!Y,label:N?(0,d.jsx)(b.Trans,{id:"Adding..."}):Y?(0,d.jsx)(b.Trans,{id:"Add again"}):(0,d.jsx)(b.Trans,{id:"Add to the scene"}),onClick:(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$(M);case 1:case"end":return e.stop()}}),e)}))),disabled:N,id:"add-asset-button"},"add-asset"):tk?(0,d.jsx)(T.Z,{label:"staging"===S?(0,d.jsx)(b.Trans,{id:"Show live assets"}):(0,d.jsx)(b.Trans,{id:"Show staging assets"}),onClick:function(){P("staging"===S?"live":"staging")}},"show-dev-assets"):null:z&&"new-object"===C?(0,d.jsx)(T.Z,{label:N?(0,d.jsx)(b.Trans,{id:"Adding..."}):(0,d.jsx)(b.Trans,{id:"Skip and create from scratch"}),primary:!0,onClick:ee,id:"skip-and-create-button",disabled:N},"skip-and-create"):null,ie=l.useRef(null),oe=l.useCallback((function(){ie.current&&ie.current.onClose(),a()}),[a]);return(0,d.jsx)(b.I18n,{children:function(e){var a=e.i18n;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"New object"}),secondaryActions:[(0,d.jsx)(Hn.Z,{helpPagePath:"/objects"},"help")],actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Close"}),primary:!1,onClick:oe,id:"close-button"},"close"),re],onRequestClose:oe,onApply:I?function(){return R(!0)}:M?(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(M);case 2:case"end":return e.stop()}}),e)}))):void 0,open:!0,flexBody:!0,fullHeight:!0,id:"new-object-dialog",fixedContent:(0,d.jsx)(le.m,{value:C,onChange:j,options:[{label:(0,d.jsx)(b.Trans,{id:"Asset Store"}),value:"asset-store",id:"asset-store-tab"},{label:(0,d.jsx)(b.Trans,{id:"New object from scratch"}),value:"new-object",id:"new-object-from-scratch-tab"}],variant:f?"scrollable":void 0}),children:["asset-store"===C&&(0,d.jsx)(HZ,{ref:ie,hideGameTemplates:!0}),"new-object"===C&&(0,d.jsx)(ek,{onCreateNewObject:c,onCustomObjectSelected:W,selectedCustomObject:z,onInstallAsset:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(t);case 2:e.sent&&oe();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),isAssetBeingInstalled:N,project:t,i18n:a})]}),O&&ne&&I&&(0,d.jsx)(qZ,{assetPack:I,assetShortHeaders:ne,addedAssetIds:D,onClose:function(){return R(!1)},onAssetsAdded:function(){R(!1)},project:t,objectsContainer:n,onObjectsAddedFromAssets:u,canInstallPrivateAsset:p,resourceManagementProps:r})]})}})}var ok=function(e){return(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"New Object dialog"}),scope:"new-object-dialog",onClose:e.onClose,children:(0,d.jsx)(ik,(0,a.Z)({},e))})},ak="Object",sk=n.g.gd,lk=function(e,t){if(0===e.getInstancesCount())return[];var n=[],r=new sk.InitialInstanceJSFunctor;return r.invoke=function(e){var r=sk.wrapPointer(e,sk.InitialInstance);r.getObjectName()===t&&n.push(r)},e.iterateOverInstances(r),r.delete(),n},ck=function(e,t){return lk(e,t).length},uk=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 7.75C4 7.33579 4.33579 7 4.75 7H17.25C18.7688 7 20 8.23122 20 9.75V12.25C20 12.6642 19.6642 13 19.25 13C18.8358 13 18.5 12.6642 18.5 12.25V9.75C18.5 9.05964 17.9404 8.5 17.25 8.5H5.5V17.25C5.5 17.9404 6.05964 18.5 6.75 18.5H12.25C12.6642 18.5 13 18.8358 13 19.25C13 19.6642 12.6642 20 12.25 20H6.75C5.23122 20 4 18.7688 4 17.25V7.75Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 6.75C4 5.23122 5.23122 4 6.75 4H10.8127C11.819 4 12.7451 4.54965 13.227 5.43322L14.1584 7.14085C14.3568 7.50449 14.2228 7.96007 13.8591 8.15842C13.4955 8.35677 13.0399 8.22278 12.8416 7.85915L11.9101 6.15145C11.6911 5.74995 11.2702 5.5 10.8127 5.5H6.75C6.05964 5.5 5.5 6.05964 5.5 6.75V11C5.5 11.4142 5.16421 11.75 4.75 11.75C4.33579 11.75 4 11.4142 4 11V6.75Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 14C17.4142 14 17.75 14.3358 17.75 14.75V19.25C17.75 19.6642 17.4142 20 17 20C16.5858 20 16.25 19.6642 16.25 19.25V14.75C16.25 14.3358 16.5858 14 17 14Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 17C14 16.5858 14.3358 16.25 14.75 16.25H19.25C19.6642 16.25 20 16.5858 20 17C20 17.4142 19.6642 17.75 19.25 17.75H14.75C14.3358 17.75 14 17.4142 14 17Z",fill:"currentColor"})]}))})),dk=n.g.gd,pk="scene-objects",fk="global-objects",hk="global-empty-placeholder",gk=(0,xg.vA)("/interface/scene-editor/global-objects/",":~:text=Global%20objects%20are%20objects%20which,are%20usable%20by%20all%20Scenes"),xk={listContainer:{flex:1,display:"flex",flexDirection:"column"},autoSizerContainer:{flex:1},autoSizer:{width:"100%"}},mk={Sprite:"NewSprite","TiledSpriteObject::TiledSprite":"NewTiledSprite","ParticleSystem::ParticleEmitter":"NewParticlesEmitter","PanelSpriteObject::PanelSprite":"NewPanelSprite","PrimitiveDrawing::Drawer":"NewShapePainter","TextObject::Text":"NewText","BBText::BBText":"NewBBText","BitmapText::BitmapTextObject":"NewBitmapText","TextEntryObject::TextEntry":"NewTextEntry","TileMap::TileMap":"NewTileMap","TileMap::CollisionMask":"NewTileMapMask","MyDummyExtension::DummyObject":"NewDummyObject","Lighting::LightObject":"NewLight","TextInput::TextInputObject":"NewTextInput","Scene3D::Model3DObject":"New3DModel","Scene3D::Cube3DObject":"New3DBox","SpineObject::SpineObject":"NewSpine","Video::VideoObject":"NewVideo"},vk="GD_OBJECT_WITH_CONTEXT",bk=function(e){return e.isRoot||e.isPlaceholder?e.label:Cx(e.objectFolderOrObject)},Ck=function(e){if(e.isRoot||e.isPlaceholder)return e.id;var t=e.objectFolderOrObject;if(t.isFolder())return"object-folder-".concat(t.ptr);var n=t.getObject();return"".concat(n.getName(),"-").concat(n.ptr)},jk=function(e,t){return e.isRoot||e.isPlaceholder?void 0:"object-item-".concat(t)},yk=function(e){if(e.isPlaceholder)return null;if(e.isRoot&&e.children)return e.children;var t=e.objectFolderOrObject,n=e.global;return t.isFolder()?(0,Et.mapFor)(0,t.getChildrenCount(),(function(e){return{objectFolderOrObject:t.getChildAt(e),global:n}})):null},Zk=function(e){return e.isRoot||e.isPlaceholder||e.objectFolderOrObject.isFolder()?void 0:{objectName:e.objectFolderOrObject.getObject().getName(),global:e.global.toString()}},kk=function(e,t){var n=t.isGlobalObject,r=t.isFolder,i={id:"Paste"};if(Rt.has(ak)){var o=Rt.get(ak),a=Ot.extractStringProperty(o,"name")||"";i=n?r?{id:"Paste {clipboardObjectName} as a Global Object inside folder",values:{clipboardObjectName:a}}:{id:"Paste {clipboardObjectName} as a Global Object",values:{clipboardObjectName:a}}:r?{id:"Paste {clipboardObjectName} inside folder",values:{clipboardObjectName:a}}:{id:"Paste {clipboardObjectName}",values:{clipboardObjectName:a}}}return e._(i)},wk=l.forwardRef((function(e,t){var n=e.project,r=e.layout,a=e.initialInstances,c=e.objectsContainer,u=e.resourceManagementProps,p=e.onSelectAllInstancesOfObjectInLayout,f=e.onDeleteObjects,h=e.onRenameObjectFolderOrObjectWithContextFinish,g=e.selectedObjectFolderOrObjectsWithContext,x=e.canInstallPrivateAsset,m=e.beforeSetAsGlobalObject,j=e.canSetAsGlobalObject,y=e.onEditObject,Z=e.onExportAssets,k=e.onObjectCreated,T=e.onObjectFolderOrObjectWithContextSelected,P=e.onObjectPasted,E=e.getValidatedObjectOrGroupName,I=e.onAddObjectInstance,A=e.getThumbnail,F=e.unsavedChanges,O=(e.hotReloadPreviewButtonProps,l.useContext(se.ZP)),R=l.useContext(Yr.Z).currentlyRunningInAppTutorial,D=(0,lt.Z)().showDeleteConfirmation,_=l.useRef(null),B=(0,Pt.Z)(),N=(0,w.U)().isMobile,U=l.useCallback((function(){B(),_.current&&_.current.forceUpdateList()}),[B]),H=l.useState(null),V=(0,s.Z)(H,2),z=V[0],W=V[1];l.useImperativeHandle(t,(function(){return{forceUpdateList:function(){B(),_.current&&_.current.forceUpdateList()},openNewObjectDialog:function(){W({from:null})},closeNewObjectDialog:function(){W(null)},renameObjectFolderOrObjectWithContext:function(e){_.current&&_.current.renameItem(e)}}}));var G=l.useState(""),q=(0,s.Z)(G,2),X=q[0],K=q[1],J=l.useCallback((function(e){var t,r,i=n.hasEventsBasedObject(e)?"New"+n.getEventsBasedObject(e).getDefaultName():mk[e]||"NewObject",o=(0,It.Z)(i,(function(e){return c.hasObjectNamed(e)||n.hasObjectNamed(e)}));if(z&&z.from&&!z.from.global){var a=z.from.objectFolderOrObject,s=a.isFolder()?a:a.getParent(),l=a.isFolder()?s.getChildrenCount():s.getChildPosition(a)+1;t=c.insertNewObjectInFolder(n,e,o,s,l),r={objectFolderOrObject:s.getObjectChild(o),global:!1},_.current&&_.current.openItems([Ck({objectFolderOrObject:s,global:!1})])}else t=c.insertNewObject(n,e,o,c.getObjectsCount()),r={objectFolderOrObject:c.getRootFolder().getObjectChild(o),global:!1};_.current&&_.current.openItems([pk]),setTimeout((function(){he(r)}),100),W(null),y&&(y(t),k(t),T(r))}),[n,z,y,c,k,T]),Q=l.useCallback((function(e){e.forEach((function(e){k(e)})),_.current&&_.current.openItems([pk]);var t=e[e.length-1],n={objectFolderOrObject:c.getRootFolder().getObjectChild(t.getName()),global:!1};setTimeout((function(){he(n)}),100)}),[k,c]),$=l.useCallback((function(e){W({from:e})}),[]),ee=l.useCallback((function(e){F&&F.triggerUnsavedChanges(),e?U():B()}),[B,U,F]),te=l.useCallback((function(e){T(e)}),[T]),ne=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var r,o,a,s,l,u,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(r=t.objectFolderOrObject,o=t.global,s=null,!r.isFolder()){e.next=15;break}if(0!==(a=Zx(r)).length){e.next=11;break}return te(null),r.getParent().removeFolderChild(r),U(),e.abrupt("return");case 11:s=r,1===a.length?(l={id:"Are you sure you want to remove this folder and with it the object {0}? This can't be undone.",values:{0:a[0].getName()}},u={id:"Remove folder and object"}):(l={id:"Are you sure you want to remove this folder and all its content (objects {0})? This can't be undone.",values:{0:a.map((function(e){return e.getName()})).join(", ")}},u={id:"Remove folder and objects"}),e.next=18;break;case 15:a=[r.getObject()],l={id:"Are you sure you want to remove this object? This can't be undone."},u={id:"Remove object"};case 18:return e.next=20,D({message:l,title:u});case 20:if(e.sent){e.next=23;break}return e.abrupt("return");case 23:d=a.map((function(e){return{object:e,global:o}})),te(null),f(d,(function(e){if(e){var t=o?n:c;a.forEach((function(e){t.removeObject(e.getName())})),s&&(s.getParent().removeFolderChild(s),U()),ee(!1)}}));case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,f,ee,n,U,te,D]),re=l.useRef(new St.ZP({shortcutCallbacks:{}}));l.useEffect((function(){re.current&&re.current.setShortcutCallback("onDelete",(function(){ne(g[0])}))}),[g,ne]);var ie=l.useCallback((function(e){var t=e.objectFolderOrObject;if(!t.isFolder()){var n=t.getObject();Rt.set(ak,{type:n.getType(),name:n.getName(),object:(0,Dt.XH)(n)})}}),[]),oe=l.useCallback((function(e){ie(e),ne(e)}),[ie,ne]),ae=l.useCallback((function(e){var t,r,i=e.objectName,o=e.positionObjectFolderOrObjectWithContext,a=e.objectType,s=e.serializedObject,l=e.addInsideFolder,u=(0,It.Z)(i,(function(e){return c.hasObjectNamed(e)||n.hasObjectNamed(e)}),""),d=o.objectFolderOrObject,p=o.global;l&&d.isFolder()?(t=d,r=d.getChildrenCount()):r=(t=d.getParent()).getChildPosition(d);var f=p?n.insertNewObjectInFolder(n,a,u,t,r+1):c.insertNewObjectInFolder(n,a,u,t,r+1);return(0,Dt.qx)(f,s,"unserializeFrom",n),f.setName(u),{object:f,global:p}}),[c,n]),le=l.useCallback((function(e,t){if(Rt.has(ak)){var n=Rt.get(ak),r=Ot.extractObjectProperty(n,"object"),i=Ot.extractStringProperty(n,"name"),o=Ot.extractStringProperty(n,"type");if(i&&o&&r){var a=ae({objectName:i,positionObjectFolderOrObjectWithContext:e,objectType:o,serializedObject:r,addInsideFolder:t});ee(!1),P&&P(a.object),t&&_.current&&_.current.openItems([Ck(e)])}}}),[ae,ee,P]),ce=l.useCallback((function(e){if(e){var t=_.current;t&&(N&&t.scrollToItem(e,"start"),t.renameItem(e))}}),[N]),de=l.useCallback((function(e,t){var n=e.objectFolderOrObject,r=e.global;if(!n.isFolder()){var i=n.getObject(),o=i.getType(),a=i.getName(),s=(0,Dt.XH)(i),l=ae({objectName:a,positionObjectFolderOrObjectWithContext:e,objectType:o,serializedObject:s}),c={objectFolderOrObject:n.getParent().getObjectChild(l.object.getName()),global:r};U(),ce(c),te(c)}}),[ae,ce,U,te]),pe=l.useCallback((function(e,t){if(!e.isRoot&&!e.isPlaceholder){var n=e.global,r=e.objectFolderOrObject;if(Cx(r)!==t){var i=r.isFolder()?t:E(t,n);h(e,i,(function(e){e&&ee(!1)}))}}}),[E,ee,h]),fe=l.useCallback((function(e){if(!e.isRoot&&!e.isPlaceholder){var t=e.objectFolderOrObject;t.isFolder()||y(t.getObject())}}),[y]),he=function(e){_.current&&_.current.scrollToItem(e)},xe=function(e){var t=_.current;if(!t)return null;var n=e.objectFolderOrObject,r=e.global,i=wx(n).reverse().map((function(e){return{objectFolderOrObject:e,global:r}})),o=t.areItemsOpen(i).indexOf(!1);return-1===o?e:i[o]},me=n.getRootFolder(),ve=c.getRootFolder(),be=l.useCallback((function(e){return[{label:e._({id:"Global Objects"}),children:0===me.getChildrenCount()?[{label:(0,d.jsx)(b.Trans,{id:"There is no <0>global object</0> yet.",components:[(0,d.jsx)(Ie.Z,{href:gk,onClick:function(){return Y.ZP.openExternalURL(gk)}})]}),id:hk,isPlaceholder:!0}]:null,objectFolderOrObject:me,global:!0,isRoot:!0,id:fk},{label:e._({id:"Scene Objects"}),children:0===ve.getChildrenCount()?[{label:e._({id:"Start by adding a new object."}),id:"scene-empty-placeholder",isPlaceholder:!0}]:null,objectFolderOrObject:ve,global:!1,isRoot:!0,id:pk}]}),[me,ve]),Ce=l.useCallback((function(e){return!e.isRoot&&(e.isPlaceholder?e.id===hk&&1===g.length&&!g[0].global&&!g[0].objectFolderOrObject.isFolder():g.every((function(t){return t.global===e.global}))?!g[0]||!e.objectFolderOrObject.isADescendantOf(g[0].objectFolderOrObject):!(1!==g.length||!g.every((function(e){return!1===e.global}))||!0!==e.global)&&!g[0].objectFolderOrObject.isFolder())}),[g]),je=l.useCallback((function(e){var t=e.i18n,r=e.objectFolderOrObjectWithContext,i=e.index,o=e.folder,a=r.objectFolderOrObject,s=o&&o.isFolder()?o:n.getRootFolder();if(!a.isFolder()){var l=a.getObject().getName();if(c.hasObjectNamed(l))if(n.hasObjectNamed(l))(0,Ur.T4)(t._({id:"A global object with this name already exists. Please change the object name before setting it as a global object"}),{delayToNextTick:!0});else if(!m||m(l))if(Y.ZP.showConfirmDialog(t._({id:"Global elements help to manage objects across multiple scenes and it is recommended for the most used objects. This action cannot be undone. Do you want to set as global object?"}))){c.moveObjectFolderOrObjectToAnotherContainerInFolder(a,n,s,"number"===typeof i?i:n.getObjectsCount()),ee(!0);var u={objectFolderOrObject:a,global:!0};te(u),setTimeout((function(){he(u)}),100)}}}),[c,ee,n,m,te]),ye=l.useCallback((function(e,t,n){if(!t.isRoot&&1===g.length)if(t.isPlaceholder){if(t.id===hk&&1===g.length&&!g[0].global){var r=g[0];je({i18n:e,objectFolderOrObjectWithContext:r})}}else{var i=g[0];if(t.objectFolderOrObject!==i.objectFolderOrObject){var o,a;if(!1===i.global&&!0===t.global)return"inside"===n&&t.objectFolderOrObject.isFolder()?(o=t.objectFolderOrObject,a=0):a=(o=t.objectFolderOrObject.getParent()).getChildPosition(t.objectFolderOrObject)+("after"===n?1:0),void je({i18n:e,objectFolderOrObjectWithContext:i,folder:o,index:a});if(i.global===t.global){var s,l=i.objectFolderOrObject,c=t.objectFolderOrObject;s="inside"===n&&c.isFolder()?c:c.getParent();var u=l.getParent();if(s===u){var d=u.getChildPosition(l),p=u.getChildPosition(c);p>d&&(p-=1),"after"===n&&(p+=1),u.moveChild(d,p)}else{if(c.isADescendantOf(l))return;var f="inside"===n?0:s.getChildPosition(c)+("after"===n?1:0);u.moveObjectFolderOrObjectToAnotherFolder(l,s,f);var h=_.current;if(h){var x=xe({objectFolderOrObject:s,global:t.global});x&&h.animateItem(x)}}ee(!0)}}}}),[ee,g,je]),Ze=l.useCallback((function(e){if(e.isRoot||e.isPlaceholder)return null;var t=e.objectFolderOrObject;return t.isFolder()?"FOLDER":A(n,t.getObject().getConfiguration())}),[A,n]),ke=l.useCallback((function(e){var t;if(1===e.length){var n=e[0],r=n.objectFolderOrObject,i=n.global;if(r.isFolder()){var o=r.insertNewFolder("NewFolder",0);t={objectFolderOrObject:o,global:i},_.current&&_.current.openItems([Ck(e[0])])}else{var a=r.getParent(),s=a.insertNewFolder("NewFolder",a.getChildPosition(r));t={objectFolderOrObject:s,global:i}}}else{var l=c.getRootFolder().insertNewFolder("NewFolder",0);t={objectFolderOrObject:l,global:!1}}te(t);var u=wx(t.objectFolderOrObject).map((function(e){return Ck({objectFolderOrObject:e,global:t.global})}));u.push(t.global?fk:pk),_.current&&_.current.openItems(u),ce(t),U()}),[U,c,te,ce]),we=l.useCallback((function(e){if(g&&1===g.length&&!e.isPlaceholder){var t=e.objectFolderOrObject,n=g[0].objectFolderOrObject;t&&n&&n.isADescendantOf(t)&&te(null)}}),[te,g]),Te=l.useCallback((function(e,t){var n=e.objectFolderOrObject,r=e.global;if(t!==n.getParent()){n.getParent().moveObjectFolderOrObjectToAnotherFolder(n,t,0);var i=_.current;if(i){var o=xe({objectFolderOrObject:t,global:r});o&&i.animateItem(o)}ee(!0)}}),[ee]),Se=l.useCallback((function(e){return function(t,r){if(t.isPlaceholder)return[];if(t.isRoot)return"scene-objects"===t.id?[{label:e._({id:"Export as assets"}),click:function(){return Z()}}]:[];var i=t.objectFolderOrObject,o=t.global,s=o?n:c,l=kx(s);if(l.unshift({path:e._({id:"Root folder"}),folder:s.getRootFolder()}),i.isFolder()){var u=l.filter((function(e){return!e.folder.isADescendantOf(i)&&e.folder!==i}));return[{label:kk(e,{isGlobalObject:t.global,isFolder:!0}),enabled:Rt.has(ak),click:function(){return le(t,!0)}},{label:e._({id:"Rename"}),click:function(){return ce(t)},accelerator:(0,ue.$3)(O.values.userShortcutMap.RENAME_SCENE_OBJECT||ge.Z.RENAME_SCENE_OBJECT)},{label:e._({id:"Delete"}),click:function(){return ne(t)},accelerator:"Backspace"},{label:e._("Move to folder"),submenu:u.map((function(e){var n=e.folder;return{label:e.path,enabled:n!==i.getParent(),click:function(){return Te(t,n)}}}))},{type:"separator"},{label:e._({id:"Add a new object"}),click:function(){return $(t)}},{label:e._({id:"Add a new folder"}),click:function(){return ke(g.includes(t)?g:[t])}},{type:"separator"},{label:e._({id:"Expand all sub folders"}),click:function(){var e=function(e){if(!e.isFolder())return[];var t=[];return jx(e,"",t),t}(i).map((function(e){return e.folder}));_.current&&_.current.openItems([i].concat((0,v.Z)(e)).map((function(e){return Ck({objectFolderOrObject:e,global:o})})))}}]}var d,f=i.getObject(),h=a?ck(a,f.getName()):void 0,x=dk.MetadataProvider.getObjectMetadata(n.getCurrentPlatform(),f.getType());return[{label:e._({id:"Copy"}),click:function(){return ie(t)}},{label:e._({id:"Cut"}),click:function(){return oe(t)}},{label:kk(e,{isGlobalObject:t.global,isFolder:!1}),enabled:Rt.has(ak),click:function(){return le(t)}},{label:e._({id:"Duplicate"}),click:function(){return de(t)}},{label:e._({id:"Rename"}),click:function(){return ce(t)},accelerator:(0,ue.$3)(O.values.userShortcutMap.RENAME_SCENE_OBJECT||ge.Z.RENAME_SCENE_OBJECT)},{label:e._({id:"Delete"}),click:function(){return ne(t)},accelerator:"Backspace"},{type:"separator"},{label:e._({id:"Edit object"}),click:function(){return y(f)}},{label:e._({id:"Edit object variables"}),click:function(){return y(f,"variables")}},{label:e._({id:"Edit behaviors"}),click:function(){return y(f,"behaviors")}},{label:e._({id:"Edit effects"}),click:function(){return y(f,"effects")},enabled:x.hasDefaultBehavior("EffectCapability::EffectBehavior")},{type:"separator"},{label:e._({id:"Set as global object"}),enabled:(d=t,!d.global),click:function(){te(null),je({i18n:e,objectFolderOrObjectWithContext:t})},visible:!1!==j},{label:e._("Move to folder"),submenu:l.map((function(e){var n=e.folder;return{label:e.path,enabled:n!==i.getParent(),click:function(){return Te(t,n)}}}))},{type:"separator"},{label:e._({id:"Add instance to the scene"}),click:function(){return I(f.getName())}},void 0!==h&&p?{label:e._({id:"Select instances on scene ({instanceCountOnScene})",values:{instanceCountOnScene:h}}),click:function(){return p(f.getName())},enabled:h>0}:void 0].filter(Boolean)}}),[n,c,a,O.values.userShortcutMap,j,p,le,ce,ne,Te,$,ke,g,ie,oe,de,y,Z,te,je,I]),Pe=n.ptr+";"+c.ptr,Ee=[0===me.getChildrenCount()?null:fk,pk].filter(Boolean),Me=l.useMemo((function(){return{onGetItemInside:function(e){return e.isPlaceholder||e.isRoot?null:e.objectFolderOrObject.isFolder()?0===e.objectFolderOrObject.getChildrenCount()?null:{objectFolderOrObject:e.objectFolderOrObject.getChildAt(0),global:e.global}:null},onGetItemOutside:function(e){if(e.isPlaceholder||e.isRoot)return null;var t=e.objectFolderOrObject.getParent();return t.isRootFolder()?null:{objectFolderOrObject:t,global:e.global}}}}),[]);return(0,d.jsxs)(is,{maxWidth:!0,children:[(0,d.jsx)(L.sg,{children:(0,d.jsxs)(C.pJ,{children:[(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,d.jsx)(st.Z,{value:X,onRequestSearch:function(){},onChange:function(e){return K(e)},placeholder:{id:"Search objects"}})}),(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(M.Z,{size:"small",onClick:function(){return ke(g)},children:(0,d.jsx)(uk,{})})})]})}),(0,d.jsx)("div",{style:xk.listContainer,onKeyDown:re.current.onKeyDown,onKeyUp:re.current.onKeyUp,id:"objects-list",children:(0,d.jsx)(b.I18n,{children:function(e){var t=e.i18n;return(0,d.jsx)("div",{style:xk.autoSizerContainer,children:(0,d.jsx)(hr.qj,{style:xk.autoSizer,disableWidth:!0,children:function(e){var n=e.height;return(0,d.jsx)(zs,{ref:_,items:be(t),height:n,forceAllOpened:!!R,searchText:X,getItemName:bk,getItemThumbnail:Ze,getItemChildren:yk,multiSelect:!1,getItemId:Ck,getItemHtmlId:jk,getItemDataset:Zk,onEditItem:fe,onCollapseItem:we,selectedItems:g,onSelectItems:function(e){e||te(null);var t=e[0];t.isRoot||te(t||null)},onRenameItem:pe,buildMenuTemplate:Se(t),onMoveSelectionToItem:function(e,n){return ye(t,e,n)},canMoveSelectionToItem:Ce,reactDndType:vk,initiallyOpenedNodeIds:Ee,arrowKeyNavigationProps:Me,shouldSelectUponContextMenuOpening:!0},Pe)}})})}})}),(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(S,{label:(0,d.jsx)(b.Trans,{id:"Add a new object"}),primary:!0,onClick:function(){return $(g[0])},id:"add-new-object-button",icon:(0,d.jsx)(vt.Z,{})})})}),z&&(0,d.jsx)(ok,{onClose:function(){return W(null)},onCreateNewObject:J,onObjectsAddedFromAssets:Q,project:n,layout:r,objectsContainer:c,resourceManagementProps:u,canInstallPrivateAsset:x})]})})),Tk=function(e,t){return e.selectedObjectFolderOrObjectsWithContext===t.selectedObjectFolderOrObjectsWithContext&&e.project===t.project&&e.objectsContainer===t.objectsContainer},Sk=l.memo(wk,Tk),Pk=l.forwardRef((function(e,t){return(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Objects list"}),scope:"scene-editor-objects-list",children:(0,d.jsx)(Sk,(0,a.Z)({ref:t},e))})})),Ek=n(85529),Ik=n.g.gd,Mk=function(e){var t=e.project,n=e.behavior,r=e.object,i=e.onBehaviorUpdated,o=e.resourceManagementProps,a=l.useState(!1),c=(0,s.Z)(a,2),u=c[0],p=c[1],f=l.useMemo((function(){return(0,qn.Z)(n.getProperties(),(function(e){return e.getProperties()}),(function(e,t,n){e.updateProperty(t,n)}),r,"Basic")}),[n,r]),h=l.useMemo((function(){return function(e){var t=Ik.MetadataProvider.getBehaviorMetadata(Ik.JsPlatform.get(),e.getTypeName()).getProperties(),n=e.getProperties(),r=t.keys(),i=!1;return(0,Et.mapFor)(0,r.size(),(function(e){var o=r.at(e),a=t.get(o),s=a.getValue(),l=n.get(o).getValue(),c="boolean"===a.getType().toLowerCase()?"true"===l===("true"===s):l===s;a.isAdvanced()&&!c&&(i=!0)})),i}(n)}),[n]),g=l.useMemo((function(){return(0,qn.Z)(n.getProperties(),(function(e){return e.getProperties()}),(function(e,t,n){e.updateProperty(t,n)}),r,"Advanced")}),[n,r]),x=l.useMemo((function(){return(0,qn.Z)(n.getProperties(),(function(e){return e.getProperties()}),(function(e,t,n){e.updateProperty(t,n)}),r,"Deprecated")}),[n,r]);return(0,d.jsx)(L.sg,{expand:!0,children:f.length>0||g.length>0||x.length>0?(0,d.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[(0,d.jsx)(Yn.Z,{project:t,schema:f,instances:[n],onInstancesModified:i,resourceManagementProps:o}),(g.length>0||x.length>0)&&(0,d.jsxs)(si.UQ,{defaultExpanded:h,noMargin:!0,children:[(0,d.jsx)(si._m,{noMargin:!0,children:(0,d.jsx)(F.Z,{size:"sub-title",children:(0,d.jsx)(b.Trans,{id:"Advanced properties"})})}),(0,d.jsx)(si.X1,{disableGutters:!0,children:(0,d.jsxs)(L.sg,{expand:!0,noMargin:!0,children:[(0,d.jsx)(Yn.Z,{project:t,schema:g,instances:[n],onInstancesModified:i,resourceManagementProps:o}),x.length>0&&(u?(0,d.jsx)(Yn.Z,{project:t,schema:x,instances:[n],onInstancesModified:i,resourceManagementProps:o}):(0,d.jsx)(L.x1,{justifyContent:"center",children:(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Show deprecated options"}),onClick:function(){return p(!0)}},"show-deprecated")}))]})})]})]}):(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"There is nothing to configure for this behavior. You can still use events to interact with the object and this behavior."})})})},Lk=n(3290),Ak=n(13923),Fk=function(e){var t=e.forcedCursor,n=e.deactivateControls,r=l.useRef(null),i=l.useState({draggedVertex:null,draggedIndex:-1}),o=(0,s.Z)(i,2),c=o[0],u=o[1];n&&c.draggedVertex&&u({draggedVertex:null,draggedIndex:-1});var p=function(t,n){var r=e.imageWidth*e.imageZoomFactor,i=e.imageHeight*e.imageZoomFactor;return{frameX:Math.min(r,Math.max(t,0)),frameY:Math.min(i,Math.max(n,0))}},f=t?{cursor:t}:{},h=(0,a.Z)({},f),g=(0,a.Z)({},f),x=(0,a.Z)({},f),m=(0,a.Z)({position:"relative",width:"100%",height:"100%"},f),v=(0,a.Z)({position:"absolute",top:e.imageOffsetTop||0,left:e.imageOffsetLeft||0,width:e.imageWidth*e.imageZoomFactor,height:e.imageHeight*e.imageZoomFactor,overflow:"visible"},f);return(0,d.jsx)("div",{style:m,onPointerMove:n?null:function(t){var n=e.polygonOrigin,i=e.imageWidth,o=e.imageHeight,a=e.imageZoomFactor,s=c.draggedVertex,l=c.draggedIndex;if(s){var d=r.current.createSVGPoint();d.x=t.clientX,d.y=t.clientY;var f=r.current.getScreenCTM().inverse(),h=d.matrixTransform(f),g=p(h.x,h.y),x=g.frameX,m=g.frameY;s.x=x/a-e.offsetX-("Center"===n?i/2:0),s.y=m/a-e.offsetY-("Center"===n?o/2:0),e.onMoveVertex(l,Math.round(s?s.x:0),Math.round(s?s.y:0)),u({draggedVertex:s,draggedIndex:l})}},onPointerUp:n?null:function(){var t=c.draggedVertex,n=c.draggedIndex;!!t&&e.onMoveVertex(n,Math.round(t?t.x:0),Math.round(t?t.y:0)),u({draggedVertex:null,draggedIndex:-1})},children:(0,d.jsxs)("svg",{style:v,ref:r,children:["Box"===e.shape&&function(){var t=e.dimensionA,n=e.dimensionB,r=e.imageWidth,i=e.imageHeight,o=e.offsetX,a=e.offsetY,s=e.imageZoomFactor,l=t>0?t:r>0?r:1,c=n>0?n:i>0?i:1;return(0,d.jsx)("rect",{style:h,fill:"rgba(255,0,0,0.75)",strokeWidth:1,x:(o+r/2-l/2)*s,y:(a+i/2-c/2)*s,width:l*s,height:c*s},"boxShape")}(),"Circle"===e.shape&&function(){var t=e.dimensionA,n=e.imageWidth,r=e.imageHeight,i=e.offsetX,o=e.offsetY,a=e.imageZoomFactor;return(0,d.jsx)("circle",{style:g,fill:"rgba(255,0,0,0.75)",strokeWidth:1,cx:(i+n/2)*a,cy:(o+r/2)*a,r:(t>0?t:n+r>0?(n+r)/4:1)*a},"circleShape")}(),"Edge"===e.shape&&function(){var t=e.dimensionA,n=e.dimensionB,r=e.imageWidth,i=e.imageHeight,o=e.offsetX,a=e.offsetY,s=e.imageZoomFactor,l=(t>0?t:r>0?r:1)/2,c=Math.cos(n*Math.PI/180),u=Math.sin(n*Math.PI/180);return(0,d.jsx)("line",{style:x,stroke:"rgba(255,0,0,0.75)",strokeWidth:2,x1:(o+r/2-l*c)*s,y1:(a+i/2-l*u)*s,x2:(o+r/2+l*c)*s,y2:(a+i/2+l*u)*s},"edgeShape")}(),"Polygon"===e.shape&&function(){var t=e.vertices,n=e.polygonOrigin,r=e.imageWidth,i=e.imageHeight,o=e.offsetX,s=e.offsetY,p=e.imageZoomFactor,h=(0,a.Z)({cursor:"move"},f),g=(0,a.Z)({},f);return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)("polygon",{style:g,fill:"rgba(255,0,0,0.75)",strokeWidth:1,fillRule:"evenodd",points:t.map((function(e){return"".concat((e.x+o+("Center"===n?r/2:0))*p,",").concat((e.y+s+("Center"===n?i/2:0))*p)})).join(" ")},"polygonShape"),t.map((function(e,t){return(0,d.jsx)("circle",{onPointerDown:function(){return function(e,t){c.draggedVertex||u({draggedVertex:e,draggedIndex:t})}(e,t)},fill:"rgba(150,0,0,0.75)",strokeWidth:1,style:h,cx:(e.x+o+("Center"===n?r/2:0))*p,cy:(e.y+s+("Center"===n?i/2:0))*p,r:5},"vertex-".concat(t))}))]})}()]})})},Ok=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00002 3.66663C5.60679 3.66663 3.66669 5.60673 3.66669 7.99996C3.66669 10.3932 5.60679 12.3333 8.00002 12.3333C10.3933 12.3333 12.3334 10.3932 12.3334 7.99996C12.3334 5.60673 10.3933 3.66663 8.00002 3.66663ZM2.66669 7.99996C2.66669 5.05444 5.0545 2.66663 8.00002 2.66663C10.9456 2.66663 13.3334 5.05445 13.3334 7.99996C13.3334 10.9455 10.9456 13.3333 8.00002 13.3333C5.05451 13.3333 2.66669 10.9455 2.66669 7.99996Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00002 5.33331C8.27616 5.33331 8.50002 5.55717 8.50002 5.83331V10.1666C8.50002 10.4428 8.27616 10.6666 8.00002 10.6666C7.72388 10.6666 7.50002 10.4428 7.50002 10.1666V5.83331C7.50002 5.55717 7.72388 5.33331 8.00002 5.33331Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33335 7.99996C5.33335 7.72382 5.55721 7.49996 5.83335 7.49996H10.1667C10.4428 7.49996 10.6667 7.72382 10.6667 7.99996C10.6667 8.2761 10.4428 8.49996 10.1667 8.49996H5.83335C5.55721 8.49996 5.33335 8.2761 5.33335 7.99996Z",fill:"currentColor"})]}))})),Rk=function(e){var t=e.vertices,n=e.onChangeVertexX,r=e.onChangeVertexY,i=e.onAdd,o=e.onRemove,a=l.useContext(f.Z),s=function(e){for(var t=[],n=null,r=null,i=0;i<e.length;i++)n=e[i],r=i+1>=e.length?e[0]:e[i+1],t.push({x:r.x-n.x,y:r.y-n.y});if(t.length<3)return!1;for(var o=t[0].x*t[1].y-t[0].y*t[1].x>0,a=1;a<t.length-1;++a){if(t[a].x*t[a+1].y-t[a].y*t[a+1].x>0!==o)return!1}if(t[t.length-1].x*t[0].y-t[t.length-1].y*t[0].x>0!==o)return!1;for(var s=0;s<e.length-1;++s)for(var l=s+1;l<e.length;++l)if(e[s].x===e[l].x&&e[s].y===e[l].y)return!1;for(var c=!0,u=!0,d=0;d<e.length-1;++d)e[d].x!==e[d+1].x&&(c=!1),e[d].y!==e[d+1].y&&(u=!1);return!c&&!u};return(0,d.jsxs)(ZC.iA,{children:[(0,d.jsx)(ZC.xD,{children:(0,d.jsxs)(ZC.SC,{children:[(0,d.jsx)(ZC.bY,{}),(0,d.jsx)(ZC.bY,{children:"X"}),(0,d.jsx)(ZC.bY,{children:"Y"}),(0,d.jsx)(ZC.Nn,{})]})}),(0,d.jsxs)(ZC.RM,{children:[t.map((function(e,i){return(0,d.jsxs)(ZC.SC,{style:{backgroundColor:a.list.itemsBackgroundColor},children:[(0,d.jsx)(ZC.Nn,{children:!s(t)&&(0,d.jsx)(Ze.ZP,{title:(0,d.jsx)(b.Trans,{id:"The polygon is not convex"}),children:(0,d.jsx)(je.Z,{})})}),(0,d.jsx)(ZC.Nn,{children:(0,d.jsx)(An.Z,{margin:"none",fullWidth:!0,value:e.x.toString(10),onChange:function(e){return n(parseFloat(e)||0,i)},type:"number"})}),(0,d.jsx)(ZC.Nn,{children:(0,d.jsx)(An.Z,{margin:"none",fullWidth:!0,value:e.y.toString(10),onChange:function(e){return r(parseFloat(e)||0,i)},type:"number"})}),(0,d.jsx)(ZC.Nn,{children:(0,d.jsx)(M.Z,{size:"small",onClick:function(){return o(i)},children:(0,d.jsx)(vn.Z,{})})})]},"vertexRow".concat(i))})),(0,d.jsxs)(ZC.SC,{children:[(0,d.jsx)(ZC.Nn,{}),(0,d.jsx)(ZC.Nn,{}),(0,d.jsx)(ZC.Nn,{}),(0,d.jsx)(ZC.Nn,{children:(0,d.jsx)(M.Z,{onClick:i,size:"small",children:(0,d.jsx)(Ok,{})})})]})]})]})},Dk=n(89267),_k=n(51626),Bk=function(e){var t=e.properties,n=e.propertyName,r=e.step,i=e.onUpdate,o=e.id,a=t.get(n);return(0,d.jsx)(An.Z,{id:o,fullWidth:!0,value:a.getValue(),floatingLabelText:a.getLabel(),step:r,onChange:i,type:"number",endAdornment:(0,d.jsx)(Nk,{property:a})},n)},Nk=function(e){var t=e.property.getMeasurementUnit();return(0,d.jsx)(Ze.ZP,{title:(0,d.jsx)(Ak.Z,{label:t.getLabel(),description:t.getDescription(),elementsWithWords:t.getElementsWithWords()}),children:(0,d.jsx)(_k.Z,{position:"end",children:(0,qn.j)(t)})})},Uk=function(e){return(0,d.jsx)("div",{style:{overflowX:"auto",flex:1},children:(0,d.jsx)(Dk.Z,{disableElevation:!0,fullWidth:!0,children:e.bits.map((function(t,n){return(0,d.jsx)(Wr.Z,{variant:t?"contained":"outlined",color:t?"primary":"default",onClick:function(){return e.onChange(n,!t)},children:n+1},n)}))})})},Hk=function(e,t){return!!(e&1<<t)},Vk=function(e,t,n){return n?e|=1<<t:e&=~(1<<t),e},zk={getEditor:function(e){return this.components[e]?this.components[e].component:Mk},components:{"Physics2::Physics2Behavior":{component:function(e){var t=l.useRef(Dl.Z).current,n=l.useState(""),r=(0,s.Z)(n,2),i=r[0],o=r[1],c=e.behavior,u=e.onBehaviorUpdated,p=(0,Pt.Z)(),f=l.useCallback((function(e,t){c.updateProperty(e,t),p(),u()}),[c,p,u]),h=c.getProperties(),g=Array(16).fill(null),x=h.get("shape").getValue(),m=parseInt(h.get("layers").getValue(),10),v=parseInt(h.get("masks").getValue(),10);return(0,d.jsxs)(L.sg,{expand:!0,noOverflowParent:!0,children:[(0,d.jsx)(L.x1,{children:(0,d.jsx)(K.Z,{id:"physics2-parameter-body-type",fullWidth:!0,floatingLabelText:h.get("bodyType").getLabel(),value:h.get("bodyType").getValue(),onChange:function(e,t,n){return f("bodyType",n)},children:[(0,d.jsx)($.Z,{value:"Dynamic",label:{id:"Dynamic"}},"dynamic"),(0,d.jsx)($.Z,{value:"Static",label:{id:"Static"}},"static"),(0,d.jsx)($.Z,{value:"Kinematic",label:{id:"Kinematic"}},"kinematic")]},"bodyType")}),(0,d.jsxs)(C.ep,{children:[(0,d.jsx)(Wn.Z,{label:h.get("bullet").getLabel(),checked:"true"===h.get("bullet").getValue(),onCheck:function(e,t){return f("bullet",t?"1":"0")}}),(0,d.jsx)(Wn.Z,{label:h.get("fixedRotation").getLabel(),checked:"true"===h.get("fixedRotation").getValue(),onCheck:function(e,t){return f("fixedRotation",t?"1":"0")}}),(0,d.jsx)(Wn.Z,{label:h.get("canSleep").getLabel(),checked:"true"===h.get("canSleep").getValue(),onCheck:function(e,t){return f("canSleep",t?"1":"0")}})]}),(0,d.jsx)(L.x1,{children:(0,d.jsx)(he.Z,{identifier:"physics2-shape-collisions",kind:"info",children:(0,d.jsx)(b.Trans,{id:'The shape used in the Physics behavior is independent from the collision mask of the object. Be sure to use the "Collision" condition provided by the Physics behavior in the events. The usual "Collision" condition won\'t take into account the shape that you\'ve set up here.'})})}),(0,d.jsx)(L.x1,{children:(0,d.jsxs)(K.Z,{id:"physics2-parameter-shape",fullWidth:!0,floatingLabelText:h.get("shape").getLabel(),value:h.get("shape").getValue(),onChange:function(e,t,n){return f("shape",n)},children:[(0,d.jsx)($.Z,{value:"Box",label:{id:"Box"}},"box"),(0,d.jsx)($.Z,{value:"Circle",label:{id:"Circle"}},"circle"),(0,d.jsx)($.Z,{value:"Edge",label:{id:"Edge"}},"edge"),(0,d.jsx)($.Z,{value:"Polygon",label:{id:"Polygon"}},"polygon")]})}),(0,d.jsxs)(C.ep,{children:["Polygon"!==x&&(0,d.jsx)(An.Z,{fullWidth:!0,value:h.get("shapeDimensionA").getValue(),floatingLabelText:"Circle"===x?"Radius":"Edge"===x?"Length":"Width",min:0,onChange:function(e){return f("shapeDimensionA",e)},type:"number",endAdornment:(0,d.jsx)(Nk,{property:h.get("shapeDimensionA")})},"shapeDimensionA"),"Polygon"!==x&&"Circle"!==x&&(0,d.jsx)(An.Z,{fullWidth:!0,value:h.get("shapeDimensionB").getValue(),floatingLabelText:"Edge"===x?"Angle":"Height",min:"Edge"===x?void 0:0,onChange:function(e){return f("shapeDimensionB",e)},type:"number",endAdornment:(0,d.jsx)(Nk,{property:h.get("shapeDimensionB")})},"shapeDimensionB"),"Polygon"===x&&(0,d.jsx)(K.Z,{fullWidth:!0,floatingLabelText:h.get("polygonOrigin").getLabel(),value:h.get("polygonOrigin").getValue(),onChange:function(e,t,n){return f("polygonOrigin",n)},children:[(0,d.jsx)($.Z,{value:"Center",label:{id:"Center"}},"center"),(0,d.jsx)($.Z,{value:"Origin",label:{id:"Origin"}},"origin"),(0,d.jsx)($.Z,{value:"TopLeft",label:{id:"Top-Left"}},"topLeft")]}),(0,d.jsx)(Bk,{properties:h,propertyName:"shapeOffsetX",step:1,onUpdate:function(e){return f("shapeOffsetX",e)}}),(0,d.jsx)(Bk,{properties:h,propertyName:"shapeOffsetY",step:1,onUpdate:function(e){return f("shapeOffsetY",e)}})]}),(0,d.jsx)(L.x1,{children:(0,d.jsx)(jf.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"A temporary image to help you visualize the shape/polygon"}),project:e.project,resourceManagementProps:e.resourceManagementProps,resourcesLoader:t,resourceKind:"image",initialResourceName:"",fullWidth:!0,onChange:function(e){o(e),u(),p()}})}),!i&&(0,d.jsx)(L.x1,{children:(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"To preview the shape that the Physics engine will use for this object, choose first a temporary image to use for the preview."})})}),i&&(0,d.jsx)(L.x1,{children:(0,d.jsx)("div",{style:{width:"100%"},children:(0,d.jsx)(Lk.Z,{resourceName:i,imageResourceSource:t.getResourceFullUrl(e.project,i,{}),isImageResourceSmooth:(0,Lk.X)(e.project,i),fixedHeight:200,renderOverlay:function(e){var t=c.getProperties();return(0,d.jsx)(Fk,(0,a.Z)((0,a.Z)({},e),{},{shape:t.get("shape").getValue(),dimensionA:parseFloat(t.get("shapeDimensionA").getValue()),dimensionB:parseFloat(t.get("shapeDimensionB").getValue()),offsetX:parseFloat(t.get("shapeOffsetX").getValue()),offsetY:parseFloat(t.get("shapeOffsetY").getValue()),polygonOrigin:t.get("polygonOrigin").getValue(),vertices:JSON.parse(t.get("vertices").getValue()),onMoveVertex:function(e,n,r){var i=JSON.parse(t.get("vertices").getValue());i[e].x=n,i[e].y=r,c.updateProperty("vertices",JSON.stringify(i)),p(),u()}}))}})})}),"Polygon"===x&&(0,d.jsx)(L.x1,{children:(0,d.jsx)(Rk,{vertices:JSON.parse(h.get("vertices").getValue()),onChangeVertexX:function(e,t){var n=JSON.parse(h.get("vertices").getValue());n[t].x=e,f("vertices",JSON.stringify(n))},onChangeVertexY:function(e,t){var n=JSON.parse(h.get("vertices").getValue());n[t].y=e,f("vertices",JSON.stringify(n))},onAdd:function(){var e=JSON.parse(h.get("vertices").getValue());e.length>=8||(e.push({x:0,y:0}),f("vertices",JSON.stringify(e)))},onRemove:function(e){var t=JSON.parse(h.get("vertices").getValue());t.splice(e,1),f("vertices",JSON.stringify(t))}})}),(0,d.jsxs)(C.ep,{children:[(0,d.jsx)(Bk,{id:"physics2-parameter-density",properties:h,propertyName:"density",step:.1,onUpdate:function(e){return f("density",parseFloat(e)>0?e:"0")}}),(0,d.jsx)(Bk,{properties:h,propertyName:"gravityScale",step:.1,onUpdate:function(e){return f("gravityScale",e)}})]}),(0,d.jsxs)(C.ep,{children:[(0,d.jsx)(Bk,{properties:h,propertyName:"friction",step:.1,onUpdate:function(e){return f("friction",parseFloat(e)>0?e:"0")}}),(0,d.jsx)(Bk,{properties:h,propertyName:"restitution",step:.1,onUpdate:function(e){return f("restitution",parseFloat(e)>0?e:"0")}})]}),(0,d.jsxs)(C.ep,{children:[(0,d.jsx)(Bk,{properties:h,propertyName:"linearDamping",step:.05,onUpdate:function(e){return f("linearDamping",e)}}),(0,d.jsx)(Bk,{id:"physics2-parameter-angular-damping",properties:h,propertyName:"angularDamping",step:.05,onUpdate:function(e){return f("angularDamping",e)}})]}),(0,d.jsxs)(L.x1,{children:[(0,d.jsx)(F.Z,{style:{marginRight:10},children:h.get("layers").getLabel()}),(0,d.jsx)(Uk,{bits:g.map((function(e,t){return Hk(m,t)})),onChange:function(e,t){var n=Vk(m,e,t);f("layers",n.toString(10))}})]}),(0,d.jsxs)(L.x1,{children:[(0,d.jsx)(F.Z,{style:{marginRight:10},children:h.get("masks").getLabel()}),(0,d.jsx)(Uk,{bits:g.map((function(e,t){return Hk(v,t)})),onChange:function(e,t){var n=Vk(v,e,t);f("masks",n.toString(10))}})]})]})}}}},Wk=n.g.gd,Gk="Behaviors",Yk=l.forwardRef((function(e,t){var n=e.project,r=e.object,i=e.behavior,o=e.resourceManagementProps,a=e.onBehaviorsUpdated,s=e.onChangeBehaviorName,c=e.onRemoveBehavior,u=e.copyBehavior,p=e.canPasteBehaviors,f=e.pasteBehaviors,h=e.openExtension,g=l.useContext(se.ZP).values,x=(0,Pt.Z)(),m=i.getName(),j=i.getTypeName();if(i.isDefaultBehavior())return null;var y=!i.isFolded(),Z=Wk.MetadataProvider.getBehaviorMetadata(Wk.JsPlatform.get(),j);if(Wk.MetadataProvider.isBadBehaviorMetadata(Z))return(0,d.jsxs)(si.UQ,{defaultExpanded:!0,id:"behavior-parameters-".concat(m),ref:t,children:[(0,d.jsxs)(si._m,{actions:[(0,d.jsx)(M.Z,{onClick:function(e){e.stopPropagation(),c(m)},children:(0,d.jsx)(vn.Z,{})},"delete")],children:[(0,d.jsxs)(tm.c,{firstChild:!0,children:[(0,d.jsx)(b.Trans,{id:"Unknown behavior"})," "]}),(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,children:(0,d.jsx)($r.ZP,{margin:"none",value:m,disabled:!0})})]}),(0,d.jsx)(si.X1,{children:(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"This behavior is unknown. It might be a behavior that was defined in an extension and that was later removed. You should delete it."})})})]});var k=zk.getEditor(j),w=(0,li.r1)(j),T=w.filter((function(e){return!g.hiddenTutorialHints[e]})),S=Z.getIconFilename();return(0,d.jsxs)(si.UQ,{expanded:y,onChange:function(e,t){i.setFolded(!t),x()},id:"behavior-parameters-".concat(m),ref:t,children:[(0,d.jsxs)(si._m,{actions:[(0,d.jsx)(oi.Z,{size:"small",helpPagePath:Z.getHelpPath()},"help"),(0,d.jsx)(Ig.Z,{element:(0,d.jsx)(M.Z,{size:"small",children:(0,d.jsx)(Ls.Z,{})}),buildMenuTemplate:function(e){return[{label:e._({id:"Delete"}),click:function(){return c(m)}},{label:e._({id:"Copy"}),click:function(){return u(m)}},{label:e._({id:"Paste"}),click:f,enabled:p}].concat((0,v.Z)(n.hasEventsBasedBehavior(j)?[{type:"separator"},{label:e._({id:"Edit this behavior"}),click:function(){return h(j)}}]:[]))}},"menu")],children:[S?(0,d.jsx)(mr.q,{src:S,alt:Z.getFullName(),size:20}):null,(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)($r.ZP,{value:m,translatableHintText:{id:"Behavior name"},margin:"none",fullWidth:!0,disabled:!0,onChange:function(e,t){return s(i,t)},id:"behavior-".concat(m,"-name-text-field")})})]}),(0,d.jsx)(si.X1,{children:(0,d.jsxs)(L.sg,{expand:!0,noMargin:!0,noOverflowParent:!0,children:[T.length?(0,d.jsx)(L.x1,{children:(0,d.jsx)(C.ak,{expand:!0,children:w.map((function(e){return(0,d.jsx)(ai.Z,{tutorialId:e},e)}))})}):null,(0,d.jsx)(L.x1,{children:(0,d.jsx)(k,{behavior:i,project:n,object:r,resourceManagementProps:o,onBehaviorUpdated:a})})]})})]})})),qk=function(e){var t=(0,w.U)().isMobile,n=l.useRef(null),r=l.useState(null),a=(0,s.Z)(r,2),c=a[0],u=a[1],p=l.useRef(null);l.useEffect((function(){n.current&&p.current&&c&&(n.current.scrollTo(p.current),u(null),p.current=null)}),[c]);var f=l.useState(!1),h=(0,s.Z)(f,2),g=h[0],x=h[1],m=function(){var e=(0,lt.Z)().showConfirmation;return function(){var t=(0,o.Z)((0,i.Z)().mark((function t(n){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({title:{id:"Existing behaviors"},message:{id:"These behaviors are already attached to the object:{0}Do you want to replace their property values?",values:{0:"\n\n - "+n.join("\n\n - ")+"\n\n"}},confirmButtonLabel:{id:"Replace"},dismissButtonLabel:{id:"Omit"}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(),v=e.object,j=e.project,y=e.eventsFunctionsExtension,Z=e.onSizeUpdated,k=e.onBehaviorsUpdated,S=e.onUpdateBehaviorsSharedData,P=e.openBehaviorEvents,E=v.getAllBehaviorNames().toJSArray().map((function(e){return v.getBehavior(e)})).filter((function(e){return!e.isDefaultBehavior()})),I=(0,Pt.Z)(),M=l.useCallback((function(e,t){Wx(j,v,e,t)&&(x(!1),(0,Ar.qH)({behaviorType:e,parentEditor:"behaviors-editor"}),u(t)),I(),Z&&Z(),S(),k&&k()}),[I,v,k,Z,S,j]),A=l.useCallback((function(e,t){v.hasBehaviorNamed(t)||(v.renameBehavior(e.getName(),t),I(),k&&k())}),[I,v,k]),F=l.useCallback((function(e){var t="Are you sure you want to remove this behavior? This can't be undone.",n=Wk.WholeProjectRefactorer.findDependentBehaviorNames(j,v,e).toJSArray();n.length>0&&(t+="\nDependent behaviors will be removed too: "+n.join(", ")),Y.ZP.showConfirmDialog(t)&&(v.removeBehavior(e),n.forEach((function(e){return v.removeBehavior(e)})),Z&&Z()),k&&k()}),[v,k,Z,j]),O=l.useCallback((function(e){var t=v.getBehavior(e);Rt.set(Gk,[{name:e,type:t.getTypeName(),serializedBehavior:(0,Dt.XH)(t)}]),I()}),[I,v]),R=l.useCallback((function(){Rt.set(Gk,(0,Et.mapVector)(v.getAllBehaviorNames(),(function(e){var t=v.getBehavior(e);return t.isDefaultBehavior()?null:{name:e,type:t.getTypeName(),serializedBehavior:(0,Dt.XH)(t)}})).filter(Boolean)),I()}),[I,v]),D=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var t,n,r,o,a,s,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Rt.get(Gk),n=Ot.extractArray(t)){e.next=4;break}return e.abrupt("return");case 4:if(r=[],o=[],a=[],n.forEach((function(e){var t=Ot.extractStringProperty(e,"name"),n=Ot.extractStringProperty(e,"type"),i=Ot.extractObjectProperty(e,"serializedBehavior");if(t&&n&&i){var s=Wk.MetadataProvider.getBehaviorMetadata(j.getCurrentPlatform(),n);if(""===s.getObjectType()||s.getObjectType()===v.getType())if(v.hasBehaviorNamed(t)){if(v.getBehavior(t).getTypeName()!==n)return;o.push({name:t,type:n,serializedBehavior:i}),a.push(s.getFullName())}else r.push({name:t,type:n,serializedBehavior:i})}})),s=null,r.forEach((function(e){var t=e.name,n=e.type,r=e.serializedBehavior;if(v.addNewBehavior(j,n,t),v.hasBehaviorNamed(t)){s||(s=t);var i=v.getBehavior(t);(0,Dt.qx)(i,r)}})),r.forEach((function(e){var t=e.name;Wk.WholeProjectRefactorer.addRequiredBehaviorsFor(j,v,t)})),l=!1,!(o.length>0)){e.next=17;break}return e.next=15,m(a);case 15:(l=e.sent)&&o.forEach((function(e){var t=e.name,n=(e.type,e.serializedBehavior);if(v.hasBehaviorNamed(t)){var r=v.getBehavior(t);(0,Dt.qx)(r,n)}}));case 17:I(),s?(u(s),Z&&Z(),S()):1===o.length&&u(o[0].name),(s||l)&&k&&k();case 20:case"end":return e.stop()}}),e)}))),[I,v,k,Z,S,j,m]),_=l.useCallback((function(e){var t=e.split("::");if(2===t.length){var n=t[0],r=t[1];n&&j.hasEventsFunctionsExtensionNamed(n)&&P(n,r)}}),[P,j]),B=Rt.has(Gk);return(0,d.jsxs)(L.sg,{noMargin:!0,expand:!0,useFullHeight:!0,noOverflowParent:!0,children:[0===E.length?(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,d.jsx)(wt.$,{title:(0,d.jsx)(b.Trans,{id:"Add your first behavior"}),description:(0,d.jsx)(b.Trans,{id:"Behaviors add features to objects in a matter of clicks."}),helpPagePath:"/behaviors",tutorialId:"intro-behaviors-and-functions",actionButtonId:"add-behavior-button",actionLabel:t?(0,d.jsx)(b.Trans,{id:"Add"}):(0,d.jsx)(b.Trans,{id:"Add a behavior"}),onAction:function(){return x(!0)},secondaryActionIcon:(0,d.jsx)(Cn,{}),secondaryActionLabel:B?(0,d.jsx)(b.Trans,{id:"Paste"}):null,onSecondaryAction:function(){D()}})}):(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(Tt.Z,{ref:n,children:E.map((function(t,n){var r=t.getName(),i=c===r?p:null;return(0,d.jsx)(Yk,{ref:i,project:j,object:v,behavior:t,copyBehavior:O,onRemoveBehavior:F,onBehaviorsUpdated:k,onChangeBehaviorName:A,openExtension:_,canPasteBehaviors:B,pasteBehaviors:D,resourceManagementProps:e.resourceManagementProps},r)}))}),(0,d.jsx)(L.sg,{children:(0,d.jsxs)(C.pJ,{noMargin:!0,children:[(0,d.jsxs)(C.pJ,{expand:!0,children:[(0,d.jsx)(FC,{leftIcon:(0,d.jsx)(bn.Z,{}),label:t?(0,d.jsx)(b.Trans,{id:"Copy all"}):(0,d.jsx)(b.Trans,{id:"Copy all behaviors"}),onClick:function(){R()}},"copy-all-behaviors"),(0,d.jsx)(FC,{leftIcon:(0,d.jsx)(Cn,{}),label:(0,d.jsx)(b.Trans,{id:"Paste"}),onClick:function(){D()},disabled:!B},"paste-behaviors")]}),(0,d.jsx)(C.pJ,{justifyContent:"flex-end",expand:!0,children:(0,d.jsx)(T.Z,{label:t?(0,d.jsx)(b.Trans,{id:"Add"}):(0,d.jsx)(b.Trans,{id:"Add a behavior"}),primary:!0,onClick:function(){return x(!0)},icon:(0,d.jsx)(vt.Z,{}),id:"add-behavior-button"},"add-behavior-line")})]})})]}),g&&(0,d.jsx)(Vx,{open:g,objectType:v.getType(),objectBehaviorsTypes:Gx(v),onClose:function(){return x(!1)},onChoose:M,project:j,eventsFunctionsExtension:y})]})},Xk=n.g.gd,Kk="Effects",Jk=(0,Zt.x)("2d-effects-list"),Qk=(0,Zt.x)("3d-effects-list"),$k={rowContainer:{display:"flex",flexDirection:"column",marginTop:5},rowContent:{display:"flex",flex:1,alignItems:"center"}},ew=l.forwardRef((function(e,t){e.layerRenderingType;var n=e.target,i=e.project,o=e.resourceManagementProps,s=e.effectsContainer,c=e.effect,u=e.removeEffect,p=e.copyEffect,h=e.pasteEffectsBefore,g=e.chooseEffectType,x=e.allEffectMetadata,m=e.onEffectsUpdated,v=e.onEffectsRenamed,j=e.nameErrors,y=e.setNameErrors,Z=e.connectDragSource,k=l.useContext(f.Z),w=l.useContext(se.ZP),T=w.values.showEffectParameterNames,S=w.setShowEffectParameterNames,P=(0,Pt.Z)(),E=Rt.has(Kk),I=l.useCallback((function(e,t){if(t!==e.getName()){if(j[e.ptr]){var n=(0,a.Z)({},j);delete n[e.ptr],y(n)}if(t)if(s.hasEffectNamed(t))y((0,a.Z)((0,a.Z)({},j),{},(0,r.Z)({},e.ptr,(0,d.jsx)(b.Trans,{id:"The effect name {newName} is already taken",values:{newName:t}}))));else{var i=e.getName();e.setName(t),P(),v(i,t),m()}else y((0,a.Z)((0,a.Z)({},j),{},(0,r.Z)({},e.ptr,(0,d.jsx)(b.Trans,{id:"Effects cannot have empty names"}))))}}),[s,P,j,v,m,y]),A=c.getEffectType(),O=tw(x,A);return(0,d.jsx)(b.I18n,{children:function(e){var r=e.i18n;return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsxs)("div",{ref:t,style:(0,a.Z)((0,a.Z)({},$k.rowContent),{},{backgroundColor:k.list.itemsBackgroundColor}),children:[Z((0,d.jsx)("span",{children:(0,d.jsx)(L.sg,{children:(0,d.jsx)(yt.V,{})})})),(0,d.jsxs)(C.ep,{expand:!0,children:[(0,d.jsxs)(L.x1,{noMargin:!0,expand:!0,alignItems:"center",children:[(0,d.jsx)(F.Z,{noMargin:!0,noShrink:!0,children:(0,d.jsx)(b.Trans,{id:"Effect name:"})}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(An.Z,{margin:"none",commitOnBlur:!0,errorText:j[c.ptr],translatableHintText:{id:"Enter the effect name"},value:c.getName(),onChange:function(e){I(c,e)},fullWidth:!0})]}),(0,d.jsxs)(L.x1,{noMargin:!0,expand:!0,alignItems:"center",children:[(0,d.jsx)(F.Z,{noMargin:!0,noShrink:!0,children:(0,d.jsx)(b.Trans,{id:"Type:"})}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(K.Z,{margin:"none",value:A,onChange:function(e,t,n){return g(c,n)},fullWidth:!0,translatableHintText:{id:"Choose the effect to apply"},children:x.map((function(e){return(0,d.jsx)($.Z,{value:e.type,label:e.fullName,disabled:"object"===n&&e.isMarkedAsNotWorkingForObjects},e.type)}))})]})]}),(0,d.jsx)(Ig.Z,{element:(0,d.jsx)(M.Z,{size:"small",children:(0,d.jsx)(Ls.Z,{})}),buildMenuTemplate:function(e){return[{label:e._({id:"Delete"}),click:function(){return u(c)}},{label:e._({id:"Copy"}),click:function(){return p(c)}},{label:e._({id:"Paste"}),click:function(){return h(c)},enabled:E},{type:"separator"},{type:"checkbox",label:e._({id:"Show Properties Names"}),checked:T,click:function(){return S(!T)}}]}}),(0,d.jsx)(L.LZ,{})]}),A&&(0,d.jsx)(L.x1,{expand:!0,noMargin:!0,children:(0,d.jsxs)(L.sg,{expand:!0,children:[O?(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(L.x1,{children:(0,d.jsx)(Ta.Z,{children:(0,d.jsx)(Ke.r,{source:O.description})})}),(0,d.jsx)(Yn.Z,{instances:[c],schema:O.parametersSchema,project:i,resourceManagementProps:o,renderExtraDescriptionText:T?function(e){return r._({id:"Property name in events: `{parameterName}`",values:{parameterName:e}})}:void 0})]}):null,(0,d.jsx)(L.LZ,{})]})})]})}})})),tw=function(e,t){return e.find((function(e){return e.type===t}))},nw=function(e,t){for(var n=t.getEffectsCount(),r=0,i=0;i<n;i++){var o=t.getEffectAt(i),a=Xk.MetadataProvider.getEffectMetadata(e,o.getEffectType());a&&a.isMarkedAsOnlyWorkingFor3D()||r++}return r},rw=function(e,t){for(var n=t.getEffectsCount(),r=0,i=0;i<n;i++){var o=t.getEffectAt(i),a=Xk.MetadataProvider.getEffectMetadata(e,o.getEffectType());a&&a.isMarkedAsOnlyWorkingFor2D()||r++}return r};function iw(e){var t=e.effectsContainer,n=e.onEffectsUpdated,r=e.onEffectsRenamed,a=e.project,c=e.target,u=l.useRef(null),p=l.useState(null),f=(0,s.Z)(p,2),h=f[0],g=f[1],x=l.useRef(null);l.useEffect((function(){u.current&&x.current&&h&&(u.current.scrollTo(x.current),g(null),x.current=null)}),[h]);var m=l.useRef(null),v=l.useContext(tr.ZP),j=l.useState({}),y=(0,s.Z)(j,2),Z=y[0],k=y[1],w=l.useMemo((function(){return function(e){var t=e.getCurrentPlatform().getAllPlatformExtensions();return Wu()((0,Et.mapFor)(0,t.size(),(function(e){var n=t.at(e);return n.getExtensionEffectTypes().toJSArray().map((function(e){return n.getEffectMetadata(e)})).map((function(e){var t=e.getType(),r=e.getProperties(),i=r.keys().toJSArray().map((function(e){var n=r.get(e),i=n.getType().toLowerCase(),o=n.getLabel(),a=n.getDescription(),s=function(){return o},l=function(){return a},c=function(){return e};if("number"===i)return{name:e,valueType:"number",getValue:function(t){return t.getDoubleParameter(e)},setValue:function(t,n){return t.setDoubleParameter(e,n)},getLabel:s,getDescription:l,getExtraDescription:c};if("boolean"===i)return{name:e,valueType:"boolean",getValue:function(t){return t.getBooleanParameter(e)},setValue:function(t,n){return t.setBooleanParameter(e,n)},getLabel:s,getDescription:l,getExtraDescription:c};if("resource"===i){var u=n.getExtraInfo().toJSArray()[0]||"";return{name:e,valueType:"resource",resourceKind:u,getValue:function(t){return t.getStringParameter(e)},setValue:function(t,n){return t.setStringParameter(e,n)},getLabel:s,getDescription:l,getExtraDescription:c}}if("color"===i)return{name:e,valueType:"color",getValue:function(t){return t.getStringParameter(e)},setValue:function(t,n){return t.setStringParameter(e,n)},getLabel:s,getDescription:l,getExtraDescription:c};if("choice"===i){var d=n.getExtraInfo().toJSArray().map((function(e){return{value:e,label:e}}));return{name:e,valueType:"string",getChoices:function(){return d},getValue:function(t){return t.getStringParameter(e)},setValue:function(t,n){return t.setStringParameter(e,n)},getLabel:s,getDescription:l,getExtraDescription:c}}return console.error("A property with type=".concat(i," could not be mapped to a field for effect ").concat(t,". Ensure that this type is correct.")),null})).filter(Boolean);return{extension:n,type:t,effectMetadata:e,fullName:e.getFullName(),description:e.getDescription(),isMarkedAsNotWorkingForObjects:e.isMarkedAsNotWorkingForObjects(),isMarkedAsOnlyWorkingFor2D:e.isMarkedAsOnlyWorkingFor2D(),isMarkedAsOnlyWorkingFor3D:e.isMarkedAsOnlyWorkingFor3D(),parametersSchema:i}}))}))).sort((function(e,t){return e.fullName.localeCompare(t.fullName)}))}(e.project)}),[e.project]),S=l.useMemo((function(){var e,t=[],n=[],r=[],i=(0,ia.Z)(w);try{for(i.s();!(e=i.n()).done;){var o=e.value;o.isMarkedAsOnlyWorkingFor3D&&(o.type.endsWith("Light")?t.push(o):o.type.endsWith("Fog")?n.push(o):r.push(o))}}catch(a){i.e(a)}finally{i.f()}return[].concat(t,n,r)}),[w]),P=l.useMemo((function(){return w.filter((function(e){return e.isMarkedAsOnlyWorkingFor2D}))}),[w]),E=function(){var e=(0,lt.Z)().showConfirmation;return function(){var t=(0,o.Z)((0,i.Z)().mark((function t(n){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({title:{id:"Existing effects"},message:{id:"These effects already exist:{0}Do you want to replace them?",values:{0:"\n\n - "+n.join("\n\n - ")+"\n\n"}},confirmButtonLabel:{id:"Replace"},dismissButtonLabel:{id:"Omit"}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(),I=(0,Pt.Z)(),M=l.useCallback((function(e,t){e.setEffectType(t);var r=tw(w,t);r&&function(e,t){e.clearParameters();var n=t.getProperties();n.keys().toJSArray().forEach((function(t){var r=n.get(t),i=r.getType().toLowerCase();"number"===i?e.setDoubleParameter(t,parseFloat(r.getValue())||0):"boolean"===i?e.setBooleanParameter(t,"true"===r.getValue()):e.setStringParameter(t,r.getValue())}))}(e,r.effectMetadata),I(),n()}),[w,I,n]),A=l.useCallback((function(e){var r=(0,It.Z)("Effect",(function(e){return t.hasEffectNamed(e)})),i=t.insertNewEffect(r,t.getEffectsCount());M(i,e?"Scene3D::DirectionalLight":"Outline"),I(),n(),g(r)}),[M,t,I,n]),O=(0,Xr.zi)(v,Xr.OV,A),R=l.useCallback((function(e){t.removeEffect(e.getName()),I(),n()}),[t,I,n]),D=l.useCallback((function(e){Rt.set(Kk,[{name:e.getName(),type:e.getEffectType(),serializedEffect:(0,Dt.XH)(e)}]),I()}),[I]),_=l.useCallback((function(){Rt.set(Kk,(0,Et.mapFor)(0,t.getEffectsCount(),(function(e){var n=t.getEffectAt(e);return{name:n.getName(),type:n.getEffectType(),serializedEffect:(0,Dt.XH)(n)}}))),I()}),[I,t]),B=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(r){var o,s,l,u,d,p,f;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=Rt.get(Kk),s=Ot.extractArray(o)){e.next=4;break}return e.abrupt("return");case 4:if(l=[],u=[],s.forEach((function(e){var n=Ot.extractStringProperty(e,"name"),r=Ot.extractStringProperty(e,"type"),i=Ot.extractObjectProperty(e,"serializedEffect");if(n&&i){if(r){var o=Xk.MetadataProvider.getEffectMetadata(a.getCurrentPlatform(),r);if(!o)return;if("object"===c&&o.isMarkedAsNotWorkingForObjects())return}t.hasEffectNamed(n)?u.push({name:n,serializedEffect:i}):l.push({name:n,serializedEffect:i})}})),d=null,p=r,l.forEach((function(e){var n=e.name,r=e.serializedEffect,i=t.insertNewEffect(n,p);p++,(0,Dt.qx)(i,r),d||(d=n)})),f=!1,!(u.length>0)){e.next=16;break}return e.next=14,E(u.map((function(e){return e.name})));case 14:(f=e.sent)&&u.forEach((function(e){var n=e.name,r=e.serializedEffect;if(t.hasEffectNamed(n)){var i=t.getEffect(n);(0,Dt.qx)(i,r)}}));case 16:I(),d?g(d):1===u.length&&g(u[0].name),(d||f)&&n&&n();case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[I,a,c,t,E,n]),N=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t.getEffectsCount());case 2:case"end":return e.stop()}}),e)}))),[t,B]),U=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t.getEffectPosition(n.getName()));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,B]),H=l.useCallback((function(e){var r=m.current;if(r){var i=t.getEffectPosition(r.getName()),o=t.getEffectPosition(e.getName());t.moveEffect(i,o>i?o-1:o),I(),n()}}),[t,I,n]),V=Rt.has(Kk),z=l.useCallback((function(){if(t.getEffectsCount()<2)return null;for(var e=[],n=0;n<t.getEffectsCount();n++){var r=t.getEffectAt(n).getEffectType(),i=tw(w,r);if(i&&("Scene3D::LinearFog"===r||"Scene3D::ExponentialFog"===r)){if(e.includes(r))return i;e.push(r)}}return null}),[w,t])(),W=a.getCurrentPlatform(),G=nw(W,t),Y=rw(W,t),q="2d"===e.layerRenderingType?G:"3d"===e.layerRenderingType?Y:t.getEffectsCount();return(0,d.jsx)(b.I18n,{children:function(i){i.i18n;return(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,useFullHeight:!0,children:0!==q?(0,d.jsxs)(l.Fragment,{children:[(0,d.jsxs)(Tt.Z,{ref:u,children:[z&&(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(De.Z,{kind:"error",children:(0,d.jsx)(b.Trans,{id:'The "{0}" effect can only be applied once.',values:{0:z.fullName}})})})}),t.getEffectsCount()>3&&(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(he.Z,{identifier:"too-much-effects",kind:"warning",children:(0,d.jsx)(b.Trans,{id:"Using a lot of effects can have a severe negative impact on the rendering performance, especially on low-end or mobile devices. Consider using less effects if possible. You can also disable and re-enable effects as needed using events."})})})}),"2d"!==e.layerRenderingType&&Y>0&&(0,d.jsxs)(L.sg,{noMargin:!0,expand:!0,children:["3d"!==e.layerRenderingType&&(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(L.x1,{children:(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"3D effects"})})})}),(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,children:(0,Et.mapFor)(0,t.getEffectsCount(),(function(i){var o=t.getEffectAt(i),s=o.getEffectType(),l=tw(w,s),u=h===o.getName()?x:null;return l&&l.isMarkedAsOnlyWorkingFor2D?null:(0,d.jsx)(Qk,{beginDrag:function(){return m.current=o,{}},canDrag:function(){return!0},canDrop:function(){return!0},drop:function(){H(o)},children:function(i){var s=i.connectDragSource,l=i.connectDropTarget,p=i.isOver,f=i.canDrop;return l((0,d.jsxs)("div",{style:$k.rowContainer,children:[p&&(0,d.jsx)(kt.Z,{canDrop:f}),(0,d.jsx)(ew,{ref:u,layerRenderingType:"3d",target:c,project:a,resourceManagementProps:e.resourceManagementProps,effectsContainer:t,effect:o,removeEffect:R,copyEffect:D,pasteEffectsBefore:U,chooseEffectType:M,allEffectMetadata:S,onEffectsUpdated:n,onEffectsRenamed:r,nameErrors:Z,setNameErrors:k,connectDragSource:s})]},o.ptr))}},o.ptr)}))})})]}),"3d"!==e.layerRenderingType&&G>0&&(0,d.jsxs)(L.sg,{noMargin:!0,expand:!0,children:["2d"!==e.layerRenderingType&&(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(L.x1,{children:(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"2D effects"})})})}),(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,children:(0,Et.mapFor)(0,t.getEffectsCount(),(function(i){var o=t.getEffectAt(i),s=o.getEffectType(),l=tw(w,s),u=h===o.getName()?x:null;return l&&l.isMarkedAsOnlyWorkingFor3D?null:(0,d.jsx)(Jk,{beginDrag:function(){return m.current=o,{}},canDrag:function(){return!0},canDrop:function(){return!0},drop:function(){H(o)},children:function(i){var s=i.connectDragSource,l=i.connectDropTarget,p=i.isOver,f=i.canDrop;return l((0,d.jsxs)("div",{style:$k.rowContainer,children:[p&&(0,d.jsx)(kt.Z,{canDrop:f}),(0,d.jsx)(ew,{ref:u,layerRenderingType:"2d",target:c,project:a,resourceManagementProps:e.resourceManagementProps,effectsContainer:t,effect:o,removeEffect:R,copyEffect:D,pasteEffectsBefore:U,chooseEffectType:M,allEffectMetadata:P,onEffectsUpdated:n,onEffectsRenamed:r,nameErrors:Z,setNameErrors:k,connectDragSource:s})]},o.ptr))}},o.ptr)}))})})]})]}),(0,d.jsx)(L.sg,{children:(0,d.jsxs)(L.x1,{noMargin:!0,children:[(0,d.jsxs)(C.pJ,{expand:!0,children:[(0,d.jsx)(FC,{leftIcon:(0,d.jsx)(bn.Z,{}),label:(0,d.jsx)(b.Trans,{id:"Copy all effects"}),onClick:function(){_()}},"copy-all-effects"),(0,d.jsx)(FC,{leftIcon:(0,d.jsx)(Cn,{}),label:(0,d.jsx)(b.Trans,{id:"Paste"}),onClick:function(){N()},disabled:!V},"paste-effects")]}),(0,d.jsxs)(C.pJ,{justifyContent:"flex-end",expand:!0,children:["2d"!==e.layerRenderingType&&(0,d.jsx)(T.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Add a 3D effect"}),onClick:function(){return O(!0)},icon:(0,d.jsx)(vt.Z,{})}),"3d"!==e.layerRenderingType&&(0,d.jsx)(T.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Add a 2D effect"}),onClick:function(){return O(!1)},icon:(0,d.jsx)(vt.Z,{})})]})]})})]}):(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:""===e.layerRenderingType||"2d+3d"===e.layerRenderingType?(0,d.jsx)(wt.$,{title:(0,d.jsx)(b.Trans,{id:"Add your first effect"}),description:(0,d.jsx)(b.Trans,{id:"Effects create visual changes to the object."}),actionLabel:(0,d.jsx)(b.Trans,{id:"Add a 2D effect"}),helpPagePath:"object"===e.target?"/objects/effects":"/interface/scene-editor/layer-effects",onAction:function(){return O(!1)},secondaryActionIcon:(0,d.jsx)(vt.Z,{}),secondaryActionLabel:(0,d.jsx)(b.Trans,{id:"Add a 3D effect"}),onSecondaryAction:function(){return O(!0)}}):(0,d.jsx)(wt.$,{title:(0,d.jsx)(b.Trans,{id:"Add your first effect"}),description:(0,d.jsx)(b.Trans,{id:"Effects create visual changes to the object."}),actionLabel:"3d"===e.layerRenderingType?(0,d.jsx)(b.Trans,{id:"Add a 3D effect"}):(0,d.jsx)(b.Trans,{id:"Add a 2D effect"}),helpPagePath:"object"===e.target?"/objects/effects":"/interface/scene-editor/layer-effects",onAction:function(){return O("3d"===e.layerRenderingType)},secondaryActionIcon:(0,d.jsx)(Cn,{}),secondaryActionLabel:V?(0,d.jsx)(b.Trans,{id:"Paste"}):null,onSecondaryAction:function(){N()}})})})}})}var ow=n.g.gd,aw=function(e){var t=(0,lt.Z)().showConfirmation,n=e.openBehaviorEvents,r=l.useState(e.initialTab||"properties"),c=(0,s.Z)(r,2),u=c[0],p=c[1],f=l.useState(e.objectName),h=(0,s.Z)(f,2),g=h[0],x=h[1],m=(0,Pt.Z)(),v=ut({serializableObject:e.object,useProjectToUnserialize:e.project,onCancel:e.onCancel,resetThenClearPersistentUuid:!0}),C=v.onCancelChanges,j=v.notifyOfChange,y=v.hasUnsavedChanges,Z=v.getOriginalContentSerializedElement,k=ow.MetadataProvider.getObjectMetadata(e.project.getCurrentPlatform(),e.object.getType()),w=e.editorComponent,T=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.onApply(),(n=ow.WholeProjectRefactorer.computeChangesetForVariablesContainer(e.project,Z().getChild("variables"),e.object.getVariables())).hasRemovedVariables()&&n.clearRemovedVariables(),ow.WholeProjectRefactorer.applyRefactoringForVariablesContainer(e.project,e.object.getVariables(),n),e.object.clearPersistentUuid(),e.onRename(g);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),S=(0,gt.Z)("intro-variables").DismissableTutorialMessage;l.useEffect((function(){"behaviors"===u&&(0,Ar.KY)({parentEditor:"object-editor-dialog"})}),[u]);var P=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(r,o){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y()){e.next=6;break}return e.next=3,t({title:{id:"Discard changes and open events"},message:{id:"You've made some changes here. Are you sure you want to discard them and open the behavior events?"},confirmButtonLabel:{id:"Yes, discard my changes"},dismissButtonLabel:{id:"Stay there"}});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:C(),n(r,o);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[y,C,n,t]);return(0,d.jsxs)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Edit {objectName}",values:{objectName:g}}),actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),onClick:C},"cancel"),(0,d.jsx)(te.vF,{label:(0,d.jsx)(b.Trans,{id:"Apply"}),id:"apply-button",primary:!0,onClick:T},"apply")],secondaryActions:[(0,d.jsx)(Hn.Z,{helpPagePath:e.helpPagePath},"help-button"),(0,d.jsx)(dt,(0,a.Z)({},e.hotReloadPreviewButtonProps),"hot-reload-preview-button")],onRequestClose:C,onApply:T,open:e.open,fullHeight:!0,flexBody:!0,fixedContent:(0,d.jsx)(le.m,{value:u,onChange:p,options:[{label:(0,d.jsx)(b.Trans,{id:"Properties"}),value:"properties"},{label:(0,d.jsx)(b.Trans,{id:"Behaviors"}),value:"behaviors",id:"behaviors-tab"},{label:(0,d.jsx)(b.Trans,{id:"Variables"}),value:"variables"},k.hasDefaultBehavior("EffectCapability::EffectBehavior")?{label:(0,d.jsx)(b.Trans,{id:"Effects"}),value:"effects"}:null].filter(Boolean)}),id:"object-editor-dialog",children:["properties"===u&&w?(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,useFullHeight:!0,noOverflowParent:!0,children:(0,d.jsx)(w,{objectConfiguration:e.object.getConfiguration(),project:e.project,layout:e.layout,object:e.object,resourceManagementProps:e.resourceManagementProps,onSizeUpdated:m,objectName:e.objectName,onObjectUpdated:j,renderObjectNameField:function(){return(0,d.jsx)(An.Z,{fullWidth:!0,id:"object-name",commitOnBlur:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Object name"}),floatingLabelFixed:!0,value:g,translatableHintText:{id:"Object Name"},onChange:function(t){t!==g&&(x(e.getValidatedObjectOrGroupName(t)),j())},autoFocus:"desktop"})}})}):null,"behaviors"===u&&(0,d.jsx)(qk,{object:e.object,project:e.project,eventsFunctionsExtension:e.eventsFunctionsExtension,resourceManagementProps:e.resourceManagementProps,onSizeUpdated:m,onUpdateBehaviorsSharedData:e.onUpdateBehaviorsSharedData,onBehaviorsUpdated:j,openBehaviorEvents:P}),"variables"===u&&(0,d.jsxs)(L.sg,{expand:!0,noMargin:!0,children:[e.object.getVariables().count()>0&&S&&(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,children:S})}),(0,d.jsx)(Un,{variablesContainer:e.object.getVariables(),emptyPlaceholderTitle:(0,d.jsx)(b.Trans,{id:"Add your first object variable"}),emptyPlaceholderDescription:(0,d.jsx)(b.Trans,{id:"These variables hold additional information on an object."}),helpPagePath:"/all-features/variables/object-variables",onComputeAllVariableNames:e.onComputeAllVariableNames,onVariablesUpdated:j})]}),"effects"===u&&(0,d.jsx)(iw,{target:"object",layerRenderingType:"2d",project:e.project,resourceManagementProps:e.resourceManagementProps,effectsContainer:e.object.getEffects(),onEffectsRenamed:function(t,n){return e.layout&&ow.WholeProjectRefactorer.renameObjectEffect(e.project,e.layout,e.object,t,n)},onEffectsUpdated:function(){m(),j()}})]},e.object&&e.object.ptr)},sw=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={editorComponent:null,castToObjectType:null,helpPagePath:null,objectName:""},e}return(0,at.Z)(n,[{key:"UNSAFE_componentWillMount",value:function(){this._loadFrom(this.props.object)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){(!this.props.open&&e.open||e.open&&this.props.object!==e.object)&&this._loadFrom(e.object)}},{key:"_loadFrom",value:function(e){if(e){var t=Ek.Z.getEditorConfiguration(this.props.project,e.getType());if(!t)return this.setState({editorComponent:null,castToObjectType:null});this.setState({editorComponent:t.component,helpPagePath:t.helpPagePath,castToObjectType:t.castToObjectType,objectName:e.getName()})}}},{key:"render",value:function(){var e=this.props,t=e.object,n=e.initialTab,r=this.state,i=r.editorComponent,o=r.castToObjectType,s=r.helpPagePath;return t&&o?(0,l.createElement)(aw,(0,a.Z)((0,a.Z)({},this.props),{},{editorComponent:i,key:this.props.object&&this.props.object.ptr,helpPagePath:s,object:t,objectName:this.state.objectName,initialTab:n})):null}}]),n}(l.Component),lw=function(e){return(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Object editor"}),scope:"object-details",onClose:e.onCancel,showOnTop:!0,children:(0,d.jsx)(sw,(0,a.Z)({},e))})},cw=n(56924),uw=n.g.gd,dw=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={editedObjectWithContext:null,editedObjectInitialTab:"properties",selectedObjectFolderOrObjectsWithContext:[]},e._onDeleteObjects=function(t){return function(n,r){var i=1===n.length?{id:"Do you want to remove all references to this object in groups and events (actions and conditions using the object)?"}:{id:"Do you want to remove all references to these objects in groups and events (actions and conditions using the objects)?"},o=Y.ZP.showYesNoCancelDialog(t._(i));if("cancel"!==o){var a="yes"===o,s=e.props,l=s.project,c=s.globalObjectsContainer,u=s.eventsBasedObject;n.forEach((function(e){var t=e.object;uw.WholeProjectRefactorer.objectOrGroupRemovedInEventsBasedObject(l,u,c,u,t.getName(),!1,a)})),r(!0)}}},e._getValidatedObjectOrGroupName=function(t){var n=e.props.eventsBasedObject;return(0,It.Z)(uw.Project.getSafeName(t),(function(e){return!(!n.hasObjectNamed(e)&&!n.getObjectGroups().has(e)&&"Object"!==e)}))},e._onRenameEditedObject=function(t){var n=e.state.editedObjectWithContext;n&&e._onRenameObject(n,t)},e._onRenameObject=function(t,n){var r=t.object,i=e.props,o=i.project,a=i.globalObjectsContainer,s=i.eventsBasedObject;r.getName()!==n&&uw.WholeProjectRefactorer.objectOrGroupRenamedInEventsBasedObject(o,a,s,r.getName(),n,!1),r.setName(n)},e._onRenameObjectFolderOrObjectFinish=function(t,n,r){var i=t.objectFolderOrObject,o=t.global;if(Cx(i)===n)return e._onObjectFolderOrObjectWithContextSelected(t),void r(!1);if(i.isFolder())return i.setFolderName(n),void r(!0);var a=i.getObject();e._onRenameObject({object:a,global:o},n),e._onObjectFolderOrObjectWithContextSelected(t),r(!0)},e.editObject=function(t,n){t?e.setState({editedObjectWithContext:{object:t,global:!1},editedObjectInitialTab:n||"properties"}):e.setState({editedObjectWithContext:null,editedObjectInitialTab:"properties"})},e._onObjectFolderOrObjectWithContextSelected=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=[];t&&n.push(t),e.setState({selectedObjectFolderOrObjectsWithContext:n},(function(){e.forceUpdateObjectsList()}))},e.updateBehaviorsSharedData=function(){},e.forceUpdateObjectsList=function(){e._objectsList&&e._objectsList.forceUpdateList()},e}return(0,at.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.eventsBasedObject,r=t.project,a=t.eventsFunctionsExtension,s=this.state.selectedObjectFolderOrObjectsWithContext;return(0,d.jsx)(b.I18n,{children:function(t){var c=t.i18n;return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(L.x1,{expand:!0,useFullHeight:!0,children:(0,d.jsx)(Pk,{getThumbnail:Ju.Z.getThumbnail.bind(Ju.Z),project:r,unsavedChanges:e.props.unsavedChanges,objectsContainer:n,layout:null,resourceManagementProps:{resourceSources:[],resourceExternalEditors:[],onChooseResource:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getStorageProvider:function(){return cw.H},onFetchNewlyAddedResources:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getStorageProviderResourceOperations:function(){return null}},selectedObjectFolderOrObjectsWithContext:s,onEditObject:e.editObject,onExportAssets:function(){},onDeleteObjects:e._onDeleteObjects(c),getValidatedObjectOrGroupName:e._getValidatedObjectOrGroupName,onObjectCreated:function(){},onObjectFolderOrObjectWithContextSelected:e._onObjectFolderOrObjectWithContextSelected,onRenameObjectFolderOrObjectWithContextFinish:e._onRenameObjectFolderOrObjectFinish,onAddObjectInstance:function(){},onObjectPasted:function(){return e.updateBehaviorsSharedData()},ref:function(t){return e._objectsList=t},hotReloadPreviewButtonProps:{hasPreviewsRunning:!1,launchProjectDataOnlyPreview:function(){},launchProjectWithLoadingScreenPreview:function(){}},canInstallPrivateAsset:function(){return!1},canSetAsGlobalObject:!1})}),e.state.editedObjectWithContext&&(0,d.jsx)(lw,{open:!0,object:e.state.editedObjectWithContext.object,initialTab:e.state.editedObjectInitialTab,project:r,eventsFunctionsExtension:a,resourceManagementProps:{resourceSources:[],resourceExternalEditors:[],onChooseResource:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getStorageProvider:function(){return cw.H},onFetchNewlyAddedResources:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getStorageProviderResourceOperations:function(){return null}},onComputeAllVariableNames:function(){return[]},onCancel:function(){e.editObject(null)},getValidatedObjectOrGroupName:e._getValidatedObjectOrGroupName,onRename:e._onRenameEditedObject,onApply:function(){e.editObject(null),e.updateBehaviorsSharedData(),e.forceUpdateObjectsList()},hotReloadPreviewButtonProps:{hasPreviewsRunning:!1,launchProjectDataOnlyPreview:function(){},launchProjectWithLoadingScreenPreview:function(){}},onUpdateBehaviorsSharedData:function(){return e.updateBehaviorsSharedData()},openBehaviorEvents:function(){}})]})}})}}]),n}(l.Component);function pw(e){var t=e.project,n=e.globalObjectsContainer,r=e.eventsFunctionsExtension,i=e.eventsBasedObject,o=e.onRenameProperty,a=e.onEventsFunctionsAdded,c=e.unsavedChanges,u=l.useState("configuration"),p=(0,s.Z)(u,2),f=p[0],h=p[1],g=l.useCallback((function(){c&&c.triggerUnsavedChanges()}),[c]);return(0,d.jsx)(is,{children:(0,d.jsxs)(L.sg,{expand:!0,useFullHeight:!0,noOverflowParent:!0,children:[(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,noOverflowParent:!0,children:(0,d.jsx)(le.m,{value:f,onChange:h,options:[{value:"configuration",label:(0,d.jsx)(b.Trans,{id:"Configuration"})},{value:"properties",label:(0,d.jsx)(b.Trans,{id:"Properties"})},{value:"children",label:(0,d.jsx)(b.Trans,{id:"Children"})}]})})}),"configuration"===f&&(0,d.jsx)(WC,{eventsBasedObject:i,unsavedChanges:c}),"properties"===f&&(0,d.jsx)(JC,{project:t,extension:r,eventsBasedObject:i,onRenameProperty:o,onPropertiesUpdated:g,onEventsFunctionsAdded:a}),"children"===f&&(0,d.jsx)(dw,{project:t,globalObjectsContainer:n,eventsFunctionsExtension:r,eventsBasedObject:i})]})})}var fw=function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{viewBox:"0 -3 24 24",children:(0,d.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,d.jsxs)("g",{id:"Create",fillRule:"nonzero",children:[(0,d.jsx)("polygon",{id:"Shape",fill:"#2B3990",points:"24 8 18 2 18 6 14 6 14 10 18 10 18 14"}),(0,d.jsxs)("g",{id:"Group-2",fill:"#27AAE1",children:[(0,d.jsx)("rect",{id:"Rectangle-path",transform:"translate(2.999518, 3.574897) rotate(-45.000000) translate(-2.999518, -3.574897) ",x:"1.58553176",y:"0.746924118",width:"2.82797288",height:"5.65594576"}),(0,d.jsx)("rect",{id:"Rectangle-path",transform:"translate(10.999518, 11.574897) rotate(-45.000000) translate(-10.999518, -11.574897) ",x:"9.58553176",y:"8.74692412",width:"2.82797288",height:"5.65594576"}),(0,d.jsx)("rect",{id:"Rectangle-path",transform:"translate(2.999518, 11.574897) rotate(-135.000000) translate(-2.999518, -11.574897) ",x:"1.58553176",y:"8.74692412",width:"2.82797288",height:"5.65594576"}),(0,d.jsx)("rect",{id:"Rectangle-path",transform:"translate(10.999518, 3.574897) rotate(-135.000000) translate(-10.999518, -3.574897) ",x:"9.58553176",y:"0.746924118",width:"2.82797288",height:"5.65594576"})]})]})})}))},hw=function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{viewBox:"0 -6 24 24",children:(0,d.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,d.jsxs)("g",{id:"Step",children:[(0,d.jsx)("polygon",{id:"Shape",points:"0 3 0 6 3 6 3 9 7.5 4.5 3 0 3 3",fill:"#2b3990"}),(0,d.jsx)("polygon",{id:"polygon6",points:"16.5 3 16.5 6 19.5 6 19.5 9 24 4.5 19.5 0 19.5 3",fill:"#2b3990"}),(0,d.jsx)("circle",{id:"path825",cx:"12",cy:"4.5",r:"2.2509",fill:"none",stroke:"#27aae1",strokeWidth:"1.5"})]})})}))},gw=function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{viewBox:"0 -3 24 24",children:(0,d.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,d.jsxs)("g",{id:"Destroy",transform:"translate(0.000000, -1.000000)",fillRule:"nonzero",children:[(0,d.jsxs)("g",{id:"Group",transform:"translate(0.000000, 1.000000)",children:[(0,d.jsx)("polygon",{id:"Shape",fill:"#2B3990",points:"9.92307692 7.07692308 4.38461538 1.53846154 4.38461538 5.23076923 0.692307692 5.23076923 0.692307692 8.92307692 4.38461538 8.92307692 4.38461538 12.6153846"}),(0,d.jsx)("rect",{id:"Rectangle-path",fill:"#27AAE1",transform:"translate(10.845138, 3.385446) rotate(-45.000000) translate(-10.845138, -3.385446) ",x:"9.53992021",y:"0.77500965",width:"2.6104365",height:"5.22087301"}),(0,d.jsx)("rect",{id:"Rectangle-path",fill:"#27AAE1",transform:"translate(18.229754, 10.770062) rotate(-45.000000) translate(-18.229754, -10.770062) ",x:"16.9245356",y:"8.15962503",width:"2.6104365",height:"5.22087301"}),(0,d.jsx)("rect",{id:"Rectangle-path",fill:"#27AAE1",transform:"translate(10.846985, 10.770246) rotate(-135.000000) translate(-10.846985, -10.770246) ",x:"9.54176636",y:"8.15980965",width:"2.6104365",height:"5.22087301"}),(0,d.jsx)("rect",{id:"Rectangle-path",fill:"#27AAE1",transform:"translate(18.231600, 3.385631) rotate(-135.000000) translate(-18.231600, -3.385631) ",x:"16.9263817",y:"0.775194265",width:"2.6104365",height:"5.22087301"})]}),(0,d.jsxs)("g",{id:"Group",opacity:"0.1",transform:"translate(2.538462, 0.692308)",children:[(0,d.jsx)("rect",{id:"Rectangle-path",fill:"#000000",transform:"translate(7.616400, 11.768538) rotate(135.000000) translate(-7.616400, -11.768538) ",x:"5.98441565",y:"10.4633202",width:"3.2639687",height:"2.6104365"}),(0,d.jsx)("polygon",{id:"Shape",fill:"#FFFFFF",points:"7.38461538 7.38461538 1.83645766 1.87268753 1.83645766 3.7132995 6.46153846 8.30769231"}),(0,d.jsx)("rect",{id:"Rectangle-path",fill:"#FFFFFF",transform:"translate(8.308523, 3.693323) rotate(-135.000000) translate(-8.308523, -3.693323) ",x:"5.69808657",y:"2.38810482",width:"5.22087301",height:"2.6104365"}),(0,d.jsx)("rect",{id:"Rectangle-path",fill:"#FFFFFF",transform:"translate(15.693138, 11.077938) rotate(-135.000000) translate(-15.693138, -11.077938) ",x:"13.082702",y:"9.77272021",width:"5.22087301",height:"2.6104365"}),(0,d.jsx)("rect",{id:"Rectangle-path",fill:"#FFFFFF",transform:"translate(9.460009, 9.922714) rotate(45.000000) translate(-9.460009, -9.922714) ",x:"8.15479058",y:"8.94333902",width:"2.6104365",height:"1.95875045"}),(0,d.jsx)("rect",{id:"Rectangle-path",fill:"#FFFFFF",transform:"translate(15.693138, 3.693323) rotate(-135.000000) translate(-15.693138, -3.693323) ",x:"14.3879202",y:"1.08288657",width:"2.6104365",height:"5.22087301"})]})]})})}))},xw=function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{viewBox:"0 0 23.109 23.124",children:(0,d.jsxs)("g",{id:"Action",transform:"translate(-92.011 -101.74)",fillRule:"nonzero",children:[(0,d.jsx)("path",{id:"path1010",d:"m101.01 101.74v2.3203a9.525 9.525 0 0 0-2.0743 0.85473l-1.6459-1.6536-1.9498 1.9523 0.0052 5e-3 -1.7436 1.741 1.635 1.6356a9.398 9.398 0 0 0-0.86765 2.0846h-2.3549v5.2307h2.344a9.525 9.525 0 0 0 0.85731 2.0665l-1.6511 1.6536 3.7042 3.7042 1.6567-1.6562a9.4245 9.4245 0 0 0 2.0846 0.84904v2.3363h5.2178v-2.3518a9.4562 9.4562 0 0 0 2.0557-0.8599l1.6485 1.6485 1.8226-1.8231-5e-3 -5e-3 1.8707-1.8707-1.6588-1.6588a9.5806 9.5806 0 0 0 0.83871-2.0324h2.3228v-5.2306h-2.3125a9.525 9.525 0 0 0-0.84905-2.0608l1.6428-1.6407-3.7042-3.7042-1.6376 1.6382a9.4932 9.4932 0 0 0-2.0397-0.85215v-2.3203z",fill:"#4db0e1"}),(0,d.jsx)("path",{id:"path8-6-0",d:"m92.093 110.66v5.2308h2.3125a9.525 9.525 0 0 0 0.84931 2.0611l-1.6431 1.6404 3.7042 3.7042 1.6378-1.6378a9.4932 9.4932 0 0 0 2.0399 0.85196v2.3204h5.2123v-2.3204a9.525 9.525 0 0 0 2.0743-0.8546l1.6457 1.6536 1.95-1.9526-16.404-16.264-1.8759 1.8759 1.6589 1.6589a9.5806 9.5806 0 0 0-0.83873 2.032z",fill:"#4db0e1"}),(0,d.jsx)("path",{id:"path10-3-0",d:"m93.599 106.96 1.6351 1.6351a9.398 9.398 0 0 0-0.86783 2.0849h-2.3548v5.2308h2.3442a9.525 9.525 0 0 0 0.85725 2.0664l-1.651 1.6536 3.7042 3.7042 1.6563-1.6563a9.4245 9.4245 0 0 0 2.0849 0.84931v2.3363h5.2176v-2.3521a9.4562 9.4562 0 0 0 2.0558-0.8599l1.6484 1.6484 1.823-1.823-16.404-16.264z",fill:"#283782",fillOpacity:".2"}),(0,d.jsx)("path",{id:"path871-7",d:"m106.69 107.2h-3.4025l3.7809 5.9346-3.7809 5.9346h3.4025l3.7809-5.9346z",fill:"#283983"}),(0,d.jsx)("path",{id:"path873-9",d:"m101.39 107.2h-3.4025l3.7809 5.9346-3.7809 5.9346h3.4025l3.7835-5.9346z",fill:"#283983"})]})}))},mw=function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{viewBox:"0 0 23.109 23.124",children:(0,d.jsxs)("g",{id:"Action",fill:"#283983",children:[(0,d.jsx)("path",{id:"path1010",d:"m8.9958 0v2.3203a9.525 9.525 0 0 0-2.0743 0.85473l-1.6459-1.6536-1.9498 1.9523 0.0052 5e-3 -1.7436 1.741 1.635 1.6356a9.398 9.398 0 0 0-0.86765 2.0846h-2.3549v5.2307h2.344a9.525 9.525 0 0 0 0.85731 2.0665l-1.6511 1.6536 3.7042 3.7042 1.6567-1.6562a9.4245 9.4245 0 0 0 2.0846 0.84904v2.3363h5.2178v-2.3518a9.4562 9.4562 0 0 0 2.0557-0.8599l1.6485 1.6485 1.8226-1.8231-0.0052-5e-3 1.8707-1.8707-1.6588-1.6588a9.5806 9.5806 0 0 0 0.83871-2.0324h2.3229v-5.2306h-2.3125a9.525 9.525 0 0 0-0.84904-2.0608l1.6428-1.6407-3.7042-3.7042-1.6376 1.6382a9.4932 9.4932 0 0 0-2.0397-0.85215v-2.3203z",fill:"#4db0e1"}),(0,d.jsx)("path",{id:"path8-6-0",d:"m0.081856 8.9161v5.2308h2.3125a9.525 9.525 0 0 0 0.84931 2.0611l-1.6431 1.6404 3.7042 3.7042 1.6378-1.6378a9.4932 9.4932 0 0 0 2.0399 0.85196v2.3204h5.2123v-2.3204a9.525 9.525 0 0 0 2.0743-0.8546l1.6457 1.6536 1.95-1.9526-16.404-16.264-1.8759 1.8759 1.6589 1.6589a9.5806 9.5806 0 0 0-0.83873 2.032z",fill:"#4db0e1"}),(0,d.jsx)("path",{id:"path10-3-0",d:"m1.5875 5.2198 1.6351 1.6351a9.398 9.398 0 0 0-0.86783 2.0849h-2.3548v5.2308h2.3442a9.525 9.525 0 0 0 0.85725 2.0664l-1.651 1.6536 3.7042 3.7042 1.6563-1.6563a9.4245 9.4245 0 0 0 2.0849 0.84931v2.3363h5.2176v-2.3521a9.4562 9.4562 0 0 0 2.0558-0.8599l1.6484 1.6484 1.823-1.823-16.404-16.264z",fill:"#283782",fillOpacity:".2"}),(0,d.jsx)("path",{id:"path821",d:"m13.081 13.524h-2.7983v-0.37982q0-0.63562 0.2558-1.124 0.2558-0.49609 1.0775-1.2557l0.49609-0.44958q0.44183-0.40308 0.64337-0.75964 0.20929-0.35657 0.20929-0.71313 0-0.5426-0.37207-0.84491-0.37207-0.31006-1.0387-0.31006-0.62787 0-1.3565 0.26355-0.72864 0.2558-1.5193 0.7674v-2.434q0.93793-0.32556 1.7131-0.48059 0.77515-0.15503 1.496-0.15503 1.8914 0 2.8835 0.77515 0.99219 0.7674 0.99219 2.2479 0 0.75964-0.30231 1.3643-0.30231 0.59686-1.0309 1.2867l-0.49609 0.44183q-0.5271 0.48059-0.68988 0.77515-0.16278 0.2868-0.16278 0.63562zm-2.7983 1.1472h2.7983v2.7595h-2.7983z",fill:"#283983"})]})}))},vw=function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{viewBox:"0 0 23.109 23.124",children:(0,d.jsxs)("g",{id:"Expression",children:[(0,d.jsx)("path",{id:"path1010",d:"m8.9958 0v2.3203a9.525 9.525 0 0 0-2.0743 0.85473l-1.6459-1.6536-1.9498 1.9523 0.0052 5e-3 -1.7436 1.741 1.635 1.6356a9.398 9.398 0 0 0-0.86765 2.0846h-2.3549v5.2307h2.344a9.525 9.525 0 0 0 0.85731 2.0665l-1.6511 1.6536 3.7042 3.7042 1.6567-1.6562a9.4245 9.4245 0 0 0 2.0846 0.84904v2.3363h5.2178v-2.3518a9.4562 9.4562 0 0 0 2.0557-0.8599l1.6485 1.6485 1.8226-1.8232-0.0052-5e-3 1.8707-1.8707-1.6588-1.6588a9.5806 9.5806 0 0 0 0.83871-2.0324h2.3229v-5.2306h-2.3125a9.525 9.525 0 0 0-0.84904-2.0608l1.6428-1.6407-3.7042-3.7042-1.6376 1.6382a9.4932 9.4932 0 0 0-2.0397-0.85215v-2.3203z",fill:"#4db0e1",strokeWidth:".26458"}),(0,d.jsx)("path",{id:"path8-6-0",d:"m0.081857 8.9161v5.2308h2.3125a9.525 9.525 0 0 0 0.84931 2.0611l-1.6431 1.6404 3.7042 3.7042 1.6378-1.6378a9.4932 9.4932 0 0 0 2.0399 0.85196v2.3204h5.2123v-2.3204a9.525 9.525 0 0 0 2.0743-0.8546l1.6457 1.6536 1.95-1.9526-16.404-16.264-1.8759 1.8759 1.6589 1.6589a9.5806 9.5806 0 0 0-0.83873 2.032z",fill:"#4db0e1",strokeWidth:".26458"}),(0,d.jsx)("path",{id:"path10-3-0",d:"m1.5875 5.2198 1.6351 1.6351a9.398 9.398 0 0 0-0.86783 2.0849h-2.3548v5.2308h2.3442a9.525 9.525 0 0 0 0.85725 2.0664l-1.651 1.6536 3.7042 3.7042 1.6563-1.6563a9.4245 9.4245 0 0 0 2.0849 0.84931v2.3363h5.2176v-2.3522a9.4562 9.4562 0 0 0 2.0558-0.85989l1.6484 1.6484 1.823-1.823-16.404-16.264z",fill:"#283782",fillOpacity:".2",strokeWidth:".26458"}),(0,d.jsxs)("g",{id:"text1262",fill:"#283983",strokeWidth:".21798","aria-label":"f(x)",children:[(0,d.jsx)("path",{id:"path936",d:"m8.4202 7.2384v1.1256h-0.94835q-0.36401 0-0.5077 0.13411-0.14369 0.12932-0.14369 0.45502v0.37359h1.4656v1.2262h-1.4656v4.1383h-1.7147v-4.1383h-0.85256v-1.2262h0.85256v-0.37359q0-0.87651 0.48854-1.2932 0.48854-0.42149 1.5135-0.42149z"}),(0,d.jsx)("path",{id:"path938",d:"m10.822 15.984h-1.4225q-0.73282-1.183-1.0825-2.2463-0.34964-1.0681-0.34964-2.117t0.34964-2.1218q0.35443-1.0777 1.0825-2.2511h1.4225q-0.61308 1.1351-0.91961 2.2224-0.30654 1.0825-0.30654 2.141 0 1.0585 0.30175 2.1458 0.30654 1.0873 0.9244 2.2272z"}),(0,d.jsx)("path",{id:"path940",d:"m12.277 11.947-1.935-2.6199h1.8153l1.0968 1.5902 1.1112-1.5902h1.8153l-1.935 2.6104 2.0308 2.754h-1.8153l-1.207-1.6955-1.1926 1.6955h-1.8153z"}),(0,d.jsx)("path",{id:"path942",d:"m15.771 15.984q0.61308-1.1399 0.91961-2.2272t0.30654-2.1458q0-1.0585-0.30654-2.141-0.30654-1.0873-0.91961-2.2224h1.4225q0.72803 1.1735 1.0777 2.2511 0.35444 1.0729 0.35444 2.1218t-0.34964 2.117q-0.34964 1.0633-1.0825 2.2463z"})]})]})}))},bw=function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{viewBox:"0 -6 24 24",children:(0,d.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,d.jsxs)("g",{id:"Activate",fillRule:"nonzero",children:[(0,d.jsx)("rect",{id:"Rectangle-path",fill:"#27AAE1",x:"0",y:"0",width:"24",height:"10.2857143"}),(0,d.jsx)("rect",{id:"Rectangle-path",fill:"#2B3990",x:"1.71428571",y:"1.71428571",width:"10.2857143",height:"6.85714286"}),(0,d.jsx)("polygon",{id:"Shape",fill:"#FFFFFF",points:"20.5710245 1.71428571 18.8571429 3.42897546 17.1432612 5.14285714 15.4285714 6.85673883 17.1432612 8.57142857 18.8571429 6.85673883 20.5710245 5.14285714 22.2857143 3.42897546"}),(0,d.jsx)("polygon",{id:"Shape",fill:"#FFFFFF",points:"18.8567388 3.42857143 17.1428571 5.14326117 15.4289755 3.42857143 13.7142857 5.14326117 15.4289755 6.85714286 18.8567388 6.85714286 20.5714286 5.14326117"})]})})}))},Cw=function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{viewBox:"0 -6 24 24",children:(0,d.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,d.jsxs)("g",{id:"Deactivate",fillRule:"nonzero",children:[(0,d.jsx)("rect",{id:"Rectangle-path",fill:"#2B3990",x:"0",y:"0",width:"24",height:"10.2857143"}),(0,d.jsx)("polygon",{id:"Shape",fill:"#FFFFFF",points:"6.85673883 1.71428571 5.14285714 3.42897546 3.42897546 1.71428571 1.71428571 3.42897546 3.42897546 5.14285714 1.71428571 6.85673883 3.42897546 8.57142857 5.14285714 6.85673883 6.85673883 8.57142857 8.57142857 6.85673883 6.85673883 5.14285714 8.57142857 3.42897546"}),(0,d.jsx)("rect",{id:"Rectangle-path",fill:"#27AAE1",x:"12",y:"1.71428571",width:"10.2857143",height:"6.85714286"})]})})}))},jw=n.g.gd,yw={icon:{width:40,height:40},disabledItem:{opacity:.6}},Zw=function(e){var t=e.icon,n=e.disabled,r=e.onChoose,i=e.name,o=e.description;return(0,d.jsx)(He.HC,{leftIcon:t,primaryText:i,secondaryText:o,secondaryTextLines:2,onClick:function(){return r({functionType:jw.EventsFunction.Action,name:i})},style:n?yw.disabledItem:void 0,disabled:n})};function kw(e){var t=e.eventsBasedBehavior,n=e.onChoose,r=e.onCancel,i=t.getEventsFunctions(),o=l.useState(!1),a=(0,s.Z)(o,2),c=a[0],u=a[1];return(0,d.jsxs)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:'Choose a new behavior function ("method")'}),secondaryActions:[(0,d.jsx)(Hn.Z,{helpPagePath:"/behaviors/events-based-behaviors"},"help")],actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),keyboardFocused:!0,onClick:r},"close")],open:!0,onRequestClose:r,children:[(0,d.jsxs)(He.aV,{children:[(0,d.jsx)(He.HC,{leftIcon:(0,d.jsx)(xw,{style:yw.icon}),primaryText:(0,d.jsx)(b.Trans,{id:"Action"}),secondaryText:(0,d.jsx)(b.Trans,{id:"An action that can be used on objects with the behavior. You can define the action parameters: objects, texts, numbers, layers, etc..."}),onClick:function(){return n({functionType:jw.EventsFunction.Action,name:null})}}),(0,d.jsx)(He.HC,{leftIcon:(0,d.jsx)(mw,{style:yw.icon}),primaryText:(0,d.jsx)(b.Trans,{id:"Condition"}),secondaryText:(0,d.jsx)(b.Trans,{id:"A condition that can be used on objects with the behavior. You can define the condition parameters: objects, texts, numbers, layers, etc..."}),onClick:function(){return n({functionType:jw.EventsFunction.Condition,name:null})}}),(0,d.jsx)(He.HC,{leftIcon:(0,d.jsx)(vw,{style:yw.icon}),primaryText:(0,d.jsx)(b.Trans,{id:"Expression"}),secondaryText:(0,d.jsx)(b.Trans,{id:"An expression that can be used on objects with the behavior. Can either return a number or a string, and take some parameters."}),onClick:function(){return n({functionType:jw.EventsFunction.Expression,name:null})}}),(0,d.jsx)(Gd.Z,{children:(0,d.jsx)(b.Trans,{id:"Lifecycle methods"})}),(0,d.jsx)(Zw,{icon:(0,d.jsx)(fw,{style:yw.icon}),name:"onCreated",disabled:i.hasEventsFunctionNamed("onCreated"),onChoose:n,description:(0,d.jsx)(b.Trans,{id:"Events that will be run once, when an object is created with this behavior being attached to it."})}),(0,d.jsx)(Zw,{icon:(0,d.jsx)(hw,{style:yw.icon}),name:"doStepPreEvents",disabled:i.hasEventsFunctionNamed("doStepPreEvents"),onChoose:n,description:(0,d.jsx)(b.Trans,{id:"Events that will be run at every frame (roughly 60 times per second), for every object that has the behavior attached, before the events from the events sheet are launched."})}),(0,d.jsx)(Zw,{icon:(0,d.jsx)(gw,{style:yw.icon}),name:"onDestroy",disabled:i.hasEventsFunctionNamed("onOwnerRemovedFromScene")||i.hasEventsFunctionNamed("onDestroy"),onChoose:n,description:(0,d.jsx)(b.Trans,{id:"Events that will be run once, after the object is removed from the scene and before it is entirely removed from memory."})}),c&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Gd.Z,{children:(0,d.jsx)(b.Trans,{id:"Other lifecycle methods"})}),(0,d.jsx)(Zw,{icon:(0,d.jsx)(Cw,{style:yw.icon}),name:"onDeActivate",disabled:i.hasEventsFunctionNamed("onDeActivate"),onChoose:n,description:(0,d.jsx)(b.Trans,{id:"Events that will be run once when the behavior is deactivated on an object (step events won't be run until the behavior is activated again)."})}),(0,d.jsx)(Zw,{icon:(0,d.jsx)(bw,{style:yw.icon}),name:"onActivate",disabled:i.hasEventsFunctionNamed("onActivate"),onChoose:n,description:(0,d.jsx)(b.Trans,{id:"Events that will be run once when the behavior is re-activated on an object (after it was previously deactivated)."})}),(0,d.jsx)(Zw,{icon:(0,d.jsx)(hw,{style:yw.icon}),name:"doStepPostEvents",disabled:i.hasEventsFunctionNamed("doStepPostEvents"),onChoose:n,description:(0,d.jsx)(b.Trans,{id:"Events that will be run at every frame (roughly 60 times per second), for every object that has the behavior attached, after the events from the events sheet."})})]})]}),(0,d.jsx)(L.x1,{justifyContent:"center",alignItems:"center",children:c?(0,d.jsx)(J.Z,{leftIcon:(0,d.jsx)(Ji,{}),primary:!1,onClick:function(){return u(!1)},label:(0,d.jsx)(b.Trans,{id:"Hide other lifecycle functions (advanced)"})}):(0,d.jsx)(J.Z,{leftIcon:(0,d.jsx)(Ki.Z,{}),primary:!1,onClick:function(){return u(!0)},label:(0,d.jsx)(b.Trans,{id:"Show other lifecycle functions (advanced)"})})})]})}var ww=function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{viewBox:"0 -4.5 24 24",children:[(0,d.jsx)("polygon",{id:"Shape",transform:"translate(0,2)",points:"7.5 4.5 3 0 3 3 0 3 0 6 3 6 3 9",fill:"#2b3990"}),(0,d.jsx)("polygon",{transform:"translate(0,2)",points:"24 4.5 19.5 0 19.5 3 16.5 3 16.5 6 19.5 6 19.5 9",fill:"#2b3990"}),(0,d.jsx)("path",{d:"m12.5 0-4 8h3v5l4-8h-3z",fill:"#27aae1",fillRule:"evenodd"})]}))},Tw=n.g.gd,Sw={icon:{width:40,height:40},disabledItem:{opacity:.6}},Pw=function(e){var t=e.icon,n=e.disabled,r=e.onChoose,i=e.name,o=e.description;return(0,d.jsx)(He.HC,{leftIcon:t,primaryText:i,secondaryText:o,secondaryTextLines:2,onClick:function(){return r({functionType:Tw.EventsFunction.Action,name:i})},style:n?Sw.disabledItem:void 0,disabled:n})};function Ew(e){var t=e.eventsBasedObject,n=e.onChoose,r=e.onCancel,i=t.getEventsFunctions(),o=l.useState(!1),a=(0,s.Z)(o,2),c=a[0],u=a[1];return(0,d.jsxs)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:'Choose a new object function ("method")'}),secondaryActions:[(0,d.jsx)(Hn.Z,{helpPagePath:"/behaviors/events-based-behaviors"},"help")],actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),keyboardFocused:!0,onClick:r},"close")],open:!0,onRequestClose:r,children:[(0,d.jsxs)(He.aV,{children:[(0,d.jsx)(He.HC,{leftIcon:(0,d.jsx)(xw,{style:Sw.icon}),primaryText:(0,d.jsx)(b.Trans,{id:"Action"}),secondaryText:(0,d.jsx)(b.Trans,{id:"An action that can be used on the object. You can define the action parameters: objects, texts, numbers, layers, etc..."}),onClick:function(){return n({functionType:Tw.EventsFunction.Action,name:null})}}),(0,d.jsx)(He.HC,{leftIcon:(0,d.jsx)(mw,{style:Sw.icon}),primaryText:(0,d.jsx)(b.Trans,{id:"Condition"}),secondaryText:(0,d.jsx)(b.Trans,{id:"A condition that can be used on the object. You can define the condition parameters: objects, texts, numbers, layers, etc..."}),onClick:function(){return n({functionType:Tw.EventsFunction.Condition,name:null})}}),(0,d.jsx)(He.HC,{leftIcon:(0,d.jsx)(vw,{style:Sw.icon}),primaryText:(0,d.jsx)(b.Trans,{id:"Expression"}),secondaryText:(0,d.jsx)(b.Trans,{id:"An expression that can be used on the object. Can either return a number or a string, and take some parameters."}),onClick:function(){return n({functionType:Tw.EventsFunction.Expression,name:null})}}),(0,d.jsx)(Gd.Z,{children:(0,d.jsx)(b.Trans,{id:"Lifecycle methods"})}),(0,d.jsx)(Pw,{icon:(0,d.jsx)(fw,{style:Sw.icon}),name:"onCreated",disabled:i.hasEventsFunctionNamed("onCreated"),onChoose:n,description:(0,d.jsx)(b.Trans,{id:"Events that will be run once, when an object is created."})}),(0,d.jsx)(Pw,{icon:(0,d.jsx)(hw,{style:Sw.icon}),name:"doStepPostEvents",disabled:i.hasEventsFunctionNamed("doStepPostEvents"),onChoose:n,description:(0,d.jsx)(b.Trans,{id:"Events that will be run at every frame (roughly 60 times per second), for every object, after the events from the events sheet."})}),(0,d.jsx)(Pw,{icon:(0,d.jsx)(gw,{style:Sw.icon}),name:"onDestroy",disabled:i.hasEventsFunctionNamed("onOwnerRemovedFromScene")||i.hasEventsFunctionNamed("onDestroy"),onChoose:n,description:(0,d.jsx)(b.Trans,{id:"Events that will be run once, after the object is removed from the scene and before it is entirely removed from memory."})}),c&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Gd.Z,{children:(0,d.jsx)(b.Trans,{id:"Other lifecycle methods"})}),(0,d.jsx)(Pw,{icon:(0,d.jsx)(ww,{style:Sw.icon}),name:"onHotReloading",disabled:i.hasEventsFunctionNamed("onHotReloading"),onChoose:n,description:(0,d.jsx)(b.Trans,{id:"Events that will be run when the preview is being hot-reloaded."})})]})]}),(0,d.jsx)(L.x1,{justifyContent:"center",alignItems:"center",children:c?(0,d.jsx)(J.Z,{leftIcon:(0,d.jsx)(Ji,{}),primary:!1,onClick:function(){return u(!1)},label:(0,d.jsx)(b.Trans,{id:"Hide other lifecycle functions (advanced)"})}):(0,d.jsx)(J.Z,{leftIcon:(0,d.jsx)(Ki.Z,{}),primary:!1,onClick:function(){return u(!0)},label:(0,d.jsx)(b.Trans,{id:"Show other lifecycle functions (advanced)"})})})]})}var Iw=n.g.gd,Mw={icon:{width:40,height:40},disabledItem:{opacity:.6}},Lw=function(e){var t=e.icon,n=e.disabled,r=e.onChoose,i=e.name,o=e.description;return(0,d.jsx)(He.HC,{leftIcon:t,primaryText:i,secondaryText:o,secondaryTextLines:2,onClick:r,style:n?Mw.disabledItem:void 0,disabled:n})};function Aw(e){var t=e.eventsFunctionsExtension,n=e.onChoose,r=e.onCancel,i=l.useState(!1),o=(0,s.Z)(i,2),a=o[0],c=o[1];return(0,d.jsxs)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Choose a new extension function"}),actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),keyboardFocused:!0,onClick:r},"close")],secondaryActions:[(0,d.jsx)(Hn.Z,{helpPagePath:"/events/functions"},"help")],open:!0,onRequestClose:r,children:[(0,d.jsxs)(He.aV,{children:[(0,d.jsx)(Lw,{icon:(0,d.jsx)(xw,{style:Mw.icon}),name:(0,d.jsx)(b.Trans,{id:"Action"}),onChoose:function(){return n({functionType:Iw.EventsFunction.Action,name:null})},description:(0,d.jsx)(b.Trans,{id:"An action that can be used in other events sheet. You can define the action parameters: objects, texts, numbers, layers, etc..."})}),(0,d.jsx)(Lw,{icon:(0,d.jsx)(mw,{style:Mw.icon}),name:(0,d.jsx)(b.Trans,{id:"Condition"}),onChoose:function(){return n({functionType:Iw.EventsFunction.Condition,name:null})},description:(0,d.jsx)(b.Trans,{id:"A condition that can be used in other events sheet. You can define the condition parameters: objects, texts, numbers, layers, etc..."})}),(0,d.jsx)(Lw,{icon:(0,d.jsx)(vw,{style:Mw.icon}),name:(0,d.jsx)(b.Trans,{id:"Expression"}),onChoose:function(){return n({functionType:Iw.EventsFunction.Expression,name:null})},description:(0,d.jsx)(b.Trans,{id:"An expression that can be used in formulas. Can either return a number or a string, and take some parameters."})}),a&&(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(Gd.Z,{children:(0,d.jsx)(b.Trans,{id:"Lifecycle functions (advanced)"})}),(0,d.jsx)(Lw,{icon:(0,d.jsx)(fw,{style:Mw.icon}),name:"onFirstSceneLoaded",disabled:t.hasEventsFunctionNamed("onFirstSceneLoaded"),onChoose:function(){return n({functionType:Iw.EventsFunction.Action,name:"onFirstSceneLoaded"})},description:(0,d.jsx)(b.Trans,{id:"Events that will be run once when the first scene of the game is loaded, before any other events."})}),(0,d.jsx)(Lw,{icon:(0,d.jsx)(fw,{style:Mw.icon}),name:"onSceneLoaded",disabled:t.hasEventsFunctionNamed("onSceneLoaded"),onChoose:function(){return n({functionType:Iw.EventsFunction.Action,name:"onSceneLoaded"})},description:(0,d.jsx)(b.Trans,{id:"Events that will be run once when a scene of the game is loaded, before the scene events."})}),(0,d.jsx)(Lw,{icon:(0,d.jsx)(hw,{style:Mw.icon}),name:"onScenePreEvents",disabled:t.hasEventsFunctionNamed("onScenePreEvents"),onChoose:function(){return n({functionType:Iw.EventsFunction.Action,name:"onScenePreEvents"})},description:(0,d.jsx)(b.Trans,{id:"Events that will be run at every frame (roughly 60 times per second), before the events from the events sheet of the scene."})}),(0,d.jsx)(Lw,{icon:(0,d.jsx)(hw,{style:Mw.icon}),name:"onScenePostEvents",disabled:t.hasEventsFunctionNamed("onScenePostEvents"),onChoose:function(){return n({functionType:Iw.EventsFunction.Action,name:"onScenePostEvents"})},description:(0,d.jsx)(b.Trans,{id:"Events that will be run at every frame (roughly 60 times per second), after the events from the events sheet of the scene."})}),(0,d.jsx)(Lw,{icon:(0,d.jsx)(Cw,{style:Mw.icon}),name:"onScenePaused",disabled:t.hasEventsFunctionNamed("onScenePaused"),onChoose:function(){return n({functionType:Iw.EventsFunction.Action,name:"onScenePaused"})},description:(0,d.jsx)(b.Trans,{id:"Events that will be run once when a scene is paused (another scene is run on top of it)."})}),(0,d.jsx)(Lw,{icon:(0,d.jsx)(bw,{style:Mw.icon}),name:"onSceneResumed",disabled:t.hasEventsFunctionNamed("onSceneResumed"),onChoose:function(){return n({functionType:Iw.EventsFunction.Action,name:"onSceneResumed"})},description:(0,d.jsx)(b.Trans,{id:"Events that will be run once when a scene is resumed (after it was previously paused)."})}),(0,d.jsx)(Lw,{icon:(0,d.jsx)(gw,{style:Mw.icon}),name:"onSceneUnloading",disabled:t.hasEventsFunctionNamed("onSceneUnloading"),onChoose:function(){return n({functionType:Iw.EventsFunction.Action,name:"onSceneUnloading"})},description:(0,d.jsx)(b.Trans,{id:"Events that will be run once when a scene is about to be unloaded from memory. The previous scene that was paused will be resumed after this."})})]})]}),(0,d.jsx)(L.x1,{justifyContent:"center",alignItems:"center",children:a?(0,d.jsx)(J.Z,{leftIcon:(0,d.jsx)(Ji,{}),primary:!1,onClick:function(){return c(!1)},label:(0,d.jsx)(b.Trans,{id:"Hide lifecycle functions (advanced)"})}):(0,d.jsx)(J.Z,{leftIcon:(0,d.jsx)(Ki.Z,{}),primary:!1,onClick:function(){return c(!0)},label:(0,d.jsx)(b.Trans,{id:"Show lifecycle functions (advanced)"})})})]})}var Fw={display:"flex",flexDirection:"column",flex:1},Ow=l.forwardRef((function(e,t){var n=e.initialEditorName,r=e.editors,i=e.transitions,o=e.onEditorChanged,c=l.useState(n),u=(0,s.Z)(c,2),p=u[0],f=u[1],h=(0,bm.T)();l.useImperativeHandle(t,(function(){return{openEditor:function(e){f(e)}}})),l.useEffect((function(){o(p)}),[p,o]);var g=i[p],x="space-between";g&&(g.previousEditor&&!g.nextEditor&&(x="flex-start"),!g.previousEditor&&g.nextEditor&&(x="flex-end"));var m=r[p],v=m?(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},Fw),m.noSoftKeyboardAvoidance?null:(0,bm.E)(h)),children:m.renderEditor()}):null;return(0,d.jsxs)(L.sg,{noMargin:!0,expand:!0,noOverflowParent:!0,children:[g&&(0,d.jsx)(is,{maxWidth:!0,noExpand:!0,noFullHeight:!0,children:(0,d.jsx)(L.sg,{children:(0,d.jsxs)(L.x1,{justifyContent:x,children:[g.previousEditor&&(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Back"}),onClick:function(){g.previousEditor&&f(g.previousEditor)},leftIcon:(0,d.jsx)(Co.Z,{})}),g.nextLabel&&g.nextEditor&&(0,d.jsx)(J.Z,{label:g.nextLabel,onClick:function(){g.nextEditor&&f(g.nextEditor)},leftIcon:g.nextIcon})]})})}),v]})})),Rw=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("path",{d:"M7.77794 0.833374C7.34742 0.833374 6.93657 1.00791 6.63523 1.31528C6.33421 1.62232 6.16683 2.03668 6.16683 2.46671V2.53337H3.66683C3.44258 2.53337 3.22957 2.62433 3.07409 2.78292C2.91894 2.94118 2.8335 3.15375 2.8335 3.37337V5.86671C2.8335 6.14285 3.05735 6.36671 3.3335 6.36671H3.88905C4.0479 6.36671 4.20229 6.43098 4.31769 6.54869C4.43342 6.66674 4.50016 6.82891 4.50016 7.00004C4.50016 7.17117 4.43342 7.33335 4.31769 7.45139C4.20229 7.5691 4.0479 7.63337 3.88905 7.63337H3.3335C3.05735 7.63337 2.8335 7.85723 2.8335 8.13337V10.6267C2.8335 10.8463 2.91894 11.0589 3.07409 11.2172C3.22957 11.3758 3.44258 11.4667 3.66683 11.4667H4.67473C4.95087 11.4667 5.17473 11.2428 5.17473 10.9667C5.17473 10.6906 4.95087 10.4667 4.67473 10.4667H3.8335V8.63337H3.88905C4.31958 8.63337 4.73042 8.45884 5.03176 8.15146C5.33278 7.84443 5.50016 7.43007 5.50016 7.00004C5.50016 6.57001 5.33278 6.15565 5.03176 5.84862C4.73042 5.54125 4.31958 5.36671 3.88905 5.36671H3.8335V3.53337H6.66683C6.94297 3.53337 7.16683 3.30952 7.16683 3.03337V2.46671C7.16683 2.29558 7.23357 2.1334 7.3493 2.01536C7.46471 1.89764 7.61909 1.83337 7.77794 1.83337C7.93679 1.83337 8.09118 1.89764 8.20658 2.01536C8.32231 2.1334 8.38905 2.29558 8.38905 2.46671V3.03337C8.38905 3.30952 8.61291 3.53337 8.88905 3.53337H11.1668V3.66671C11.1668 3.94285 11.3907 4.16671 11.6668 4.16671C11.943 4.16671 12.1668 3.94285 12.1668 3.66671V3.37337C12.1668 3.15375 12.0814 2.94118 11.9262 2.78292C11.7708 2.62433 11.5577 2.53337 11.3335 2.53337H9.38905V2.46671C9.38905 2.03668 9.22167 1.62232 8.92065 1.31528C8.61931 1.00791 8.20846 0.833374 7.77794 0.833374Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.3537 5.1633C13.9138 4.7234 13.2006 4.7234 12.7607 5.16329L6.93968 10.9843C6.87393 11.0501 6.82782 11.1328 6.80653 11.2233L6.18013 13.8855C6.14047 14.0541 6.19084 14.2312 6.31329 14.3536C6.43573 14.476 6.6128 14.5264 6.78136 14.4867L9.44354 13.8604C9.53405 13.8391 9.61683 13.7929 9.68257 13.7272L15.5036 7.90617C15.9435 7.46628 15.9435 6.7531 15.5036 6.31321L14.3537 5.1633ZM13.4678 5.87038C13.5172 5.82104 13.5972 5.82104 13.6465 5.87038L14.7965 7.02032C14.8458 7.06969 14.8458 7.14972 14.7965 7.19909L9.07604 12.9195L7.33854 13.3283L7.74737 11.5908L13.4678 5.87038Z",fill:"currentColor"})]}))})),Dw=n.g.gd,_w=(0,d.jsx)(Rw,{}),Bw=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={selectedEventsFunction:null,selectedEventsBasedBehavior:null,editedEventsBasedBehavior:null,selectedEventsBasedObject:null,editedEventsBasedObject:null,editOptionsDialogOpen:!1,behaviorMethodSelectorDialogOpen:!1,objectMethodSelectorDialogOpen:!1,extensionFunctionSelectorDialogOpen:!1,onAddEventsFunctionCb:null},e._globalObjectsContainer=new Dw.ObjectsContainer,e._objectsContainer=new Dw.ObjectsContainer,e._loadEventsFunctionFrom=function(t,n,r,i,o){if(r)Dw.EventsFunctionTools.behaviorEventsFunctionToObjectsContainer(t,r,n,e._globalObjectsContainer,e._objectsContainer);else if(i)Dw.EventsFunctionTools.objectEventsFunctionToObjectsContainer(t,i,n,e._globalObjectsContainer,e._objectsContainer);else{if(!o)throw new Error("No extension, behavior or object was specified when loading a function");Dw.EventsFunctionTools.freeEventsFunctionToObjectsContainer(t,o,n,e._globalObjectsContainer,e._objectsContainer)}},e.updateToolbar=function(){e.editor?e.editor.updateToolbar():e.props.setToolbar((0,d.jsx)(m,{lastChild:!0,children:(0,d.jsx)(M.Z,{size:"small",color:"default",onClick:e._editOptions,tooltip:{id:"Open extension settings"},children:(0,d.jsx)(Rw,{})})}))},e.selectEventsFunctionByName=function(t,n){var r=e.props.eventsFunctionsExtension;if(n){var i=r.getEventsBasedBehaviors();if(i.has(n)){var o=i.get(n),a=o.getEventsFunctions();a.hasEventsFunctionNamed(t)&&e._selectEventsFunction(a.getEventsFunction(t),o)}}else r.hasEventsFunctionNamed(t)&&e._selectEventsFunction(r.getEventsFunction(t),null)},e._selectEventsFunction=function(t,n,r){e.onSelectionChanged(null,null),t?(e.props.onFunctionEdited&&e.props.onFunctionEdited(),e._loadEventsFunctionFrom(e.props.project,t,n,r,e.props.eventsFunctionsExtension),e.setState({selectedEventsFunction:t,selectedEventsBasedBehavior:n,selectedEventsBasedObject:r},(function(){e.updateToolbar(),e._editorMosaic&&e._editorMosaic.uncollapseEditor("parameters",25),e._editorNavigator&&(t&&!t.getEvents().getEventsCount()?e._editorNavigator.openEditor("parameters"):e._editorNavigator.openEditor("events-sheet"))}))):e.setState({selectedEventsFunction:null,selectedEventsBasedBehavior:n,selectedEventsBasedObject:r},(function(){return e.updateToolbar()}))},e._makeRenameEventsFunction=function(t){return function(n,r,i,o,a){n?e._renameBehaviorEventsFunction(t,n,i,o,a):r?e._renameObjectEventsFunction(t,r,i,o,a):e._renameFreeEventsFunction(t,i,o,a)}},e._renameFreeEventsFunction=function(t,n,r,i){var o=e.props,a=o.project,s=o.eventsFunctionsExtension,l=(0,It.Z)(Dw.Project.getSafeName(r),(function(e){return!(!Dw.MetadataDeclarationHelper.isExtensionLifecycleEventsFunction(e)&&!s.hasEventsFunctionNamed(e))}));Dw.WholeProjectRefactorer.renameEventsFunction(a,s,n.getName(),l),n.setName(l),i(!0),e.props.onFunctionEdited&&e.props.onFunctionEdited()},e._renameBehaviorEventsFunction=function(t,n,r,i,o){var a=(0,It.Z)(Dw.Project.getSafeName(i),(function(e){return!(!Dw.MetadataDeclarationHelper.isBehaviorLifecycleEventsFunction(e)&&!n.getEventsFunctions().hasEventsFunctionNamed(e))})),s=e.props,l=s.project,c=s.eventsFunctionsExtension;Dw.WholeProjectRefactorer.renameBehaviorEventsFunction(l,c,n,r.getName(),a),r.setName(a),o(!0),e.props.onFunctionEdited&&e.props.onFunctionEdited()},e._renameObjectEventsFunction=function(t,n,r,i,o){var a=(0,It.Z)(Dw.Project.getSafeName(i),(function(e){return!(!Dw.MetadataDeclarationHelper.isObjectLifecycleEventsFunction(e)&&!n.getEventsFunctions().hasEventsFunctionNamed(e))})),s=e.props,l=s.project,c=s.eventsFunctionsExtension;Dw.WholeProjectRefactorer.renameObjectEventsFunction(l,c,n,r.getName(),a),r.setName(a),o(!0),e.props.onFunctionEdited&&e.props.onFunctionEdited()},e._makeMoveFreeEventsParameter=function(t){return function(t,n,r,i){var o=e.props,a=o.project,s=o.eventsFunctionsExtension;Dw.WholeProjectRefactorer.moveEventsFunctionParameter(a,s,t.getName(),n+bh.mK.FreeFunction,r+bh.mK.FreeFunction),i(!0)}},e._makeMoveBehaviorEventsParameter=function(t){return function(t,n,r,i,o){var a=e.props,s=a.project,l=a.eventsFunctionsExtension;Dw.WholeProjectRefactorer.moveBehaviorEventsFunctionParameter(s,l,t,n.getName(),r,i),o(!0)}},e._makeMoveObjectEventsParameter=function(t){return function(t,n,r,i,o){var a=e.props,s=a.project,l=a.eventsFunctionsExtension;Dw.WholeProjectRefactorer.moveObjectEventsFunctionParameter(s,l,t,n.getName(),r,i),o(!0)}},e._onDeleteEventsFunction=function(t,n){e.state.selectedEventsFunction&&Dw.compare(t,e.state.selectedEventsFunction)&&e._selectEventsFunction(null,null,null),n(!0)},e.selectEventsBasedBehaviorByName=function(t){var n=e.props.eventsFunctionsExtension.getEventsBasedBehaviors();n.has(t)&&e._selectEventsBasedBehavior(n.get(t))},e.onSelectionChanged=function(t,n){e._editBehavior(t),e._editObject(n)},e._selectEventsBasedBehavior=function(t){e.onSelectionChanged(t,null),e.setState({selectedEventsBasedBehavior:t,selectedEventsFunction:null,selectedEventsBasedObject:null},(function(){e.updateToolbar(),t&&(e._editorMosaic&&e._editorMosaic.collapseEditor("parameters"),e._editorNavigator&&e._editorNavigator.openEditor("events-sheet"))}))},e._selectEventsBasedObject=function(t){e.onSelectionChanged(null,t),e.setState({selectedEventsBasedObject:t,selectedEventsFunction:null,selectedEventsBasedBehavior:null},(function(){e.updateToolbar(),t&&(e._editorMosaic&&e._editorMosaic.collapseEditor("parameters"),e._editorNavigator&&e._editorNavigator.openEditor("events-sheet"))}))},e._makeRenameEventsBasedBehavior=function(t){return function(t,n,r){var i=e.props,o=i.project,a=i.eventsFunctionsExtension,s=(0,It.Z)(Dw.Project.getSafeName(n),(function(e){return!!a.getEventsBasedBehaviors().has(e)}));Dw.WholeProjectRefactorer.renameEventsBasedBehavior(o,a,t.getName(),s),t.setName(s),r(!0)}},e._makeRenameEventsBasedObject=function(t){return function(t,n,r){var i=e.props,o=i.project,a=i.eventsFunctionsExtension,s=(0,It.Z)(Dw.Project.getSafeName(n),(function(e){return!!a.getEventsBasedObjects().has(e)}));Dw.WholeProjectRefactorer.renameEventsBasedObject(o,a,t.getName(),s),t.setName(s),r(!0)}},e._onEventsBasedBehaviorPasted=function(t,n){var r=e.props,i=r.project,o=r.eventsFunctionsExtension;o.getName()!==n&&Dw.WholeProjectRefactorer.updateExtensionNameInEventsBasedBehavior(i,o,t,n)},e._onEventsBasedBehaviorRenamed=function(){e.props.onBehaviorEdited&&e.props.onBehaviorEdited(),e.state.selectedEventsFunction&&e._loadEventsFunctionFrom(e.props.project,e.state.selectedEventsFunction,e.state.selectedEventsBasedBehavior,e.state.selectedEventsBasedObject,e.props.eventsFunctionsExtension)},e._onEventsBasedObjectRenamed=function(){e.props.onObjectEdited&&e.props.onObjectEdited(),e.state.selectedEventsFunction&&e._loadEventsFunctionFrom(e.props.project,e.state.selectedEventsFunction,e.state.selectedEventsBasedBehavior,e.state.selectedEventsBasedObject,e.props.eventsFunctionsExtension)},e._onDeleteEventsBasedBehavior=function(t,n){e.state.selectedEventsBasedBehavior&&Dw.compare(t,e.state.selectedEventsBasedBehavior)&&e._selectEventsBasedBehavior(null),n(!0)},e._onDeleteEventsBasedObject=function(t,n){e.state.selectedEventsBasedObject&&Dw.compare(t,e.state.selectedEventsBasedObject)&&e._selectEventsBasedObject(null),n(!0)},e._onCloseExtensionFunctionSelectorDialog=function(t){var n=e.state.onAddEventsFunctionCb;e.setState({extensionFunctionSelectorDialogOpen:!1,onAddEventsFunctionCb:null},(function(){n&&n(t)}))},e._onAddEventsFunction=function(t,n,r){t?e._onAddBehaviorEventsFunction(r):n?e._onAddObjectEventsFunction(r):e._onAddFreeEventsFunction(r)},e._onAddFreeEventsFunction=function(t){e.setState({extensionFunctionSelectorDialogOpen:!0,onAddEventsFunctionCb:t})},e._onAddBehaviorEventsFunction=function(t){e.setState({behaviorMethodSelectorDialogOpen:!0,onAddEventsFunctionCb:t})},e._onAddObjectEventsFunction=function(t){e.setState({objectMethodSelectorDialogOpen:!0,onAddEventsFunctionCb:t})},e._onCloseBehaviorMethodSelectorDialog=function(t){var n=e.state.onAddEventsFunctionCb;e.setState({behaviorMethodSelectorDialogOpen:!1,onAddEventsFunctionCb:null},(function(){n&&n(t)}))},e._onCloseObjectMethodSelectorDialog=function(t){var n=e.state.onAddEventsFunctionCb;e.setState({objectMethodSelectorDialogOpen:!1,onAddEventsFunctionCb:null},(function(){n&&n(t)}))},e._onBehaviorEventsFunctionAdded=function(t,n){Dw.WholeProjectRefactorer.ensureBehaviorEventsFunctionsProperParameters(e.props.eventsFunctionsExtension,t)},e._onObjectEventsFunctionAdded=function(t,n){Dw.WholeProjectRefactorer.ensureObjectEventsFunctionsProperParameters(e.props.eventsFunctionsExtension,t)},e._onBehaviorPropertyRenamed=function(t,n,r){var i=e.props,o=i.project,a=i.eventsFunctionsExtension;Dw.WholeProjectRefactorer.renameEventsBasedBehaviorProperty(o,a,t,n,r)},e._onBehaviorSharedPropertyRenamed=function(t,n,r){var i=e.props,o=i.project,a=i.eventsFunctionsExtension;Dw.WholeProjectRefactorer.renameEventsBasedBehaviorSharedProperty(o,a,t,n,r)},e._onObjectPropertyRenamed=function(t,n,r){var i=e.props,o=i.project,a=i.eventsFunctionsExtension;Dw.WholeProjectRefactorer.renameEventsBasedObjectProperty(o,a,t,n,r)},e._editOptions=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({editOptionsDialogOpen:t})},e._editBehavior=function(t){e.setState((function(n){return n.editedEventsBasedBehavior&&!t&&Dw.WholeProjectRefactorer.ensureBehaviorEventsFunctionsProperParameters(e.props.eventsFunctionsExtension,n.editedEventsBasedBehavior),{editedEventsBasedBehavior:t}}),(0,o.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=6;break}if(!e.props.onBehaviorEdited){n.next=5;break}return n.next=4,e.props.onBehaviorEdited();case 4:Dw.WholeProjectRefactorer.fixInvalidRequiredBehaviorProperties(e.props.project);case 5:e.state.selectedEventsFunction&&e._loadEventsFunctionFrom(e.props.project,e.state.selectedEventsFunction,e.state.selectedEventsBasedBehavior,e.state.selectedEventsBasedObject,e.props.eventsFunctionsExtension);case 6:case"end":return n.stop()}}),n)}))))},e._editObject=function(t){e.setState((function(n){return n.editedEventsBasedObject&&!t&&Dw.WholeProjectRefactorer.ensureObjectEventsFunctionsProperParameters(e.props.eventsFunctionsExtension,n.editedEventsBasedObject),{editedEventsBasedObject:t}}),(0,o.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=5;break}if(!e.props.onObjectEdited){n.next=4;break}return n.next=4,e.props.onObjectEdited();case 4:e.state.selectedEventsFunction&&e._loadEventsFunctionFrom(e.props.project,e.state.selectedEventsFunction,e.state.selectedEventsBasedBehavior,e.state.selectedEventsBasedObject,e.props.eventsFunctionsExtension);case 5:case"end":return n.stop()}}),n)}))))},e._onEditorNavigatorEditorChanged=function(t){e.updateToolbar(),"behaviors-list"===t?e._selectEventsBasedBehavior(null):"free-functions-list"!==t&&"behavior-functions-list"!==t||e._selectEventsFunction(null,e.state.selectedEventsBasedBehavior)},e._getFunctionGroupNames=function(){var t=new Set,n=e.state,r=n.selectedEventsBasedBehavior,i=n.selectedEventsBasedObject;if(r)for(var o=r.getEventsFunctions(),a=0;a<o.getEventsFunctionsCount();a++){var s=o.getEventsFunctionAt(a).getGroup();s&&t.add(s)}else if(i)for(var l=i.getEventsFunctions(),c=0;c<l.getEventsFunctionsCount();c++){var u=l.getEventsFunctionAt(c).getGroup();u&&t.add(u)}else for(var d=e.props.eventsFunctionsExtension,p=0;p<d.getEventsFunctionsCount();p++){var f=d.getEventsFunctionAt(p).getGroup();f&&t.add(f)}return(0,v.Z)(t).sort((function(e,t){return e.localeCompare(t)}))},e._onConfigurationUpdated=function(t){"type"!==t&&"isPrivate"!==t&&"isAsync"!==t||e.forceUpdate()},e.onBeginCreateEventsFunction=function(){(0,Ar.cc)({step:"begin",parentEditor:"extension-events-editor"})},e.onCreateEventsFunction=function(t,n){e.props.onCreateEventsFunction(t,n,"extension-events-editor")},e}return(0,at.Z)(n,[{key:"componentDidMount",value:function(){this.props.initiallyFocusedFunctionName?this.selectEventsFunctionByName(this.props.initiallyFocusedFunctionName,this.props.initiallyFocusedBehaviorName):this.props.initiallyFocusedBehaviorName&&this.selectEventsBasedBehaviorByName(this.props.initiallyFocusedBehaviorName)}},{key:"componentWillUnmount",value:function(){this._globalObjectsContainer&&this._globalObjectsContainer.delete(),this._objectsContainer&&this._objectsContainer.delete()}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.eventsFunctionsExtension,i=this.state,o=i.selectedEventsFunction,a=i.selectedEventsBasedBehavior,s=i.selectedEventsBasedObject,c=i.editOptionsDialogOpen,u=i.behaviorMethodSelectorDialogOpen,p=i.objectMethodSelectorDialogOpen,f=i.extensionFunctionSelectorDialogOpen,h=a||s,g={parameters:{type:"primary",title:{id:"Function Configuration"},toolbarControls:[],renderEditor:function(){return(0,d.jsx)(b.I18n,{children:function(t){var i=t.i18n;return(0,d.jsx)(is,{maxWidth:!0,children:o&&e._globalObjectsContainer&&e._objectsContainer?(0,d.jsx)(Ib,{project:n,eventsFunction:o,eventsBasedBehavior:a,eventsBasedObject:s,eventsFunctionsContainer:h&&h.getEventsFunctions()||r,globalObjectsContainer:e._globalObjectsContainer,objectsContainer:e._objectsContainer,onConfigurationUpdated:e._onConfigurationUpdated,helpPagePath:s?"/behaviors/events-based-objects":a?"/behaviors/events-based-behaviors":"/events/functions",onParametersOrGroupsUpdated:function(){e._loadEventsFunctionFrom(n,o,a,s,e.props.eventsFunctionsExtension),e.forceUpdate()},onMoveFreeEventsParameter:e._makeMoveFreeEventsParameter(i),onMoveBehaviorEventsParameter:e._makeMoveBehaviorEventsParameter(i),onMoveObjectEventsParameter:e._makeMoveObjectEventsParameter(i),unsavedChanges:e.props.unsavedChanges,getFunctionGroupNames:e._getFunctionGroupNames}):(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"Choose a function, or a function of a behavior, to set the parameters that it accepts."})})})}})}},"events-sheet":{type:"primary",noTitleBar:!!o||!a&&!s,noSoftKeyboardAvoidance:!0,title:a?{id:"Behavior Configuration"}:s?{id:"Object Configuration"}:null,toolbarControls:[],renderEditor:function(){return o&&e._globalObjectsContainer&&e._objectsContainer?(0,d.jsx)(is,{children:(0,d.jsx)(gv,{ref:function(t){return e.editor=t},project:n,scope:{project:n,layout:null,externalEvents:null,eventsFunctionsExtension:r,eventsBasedBehavior:a,eventsBasedObject:s,eventsFunction:o},globalObjectsContainer:e._globalObjectsContainer,objectsContainer:e._objectsContainer,events:o.getEvents(),onOpenExternalEvents:function(){},onOpenLayout:function(){},resourceManagementProps:e.props.resourceManagementProps,openInstructionOrExpression:e.props.openInstructionOrExpression,setToolbar:e.props.setToolbar,onBeginCreateEventsFunction:e.onBeginCreateEventsFunction,onCreateEventsFunction:e.onCreateEventsFunction,onOpenSettings:e._editOptions,settingsIcon:_w,unsavedChanges:e.props.unsavedChanges,isActive:!0},o.ptr)}):a?(0,d.jsx)(VC,{project:n,eventsFunctionsExtension:r,eventsBasedBehavior:a,unsavedChanges:e.props.unsavedChanges,onRenameProperty:function(t,n){return e._onBehaviorPropertyRenamed(a,t,n)},onRenameSharedProperty:function(t,n){return e._onBehaviorSharedPropertyRenamed(a,t,n)},onEventsFunctionsAdded:function(){e.eventsFunctionList&&e.eventsFunctionList.forceUpdateList()},onConfigurationUpdated:e._onConfigurationUpdated}):s&&e._globalObjectsContainer?(0,d.jsx)(pw,{project:n,globalObjectsContainer:e._globalObjectsContainer,eventsFunctionsExtension:r,eventsBasedObject:s,unsavedChanges:e.props.unsavedChanges,onRenameProperty:function(t,n){return e._onObjectPropertyRenamed(s,t,n)},onEventsFunctionsAdded:function(){e.eventsFunctionList&&e.eventsFunctionList.forceUpdateList()}}):(0,d.jsx)(is,{children:(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"Choose a function, or a function of a behavior, to edit its events."})})})}},"functions-list":{type:"primary",title:{id:"Functions"},toolbarControls:[],renderEditor:function(){return(0,d.jsx)(b.I18n,{children:function(t){var i=t.i18n;return(0,d.jsx)(gC,{ref:function(t){return e.eventsFunctionList=t},project:n,eventsFunctionsExtension:r,unsavedChanges:e.props.unsavedChanges,forceUpdateEditor:function(){return e.forceUpdate()},selectedEventsFunction:o,onSelectEventsFunction:function(t,n,r){return e._selectEventsFunction(t,n,r)},onDeleteEventsFunction:e._onDeleteEventsFunction,onRenameEventsFunction:e._makeRenameEventsFunction(i),onAddEventsFunction:e._onAddEventsFunction,onEventsFunctionAdded:function(){},selectedEventsBasedBehavior:a,onSelectEventsBasedBehavior:e._selectEventsBasedBehavior,onDeleteEventsBasedBehavior:e._onDeleteEventsBasedBehavior,onRenameEventsBasedBehavior:e._makeRenameEventsBasedBehavior(i),onEventsBasedBehaviorRenamed:e._onEventsBasedBehaviorRenamed,onEventsBasedBehaviorPasted:e._onEventsBasedBehaviorPasted,selectedEventsBasedObject:s,onSelectEventsBasedObject:e._selectEventsBasedObject,onDeleteEventsBasedObject:e._onDeleteEventsBasedObject,onRenameEventsBasedObject:e._makeRenameEventsBasedObject(i),onEventsBasedObjectRenamed:e._onEventsBasedObjectRenamed})}})}}};return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(w.I,{children:function(t){return t.isMobile?(0,d.jsx)(Ow,{ref:function(t){return e._editorNavigator=t},editors:g,initialEditorName:"functions-list",transitions:{"events-sheet":{nextIcon:(0,d.jsx)(QC,{}),nextLabel:(0,d.jsx)(b.Trans,{id:"Parameters"}),nextEditor:"parameters",previousEditor:function(){return"functions-list"}},parameters:{nextIcon:(0,d.jsx)(kZ.Z,{}),nextLabel:(0,d.jsx)(b.Trans,{id:"Validate these parameters"}),nextEditor:"events-sheet"}},onEditorChanged:e._onEditorNavigatorEditorChanged}):(0,d.jsx)(se.ZP.Consumer,{children:function(t){var n=t.getDefaultEditorMosaicNode,r=t.setDefaultEditorMosaicNode;return(0,d.jsx)(yv.Z,{ref:function(t){return e._editorMosaic=t},editors:g,onPersistNodes:function(e){return r("events-functions-extension-editor",e)},initialNodes:(0,yv.J)(n("events-functions-extension-editor")||{direction:"row",first:"functions-list",second:{direction:"column",first:"parameters",second:"events-sheet",splitPercentage:25},splitPercentage:25},"functions-list")&&n("events-functions-extension-editor")||{direction:"row",first:"functions-list",second:{direction:"column",first:"parameters",second:"events-sheet",splitPercentage:25},splitPercentage:25}})}})}}),c&&(0,d.jsx)(MC,{eventsFunctionsExtension:r,open:!0,onClose:function(){return e._editOptions(!1)}}),p&&s&&(0,d.jsx)(Ew,{eventsBasedObject:s,onCancel:function(){return e._onCloseObjectMethodSelectorDialog(null)},onChoose:function(t){return e._onCloseObjectMethodSelectorDialog(t)}}),u&&a&&(0,d.jsx)(kw,{eventsBasedBehavior:a,onCancel:function(){return e._onCloseBehaviorMethodSelectorDialog(null)},onChoose:function(t){return e._onCloseBehaviorMethodSelectorDialog(t)}}),f&&r&&(0,d.jsx)(Aw,{eventsFunctionsExtension:r,onCancel:function(){return e._onCloseExtensionFunctionSelectorDialog(null)},onChoose:function(t){return e._onCloseExtensionFunctionSelectorDialog(t)}})]})}}]),n}(l.Component),Nw={container:{display:"flex",flex:1,minWidth:0}},Uw=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._reloadExtensionMetadata=function(){try{var t=e.getEventsFunctionsExtension();t&&e.props.onReloadEventsFunctionsExtensionMetadata(t)}catch(n){console.warn("Error while loading events functions extensions - ignoring this in the context of the EventsFunctionsExtensionEditorContainer.",n)}},e.previewOrExportWillStart=function(){e.props.isActive&&e.props.onLoadEventsFunctionsExtensions()},e}return(0,at.Z)(n,[{key:"getProject",value:function(){return this.props.project}},{key:"getLayout",value:function(){return null}},{key:"updateToolbar",value:function(){this.editor&&this.editor.updateToolbar()}},{key:"forceUpdateEditor",value:function(){}},{key:"shouldComponentUpdate",value:function(e){return this.props.isActive||e.isActive}},{key:"componentDidUpdate",value:function(e){e.isActive&&!this.props.isActive&&this.props.onLoadEventsFunctionsExtensions()}},{key:"componentWillUnmount",value:function(){this.props.isActive&&this.props.onLoadEventsFunctionsExtensions()}},{key:"getEventsFunctionsExtension",value:function(){var e=this.props,t=e.project,n=e.projectItemName;return t&&n&&t.hasEventsFunctionsExtensionNamed(n)?t.getEventsFunctionsExtension(n):null}},{key:"getEventsFunctionsExtensionName",value:function(){var e=this.props,t=e.project,n=e.projectItemName;return t&&n?n:null}},{key:"selectEventsFunctionByName",value:function(e,t){this.editor&&this.editor.selectEventsFunctionByName(e,t)}},{key:"selectEventsBasedBehaviorByName",value:function(e){this.editor&&this.editor.selectEventsBasedBehaviorByName(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.projectItemName,i=this.getEventsFunctionsExtension();if(!i||!n)return(0,d.jsxs)("div",{children:["No extension called ",r," found!"]});var o=this.props.extraEditorProps||{},a=o.initiallyFocusedFunctionName,s=o.initiallyFocusedBehaviorName;return(0,d.jsx)("div",{style:Nw.container,children:(0,d.jsx)(Bw,{project:n,eventsFunctionsExtension:i,setToolbar:this.props.setToolbar,resourceManagementProps:this.props.resourceManagementProps,openInstructionOrExpression:this.props.openInstructionOrExpression,onCreateEventsFunction:this.props.onCreateEventsFunction,initiallyFocusedFunctionName:a,initiallyFocusedBehaviorName:s,onBehaviorEdited:this._reloadExtensionMetadata,onObjectEdited:this._reloadExtensionMetadata,onFunctionEdited:this._reloadExtensionMetadata,ref:function(t){return e.editor=t},unsavedChanges:this.props.unsavedChanges},i.ptr)})}}]),n}(l.Component);function Hw(e){var t=e.open,n=e.onChoose,r=e.layoutName,i=e.onClose,o=e.project,a=e.title,c=e.helpTexts,u=r||"",p=l.useState(u),f=(0,s.Z)(p,2),h=f[0],g=f[1],x=l.useCallback((function(){h&&n({layoutName:h})}),[n,h]),m=[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),primary:!1,onClick:i},"cancel"),(0,d.jsx)(te.vF,{label:(0,d.jsx)(b.Trans,{id:"Choose"}),primary:!0,onClick:x,disabled:!h},"choose")],v=(0,Et.mapFor)(0,o.getLayoutsCount(),(function(e){return o.getLayoutAt(e).getName()}));return(0,d.jsx)(te.ZP,{title:a,actions:m,open:t,onRequestClose:i,onApply:x,maxWidth:"sm",children:(0,d.jsxs)(L.sg,{noMargin:!0,children:[c&&c.map((function(e,t){return(0,d.jsx)(L.x1,{children:(0,d.jsx)(Ta.Z,{children:e})},t)})),(0,d.jsx)(L.x1,{children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Choose the associated scene:"})})}),(0,d.jsx)(GZ.Z,{"aria-label":"Associated scene",name:"associated-layout",value:h,onChange:function(e){return g(e.target.value)},children:v.map((function(e){return(0,d.jsx)(YZ.Z,{value:e,control:(0,d.jsx)(_y.Z,{color:"secondary"}),label:e},e)}))})]})})}var Vw=n(36595),zw={container:{display:"flex",flex:1}},Ww=(0,d.jsx)(gm,{}),Gw=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={externalPropertiesDialogOpen:!1},e.onResourceExternallyChanged=function(t){e.editor&&e.editor.onResourceExternallyChanged(t)},e.saveExternalProperties=function(t){var n=e.getExternalEvents();n&&(n.setAssociatedLayout(t.layoutName),e.setState({externalPropertiesDialogOpen:!1},(function(){return e.updateToolbar()})))},e.openExternalPropertiesDialog=function(){e.setState({externalPropertiesDialogOpen:!0})},e.onBeginCreateEventsFunction=function(){(0,Ar.cc)({step:"begin",parentEditor:"external-events-editor"})},e.onCreateEventsFunction=function(t,n){e.props.onCreateEventsFunction(t,n,"external-events-editor")},e}return(0,at.Z)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.isActive||e.isActive}},{key:"componentDidMount",value:function(){this.resourceExternallyChangedCallbackId=av(this.onResourceExternallyChanged.bind(this))}},{key:"componentWillUnmount",value:function(){sv(this.resourceExternallyChangedCallbackId)}},{key:"getProject",value:function(){return this.props.project}},{key:"updateToolbar",value:function(){this.editor&&this.editor.updateToolbar()}},{key:"forceUpdateEditor",value:function(){}},{key:"getExternalEvents",value:function(){var e=this.props,t=e.project,n=e.projectItemName;return t&&n&&t.hasExternalEventsNamed(n)?t.getExternalEvents(n):null}},{key:"getLayout",value:function(){var e=this.props.project;if(!e)return null;var t=this.getAssociatedLayoutName();return t?e.getLayout(t):null}},{key:"getAssociatedLayoutName",value:function(){var e=this.props.project;if(!e)return null;var t=this.getExternalEvents();if(!t)return null;var n=t.getAssociatedLayout();return e.hasLayoutNamed(n)?n:null}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.projectItemName,i=this.getExternalEvents(),o=this.getLayout();return i&&n?(0,d.jsxs)("div",{style:zw.container,children:[o&&(0,d.jsx)(gv,{ref:function(t){return e.editor=t},setToolbar:this.props.setToolbar,onOpenLayout:this.props.onOpenLayout,resourceManagementProps:this.props.resourceManagementProps,openInstructionOrExpression:this.props.openInstructionOrExpression,onCreateEventsFunction:this.onCreateEventsFunction,onBeginCreateEventsFunction:this.onBeginCreateEventsFunction,unsavedChanges:this.props.unsavedChanges,project:n,scope:{project:n,layout:o,externalEvents:i},globalObjectsContainer:n,objectsContainer:o,events:i.getEvents(),onOpenSettings:this.openExternalPropertiesDialog,settingsIcon:Ww,onOpenExternalEvents:this.props.onOpenExternalEvents,isActive:this.props.isActive}),!o&&(0,d.jsxs)(lb.Z,{children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"To edit the external events, choose the scene in which it will be included"})}),(0,d.jsx)(L.x1,{justifyContent:"center",children:(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Choose the scene"}),primary:!0,onClick:this.openExternalPropertiesDialog})}),(0,d.jsx)(L.x1,{justifyContent:"flex-start",noMargin:!0,children:(0,d.jsx)(Vw.Z,{tutorialId:"Intermediate-externals",label:(0,d.jsx)(b.Trans,{id:"Watch tutorial"}),renderIfNotFound:(0,d.jsx)(Hn.Z,{helpPagePath:"/interface/events-editor/external-events"})})})]}),(0,d.jsx)(Hw,{title:(0,d.jsx)(b.Trans,{id:"Configure the external events"}),helpTexts:[(0,d.jsx)(b.Trans,{id:'In order to use these external events, you still need to add a "Link" event in the events sheet of the corresponding scene'})],open:this.state.externalPropertiesDialogOpen,project:n,onChoose:this.saveExternalProperties,layoutName:this.getAssociatedLayoutName(),onClose:function(){return e.setState({externalPropertiesDialogOpen:!1})}})]}):(0,d.jsxs)("div",{children:["No external events called ",r," found!"]})}}]),n}(l.Component),Yw=function(e){return(0,Et.mapFor)(0,e.getLayersCount(),(function(t){return{value:e.getLayerAt(t).getName(),label:e.getLayerAt(t).getName()||"Base layer",labelIsUserDefined:!!e.getLayerAt(t).getName()}}))},qw=n.g.gd,Xw=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(e){var r;return(0,ot.Z)(this,n),(r=t.call(this,e)).state={selectedLayer:""},r}return(0,at.Z)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!this.props.open&&e.open&&this.setState({selectedLayer:""})}},{key:"render",value:function(){var e=this;if(!this.props.layersContainer||!this.props.open)return null;var t=qw.WholeProjectRefactorer.getLayoutAndExternalLayoutLayerInstancesCount(this.props.project,this.props.layersContainer,this.props.layerRemoved),n=[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),keyboardFocused:!0,onClick:function(){return e.props.onClose(!1,null)}},"cancel")];t>0?n=n.concat([(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Remove objects"}),onClick:function(){return e.props.onClose(!0,null)}},"remove"),(0,d.jsx)(te.vF,{label:(0,d.jsx)(b.Trans,{id:"Move objects"}),primary:!0,onClick:function(){return e.props.onClose(!0,e.state.selectedLayer)}},"move")]):n.push((0,d.jsx)(te.vF,{label:(0,d.jsx)(b.Trans,{id:"Continue"}),primary:!0,onClick:function(){return e.props.onClose(!0,null)}},"continue"));var r=Yw(this.props.layersContainer).filter((function(t){return t.value!==e.props.layerRemoved})).map((function(e){var t=e.value,n=e.label,r=e.labelIsUserDefined;return(0,d.jsx)($.Z,{value:t,label:n,shouldNotTranslate:r},t)}));return(0,d.jsxs)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Objects on {0}",values:{0:this.props.layerRemoved}}),actions:n,open:this.props.open,onRequestClose:function(){return e.props.onClose(!1,null)},onApply:t>0?function(){return e.props.onClose(!0,e.state.selectedLayer)}:function(){return e.props.onClose(!0,null)},flexColumnBody:!0,maxWidth:"sm",children:[(0,d.jsx)(F.Z,{children:0===t?(0,d.jsx)(b.Trans,{id:"The layer {0} does not contain any object instances. Continue?",values:{0:this.props.layerRemoved}}):(0,d.jsx)(b.Trans,{id:"There are {instancesCountInLayout} object instances on this layer. Should they be moved to another layer?",values:{instancesCountInLayout:t}})}),t>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Move objects from layer {0} to:",values:{0:this.props.layerRemoved}})}),(0,d.jsx)(K.Z,{value:this.state.selectedLayer,onChange:function(t,n,r){e.setState({selectedLayer:r})},children:r})]})]})}}]),n}(l.Component),Kw=n.g.gd,Jw=function(e){var t=e.initialTab,n=e.layer,r=e.initialInstances,i=e.onClose,o=e.hotReloadPreviewButtonProps,c=(0,Pt.Z)(),u=ut({serializableObject:n,onCancel:i}),p=u.onCancelChanges,f=u.notifyOfChange,h=l.useState(null),g=(0,s.Z)(h,2),x=g[0],m=g[1],v=l.useState(null),j=(0,s.Z)(v,2),y=j[0],Z=j[1],k=l.useState(null),w=(0,s.Z)(k,2),T=w[0],S=w[1],P=l.useState(t),E=(0,s.Z)(P,2),I=E[0],M=E[1],A=l.useMemo((function(){var e=new Kw.HighestZOrderFinder;e.restrictSearchToLayer(n.getName()),r.iterateOverInstances(e);var t=e.getInstancesCount(),i=e.getHighestZOrder();return e.delete(),{instancesCount:t,highestZOrder:i}}),[n,r]),O=A.instancesCount,R=A.highestZOrder,D=l.useCallback((function(e){m(null);var t=parseFloat(e)||0;t<=0||t>180?m((0,d.jsx)(b.Trans,{id:"The field of view cannot be lower than 0\xb0 or greater than 180\xb0."})):t!==n.getCamera3DFieldOfView()&&(n.setCamera3DFieldOfView(t),c(),f())}),[c,n,f]),_=l.useCallback((function(e){S(null);var t=e<=0&&"orthographic"!==n.getCameraType()||e>=n.getCamera3DFarPlaneDistance();return t&&S((0,d.jsx)(b.Trans,{id:"The near plane distance must be strictly greater than 0 and lower than the far plan distance."})),t}),[n]),B=l.useCallback((function(e){var t=parseFloat(e)||0;_(t)||t!==n.getCamera3DNearPlaneDistance()&&(n.setCamera3DNearPlaneDistance(t),c(),f())}),[_,c,n,f]),N=l.useCallback((function(e){Z(null);var t=parseFloat(e)||0;t<=n.getCamera3DNearPlaneDistance()?Z((0,d.jsx)(b.Trans,{id:"The far plane distance must be greater than the near plan distance."})):t!==n.getCamera3DFarPlaneDistance()&&(n.setCamera3DFarPlaneDistance(t),c(),f())}),[c,n,f]);return(0,d.jsxs)(te.ZP,{title:n.getName()?(0,d.jsx)(b.Trans,{id:"{0} properties",values:{0:n.getName()}}):(0,d.jsx)(b.Trans,{id:"Base layer properties"}),open:!0,secondaryActions:[(0,d.jsx)(Hn.Z,{helpPagePath:"/interface/scene-editor/layer-effects"},"help"),(0,d.jsx)(dt,(0,a.Z)({},o),"hot-reload-preview-button")],actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),onClick:p},"Cancel"),(0,d.jsx)(te.vF,{label:(0,d.jsx)(b.Trans,{id:"Apply"}),primary:!0,onClick:i},"Apply")],onRequestClose:p,onApply:i,fullHeight:!0,flexColumnBody:!0,fixedContent:(0,d.jsx)(le.m,{value:I,onChange:M,options:[{value:"properties",label:(0,d.jsx)(b.Trans,{id:"Properties"})},{value:"effects",label:(0,d.jsx)(b.Trans,{id:"Effects"})}]}),children:["properties"===I&&(0,d.jsxs)(C.ak,{noMargin:!0,children:[n.isLightingLayer()?(0,d.jsx)(he.Z,{kind:"info",identifier:"lighting-layer-usage",children:(0,d.jsx)(b.Trans,{id:"The lighting layer renders an ambient light on the scene. All lights should be placed on this layer so that shadows are properly rendered. By default, the layer follows the base layer camera. Uncheck this if you want to manually move the camera using events."})}):null,(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"There are {instancesCount} instances of objects on this layer.",values:{instancesCount:O}})}),!e.project.getUseDeprecatedZeroAsDefaultZOrder()&&(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:'Objects created using events on this layer will be given a "Z order" of {0}, so that they appear in front of all objects of this layer. You can change this using the action to change an object Z order, after using an action to create it.',values:{0:R+1}})}),(0,d.jsx)(Xa.Z,{label:(0,d.jsx)(b.Trans,{id:"Hide the layer"}),checked:!n.getVisibility(),onCheck:function(e,t){n.setVisibility(!t),c(),f()},tooltipOrHelperText:(0,d.jsx)(b.Trans,{id:'This setting changes the visibility of the entire layer. Objects on the layer will not be treated as "hidden" for event conditions or actions.'})}),!n.isLightingLayer()&&(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"3D settings"})}),(0,d.jsxs)(K.Z,{fullWidth:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Rendering type"}),value:n.getRenderingType(),onChange:function(e,t,r){n.setRenderingType(r),c()},children:[(0,d.jsx)($.Z,{value:"",label:{id:"Display both 2D and 3D objects (default)"}}),(0,d.jsx)($.Z,{value:"2d",label:{id:"Force display only 2D objects"}}),(0,d.jsx)($.Z,{value:"3d",label:{id:"Force display only 3D objects"},disabled:n.isLightingLayer()}),(0,d.jsx)($.Z,{value:"2d+3d",label:{id:"Force display both 2D and 3D objects"},disabled:n.isLightingLayer()})]}),"2d"!==n.getRenderingType()&&(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsxs)(K.Z,{fullWidth:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Camera type"}),value:n.getCameraType(),onChange:function(e,t,r){n.setCameraType(r),_(n.getCamera3DNearPlaneDistance()),c()},children:[(0,d.jsx)($.Z,{value:"perspective",label:{id:"Perspective camera"}}),(0,d.jsx)($.Z,{value:"orthographic",label:{id:"Orthographic camera"}})]}),(0,d.jsx)(An.Z,{commitOnBlur:!0,fullWidth:!0,errorText:x,onChange:D,value:n.getCamera3DFieldOfView().toString(10),floatingLabelText:(0,d.jsx)(b.Trans,{id:"Field of view (in degrees)"}),floatingLabelFixed:!0,disabled:"perspective"!==n.getCameraType()})]}),(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsx)(An.Z,{commitOnBlur:!0,fullWidth:!0,errorText:T,onChange:B,value:n.getCamera3DNearPlaneDistance().toString(10),floatingLabelText:(0,d.jsx)(b.Trans,{id:"Near plane distance"}),floatingLabelFixed:!0}),(0,d.jsx)(An.Z,{commitOnBlur:!0,fullWidth:!0,errorText:y,onChange:N,value:n.getCamera3DFarPlaneDistance().toString(10),floatingLabelText:(0,d.jsx)(b.Trans,{id:"Far plane distance"}),floatingLabelFixed:!0})]})]})]}),n.isLightingLayer()?(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Lighting settings"})}),(0,d.jsx)(Xa.Z,{label:(0,d.jsx)(b.Trans,{id:"Automatically follow the base layer."}),checked:n.isFollowingBaseLayerCamera(),onCheck:function(e,t){n.setFollowBaseLayerCamera(t),c(),f()}}),(0,d.jsx)(Jn.Z,{fullWidth:!0,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Ambient light color"}),disableAlpha:!0,color:(0,Qn.KC)({r:n.getAmbientLightColorRed(),g:n.getAmbientLightColorGreen(),b:n.getAmbientLightColorBlue()}),onChange:function(e){var t=n.getAmbientLightColorRed(),r=n.getAmbientLightColorGreen(),i=n.getAmbientLightColorBlue(),o=(0,Qn.A0)(e);!o||o.r===t&&o.g===r&&o.b===i||(n.setAmbientLightColor(o.r,o.g,o.b),c(),f())}})]}):(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(L.LZ,{}),(0,d.jsx)(L.LZ,{})]})]}),"effects"===I&&(0,d.jsx)(iw,{target:"layer",layerRenderingType:n.getRenderingType(),project:e.project,resourceManagementProps:e.resourceManagementProps,effectsContainer:n.getEffects(),onEffectsRenamed:function(t,n){return Kw.WholeProjectRefactorer.renameLayerEffect(e.project,e.layout,e.layer,t,n)},onEffectsUpdated:function(){c(),f()}})]})},Qw=n(37054),$w=n(81303),eT=n(51063),tT=n(34517),nT=n(96826),rT=["BBText::BBText","Lighting::LightObject","PrimitiveDrawing::Drawer","TextEntryObject::TextEntry","TextInput::TextInputObject","TextObject::Text","Video::VideoObject"],iT=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,o,a,s,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.project,r=t.resourceNames,o=t.onAddBlobFile,a=t.onProgress,s={erroredResources:[]},l=n.getResourcesManager(),c=r.map((function(e){var t=l.getResource(e),r=Dl.Z.getResourceFullUrl(n,e,{});return{resource:t,url:r,filename:(0,tT.dh)(r)}})).filter(Boolean),e.next=6,(0,$w.R7)({urlContainers:c,onProgress:function(e,t){a(e,2*t)}});case 6:return e.sent.forEach((function(e){var t=e.item,n=e.error,r=e.blob,i=t.resource;!n&&r?o(i.getName(),r):s.erroredResources.push({resourceName:i.getName(),error:n||new Error("Unknown error during download.")})})),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oT=function(e){var t=e.replace(/([A-Z]+|\d+)/g," $1").replace(/_(\w)/g,(function(e,t){return" "+t.toUpperCase()})).replace(/_/g,"").replace(/\s+/g," ").trim();return t=" "===t.charAt(0)?t.substring(1):t},aT=function e(t,n,r){t.isFolder()?(0,Et.mapFor)(0,t.getChildrenCount(),(function(i){e(t.getChildAt(i),n+t.getFolderName()+"/",r)})):r.push({object:t.getObject(),path:n})},sT=function(e,t,n){var r=e.getRootFolder();(0,Et.mapFor)(0,r.getChildrenCount(),(function(e){aT(r.getChildAt(e),t,n)}))},lT=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,r){var a,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Map,l=[],e.prev=2,e.next=5,Promise.all(n.map(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var o,c,u,d,p,f,h,g,x,m,v,b,C;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.object,c=n.path,u=[],d=(0,Dt.ax)(t,o,oT(o.getName()),u),p=new Map,e.next=6,r({project:t,resourceNames:u,onAddBlobFile:function(e,t){p.set(e,t)}});case 6:f=t.getResourcesManager(),h=(0,ia.Z)(p);try{for(h.s();!(g=h.n()).done;)x=(0,s.Z)(g.value,2),m=x[0],v=x[1],b=f.getResource(m),C="resources/"+b.getFile(),a.set(C,{filePath:C,blob:v})}catch(i){h.e(i)}finally{h.f()}l.push({text:JSON.stringify(d,null,2),filePath:"objects/"+c+o.getName()+".asset.json"});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return e.next=7,(0,nT.f)({textFiles:l,blobFiles:(0,v.Z)(a.values()),basePath:"",onProgress:function(e,t){}});case 7:return c=e.sent,e.abrupt("return",c);case 11:return e.prev=11,e.t0=e.catch(2),(0,Ur.gR)({message:"Unable to export your assets because of an internal error.",rawError:e.t0,errorId:"download-file-save-as-dialog-error"}),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n,r){return e.apply(this,arguments)}}(),cT=function(e){var t=e.project,n=e.layout,r=e.onClose,c=l.useState(null),u=(0,s.Z)(c,2),p=u[0],f=u[1],h=(0,eT.s)({onDoProcess:l.useCallback((function(e,t){return iT((0,a.Z)((0,a.Z)({},e),{},{onProgress:t}))}),[])}),g=h.ensureProcessIsDone,x=h.renderProcessDialog;return l.useEffect((function(){return(0,o.Z)((0,i.Z)().mark((function e(){var r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(null),sT(n,"",r=[]),r.filter((function(e){var t=e.object;return!rT.includes(t.getType())})),e.next=6,lT(t,r,g);case 6:o=e.sent,f(o);case 8:case"end":return e.stop()}}),e)})))(),function(){f(null)}}),[t,g,n]),(0,d.jsxs)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Export {0} assets",values:{0:n.getName()}}),secondaryActions:[(0,d.jsx)(Hn.Z,{label:(0,d.jsx)(b.Trans,{id:"Submit a free pack"}),helpPagePath:"/community/contribute-to-the-assets-store"},"free-pack-help"),(0,d.jsx)(Hn.Z,{label:(0,d.jsx)(b.Trans,{id:"Submit a paid pack"}),helpPagePath:"/community/sell-asset-pack-store/"},"paid-pack-help")],actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Close"}),keyboardFocused:!0,onClick:r},"close")],open:!0,onRequestClose:r,maxWidth:"sm",children:[(0,d.jsxs)(C.ak,{expand:!0,children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Export the scene objects to a file and learn more about the submission process in the documentation."})}),(0,d.jsx)(L.sg,{alignItems:"center",children:p?(0,d.jsx)(Qw.j,{blob:p,children:function(e){return(0,d.jsx)(T.Z,{icon:(0,d.jsx)(SC,{}),primary:!0,onClick:function(){return(0,Qw.z)(e,n.getName()+".gdo")},label:(0,d.jsx)(b.Trans,{id:"Export as a pack"})})}}):(0,d.jsx)(Xe.Z,{})})]}),x()]})},uT=n.g.gd,dT=function(){function e(){(0,ot.Z)(this,e),this.selection=[]}return(0,at.Z)(e,[{key:"hasSelectedInstances",value:function(){return!!this.getSelectedInstances().length}},{key:"getSelectedInstances",value:function(){return this.selection}},{key:"isInstanceSelected",value:function(e){for(var t=0;t<this.selection.length;t++)if(uT.compare(this.selection[t],e))return!0;return!1}},{key:"clearSelection",value:function(){this.selection.length=0}},{key:"selectInstance",value:function(e){var t=e.instance,n=e.multiSelect,r=e.layersLocks,i=void 0===r?null:r,o=e.ignoreSeal;(void 0===o||!o)&&t.isSealed()||(this.isInstanceSelected(t)?n&&this.unselectInstance(t):(n||this.clearSelection(),i&&i[t.getLayer()]||this.selection.push(t)))}},{key:"selectInstances",value:function(e){var t=this,n=e.instances,r=e.multiSelect,i=e.layersLocks,o=void 0===i?null:i,a=e.ignoreSeal,s=void 0!==a&&a;r||this.clearSelection(),n.forEach((function(e){t.selectInstance({instance:e,multiSelect:!0,layersLocks:o,ignoreSeal:s})}))}},{key:"unselectInstance",value:function(e){if(this.isInstanceSelected(e)){for(var t=this.selection.length-1;t>=-1&&this.selection[t].ptr!==e.ptr;)--t;this.selection.splice(t,1)}}},{key:"unselectInstancesOfObject",value:function(e){for(var t=0;t<this.selection.length;)this.selection[t].getObjectName()===e?this.selection.splice(t,1):t++}},{key:"unselectInstancesOnLayer",value:function(e){for(var t=0;t<this.selection.length;)this.selection[t].getLayer()===e?this.selection.splice(t,1):t++}},{key:"cleanNonExistingInstances",value:function(e){var t=new Set,n=new uT.InitialInstanceJSFunctor;n.invoke=function(e){t.add(e)},e.iterateOverInstances(n),n.delete();for(var r=0;r<this.selection.length;){var i=this.selection[r];t.has(i.ptr)?r++:this.selection.splice(r,1)}}}]),e}(),pT=function(e){return 700/e},fT=function(e,t){return{grid:e.grid||!1,gridType:e.gridType||"rectangular",gridWidth:e.gridWidth||32,gridHeight:e.gridHeight||32,gridOffsetX:e.gridOffsetX||0,gridOffsetY:e.gridOffsetY||0,gridColor:void 0!==e.gridColor?e.gridColor:(0,Qn.Y9)(158,180,255),gridAlpha:void 0!==e.gridAlpha?e.gridAlpha:.8,snap:e.snap||!1,zoomFactor:Math.max(e.zoomFactor||pT(t),.01),windowMask:e.windowMask||!1}};function hT(e){var t=l.useState((function(){return t=e.instancesEditorSettings,(0,a.Z)({},t);var t})),n=(0,s.Z)(t,1)[0],r=function(){e.onChangeInstancesEditorSettings((0,a.Z)((0,a.Z)({},e.instancesEditorSettings),{},{gridWidth:n.gridWidth,gridHeight:n.gridHeight,gridOffsetX:n.gridOffsetX,gridOffsetY:n.gridOffsetY,gridColor:n.gridColor,gridType:n.gridType})),e.onCancel()};return(0,d.jsx)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Edit Grid Options"}),actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),primary:!1,onClick:r},"cancel"),(0,d.jsx)(te.vF,{label:(0,d.jsx)(b.Trans,{id:"Apply"}),primary:!0,onClick:e.onApply},"apply")],onRequestClose:r,onApply:e.onApply,open:!0,maxWidth:"sm",exceptionallyStillAllowRenderingInstancesEditors:!0,children:(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(C.ep,{noMargin:!0,expand:!0,children:(0,d.jsx)(Jn.Z,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Line color"}),fullWidth:!0,color:(0,Qn.m0)(e.instancesEditorSettings.gridColor),alpha:e.instancesEditorSettings.gridAlpha,onChange:function(t,n){e.onChangeInstancesEditorSettings((0,a.Z)((0,a.Z)({},e.instancesEditorSettings),{},{gridColor:(0,Qn.UQ)(t),gridAlpha:void 0===n||null===n?1:n}))}})}),(0,d.jsxs)(C.ep,{noMargin:!0,expand:!0,children:[(0,d.jsx)($r.ZP,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Cell width (in pixels)"}),fullWidth:!0,type:"number",value:e.instancesEditorSettings.gridWidth,onChange:function(t,n){return e.onChangeInstancesEditorSettings((0,a.Z)((0,a.Z)({},e.instancesEditorSettings),{},{gridWidth:Math.max(parseFloat(n),.01)}))}}),(0,d.jsx)($r.ZP,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Cell height (in pixels)"}),fullWidth:!0,type:"number",value:e.instancesEditorSettings.gridHeight,onChange:function(t,n){return e.onChangeInstancesEditorSettings((0,a.Z)((0,a.Z)({},e.instancesEditorSettings),{},{gridHeight:Math.max(parseFloat(n),.01)}))}})]}),(0,d.jsxs)(C.ep,{noMargin:!0,expand:!0,children:[(0,d.jsx)($r.ZP,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"X offset (in pixels)"}),fullWidth:!0,type:"number",value:e.instancesEditorSettings.gridOffsetX,onChange:function(t,n){return e.onChangeInstancesEditorSettings((0,a.Z)((0,a.Z)({},e.instancesEditorSettings),{},{gridOffsetX:parseFloat(n)}))}}),(0,d.jsx)($r.ZP,{floatingLabelText:(0,d.jsx)(b.Trans,{id:"Y offset (in pixels)"}),fullWidth:!0,type:"number",value:e.instancesEditorSettings.gridOffsetY,onChange:function(t,n){return e.onChangeInstancesEditorSettings((0,a.Z)((0,a.Z)({},e.instancesEditorSettings),{},{gridOffsetY:parseFloat(n)}))}})]}),(0,d.jsx)(C.ep,{noMargin:!0,expand:!0,children:(0,d.jsx)(Wn.Z,{checked:"isometric"===e.instancesEditorSettings.gridType,label:(0,d.jsx)(b.Trans,{id:"Isometric"}),onCheck:function(t,n){return e.onChangeInstancesEditorSettings((0,a.Z)((0,a.Z)({},e.instancesEditorSettings),{},{gridType:n?"isometric":"rectangular"}))}})})]})})}var gT=function(e){return(0,xi.YZ)("OPEN_OBJECTS_PANEL",!0,{handler:e.toggleObjectsList}),(0,xi.YZ)("OPEN_OBJECT_GROUPS_PANEL",!0,{handler:e.toggleObjectGroupsList}),(0,xi.YZ)("OPEN_PROPERTIES_PANEL",!0,{handler:e.togglePropertiesPanel}),(0,xi.YZ)("TOGGLE_INSTANCES_PANEL",!0,{handler:e.toggleInstancesList}),(0,xi.YZ)("TOGGLE_LAYERS_PANEL",!0,{handler:e.toggleLayersList}),(0,xi.YZ)("SCENE_EDITOR_UNDO",e.canUndo,{handler:e.undo}),(0,xi.YZ)("SCENE_EDITOR_REDO",e.canRedo,{handler:e.redo}),(0,xi.YZ)("DELETE_INSTANCES",e.canDeleteSelection,{handler:e.deleteSelection}),(0,xi.YZ)("TOGGLE_WINDOW_MASK",!0,{handler:e.toggleWindowMask}),(0,xi.YZ)("TOGGLE_GRID",!0,{handler:e.toggleGrid}),(0,xi.YZ)("OPEN_SETUP_GRID",!0,{handler:e.setupGrid}),(0,xi.YZ)("RENAME_SCENE_OBJECT",e.canRenameObject,{handler:e.onRenameObject}),null},xT=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.818 1.86582C12.0132 1.77833 12.2364 1.77833 12.4316 1.86582L17.5566 4.16323C17.8263 4.28412 17.9998 4.55209 17.9998 4.84762C17.9998 5.14314 17.8263 5.41111 17.5566 5.532L12.4316 7.82941C12.2364 7.9169 12.0132 7.9169 11.818 7.82941L6.69303 5.532C6.42336 5.41111 6.24982 5.14314 6.24982 4.84762C6.24982 4.55209 6.42336 4.28412 6.69303 4.16323L11.818 1.86582ZM8.83331 4.84762L12.1248 6.32312L15.4163 4.84762L12.1248 3.37211L8.83331 4.84762Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.31544 10.196C6.48487 9.81802 6.92864 9.64897 7.30661 9.81841L12.1248 11.9783L16.943 9.81841C17.321 9.64897 17.7648 9.81802 17.9342 10.196C18.1036 10.574 17.9346 11.0177 17.5566 11.1872L12.4316 13.4846C12.2364 13.5721 12.0132 13.5721 11.818 13.4846L6.69303 11.1872C6.31505 11.0177 6.146 10.574 6.31544 10.196Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.2498 4.09762C17.664 4.09762 17.9998 4.4334 17.9998 4.84762L17.9998 10.5028C17.9998 10.917 17.664 11.2528 17.2498 11.2528C16.8356 11.2528 16.4998 10.917 16.4998 10.5028V4.84762C16.4998 4.4334 16.8356 4.09762 17.2498 4.09762Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.99982 4.09762C7.41403 4.09762 7.74982 4.4334 7.74982 4.84762V10.5028C7.74982 10.917 7.41403 11.2528 6.99982 11.2528C6.58561 11.2528 6.24982 10.917 6.24982 10.5028V4.84762C6.24982 4.4334 6.58561 4.09762 6.99982 4.09762Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1248 6.57175C12.539 6.57175 12.8748 6.90754 12.8748 7.32175V12.6235C12.8748 13.0377 12.539 13.3735 12.1248 13.3735C11.7106 13.3735 11.3748 13.0377 11.3748 12.6235V7.32175C11.3748 6.90754 11.7106 6.57175 12.1248 6.57175Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.818 9.86582C17.0132 9.77833 17.2364 9.77833 17.4316 9.86582L22.5566 12.1632C22.8263 12.2841 22.9998 12.5521 22.9998 12.8476C22.9998 13.1431 22.8263 13.4111 22.5566 13.532L17.4316 15.8294C17.2364 15.9169 17.0132 15.9169 16.818 15.8294L11.693 13.532C11.4234 13.4111 11.2498 13.1431 11.2498 12.8476C11.2498 12.5521 11.4234 12.2841 11.693 12.1632L16.818 9.86582ZM13.8333 12.8476L17.1248 14.3231L20.4163 12.8476L17.1248 11.3721L13.8333 12.8476Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3154 18.196C11.4849 17.818 11.9286 17.649 12.3066 17.8184L17.1248 19.9783L21.943 17.8184C22.321 17.649 22.7648 17.818 22.9342 18.196C23.1036 18.574 22.9346 19.0177 22.5566 19.1872L17.4316 21.4846C17.2364 21.5721 17.0132 21.5721 16.818 21.4846L11.693 19.1872C11.3151 19.0177 11.146 18.574 11.3154 18.196Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.2498 12.0976C22.664 12.0976 22.9998 12.4334 22.9998 12.8476L22.9998 18.5028C22.9998 18.917 22.664 19.2528 22.2498 19.2528C21.8356 19.2528 21.4998 18.917 21.4998 18.5028V12.8476C21.4998 12.4334 21.8356 12.0976 22.2498 12.0976Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.9998 12.0976C12.414 12.0976 12.7498 12.4334 12.7498 12.8476V18.5028C12.7498 18.917 12.414 19.2528 11.9998 19.2528C11.5856 19.2528 11.2498 18.917 11.2498 18.5028V12.8476C11.2498 12.4334 11.5856 12.0976 11.9998 12.0976Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.1248 14.5718C17.539 14.5718 17.8748 14.9075 17.8748 15.3218V20.6235C17.8748 21.0377 17.539 21.3735 17.1248 21.3735C16.7106 21.3735 16.3748 21.0377 16.3748 20.6235V15.3218C16.3748 14.9075 16.7106 14.5718 17.1248 14.5718Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.81803 9.86582C7.0132 9.77833 7.23644 9.77833 7.43161 9.86582L12.5566 12.1632C12.8263 12.2841 12.9998 12.5521 12.9998 12.8476C12.9998 13.1431 12.8263 13.4111 12.5566 13.532L7.43161 15.8294C7.23644 15.9169 7.0132 15.9169 6.81803 15.8294L1.69303 13.532C1.42336 13.4111 1.24982 13.1431 1.24982 12.8476C1.24982 12.5521 1.42336 12.2841 1.69303 12.1632L6.81803 9.86582ZM3.83331 12.8476L7.12482 14.3231L10.4163 12.8476L7.12482 11.3721L3.83331 12.8476Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.31544 18.196C1.48487 17.818 1.92864 17.649 2.30661 17.8184L7.12482 19.9783L11.943 17.8184C12.321 17.649 12.7648 17.818 12.9342 18.196C13.1036 18.574 12.9346 19.0177 12.5566 19.1872L7.43161 21.4846C7.23644 21.5721 7.0132 21.5721 6.81803 21.4846L1.69303 19.1872C1.31505 19.0177 1.146 18.574 1.31544 18.196Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.2498 12.0976C12.664 12.0976 12.9998 12.4334 12.9998 12.8476V18.5028C12.9998 18.917 12.664 19.2528 12.2498 19.2528C11.8356 19.2528 11.4998 18.917 11.4998 18.5028V12.8476C11.4998 12.4334 11.8356 12.0976 12.2498 12.0976Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.99982 12.0976C2.41403 12.0976 2.74982 12.4334 2.74982 12.8476V18.5028C2.74982 18.917 2.41403 19.2528 1.99982 19.2528C1.58561 19.2528 1.24982 18.917 1.24982 18.5028V12.8476C1.24982 12.4334 1.58561 12.0976 1.99982 12.0976Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.12482 14.5718C7.53903 14.5718 7.87482 14.9075 7.87482 15.3218V20.6235C7.87482 21.0377 7.53903 21.3735 7.12482 21.3735C6.71061 21.3735 6.37482 21.0377 6.37482 20.6235V15.3218C6.37482 14.9075 6.71061 14.5718 7.12482 14.5718Z",fill:"currentColor"})]}))})),mT=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.96967 8.46967C5.26256 8.17678 5.73744 8.17678 6.03033 8.46967L8.53033 10.9697C8.82322 11.2626 8.82322 11.7374 8.53033 12.0303L6.03033 14.5303C5.73744 14.8232 5.26256 14.8232 4.96967 14.5303L2.46967 12.0303C2.17678 11.7374 2.17678 11.2626 2.46967 10.9697L4.96967 8.46967ZM4.06066 11.5L5.5 12.9393L6.93934 11.5L5.5 10.0607L4.06066 11.5Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.75 7C21.75 7.41421 21.4142 7.75 21 7.75H12C11.5858 7.75 11.25 7.41421 11.25 7C11.25 6.58579 11.5858 6.25 12 6.25H21C21.4142 6.25 21.75 6.58579 21.75 7Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.75 17C21.75 17.4142 21.4142 17.75 21 17.75H12C11.5858 17.75 11.25 17.4142 11.25 17C11.25 16.5858 11.5858 16.25 12 16.25H21C21.4142 16.25 21.75 16.5858 21.75 17Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.75 12C21.75 12.4142 21.4142 12.75 21 12.75H12C11.5858 12.75 11.25 12.4142 11.25 12C11.25 11.5858 11.5858 11.25 12 11.25H21C21.4142 11.25 21.75 11.5858 21.75 12Z",fill:"currentColor"})]}))})),vT=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.6646 3.32918C11.8758 3.22361 12.1243 3.22361 12.3355 3.32918L20.3355 7.32918C20.5895 7.45622 20.75 7.71592 20.75 8C20.75 8.28408 20.5895 8.54378 20.3355 8.67082L12.3355 12.6708C12.1243 12.7764 11.8758 12.7764 11.6646 12.6708L3.66463 8.67082C3.41054 8.54378 3.25004 8.28408 3.25004 8C3.25004 7.71592 3.41054 7.45622 3.66463 7.32918L11.6646 3.32918ZM5.67709 8L12 11.1615L18.323 8L12 4.83853L5.67709 8Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.32922 15.6646C3.51446 15.2941 3.96497 15.1439 4.33545 15.3292L12 19.1615L19.6646 15.3292C20.0351 15.1439 20.4856 15.2941 20.6709 15.6646C20.8561 16.0351 20.7059 16.4856 20.3355 16.6708L12.3355 20.6708C12.1243 20.7764 11.8758 20.7764 11.6646 20.6708L3.66463 16.6708C3.29415 16.4856 3.14398 16.0351 3.32922 15.6646Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.32922 11.6646C3.51446 11.2941 3.96497 11.1439 4.33545 11.3292L12 15.1615L19.6646 11.3292C20.0351 11.1439 20.4856 11.2941 20.6709 11.6646C20.8561 12.0351 20.7059 12.4856 20.3355 12.6708L12.3355 16.6708C12.1243 16.7764 11.8758 16.7764 11.6646 16.6708L3.66463 12.6708C3.29415 12.4856 3.14398 12.0351 3.32922 11.6646Z",fill:"currentColor"})]}))})),bT=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 3.25C8.41421 3.25 8.75 3.58579 8.75 4V20C8.75 20.4142 8.41421 20.75 8 20.75C7.58579 20.75 7.25 20.4142 7.25 20V4C7.25 3.58579 7.58579 3.25 8 3.25Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 3.25C16.4142 3.25 16.75 3.58579 16.75 4V20C16.75 20.4142 16.4142 20.75 16 20.75C15.5858 20.75 15.25 20.4142 15.25 20V4C15.25 3.58579 15.5858 3.25 16 3.25Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.75 8C20.75 8.41421 20.4142 8.75 20 8.75L4 8.75C3.58579 8.75 3.25 8.41421 3.25 8C3.25 7.58579 3.58579 7.25 4 7.25L20 7.25C20.4142 7.25 20.75 7.58579 20.75 8Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.75 16C20.75 16.4142 20.4142 16.75 20 16.75L4 16.75C3.58579 16.75 3.25 16.4142 3.25 16C3.25 15.5858 3.58579 15.25 4 15.25L20 15.25C20.4142 15.25 20.75 15.5858 20.75 16Z",fill:"currentColor"})]}))})),CT=n(87199),jT=l.memo((function(e){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(gT,{toggleObjectsList:e.toggleObjectsList,toggleObjectGroupsList:e.toggleObjectGroupsList,togglePropertiesPanel:e.toggleProperties,toggleInstancesList:e.toggleInstancesList,toggleLayersList:e.toggleLayersList,undo:e.undo,canUndo:e.canUndo,redo:e.redo,canRedo:e.canRedo,deleteSelection:e.deleteSelection,toggleWindowMask:e.toggleWindowMask,toggleGrid:e.toggleGrid,setupGrid:e.openSetupGrid,canDeleteSelection:0!==e.selectedInstancesCount,canRenameObject:e.canRenameObject,onRenameObject:e.onRenameObject}),(0,d.jsxs)(m,{lastChild:!0,children:[(0,d.jsx)(M.Z,{size:"small",color:"default",id:"toolbar-open-objects-panel-button",onClick:e.toggleObjectsList,selected:e.isObjectsListShown,tooltip:e.isObjectsListShown?{id:"Close Objects Panel"}:{id:"Open Objects Panel"},children:(0,d.jsx)(vf,{})}),(0,d.jsx)(M.Z,{size:"small",color:"default",id:"toolbar-open-object-groups-panel-button",onClick:e.toggleObjectGroupsList,selected:e.isObjectGroupsListShown,tooltip:e.isObjectGroupsListShown?{id:"Close Object Groups Panel"}:{id:"Open Object Groups Panel"},children:(0,d.jsx)(xT,{})}),(0,d.jsx)(M.Z,{size:"small",color:"default",id:"toolbar-open-properties-panel-button",onClick:e.toggleProperties,selected:e.isPropertiesShown,tooltip:e.isPropertiesShown?{id:"Close Properties Panel"}:{id:"Open Properties Panel"},children:(0,d.jsx)(bt.Z,{})}),(0,d.jsx)(M.Z,{size:"small",color:"default",id:"toolbar-open-instances-list-panel-button",onClick:e.toggleInstancesList,selected:e.isInstancesListShown,tooltip:e.isInstancesListShown?{id:"Close Instances List Panel"}:{id:"Open Instances List Panel"},children:(0,d.jsx)(mT,{})}),(0,d.jsx)(M.Z,{size:"small",color:"default",id:"toolbar-open-layers-panel-button",onClick:e.toggleLayersList,selected:e.isLayersListShown,tooltip:e.isLayersListShown?{id:"Close Layers Panel"}:{id:"Open Layers Panel"},children:(0,d.jsx)(vT,{})}),(0,d.jsx)(Ig.Z,{element:(0,d.jsx)(M.Z,{size:"small",color:"default",tooltip:{id:"Toggle/edit grid"},children:(0,d.jsx)(bT,{})}),buildMenuTemplate:function(t){return[{type:"checkbox",label:t._({id:"Show Mask"}),checked:e.isWindowMaskShown,click:function(){return e.toggleWindowMask()}},{type:"checkbox",label:t._({id:"Show grid"}),checked:e.isGridShown,click:function(){return e.toggleGrid()}},{type:"separator"},{label:t._({id:"Setup grid"}),click:function(){return e.openSetupGrid()}}]}}),(0,d.jsx)(lm,{}),(0,d.jsx)(M.Z,{size:"small",color:"default",onClick:e.undo,disabled:!e.canUndo,tooltip:{id:"Undo the last changes"},children:(0,d.jsx)(ye,{})}),(0,d.jsx)(M.Z,{size:"small",color:"default",onClick:e.redo,disabled:!e.canRedo,tooltip:{id:"Redo the last changes"},children:(0,d.jsx)(mn,{})}),(0,d.jsx)(Ig.Z,{element:(0,d.jsx)(M.Z,{size:"small",color:"default",tooltip:{id:"Change editor zoom"},children:(0,d.jsx)(CT.Z,{})}),buildMenuTemplate:function(t){return[].concat((0,v.Z)(e.getContextMenuZoomItems(t)),[{type:"separator"},{label:"5%",click:function(){return e.setZoomFactor(.05)}},{label:"10%",click:function(){return e.setZoomFactor(.1)}},{label:"25%",click:function(){return e.setZoomFactor(.25)}},{label:"50%",click:function(){return e.setZoomFactor(.5)}},{label:"100%",click:function(){return e.setZoomFactor(1)}},{label:"150%",click:function(){return e.setZoomFactor(1.5)}},{label:"200%",click:function(){return e.setZoomFactor(2)}},{label:"400%",click:function(){return e.setZoomFactor(4)}}])}}),(0,d.jsx)(M.Z,{size:"small",color:"default",onClick:e.deleteSelection,disabled:!e.selectedInstancesCount,tooltip:{id:"Delete the selected instances from the scene"},children:(0,d.jsx)(vn.Z,{})}),e.onOpenSettings&&(0,d.jsx)(lm,{}),e.onOpenSettings&&(0,d.jsx)(M.Z,{size:"small",color:"default",onClick:e.onOpenSettings,tooltip:{id:"Open settings"},children:e.settingsIcon||(0,d.jsx)(gm,{})})]})]})})),yT=l.memo((function(e){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(gT,{toggleObjectsList:e.toggleObjectsList,toggleObjectGroupsList:e.toggleObjectGroupsList,togglePropertiesPanel:e.toggleProperties,toggleInstancesList:e.toggleInstancesList,toggleLayersList:e.toggleLayersList,undo:e.undo,canUndo:e.canUndo,redo:e.redo,canRedo:e.canRedo,deleteSelection:e.deleteSelection,toggleWindowMask:e.toggleWindowMask,toggleGrid:e.toggleGrid,setupGrid:e.openSetupGrid,canDeleteSelection:0!==e.selectedInstancesCount,canRenameObject:e.canRenameObject,onRenameObject:e.onRenameObject}),(0,d.jsx)(M.Z,{size:"small",color:"default",onClick:e.undo,disabled:!e.canUndo,tooltip:{id:"Undo the last changes"},children:(0,d.jsx)(ye,{})}),(0,d.jsx)(M.Z,{size:"small",color:"default",onClick:e.redo,disabled:!e.canRedo,tooltip:{id:"Redo the last changes"},children:(0,d.jsx)(mn,{})}),(0,d.jsx)(Ig.Z,{element:(0,d.jsx)(M.Z,{size:"small",color:"default",tooltip:{id:"Change editor zoom"},children:(0,d.jsx)(CT.Z,{})}),buildMenuTemplate:function(t){return[].concat((0,v.Z)(e.getContextMenuZoomItems(t)),[{type:"separator"},{label:"5%",click:function(){return e.setZoomFactor(.05)}},{label:"10%",click:function(){return e.setZoomFactor(.1)}},{label:"25%",click:function(){return e.setZoomFactor(.25)}},{label:"50%",click:function(){return e.setZoomFactor(.5)}},{label:"100%",click:function(){return e.setZoomFactor(1)}},{label:"150%",click:function(){return e.setZoomFactor(1.5)}},{label:"200%",click:function(){return e.setZoomFactor(2)}},{label:"400%",click:function(){return e.setZoomFactor(4)}}])}}),(0,d.jsx)(M.Z,{size:"small",color:"default",onClick:e.deleteSelection,disabled:!e.selectedInstancesCount,tooltip:{id:"Delete the selected instances from the scene"},children:(0,d.jsx)(vn.Z,{})}),(0,d.jsx)(lm,{}),(0,d.jsxs)(m,{lastChild:!0,children:[(0,d.jsx)(Ig.Z,{element:(0,d.jsx)(M.Z,{size:"small",color:"default",tooltip:{id:"Toggle/edit grid"},children:(0,d.jsx)(bT,{})}),buildMenuTemplate:function(t){return[{type:"checkbox",label:t._({id:"Show Mask"}),checked:e.isWindowMaskShown,click:function(){return e.toggleWindowMask()}},{type:"checkbox",label:t._({id:"Show grid"}),checked:e.isGridShown,click:function(){return e.toggleGrid()}},{type:"separator"},{label:t._({id:"Setup grid"}),click:function(){return e.openSetupGrid()}}]}}),(0,d.jsx)(lm,{}),(0,d.jsx)(M.Z,{size:"small",color:"default",onClick:e.onOpenSettings,tooltip:{id:"Open settings"},children:e.settingsIcon||(0,d.jsx)(gm,{})})]})]})})),ZT=function(e,t,n,r){return function(e,t,n){var r=n&&n.type||null,i=n&&n.names||null,o=r?function(n){return Gu.getTypeOfObject(e,t,n.getName(),!1)===r}:null,a=i?function(e){return i.includes(e.getName())}:null,s=(0,Et.mapFor)(0,t.getObjectsCount(),(function(e){var n=t.getObjectAt(e);return o&&!o(n)||a&&!a(n)?null:n})).filter(Boolean).map((function(e){return{object:e,global:!1}})),l=e===t?[]:(0,Et.mapFor)(0,e.getObjectsCount(),(function(t){var n=e.getObjectAt(t);return o&&!o(n)||a&&!a(n)?null:n})).filter(Boolean).map((function(e){return{object:e,global:!0}})),c=s.concat(l);return{containerObjectsList:s,projectObjectsList:l,allObjectsList:c}}(e,t).containerObjectsList.map((function(t){return{text:t.object.getName(),handler:function(){return n(t.object,r)},iconSrc:Ju.Z.getThumbnail.bind(Ju.Z)(e,t.object.getConfiguration())}}))},kT=function(e){var t=e.project,n=e.layout,r=e.onEditObject,i=e.onEditObjectVariables;(0,xi.gT)("EDIT_OBJECT",!0,{generateOptions:l.useCallback((function(){return ZT(t,n,r)}),[t,n,r])}),(0,xi.gT)("EDIT_OBJECT_BEHAVIORS",!0,{generateOptions:l.useCallback((function(){return ZT(t,n,r,"behaviors")}),[t,n,r])}),(0,xi.gT)("EDIT_OBJECT_EFFECTS",!0,{generateOptions:l.useCallback((function(){return ZT(t,n,r,"effects")}),[t,n,r])}),(0,xi.gT)("EDIT_OBJECT_VARIABLES",!0,{generateOptions:l.useCallback((function(){return ZT(t,n,i)}),[t,n,i])})},wT=function(e){var t=e.project,n=e.layout,r=e.onEditObjectGroup;(0,xi.gT)("EDIT_OBJECT_GROUP",!0,{generateOptions:l.useCallback((function(){return[].concat((0,v.Z)(qu(n.getObjectGroups())),(0,v.Z)(qu(t.getObjectGroups()))).map((function(e){return{text:e.getName(),handler:function(){return r(e)}}}))}),[r,t,n])})},TT=function(e){var t=e.layout,n=e.onEditLayerEffects,r=e.onEditLayer;(0,xi.gT)("EDIT_LAYER_EFFECTS",!0,{generateOptions:l.useCallback((function(){var e=t.getLayersCount();return(0,Et.mapReverseFor)(0,e,(function(e){var r=t.getLayerAt(e);return{text:r.getName()||"Base layer",handler:function(){return n(r)}}}))}),[t,n])}),(0,xi.gT)("EDIT_LAYER",!0,{generateOptions:l.useCallback((function(){var e=t.getLayersCount();return(0,Et.mapReverseFor)(0,e,(function(e){var n=t.getLayerAt(e);return{text:n.getName()||"Base layer",handler:function(){return r(n)}}}))}),[t,r])})},ST=function(e){var t=e.project,n=e.layout,r=e.onEditObject,i=e.onEditObjectVariables,o=e.onOpenSceneProperties,a=e.onOpenSceneVariables,s=e.onEditObjectGroup,l=e.onEditLayerEffects,c=e.onEditLayer;return(0,xi.YZ)("OPEN_SCENE_PROPERTIES",!0,{handler:o}),(0,xi.YZ)("OPEN_SCENE_VARIABLES",!0,{handler:a}),kT({project:t,layout:n,onEditObject:r,onEditObjectVariables:i}),wT({project:t,layout:n,onEditObjectGroup:s}),TT({layout:n,onEditLayerEffects:l,onEditLayer:c}),null},PT=n(58247),ET=n(22537),IT=function(e){for(var t=0;t<e.getLayersCount();t++){var n=e.getLayerAt(t);if(n.isLightingLayer())return n}return null},MT={"Lighting::LightObject":{onObjectAdded:function(e,t,n){if(null===IT(t)){var r=(0,It.Z)("Lighting",(function(e){return t.hasLayerNamed(e)}));t.insertNewLayer(r,t.getLayersCount());var i=t.getLayer("Lighting");i.setLightingLayer(!0),i.setFollowBaseLayerCamera(!0),i.setAmbientLightColor(128,128,128)}},onInstanceAdded:function(e,t,n){var r=IT(t);r&&e.setLayer(r.getName())},getInfoBarDetails:function(e){return"onObjectAdded"===e?{identifier:"automatic-lighting-layer",message:{id:"A lighting layer was created. Lights will be placed on it automatically. You can change the ambient light color in the properties of this layer"},touchScreenMessage:{id:"A lighting layer was created. Lights will be placed on it automatically. You can change the ambient light color in the properties of this layer"}}:"onInstanceAdded"===e?{identifier:"object-moved-in-lighting-layer",message:{id:"The light object was automatically placed on the Lighting layer."},touchScreenMessage:{id:"The light object was automatically placed on the Lighting layer."}}:null}}},LT=n(5675),AT=n(36425);function FT(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(e){var t=e.data.originalEvent.nativeEvent;e.data.isPrimary?r(e,t):o(e,t)}function r(t,n){var r=new Date,i=r-e._pan.p.date;if(!(i<12)){var o=n.clientX-e._pan.p.x,a=n.clientY-e._pan.p.y,s=Math.sqrt(o*o+a*a);if(e._pan.pp){var l={deltaX:o,deltaY:a,velocity:s/i,data:t.data};e.emit("panmove",l)}else{if(!(s>(n instanceof window.MouseEvent?2:7)))return;e.emit("panstart")}e._pan.pp={x:e._pan.p.x,y:e._pan.p.y,date:e._pan.p.date},e._pan.p={x:n.clientX,y:n.clientY,date:r}}}function i(e){o(e,e.data.originalEvent.nativeEvent)}function o(i,o){if(e.removeEventListener("globalpointermove",n),e._pan&&e._pan.pp)if(t&&o){if(e._pan.intervalId)return;var a=new Date-e._pan.pp.date,s=(o.clientX-e._pan.pp.x)/a,l=(o.clientY-e._pan.pp.y)/a;e._pan.intervalId=setInterval((function(){if(Math.abs(s)<.04&&Math.abs(l)<.04)return clearInterval(e._pan.intervalId),e.emit("panend"),void(e._pan=null);var t={clientX:e._pan.p.x+12*s,clientY:e._pan.p.y+12*l};r(i,t),s*=.9,l*=.9}),12)}else e.emit("panend"),e._pan=null;else e._pan=null}e.eventMode="static",e.addEventListener("pointerdown",(function(t){!function(t){if(e._pan){if(!e._pan.intervalId)return;clearInterval(e._pan.intervalId),e.emit("panend")}e._pan={p:{x:t.clientX,y:t.clientY,date:new Date}},e.addEventListener("globalpointermove",n)}(t.data.originalEvent.nativeEvent)})),e.addEventListener("pointerup",i),e.addEventListener("pointerupoutside",i)}var OT=n(79916),RT=function(){function e(t){var n=this,r=t.initialViewX,i=t.initialViewY,o=t.width,a=t.height,s=t.instancesEditorSettings;(0,ot.Z)(this,e),this.viewX=0,this.viewY=0,this._pixiContainer=new AT.Container,this.toSceneCoordinates=function(e,t){e-=n._width/2,t-=n._height/2,e/=Math.abs(n.instancesEditorSettings.zoomFactor),t/=Math.abs(n.instancesEditorSettings.zoomFactor);var r=e;return e=Math.cos(0*Math.PI)*e-Math.sin(0*Math.PI)*t,t=Math.sin(0*Math.PI)*r+Math.cos(0*Math.PI)*t,[e+n.viewX,t+n.viewY]},this.toSceneScale=function(e){return 0===n.instancesEditorSettings.zoomFactor?e:e/Math.abs(n.instancesEditorSettings.zoomFactor)},this.toCanvasCoordinates=function(e,t){e-=n.viewX,t-=n.viewY;var r=e;return e=Math.cos(-0*Math.PI)*e-Math.sin(-0*Math.PI)*t,t=Math.sin(-0*Math.PI)*r+Math.cos(-0*Math.PI)*t,e*=Math.abs(n.instancesEditorSettings.zoomFactor),t*=Math.abs(n.instancesEditorSettings.zoomFactor),[e+n._width/2,t+n._height/2]},this.viewX=r,this.viewY=i,this.instancesEditorSettings=s,this.resize(o,a)}return(0,at.Z)(e,[{key:"setInstancesEditorSettings",value:function(e){this.instancesEditorSettings=e}},{key:"resize",value:function(e,t){this._width=e,this._height=t}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"containsPoint",value:function(e,t){var n=this.toCanvasCoordinates(e,t);return 0<=n[0]&&n[0]<=this._width&&0<=n[1]&&n[1]<=this._height}},{key:"scrollBy",value:function(e,t){this.viewX+=e,this.viewY+=t}},{key:"scrollTo",value:function(e,t){this.viewX=e,this.viewY=t}},{key:"fitToRectangle",value:function(e){this.viewX=e.centerX(),this.viewY=e.centerY();var t=this._width/e.width(),n=this._height/e.height();return.95*Math.min(t,n)}},{key:"getViewX",value:function(){return this.viewX}},{key:"getViewY",value:function(){return this.viewY}},{key:"applyTransformationToPixi",value:function(e){e.position.x=-this.viewX*this.instancesEditorSettings.zoomFactor,e.position.y=-this.viewY*this.instancesEditorSettings.zoomFactor,e.position.x+=this._width/2,e.position.y+=this._height/2,e.scale.x=this.instancesEditorSettings.zoomFactor,e.scale.y=this.instancesEditorSettings.zoomFactor}},{key:"applyTransformationToThree",value:function(e,t){e.aspect=this._width/this._height;var n=this.instancesEditorSettings.zoomFactor;e.position.x=this.viewX,e.position.y=-this.viewY,e.rotation.z=0;var r=OT.Z.toRad(e.fov),i=.5*this._height/n/Math.tan(.5*r);e.position.z=i,e.far=i+2e3,e.updateProjectionMatrix(),t.scale.x=this._width/n,t.scale.y=this._height/n,t.position.x=e.position.x,t.position.y=-e.position.y,t.rotation.z=0}}]),e}(),DT=n(46564),_T=function(e){if(!e)return!1;var t=e.targetTouches;return t&&t.length>=2},BT=(0,at.Z)((function e(t){var n=this,r=t.canvas,i=t.setZoomFactor,o=t.getZoomFactor,a=t.viewPosition;(0,ot.Z)(this,e),this._lastPinchCenterX=null,this._lastPinchCenterY=null,this._startPinch=function(){},this._onPinchMove=function(e,t,r){if(null===n._lastPinchCenterX||null===n._lastPinchCenterY)return n._lastPinchCenterX=e,void(n._lastPinchCenterY=t);var i=e-n._lastPinchCenterX,o=t-n._lastPinchCenterY,a=i/n._getZoomFactor(),s=o/n._getZoomFactor();n._viewPosition.scrollBy(-a,-s),n._lastPinchCenterX=e,n._lastPinchCenterY=t,n._setZoomFactor(n._getZoomFactor()*r)},this._endPinch=function(){n._lastPinchCenterX=null,n._lastPinchCenterY=null},this.unmount=function(){n._unregisterCanvasPinchDetector()},this._setZoomFactor=i,this._getZoomFactor=o,this._viewPosition=a,this._unregisterCanvasPinchDetector=function(e){var t=e.canvas,n=e.onPinchStart,r=e.onPinchMove,i=e.onPinchEnd,o=null;function a(){t.addEventListener("touchmove",s)}function s(e){if(_T(e)){var t=e.targetTouches,i=t[0].clientX-t[1].clientX,a=t[0].clientY-t[1].clientY,s=Math.sqrt(i*i+a*a);if(!o)return o={p:{distance:s,date:new Date}},void n();var l=new Date;if(!(l-o.p.date<12)){var c={x:(t[0].clientX+t[1].clientX)/2,y:(t[0].clientY+t[1].clientY)/2},u=s/o.p.distance;r(c.x,c.y,u),o.p={distance:s,date:l}}}}function l(e){t.removeEventListener("touchmove",s),o&&(i(),o=null)}return t.addEventListener("touchstart",a),t.addEventListener("touchend",l),function(){t.removeEventListener("touchstart",a),t.removeEventListener("touchmove",s),t.removeEventListener("touchend",l)}}({canvas:r,onPinchStart:this._startPinch,onPinchMove:this._onPinchMove,onPinchEnd:this._endPinch})})),NT=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;(0,ot.Z)(this,e),this.left=t,this.top=n,this.right=r,this.bottom=i,this.zMin=o,this.zMax=a}return(0,at.Z)(e,[{key:"set",value:function(e){var t=e.left,n=e.top,r=e.right,i=e.bottom,o=e.zMin,a=e.zMax;this.left=t,this.top=n,this.right=r,this.bottom=i,this.zMin=o||0,this.zMax=a||0}},{key:"setThroughCenter",value:function(e){var t=e.centerX,n=e.centerY,r=e.width,i=e.height;this.set({left:t-r/2,top:n-i/2,right:t+r/2,bottom:n+i/2,zMin:0,zMax:0})}},{key:"setRectangle",value:function(e){this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom,this.zMin=e.zMin,this.zMax=e.zMax}},{key:"width",value:function(){return this.right-this.left}},{key:"height",value:function(){return this.bottom-this.top}},{key:"depth",value:function(){return this.zMax-this.zMin}},{key:"centerX",value:function(){return(this.left+this.right)/2}},{key:"centerY",value:function(){return(this.top+this.bottom)/2}},{key:"centerZ",value:function(){return(this.zMin+this.zMax)/2}},{key:"union",value:function(e){e.left<this.left&&(this.left=e.left),e.top<this.top&&(this.top=e.top),e.right>this.right&&(this.right=e.right),e.bottom>this.bottom&&(this.bottom=e.bottom),e.zMin<this.zMin&&(this.zMin=e.zMin),e.zMax>this.zMax&&(this.zMax=e.zMax)}},{key:"containsPoint",value:function(e,t){return this.left<=e&&this.right>e&&this.bottom>t&&this.top<=t}},{key:"toCSSPosition",value:function(){return{top:this.top,left:this.left,width:this.width(),height:this.height()}}},{key:"toString",value:function(){return"["+this.left+" -> "+this.right+" ; "+this.top+" -> "+this.bottom+" ; "+this.zMin+" -> "+this.zMax+"]"}}],[{key:"fromDOMRect",value:function(e){return new this(e.left,e.top,e.right,e.bottom)}}]),e}();var UT=n(77672),HT=n.g.gd,VT=function(){function e(t){var n=this,r=t.project,i=t.layout,o=t.layer,a=t.viewPosition,s=t.instances,l=t.onInstanceClicked,c=t.onInstanceRightClicked,u=t.onInstanceDoubleClicked,d=t.onOverInstance,p=t.onOutInstance,f=t.onMoveInstance,h=t.onMoveInstanceEnd,g=t.onDownInstance,x=t.onUpInstance,m=t.pixiRenderer,v=t.showObjectInstancesIn3D;(0,ot.Z)(this,e),this.renderedInstances={},this.wasUsed=!1,this._temporaryRectangle=new NT,this._temporaryRectanglePath=[[0,0],[0,0],[0,0],[0,0]],this._renderTexture=null,this._oldWidth=null,this._oldHeight=null,this._threeGroup=null,this._threeScene=null,this._threeCamera=null,this._threePlaneTexture=null,this._threePlaneGeometry=null,this._threePlaneMaterial=null,this._threePlaneMesh=null,this.getUnrotatedInstanceLeft=function(e){return e.getX()-(n.renderedInstances[e.ptr]?n.renderedInstances[e.ptr].getOriginX():0)},this.getUnrotatedInstanceTop=function(e){return e.getY()-(n.renderedInstances[e.ptr]?n.renderedInstances[e.ptr].getOriginY():0)},this.getUnrotatedInstanceZMin=function(e){return e.getZ()-0},this.getUnrotatedInstanceSize=function(e){var t=n.getRendererOfInstance(e),r=e.hasCustomSize(),i=e.hasCustomDepth();return[r?e.getCustomWidth():t?t.getDefaultWidth():0,r?e.getCustomHeight():t?t.getDefaultHeight():0,i?e.getCustomDepth():t?t.getDefaultDepth():0]},this.getRendererOfInstance=function(e){var t=n.renderedInstances[e.ptr];if(void 0===t){var r=e.getObjectName(),i=Ku(n.project,n.layout,r);if(!i)return null;(t=n.renderedInstances[e.ptr]=Ju.Z.createNewInstanceRenderer(n.project,n.layout,e,i.getConfiguration(),n.pixiContainer,n._threeGroup))._pixiObject.eventMode="static",FT(t._pixiObject),function(e){var t=0,n=0,r=0,i=function(i){var o=i.data.global,a=o.x,s=o.y,l=Date.now();l-t<500&&Math.abs(a-n)<=10&&Math.abs(s-r)<=10&&setTimeout((function(){e.emit("doubleclick",i)})),t=l,n=a,r=s};e.eventMode="static",e.addEventListener("click",i),e.addEventListener("touchend",i)}(t._pixiObject),t._pixiObject.addEventListener("click",(function(t){0===t.data.originalEvent.button&&n.onInstanceClicked(e)})),t._pixiObject.addEventListener("doubleclick",(function(){n.onInstanceDoubleClicked(e)})),t._pixiObject.addEventListener("mouseover",(function(){n.onOverInstance(e)})),t._pixiObject.addEventListener("mousedown",(function(t){if(0===t.data.originalEvent.button){var r=t.data.global,i=n.viewPosition.toSceneCoordinates(r.x,r.y);n.onDownInstance(e,i[0],i[1])}})),t._pixiObject.addEventListener("mouseup",(function(t){if(0===t.data.originalEvent.button){var r=t.data.global,i=n.viewPosition.toSceneCoordinates(r.x,r.y);n.onUpInstance(e,i[0],i[1])}})),t._pixiObject.addEventListener("rightclick",(function(t){var r=t.data,i=r.global,o=r.originalEvent,a=n.viewPosition.toSceneCoordinates(i.x,i.y);return n.onDownInstance(e,a[0],a[1]),n.onInstanceRightClicked&&n.onInstanceRightClicked({offsetX:o.offsetX,offsetY:o.offsetY,x:o.clientX,y:o.clientY}),!1})),t._pixiObject.addEventListener("touchstart",(function(t){if(_T(t.data&&t.data.originalEvent))return null;var r=t.data.global,i=n.viewPosition.toSceneCoordinates(r.x,r.y);n.onDownInstance(e,i[0],i[1])})),t._pixiObject.addEventListener("touchend",(function(t){if(_T(t.data&&t.data.originalEvent))return null;var r=t.data.global,i=n.viewPosition.toSceneCoordinates(r.x,r.y);n.onUpInstance(e,i[0],i[1])})),t._pixiObject.addEventListener("mouseout",(function(){n.onOutInstance(e)})),t._pixiObject.addEventListener("panmove",(function(t){if(_T(t.data&&t.data.originalEvent))return null;n.onMoveInstance(e,t.deltaX,t.deltaY)})),t._pixiObject.addEventListener("panend",(function(e){n.onMoveInstanceEnd()}))}return t},this.project=r,this.instances=s,this.layout=i,this.layer=o,this.viewPosition=a,this.onInstanceClicked=l,this.onInstanceRightClicked=c,this.onInstanceDoubleClicked=u,this.onOverInstance=d,this.onOutInstance=p,this.onMoveInstance=f,this.onMoveInstanceEnd=h,this.onDownInstance=g,this.onUpInstance=x,this.viewTopLeft=[0,0],this.viewBottomRight=[0,0],this.pixiContainer=new AT.Container,this._showObjectInstancesIn3D=v,this.instancesRenderer=new HT.InitialInstanceJSFunctor,this.instancesRenderer.invoke=function(e){var t=HT.wrapPointer(e,HT.InitialInstance),r=n.getRendererOfInstance(t);if(r){var i=r.getPixiObject();i&&(r instanceof UT.Z?i.zOrder=t.getZ()+r.getDepth():i.zOrder=t.getZOrder());try{var o=n._isInstanceVisible(t);if(i&&(i.visible=o,i.eventMode=n.layer.isLocked()||t.isLocked()&&t.isSealed()?"auto":"static"),o&&r.update(),r instanceof UT.Z){var a=r.getThreeObject();a&&(a.visible=o),n._threeGroup&&a&&n._threeGroup.add(a)}}catch(s){if(s instanceof TypeError)return void console.error("An error occurred when rendering instance for object ".concat(t.getObjectName(),":"),s);throw s}finally{r.wasUsed=!0}}},this._showObjectInstancesIn3D&&this._setup3dRendering(m)}return(0,at.Z)(e,[{key:"getPixiContainer",value:function(){return this.pixiContainer}},{key:"getThreeScene",value:function(){return this._threeScene}},{key:"getThreeCamera",value:function(){return this._threeCamera}},{key:"getThreePlaneMesh",value:function(){return this._threePlaneMesh}},{key:"getUnrotatedInstanceAABB",value:function(e,t){var n=this.getUnrotatedInstanceSize(e),r=this.getUnrotatedInstanceLeft(e),i=this.getUnrotatedInstanceTop(e),o=this.getUnrotatedInstanceZMin(e),a=r+n[0],s=i+n[1],l=o+n[2];return t.set({left:r,top:i,right:a,bottom:s,zMin:o,zMax:l}),t}},{key:"getInstanceAABB",value:function(e,t){var n=e.getAngle()*Math.PI/180;if(0===n)return this.getUnrotatedInstanceAABB(e,t);var r=this.getUnrotatedInstanceSize(e),i=this._temporaryRectanglePath,o=this.getUnrotatedInstanceLeft(e),a=this.getUnrotatedInstanceTop(e),s=o+r[0],l=a+r[1];i[0][0]=o,i[0][1]=a,i[1][0]=o,i[1][1]=l,i[2][0]=s,i[2][1]=l,i[3][0]=s,i[3][1]=a;var c=void 0,u=void 0;this.renderedInstances[e.ptr]&&(c=o+this.renderedInstances[e.ptr].getCenterX(),u=a+this.renderedInstances[e.ptr].getCenterY()),void 0!==c&&void 0!==u||(c=(i[0][0]+i[2][0])/2,u=(i[0][1]+i[2][1])/2),function(e,t,n,r){for(var i=Math.cos(-r),o=Math.sin(-r),a=0,s=e.length;a<s;++a){var l=e[a][0]-t,c=e[a][1]-n;e[a][0]=t+l*i+c*o,e[a][1]=n-l*o+c*i}}(i,c,u,n);for(var d=Number.MAX_VALUE,p=-Number.MAX_VALUE,f=Number.MAX_VALUE,h=-Number.MAX_VALUE,g=0,x=i.length;g<x;++g)d=Math.min(d,i[g][0]),p=Math.max(p,i[g][0]),f=Math.min(f,i[g][1]),h=Math.max(h,i[g][1]);var m=this.getUnrotatedInstanceZMin(e),v=m+r[2];return t.set({left:d,top:f,right:p,bottom:h,zMin:m,zMax:v}),t}},{key:"_isInstanceVisible",value:function(e){var t=this.getInstanceAABB(e,this._temporaryRectangle);return!(t.left+t.width()<this.viewTopLeft[0]||t.top+t.height()<this.viewTopLeft[1]||t.left>this.viewBottomRight[0]||t.top>this.viewBottomRight[1])}},{key:"_computeViewBounds",value:function(){var e=1e3;this.viewTopLeft=this.viewPosition.toSceneCoordinates(-1e3,-1e3),this.viewBottomRight=this.viewPosition.toSceneCoordinates(this.viewPosition.getWidth()+e,this.viewPosition.getHeight()+e)}},{key:"render",value:function(){this._computeViewBounds(),this.instances.iterateOverInstancesWithZOrdering(this.instancesRenderer,this.layer.getName()),this._updatePixiObjectsZOrder(),this._updateVisibility(),this._destroyUnusedInstanceRenderers()}},{key:"_setup3dRendering",value:function(e){if(this._threeScene||this._threeGroup||this._threeCamera)throw new Error("Tried to setup 3D rendering for a layer that is already set up.");var t=new DT.Scene;this._threeScene=t,t.scale.y=-1,this._threeGroup=new DT.Group,this._threeGroup.rotation.order="ZYX",t.add(this._threeGroup);var n=new DT.HemisphereLight;n.color=new DT.Color(1,1,1),n.groundColor=new DT.Color(.25,.25,.25),n.position.set(0,0,1);var r=new DT.Group;r.rotation.order="ZYX",r.rotation.x=Math.PI/4,r.add(n),t.add(r);var i=new DT.PerspectiveCamera(45,1,3,2e3);if(i.rotation.order="ZYX",this._threeCamera=i,this._renderTexture||this._threePlaneGeometry||this._threePlaneMaterial||this._threePlaneTexture||this._threePlaneMesh)throw new Error("Tried to setup PixiJS plane for 2D rendering in 3D for a layer that is already set up.");this._createPixiRenderTexture(e);var o=new Uint8Array(4),a=new DT.DataTexture(o,1,1);a.needsUpdate=!0,this._threePlaneTexture=a,a.generateMipmaps=!1;var s="nearest"===this.project.getScaleMode()?DT.NearestFilter:DT.LinearFilter;a.minFilter=s,a.magFilter=s,a.wrapS=DT.ClampToEdgeWrapping,a.wrapT=DT.ClampToEdgeWrapping;var l=new DT.PlaneGeometry(1,1);this._threePlaneGeometry=l;var c={vertexShader:"\n        varying vec2 vUv;\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:"\n        uniform sampler2D map;\n        varying vec2 vUv;\n        void main() {\n          vec4 texel = texture2D(map, vUv);\n          gl_FragColor = texel;\n        }\n      ",uniforms:{map:{value:this._threePlaneTexture}},side:DT.FrontSide,transparent:!0},u=new DT.ShaderMaterial(c);this._threePlaneMaterial=u;var d=new DT.Mesh(l,u);t.add(d),this._threePlaneMesh=d}},{key:"_createPixiRenderTexture",value:function(e){if(e&&e.type===AT.RENDERER_TYPE.WEBGL)if(this._renderTexture)console.error("Tried to create a PixiJS RenderTexture for a layer that already has one.");else{this._oldWidth=e.screen.width,this._oldHeight=e.screen.height;var t=this._oldWidth,n=this._oldHeight,r=e.resolution;this._renderTexture=AT.RenderTexture.create({width:t||100,height:n||100,resolution:r}),this._renderTexture.baseTexture.scaleMode=AT.SCALE_MODES.LINEAR,console.info("RenderTexture created for layer ".concat(this.layer.getName(),"."))}}},{key:"renderOnPixiRenderTexture",value:function(e){if(this._renderTexture){this._oldWidth===e.screen.width&&this._oldHeight===e.screen.height||(this._renderTexture.resize(e.screen.width||100,e.screen.height||100),this._oldWidth=e.screen.width,this._oldHeight=e.screen.height);var t=e.renderTexture.current,n=e.renderTexture.sourceFrame;e.renderTexture.bind(this._renderTexture),e.renderTexture.clear([0,0,0,0]),e.render(this.pixiContainer,{renderTexture:this._renderTexture,clear:!1}),e.renderTexture.bind(t,n,void 0)}}},{key:"updateThreePlaneTextureFromPixiRenderTexture",value:function(e,t){if(this._threePlaneTexture&&this._renderTexture){var n=this._renderTexture.baseTexture._glTextures[t.CONTEXT_UID];if(n)e.properties.get(this._threePlaneTexture).__webglTexture=n.texture}}},{key:"_updatePixiObjectsZOrder",value:function(){this.pixiContainer.children.sort((function(e,t){return e.zOrder=e.zOrder||0,t.zOrder=t.zOrder||0,e.zOrder-t.zOrder}))}},{key:"_updateVisibility",value:function(){var e=this.layer.getVisibility();this.pixiContainer.visible=e,this._threeScene&&(this._threeScene.visible=e)}},{key:"resetInstanceRenderersFor",value:function(e){for(var t in this.renderedInstances){var n=Number(t);if(this.renderedInstances.hasOwnProperty(n)){var r=this.renderedInstances[n];r.getInstance().getObjectName()===e&&(r.onRemovedFromScene(),delete this.renderedInstances[n])}}}},{key:"_destroyUnusedInstanceRenderers",value:function(){for(var e in this.renderedInstances){var t=Number(e);if(this.renderedInstances.hasOwnProperty(t)){var n=this.renderedInstances[t];n.wasUsed?n.wasUsed=!1:(n.onRemovedFromScene(),delete this.renderedInstances[t])}}}},{key:"delete",value:function(){for(var e in this.renderedInstances){var t=Number(e);if(this.renderedInstances.hasOwnProperty(t))this.renderedInstances[t].onRemovedFromScene(),delete this.renderedInstances[t]}this.pixiContainer.destroy(),this.instancesRenderer.delete()}}]),e}(),zT=function(){function e(t){var n=this,r=t.project,i=t.layout,o=t.instances,a=t.viewPosition,s=t.onInstanceClicked,l=t.onInstanceRightClicked,c=t.onInstanceDoubleClicked,u=t.onOverInstance,d=t.onOutInstance,p=t.onMoveInstance,f=t.onMoveInstanceEnd,h=t.onDownInstance,g=t.onUpInstance,x=t.showObjectInstancesIn3D;(0,ot.Z)(this,e),this.project=r,this.instances=o,this.layout=i,this.viewPosition=a,this.onInstanceClicked=s,this.onInstanceRightClicked=l,this.onInstanceDoubleClicked=c,this.onOverInstance=u,this.onOutInstance=d,this.onMoveInstance=p,this.onMoveInstanceEnd=f,this.onDownInstance=h,this.onUpInstance=g,this._showObjectInstancesIn3D=x,this.layersRenderers={},this.pixiContainer=new AT.Container,this.pixiContainer.alpha=0,this.temporaryRectangle=new NT,this.instanceMeasurer={getInstanceAABB:function(e,t){var r=e.getLayer(),i=n.layersRenderers[r];return i?i.getInstanceAABB(e,t):(t.left=e.getX(),t.top=e.getY(),t.right=e.getX(),t.bottom=e.getY(),t.zMin=0,t.zMax=0,t)},getUnrotatedInstanceAABB:function(e,t){var r=e.getLayer(),i=n.layersRenderers[r];return i?i.getUnrotatedInstanceAABB(e,t):(t.left=e.getX(),t.top=e.getY(),t.right=e.getX(),t.bottom=e.getY(),t.zMin=0,t.zMax=0,t)},getUnrotatedInstanceSize:function(e){var t=e.getLayer(),r=n.layersRenderers[t];return r?r.getUnrotatedInstanceSize(e):[0,0,0]}}}return(0,at.Z)(e,[{key:"getPixiContainer",value:function(){return this.pixiContainer}},{key:"getInstanceMeasurer",value:function(){return this.instanceMeasurer}},{key:"render",value:function(e,t,n,r){var i=!0;t&&t.resetState();for(var o=(0,Qn.Y9)(this.layout.getBackgroundColorRed(),this.layout.getBackgroundColorGreen(),this.layout.getBackgroundColorBlue()),a=0;a<this.layout.getLayersCount();a++){var s=this.layout.getLayerAt(a),l=s.getName(),c=this.layersRenderers[l];c||(this.layersRenderers[l]=c=new VT({project:this.project,layout:this.layout,instances:this.instances,viewPosition:this.viewPosition,layer:s,onInstanceClicked:this.onInstanceClicked,onInstanceRightClicked:this.onInstanceRightClicked,onInstanceDoubleClicked:this.onInstanceDoubleClicked,onOverInstance:this.onOverInstance,onOutInstance:this.onOutInstance,onMoveInstance:this.onMoveInstance,onMoveInstanceEnd:this.onMoveInstanceEnd,onDownInstance:this.onDownInstance,onUpInstance:this.onUpInstance,pixiRenderer:e,showObjectInstancesIn3D:this._showObjectInstancesIn3D}),this.pixiContainer.addChild(c.getPixiContainer())),c.layer=s,c.wasUsed=!0,c.getPixiContainer().zOrder=a,c.render();var u=c.getPixiContainer();n.applyTransformationToPixi(u);var d=c.getThreeCamera(),p=c.getThreePlaneMesh();if(d&&p&&(n.applyTransformationToThree(d,p),d.fov=s.getCamera3DFieldOfView()),t){var f=c.getThreeScene(),h=c.getThreeCamera();f&&h&&(t.resetState(),e.reset(),c.renderOnPixiRenderTexture(e),c.updateThreePlaneTextureFromPixiRenderTexture(t,e),e.reset(),t.resetState(),i?(t.setClearColor(o),t.resetState(),t.clear(),f.background=new DT.Color(o),i=!1):f.background=null,t.clearDepth(),t.render(f,h))}else i&&(e.reset(),e.backgroundColor=o,e.backgroundAlpha=1,e.clear(),i=!1),e.render(u,{clear:!1})}this._updatePixiObjectsZOrder(),this._cleanUnusedLayerRenderers(),t&&(t.resetState(),e.reset()),e.render(r),t&&(e.reset(),t.resetState())}},{key:"_updatePixiObjectsZOrder",value:function(){this.pixiContainer.children.sort((function(e,t){return e.zOrder=e.zOrder||0,t.zOrder=t.zOrder||0,e.zOrder-t.zOrder}))}},{key:"resetInstanceRenderersFor",value:function(e){for(var t in this.layersRenderers){if(this.layersRenderers.hasOwnProperty(t))this.layersRenderers[t].resetInstanceRenderersFor(e)}}},{key:"_cleanUnusedLayerRenderers",value:function(){for(var e in this.layersRenderers)if(this.layersRenderers.hasOwnProperty(e)){var t=this.layersRenderers[e];t.wasUsed?t.wasUsed=!1:(t.delete(),delete this.layersRenderers[e])}}},{key:"delete",value:function(){for(var e in this.layersRenderers)this.layersRenderers.hasOwnProperty(e)&&this.layersRenderers[e].delete();this.pixiContainer.destroy()}}]),e}();function WT(e,t){var n=e(t.left,t.top),r=e(t.right,t.bottom);return new NT(n[0],n[1],r[0],r[1])}var GT=function(e,t,n,r,i,o){if("isometric"===o){if(t<=0||n<=0)return e[0]=Math.round(e[0]),void(e[1]=Math.round(e[1]));var a=Math.round(2*(e[0]-r)/t),s=Math.round(2*(e[1]-i)/n);if(((a+s)%2+2)%2===1){var l=(e[0]-(a/2*t+r))/t,c=(e[1]-(s/2*n+i))/n;Math.abs(l)>Math.abs(c)?l>0?a++:a--:c>0?s++:s--}e[0]=a/2*t+r,e[1]=s/2*n+i}else e[0]=t<=0?Math.round(e[0]):Math.round((e[0]-r)/t)*t+r,e[1]=n<=0?Math.round(e[1]):Math.round((e[1]-i)/n)*n+i},YT=["TopLeft","BottomLeft","BottomRight","TopRight","Top","Left","Bottom","Right"],qT={TopLeft:[0,0],BottomLeft:[0,1],BottomRight:[1,1],TopRight:[1,0],Top:[.5,0],Left:[0,.5],Bottom:[.5,1],Right:[1,.5]},XT=function(e){return"Top"!==e&&"Bottom"!==e},KT=function(e){return"Left"!==e&&"Right"!==e},JT=function(){function e(t){var n=t.instanceMeasurer,r=t.instancesEditorSettings;(0,ot.Z)(this,e),this._initialSelectionAABB=null,this._unrotatedInstanceAABBs={},this._instanceAABBs={},this._instancePositions={},this.totalDeltaX=0,this.totalDeltaY=0,this._temporaryGrabbingPosition=[0,0],this.instanceMeasurer=n,this.instancesEditorSettings=r}return(0,at.Z)(e,[{key:"setInstancesEditorSettings",value:function(e){this.instancesEditorSettings=e}},{key:"_getOrCreateInstanceAABB",value:function(e){var t=this._instanceAABBs[e.ptr];return t||(this._instanceAABBs[e.ptr]=this.instanceMeasurer.getInstanceAABB(e,new NT))}},{key:"_getOrCreateUnrotatedInstanceAABB",value:function(e){var t=this._unrotatedInstanceAABBs[e.ptr];return t||(this._unrotatedInstanceAABBs[e.ptr]=this.instanceMeasurer.getUnrotatedInstanceAABB(e,new NT))}},{key:"_getOrCreateInstanceOriginPosition",value:function(e){var t=this._instancePositions[e.ptr];return t||(this._instancePositions[e.ptr]={x:e.getX(),y:e.getY()})}},{key:"_getOrCreateSelectionAABB",value:function(e){var t=this._initialSelectionAABB;if(t)return t;if(!e.length)return null;(t=new NT).setRectangle(this._getOrCreateInstanceAABB(e[0]));for(var n=1;n<e.length;n++)t.union(this._getOrCreateInstanceAABB(e[n]));return this._initialSelectionAABB=t,t}},{key:"resizeBy",value:function(e,t,n,r,i,o){this.totalDeltaX+=t,this.totalDeltaY+=n;var a=e.filter((function(e){return!e.isLocked()})),s=this._getOrCreateSelectionAABB(a);if(s){var l,c,u,d,p,f,h=qT[r],g=s.left+s.width()*h[0],x=s.top+s.height()*h[1],m=this._temporaryGrabbingPosition;m[0]=g+this.totalDeltaX,m[1]=x+this.totalDeltaY,this.instancesEditorSettings.snap&&this.instancesEditorSettings.grid&&!o?(l=m,c=this.instancesEditorSettings.gridWidth,u=this.instancesEditorSettings.gridHeight,d=this.instancesEditorSettings.gridOffsetX,p=this.instancesEditorSettings.gridOffsetY,"isometric"===(f=this.instancesEditorSettings.gridType)?GT(l,c/2,u/2,d,p,"rectangular"):GT(l,c,u,d,p,f)):(m[0]=Math.round(m[0]),m[1]=Math.round(m[1]));var v=m[0]-g,b=m[1]-x;XT(r)||(v=0),KT(r)||(b=0);var C="TopLeft"===r||"BottomLeft"===r||"Left"===r?-v:v,j="TopLeft"===r||"TopRight"===r||"Top"===r?-b:b,y=0!==s.width()?(s.width()+C)/s.width():C,Z=0!==s.height()?(s.height()+j)/s.height():j,k=1,w=function(e){for(var t=0;t<e.length;t++)if(e[t].getAngle()%90!==0)return!0;return!1}(a);(i||w)&&(!KT(r)||XT(r)&&C*s.height()>j*s.width()?(Z=y,k=y):(y=Z,k=Z)),y=Math.max(0!==s.width()?1/s.width():1e-5,y),Z=Math.max(0!==s.height()?1/s.height():1e-5,Z),k=Math.max(0!==s.depth()?1/s.depth():1e-5,k);for(var T=s.right-qT[r][0]*s.width(),S=s.bottom-qT[r][1]*s.height(),P=0;P<a.length;P++){var E=a[P],I=this._getOrCreateUnrotatedInstanceAABB(E),M=this._getOrCreateInstanceOriginPosition(E),L=0!==I.width()?I.width():1,A=0!==I.height()?I.height():1,F=0!==I.depth()?I.depth():1,O=(E.getAngle()%360+360)%360,R=M.x,D=M.y,_=L,B=A,N=F;if(i||w||90!==O&&270!==O)_=y*L,B=Z*A,N=k*F,R=(M.x-T)*y+T,D=(M.y-S)*Z+S;else{_=Z*L,B=y*A,N=k*F;var U=(I.centerX()-T)*y+T,H=(I.centerY()-S)*Z+S;R=U+Z*(M.x-I.centerX()),D=H+y*(M.y-I.centerY())}E.setX(Math.round(R)),E.setY(Math.round(D)),E.setHasCustomDepth(!0),E.setHasCustomSize(!0),E.setCustomWidth(Math.round(_)),E.setCustomHeight(Math.round(B)),E.setCustomDepth(Math.round(N))}}}},{key:"endResize",value:function(){this._initialSelectionAABB=null,this._unrotatedInstanceAABBs={},this._instanceAABBs={},this._instancePositions={},this.totalDeltaX=0,this.totalDeltaY=0}}]),e}(),QT={TopLeft:"nwse-resize",BottomLeft:"nesw-resize",BottomRight:"nwse-resize",TopRight:"nesw-resize",Top:"ns-resize",Left:"ew-resize",Bottom:"ns-resize",Right:"ew-resize"},$T=function(){function e(t){var n=this,r=t.instancesSelection,i=t.instanceMeasurer,o=t.onResize,a=t.onResizeEnd,s=t.onRotate,l=t.onRotateEnd,c=t.toCanvasCoordinates,u=t.screenType,d=t.keyboardShortcuts,p=t.onPanMove,f=t.onPanEnd;(0,ot.Z)(this,e),this.pixiContainer=new AT.Container,this.rectanglesContainer=new AT.Container,this.selectedRectangles=[],this.resizeButtons={},this.rotateButton=new AT.Graphics,this._currentPanMovingGoal=null,this.getSelectionAABB=function(){for(var e=new NT,t=n.instancesSelection.getSelectedInstances(),r=new NT,i=0;i<t.length;i++){var o=t[i];r=n.instanceMeasurer.getInstanceAABB(o,r),0===i?e.setRectangle(r):e.union(r)}return e},this.instanceMeasurer=i,this.onResize=o,this.onResizeEnd=a,this.onRotate=s,this.onRotateEnd=l,this.toCanvasCoordinates=c,this.instancesSelection=r,this._screenType=u,this.keyboardShortcuts=d,this.onPanMove=p,this.onPanEnd=f,this.pixiContainer.addChild(this.rectanglesContainer);var h,g=(0,ia.Z)(YT);try{var x=function(){var e=h.value,t=new AT.Graphics;n.resizeButtons[e]=t,n._makeButton({objectButton:t,onMove:function(t){n.onResize(t.deltaX,t.deltaY,e)},onEnd:function(){n.onResizeEnd()},onPanMove:function(e){n.onPanMove(e.deltaX,e.deltaY,e.data.global.x,e.data.global.y)},onPanEnd:function(){n.onPanEnd()},cursor:QT[e]})};for(g.s();!(h=g.n()).done;)x()}catch(m){g.e(m)}finally{g.f()}this._makeButton({objectButton:this.rotateButton,onMove:function(e){n.onRotate(e.deltaX,e.deltaY)},onEnd:function(){n.onRotateEnd()},onPanMove:function(e){n.onPanMove(e.deltaX,e.deltaY,e.data.global.x,e.data.global.y)},onPanEnd:function(){n.onPanEnd()},cursor:'url("res/actions/rotate24_black.png"),auto'})}return(0,at.Z)(e,[{key:"setScreenType",value:function(e){this._screenType=e}},{key:"_makeButton",value:function(e){var t=this,n=e.objectButton,r=e.onMove,i=e.onEnd,o=e.onPanMove,a=e.onPanEnd,s=e.cursor;n.eventMode="static",n.buttonMode=!0,n.cursor=s,FT(n),n.addEventListener("mousemove",(function(e){t.keyboardShortcuts.shouldMoveView()?n.cursor="grab":n.cursor=s})),n.addEventListener("panmove",(function(e){t.keyboardShortcuts.shouldMoveView()?("buttonInteraction"===t._currentPanMovingGoal&&i(),o(e),t._currentPanMovingGoal="viewMoving"):(r(e),t._currentPanMovingGoal="buttonInteraction")})),n.addEventListener("panend",(function(e){t.keyboardShortcuts.shouldMoveView()?a():i(),t._currentPanMovingGoal=null})),this.pixiContainer.addChild(n)}},{key:"getPixiContainer",value:function(){return this.pixiContainer}},{key:"_renderButton",value:function(e,t,n,r,i,o){t.clear(),e?(t.beginFill(16777215),t.lineStyle(1,6842600,1),t.fill.alpha=.9,0===i?t.drawRect(n[0],n[1],r,r):1===i&&t.drawCircle(n[0]+r/2,n[1]+r/2,r/2),t.endFill(),t.hitArea=new AT.Rectangle(n[0]-o,n[1]-o,r+2*o,r+2*o)):t.hitArea=new AT.Rectangle(0,0,0,0)}},{key:"render",value:function(){for(var e="touch"===this._screenType?{bigButtonSize:14,smallButtonSize:12,buttonPadding:5,hitAreaPadding:12}:{bigButtonSize:10,smallButtonSize:8,buttonPadding:5,hitAreaPadding:5},t=e.bigButtonSize,n=e.smallButtonSize,r=e.buttonPadding,i=e.hitAreaPadding,o=this.instancesSelection.getSelectedInstances(),a=0,s=0,l=0,c=0,u=!1,d=0;d<o.length;d++){if(this.selectedRectangles.length===d){var p=new AT.Graphics;p.hitArea=new AT.Rectangle(0,0,0,0),this.selectedRectangles.push(p),this.rectanglesContainer.addChild(p)}var f=o[d],h=this.instanceMeasurer.getInstanceAABB(f,new NT),g=WT(this.toCanvasCoordinates,h);this.selectedRectangles[d].clear();var x=f.isLocked()?12343123:6842600;this.selectedRectangles[d].beginFill(x),this.selectedRectangles[d].lineStyle(1,x,1),this.selectedRectangles[d].fill.alpha=.3,this.selectedRectangles[d].alpha=.8,this.selectedRectangles[d].drawRect(g.left,g.top,g.width(),g.height()),this.selectedRectangles[d].endFill(),f.isLocked()||(u?(h.left<a&&(a=h.left),h.top<s&&(s=h.top),h.left+h.width()>l&&(l=h.left+h.width()),h.top+h.height()>c&&(c=h.top+h.height())):(a=h.left,s=h.top,l=h.left+h.width(),c=h.top+h.height(),u=!0))}for(;this.selectedRectangles.length>o.length;)this.rectanglesContainer.removeChild(this.selectedRectangles.pop());var m,v=0!==o.filter((function(e){return!e.isLocked()})).length,b=(0,ia.Z)(YT);try{for(b.s();!(m=b.n()).done;){var C=m.value,j=this.resizeButtons[C],y=qT[C],Z=XT(C)&&KT(C)?t:n,k=r+Z/2,w=this.toCanvasCoordinates(a+y[0]*(l-a),s+y[1]*(c-s));w[0]+=-Z/2+k*Math.sign(y[0]-.5),w[1]+=-Z/2+k*Math.sign(y[1]-.5),this._renderButton(v,j,w,Z,0,i)}}catch(S){b.e(S)}finally{b.f()}var T=this.toCanvasCoordinates(a+(l-a)/2,s);T[0]-=n/2,T[1]-=8*r,this._renderButton(v,this.rotateButton,T,n,1,i)}}]),e}(),eS=function(){function e(t){var n=t.instanceMeasurer,r=t.toCanvasCoordinates,i=t.isInstanceOf3DObject;(0,ot.Z)(this,e),this.instanceMeasurer=n,this.toCanvasCoordinates=r,this.isInstanceOf3DObject=i,this.highlightedInstance=null,this.isHighlightedInstanceOf3DObject=!1,this.highlightRectangle=new AT.Graphics,this.highlightRectangle.hitArea=new AT.Rectangle(0,0,0,0),this.tooltipBackground=new AT.Graphics,this.tooltipText=new AT.Text("",{fontSize:15,fill:16777215,align:"center"}),this.highlightRectangle.addChild(this.tooltipBackground),this.highlightRectangle.addChild(this.tooltipText)}return(0,at.Z)(e,[{key:"setInstance",value:function(e){this.isHighlightedInstanceOf3DObject=!!e&&this.isInstanceOf3DObject(e),this.highlightedInstance=e}},{key:"getInstance",value:function(){return this.highlightedInstance}},{key:"getPixiObject",value:function(){return this.highlightRectangle}},{key:"render",value:function(){var e=this.highlightedInstance;if(null!==e){var t=WT(this.toCanvasCoordinates,this.instanceMeasurer.getInstanceAABB(e,new NT));this.highlightRectangle.visible=!0,this.highlightRectangle.clear(),this.highlightRectangle.beginFill(15658751),this.highlightRectangle.fill.alpha=.1,this.highlightRectangle.alpha=.8,this.highlightRectangle.lineStyle(1,0,1),this.highlightRectangle.drawRect(t.left,t.top,t.width(),t.height()),this.highlightRectangle.endFill();var n=e.getObjectName()+"\nX: "+Math.round(100*e.getX())/100+"  Y: "+Math.round(100*e.getY())/100+(this.isHighlightedInstanceOf3DObject?"  Z: "+Math.round(100*e.getZ())/100:"")+"\nLayer: "+(e.getLayer()||"Base layer")+(this.isHighlightedInstanceOf3DObject?"":"\nZ order: "+e.getZOrder())+"\n";this.tooltipText.text=n,this.tooltipText.x=Math.round(t.left-this.tooltipText.width/2+t.width()/2),this.tooltipText.y=Math.round(t.top-this.tooltipText.height);this.tooltipBackground.clear(),this.tooltipBackground.beginFill(0,.8),this.tooltipBackground.drawRoundedRect(this.tooltipText.x-5,this.tooltipText.y-5,this.tooltipText.width+10,this.tooltipText.height-5,4),this.tooltipBackground.endFill()}else this.highlightRectangle.visible=!1}}]),e}(),tS=n.g.gd,nS=function(){function e(t){var n=this,r=t.instances,i=t.instanceMeasurer,o=t.toSceneCoordinates;(0,ot.Z)(this,e),this.startSelectionRectangle=function(e,t){n.selectionRectangleStart={x:e,y:t},n.selectionRectangleEnd={x:e,y:t}},this.updateSelectionRectangle=function(e,t){n.selectionRectangleStart||(n.selectionRectangleStart={x:e,y:t}),n.selectionRectangleEnd={x:e,y:t}},this.endSelectionRectangle=function(){if(!n.selectionRectangleStart||!n.selectionRectangleEnd)return[];if(n._instancesInSelectionRectangle.length=0,n.selectionRectangleStart.x>n.selectionRectangleEnd.x){var e=n.selectionRectangleStart.x;n.selectionRectangleStart.x=n.selectionRectangleEnd.x,n.selectionRectangleEnd.x=e}if(n.selectionRectangleStart.y>n.selectionRectangleEnd.y){var t=n.selectionRectangleStart.y;n.selectionRectangleStart.y=n.selectionRectangleEnd.y,n.selectionRectangleEnd.y=t}return n.instances.iterateOverInstances(n.selector),n.selectionRectangleStart=null,n._instancesInSelectionRectangle},this.instances=r,this.instanceMeasurer=i,this.toSceneCoordinates=o,this.pixiRectangle=new AT.Graphics,this.pixiRectangle.hitArea=new AT.Rectangle(0,0,0,0),this.selectionRectangleStart=null,this.selectionRectangleEnd=null,this._instancesInSelectionRectangle=[],this._temporaryAABB=new NT,this.selector=new tS.InitialInstanceJSFunctor,this.selector.invoke=function(e){var t=tS.wrapPointer(e,tS.InitialInstance),r=n.instanceMeasurer.getInstanceAABB(t,n._temporaryAABB),i=n.selectionRectangleEnd,a=n.selectionRectangleStart;if(a&&i){var s=o(a.x,a.y),l=o(i.x,i.y);s[0]<=r.left&&r.right<=l[0]&&s[1]<=r.top&&r.bottom<=l[1]&&n._instancesInSelectionRectangle.push(t)}}}return(0,at.Z)(e,[{key:"hasStartedSelectionRectangle",value:function(){return this.selectionRectangleStart}},{key:"getPixiObject",value:function(){return this.pixiRectangle}},{key:"render",value:function(){if(this.selectionRectangleStart&&this.selectionRectangleEnd){var e=this.selectionRectangleStart.x,t=this.selectionRectangleStart.y,n=this.selectionRectangleEnd.x,r=this.selectionRectangleEnd.y;this.pixiRectangle.visible=!0,this.pixiRectangle.clear(),this.pixiRectangle.beginFill(6842600),this.pixiRectangle.lineStyle(1,6842600,1),this.pixiRectangle.fill.alpha=.1,this.pixiRectangle.alpha=.8,this.pixiRectangle.drawRect(Math.min(e,n),Math.min(t,r),Math.abs(n-e),Math.abs(r-t)),this.pixiRectangle.endFill()}else this.pixiRectangle.visible=!1}},{key:"delete",value:function(){this.selector.delete()}}]),e}(),rS=function(){function e(t){(0,ot.Z)(this,e),this._instanceAngles={},this._instancePositions={},this._instanceAABBs={},this.totalDeltaX=0,this.totalDeltaY=0,this._fixedPointIsUpToDate=!1,this._fixedPoint=[0,0],this._instanceMeasurer=t}return(0,at.Z)(e,[{key:"_getNewAngle",value:function(e,t){var n=180*Math.atan2(this.totalDeltaY,this.totalDeltaX)/Math.PI+90+t;return e?15*Math.round(n/15):n}},{key:"_getOrCreateInstanceAABB",value:function(e){var t=this._instanceAABBs[e.ptr];return t||(this._instanceAABBs[e.ptr]=this._instanceMeasurer.getInstanceAABB(e,new NT))}},{key:"_getOrCreateInstanceOriginPosition",value:function(e){var t=this._instancePositions[e.ptr];return t||(this._instancePositions[e.ptr]={x:e.getX(),y:e.getY()})}},{key:"_getOrCreateInstanceAngle",value:function(e){var t=this._instanceAngles[e.ptr];return void 0!==t?t:this._instanceAngles[e.ptr]=e.getAngle()}},{key:"rotateBy",value:function(e,t,n,r){var i=e.filter((function(e){return!e.isLocked()}));if(!this._fixedPointIsUpToDate){this._fixedPointIsUpToDate=!0;var o=new NT;o.setRectangle(this._getOrCreateInstanceAABB(i[0]));for(var a=1;a<i.length;a++)o.union(this._getOrCreateInstanceAABB(i[a]));this._fixedPoint[0]=o.centerX(),this._fixedPoint[1]=o.centerY(),this.totalDeltaY-=o.height()/2}this.totalDeltaX+=t,this.totalDeltaY+=n;for(var s=0;s<i.length;s++){var l=i[s],c=this._getOrCreateInstanceAABB(l),u=this._getOrCreateInstanceAngle(l),d=this._getOrCreateInstanceOriginPosition(l),p=this._getNewAngle(r,u),f=Math.round((p%360+360)%360);l.setAngle(f);var h=(p-u)*Math.PI/180,g=Math.cos(-h),x=Math.sin(-h),m=c.centerX()-this._fixedPoint[0],v=c.centerY()-this._fixedPoint[1],b=Math.round(this._fixedPoint[0]+(d.x-c.centerX())+g*m+x*v),C=Math.round(this._fixedPoint[1]+(d.y-c.centerY())-x*m+g*v);l.setX(b),l.setY(C)}}},{key:"endRotate",value:function(){this._instanceAngles={},this._instancePositions={},this._instanceAABBs={},this.totalDeltaX=0,this.totalDeltaY=0,this._fixedPointIsUpToDate=!1}}]),e}(),iS=function(){function e(t){var n=t.instanceMeasurer,r=t.instancesEditorSettings;(0,ot.Z)(this,e),this._initialSelectionAABB=null,this._startX=0,this._startY=0,this.instanceMeasurer=n,this.instancesEditorSettings=r,this.instancePositions={},this.totalDeltaX=0,this.totalDeltaY=0,this._temporaryPoint=[0,0]}return(0,at.Z)(e,[{key:"setInstancesEditorSettings",value:function(e){this.instancesEditorSettings=e}},{key:"_getMoveDeltaX",value:function(e,t,n){return n&&Math.abs(e)<Math.abs(t)?0:e}},{key:"_getMoveDeltaY",value:function(e,t,n){return n&&Math.abs(t)<Math.abs(e)?0:t}},{key:"_getOrCreateSelectionAABB",value:function(e){if(this._initialSelectionAABB)return this._initialSelectionAABB;if(!e.length)return null;var t=new NT;this.instanceMeasurer.getInstanceAABB(e[0],t);for(var n=new NT,r=1;r<e.length;r++)this.instanceMeasurer.getInstanceAABB(e[r],n),t.union(n);return this._initialSelectionAABB=t,t}},{key:"startMove",value:function(e,t){this._startX=e,this._startY=t}},{key:"moveBy",value:function(e,t,n,r,i){this.totalDeltaX+=t,this.totalDeltaY+=n;var o=e.filter((function(e){return!e.isLocked()})),a=this._getOrCreateSelectionAABB(o);if(a){var s=this._startX<a.centerX(),l=this._startY<a.centerY(),c=s?a.left:a.right,u=l?a.top:a.bottom,d=this._temporaryPoint;d[0]=c+this.totalDeltaX,d[1]=u+this.totalDeltaY,this.instancesEditorSettings.snap&&this.instancesEditorSettings.grid&&!i?GT(d,this.instancesEditorSettings.gridWidth,this.instancesEditorSettings.gridHeight,this.instancesEditorSettings.gridOffsetX,this.instancesEditorSettings.gridOffsetY,this.instancesEditorSettings.gridType):(d[0]=Math.round(d[0]),d[1]=Math.round(d[1]));for(var p=d[0]-c,f=d[1]-u,h=0;h<o.length;h++){var g=o[h],x=this.instancePositions[g.ptr];x||(x=this.instancePositions[g.ptr]={x:g.getX(),y:g.getY()});var m=Math.round(x.x+this._getMoveDeltaX(p,f,r)),v=Math.round(x.y+this._getMoveDeltaY(p,f,r));g.setX(m),g.setY(v)}}}},{key:"endMove",value:function(){this._initialSelectionAABB=null,this.instancePositions={},this.totalDeltaX=0,this.totalDeltaY=0}},{key:"isMoving",value:function(){return!!this._initialSelectionAABB}}]),e}(),oS=function(){function e(t){var n=t.viewPosition,r=t.instancesEditorSettings;(0,ot.Z)(this,e),this.pixiGrid=new AT.Graphics,this.viewPosition=n,this.instancesEditorSettings=r,this.pixiGrid.hitArea=new AT.Rectangle(0,0,0,0)}return(0,at.Z)(e,[{key:"setInstancesEditorSettings",value:function(e){this.instancesEditorSettings=e}},{key:"getPixiObject",value:function(){return this.pixiGrid}},{key:"render",value:function(){var e=this.instancesEditorSettings;if(e.grid){var t=e.gridColor,n=e.gridAlpha;this.pixiGrid.visible=!0,this.pixiGrid.clear(),this.pixiGrid.beginFill(t),this.pixiGrid.lineStyle(1,t,1),this.pixiGrid.alpha=n;var r=this.viewPosition.toSceneCoordinates(0,0),i=this.viewPosition.toSceneCoordinates(this.viewPosition.getWidth(),this.viewPosition.getHeight()),o=(e.gridOffsetX%e.gridWidth+e.gridWidth)%e.gridWidth,a=(e.gridOffsetY%e.gridHeight+e.gridHeight)%e.gridHeight,s=Math.floor((r[0]-o)/e.gridWidth)*e.gridWidth+o,l=Math.floor((r[1]-a)/e.gridHeight)*e.gridHeight+a,c=Math.ceil((i[0]-o)/e.gridWidth)*e.gridWidth+o,u=Math.ceil((i[1]-a)/e.gridHeight)*e.gridHeight+a;if("isometric"===e.gridType){for(var d=Math.round((c-s)/e.gridWidth),p=Math.round((u-l)/e.gridHeight),f=d+p,h=0;h<f;++h){var g=void 0,x=void 0;h<d?(g=s+e.gridWidth/2+h*e.gridWidth,x=l):(g=c,x=l+e.gridHeight/2+(h-d)*e.gridHeight);var m=void 0,v=void 0;h<p?(m=s,v=l+e.gridHeight/2+h*e.gridHeight):(m=s+e.gridWidth/2+(h-p)*e.gridWidth,v=u);var b=this.viewPosition.toCanvasCoordinates(g,x),C=this.viewPosition.toCanvasCoordinates(m,v);this.pixiGrid.moveTo(b[0],b[1]),this.pixiGrid.lineTo(C[0],C[1])}for(var j=0;j<f;++j){var y=void 0,Z=void 0;j<p?(y=s,Z=l+e.gridHeight/2+(p-1-j)*e.gridHeight):(y=s+e.gridWidth/2+(j-p)*e.gridWidth,Z=l);var k=void 0,w=void 0;j<d?(k=s+e.gridWidth/2+j*e.gridWidth,w=u):(k=c,w=l+e.gridHeight/2+(f-1-j)*e.gridHeight);var T=this.viewPosition.toCanvasCoordinates(y,Z),S=this.viewPosition.toCanvasCoordinates(k,w);this.pixiGrid.moveTo(T[0],T[1]),this.pixiGrid.lineTo(S[0],S[1])}}else{for(var P=s;P<c;P+=e.gridWidth){var E=this.viewPosition.toCanvasCoordinates(P,l),I=this.viewPosition.toCanvasCoordinates(P,u);this.pixiGrid.moveTo(E[0],E[1]),this.pixiGrid.lineTo(I[0],I[1])}for(var M=l;M<u;M+=e.gridHeight){var L=this.viewPosition.toCanvasCoordinates(s,M),A=this.viewPosition.toCanvasCoordinates(c,M);this.pixiGrid.moveTo(L[0],L[1]),this.pixiGrid.lineTo(A[0],A[1])}}this.pixiGrid.endFill()}else this.pixiGrid.visible=!1}}]),e}(),aS=function(){function e(t){var n=t.project,r=t.layout,i=t.toCanvasCoordinates;(0,ot.Z)(this,e),this.pixiRectangle=new AT.Graphics,this.windowRectangle=new NT,this.project=n,this.layout=r,this.toCanvasCoordinates=i,this.pixiRectangle.hitArea=new AT.Rectangle(0,0,0,0)}return(0,at.Z)(e,[{key:"getPixiObject",value:function(){return this.pixiRectangle}},{key:"render",value:function(){this.windowRectangle.set({left:0,top:0,right:this.project.getGameResolutionWidth(),bottom:this.project.getGameResolutionHeight()});var e=WT(this.toCanvasCoordinates,this.windowRectangle);this.pixiRectangle.clear(),this.pixiRectangle.beginFill(0);var t=this.layout.getBackgroundColorRed(),n=this.layout.getBackgroundColorBlue(),r=this.layout.getBackgroundColorGreen(),i=Math.max(t,n,r)<128;this.pixiRectangle.lineStyle(1,(0,Qn.Y9)(((i?255:0)+t)/2,((i?255:0)+n)/2,((i?255:0)+r)/2),1),this.pixiRectangle.alpha=1,this.pixiRectangle.fill.alpha=0,this.pixiRectangle.drawRect(e.left,e.top,e.width(),e.height()),this.pixiRectangle.endFill()}}]),e}(),sS=function(){function e(t){var n=t.project,r=t.viewPosition,i=t.instancesEditorSettings;(0,ot.Z)(this,e),this.pixiRectangle=new AT.Graphics,this.windowRectangle=new NT,this.project=n,this.viewPosition=r,this.instancesEditorSettings=i,this.pixiRectangle.hitArea=new AT.Rectangle(0,0,0,0)}return(0,at.Z)(e,[{key:"setInstancesEditorSettings",value:function(e){this.instancesEditorSettings=e}},{key:"getPixiObject",value:function(){return this.pixiRectangle}},{key:"render",value:function(){if(this.instancesEditorSettings.windowMask){this.windowRectangle.setThroughCenter({centerX:this.viewPosition.getViewX(),centerY:this.viewPosition.getViewY(),width:this.project.getGameResolutionWidth(),height:this.project.getGameResolutionHeight()});var e=WT(this.viewPosition.toCanvasCoordinates,this.windowRectangle);this.pixiRectangle.visible=!0,this.pixiRectangle.clear(),this.pixiRectangle.beginFill(0),this.pixiRectangle.lineStyle(1,0,1),this.pixiRectangle.alpha=1,this.pixiRectangle.fill.alpha=0,this.pixiRectangle.drawRect(e.left,e.top,e.width(),e.height()),this.pixiRectangle.endFill()}else this.pixiRectangle.visible=!1}}]),e}(),lS=function(){function e(t){var n=t.idleFps,r=t.maxFps;(0,ot.Z)(this,e),this._maxFps=r,this._idleFps=n,this._lastFrameTime=Date.now(),this._interval=1e3/n,this._forceUpdate=!1}return(0,at.Z)(e,[{key:"notifyInteractionHappened",value:function(){this._interval=1e3/this._maxFps,this._lastInteractionTime=Date.now()}},{key:"shouldUpdate",value:function(){var e=Date.now(),t=e-this._lastFrameTime;return e-this._lastInteractionTime>1e3&&(this._interval=1e3/this._idleFps),!!(t>this._interval||this._forceUpdate)&&(this._lastFrameTime=e-t%this._interval,this._forceUpdate=!1,!0)}},{key:"forceNextUpdate",value:function(){this._forceUpdate=!0}}]),e}(),cS=function(){var e=AT.Ticker&&AT.Ticker.shared;e&&e.stop()},uS=function(){function e(t){var n=t.getLastCursorSceneCoordinates,r=t.width,i=t.height;(0,ot.Z)(this,e),this._getLastCursorSceneCoordinates=n,this._statusBarContainer=new AT.Container,this._statusBarContainer.alpha=.8,this._statusBarContainer.hitArea=new AT.Rectangle(0,0,0,0),this._statusBarBackground=new AT.Graphics,this._statusBarText=new AT.Text("",{fontSize:15,fill:16777215,align:"left"}),this._statusBarContainer.addChild(this._statusBarBackground),this._statusBarContainer.addChild(this._statusBarText),this.resize(r,i)}return(0,at.Z)(e,[{key:"resize",value:function(e,t){this._width=e,this._height=t}},{key:"getPixiObject",value:function(){return this._statusBarContainer}},{key:"render",value:function(){var e=Math.round(this._width-15-5-this._statusBarText.width),t=Math.round(this._height-5-15-this._statusBarText.height),n=this._getLastCursorSceneCoordinates(),r=(0,s.Z)(n,2),i=r[0],o=r[1];this._statusBarText.text="".concat(i.toFixed(0),";").concat(o.toFixed(0)),this._statusBarText.position.x=e,this._statusBarText.position.y=t;var a=this._width-15-10-this._statusBarText.width,l=this._height-15-10-this._statusBarText.height,c=this._statusBarText.width+10,u=this._statusBarText.height+10;this._statusBarBackground.clear(),this._statusBarBackground.beginFill(0,.8),this._statusBarBackground.drawRoundedRect(a,l,c,u,6),this._statusBarBackground.endFill()}}]),e}(),dS=function(){function e(t){var n=t.canvas,r=t.shouldMoveView;(0,ot.Z)(this,e),this.canvas=n,this.shouldMoveView=r}return(0,at.Z)(e,[{key:"render",value:function(){if(this.shouldMoveView())return this.canvas.style.cursor="grab",void("grab"!==this.canvas.style.cursor&&(this.canvas.style.cursor="-webkit-grab"));this.canvas.style.cursor="default"}}]),e}(),pS=n.g.gd,fS=function(e,t){var n=e;return t.grid&&t.snap?GT(n,t.gridWidth,t.gridHeight,t.gridOffsetX,t.gridOffsetY,t.gridType):(n[0]=Math.round(n[0]),n[1]=Math.round(n[1])),n},hS=function(){function e(t){var n=this,r=t.instances,i=t.instancesEditorSettings;(0,ot.Z)(this,e),this._zOrderFinder=new pS.HighestZOrderFinder,this.addSerializedInstances=function(e){var t=e.position,r=e.copyReferential,i=e.serializedInstances,o=e.preventSnapToGrid,a=void 0!==o&&o,s=e.addInstancesInTheForeground,l=void 0!==s&&s;n._zOrderFinder.reset(),n._instances.iterateOverInstances(n._zOrderFinder);var c=n._zOrderFinder.getHighestZOrder()+1,u=null,d=i.map((function(e){var i=new pS.InitialInstance;(0,Dt.qx)(i,e);var o=[i.getX()-r[0]+t[0],i.getY()-r[1]+t[1]],s=a?o:fS(o,n._instancesEditorSettings);i.setX(s[0]),i.setY(s[1]),l&&(null===u||u>i.getZOrder())&&(u=i.getZOrder());var c=n._instances.insertInitialInstance(i).resetPersistentUuid();return i.delete(),c}));return l&&null!==u&&d.forEach((function(e){e.setZOrder(e.getZOrder()-(u||0)+c)})),d},this.addInstances=function(e,t,r){n._zOrderFinder.reset(),n._instances.iterateOverInstances(n._zOrderFinder);var i=n._zOrderFinder.getHighestZOrder()+1,o=fS(e,n._instancesEditorSettings);return t.map((function(e){var t=n._instances.insertNewInitialInstance();return t.setObjectName(e),t.setX(o[0]),t.setY(o[1]),t.setLayer(r),t.setZOrder(i),t}))},this.createOrUpdateTemporaryInstancesFromObjectNames=function(e,t,r){t.length&&(n._temporaryInstances.length?n.updateTemporaryInstancePositions(e):n._createTemporaryInstancesFromObjectNames(e,t,r))},this._createTemporaryInstancesFromObjectNames=function(e,t,r){n.deleteTemporaryInstances(),n._zOrderFinder.reset(),n._instances.iterateOverInstances(n._zOrderFinder);var i=n._zOrderFinder.getHighestZOrder()+1,o=fS(e,n._instancesEditorSettings);n._temporaryInstances=t.map((function(e){var t=n._instances.insertNewInitialInstance();return t.setObjectName(e),t.setX(o[0]),t.setY(o[1]),t.setLayer(r),t.setZOrder(i),t}))},this.updateTemporaryInstancePositions=function(e){var t=fS(e,n._instancesEditorSettings);return n._temporaryInstances.forEach((function(e){e.setX(t[0]),e.setY(t[1])})),n._temporaryInstances},this._instances=r,this._instancesEditorSettings=i,this._temporaryInstances=[]}return(0,at.Z)(e,[{key:"setInstancesEditorSettings",value:function(e){this._instancesEditorSettings=e}},{key:"deleteTemporaryInstances",value:function(){var e=this;this._temporaryInstances.forEach((function(t){e._instances.removeInstance(t)})),this._temporaryInstances=[]}},{key:"commitTemporaryInstances",value:function(){this._temporaryInstances=[]}},{key:"unmount",value:function(){this._zOrderFinder.delete()}}]),e}(),gS=(0,at.Z)((function e(t){var n=this,r=t.canvas,i=t.onLongTouch;(0,ot.Z)(this,e),this._lastTouchX=0,this._lastTouchY=0,this._onTouchStart=function(e){if(1===e.touches.length){var t=e.touches[0];n._lastTouchX=t.clientX,n._lastTouchY=t.clientY,n._clear(),n._longTouchTimeoutID=setTimeout((function(){n._onLongTouch&&n._onLongTouch({clientX:n._lastTouchX,clientY:n._lastTouchY})}),600)}},this._onTouchMove=function(e){if(1===e.touches.length){var t=e.touches[0];(Math.abs(t.clientX-n._lastTouchX)>10||Math.abs(t.clientY-n._lastTouchY)>10)&&n._clear()}else n._clear()},this._clear=function(){clearTimeout(n._longTouchTimeoutID)},this.unmount=function(){n._canvas.removeEventListener("touchstart",n._onTouchStart),n._canvas.removeEventListener("touchmove",n._onTouchMove),n._canvas.removeEventListener("touchend",n._clear)},this._canvas=r,this._onLongTouch=i,r.addEventListener("touchstart",this._onTouchStart),r.addEventListener("touchmove",this._onTouchMove),r.addEventListener("touchend",this._clear)})),xS=n.g.gd,mS="instances-editor-canvas",vS={canvasArea:{flex:1,position:"absolute",overflow:"hidden"},dropCursor:{cursor:"copy"}},bS=Lh(vk),CS=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).lastContextMenuX=0,e.lastContextMenuY=0,e.lastCursorX=0,e.lastCursorY=0,e.fpsLimiter=new lS({maxFps:60,idleFps:10}),e.threeRenderer=null,e._unmounted=!1,e._renderingPaused=!1,e.hasCursorMovedSinceItIsDown=!1,e._showObjectInstancesIn3D=!1,e.forceRemount=function(){e._mountEditorComponents(e.props)},e.resetInstanceRenderersFor=function(t){e.instancesRenderer&&e.instancesRenderer.resetInstanceRenderersFor(t)},e.zoomBy=function(t){e.setZoomFactor(e.getZoomFactor()*t)},e.getZoomFactor=function(){return e.props.instancesEditorSettings.zoomFactor},e.setZoomFactor=function(t){e.props.instancesEditorSettings.zoomFactor=(0,LT.r9)(t),e.props.onInstancesEditorSettingsMutated(e.props.instancesEditorSettings)},e.addSerializedInstances=function(t){return e._instancesAdder.addSerializedInstances(t)},e.addInstances=function(t,n,r){return e._instancesAdder.addInstances(t,n,r)},e._onMouseMove=function(t,n){e.lastCursorX=t,e.lastCursorY=n},e._onDownBackground=function(t,n,r){e.lastCursorX=t,e.lastCursorY=n,e.pixiRenderer.view.focus();var i=e.keyboardShortcuts.shouldMoveView()||!!r&&r.button===St.KR;i||e.selectionRectangle.startSelectionRectangle(t,n),e.keyboardShortcuts.shouldMultiSelect()||i||!e.props.instancesSelection.hasSelectedInstances()||(e.props.instancesSelection.clearSelection(),e.props.onInstancesSelected([]))},e._onPanMove=function(t,n,r,i){if(e.fpsLimiter.notifyInteractionHappened(),e.keyboardShortcuts.shouldMoveView()){var o=t/e.getZoomFactor(),a=n/e.getZoomFactor();e.scrollBy(-o,-a)}else e.selectionRectangle.hasStartedSelectionRectangle()&&e.selectionRectangle.updateSelectionRectangle(r,i)},e._getLayersLocks=function(){for(var t=e.props.layout,n={},r=0;r<t.getLayersCount();r++){var i=t.getLayerAt(r);n[t.getLayerAt(r).getName()]=!i.getVisibility()||i.isLocked()}return n},e._onUpBackground=function(t,n,r){e.selectionRectangle.hasStartedSelectionRectangle()&&e._selectInstanceInsideSelectionRectangle()},e._onPanEnd=function(){e.selectionRectangle.hasStartedSelectionRectangle()&&e._selectInstanceInsideSelectionRectangle()},e._selectInstanceInsideSelectionRectangle=function(){var t=e.selectionRectangle.endSelectionRectangle();e.props.instancesSelection.selectInstances({instances:t,multiSelect:e.keyboardShortcuts.shouldMultiSelect(),layersLocks:e._getLayersLocks()}),t=e.props.instancesSelection.getSelectedInstances(),e.props.onInstancesSelected(t)},e._onInstanceClicked=function(t){e.fpsLimiter.notifyInteractionHappened(),e.pixiRenderer.view.focus()},e._onInstanceRightClicked=function(t){e._onRightClicked((0,a.Z)((0,a.Z)({},t),{},{ignoreSelectedObjectNamesForContextMenu:!1}))},e._onRightClicked=function(t){var n=t.offsetX,r=t.offsetY,i=t.x,o=t.y,a=t.ignoreSelectedObjectNamesForContextMenu;e.lastContextMenuX=n,e.lastContextMenuY=r,e.props.onContextMenu&&e.props.onContextMenu(i,o,!!a)},e._onInstanceDoubleClicked=function(t){e.keyboardShortcuts.shouldIgnoreDoubleClick()||e.props.onInstanceDoubleClicked(t)},e._onOverInstance=function(t){e.instancesMover.isMoving()||e.highlightedInstance.setInstance(t)},e._onDownInstance=function(t,n,r){if(e.fpsLimiter.notifyInteractionHappened(),e.hasCursorMovedSinceItIsDown=!1,!e.keyboardShortcuts.shouldMoveView())if(e.keyboardShortcuts.shouldStartRectangleSelectionInsteadOfSelecting()){var i=e.viewPosition.toCanvasCoordinates(n,r);e.selectionRectangle.startSelectionRectangle(i[0],i[1])}else e.props.instancesSelection.selectInstance({instance:t,multiSelect:e.keyboardShortcuts.shouldMultiSelect(),layersLocks:e._getLayersLocks()}),e.props.onInstancesSelected&&e.props.onInstancesSelected(e.props.instancesSelection.getSelectedInstances()),e.instancesMover.startMove(n,r)},e._onOutInstance=function(t){t===e.highlightedInstance.getInstance()&&e.highlightedInstance.setInstance(null)},e._onUpInstance=function(t,n,r){e.hasCursorMovedSinceItIsDown||(e.props.instancesSelection.selectInstance({instance:t,multiSelect:e.keyboardShortcuts.shouldMultiSelect(),layersLocks:e._getLayersLocks()}),e.props.onInstancesSelected&&e.props.onInstancesSelected(e.props.instancesSelection.getSelectedInstances()),e.selectionRectangle.hasStartedSelectionRectangle()&&e._selectInstanceInsideSelectionRectangle())},e._onMoveInstance=function(t,n,r){e.fpsLimiter.notifyInteractionHappened();var i=!e.hasCursorMovedSinceItIsDown;e.hasCursorMovedSinceItIsDown=!0;var o=n/e.getZoomFactor(),a=r/e.getZoomFactor();if(e.keyboardShortcuts.shouldMoveView())e.scrollBy(-o,-a);else if(e.selectionRectangle.hasStartedSelectionRectangle()&&e.selectionRectangle.selectionRectangleEnd)e.selectionRectangle.updateSelectionRectangle(e.selectionRectangle.selectionRectangleEnd.x+n,e.selectionRectangle.selectionRectangleEnd.y+r);else{if(e.keyboardShortcuts.shouldCloneInstances()&&i)for(var s=e.props.instancesSelection.getSelectedInstances(),l=0;l<s.length;l++){var c=s[l];e.props.initialInstances.insertInitialInstance(c).resetPersistentUuid()}e.props.instancesSelection.isInstanceSelected(t)||e._onInstanceClicked(t);var u=e.props.instancesSelection.getSelectedInstances();e.instancesMover.moveBy(u,o,a,e.keyboardShortcuts.shouldFollowAxis(),e.keyboardShortcuts.shouldNotSnapToGrid())}},e._onMoveInstanceEnd=function(){if(e.hasCursorMovedSinceItIsDown)if(e.selectionRectangle.hasStartedSelectionRectangle())e._selectInstanceInsideSelectionRectangle();else{e.instancesMover.endMove();var t=e.props.instancesSelection.getSelectedInstances();e.props.onInstancesMoved(t)}},e._onResize=function(t,n,r){e.fpsLimiter.notifyInteractionHappened();var i=t/e.getZoomFactor(),o=n/e.getZoomFactor(),a=e.props.instancesSelection.getSelectedInstances(),s="touch"===e.props.screenType&&XT(r)&&KT(r)||e.keyboardShortcuts.shouldResizeProportionally();e.instancesResizer.resizeBy(a,i,o,r,s,e.keyboardShortcuts.shouldNotSnapToGrid())},e._onResizeEnd=function(){e.instancesResizer.endResize();var t=e.props.instancesSelection.getSelectedInstances();e.props.onInstancesResized(t)},e._onRotate=function(t,n){e.fpsLimiter.notifyInteractionHappened();var r=t/e.getZoomFactor(),i=n/e.getZoomFactor(),o=e.props.instancesSelection.getSelectedInstances();e.instancesRotator.rotateBy(o,r,i,e.keyboardShortcuts.shouldResizeProportionally())},e._onRotateEnd=function(){e.instancesRotator.endRotate();var t=e.props.instancesSelection.getSelectedInstances();e.props.onInstancesRotated(t)},e.clearHighlightedInstance=function(){e.highlightedInstance.setInstance(null)},e.moveSelection=function(t,n){e.fpsLimiter.notifyInteractionHappened();var r=e.props.instancesSelection.getSelectedInstances().filter((function(e){return!e.isLocked()}));r.forEach((function(e){e.setX(e.getX()+t),e.setY(e.getY()+n)})),e.props.onInstancesMoved(r)},e.zoomToFitContent=function(){var t=e.props.initialInstances;if(0!==t.getInstancesCount()){var n,r=e.instancesRenderer.getInstanceMeasurer(),i=new xS.InitialInstanceJSFunctor;i.invoke=function(e){var t=xS.wrapPointer(e,xS.InitialInstance);n?n.union(r.getInstanceAABB(t,new NT)):n=r.getInstanceAABB(t,new NT)},t.iterateOverInstances(i),i.delete(),n&&e.fitViewToRectangle(n,{adaptZoom:!0})}},e.zoomToInitialPosition=function(){var t=e.props.project.getGameResolutionWidth(),n=e.props.project.getGameResolutionHeight(),r=t/2,i=n/2;e.setZoomFactor(pT(Math.max(n,t))),e.scrollTo(r,i)},e.zoomToFitSelection=function(t){if(0!==t.length){var n=(0,Wd.Z)(t),r=n[0],i=n.slice(1),o=e.instancesRenderer.getInstanceMeasurer(),a=o.getInstanceAABB(r,new NT);i.forEach((function(e){a.union(o.getInstanceAABB(e,new NT))})),e.fitViewToRectangle(a,{adaptZoom:!0})}},e.centerViewOnLastInstance=function(t,n){if(0!==t.length){var r=e.instancesRenderer.getInstanceMeasurer().getInstanceAABB(t[t.length-1],new NT);e.fitViewToRectangle(r,{adaptZoom:!1}),n&&e.scrollBy(n[0],n[1])}},e.getLastContextMenuSceneCoordinates=function(){return e.viewPosition.toSceneCoordinates(e.lastContextMenuX,e.lastContextMenuY)},e.getLastCursorSceneCoordinates=function(){return e.viewPosition.toSceneCoordinates(e.lastCursorX,e.lastCursorY)},e.getViewPosition=function(){return e.viewPosition},e._renderScene=function(){e._unmounted||e._renderingPaused||(e.fpsLimiter.shouldUpdate()&&!(0,Kh.EU)()&&(e.canvasCursor.render(),e.grid.render(),e.highlightedInstance.render(),e.selectedInstances.render(),e.selectionRectangle.render(),e.windowBorder.render(),e.windowMask.render(),e.statusBar.render(),e.instancesRenderer.render(e.pixiRenderer,e.threeRenderer,e.viewPosition,e.pixiContainer)),e.nextFrame=requestAnimationFrame(e._renderScene))},e.pauseSceneRendering=function(){e.nextFrame&&cancelAnimationFrame(e.nextFrame),e._renderingPaused=!0,e.instancesRenderer.getPixiContainer().eventMode="none",cS()},e.restartSceneRendering=function(){e._renderingPaused=!1,e._renderScene(),e.instancesRenderer.getPixiContainer().eventMode="auto",setTimeout((function(){var e=AT.Ticker&&AT.Ticker.shared;e&&e.start()}),50)},e.getInstanceSize=function(t){return e.instancesRenderer.getInstanceMeasurer().getUnrotatedInstanceSize(t)},e}return(0,at.Z)(n,[{key:"componentDidMount",value:function(){this.canvasArea&&!this.pixiRenderer&&this._initializeCanvasAndRenderer()}},{key:"componentDidUpdate",value:function(){this.canvasArea&&!this.pixiRenderer&&this._initializeCanvasAndRenderer()}},{key:"_initializeCanvasAndRenderer",value:function(){var e=this,t=this.canvasArea;if(t){var n,r=this.props,i=r.project,o=r.onMouseMove,s=r.onMouseLeave;if(this.keyboardShortcuts=new St.ZP({shortcutCallbacks:(0,a.Z)({onMove:this.moveSelection},this.props.instancesEditorShortcutsCallbacks)}),this._showObjectInstancesIn3D=this.props.showObjectInstancesIn3D,this._showObjectInstancesIn3D){n=document.createElement("canvas");var l=new DT.WebGLRenderer({canvas:n});l.useLegacyLights=!0,l.autoClear=!1,l.setSize(this.props.width,this.props.height),this.pixiRenderer=new AT.Renderer({width:this.props.width,height:this.props.height,view:n,context:l.getContext(),clearBeforeRender:!1,preserveDrawingBuffer:!0,antialias:!1,backgroundAlpha:0,eventMode:"auto"}),this.threeRenderer=l}else this.pixiRenderer=AT.autoDetectRenderer({width:this.props.width,height:this.props.height,preserveDrawingBuffer:!0,antialias:!1,clearBeforeRender:!1,backgroundAlpha:0}),n=this.pixiRenderer.view;this.pixiRenderer.plugins.accessibility.destroy(),delete this.pixiRenderer.plugins.accessibility,t.appendChild(n),this.pixiRenderer.view.style.outline="none",this.longTouchHandler=new gS({canvas:this.pixiRenderer.view,onLongTouch:function(t){return e.props.onContextMenu(t.clientX,t.clientY)}}),this.pixiRenderer.view.onwheel=function(t){e.fpsLimiter.notifyInteractionHappened();var n=e.getZoomFactor();if(e.keyboardShortcuts.shouldZoom(t))e.zoomOnCursorBy((0,LT.$u)(-t.deltaY));else if(e.keyboardShortcuts.shouldScrollHorizontally()){var r=t.deltaY/(5*n);e.scrollBy(-r,0)}else{var i=t.deltaX/(5*n),o=t.deltaY/(5*n);e.scrollBy(i,o)}t.preventDefault()},this.pixiRenderer.view.setAttribute("tabIndex",-1),this.pixiRenderer.view.addEventListener("keydown",this.keyboardShortcuts.onKeyDown),this.pixiRenderer.view.addEventListener("keyup",this.keyboardShortcuts.onKeyUp),this.pixiRenderer.view.addEventListener("mousedown",this.keyboardShortcuts.onMouseDown),this.pixiRenderer.view.addEventListener("mouseup",this.keyboardShortcuts.onMouseUp),o&&this.pixiRenderer.view.addEventListener("mousemove",(function(e){o(e)})),s&&this.pixiRenderer.view.addEventListener("mouseout",(function(e){s(e)})),this.pixiRenderer.view.addEventListener("focusout",(function(t){e.keyboardShortcuts&&e.keyboardShortcuts.resetModifiers()})),this.pixiContainer=new AT.Container,this.backgroundArea=new AT.Container,this.backgroundArea.hitArea=new AT.Rectangle(0,0,this.props.width,this.props.height),FT(this.backgroundArea),this.backgroundArea.addEventListener("mousedown",(function(t){return e._onDownBackground(t.data.global.x,t.data.global.y,t)})),this.backgroundArea.addEventListener("mouseup",(function(t){return e._onUpBackground(t.data.global.x,t.data.global.y,t)})),this.backgroundArea.addEventListener("rightclick",(function(t){var n=t.data.originalEvent;return e._onRightClicked({offsetX:n.offsetX,offsetY:n.offsetY,x:n.clientX,y:n.clientY,ignoreSelectedObjectNamesForContextMenu:!0}),!1})),this.backgroundArea.addEventListener("touchstart",(function(t){_T(t.data&&t.data.originalEvent)||e._onDownBackground(t.data.global.x,t.data.global.y)})),this.backgroundArea.addEventListener("touchend",(function(t){_T(t.data&&t.data.originalEvent)||e._onUpBackground(t.data.global.x,t.data.global.y)})),this.backgroundArea.addEventListener("globalmousemove",(function(t){var n=t.data.global.x||0,r=t.data.global.y||0;e._onMouseMove(n,r)})),this.backgroundArea.addEventListener("panmove",(function(t){return e._onPanMove(t.deltaX,t.deltaY,t.data.global.x,t.data.global.y)})),this.backgroundArea.addEventListener("panend",(function(t){return e._onPanEnd()})),this.pixiContainer.addChild(this.backgroundArea),this.viewPosition=new RT({initialViewX:i?i.getGameResolutionWidth()/2:0,initialViewY:i?i.getGameResolutionHeight()/2:0,width:this.props.width,height:this.props.height,instancesEditorSettings:this.props.instancesEditorSettings}),this.grid=new oS({viewPosition:this.viewPosition,instancesEditorSettings:this.props.instancesEditorSettings}),this.pixiContainer.addChild(this.grid.getPixiObject()),this.pinchHandler=new BT({canvas:this.pixiRenderer.view,setZoomFactor:this.setZoomFactor,getZoomFactor:this.getZoomFactor,viewPosition:this.viewPosition}),this.canvasCursor=new dS({canvas:t,shouldMoveView:function(){return e.keyboardShortcuts.shouldMoveView()}}),this._instancesAdder=new hS({instances:this.props.initialInstances,instancesEditorSettings:this.props.instancesEditorSettings}),this._mountEditorComponents(this.props),this._renderScene(),this.props.onViewPositionChanged&&this.props.onViewPositionChanged(this.viewPosition)}}},{key:"_mountEditorComponents",value:function(e){this.highlightedInstance&&this.pixiContainer.removeChild(this.highlightedInstance.getPixiObject()),this.selectedInstances&&this.pixiContainer.removeChild(this.selectedInstances.getPixiContainer()),this.instancesRenderer&&(this.pixiContainer.removeChild(this.instancesRenderer.getPixiContainer()),this.instancesRenderer.delete()),this.selectionRectangle&&(this.pixiContainer.removeChild(this.selectionRectangle.getPixiObject()),this.selectionRectangle.delete()),this.windowBorder&&this.pixiContainer.removeChild(this.windowBorder.getPixiObject()),this.windowMask&&this.pixiContainer.removeChild(this.windowMask.getPixiObject()),this.statusBar&&this.pixiContainer.removeChild(this.statusBar.getPixiObject()),this.instancesRenderer=new zT({project:e.project,layout:e.layout,instances:e.initialInstances,viewPosition:this.viewPosition,onOverInstance:this._onOverInstance,onMoveInstance:this._onMoveInstance,onMoveInstanceEnd:this._onMoveInstanceEnd,onDownInstance:this._onDownInstance,onUpInstance:this._onUpInstance,onOutInstance:this._onOutInstance,onInstanceClicked:this._onInstanceClicked,onInstanceRightClicked:this._onInstanceRightClicked,onInstanceDoubleClicked:this._onInstanceDoubleClicked,showObjectInstancesIn3D:this._showObjectInstancesIn3D}),this.selectionRectangle=new nS({instances:e.initialInstances,instanceMeasurer:this.instancesRenderer.getInstanceMeasurer(),toSceneCoordinates:this.viewPosition.toSceneCoordinates}),this.selectedInstances=new $T({instancesSelection:this.props.instancesSelection,onResize:this._onResize,onResizeEnd:this._onResizeEnd,onRotate:this._onRotate,onRotateEnd:this._onRotateEnd,instanceMeasurer:this.instancesRenderer.getInstanceMeasurer(),toCanvasCoordinates:this.viewPosition.toCanvasCoordinates,screenType:this.props.screenType,keyboardShortcuts:this.keyboardShortcuts,onPanMove:this._onPanMove,onPanEnd:this._onPanEnd}),this.highlightedInstance=new eS({instanceMeasurer:this.instancesRenderer.getInstanceMeasurer(),toCanvasCoordinates:this.viewPosition.toCanvasCoordinates,isInstanceOf3DObject:this.props.isInstanceOf3DObject}),this.instancesResizer=new JT({instanceMeasurer:this.instancesRenderer.getInstanceMeasurer(),instancesEditorSettings:this.props.instancesEditorSettings}),this.instancesRotator=new rS(this.instancesRenderer.getInstanceMeasurer()),this.instancesMover=new iS({instanceMeasurer:this.instancesRenderer.getInstanceMeasurer(),instancesEditorSettings:this.props.instancesEditorSettings}),this.windowBorder=new aS({project:e.project,layout:e.layout,toCanvasCoordinates:this.viewPosition.toCanvasCoordinates}),this.windowMask=new sS({project:e.project,viewPosition:this.viewPosition,instancesEditorSettings:this.props.instancesEditorSettings}),this.statusBar=new uS({width:this.props.width,height:this.props.height,getLastCursorSceneCoordinates:this.getLastCursorSceneCoordinates}),this.pixiContainer.addChild(this.selectionRectangle.getPixiObject()),this.pixiContainer.addChild(this.instancesRenderer.getPixiContainer()),this.pixiContainer.addChild(this.windowBorder.getPixiObject()),this.pixiContainer.addChild(this.windowMask.getPixiObject()),this.pixiContainer.addChild(this.selectedInstances.getPixiContainer()),this.pixiContainer.addChild(this.highlightedInstance.getPixiObject()),this.pixiContainer.addChild(this.statusBar.getPixiObject())}},{key:"componentWillUnmount",value:function(){this._unmounted=!0,this.selectionRectangle&&this.selectionRectangle.delete(),this.instancesRenderer&&this.instancesRenderer.delete(),this._instancesAdder&&this._instancesAdder.unmount(),this.pinchHandler&&this.pinchHandler.unmount(),this.longTouchHandler&&this.longTouchHandler.unmount(),this.nextFrame&&cancelAnimationFrame(this.nextFrame),cS(),this.pixiContainer&&this.pixiContainer.destroy(),this.pixiRenderer&&this.pixiRenderer.destroy()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.width===this.props.width&&e.height===this.props.height||(this.pixiRenderer.resize(e.width,e.height),this.threeRenderer&&this.threeRenderer.setSize(e.width,e.height),this.viewPosition.resize(e.width,e.height),this.statusBar.resize(e.width,e.height),this.backgroundArea.hitArea=new AT.Rectangle(0,0,e.width,e.height),this.fpsLimiter.forceNextUpdate(),this._renderScene()),e.instancesEditorSettings!==this.props.instancesEditorSettings&&(this.grid.setInstancesEditorSettings(e.instancesEditorSettings),this.instancesMover.setInstancesEditorSettings(e.instancesEditorSettings),this.instancesResizer.setInstancesEditorSettings(e.instancesEditorSettings),this.windowMask.setInstancesEditorSettings(e.instancesEditorSettings),this.viewPosition.setInstancesEditorSettings(e.instancesEditorSettings),this._instancesAdder.setInstancesEditorSettings(e.instancesEditorSettings)),e.screenType!==this.props.screenType&&this.selectedInstances.setScreenType(this.props.screenType),this.props.layout===e.layout&&this.props.initialInstances===e.initialInstances&&this.props.project===e.project||this._mountEditorComponents(e),e.pauseRendering&&!this.props.pauseRendering&&this.pauseSceneRendering(),!e.pauseRendering&&this.props.pauseRendering&&this.restartSceneRendering()}},{key:"zoomOnCursorBy",value:function(e){var t=this.getLastCursorSceneCoordinates();this.setZoomFactor(this.getZoomFactor()*e);var n=this.getLastCursorSceneCoordinates();this.scrollBy(t[0]-n[0],t[1]-n[1])}},{key:"scrollBy",value:function(e,t){this.fpsLimiter.notifyInteractionHappened(),this.viewPosition.scrollBy(e,t),this.props.onViewPositionChanged&&this.props.onViewPositionChanged(this.viewPosition)}},{key:"scrollTo",value:function(e,t){this.fpsLimiter.notifyInteractionHappened(),this.viewPosition.scrollTo(e,t),this.props.onViewPositionChanged&&this.props.onViewPositionChanged(this.viewPosition)}},{key:"fitViewToRectangle",value:function(e,t){var n=t.adaptZoom,r=this.viewPosition.fitToRectangle(e);n&&this.setZoomFactor(r),this.props.onViewPositionChanged&&this.props.onViewPositionChanged(this.viewPosition)}},{key:"getBoundingClientRect",value:function(){return this.canvasArea?this.canvasArea.getBoundingClientRect():{left:0,top:0,right:0,bottom:0}}},{key:"render",value:function(){var e=this;return this.props.project?(0,d.jsx)(bS,{canDrop:function(){return!0},hover:function(t){e.fpsLimiter.notifyInteractionHappened();var n=e._instancesAdder,r=e.viewPosition,i=e.canvasArea;if(n&&i&&r){var o=t.getClientOffset(),a=o.x,s=o.y,l=i.getBoundingClientRect(),c=r.toSceneCoordinates(a-l.left,s-l.top);n.createOrUpdateTemporaryInstancesFromObjectNames(c,e.props.selectedObjectNames,e.props.selectedLayer)}},drop:function(t){e.fpsLimiter.notifyInteractionHappened();var n=e._instancesAdder,r=e.viewPosition,i=e.canvasArea;if(n&&i&&r)if(t.didDrop())n.deleteTemporaryInstances();else{var o=t.getClientOffset(),a=o.x,s=o.y,l=i.getBoundingClientRect(),c=r.toSceneCoordinates(a-l.left,s-l.top),u=n.updateTemporaryInstancePositions(c);n.commitTemporaryInstances(),e.props.onInstancesAdded(u)}},children:function(t){var n=t.connectDropTarget,r=t.isOver;return e._instancesAdder&&!r&&e._instancesAdder.deleteTemporaryInstances(),n((0,d.jsx)("div",{ref:function(t){return e.canvasArea=t},style:vS.canvasArea,id:mS}))}}):null}}]),n}(l.Component),jS={display:"flex"},yS={display:"flex",alignItems:"center",paddingLeft:4,paddingRight:4},ZS=function(e){return(0,d.jsx)("div",{id:e.id,style:(0,a.Z)((0,a.Z)({},jS),{},{alignItems:e.alignItems}),children:e.children})},kS=function(e){return(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},yS),{},{flex:e.expand?1:void 0},e.style),children:e.children})},wS=["forcedColor"],TS=function(e){var t=e.forcedColor,n=(0,Bi.Z)(e,wS),r=l.useMemo((function(){return t?(0,R.Z)({badge:{backgroundColor:t}}):function(){}}),[t])();return(0,d.jsx)(Tc.Z,(0,a.Z)((0,a.Z)({},n),{},{classes:r}))},SS=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.82935 3.83804C5.39722 4.23619 5.15563 4.82786 5.16706 5.62218C5.17848 6.37508 5.39213 6.85711 5.86513 7.36172C5.87329 7.37041 5.88144 7.3791 5.8896 7.38778C6.14834 7.66335 6.40538 7.9371 6.57841 8.30629C6.7614 8.69671 6.83385 9.15028 6.83356 9.77797C6.83343 10.0541 6.60946 10.2779 6.33332 10.2777C6.05718 10.2776 5.83343 10.0536 5.83356 9.7775C5.83382 9.22001 5.76768 8.93284 5.67293 8.73067C5.57371 8.51898 5.42477 8.35385 5.13572 8.04579C4.49779 7.36524 4.18245 6.64653 4.16718 5.63715C4.15254 4.62416 4.46642 3.73406 5.15174 3.10262C5.83056 2.47716 6.80717 2.16663 7.99999 2.16663C9.19304 2.16663 10.1699 2.47714 10.8488 3.1026C11.5343 3.7341 11.8481 4.62398 11.8328 5.63712C11.8181 6.64672 11.5022 7.36518 10.8646 8.04543C10.5761 8.35353 10.4272 8.51874 10.3279 8.73067C10.233 8.93308 10.1667 9.22047 10.1664 9.77797C10.1663 10.0541 9.94234 10.2779 9.6662 10.2777C9.39005 10.2776 9.1663 10.0536 9.16643 9.7775C9.16672 9.14982 9.23954 8.69647 9.42241 8.30629C9.59521 7.9376 9.85155 7.66405 10.1096 7.38872C10.1179 7.37979 10.1263 7.37085 10.1347 7.3619C10.6079 6.85708 10.822 6.37487 10.8329 5.62234C10.8449 4.82808 10.6034 4.23619 10.1713 3.83806C9.73257 3.43389 9.02942 3.16663 7.99999 3.16663C6.9709 3.16663 6.26801 3.43387 5.82935 3.83804ZM5.83356 11.5555C5.83356 11.2794 6.05741 11.0555 6.33356 11.0555H9.66643C9.94257 11.0555 10.1664 11.2794 10.1664 11.5555C10.1664 11.8317 9.94257 12.0555 9.66643 12.0555H6.33356C6.05741 12.0555 5.83356 11.8317 5.83356 11.5555ZM6.38903 13.3333C6.38903 13.0572 6.61289 12.8333 6.88903 12.8333H9.11095C9.38709 12.8333 9.61095 13.0572 9.61095 13.3333C9.61095 13.6094 9.38709 13.8333 9.11095 13.8333H6.88903C6.61289 13.8333 6.38903 13.6094 6.38903 13.3333Z",fill:"currentColor"})}))})),PS=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99998 6.33337C7.0795 6.33337 6.33331 7.07957 6.33331 8.00004C6.33331 8.92052 7.0795 9.66671 7.99998 9.66671C8.92045 9.66671 9.66665 8.92052 9.66665 8.00004C9.66665 7.07957 8.92045 6.33337 7.99998 6.33337ZM5.33331 8.00004C5.33331 6.52728 6.52722 5.33337 7.99998 5.33337C9.47274 5.33337 10.6666 6.52728 10.6666 8.00004C10.6666 9.4728 9.47274 10.6667 7.99998 10.6667C6.52722 10.6667 5.33331 9.4728 5.33331 8.00004Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99998 1.33337C8.27612 1.33337 8.49998 1.55723 8.49998 1.83337V2.83337C8.49998 3.10952 8.27612 3.33337 7.99998 3.33337C7.72384 3.33337 7.49998 3.10952 7.49998 2.83337V1.83337C7.49998 1.55723 7.72384 1.33337 7.99998 1.33337Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.8535 4.14648C12.0488 4.34174 12.0488 4.65832 11.8535 4.85358L11.0641 5.64302C10.8689 5.83829 10.5523 5.8383 10.357 5.64304C10.1618 5.44779 10.1618 5.1312 10.357 4.93594L11.1464 4.1465C11.3417 3.95123 11.6583 3.95122 11.8535 4.14648Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.6666 8.00011C12.6666 7.72396 12.8905 7.50011 13.1666 7.50011H14.1666C14.4428 7.50011 14.6666 7.72396 14.6666 8.00011C14.6666 8.27625 14.4428 8.50011 14.1666 8.50011H13.1666C12.8905 8.50011 12.6666 8.27625 12.6666 8.00011Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.357 10.3572C10.5523 10.1619 10.8689 10.1619 11.0641 10.3572L11.8535 11.1466C12.0488 11.3418 12.0488 11.6584 11.8535 11.8537C11.6583 12.0489 11.3417 12.0489 11.1464 11.8537L10.357 11.0643C10.1618 10.869 10.1618 10.5524 10.357 10.3572Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99998 12.6667C8.27612 12.6667 8.49998 12.8906 8.49998 13.1667V14.1667C8.49998 14.4428 8.27612 14.6667 7.99998 14.6667C7.72384 14.6667 7.49998 14.4428 7.49998 14.1667V13.1667C7.49998 12.8906 7.72384 12.6667 7.99998 12.6667Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.64294 10.3571C5.8382 10.5524 5.83819 10.8689 5.64293 11.0642L4.8535 11.8536C4.65823 12.0489 4.34165 12.0489 4.14639 11.8536C3.95113 11.6583 3.95114 11.3417 4.14641 11.1465L4.93583 10.3571C5.1311 10.1618 5.44768 10.1618 5.64294 10.3571Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.33331 8.00011C1.33331 7.72396 1.55717 7.50011 1.83331 7.50011H2.83331C3.10946 7.50011 3.33331 7.72396 3.33331 8.00011C3.33331 8.27625 3.10946 8.50011 2.83331 8.50011H1.83331C1.55717 8.50011 1.33331 8.27625 1.33331 8.00011Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.14637 4.1465C4.34164 3.95124 4.65822 3.95125 4.85348 4.14652L5.64291 4.93598C5.83817 5.13125 5.83816 5.44783 5.64289 5.64309C5.44762 5.83835 5.13104 5.83834 4.93578 5.64307L4.14636 4.85361C3.9511 4.65834 3.95111 4.34176 4.14637 4.1465Z",fill:"currentColor"})]}))})),ES=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.53802 2.71043C7.40791 2.65211 7.25908 2.65211 7.12897 2.71043L2.30602 4.87244C2.26414 4.89011 2.22516 4.91331 2.19001 4.94115C2.16548 4.96055 2.14295 4.98211 2.12265 5.00549C2.04635 5.09327 2.00016 5.20792 2.00016 5.33335V10.6537C1.99773 10.7486 2.02255 10.8418 2.07042 10.9224C2.11139 10.9914 2.16925 11.0511 2.24136 11.0946C2.26176 11.1069 2.28311 11.1179 2.30528 11.1273L7.12893 13.2896C7.38091 13.4026 7.67675 13.2899 7.78971 13.0379C7.83172 12.9442 7.84252 12.8444 7.82655 12.7502C7.83112 12.7231 7.8335 12.6951 7.8335 12.6667V7.82382L11.7002 6.09047V8.66669C11.7002 8.94283 11.9241 9.16669 12.2002 9.16669C12.4763 9.16669 12.7002 8.94283 12.7002 8.66669V5.33335C12.7002 5.08889 12.5248 4.8854 12.2929 4.84193L7.53802 2.71043ZM6.8335 12.0613L3.00016 10.3429V6.10543L6.8335 7.82382V12.0613ZM7.3335 6.95208L3.72249 5.33335L7.3335 3.71463L10.9445 5.33335L7.3335 6.95208Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.8968 9.94616C14.5265 9.94616 15.029 10.0889 15.4045 10.3744C15.7839 10.6599 15.9736 11.186 15.9736 11.9526C15.9736 12.7035 15.7878 13.2334 15.4162 13.5424C15.0447 13.8475 14.5734 14 14.0024 14H12.8994V9.94616H13.8968ZM14.6125 10.6384C14.4522 10.5641 14.2586 10.527 14.0317 10.527H13.6738V13.4192H14.0552C14.3993 13.4192 14.6692 13.3136 14.8648 13.1024C15.0603 12.8873 15.1581 12.504 15.1581 11.9526C15.1581 11.5693 15.1073 11.274 15.0056 11.0667C14.9078 10.8555 14.7768 10.7127 14.6125 10.6384Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M10.7004 9.98136C10.9664 9.98136 11.1952 10.0302 11.3868 10.128C11.5824 10.2258 11.731 10.3588 11.8327 10.527C11.9344 10.6951 11.9852 10.8829 11.9852 11.0902C11.9852 11.3131 11.9363 11.5282 11.8385 11.7355C11.7447 11.9389 11.5863 12.1657 11.3633 12.416C11.1404 12.6663 10.8138 12.9968 10.3836 13.4075H12.0732L11.9911 14H9.53294V13.4486C10.0336 12.9401 10.3914 12.5646 10.6065 12.3222C10.8256 12.0758 10.98 11.8665 11.07 11.6944C11.1639 11.5184 11.2108 11.3366 11.2108 11.1488C11.2108 10.9689 11.158 10.8281 11.0524 10.7264C10.9507 10.6247 10.8138 10.5739 10.6417 10.5739C10.4892 10.5739 10.3543 10.6071 10.2369 10.6736C10.1235 10.7362 10.0042 10.8418 9.87907 10.9904L9.42147 10.6267C9.75391 10.1965 10.1802 9.98136 10.7004 9.98136Z",fill:"currentColor"})]}))})),IS=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.53802 2.71043C7.40791 2.65211 7.25908 2.65211 7.12897 2.71043L2.30602 4.87244C2.26414 4.89011 2.22516 4.91331 2.19001 4.94115C2.16548 4.96055 2.14295 4.98211 2.12265 5.00549C2.04635 5.09327 2.00016 5.20792 2.00016 5.33335V10.6537C1.99773 10.7486 2.02255 10.8418 2.07042 10.9224C2.11139 10.9914 2.16925 11.0511 2.24136 11.0946C2.26176 11.1069 2.28311 11.1179 2.30528 11.1273L7.12893 13.2896C7.38091 13.4026 7.67675 13.2899 7.78971 13.0379C7.83172 12.9442 7.84252 12.8444 7.82655 12.7502C7.83112 12.7231 7.8335 12.6951 7.8335 12.6667V7.82382L11.7002 6.09047V8.66669C11.7002 8.94283 11.9241 9.16669 12.2002 9.16669C12.4763 9.16669 12.7002 8.94283 12.7002 8.66669V5.33335C12.7002 5.08889 12.5248 4.88541 12.2929 4.84193L7.53802 2.71043ZM6.8335 7.82382L3.00016 6.10543V10.3429L6.8335 12.0613V7.82382ZM7.3335 6.95208L3.72249 5.33335L7.3335 3.71463L10.9445 5.33335L7.3335 6.95208Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.914 9.94616C14.5436 9.94616 15.0462 10.0889 15.4217 10.3744C15.8011 10.6599 15.9908 11.186 15.9908 11.9526C15.9908 12.7035 15.805 13.2334 15.4334 13.5424C15.0619 13.8475 14.5906 14 14.0196 14H12.9166V9.94616H13.914ZM14.6297 10.6384C14.4693 10.5641 14.2757 10.527 14.0489 10.527H13.691V13.4192H14.0724C14.4165 13.4192 14.6864 13.3136 14.882 13.1024C15.0775 12.8873 15.1753 12.504 15.1753 11.9526C15.1753 11.5693 15.1244 11.274 15.0228 11.0667C14.925 10.8555 14.794 10.7127 14.6297 10.6384Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M10.6945 9.98136C10.9566 9.98136 11.1815 10.0263 11.3692 10.1163C11.5608 10.2062 11.7036 10.3275 11.7975 10.48C11.8952 10.6326 11.9441 10.8007 11.9441 10.9846C11.9441 11.2231 11.8757 11.4226 11.7388 11.583C11.6019 11.7394 11.4142 11.8489 11.1756 11.9115C11.4376 11.935 11.6527 12.0288 11.8209 12.1931C11.9891 12.3574 12.0732 12.5842 12.0732 12.8736C12.0732 13.1005 12.0145 13.3058 11.8972 13.4896C11.7838 13.6734 11.6195 13.8201 11.4044 13.9296C11.1893 14.0352 10.9351 14.088 10.6417 14.088C10.102 14.088 9.67568 13.8983 9.36279 13.519L9.77933 13.12C9.9123 13.253 10.0433 13.3508 10.1724 13.4134C10.3015 13.472 10.4442 13.5014 10.6007 13.5014C10.8119 13.5014 10.98 13.4427 11.1052 13.3254C11.2343 13.2041 11.2988 13.0418 11.2988 12.8384C11.2988 12.6116 11.2382 12.4493 11.1169 12.3515C10.9996 12.2537 10.8236 12.2048 10.5889 12.2048H10.278L10.366 11.671H10.5772C10.7688 11.671 10.9214 11.6182 11.0348 11.5126C11.1521 11.407 11.2108 11.2603 11.2108 11.0726C11.2108 10.9122 11.158 10.787 11.0524 10.6971C10.9468 10.6032 10.806 10.5563 10.63 10.5563C10.4775 10.5563 10.3386 10.5856 10.2135 10.6443C10.0883 10.699 9.96315 10.7851 9.83799 10.9024L9.45666 10.4859C9.81257 10.1495 10.2252 9.98136 10.6945 9.98136Z",fill:"currentColor"})]}))})),MS=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.4045 3.70769C11.029 3.42217 10.5265 3.27942 9.89677 3.27942H8.89944V7.33329H10.0024C10.5734 7.33329 11.0447 7.18075 11.4162 6.87569C11.7878 6.56671 11.9736 6.03675 11.9736 5.28582C11.9736 4.51924 11.7839 3.9932 11.4045 3.70769ZM10.8648 6.43569C10.6692 6.64689 10.3994 6.75249 10.0552 6.75249H9.67384V3.86022H10.0317C10.2586 3.86022 10.4521 3.89737 10.6125 3.97169C10.7768 4.046 10.9078 4.18875 11.0056 4.39995C11.1073 4.60724 11.1581 4.90253 11.1581 5.28582C11.1581 5.83729 11.0603 6.22057 10.8648 6.43569Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M6.7004 3.31462C6.96636 3.31462 7.19516 3.36351 7.3868 3.46129C7.58236 3.55906 7.73098 3.69204 7.83267 3.86022C7.93436 4.0284 7.9852 4.21613 7.9852 4.42342C7.9852 4.64635 7.93631 4.86146 7.83853 5.06875C7.74467 5.27213 7.58627 5.49897 7.36333 5.74929C7.1404 5.9996 6.81382 6.33009 6.3836 6.74075H8.0732L7.99107 7.33329H5.53293V6.78182C6.03356 6.27337 6.39142 5.89791 6.60653 5.65542C6.82556 5.40902 6.98005 5.19977 7.07 5.02769C7.16387 4.85169 7.2108 4.66982 7.2108 4.48209C7.2108 4.30217 7.158 4.16137 7.0524 4.05969C6.95071 3.958 6.81382 3.90715 6.64173 3.90715C6.4892 3.90715 6.35427 3.9404 6.23693 4.00689C6.12351 4.06946 6.00422 4.17506 5.87907 4.32369L5.42147 3.95995C5.75391 3.52973 6.18022 3.31462 6.7004 3.31462Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.4217 9.57436C11.0462 9.28885 10.5436 9.1461 9.91395 9.1461H8.91662V13.2H10.0196C10.5906 13.2 11.0619 13.0474 11.4334 12.7424C11.805 12.4334 11.9908 11.9034 11.9908 11.1525C11.9908 10.3859 11.8011 9.85988 11.4217 9.57436ZM10.882 12.3024C10.6864 12.5136 10.4165 12.6192 10.0724 12.6192H9.69102V9.7269H10.0489C10.2757 9.7269 10.4693 9.76405 10.6297 9.83836C10.794 9.91268 10.925 10.0554 11.0228 10.2666C11.1244 10.4739 11.1753 10.7692 11.1753 11.1525C11.1753 11.704 11.0775 12.0873 10.882 12.3024Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M7.36919 9.31623C7.18146 9.22627 6.95657 9.1813 6.69453 9.1813C6.22519 9.1813 5.81257 9.34947 5.45666 9.68583L5.83799 10.1024C5.96315 9.98503 6.0883 9.89899 6.21346 9.84423C6.33862 9.78556 6.47746 9.75623 6.62999 9.75623C6.80599 9.75623 6.94679 9.80316 7.05239 9.89703C7.15799 9.98699 7.21079 10.1121 7.21079 10.2725C7.21079 10.4602 7.15213 10.6069 7.03479 10.7125C6.92137 10.8181 6.76884 10.8709 6.57719 10.8709H6.36599L6.27799 11.4048H6.58893C6.82359 11.4048 6.99959 11.4537 7.11693 11.5514C7.23817 11.6492 7.29879 11.8115 7.29879 12.0384C7.29879 12.2417 7.23426 12.4041 7.10519 12.5253C6.98004 12.6426 6.81186 12.7013 6.60066 12.7013C6.44422 12.7013 6.30146 12.672 6.17239 12.6133C6.04333 12.5507 5.9123 12.4529 5.77933 12.32L5.36279 12.7189C5.67568 13.0983 6.10199 13.288 6.64173 13.288C6.93506 13.288 7.18928 13.2352 7.40439 13.1296C7.6195 13.0201 7.78377 12.8734 7.89719 12.6896C8.01453 12.5057 8.07319 12.3004 8.07319 12.0736C8.07319 11.7841 7.9891 11.5573 7.82093 11.393C7.65275 11.2288 7.43764 11.1349 7.17559 11.1114C7.41417 11.0489 7.6019 10.9393 7.73879 10.7829C7.87568 10.6225 7.94413 10.4231 7.94413 10.1845C7.94413 10.0007 7.89524 9.8325 7.79746 9.67996C7.70359 9.52743 7.56084 9.40619 7.36919 9.31623Z",fill:"currentColor"})]}))})),LS=(0,Zt.x)("layers-list"),AS={outline:"1px solid white"},FS=function(e){var t=e.id,n=e.layer,r=e.isSelected,i=e.onSelect,o=e.nameError,s=e.onBlur,c=e.onRemove,u=e.isVisible,p=e.isLocked,h=e.onChangeLockState,g=e.effectsCount,x=e.onEditEffects,m=e.onChangeVisibility,v=e.onBeginDrag,C=e.onDrop,j=e.width,y=e.onEdit,Z=l.useContext(f.Z),k=n.getName(),w=n.isLightingLayer(),T=n.getRenderingType(),S=w?(0,d.jsx)(SS,{}):"2d"===T?(0,d.jsx)(ES,{}):"3d"===T?(0,d.jsx)(IS,{}):"2d+3d"===T?(0,d.jsx)(MS,{}):(0,d.jsx)(bt.Z,{}),P=!k;return(0,d.jsx)(b.I18n,{children:function(e){var f=e.i18n;return(0,d.jsx)(LS,{beginDrag:function(){return v(),{}},canDrag:function(){return!0},canDrop:function(){return!0},drop:C,children:function(e){var n=e.connectDragSource,v=e.connectDropTarget,C=e.isOver;e.canDrop;return v((0,d.jsxs)("div",{children:[C&&(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},AS),{},{outlineColor:Z.dropIndicator.canDrop})}),(0,d.jsxs)(ZS,{id:t,children:[(0,d.jsx)(kS,{children:n((0,d.jsx)("span",{id:"layer-drag-handle",children:(0,d.jsx)(yt.Z,{})}))}),(0,d.jsx)(kS,{children:(0,d.jsx)(Ze.ZP,{title:(0,d.jsx)(b.Trans,{id:"Layer where instances are added by default"}),children:(0,d.jsx)(_y.Z,{checked:r,onChange:i,size:"small",id:"layer-selected-".concat(r?"checked":"unchecked")})})}),(0,d.jsx)(kS,{expand:!0,children:(0,d.jsx)(An.Z,{margin:"none",value:P?f._({id:"Base layer"}):k,id:"layer-name",errorText:o,disabled:P,onChange:s,commitOnBlur:!0,fullWidth:!0})}),(0,d.jsx)(kS,{children:j<350?(0,d.jsx)(Ig.Z,{element:(0,d.jsx)(M.Z,{size:"small",children:(0,d.jsx)(Ls.Z,{})}),buildMenuTemplate:function(e){return[{label:w?e._({id:"Edit lighting properties"}):e._({id:"Edit properties"}),click:y},{label:e._({id:"Edit effects ({effectsCount})",values:{effectsCount:g}}),click:x},{type:"checkbox",label:e._({id:"Visible"}),checked:u,click:function(){return m(!u)}},{type:"checkbox",label:e._({id:"Locked"}),enabled:u,checked:p||!u,click:function(){return h(!p)}},{type:"separator"},{label:e._({id:"Delete"}),enabled:!P,click:c}]}}):(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(Xa.Z,{id:"layer-visibility",paddingSize:"small",checked:u,checkedIcon:(0,d.jsx)(Ki.Z,{}),uncheckedIcon:(0,d.jsx)(Ji,{}),onCheck:function(e,t){return m(t)},tooltipOrHelperText:u?(0,d.jsx)(b.Trans,{id:"Hide layer"}):(0,d.jsx)(b.Trans,{id:"Show layer"})}),(0,d.jsx)(Xa.Z,{id:"layer-lock",paddingSize:"small",disabled:!u,checked:p||!u,checkedIcon:(0,d.jsx)(Qi,{}),uncheckedIcon:(0,d.jsx)($i,{}),onCheck:function(e,t){return h(t)},tooltipOrHelperText:p?(0,d.jsx)(b.Trans,{id:"Unlock layer"}):(0,d.jsx)(b.Trans,{id:"Lock layer"})}),(0,d.jsx)(M.Z,{size:"small",onClick:x,tooltip:{id:"Edit effects ({effectsCount})",values:{effectsCount:g}},children:(0,d.jsx)(TS,{badgeContent:g,color:"primary",children:(0,d.jsx)(PS,{})})}),(0,d.jsx)(M.Z,{size:"small",onClick:y,tooltip:w?{id:"Edit lighting properties"}:{id:"Edit properties"},children:S}),(0,d.jsx)(M.Z,{size:"small",onClick:c,disabled:P,tooltip:{id:"Delete the layer"},children:(0,d.jsx)(vn.Z,{})})]})})]})]}))}},n.ptr)}})},OS=function(e){var t=e.layout,n=e.onBackgroundColorChanged;return(0,d.jsx)(b.I18n,{children:function(e){var r=e.i18n;return(0,d.jsxs)(ZS,{children:[(0,d.jsx)(kS,{children:(0,d.jsx)(yt.Z,{disabled:!0})}),(0,d.jsx)(kS,{expand:!0,children:(0,d.jsx)($r.ZP,{fullWidth:!0,value:r._({id:"Background color"}),margin:"none",disabled:!0})}),(0,d.jsx)(kS,{children:(0,d.jsx)(If.Z,{disableAlpha:!0,color:{r:t.getBackgroundColorRed(),g:t.getBackgroundColorGreen(),b:t.getBackgroundColorBlue(),a:255},onChangeComplete:function(e){t.setBackgroundColor(e.rgb.r,e.rgb.g,e.rgb.b),n()}})})]})}})},RS={flexContainer:{display:"flex",flex:1,position:"relative"}},DS=function(e){var t=e.children;return(0,d.jsx)(xt.Z,{bounds:!0,children:function(e){var n=e.contentRect,r=e.measureRef;return(0,d.jsx)("div",{style:RS.flexContainer,ref:r,children:!!n&&!!n.bounds&&t({width:n.bounds.width,height:n.bounds.height})})}})},_S=n.g.gd,BS=Lh("layers-list"),NS=function(e,t){var n=t.getEffects();return"2d"===t.getRenderingType()?nw(e,n):"3d"===t.getRenderingType()?rw(e,n):n.getEffectsCount()},US=function(e){var t=(0,Pt.Z)(),n=l.useContext(f.Z),i=l.useState({}),o=(0,s.Z)(i,2),c=o[0],u=o[1],p=l.useRef(null),h=e.project,g=e.layersContainer,x=e.onEditEffects,m=e.onEdit,v=e.width,C=e.onLayerRenamed,j=e.onRemoveLayer,y=e.unsavedChanges,Z=l.useCallback((function(){y&&y.triggerUnsavedChanges(),t()}),[t,y]),k=l.useCallback((function(e){var t=p.current;null!==t&&(e!==t&&(g.moveLayer(t,e<t?e+1:e),Z()),p.current=null)}),[g,Z]),w=g.getLayersCount(),T=(0,Et.mapReverseFor)(0,w,(function(t){var n=g.getLayerAt(t),i=n.getName();return(0,d.jsx)(FS,{id:"layer-".concat(t),layer:n,isSelected:e.selectedLayer===i,onSelect:function(){return e.onSelectLayer(i)},nameError:c[i],effectsCount:NS(h.getCurrentPlatform(),n),onEditEffects:function(){return x(n)},onEdit:function(){return m(n)},onBeginDrag:function(){p.current=t},onDrop:function(){return k(t)},onBlur:function(e){(u((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,r.Z)({},i,null))})),i!==e)&&(g.hasLayerNamed(e)?u((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,r.Z)({},i,(0,d.jsx)(b.Trans,{id:"The name {newName} is already taken",values:{newName:e}})))})):(g.getLayer(i).setName(e),_S.WholeProjectRefactorer.renameLayer(h,g,i,e),C(),Z()))},onRemove:function(){j(i,(function(e){e&&(g.removeLayer(i),Z())}))},isVisible:n.getVisibility(),onChangeVisibility:function(e){n.setVisibility(e),Z()},isLocked:n.isLocked(),onChangeLockState:function(e){n.setLocked(e),Z()},width:v},"layer-".concat(n.ptr))}));return(0,d.jsxs)(L.sg,{noMargin:!0,expand:!0,children:[T,(0,d.jsx)(BS,{canDrop:function(){return!0},drop:function(){k(-1)},children:function(e){var t=e.connectDropTarget,r=e.isOver;e.canDrop;return t((0,d.jsxs)("div",{children:[r&&(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},AS),{},{outlineColor:n.dropIndicator.canDrop})}),(0,d.jsx)(OS,{layout:g,onBackgroundColorChanged:Z})]}))}})]})},HS=l.forwardRef((function(e,t){var n=(0,Pt.Z)();l.useImperativeHandle(t,(function(){return{forceUpdate:n}}));var r=function(){var t=e.layersContainer,n=(0,It.Z)("Lighting",(function(e){return t.hasLayerNamed(e)}));t.insertNewLayer(n,t.getLayersCount());var r=t.getLayer(n);r.setLightingLayer(!0),r.setFollowBaseLayerCamera(!0),r.setAmbientLightColor(200,200,200),i(),e.onCreateLayer()},i=function(){e.unsavedChanges&&e.unsavedChanges.triggerUnsavedChanges(),n()},o=e.layersContainer.ptr,a=function(e){var t=e.getLayersCount();return(0,Et.mapReverseFor)(0,t,(function(t){return e.getLayerAt(t).isLightingLayer()})).filter(Boolean).length>0}(e.layersContainer);return(0,d.jsx)(is,{children:(0,d.jsxs)(Tt.Z,{autoHideScrollbar:!0,children:[(0,d.jsx)(DS,{children:function(t){var n=t.width;return(0,d.jsx)(US,{selectedLayer:e.selectedLayer,onSelectLayer:e.onSelectLayer,project:e.project,layersContainer:e.layersContainer,onEditEffects:e.onEditLayerEffects,onEdit:e.onEditLayer,onRemoveLayer:e.onRemoveLayer,onLayerRenamed:e.onLayerRenamed,unsavedChanges:e.unsavedChanges,width:n},o)}}),(0,d.jsx)(L.sg,{children:(0,d.jsx)(L.x1,{justifyContent:"flex-end",expand:!0,children:(0,d.jsx)(VZ.Z,{label:(0,d.jsx)(b.Trans,{id:"Add a layer"}),id:"add-layer-button",primary:!0,onClick:function(){var t=e.layersContainer,n=(0,It.Z)("Layer",(function(e){return t.hasLayerNamed(e)}));t.insertNewLayer(n,t.getLayersCount());var r=t.getLayer(n);Zi(r),i(),e.onCreateLayer()},icon:(0,d.jsx)(vt.Z,{}),buildMenuTemplate:function(e){return[{label:e._({id:"Add lighting layer"}),enabled:!a,click:r}]}})})})]})})})),VS=l.forwardRef((function(e,t){return(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Layers list"}),scope:"scene-editor-layers-list",children:(0,d.jsx)(HS,(0,a.Z)({ref:t},e))})})),zS=n(9215),WS=n.n(zS),GS=["wrappedEditorRef"],YS=200,qS=1e3/60,XS={container:{overflow:"hidden"}},KS=function(){},JS=function(e){var t=e.wrappedEditorRef,n=(0,Bi.Z)(e,GS),r=l.useContext(se.ZP).values,i=(0,mC.t)(),o=l.useRef(null),s=l.useRef(null),c=l.useRef(null),u=l.useRef(null),p=l.useRef(null),f=l.useRef(!1),h=l.useRef(null),g=l.useRef(!1),x=l.useRef(0),m=l.useRef(0),v=l.useRef(-5e3),C=l.useRef(5e3),j=l.useRef(-5e3),y=l.useRef(5e3),Z=l.useRef(0),k=l.useRef(0),w=(0,Pt.Z)(),T=l.useMemo((function(){return new NT}),[]);if(o.current){var S=o.current.getBoundingClientRect();T.set({left:S.left,top:S.top,right:S.right-50,bottom:S.bottom-50})}var P=l.useCallback((function(){h.current&&clearTimeout(h.current),h.current=setTimeout((function(){i.current&&(f.current=!1,w())}),1500)}),[w,i]),E=(0,Ea.N)((function(){P()}),500),I=WS()((function(){f.current||(f.current=!0,w()),h.current&&(clearTimeout(h.current),h.current=null)}),1e3,{leading:!0,trailing:!1}),M=WS()(P,1e3,{leading:!0,trailing:!1}),L=l.useCallback((function(e){o.current&&(!T.containsPoint(e.clientX,e.clientY)?(h.current&&clearTimeout(h.current),f.current||I()):!g.current&&f.current&&M())}),[T,M,I]),A=l.useCallback((function(e,t){return WS()((function(n){if(Z.current){var r=n.clientX-e,i=(C.current-v.current)/Z.current,a=t+r*i;x.current=a,o.current&&o.current.scrollTo(a,m.current),w()}else console.error("canvasWidth not initialized")}),qS,{leading:!1,trailing:!0})}),[w]),F=l.useCallback((function(e,t){return WS()((function(n){if(k.current){var r=n.clientY-e,i=(y.current-j.current)/k.current,a=t+r*i;m.current=a,o.current&&o.current.scrollTo(x.current,a),w()}else console.error("canvasHeight not initialized")}),qS,{leading:!1,trailing:!0})}),[w]),O=l.useCallback((function(e){return function t(n){g.current=!1,n.target!==s.current&&n.target!==c.current&&P(),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}}),[P]),R=l.useCallback((function(e){return function t(n){g.current=!1,n.target!==u.current&&n.target!==p.current&&P(),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}}),[P]),D=l.useCallback((function(e){g.current=!0;var t=e.clientX,n=A(t,x.current),r=O(n);document.addEventListener("mousemove",n),document.addEventListener("mouseup",r)}),[A,O]),_=l.useCallback((function(e){g.current=!0;var t=e.clientY,n=F(t,m.current),r=R(n);document.addEventListener("mousemove",n),document.addEventListener("mouseup",r)}),[F,R]);l.useEffect((function(){var e=c.current,t=p.current;if(e&&t)return e.addEventListener("mousedown",D),t.addEventListener("mousedown",_),function(){e.removeEventListener("mousedown",D),t.removeEventListener("mousedown",_)}}),[D,_]);var B=l.useCallback((function(e){var t=e.newXValue,n=e.newYValue,r=e.newWidth,i=e.newHeight;C.current=Math.max(Math.abs(t)+100,C.current),y.current=Math.max(Math.abs(n)+100,y.current),v.current=-C.current,j.current=-y.current,x.current=t,m.current=n,Z.current=r,k.current=i,f.current||(f.current=!0),E(),w()}),[w,E]),N=l.useCallback((function(e){return WS()((function(){e&&B({newXValue:e.getViewX(),newYValue:e.getViewY(),newWidth:e.getWidth(),newHeight:e.getHeight()})}),qS,{leading:!1,trailing:!0})()}),[B]),U=function(e){h.current&&clearTimeout(h.current)},H=function(e){g.current||P()},V="calc(100% - ".concat(YS,"px - ").concat(8,"px)"),z="calc(".concat((x.current-v.current)/(C.current-v.current)*100+"%"," - ").concat(YS,"px / 2)"),W="max(min(".concat(z,", ").concat(V,"), ").concat("0%",")"),G="calc(100% - ".concat(YS,"px - ").concat(8,"px)"),Y="calc(".concat((m.current-j.current)/(y.current-j.current)*100+"%"," - ").concat(YS,"px / 2)"),q="max(min(".concat(Y,", ").concat(G,"), ").concat("0%",")"),X=(0,Gr.BF)();return(0,d.jsx)(DS,{children:function(e){var i=e.width,l=e.height;return(0,d.jsxs)("div",{style:XS.container,children:[void 0!==i&&void 0!==l&&(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Instances editor"}),scope:"scene-editor-canvas",children:(0,d.jsx)(CS,(0,a.Z)({onViewPositionChanged:"touch"!==X?N:KS,ref:function(e){t&&t(e),o.current=e},width:i,height:l,screenType:X,onMouseMove:L,onMouseLeave:function(e){var t=e.relatedTarget;!g.current&&t&&t.className&&"string"===typeof t.className&&!t.className.includes("canvas-scrollbar-thumb")&&P()},showObjectInstancesIn3D:r.use3DEditor},n))}),"touch"!==X&&(0,d.jsx)("div",{style:{visibility:f.current?"visible":"hidden"},className:"canvas-vertical-scrollbar-track",ref:u,children:(0,d.jsx)("div",{style:{top:q},className:"canvas-scrollbar-thumb canvas-vertical-scrollbar-thumb",ref:p,onMouseEnter:U,onMouseLeave:H})}),"touch"!==X&&(0,d.jsx)("div",{style:{visibility:f.current?"visible":"hidden"},className:"canvas-horizontal-scrollbar-track",ref:s,children:(0,d.jsx)("div",{style:{marginLeft:W},className:"canvas-scrollbar-thumb canvas-horizontal-scrollbar-thumb",ref:c,onMouseEnter:U,onMouseLeave:H})})]})}})},QS=n(18624),$S=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00002 3.66663C5.60679 3.66663 3.66669 5.60673 3.66669 7.99996C3.66669 10.3932 5.60679 12.3333 8.00002 12.3333C10.3933 12.3333 12.3334 10.3932 12.3334 7.99996C12.3334 5.60673 10.3933 3.66663 8.00002 3.66663ZM2.66669 7.99996C2.66669 5.05444 5.0545 2.66663 8.00002 2.66663C10.9456 2.66663 13.3334 5.05445 13.3334 7.99996C13.3334 10.9455 10.9456 13.3333 8.00002 13.3333C5.05451 13.3333 2.66669 10.9455 2.66669 7.99996Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33335 7.99996C5.33335 7.72382 5.55721 7.49996 5.83335 7.49996H10.1667C10.4428 7.49996 10.6667 7.72382 10.6667 7.99996C10.6667 8.2761 10.4428 8.49996 10.1667 8.49996H5.83335C5.55721 8.49996 5.33335 8.2761 5.33335 7.99996Z",fill:"currentColor"})]}))})),eP=n.g.gd,tP=400,nP=80,rP=40,iP=50,oP={container:{flex:1,display:"flex",flexDirection:"column",alignItems:"stretch"},tableContainer:{flex:1,overflowX:"auto",overflowY:"hidden"}},aP=function(e,t,n){return(e=e.toLowerCase())<(t=t.toLowerCase())?1*n:e>t?-1*n:0},sP=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={searchText:"",sortBy:"",sortDirection:hr.Sr.ASC},e.renderedRows=[],e._searchBar=l.createRef(),e._keyboardShortcuts=new St.ZP({isActive:function(){return!1},shortcutCallbacks:{}}),e._onRowClick=function(t){var n=t.index;e.renderedRows[n]&&e.props.onSelectInstances([e.renderedRows[n].instance],e._keyboardShortcuts.shouldMultiSelect())},e._rowGetter=function(t){var n=t.index;return e.renderedRows[n]},e._rowClassName=function(t){var n=t.index;if(n<0)return"tableHeaderRow";var r=e.renderedRows[n];return r&&-1!==e.props.selectedInstances.indexOf(r.instance)?"tableSelectedRow":n%2===0?"tableEvenRow":"tableOddRow"},e._renderLockCell=function(e){var t=e.rowData.instance;return(0,d.jsx)(M.Z,{size:"small",onClick:function(){if(t.isSealed())return t.setSealed(!1),void t.setLocked(!1);t.isLocked()?t.setSealed(!0):t.setLocked(!0)},children:t.isLocked()&&t.isSealed()?(0,d.jsx)($S,{}):t.isLocked()?(0,d.jsx)(Qi,{}):(0,d.jsx)($i,{})})},e._selectFirstInstance=function(){e.renderedRows.length&&e.props.onSelectInstances([e.renderedRows[0].instance],!1)},e._sort=function(t){var n=t.sortBy,r=t.sortDirection;e.setState({sortBy:n,sortDirection:r})},e._orderRenderedRows=function(){e.renderedRows.sort((function(t,n){var r=e.state.sortDirection===hr.Sr.ASC?1:-1;switch(e.state.sortBy){case"name":return aP(t.name,n.name,r);case"x":return r*(parseFloat(t.x)-parseFloat(n.x));case"y":return r*(parseFloat(t.y)-parseFloat(n.y));case"angle":return r*(parseFloat(t.angle)-parseFloat(n.angle));case"layer":return aP(t.layer,n.layer,r);case"locked":return r*(Number(t.locked)-Number(n.locked));case"zOrder":return r*(parseFloat(t.zOrder)-parseFloat(n.zOrder));default:return 0}}))},e}return(0,at.Z)(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this;this.instanceRowRenderer=new eP.InitialInstanceJSFunctor,this.instanceRowRenderer.invoke=function(t){var n=e.state.searchText,r=eP.wrapPointer(t,eP.InitialInstance),i=r.getObjectName();n&&-1===i.toLowerCase().indexOf(n.toLowerCase())||e.renderedRows.push({instance:r,name:i,locked:r.isLocked(),x:(0,go.q)(r.getX(),2),y:(0,go.q)(r.getY(),2),angle:(0,go.q)(r.getAngle(),2),layer:r.getLayer(),zOrder:r.getZOrder()})}}},{key:"componentWillUnmount",value:function(){this.instanceRowRenderer&&this.instanceRowRenderer.delete()}},{key:"render",value:function(){var e=this,t=this.state,n=t.searchText,r=t.sortBy,i=t.sortDirection,o=this.props.instances;if(!this.instanceRowRenderer)return null;this.renderedRows.length=0,o.iterateOverInstances(this.instanceRowRenderer),this._orderRenderedRows();var a=o.ptr;return(0,d.jsx)(f.Z.Consumer,{children:function(t){return(0,d.jsxs)("div",{style:oP.container,children:[(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(st.Z,{value:n,onChange:function(t){return e.setState({searchText:t})},onRequestSearch:e._selectFirstInstance,ref:e._searchBar,placeholder:{id:"Search instances"},autoFocus:"desktop"})})}),(0,d.jsx)("div",{style:oP.tableContainer,onKeyDown:e._keyboardShortcuts.onKeyDown,onKeyUp:e._keyboardShortcuts.onKeyUp,children:(0,d.jsx)(hr.qj,{children:function(t){var n=t.height,o=t.width;return(0,d.jsxs)(hr.iA,{ref:function(t){return e.table=t},headerHeight:30,height:n,className:"gd-table",headerClassName:"tableHeaderColumn",rowCount:e.renderedRows.length,rowGetter:e._rowGetter,rowHeight:32,onRowClick:e._onRowClick,rowClassName:e._rowClassName,sort:e._sort,sortBy:r,sortDirection:i,width:Math.max(o,tP),children:[(0,d.jsx)(hr.sg,{label:(0,d.jsx)(b.Trans,{id:"Object name"}),dataKey:"name",width:Math.max(.35*o,nP),className:"tableColumn"}),(0,d.jsx)(hr.sg,{label:"",dataKey:"locked",width:Math.max(.05*o,rP),className:"tableColumn",cellRenderer:e._renderLockCell}),(0,d.jsx)(hr.sg,{label:(0,d.jsx)(b.Trans,{id:"X"}),dataKey:"x",width:Math.max(.1*o,rP),className:"tableColumn"}),(0,d.jsx)(hr.sg,{label:(0,d.jsx)(b.Trans,{id:"Y"}),dataKey:"y",width:Math.max(.1*o,rP),className:"tableColumn"}),(0,d.jsx)(hr.sg,{label:(0,d.jsx)(b.Trans,{id:"Angle"}),dataKey:"angle",width:Math.max(.1*o,rP),className:"tableColumn"}),(0,d.jsx)(hr.sg,{label:(0,d.jsx)(b.Trans,{id:"Layer"}),dataKey:"layer",width:Math.max(.2*o,iP),className:"tableColumn"}),(0,d.jsx)(hr.sg,{label:(0,d.jsx)(b.Trans,{id:"Z Order"}),dataKey:"zOrder",width:Math.max(.1*o,rP),className:"tableColumn"})]},a)}})})]})}})}}]),n}(l.Component),lP=l.forwardRef((function(e,t){var n=(0,Pt.Z)();return l.useImperativeHandle(t,(function(){return{forceUpdate:n}})),(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Instances list"}),scope:"scene-editor-instances-list",children:(0,d.jsx)(sP,(0,a.Z)({},e))})})),cP="CompactSelectField_container__yhyda",uP="CompactSelectField_compactSelectField__lhXNq",dP="CompactSelectField_disabled__SAl+a",pP="CompactSelectField_errored__BZ3tv",fP="CompactSelectField_arrowContainer__a+H1H",hP="CompactSelectField_arrow__P9Yez",gP="CompactSelectField_leftIconContainer__eU4s0",xP="CompactSelectField_leftIcon__Yb4z8",mP=n(84361),vP=function(e){var t,n=e.onChange,i=e.value,o=e.id,a=e.disabled,s=e.errored,l=(e.placeholder,e.children),c=e.renderLeftIcon,u=e.leftIconTooltip;return(0,d.jsxs)("div",{className:Pn()((t={},(0,r.Z)(t,cP,!0),(0,r.Z)(t,dP,a),(0,r.Z)(t,pP,s),t)),children:[c&&(0,d.jsx)(Ze.ZP,{title:u,enterDelay:mP.K,placement:"bottom",PopperProps:{modifiers:{offset:{enabled:!0,offset:"0,-20"}}},children:(0,d.jsx)("div",{className:gP,children:c(xP)})}),(0,d.jsxs)("div",{className:Pn()((0,r.Z)({},uP,!0)),children:[(0,d.jsx)("select",{id:o,disabled:a,value:i,onChange:function(e){return n(e.currentTarget.value)},children:l}),(0,d.jsx)("div",{className:Pn()((0,r.Z)({},fP,!0)),children:(0,d.jsx)("span",{className:Pn()((0,r.Z)({},hP,!0))})})]})]})},bP="CompactTextField_container__4yvkt",CP="CompactTextField_compactTextField__+85-+",jP="CompactTextField_disabled__oW2P4",yP="CompactTextField_errored__eIW79",ZP="CompactTextField_withEndAdornment__jVEcY",kP="CompactTextField_leftIconContainer__sKE-P",wP="CompactTextField_label__C6nCR",TP="CompactTextField_control__z3J+V",SP="CompactTextField_leftIcon__ZoAxD",PP="CompactTextField_endAdornmentButton__d7-Em",EP="CompactTextField_endAdornmentIcon__W+X8x",IP=function(e){var t=e.onChange,n=e.onGetInitialValue,r=l.useRef(null);return{onMouseDown:l.useCallback((function(e){var t=e.currentTarget;t instanceof Element&&t.requestPointerLock&&(t.requestPointerLock(),r.current={initialValue:n(),accumulatedValue:0,previouslyChangedValue:null})}),[n]),onMouseMove:l.useCallback((function(e){if(r.current){var n=r.current,i=n.initialValue,o=n.previouslyChangedValue;r.current.accumulatedValue+=e.movementX/2;var a=Math.round(r.current.accumulatedValue)+i;if(a!==o){if(!r.current)return;r.current.previouslyChangedValue=a,t(a)}}}),[t]),onMouseUp:l.useCallback((function(){r.current&&(document.exitPointerLock(),r.current=null)}),[])}},MP=n(28842),LP=function(e){var t,n,i,o=e.type,s=e.value,c=e.onChange,u=e.id,p=e.disabled,f=e.errored,h=e.placeholder,g=e.renderLeftIcon,x=e.leftIconTooltip,m=e.useLeftIconAsNumberControl,v=e.renderEndAdornmentOnHover,b=e.onClickEndAdornment,C=e.onBlur,j=e.onFocus,y=l.useRef(u||(0,MP._)()),Z=IP({onChange:function(e){return c(e,"iconControl")},onGetInitialValue:function(){return s}}),k=l.useCallback((function(e){C&&C(e)}),[C]),w=l.useCallback((function(e){j&&j(e)}),[j]);return(0,d.jsxs)("div",{className:Pn()((t={},(0,r.Z)(t,bP,!0),(0,r.Z)(t,jP,p),(0,r.Z)(t,yP,f),t)),children:[g&&x&&(0,d.jsx)(Ze.ZP,{title:x,enterDelay:mP.K,placement:"bottom",PopperProps:{modifiers:{offset:{enabled:!0,offset:"0,-20"}}},children:(0,d.jsx)("div",(0,a.Z)((0,a.Z)({className:Pn()((n={},(0,r.Z)(n,kP,!0),(0,r.Z)(n,TP,!!m),n))},m?Z:{}),{},{children:(0,d.jsx)("label",{htmlFor:y.current,className:wP,children:g(SP)})}))}),(0,d.jsxs)("div",{className:Pn()((i={},(0,r.Z)(i,CP,!0),(0,r.Z)(i,ZP,!!v),i)),children:[(0,d.jsx)("input",{id:y.current,type:o||"text",disabled:p,value:null===s?"":"number"===typeof s?(0,go.q)(s,2):s,onChange:function(e){return c(e.currentTarget.value,"keyInput")},placeholder:h,onBlur:k,onFocus:w}),v&&(0,d.jsx)("button",{onClick:b,className:PP,children:v(EP)})]})]})},AP="CompactSemiControlledTextField_container__gsIo5",FP="CompactSemiControlledTextField_error__4Coa2",OP=["value","onChange","errorText","commitOnBlur"],RP=function(e){var t=e.value,n=e.onChange,r=e.errorText,i=e.commitOnBlur,o=(0,Bi.Z)(e,OP),c=l.useState(!1),u=(0,s.Z)(c,2),p=u[0],f=u[1],h=l.useState(""),g=(0,s.Z)(h,2),x=g[0],m=g[1];return(0,d.jsxs)("div",{className:AP,children:[(0,d.jsx)(LP,(0,a.Z)({type:"text",value:p?x:t,onFocus:function(e){f(!0),m(t)},onChange:function(e){m(e),i||n(e)},onBlur:function(e){n(e.currentTarget.value),f(!1),m("")}},o)),r&&(0,d.jsx)("div",{className:FP,children:r})]})},DP="CompactSemiControlledNumberField_container__afVTS",_P="CompactSemiControlledNumberField_error__f-Tlc",BP=["value","onChange","errorText","commitOnBlur"],NP=function(e){var t=e.value,n=e.onChange,r=e.errorText,i=e.commitOnBlur,o=(0,Bi.Z)(e,BP),c=l.useState(!1),u=(0,s.Z)(c,2),p=u[0],f=u[1],h=l.useState(null),g=(0,s.Z)(h,2),x=g[0],m=g[1];return(0,d.jsxs)("div",{className:DP,children:[(0,d.jsx)(LP,(0,a.Z)({type:"number",value:p?x:t,onChange:function(e,t){var r=parseFloat(e);!Number.isNaN(r)?(m(r),"keyInput"===t&&i||n(r)):m(null)},onFocus:function(e){f(!0),m(t)},onBlur:function(e){var t=parseFloat(e.currentTarget.value);!Number.isNaN(t)&&n(t),f(!1),m(null)}},o)),r&&(0,d.jsx)("div",{className:_P,children:r})]})},UP={container:{display:"flex",alignSelf:"stretch",flexDirection:"column",justifyContent:"stretch",alignItems:"center"},verticalBar:{flex:1},childrenContainer:{flex:0}},HP=function(e){var t=l.useContext(f.Z);return(0,d.jsxs)("div",{style:UP.container,children:[(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},UP.verticalBar),{},{borderLeft:"1px solid ".concat(t.palette.secondary)})}),(0,d.jsx)("div",{style:UP.childrenContainer,children:e.children}),(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},UP.verticalBar),{},{borderLeft:"1px solid ".concat(t.palette.secondary)})})]})},VP={leftColumn:{flex:2,minWidth:0,maxWidth:150},rightColumn:{flex:3,minWidth:75},label:{overflow:"hidden",textOverflow:"ellipsis",lineHeight:"17px",maxHeight:34,opacity:.7}},zP=function(e){var t=e.markdownDescription?[e.label," - ",(0,d.jsx)(Ke.r,{source:e.markdownDescription})]:e.label;return(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[(0,d.jsx)("div",{style:VP.leftColumn,children:(0,d.jsx)(Ze.ZP,{title:t,enterDelay:mP.K,placement:"bottom",PopperProps:{modifiers:{offset:{enabled:!0,offset:"0,-20"}}},children:(0,d.jsx)(F.Z,{noMargin:!0,style:VP.label,children:e.label})})}),(0,d.jsx)("div",{style:VP.rightColumn,children:e.field})]})},WP=["key"],GP=["key"],YP={columnContainer:{display:"flex",flexDirection:"column"},fieldContainer:{flex:1,display:"flex",flexDirection:"row",alignItems:"baseline"},field:{flex:1,width:"auto"},subHeader:{paddingLeft:0},container:{flex:1,minWidth:0},separator:{marginRight:-L.XW,marginLeft:-L.XW,marginTop:L.XW,borderTop:"1px solid black"}},qP=function(){var e=l.useContext(f.Z);return(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},YP.separator),{},{borderColor:e.listItem.separatorColor})})},XP=function(e){var t=e.instances,n=e.field;return!!n.disabled&&n.disabled(t)},KP=function(e){var t=e.instances,n=e.field,r=e.defaultValue;if(!t[0])return console.warn("getFieldValue was called with an empty list of instances (or containing undefined). This is a bug that should be fixed."),r;var i=n.getValue;if(!i)return null;for(var o=i(t[0]),a=1;a<t.length;++a)if(o!==i(t[a])){"undefined"!==typeof r&&(o=r);break}return o},JP=function(e){var t=e.instances,n=e.field;return t[0]?n.getLabel?n.getLabel(t[0]):n.name:(console.warn("getFieldLabel was called with an empty list of instances (or containing undefined). This is a bug that should be fixed."),n.name)},QP=function e(t){var n=t.onInstancesModified,r=t.instances,i=t.schema,o=t.mode,s=t.renderExtraDescriptionText,c=t.unsavedChanges,u=t.project,p=t.resourceManagementProps,f=t.preventWrap,h=t.removeSpacers,g=(0,Pt.Z)(),x=l.useCallback((function(e){c&&c.triggerUnsavedChanges(),n&&n(e),g()}),[c,n,g]),m=l.useCallback((function(e){if(r[0]){var t=[];return e.getDescription&&t.push(e.getDescription(r[0])),s&&e.getExtraDescription&&t.push(s(e.getExtraDescription(r[0]))),t.join("\n")||void 0}console.warn("getFieldDescription was called with an empty list of instances (or containing undefined). This is a bug that should be fixed.")}),[r,s]),v=l.useCallback((function(e){if("PLEASE_ALSO_SHOW_EDIT_BUTTON_THANKS"===e.name)return null;if("boolean"===e.valueType)return"TODO";if("number"===e.valueType){var t=e.setValue,n=e.onClickEndAdornment,i={key:e.name,id:e.name,value:KP({instances:r,field:e}),onChange:function(e){isNaN(e)||(r.forEach((function(n){return t(n,e)})),x(r))},disabled:XP({instances:r,field:e}),renderEndAdornmentOnHover:e.getEndAdornmentIcon||void 0,onClickEndAdornment:function(){n&&(r.forEach((function(e){return n(e)})),x(r))}};if(e.renderLeftIcon||e.hideLabel)return(0,d.jsx)(NP,(0,a.Z)((0,a.Z)({},i),{},{useLeftIconAsNumberControl:!0,renderLeftIcon:e.renderLeftIcon,leftIconTooltip:JP({instances:r,field:e})}));var o=i.key,s=(0,Bi.Z)(i,WP);return(0,d.jsx)(zP,{label:JP({instances:r,field:e}),markdownDescription:m(e),field:(0,d.jsx)(NP,(0,a.Z)({},s))},o)}if("color"===e.valueType)return"TODO";if("enumIcon"===e.valueType){var l=KP({instances:r,field:e});return(0,d.jsx)(M.Z,{id:e.name,size:"small",tooltip:JP({instances:r,field:e}),selected:e.isHighlighted(l),onClick:function(t){r.forEach((function(t){return e.setValue(t,!l)})),x(r)},children:e.renderIcon(l)},e.name)}if("textarea"===e.valueType)return"TODO";if("resource"===e.valueType)return"TODO";var c=e.setValue,u=e.onClickEndAdornment,p={key:e.name,id:e.name,value:KP({instances:r,field:e,defaultValue:"(Multiple values)"}),onChange:function(e){r.forEach((function(t){return c(t,e||"")})),x(r)},disabled:XP({instances:r,field:e}),renderEndAdornmentOnHover:e.getEndAdornmentIcon||void 0,onClickEndAdornment:function(){u&&(r.forEach((function(e){return u(e)})),x(r))}};if(e.renderLeftIcon||e.hideLabel)return(0,d.jsx)(RP,(0,a.Z)((0,a.Z)({},p),{},{renderLeftIcon:e.renderLeftIcon,leftIconTooltip:JP({instances:r,field:e})}));var f=p.key,h=(0,Bi.Z)(p,GP);return(0,d.jsx)(zP,{label:JP({instances:r,field:e}),markdownDescription:m(e),field:(0,d.jsx)(RP,(0,a.Z)({},h))},f)}),[r,x,m]),b=l.useCallback((function(e){if(e.getChoices&&e.getValue){var t=e.getChoices().map((function(e){var t=e.value,n=e.label,r=e.labelIsUserDefined;return(0,d.jsx)($.Z,{value:t,label:n,shouldNotTranslate:r},t)}));if("number"===e.valueType){var n=e.setValue;return(0,d.jsx)(vP,{value:KP({instances:r,field:e}),id:e.name,onChange:function(e){r.forEach((function(t){return n(t,parseFloat(e)||0)})),x(r)},disabled:e.disabled,children:t},e.name)}if("string"===e.valueType){var i=e.setValue;return(0,d.jsx)(vP,{value:KP({instances:r,field:e,defaultValue:"(Multiple values)"}),id:e.name,onChange:function(e){r.forEach((function(t){return i(t,e||"")})),x(r)},disabled:XP({instances:r,field:e}),renderLeftIcon:e.renderLeftIcon,leftIconTooltip:JP({instances:r,field:e}),children:t},e.name)}}}),[r,x]),j=l.useCallback((function(e){var t=!1;if("onValuesDifferent"===e.disabled){var n="DIFFERENT_VALUES";t=KP({instances:r,field:e,defaultValue:n})===n}return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(J.Z,{fullWidth:!0,primary:!0,leftIcon:e.getIcon?e.getIcon({fontSize:"small"}):(0,d.jsx)(bt.Z,{fontSize:"small"}),disabled:t,label:e.label,onClick:function(){r[0]&&e.onClick(r[0])}}),(0,d.jsx)(L.LZ,{})]},"button-".concat(e.label))}),[r]),y="row"===o?function(e){return f?h?(0,d.jsx)(L.x1,{noMargin:!0,alignItems:"center",expand:!0,children:e}):(0,d.jsx)(C.pJ,{noMargin:!0,alignItems:"center",expand:!0,children:e}):(0,d.jsx)(C.ep,{noMargin:!0,alignItems:"center",expand:!0,children:e})}:function(e){return h?(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,children:e}):(0,d.jsx)(C.ak,{noMargin:!0,expand:!0,children:e})},Z=l.useCallback((function(e){var t=e.getValue,n=e.renderLeftIcon,i=null;if(t){var o=KP({instances:r,field:e,defaultValue:e.defaultValue||"Multiple Values"});o&&(i=o)}return i?(0,d.jsxs)(C.pJ,{alignItems:"center",expand:!0,noMargin:!0,children:[n(),(0,d.jsx)(F.Z,{displayInlineAsSpan:!0,noMargin:!0,children:e.title}),(0,d.jsx)(F.Z,{displayInlineAsSpan:!0,noMargin:!0,children:"-"}),(0,d.jsx)(F.Z,{allowSelection:!0,displayInlineAsSpan:!0,noMargin:!0,style:B.t,children:i})]},"section-title-".concat(e.name)):(0,d.jsxs)(C.pJ,{expand:!0,noMargin:!0,alignItems:"center",children:[n(),(0,d.jsx)(F.Z,{displayInlineAsSpan:!0,size:"sub-title",noMargin:!0,children:e.title})]},"title-".concat(e.name))}),[r]),k=l.useCallback((function(e){return[(0,d.jsx)(qP,{},e.name+"-separator"),(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)(F.Z,{displayInlineAsSpan:!0,size:"sub-title",noMargin:!0,children:e.title})},"section-title-".concat(e.name))]}),[]);return y(i.map((function(t){if(t.nonFieldType)return"title"===t.nonFieldType?Z(t):"sectionTitle"===t.nonFieldType?k(t):"button"===t.nonFieldType?j(t):"verticalCenterWithBar"===t.nonFieldType?function(e){return e.child&&e.child.getValue?(0,d.jsx)(HP,{children:v(e.child)},e.name):"TODO"}(t):null;if(t.children){if("row"===t.type){var i=(0,d.jsx)(l.Fragment,{children:(0,d.jsx)(e,{project:u,resourceManagementProps:p,schema:t.children,instances:r,mode:"row",unsavedChanges:c,onInstancesModified:n,preventWrap:t.preventWrap,removeSpacers:t.removeSpacers})},t.name);return t.title?[(0,d.jsx)(qP,{},t.name+"-separator"),(0,d.jsx)(F.Z,{size:"sub-title",noMargin:!0,children:t.title},t.name+"-title"),i]:i}return(0,d.jsx)("div",{style:YP.container,children:(0,d.jsx)(l.Fragment,{children:(0,d.jsx)(e,{project:u,resourceManagementProps:p,schema:t.children,instances:r,mode:"column",unsavedChanges:c,onInstancesModified:n,preventWrap:t.preventWrap,removeSpacers:t.removeSpacers})},t.name)},t.name)}return"resource"===t.valueType?function(e){if(!u||!p)return console.error("You tried to display a resource field in a PropertiesEditor that does not support display resources. If you need to display resources, pass additional props (project, resourceManagementProps)."),null;var t=e.setValue;return(0,d.jsx)($n.Z,{project:u,resourceManagementProps:p,resourceKind:e.resourceKind,fallbackResourceKind:e.fallbackResourceKind,resourceName:KP({instances:r,field:e,defaultValue:"(Multiple values)"}),onChange:function(e){r.forEach((function(n){return t(n,e)})),x(r)},floatingLabelText:JP({instances:r,field:e}),helperMarkdownText:m(e)},e.name)}(t):t.getChoices&&t.getValue?b(t):t.getValue?v(t):null})))},$P=function(e,t,n,r,i){var o=t.getDescription(),a=function(t){var r=n(t).get(e).getLabel();return r||e.charAt(0).toUpperCase()+e.slice(1).split(/(?=[A-Z])/).join(" ")},s=function(){return o},l=t.getType().toLowerCase();if("number"===l)return{name:e,valueType:l,getValue:function(t){return parseFloat(n(t).get(e).getValue())||0},setValue:function(t,n){r(t,e,""+n)},getLabel:a,getDescription:s,getEndAdornment:function(t){var r=n(t).get(e).getMeasurementUnit();return{label:iE(r),tooltipContent:(0,d.jsx)(Ak.Z,{label:r.getLabel(),description:r.getDescription(),elementsWithWords:r.getElementsWithWords()})}}};if("string"===l||""===l)return{name:e,valueType:"string",getValue:function(t){return n(t).get(e).getValue()},setValue:function(t,n){r(t,e,n)},getLabel:a,getDescription:s};if("boolean"===l)return{name:e,valueType:l,getValue:function(t){return"true"===n(t).get(e).getValue()},setValue:function(t,n){r(t,e,n?"1":"0")},getLabel:a,getDescription:s};if("choice"===l){var c=t.getExtraInfo().toJSArray().map((function(e){return{value:e,label:e}}));return{name:e,valueType:"string",getChoices:function(){return c},getValue:function(t){return n(t).get(e).getValue()},setValue:function(t,n){r(t,e,n)},getLabel:a,getDescription:s}}if("behavior"===l){var u=t.getExtraInfo().size()>0?t.getExtraInfo().at(0):"";return{name:e,valueType:"string",getChoices:function(){return i&&""!==u?i.getAllBehaviorNames().toJSArray().map((function(e){return i.getBehavior(e).getTypeName()===u?e:null})).filter(Boolean).map((function(e){return{value:e,label:e}})):[]},getValue:function(t){return n(t).get(e).getValue()},setValue:function(t,n){r(t,e,n)},getLabel:a,getDescription:s}}if("resource"===l){var p=t.getExtraInfo().toJSArray(),f=p[0]||"",h=p[1]||"";return{name:e,valueType:"resource",resourceKind:f,fallbackResourceKind:h,getValue:function(t){return n(t).get(e).getValue()},setValue:function(t,n){r(t,e,n)},getLabel:a,getDescription:s}}return"color"===l?{name:e,valueType:"color",getValue:function(t){return n(t).get(e).getValue()},setValue:function(t,n){r(t,e,n)},getLabel:a,getDescription:s}:"textarea"===l?{name:e,valueType:"textarea",getValue:function(t){return n(t).get(e).getValue()},setValue:function(t,n){r(t,e,n)},getLabel:a,getDescription:s}:(console.error("A property with type=".concat(l," could not be mapped to a field. Ensure that this type is correct and understood by the IDE.")),null)},eE=[["X","Y","Z"],["Width","Height","Depth"],["Top","Bottom"],["Left","Right"],["Front","Back"],["Up","Down"],["Min","Max"],["Low","High"],["Color","Opacity"],["Horizontal","Vertical"],["Acceleration","Deceleration"],["Duration","Easing"],["EffectName","EffectProperty"],["Gravity","MaxFallingSpeed"],["JumpSpeed","JumpSustainTime"],["XGrabTolerance","YGrabOffset"],["MaxSpeed","SlopeMaxAngle"]],tE=function(e){return e?e[0].toLowerCase()+e.substr(1):e},nE=function(e,t,n){if(!e.has(t))return!1;var r=e.get(t);return!r.isHidden()&&("All"===n||("Deprecated"===n?r.isDeprecated():"Advanced"===n?r.isAdvanced():"Basic"!==n||!r.isAdvanced()&&!r.isDeprecated()))},rE=["\u2070","\xb9","\xb2","\xb3","\u2074","\u2075"],iE=function(e){return(0,Et.mapFor)(0,e.getElementsCount(),(function(t){var n=e.getElementBaseUnit(t),r=e.getElementPower(t),i=Math.abs(r),o=r<0||i>1&&i<6;return n.getSymbol()+(r<0?"\u207b":"")+(o?rE[i]:"")})).join(" \xb7 ")},oE=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"All",o=e.keys(),a=new Map,s=new Set;if((0,Et.mapFor)(0,o.size(),(function(l){var c=o.at(l),u=e.get(c);if(!nE(e,c,i))return null;if(s.has(c))return null;var d=u.getGroup()||"",p=a.get(d);p||(p=[],a.set(d,p));for(var f=null,h=function(){for(var o=x[g],a=[],l=function(){var t=o[u];if(c.includes(t)){var n,r=o.map((function(e){return c.replace(t,e)})),s=(0,ia.Z)(r);try{for(s.s();!(n=s.n()).done;){var l=n.value;nE(e,l,i)&&a.push(l)}}catch(x){s.e(x)}finally{s.f()}}var d=tE(t);if(c.startsWith(d)){var p,f=o.map((function(e){return c.replace(d,tE(e))})),h=(0,ia.Z)(f);try{for(h.s();!(p=h.n()).done;){var g=p.value;nE(e,g,i)&&a.push(g)}}catch(x){h.e(x)}finally{h.f()}}},u=0;u<o.length;u++)l();if(a.length>1){var d=a.map((function(t){return e.get(t)}));if(d.every((function(e){return e.getGroup()===d[0].getGroup()}))){for(var p=[],h=0;h<d.length&&h<a.length;h++){var m=d[h],v=a[h],b=$P(v,m,t,n,r);b&&p.push(b)}p.length===d.length&&(f={name:a.join("-"),type:"row",children:p},a.forEach((function(e){s.add(e)})))}}},g=0,x=eE;g<x.length;g++)h();f||(f=$P(c,u,t,n,r)),f&&p.push(f)})),0===a.size)return[];var l=a.get("");return 1===a.size&&l?l:(0,v.Z)(a.keys()).sort((function(e,t){return e.localeCompare(t)})).map((function(e){return{name:e,type:"column",title:e,children:a.get(e)||[]}}))},aE=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"12",height:"20",viewBox:"0 0 12 20",fill:"none",children:(0,d.jsx)("path",{d:"M6.55 9.792L9.49 15H7.978L5.752 10.73L3.498 15H2.07L4.968 9.862L2.322 5.354H3.834L5.78 8.98L7.74 5.354H9.168L6.55 9.792Z",fill:"currentColor"})}))})),sE=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"20",viewBox:"0 0 17 20",fill:"none",children:(0,d.jsx)("path",{d:"M12.13 5.354L9.022 11.29V15H7.678V11.304L4.57 5.354H6.04L8.392 10.128L10.744 5.354H12.13Z",fill:"currentColor"})}))})),lE=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"20",viewBox:"0 0 16 20",fill:"none",children:(0,d.jsx)("path",{d:"M10.29 15V10.478H6.23V15H4.9V5.354H6.23V9.386H10.29V5.354H11.62V15H10.29Z",fill:"currentColor"})}))})),cE=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"20",viewBox:"0 0 17 20",fill:"none",children:(0,d.jsx)("path",{d:"M13.214 5.354L11.254 15H9.546L7.768 6.922L5.976 15H4.31L2.35 5.354H3.652L5.206 13.838L7.068 5.354H8.482L10.386 13.838L11.996 5.354H13.214Z",fill:"currentColor"})}))})),uE=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"-5 -4 17 18",fill:"none",children:(0,d.jsx)("path",{d:"M2.91112 0.354C4.36712 0.354 5.53378 0.694666 6.41112 1.376C7.29778 2.048 7.74112 3.29867 7.74112 5.128C7.74112 6.91067 7.29778 8.17067 6.41112 8.908C5.53378 9.636 4.46512 10 3.20512 10H0.895117V0.354H2.91112ZM2.22512 1.418V8.95H3.30312C4.19912 8.95 4.92712 8.67467 5.48712 8.124C6.04712 7.57333 6.32712 6.57467 6.32712 5.128C6.32712 4.11067 6.18245 3.33133 5.89312 2.79C5.60378 2.23933 5.23512 1.87533 4.78712 1.698C4.33912 1.51133 3.81178 1.418 3.20512 1.418H2.22512Z",fill:"currentColor"})}))})),dE=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"20",viewBox:"0 0 16 20",fill:"none",children:(0,d.jsx)("path",{d:"M10.678 5.354V6.432L5.904 13.866H10.678L10.524 15H4.42V13.936L9.236 6.474H4.924V5.354H10.678Z",fill:"currentColor"})}))})),pE=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00016 3.93256L3.93273 8L8.00016 12.0674L12.0676 8L8.00016 3.93256ZM7.46279 3.05572C7.60537 2.91331 7.79865 2.83333 8.00016 2.83333C8.20168 2.83333 8.39495 2.91331 8.53753 3.05572L12.9442 7.46241C13.0866 7.60499 13.1668 7.79848 13.1668 8C13.1668 8.20151 13.0868 8.39478 12.9444 8.53736L8.53775 12.9441C8.39517 13.0865 8.20168 13.1667 8.00016 13.1667C7.79865 13.1667 7.60537 13.0867 7.46279 12.9443L3.05611 8.53759C2.9137 8.395 2.8335 8.20151 2.8335 8C2.8335 7.79848 2.91348 7.60521 3.05589 7.46263L7.46279 3.05572Z",fill:"currentColor"})}))})),fE=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.6537 5.19282C4.64208 3.3546 6.12275 1.85505 7.96096 1.84338C9.7992 1.83171 11.2988 3.31241 11.3104 5.15065L11.3179 6.32914C11.3196 6.60528 11.0972 6.83055 10.8211 6.8323C10.5449 6.83405 10.3197 6.61161 10.3179 6.33548L10.3104 5.15699C10.3023 3.87101 9.25325 2.83519 7.96732 2.84336C6.68136 2.85153 5.64556 3.90054 5.65368 5.18649C5.65368 5.18649 5.65368 5.18649 5.65368 5.18649L5.66115 6.36498C5.6629 6.64112 5.44046 6.86639 5.16432 6.86814C4.88819 6.86989 4.66292 6.64745 4.66117 6.37132L4.6537 5.19282Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.17889 9.16792C5.45503 9.16617 5.6803 9.38861 5.68205 9.66474L5.68952 10.8432C5.68952 10.8432 5.68952 10.8432 5.68952 10.8432C5.69769 12.1292 6.74671 13.165 8.03266 13.1569C9.3186 13.1487 10.3544 12.0997 10.3463 10.8137L10.3388 9.63524C10.3371 9.35911 10.5595 9.13383 10.8356 9.13208C11.1118 9.13034 11.337 9.35277 11.3388 9.62891L11.3463 10.8074C11.3579 12.6456 9.87721 14.1452 8.03898 14.1568C6.20076 14.1685 4.70121 12.6878 4.68954 10.8496L4.68207 9.67108C4.68032 9.39494 4.90276 9.16967 5.17889 9.16792Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.98337 5.37884C8.25951 5.37709 8.48478 5.59953 8.48653 5.87567L8.51341 10.1182C8.51516 10.3944 8.29272 10.6196 8.01659 10.6214C7.74045 10.6231 7.51518 10.4007 7.51343 10.1246L7.48655 5.882C7.4848 5.60586 7.70724 5.38059 7.98337 5.37884Z",fill:"currentColor"})]}))})),hE=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.65394 5.19279C4.64233 3.35457 6.12299 1.85502 7.96121 1.84335C9.79944 1.83168 11.299 3.31238 11.3107 5.15062L11.3181 6.32911C11.3199 6.60525 11.0974 6.83052 10.8213 6.83227C10.5452 6.83402 10.3199 6.61158 10.3182 6.33544L10.3107 5.15696C10.3025 3.87098 9.2535 2.83516 7.96756 2.84333C6.68161 2.8515 5.6458 3.90051 5.65392 5.18646L5.66139 6.36495C5.66314 6.64109 5.4407 6.86636 5.16457 6.86811C4.88843 6.86986 4.66316 6.64742 4.66141 6.37128L4.65394 5.19279Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.17914 9.16789C5.45528 9.16614 5.68055 9.38858 5.6823 9.66471L5.68976 10.8432C5.69793 12.1291 6.74695 13.165 8.0329 13.1568C9.31884 13.1487 10.3547 12.0997 10.3465 10.8137L10.3391 9.63521C10.3373 9.35908 10.5597 9.1338 10.8359 9.13205C11.112 9.1303 11.3373 9.35274 11.339 9.62888L11.3465 10.8074C11.3581 12.6456 9.87746 14.1452 8.03922 14.1568C6.20101 14.1684 4.70146 12.6878 4.68978 10.8495L4.68232 9.67105C4.68057 9.39491 4.903 9.16964 5.17914 9.16789Z",fill:"currentColor"})]}))})),gE=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,d.jsx)("path",{d:"M2.5 8C2.5 4.96499 4.97482 2.5 8.03379 2.5C10.1843 2.5 12.0485 3.71928 12.9644 5.5H10.8667C10.5905 5.5 10.3667 5.72386 10.3667 6C10.3667 6.27614 10.5905 6.5 10.8667 6.5H13.8C13.9045 6.5 14.0097 6.48361 14.1103 6.45026C14.2109 6.41694 14.3084 6.36614 14.3952 6.29671C14.4821 6.22717 14.5585 6.13862 14.6136 6.03235C14.6689 5.92544 14.7 5.8053 14.7 5.68V2.86667C14.7 2.59052 14.4761 2.36667 14.2 2.36667C13.9239 2.36667 13.7 2.59052 13.7 2.86667V4.76132C12.5718 2.81196 10.4562 1.5 8.03379 1.5C4.42784 1.5 1.5 4.40741 1.5 8C1.5 11.5926 4.42784 14.5 8.03379 14.5C11.3074 14.5 14.0208 12.1042 14.4944 8.97482C14.5357 8.70178 14.3478 8.44695 14.0748 8.40563C13.8018 8.36431 13.5469 8.55215 13.5056 8.82518C13.1055 11.469 10.8096 13.5 8.03379 13.5C4.97482 13.5 2.5 11.035 2.5 8Z",fill:"currentColor"})}))})),xE=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,d.jsx)("path",{d:"M18.3354 16.8292C18.7059 17.0144 18.8561 17.4649 18.6708 17.8354C17.836 19.5051 16.6858 20.3836 15.5412 20.8248C14.4377 21.2502 13.3821 21.2501 12.7617 21.25H12.74C10.7017 21.25 8.93591 20.0576 7.71129 18.2913C6.68276 16.8079 6.0001 14.8784 5.80645 12.75H3C2.58579 12.75 2.25 12.4142 2.25 12C2.25 11.5858 2.58579 11.25 3 11.25H5.75224C5.79738 8.72852 6.52384 6.42139 7.71129 4.70871C8.93591 2.94243 10.7017 1.75 12.74 1.75C14.9841 1.75 16.8921 3.19102 18.1228 5.25995L18.7885 3.26283C18.9195 2.86987 19.3442 2.6575 19.7372 2.78849C20.1301 2.91947 20.3425 3.34421 20.2115 3.73717L19.2115 6.73717C19.1094 7.04343 18.8228 7.25 18.5 7.25H14.5C14.0858 7.25 13.75 6.91421 13.75 6.5C13.75 6.08579 14.0858 5.75 14.5 5.75H16.6615C15.6172 4.14409 14.205 3.25 12.74 3.25C11.332 3.25 9.97781 4.07229 8.94399 5.56337C7.94886 6.99866 7.29758 8.99981 7.2525 11.25H21C21.4142 11.25 21.75 11.5858 21.75 12C21.75 12.4142 21.4142 12.75 21 12.75H7.31336C7.50184 14.5909 8.09894 16.2178 8.94399 17.4366C9.9778 18.9277 11.332 19.75 12.74 19.75C13.3598 19.75 14.1724 19.7448 15.0017 19.4252C15.8027 19.1164 16.664 18.4949 17.3292 17.1646C17.5144 16.7941 17.9649 16.6439 18.3354 16.8292Z",fill:"currentColor"})}))})),mE=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,d.jsx)("path",{d:"M12 21.75C11.5858 21.75 11.25 21.4142 11.25 21V18.7298C8.92433 18.604 6.8075 17.8972 5.20869 16.7887C3.44242 15.5641 2.25 13.7983 2.25 11.76V11.7383C2.24994 11.1179 2.24984 10.0623 2.67519 8.95884C3.11641 7.81418 3.99487 6.66404 5.66459 5.82918C6.03508 5.64394 6.48558 5.79411 6.67082 6.16459C6.85606 6.53507 6.7059 6.98558 6.33541 7.17082C5.00513 7.83596 4.38359 8.69727 4.07481 9.49834C3.75516 10.3276 3.75 11.1402 3.75 11.76C3.75 13.168 4.57228 14.5222 6.06336 15.556C7.39142 16.4768 9.20395 17.1032 11.25 17.2274V3C11.25 2.58579 11.5858 2.25 12 2.25C12.4142 2.25 12.75 2.58579 12.75 3V17.2274C14.796 17.1032 16.6086 16.4768 17.9366 15.556C19.4277 14.5222 20.25 13.168 20.25 11.76C20.25 10.295 19.3559 8.8828 17.75 7.83851V10C17.75 10.4142 17.4142 10.75 17 10.75C16.5858 10.75 16.25 10.4142 16.25 10V6C16.25 5.67718 16.4566 5.39057 16.7628 5.28849L19.7628 4.28849C20.1558 4.1575 20.5805 4.36987 20.7115 4.76283C20.8425 5.15579 20.6301 5.58053 20.2372 5.71151L18.2401 6.37722C20.309 7.60786 21.75 9.51592 21.75 11.76C21.75 13.7983 20.5576 15.5641 18.7913 16.7887C17.1925 17.8972 15.0757 18.604 12.75 18.7298V21C12.75 21.4142 12.4142 21.75 12 21.75Z",fill:"currentColor"})}))})),vE=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,d.jsx)("path",{d:"M10.416 1.37604C10.0714 1.14628 9.60573 1.23941 9.37596 1.58405C9.1462 1.9287 9.23933 2.39435 9.58397 2.62412L10.6599 3.34142C5.90924 3.99445 2.25 8.06994 2.25 13.0001C2.25 18.3849 6.61523 22.7501 12 22.7501C17.3848 22.7501 21.75 18.3849 21.75 13.0001C21.75 12.5859 21.4142 12.2501 21 12.2501C20.5858 12.2501 20.25 12.5859 20.25 13.0001C20.25 17.5565 16.5564 21.2501 12 21.2501C7.44365 21.2501 3.75 17.5565 3.75 13.0001C3.75 8.73222 6.99073 5.22127 11.1456 4.79378L9.46967 6.46975C9.17678 6.76264 9.17678 7.23752 9.46967 7.53041C9.76256 7.8233 10.2374 7.8233 10.5303 7.53041L13.5303 4.53041C13.6892 4.37153 13.7685 4.14978 13.7463 3.92618C13.7242 3.70258 13.603 3.50068 13.416 3.37604L10.416 1.37604Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M12 15.7501C11.5858 15.7501 11.25 15.4143 11.25 15.0001V13.2501H9.5C9.08579 13.2501 8.75 12.9143 8.75 12.5001C8.75 12.0859 9.08579 11.7501 9.5 11.7501H11.25V10.0001C11.25 9.58587 11.5858 9.25008 12 9.25008C12.4142 9.25008 12.75 9.58587 12.75 10.0001V11.7501H14.5C14.9142 11.7501 15.25 12.0859 15.25 12.5001C15.25 12.9143 14.9142 13.2501 14.5 13.2501H12.75V15.0001C12.75 15.4143 12.4142 15.7501 12 15.7501Z",fill:"currentColor"})]}))})),bE=function(e){var t=e.oldReferenceValue;return e.newReferenceValue/t*e.valueToApplyTo},CE=function(e){var t=e.i18n,n=e.onEditObjectByName,r=e.is3DInstance;return{label:t._({id:"Edit object"}),disabled:"onValuesDifferent",nonFieldType:"button",getIcon:r?function(e){return(0,d.jsx)(IS,(0,a.Z)({},e))}:function(e){return(0,d.jsx)(ES,(0,a.Z)({},e))},getValue:function(e){return e.getObjectName()},onClick:function(e){return n(e.getObjectName())}}},jE=function(e){var t=e.i18n;return[{name:"Rotation X",getLabel:function(){return t._({id:"Rotation (X)"})},valueType:"number",getValue:function(e){return e.getRotationX()},setValue:function(e,t){return e.setRotationX(t)},renderLeftIcon:function(e){return(0,d.jsx)(xE,{className:e})}},{name:"Rotation Y",getLabel:function(){return t._({id:"Rotation (Y)"})},valueType:"number",getValue:function(e){return e.getRotationY()},setValue:function(e,t){return e.setRotationY(t)},renderLeftIcon:function(e){return(0,d.jsx)(mE,{className:e})}}]},yE=function(e){var t=e.i18n;return{name:"Angle",getLabel:function(){return t._({id:"Rotation (Z)"})},valueType:"number",getValue:function(e){return e.getAngle()},setValue:function(e,t){return e.setAngle(t)},renderLeftIcon:function(e){return(0,d.jsx)(vE,{className:e})}}},ZE=function(e){var t=e.i18n;return[{name:"X",getLabel:function(){return t._({id:"X"})},valueType:"number",getValue:function(e){return e.getX()},setValue:function(e,t){return e.setX(t)},renderLeftIcon:function(e){return(0,d.jsx)(aE,{className:e})}},{name:"Y",getLabel:function(){return t._({id:"Y"})},valueType:"number",getValue:function(e){return e.getY()},setValue:function(e,t){return e.setY(t)},renderLeftIcon:function(e){return(0,d.jsx)(sE,{className:e})}}]},kE=function(e){var t=e.i18n;return{name:"Z",getLabel:function(){return t._({id:"Z"})},valueType:"number",getValue:function(e){return e.getZ()},setValue:function(e,t){return e.setZ(t)},renderLeftIcon:function(e){return(0,d.jsx)(dE,{className:e})}}},wE=function(e){var t=e.i18n,n=e.layout;return{name:"Layer",getLabel:function(){return t._({id:"Layer"})},valueType:"string",getChoices:function(){return Yw(n)},getValue:function(e){return e.getLayer()},setValue:function(e,t){return e.setLayer(t)},renderLeftIcon:function(e){return(0,d.jsx)(vT,{className:e})}}},TE=function(e){var t=e.i18n;return{name:"Z Order",getLabel:function(){return t._({id:"Z Order"})},valueType:"number",getValue:function(e){return e.getZOrder()},setValue:function(e,t){return e.setZOrder(t)},renderLeftIcon:function(e){return(0,d.jsx)(dE,{className:e})}}},SE=function(e){var t=e.i18n;return{name:"Title",type:"row",preventWrap:!0,children:[{name:"Instance",title:t._({id:"Instance"}),renderLeftIcon:function(e){return(0,d.jsx)(pE,{className:e,style:AE.icon})},getValue:function(e){return e.getObjectName()},nonFieldType:"title",defaultValue:t._({id:"Different objects"})},{name:"Lock instance",getLabel:function(e){return e.isSealed()?t._({id:"Free instance"}):e.isLocked()?t._({id:"Prevent selection in the editor"}):t._({id:"Lock position/angle in the editor"})},valueType:"enumIcon",renderIcon:function(e){return"sealed"===e?(0,d.jsx)($S,{style:AE.icon}):"locked"===e?(0,d.jsx)(Qi,{style:AE.icon}):(0,d.jsx)($i,{style:AE.icon})},isHighlighted:function(e){return"locked"===e||"sealed"===e},getValue:function(e){return e.isSealed()?"sealed":e.isLocked()?"locked":"free"},setValue:function(e,t){if(e.isSealed())return e.setSealed(!1),void e.setLocked(!1);e.isLocked()?e.setSealed(!0):e.setLocked(!0)}}]}},PE=function(e){var t=e.i18n,n=e.getInstanceWidth,r=e.getInstanceHeight,i=e.getInstanceDepth,o=e.forceUpdate;return{name:"Width",getLabel:function(){return t._({id:"Width"})},valueType:"number",getValue:n,setValue:function(e,t){var a=e.shouldKeepRatio(),s=Math.max(t,0);if(a){var l=n(e)||1;e.setCustomWidth(s),e.setCustomHeight(bE({oldReferenceValue:l,newReferenceValue:s,valueToApplyTo:r(e)})),e.setCustomDepth(bE({oldReferenceValue:l,newReferenceValue:s,valueToApplyTo:i(e)}))}else e.setCustomWidth(s),e.setCustomHeight(r(e)),e.setCustomDepth(i(e));e.setHasCustomSize(!0),e.setHasCustomDepth(!0),o()},renderLeftIcon:function(e){return(0,d.jsx)(cE,{className:e})},getEndAdornmentIcon:function(e){return(0,d.jsx)(gE,{className:e})},onClickEndAdornment:function(e){e.setHasCustomSize(!1),e.setHasCustomDepth(!1),o()}}},EE=function(e){var t=e.i18n,n=e.getInstanceWidth,r=e.getInstanceHeight,i=e.getInstanceDepth,o=e.forceUpdate;return{name:"Height",getLabel:function(){return t._({id:"Height"})},valueType:"number",getValue:r,setValue:function(e,t){var a=e.shouldKeepRatio(),s=Math.max(t,0);if(a){var l=r(e)||1;e.setCustomWidth(bE({oldReferenceValue:l,newReferenceValue:s,valueToApplyTo:n(e)})),e.setCustomHeight(s),e.setCustomDepth(bE({oldReferenceValue:l,newReferenceValue:s,valueToApplyTo:i(e)}))}else e.setCustomWidth(n(e)),e.setCustomHeight(s),e.setCustomDepth(i(e));e.setHasCustomSize(!0),e.setHasCustomDepth(!0),o()},renderLeftIcon:function(e){return(0,d.jsx)(lE,{className:e})},getEndAdornmentIcon:function(e){return(0,d.jsx)(gE,{className:e})},onClickEndAdornment:function(e){e.setHasCustomSize(!1),e.setHasCustomDepth(!1),o()}}},IE=function(e){var t=e.i18n,n=e.getInstanceWidth,r=e.getInstanceHeight,i=e.getInstanceDepth,o=e.forceUpdate;return{name:"Depth",getLabel:function(){return t._({id:"Depth"})},valueType:"number",getValue:i,setValue:function(e,t){var a=e.shouldKeepRatio(),s=Math.max(t,0);if(a){var l=i(e)||1;e.setCustomWidth(bE({oldReferenceValue:l,newReferenceValue:s,valueToApplyTo:n(e)})),e.setCustomHeight(bE({oldReferenceValue:l,newReferenceValue:s,valueToApplyTo:r(e)})),e.setCustomDepth(s)}else e.setCustomWidth(n(e)),e.setCustomHeight(r(e)),e.setCustomDepth(s);e.setHasCustomSize(!0),e.setHasCustomDepth(!0),o()},renderLeftIcon:function(e){return(0,d.jsx)(uE,{className:e})},getEndAdornmentIcon:function(e){return(0,d.jsx)(gE,{className:e})},onClickEndAdornment:function(e){e.setHasCustomSize(!1),e.setHasCustomDepth(!1),o()}}},ME=function(e){var t=e.i18n;e.getInstanceWidth,e.getInstanceHeight,e.getInstanceDepth,e.forceUpdate;return{name:"Keep ratio",getLabel:function(){return t._({id:"Keep ratio"})},valueType:"enumIcon",isHighlighted:function(e){return e},renderIcon:function(e){return e?(0,d.jsx)(fE,{style:AE.icon}):(0,d.jsx)(hE,{style:AE.icon})},getValue:function(e){return e.shouldKeepRatio()},setValue:function(e,t){return e.setShouldKeepRatio(t)}}},LE=function(e){var t=e.is3DInstance,n=e.i18n,r=e.forceUpdate,i=e.onEditObjectByName,o=e.onGetInstanceSize,a=e.layout,s=function(e){return e.hasCustomSize()?e.getCustomWidth():o(e)[0]},l=function(e){return e.hasCustomSize()?e.getCustomHeight():o(e)[1]},c=function(e){return e.hasCustomDepth()?e.getCustomDepth():o(e)[2]};return t?[SE({i18n:n}),CE({i18n:n,onEditObjectByName:i,is3DInstance:t}),{name:"Position",type:"row",preventWrap:!0,removeSpacers:!0,children:[].concat((0,v.Z)(ZE({i18n:n})),[kE({i18n:n})])},{name:"Size",type:"row",preventWrap:!0,children:[{name:"Custom size",type:"column",children:[PE({i18n:n,getInstanceWidth:s,getInstanceHeight:l,getInstanceDepth:c,forceUpdate:r}),EE({i18n:n,getInstanceWidth:s,getInstanceHeight:l,getInstanceDepth:c,forceUpdate:r}),IE({i18n:n,getInstanceWidth:s,getInstanceHeight:l,getInstanceDepth:c,forceUpdate:r})]},{name:"Keep ratio column",nonFieldType:"verticalCenterWithBar",child:ME({i18n:n,getInstanceWidth:s,getInstanceHeight:l,getInstanceDepth:c,forceUpdate:r})}]},wE({i18n:n,layout:a}),{name:"Rotation",type:"row",title:n._({id:"Rotation"}),preventWrap:!0,removeSpacers:!0,children:jE({i18n:n})},yE({i18n:n})]:[SE({i18n:n}),CE({i18n:n,onEditObjectByName:i,is3DInstance:t}),{name:"Position",type:"row",preventWrap:!0,removeSpacers:!0,children:ZE({i18n:n})},TE({i18n:n}),{name:"Size",type:"row",preventWrap:!0,children:[{name:"Custom size",type:"column",children:[PE({i18n:n,getInstanceWidth:s,getInstanceHeight:l,getInstanceDepth:c,forceUpdate:r}),EE({i18n:n,getInstanceWidth:s,getInstanceHeight:l,getInstanceDepth:c,forceUpdate:r})]},{name:"Keep ratio column",nonFieldType:"verticalCenterWithBar",child:ME({i18n:n,getInstanceWidth:s,getInstanceHeight:l,getInstanceDepth:c,forceUpdate:r})}]},wE({i18n:n,layout:a}),{name:"Rotation",type:"row",title:n._({id:"Rotation"}),preventWrap:!0,removeSpacers:!0,children:[yE({i18n:n})]}]},AE={paper:{display:"flex",flex:1,minWidth:0,flexDirection:"column"},icon:{fontSize:18}},FE=n.g.gd,OE=function(e){var t=e.instances,n=e.i18n,r=e.project,i=e.layout,o=e.unsavedChanges,c=e.historyHandler,u=e.onEditObjectByName,p=e.onGetInstanceSize,f=e.editInstanceVariables,h=e.onInstancesModified,g=(0,Pt.Z)(),x=l.useMemo((function(){return LE({i18n:n,is3DInstance:!1,onGetInstanceSize:p,onEditObjectByName:u,layout:i,forceUpdate:g})}),[n,p,u,i,g]),m=l.useMemo((function(){return LE({i18n:n,is3DInstance:!0,onGetInstanceSize:p,onEditObjectByName:u,layout:i,forceUpdate:g})}),[n,p,u,i,g]),C=t[0],j=l.useMemo((function(){if(!C)return{object:void 0,instanceSchema:void 0};var e=C.getObjectName(),t=Ku(r,i,e),o=C.getCustomProperties(r,i);if(!t)return{object:void 0,instanceSchema:void 0};var l=FE.MetadataProvider.getObjectMetadata(r.getCurrentPlatform(),t.getType()).isRenderedIn3D(),c=oE(o,(function(e){return e.getCustomProperties(r,i)}),(function(e,t,n){return e.updateCustomProperty(t,n,r,i)})),u=function(e,t){var n=(0,v.Z)(e),r=n.findIndex((function(e){return e.name&&"animation"===e.name})),i={nonFieldType:"sectionTitle",name:"Content",title:"Content",getValue:void 0};if(-1===r)return n.length>0&&n.unshift(i),n;var o=n.splice(r,1),l=(0,s.Z)(o,1)[0],c=[{name:"Animation",type:"row",title:t._({id:"Animation"}),children:[(0,a.Z)((0,a.Z)({},l),{},{hideLabel:!0})]}];return n.length>0&&c.push(i),n.unshift.apply(n,c),n}(c,n);return{object:t,instanceSchema:l?m.concat(u):x.concat(u)}}),[r,i,C,x,m,n]),y=j.object,Z=j.instanceSchema;return y&&C&&Z?(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Instance properties"}),scope:"scene-editor-instance-properties",children:(0,d.jsx)(Tt.Z,{autoHideScrollbar:!0,children:(0,d.jsxs)(L.sg,{expand:!0,noMargin:!0,id:"instance-properties-editor",children:[(0,d.jsxs)(L.sg,{children:[(0,d.jsx)(QP,{unsavedChanges:o,schema:Z,instances:t,onInstancesModified:h}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(qP,{}),(0,d.jsxs)(L.x1,{alignItems:"center",justifyContent:"space-between",children:[(0,d.jsx)(F.Z,{size:"sub-title",noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Instance Variables"})}),(0,d.jsx)(M.Z,{size:"small",onClick:function(){f(C)},children:(0,d.jsx)(ic.Z,{style:AE.icon})})]})]}),y?(0,d.jsx)(Un,{directlyStoreValueChangesWhileEditing:!0,inheritedVariablesContainer:y.getVariables(),variablesContainer:C.getVariables(),size:"small",onComputeAllVariableNames:function(){return y?fi.findAllObjectVariables(r.getCurrentPlatform(),r,i,y):[]},historyHandler:c,toolbarIconStyle:AE.icon}):null]})},t.map((function(e){return""+e.ptr})).join(";"))}):null},RE=l.forwardRef((function(e,t){var n=(0,Pt.Z)();return l.useImperativeHandle(t,(function(){return{forceUpdate:n}})),(0,d.jsx)(de.Z,{background:"dark",square:!0,style:AE.paper,children:e.instances&&e.instances.length?(0,d.jsx)(OE,(0,a.Z)({},e)):(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"Click on an instance in the scene to display its properties"})})})})),DE={direction:"row",first:"properties",splitPercentage:23,second:{direction:"row",first:"instances-editor",second:"objects-list",splitPercentage:77}},_E=function(){},BE={"objects-list":{position:"end",splitPercentage:75,direction:"column"},properties:{position:"start",splitPercentage:25,direction:"column"},"object-groups-list":{position:"end",splitPercentage:75,direction:"column"},"instances-list":{position:"end",splitPercentage:75,direction:"row"},"layers-list":{position:"end",splitPercentage:75,direction:"row"}},NE=l.forwardRef((function(e,t){var n=e.project,r=e.layout,i=e.initialInstances,o=e.selectedLayer,a=e.onSelectInstances,s=(0,w.U)().isMobile,c=l.useContext(se.ZP),u=c.getDefaultEditorMosaicNode,p=c.setDefaultEditorMosaicNode,f=e.instancesSelection.getSelectedInstances(),h=l.useRef(null),g=l.useRef(null),x=l.useRef(null),m=l.useRef(null),v=l.useRef(null),C=l.useRef(null),j=l.useRef(null),y=l.useCallback((function(){h.current&&h.current.forceUpdate()}),[]),Z=l.useCallback((function(){x.current&&x.current.forceUpdate()}),[]),k=l.useCallback((function(){v.current&&v.current.forceUpdateList()}),[]),T=l.useCallback((function(){j.current&&j.current.forceUpdate()}),[]),S=l.useCallback((function(){g.current&&g.current.forceUpdate()}),[]),P=l.useCallback((function(e){return m.current?m.current.getInstanceSize(e):[0,0,0]}),[]),E=l.useCallback((function(){v.current&&v.current.openNewObjectDialog()}),[]),I=l.useCallback((function(e){if(C.current){var t=BE[e];C.current.toggleEditor(e,t.position,t.splitPercentage,t.direction)}}),[]),M=l.useCallback((function(e){return!!C.current&&C.current.getOpenedEditorNames().includes(e)}),[]),L=l.useCallback((function(e){v.current&&v.current.renameObjectFolderOrObjectWithContext(e)}),[]),A=l.useCallback((function(e){var t=m.current;t&&(e?t.restartSceneRendering():t.pauseSceneRendering())}),[]);l.useImperativeHandle(t,(function(){var e=m.current;return{getName:function(){return"mosaic"},forceUpdateInstancesList:Z,forceUpdateInstancesPropertiesEditor:y,forceUpdateObjectsList:k,forceUpdateObjectGroupsList:T,forceUpdateLayersList:S,openNewObjectDialog:E,toggleEditorView:I,isEditorVisible:M,startSceneRendering:A,renameObjectFolderOrObjectWithContext:L,viewControls:{zoomBy:e?e.zoomBy:_E,setZoomFactor:e?e.setZoomFactor:_E,zoomToInitialPosition:e?e.zoomToInitialPosition:_E,zoomToFitContent:e?e.zoomToFitContent:_E,zoomToFitSelection:e?e.zoomToFitSelection:_E,centerViewOnLastInstance:e?e.centerViewOnLastInstance:_E,getLastCursorSceneCoordinates:e?e.getLastCursorSceneCoordinates:function(){return[0,0]},getLastContextMenuSceneCoordinates:e?e.getLastContextMenuSceneCoordinates:function(){return[0,0]},getViewPosition:e?e.getViewPosition:_E},instancesHandlers:{getSelectionAABB:e?e.selectedInstances.getSelectionAABB:function(){return new NT},addInstances:e?e.addInstances:function(){return[]},clearHighlightedInstance:e?e.clearHighlightedInstance:_E,resetInstanceRenderersFor:e?e.resetInstanceRenderersFor:_E,forceRemountInstancesRenderers:e?e.forceRemount:_E,addSerializedInstances:e?e.addSerializedInstances:function(){return[]}}}}));var F=l.useCallback((function(e,t){a(e,t),Z(),y()}),[Z,y,a]),O=e.selectedObjectFolderOrObjectsWithContext.map((function(e){var t=e.objectFolderOrObject;return t?t.isFolder()?null:t.getObject().getName():null})).filter(Boolean),R={properties:{type:"secondary",title:{id:"Properties"},renderEditor:function(){return(0,d.jsx)(b.I18n,{children:function(t){var i=t.i18n;return(0,d.jsx)(RE,{i18n:i,project:n,layout:r,instances:f,editInstanceVariables:e.editInstanceVariables,onEditObjectByName:e.editObjectByName,onInstancesModified:Z,onGetInstanceSize:P,ref:h,unsavedChanges:e.unsavedChanges,historyHandler:e.historyHandler})}})}},"layers-list":{type:"secondary",title:{id:"Layers"},renderEditor:function(){return(0,d.jsx)(VS,{project:n,selectedLayer:o,onSelectLayer:e.onSelectLayer,onEditLayerEffects:e.editLayerEffects,onEditLayer:e.editLayer,onRemoveLayer:e.onRemoveLayer,onLayerRenamed:e.onLayerRenamed,onCreateLayer:y,layersContainer:r,unsavedChanges:e.unsavedChanges,ref:g,hotReloadPreviewButtonProps:e.hotReloadPreviewButtonProps})}},"instances-list":{type:"secondary",title:{id:"Instances List"},renderEditor:function(){return(0,d.jsx)(lP,{instances:i,selectedInstances:f,onSelectInstances:F,ref:x})}},"instances-editor":{type:"primary",noTitleBar:!0,noSoftKeyboardAvoidance:!0,renderEditor:function(){return(0,d.jsx)(JS,{project:n,layout:r,selectedLayer:o,initialInstances:i,instancesEditorSettings:e.instancesEditorSettings,onInstancesEditorSettingsMutated:e.onInstancesEditorSettingsMutated,instancesSelection:e.instancesSelection,onInstancesAdded:e.onInstancesAdded,onInstancesSelected:e.onInstancesSelected,onInstanceDoubleClicked:e.onInstanceDoubleClicked,onInstancesMoved:e.onInstancesMoved,onInstancesResized:e.onInstancesResized,onInstancesRotated:e.onInstancesRotated,selectedObjectNames:O,onContextMenu:e.onContextMenu,isInstanceOf3DObject:e.isInstanceOf3DObject,instancesEditorShortcutsCallbacks:e.instancesEditorShortcutsCallbacks,wrappedEditorRef:function(e){m.current=e},pauseRendering:!e.isActive})}},"objects-list":{type:"secondary",title:{id:"Objects"},toolbarControls:[(0,d.jsx)(QS.Z,{},"close")],renderEditor:function(){return(0,d.jsx)(b.I18n,{children:function(t){var o=t.i18n;return(0,d.jsx)(Pk,{getThumbnail:Ju.Z.getThumbnail.bind(Ju.Z),project:n,objectsContainer:r,layout:r,initialInstances:i,onSelectAllInstancesOfObjectInLayout:e.onSelectAllInstancesOfObjectInLayout,resourceManagementProps:e.resourceManagementProps,selectedObjectFolderOrObjectsWithContext:e.selectedObjectFolderOrObjectsWithContext,canInstallPrivateAsset:e.canInstallPrivateAsset,onEditObject:e.onEditObject,onExportAssets:e.onExportAssets,onDeleteObjects:function(t,n){return e.onDeleteObjects(o,t,n)},getValidatedObjectOrGroupName:function(t,n){return e.getValidatedObjectOrGroupName(t,n,o)},onObjectCreated:e.onObjectCreated,onObjectFolderOrObjectWithContextSelected:e.onObjectFolderOrObjectWithContextSelected,onRenameObjectFolderOrObjectWithContextFinish:e.onRenameObjectFolderOrObjectWithContextFinish,onAddObjectInstance:e.onAddObjectInstance,onObjectPasted:e.updateBehaviorsSharedData,beforeSetAsGlobalObject:function(t){return e.canObjectOrGroupBeGlobal(o,t)},ref:v,unsavedChanges:e.unsavedChanges,hotReloadPreviewButtonProps:e.hotReloadPreviewButtonProps})}})}},"object-groups-list":{type:"secondary",title:{id:"Object Groups"},renderEditor:function(){return(0,d.jsx)(b.I18n,{children:function(t){var i=t.i18n;return(0,d.jsx)(Zb,{ref:j,globalObjectGroups:n.getObjectGroups(),objectGroups:r.getObjectGroups(),onEditGroup:e.onEditObjectGroup,onDeleteGroup:e.onDeleteObjectGroup,onRenameGroup:e.onRenameObjectGroup,getValidatedObjectOrGroupName:function(t,n){return e.getValidatedObjectOrGroupName(t,n,i)},beforeSetAsGlobalGroup:function(t){return e.canObjectOrGroupBeGlobal(i,t)},unsavedChanges:e.unsavedChanges})}})}}};return(0,d.jsx)(yv.Z,{editors:R,limitToOneSecondaryEditor:s,initialNodes:u("scene-editor")||DE,onOpenedEditorsChanged:e.onOpenedEditorsChanged,onPersistNodes:function(e){return p("scene-editor",e)},ref:C})})),UE=NE,HE=function(e){var t=e.containerRef,n=e.onSwipeDown,r=e.onSwipeUp,i=l.useRef(null),o=l.useRef(null);return{onTouchStart:l.useCallback((function(e){i.current=Date.now(),o.current=e.touches[0].clientY,t.current&&(t.current.style.transform="translateY(0px)")}),[t]),onTouchMove:l.useCallback((function(e){var n=e.touches[0].clientY,r=o.current||n,i=Math.min(30,Math.max(-30,n-r));t.current&&(t.current.style.transform="translateY(".concat(i,"px)"))}),[t]),onTouchEnd:l.useCallback((function(e){if(o.current&&i.current){var a=o.current,s=i.current,l=e.changedTouches[0].clientY-a,c=(Date.now()-s)/1e3;Math.abs(l)>30&&Math.abs(l)/c>200&&(l<0?r():n()),t.current&&(t.current.style.transform="translateY(0px)"),i.current=null,o.current=null}}),[r,n,t])}},VE={container:{flexDirection:"column",overflow:"hidden"},childrenContainer:{display:"flex",flex:1,overflowY:"auto",overflowX:"hidden"},topBarContainer:{borderRadius:"8px 8px 0 0",padding:4},topBarHandleContainer:{height:4,display:"flex",justifyContent:"center",alignItems:"center"},topBarHandle:{height:4,width:"40%",borderRadius:2}},zE=function(e){var t=l.useContext(f.Z),n=HE({onSwipeUp:e.onSwipeUp,onSwipeDown:e.onSwipeDown,containerRef:e.containerRef}),r=n.onTouchStart,i=n.onTouchEnd,o=n.onTouchMove;return(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},VE.topBarContainer),{},{backgroundColor:(0,de.d)(t,"light")}),onClick:e.onClick,onTouchStart:r,onTouchEnd:i,onTouchMove:o,children:(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)("div",{style:VE.topBarHandleContainer,children:(0,d.jsx)("span",{style:(0,a.Z)((0,a.Z)({},VE.topBarHandle),{},{backgroundColor:t.swipeableDrawer.topBar.pillColor})})}),(0,d.jsx)(L.sg,{children:(0,d.jsxs)(L.x1,{noMargin:!0,justifyContent:e.controls?"space-between":"flex-start",alignItems:"center",children:[(0,d.jsx)(F.Z,{size:"sub-title",noMargin:!0,children:e.title}),e.controls]})})]})})};var WE=function(e){var t=l.useRef(null),n=e.openingState,r=e.setOpeningState,i="closed"===n?0:"halfOpen"===n?.42*e.maxHeight:e.maxHeight-52,o="closed"===n?"none":"flex",s=function(e){var t=l.useRef(e);return l.useEffect((function(){t.current=e}),[e]),"halfOpen"===e&&"closed"===t.current?"swipe-up-ending":null}(n),c=(0,bm.T)();return(0,d.jsxs)("div",{style:(0,a.Z)((0,a.Z)((0,a.Z)({},VE.container),{},{height:i,display:o},(0,bm.E)(c)),{},{animation:s?"".concat(s," 0.4s ease-out"):void 0}),ref:t,children:[(0,d.jsx)(zE,{containerRef:t,title:e.title,onClick:function(){return r("closed")},onSwipeUp:function(){"halfOpen"===n&&r("open")},onSwipeDown:function(){"halfOpen"===n?r("closed"):"open"===n&&r("halfOpen")},controls:e.topBarControls}),(0,d.jsx)("div",{style:VE.childrenContainer,children:e.children})]})},GE={iconButton:{padding:"".concat(8,"px ").concat(8,"px ").concat(20,"px ").concat(8,"px"),fontSize:"inherit"},buttonLabel:{padding:2,display:"flex"},container:{fontSize:24}},YE={"objects-list":{buttonId:"toolbar-open-objects-panel-button",icon:(0,d.jsx)(vf,{fontSize:"inherit"})},"object-groups-list":{buttonId:"toolbar-open-object-groups-panel-button",icon:(0,d.jsx)(xT,{fontSize:"inherit"})},properties:{buttonId:"toolbar-open-properties-panel-button",icon:(0,d.jsx)(bt.Z,{fontSize:"inherit"})},"instances-list":{buttonId:"toolbar-open-instances-list-panel-button",icon:(0,d.jsx)(mT,{fontSize:"inherit"})},"layers-list":{buttonId:"toolbar-open-layers-panel-button",icon:(0,d.jsx)(vT,{fontSize:"inherit"})}},qE=l.memo((function(e){return(0,d.jsx)(de.Z,{background:"medium",square:!0,style:GE.container,children:(0,d.jsx)(g,{height:56,children:(0,d.jsx)(m,{children:Object.keys(YE).map((function(t){var n=YE[t],r=n.icon,i=n.buttonId,o=e.selectedEditorId===t;return(0,d.jsx)(M.Z,{color:"default",disableRipple:!0,disableFocusRipple:!0,style:GE.iconButton,id:i,onClick:function(){e.onSelectEditor(t)},selected:o,children:(0,d.jsx)("span",{style:GE.buttonLabel,children:r})},t)}))})})})})),XE=qE,KE="swipeable-drawer-container",JE={"objects-list":(0,d.jsx)(b.Trans,{id:"Objects"}),properties:(0,d.jsx)(b.Trans,{id:"Instance properties"}),"object-groups-list":(0,d.jsx)(b.Trans,{id:"Objects groups"}),"instances-list":(0,d.jsx)(b.Trans,{id:"Instances"}),"layers-list":(0,d.jsx)(b.Trans,{id:"Layers"})},QE=function(){},$E={container:{width:"100%"},bottomContainer:{position:"absolute",bottom:0,width:"100%"},instancesListContainer:{display:"flex",flex:1}},eI=l.forwardRef((function(e,t){var n=e.project,r=e.layout,i=e.initialInstances,o=e.selectedLayer,a=e.onSelectInstances,c=e.instancesSelection.getSelectedInstances(),u=l.useContext(se.ZP).values,p=(0,Gr.BF)(),f=l.useRef(null),h=l.useRef(null),g=l.useRef(null),x=l.useRef(null),m=l.useRef(null),v=l.useRef(null),C=l.useState(null),j=(0,s.Z)(C,2),y=j[0],Z=j[1],k=l.useState("closed"),w=(0,s.Z)(k,2),T=w[0],S=w[1],P=l.useCallback((function(e){y===e?S("closed"===T?"halfOpen":"closed"):(Z(e||null),"closed"===T&&S("halfOpen"))}),[y,T]),E=l.useCallback((function(){f.current&&f.current.forceUpdate()}),[]),I=l.useCallback((function(){g.current&&g.current.forceUpdate()}),[]),M=l.useCallback((function(){m.current&&m.current.forceUpdateList()}),[]),L=l.useCallback((function(){v.current&&v.current.forceUpdate()}),[]),A=l.useCallback((function(){h.current&&h.current.forceUpdate()}),[]),F=l.useCallback((function(e){return x.current?x.current.getInstanceSize(e):[0,0,0]}),[]),O=l.useCallback((function(){m.current&&m.current.openNewObjectDialog()}),[]),R=l.useCallback((function(e){return e===y&&"closed"!==T}),[y,T]),D=l.useCallback((function(e){m.current&&m.current.renameObjectFolderOrObjectWithContext(e)}),[]),_=l.useCallback((function(e){var t=x.current;t&&(e?t.restartSceneRendering():t.pauseSceneRendering())}),[]);l.useImperativeHandle(t,(function(){var e=x.current;return{getName:function(){return"swipeableDrawer"},forceUpdateInstancesList:I,forceUpdateInstancesPropertiesEditor:E,forceUpdateObjectsList:M,forceUpdateObjectGroupsList:L,forceUpdateLayersList:A,openNewObjectDialog:O,toggleEditorView:P,isEditorVisible:R,startSceneRendering:_,renameObjectFolderOrObjectWithContext:D,viewControls:{zoomBy:e?e.zoomBy:QE,setZoomFactor:e?e.setZoomFactor:QE,zoomToInitialPosition:e?e.zoomToInitialPosition:QE,zoomToFitContent:e?e.zoomToFitContent:QE,zoomToFitSelection:e?e.zoomToFitSelection:QE,centerViewOnLastInstance:e?e.centerViewOnLastInstance:QE,getLastCursorSceneCoordinates:e?e.getLastCursorSceneCoordinates:function(){return[0,0]},getLastContextMenuSceneCoordinates:e?e.getLastContextMenuSceneCoordinates:function(){return[0,0]},getViewPosition:e?e.getViewPosition:QE},instancesHandlers:{getSelectionAABB:e?e.selectedInstances.getSelectionAABB:function(){return new NT},addInstances:e?e.addInstances:function(){return[]},clearHighlightedInstance:e?e.clearHighlightedInstance:QE,resetInstanceRenderersFor:e?e.resetInstanceRenderersFor:QE,forceRemountInstancesRenderers:e?e.forceRemount:QE,addSerializedInstances:e?e.addSerializedInstances:function(){return[]}}}}));var B=l.useCallback((function(e,t){a(e,t,"upperCenter"),I(),E()}),[I,E,a]),N=e.selectedObjectFolderOrObjectsWithContext.map((function(e){var t=e.objectFolderOrObject;return t?t.isFolder()?null:t.getObject().getName():null})).filter(Boolean);return(0,d.jsx)(DS,{children:function(t){var a=t.width,s=t.height;return(0,d.jsxs)("div",{style:$E.container,children:[(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Instances editor."}),scope:"scene-editor-canvas",children:(0,d.jsx)(CS,{ref:x,height:s,width:a,project:n,layout:r,selectedLayer:o,screenType:p,initialInstances:i,instancesEditorSettings:e.instancesEditorSettings,onInstancesEditorSettingsMutated:e.onInstancesEditorSettingsMutated,instancesSelection:e.instancesSelection,onInstancesAdded:e.onInstancesAdded,onInstancesSelected:e.onInstancesSelected,onInstanceDoubleClicked:e.onInstanceDoubleClicked,onInstancesMoved:e.onInstancesMoved,onInstancesResized:e.onInstancesResized,onInstancesRotated:e.onInstancesRotated,selectedObjectNames:N,onContextMenu:e.onContextMenu,isInstanceOf3DObject:e.isInstanceOf3DObject,instancesEditorShortcutsCallbacks:e.instancesEditorShortcutsCallbacks,pauseRendering:!e.isActive,showObjectInstancesIn3D:u.use3DEditor})}),(0,d.jsxs)("div",{style:$E.bottomContainer,id:KE,children:[(0,d.jsxs)(WE,{maxHeight:s,title:y?JE[y]:null,openingState:T,setOpeningState:S,children:["objects-list"===y&&(0,d.jsx)(b.I18n,{children:function(t){var o=t.i18n;return(0,d.jsx)(Pk,{getThumbnail:Ju.Z.getThumbnail.bind(Ju.Z),project:n,objectsContainer:r,layout:r,initialInstances:i,onSelectAllInstancesOfObjectInLayout:e.onSelectAllInstancesOfObjectInLayout,resourceManagementProps:e.resourceManagementProps,selectedObjectFolderOrObjectsWithContext:e.selectedObjectFolderOrObjectsWithContext,canInstallPrivateAsset:e.canInstallPrivateAsset,onEditObject:e.onEditObject,onExportAssets:e.onExportAssets,onDeleteObjects:function(t,n){return e.onDeleteObjects(o,t,n)},getValidatedObjectOrGroupName:function(t,n){return e.getValidatedObjectOrGroupName(t,n,o)},onObjectCreated:e.onObjectCreated,onObjectFolderOrObjectWithContextSelected:e.onObjectFolderOrObjectWithContextSelected,onRenameObjectFolderOrObjectWithContextFinish:e.onRenameObjectFolderOrObjectWithContextFinish,onAddObjectInstance:function(t){return e.onAddObjectInstance(t,"upperCenter")},onObjectPasted:e.updateBehaviorsSharedData,beforeSetAsGlobalObject:function(t){return e.canObjectOrGroupBeGlobal(o,t)},ref:m,unsavedChanges:e.unsavedChanges,hotReloadPreviewButtonProps:e.hotReloadPreviewButtonProps})}}),"properties"===y&&(0,d.jsx)(b.I18n,{children:function(t){var i=t.i18n;return(0,d.jsx)(RE,{i18n:i,project:n,layout:r,instances:c,editInstanceVariables:e.editInstanceVariables,onEditObjectByName:e.editObjectByName,onInstancesModified:I,onGetInstanceSize:F,ref:f,unsavedChanges:e.unsavedChanges,historyHandler:e.historyHandler})}}),"object-groups-list"===y&&(0,d.jsx)(b.I18n,{children:function(t){var i=t.i18n;return(0,d.jsx)(Zb,{ref:v,globalObjectGroups:n.getObjectGroups(),objectGroups:r.getObjectGroups(),onEditGroup:e.onEditObjectGroup,onDeleteGroup:e.onDeleteObjectGroup,onRenameGroup:e.onRenameObjectGroup,getValidatedObjectOrGroupName:function(t,n){return e.getValidatedObjectOrGroupName(t,n,i)},beforeSetAsGlobalGroup:function(t){return e.canObjectOrGroupBeGlobal(i,t)},unsavedChanges:e.unsavedChanges})}}),"instances-list"===y&&(0,d.jsx)(de.Z,{background:"medium",square:!0,style:$E.instancesListContainer,children:(0,d.jsx)(lP,{instances:i,selectedInstances:c,onSelectInstances:B,ref:g})}),"layers-list"===y&&(0,d.jsx)(VS,{project:n,selectedLayer:o,onSelectLayer:e.onSelectLayer,onEditLayerEffects:e.editLayerEffects,onEditLayer:e.editLayer,onRemoveLayer:e.onRemoveLayer,onLayerRenamed:e.onLayerRenamed,onCreateLayer:E,layersContainer:r,unsavedChanges:e.unsavedChanges,ref:h,hotReloadPreviewButtonProps:e.hotReloadPreviewButtonProps})]}),(0,d.jsx)(XE,{selectedEditorId:"closed"===T?null:y,onSelectEditor:P})]})]})}})})),tI=eI,nI=n.g.gd,rI=function(e,t,n){var r=new Set;return(0,Et.mapVector)(t.getAllObjectFolderOrObjects(),(function(e){r.add(nI.getPointer(e))})),(0,Et.mapVector)(e.getAllObjectFolderOrObjects(),(function(e){r.add(nI.getPointer(e))})),n.filter((function(e){return r.has(nI.getPointer(e.objectFolderOrObject))}))},iI=n.g.gd,oI="Instances",aI={container:{display:"flex",flex:1,position:"relative",overflow:"hidden"}},sI=(0,d.jsx)(gm,{}),lI=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(e){var r;return(0,ot.Z)(this,n),(r=t.call(this,e)).onResourceExternallyChanged=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,o,a,s,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.props.project,!(o=n.getResourcesManager().getResourceNameWithFile(t.identifier))){e.next=20;break}if(a=(0,Gc.Z)(r),s=a.editorDisplay){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,s.startSceneRendering(!1),e.next=10,PT.Z.reloadResource(n,o);case 10:s.forceUpdateObjectsList(),l=new iI.ObjectsUsingResourceCollector(n.getResourcesManager(),o),iI.ProjectBrowserHelper.exposeProjectObjects(n,l),c=l.getObjectNames().toJSArray(),l.delete(),Ju.Z.renderersCacheClearingMethods.forEach((function(e){return e(n)})),c.forEach((function(e){s.instancesHandlers.resetInstanceRenderersFor(e)}));case 17:return e.prev=17,s.startSceneRendering(!0),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[6,,17,20]])})));return function(t){return e.apply(this,arguments)}}(),r.updateToolbar=function(){var e=(0,Gc.Z)(r).editorDisplay;e&&("mosaic"===e.getName()?r.props.setToolbar((0,d.jsx)(jT,{selectedInstancesCount:r.instancesSelection.getSelectedInstances().length,toggleObjectsList:r.toggleObjectsList,isObjectsListShown:e.isEditorVisible("objects-list"),toggleObjectGroupsList:r.toggleObjectGroupsList,isObjectGroupsListShown:e.isEditorVisible("object-groups-list"),toggleProperties:r.toggleProperties,isPropertiesShown:e.isEditorVisible("properties"),deleteSelection:r.deleteSelection,toggleInstancesList:r.toggleInstancesList,isInstancesListShown:e.isEditorVisible("instances-list"),toggleLayersList:r.toggleLayersList,isLayersListShown:e.isEditorVisible("layers-list"),toggleWindowMask:r.toggleWindowMask,isWindowMaskShown:!!r.state.instancesEditorSettings.windowMask,toggleGrid:r.toggleGrid,isGridShown:!!r.state.instancesEditorSettings.grid,openSetupGrid:r.openSetupGrid,setZoomFactor:r.setZoomFactor,getContextMenuZoomItems:r.getContextMenuZoomItems,canUndo:Nt(r.state.history),canRedo:Bt(r.state.history),undo:r.undo,redo:r.redo,onOpenSettings:r.openSceneProperties,settingsIcon:sI,canRenameObject:1===r.state.selectedObjectFolderOrObjectsWithContext.length,onRenameObject:r._startRenamingSelectedObject})):r.props.setToolbar((0,d.jsx)(yT,{selectedInstancesCount:r.instancesSelection.getSelectedInstances().length,toggleObjectsList:r.toggleObjectsList,toggleObjectGroupsList:r.toggleObjectGroupsList,toggleProperties:r.toggleProperties,deleteSelection:r.deleteSelection,toggleInstancesList:r.toggleInstancesList,toggleLayersList:r.toggleLayersList,toggleWindowMask:r.toggleWindowMask,isWindowMaskShown:!!r.state.instancesEditorSettings.windowMask,toggleGrid:r.toggleGrid,isGridShown:!!r.state.instancesEditorSettings.grid,openSetupGrid:r.openSetupGrid,setZoomFactor:r.setZoomFactor,getContextMenuZoomItems:r.getContextMenuZoomItems,canUndo:Nt(r.state.history),canRedo:Bt(r.state.history),undo:r.undo,redo:r.redo,onOpenSettings:r.openSceneProperties,settingsIcon:sI,canRenameObject:1===r.state.selectedObjectFolderOrObjectsWithContext.length,onRenameObject:r._startRenamingSelectedObject})))},r.toggleObjectsList=function(){r.editorDisplay&&r.editorDisplay.toggleEditorView("objects-list")},r.toggleProperties=function(){r.editorDisplay&&r.editorDisplay.toggleEditorView("properties")},r.toggleObjectGroupsList=function(){r.editorDisplay&&r.editorDisplay.toggleEditorView("object-groups-list")},r.toggleInstancesList=function(){r.editorDisplay&&r.editorDisplay.toggleEditorView("instances-list")},r.toggleLayersList=function(){r.editorDisplay&&r.editorDisplay.toggleEditorView("layers-list")},r.toggleWindowMask=function(){r.setState({instancesEditorSettings:(0,a.Z)((0,a.Z)({},r.state.instancesEditorSettings),{},{windowMask:!r.state.instancesEditorSettings.windowMask})},(function(){return r.updateToolbar()}))},r.toggleGrid=function(){r.setState({instancesEditorSettings:(0,a.Z)((0,a.Z)({},r.state.instancesEditorSettings),{},{grid:!r.state.instancesEditorSettings.grid,snap:!r.state.instancesEditorSettings.grid})},(function(){return r.updateToolbar()}))},r.openSetupGrid=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];r.setState({setupGridOpen:e})},r.openSceneProperties=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];r.setState({scenePropertiesDialogOpen:e})},r.openObjectEditor=function(){if(r.instancesSelection.hasSelectedInstances()){var e=r.instancesSelection.getSelectedInstances()[0].getObjectName();r.editObjectByName(e)}},r.editLayerEffects=function(e){r.setState({editedLayer:e,editedLayerInitialTab:"effects"})},r.editLayer=function(e){r.setState({editedLayer:e,editedLayerInitialTab:"properties"})},r.editInstanceVariables=function(e){r.setState({variablesEditedInstance:e})},r.editLayoutVariables=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];r.setState({layoutVariablesDialogOpen:e})},r.editObject=function(e,t){var n=r.props.project;e?r.setState({editedObjectWithContext:{object:e,global:n.hasObjectNamed(e.getName())},editedObjectInitialTab:t||"properties"}):r.setState({editedObjectWithContext:null,editedObjectInitialTab:"properties"})},r.openObjectExporterDialog=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];r.setState({isAssetExporterDialogOpen:e})},r.editObjectByName=function(e,t){var n=r.props,i=n.project,o=n.layout;o.hasObjectNamed(e)?r.editObject(o.getObject(e),t):i.hasObjectNamed(e)&&r.editObject(i.getObject(e),t)},r.editGroup=function(e){r.setState({editedGroup:e})},r.setInstancesEditorSettings=function(e){r.setState({instancesEditorSettings:e})},r._onInstancesEditorSettingsMutated=gp()((function(e){r.setInstancesEditorSettings(e)}),1e3,{leading:!1,trailing:!0}),r.undo=function(){r.instancesSelection.clearSelection(),r.setState({history:Ht(r.state.history,r.props.initialInstances)},(function(){r.editorDisplay&&r.editorDisplay.instancesHandlers.forceRemountInstancesRenderers(),r.updateToolbar()}))},r.redo=function(){r.instancesSelection.clearSelection(),r.setState({history:Vt(r.state.history,r.props.initialInstances)},(function(){r.editorDisplay&&r.editorDisplay.instancesHandlers.forceRemountInstancesRenderers(),r.updateToolbar()}))},r._onObjectFolderOrObjectWithContextSelected=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=[];e&&t.push(e),r.setState({selectedObjectFolderOrObjectsWithContext:t},(function(){r.updateToolbar()}))},r._createNewObjectAndInstanceUnderCursor=function(){r.editorDisplay&&(r.setState({newObjectInstanceSceneCoordinates:r.editorDisplay.viewControls.getLastCursorSceneCoordinates()}),r.editorDisplay?r.editorDisplay.openNewObjectDialog():r.toggleObjectsList())},r.addInstanceOnTheScene=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center";if(r.editorDisplay){var n=r.editorDisplay.viewControls.getViewPosition(),i=[0,0];n&&(i=n.toSceneCoordinates(n.getWidth()/2,n.getHeight()/("upperCenter"===t?4:2))),r._addInstance(i,e)}},r._addInstance=function(e,t){if(t&&r.editorDisplay){var n=r.editorDisplay.instancesHandlers.addInstances(e,[t],r.state.selectedLayer);r._onInstancesAdded(n)}},r._onInstancesAdded=function(e){var t=null;e.forEach((function(e){null===t&&(r.props.layout.getLayer(e.getLayer()).getVisibility()||(t=e.getLayer()));var n=function(e,t,n){var r=e.getObjectName(),i=null;t.hasObjectNamed(r)?i=t.getObject(r):n.hasObjectNamed(r)&&(i=n.getObject(r));var o=i?MT[i.getType()]:null;return o?(o.onInstanceAdded(e,t,n),o.getInfoBarDetails("onInstanceAdded")):null}(e,r.props.layout,r.props.project);n&&r.setState({additionalWorkInfoBar:n,showAdditionalWorkInfoBar:!0})})),null!==t&&r.onInstanceAddedOnInvisibleLayer(t),r.setState({history:Ut(r.state.history,r.props.initialInstances,"ADD")},(function(){return r.updateToolbar()}))},r.onInstanceAddedOnInvisibleLayer=function(e){r.setState({invisibleLayerOnWhichInstancesHaveJustBeenAdded:e})},r._onInstancesSelected=function(e){if(0!==e.length){var t=r.props,n=t.project,i=t.layout,o=e[e.length-1].getObjectName();n.hasObjectNamed(o)?r.setState({selectedObjectFolderOrObjectsWithContext:[{objectFolderOrObject:n.getRootFolder().getObjectNamed(o),global:!0}]},r.updateToolbar):i.hasObjectNamed(o)&&r.setState({selectedObjectFolderOrObjectsWithContext:[{objectFolderOrObject:i.getRootFolder().getObjectNamed(o),global:!1}]},r.updateToolbar)}else r.setState({selectedObjectFolderOrObjectsWithContext:[]},r.updateToolbar)},r._onInstanceDoubleClicked=function(e){r.editObjectByName(e.getObjectName())},r._onInstancesMoved=function(e){r.setState({history:Ut(r.state.history,r.props.initialInstances,"EDIT")},(function(){return r.forceUpdatePropertiesEditor()}))},r._onInstancesResized=function(e){r.setState({history:Ut(r.state.history,r.props.initialInstances,"EDIT")},(function(){return r.forceUpdatePropertiesEditor()}))},r._onInstancesRotated=function(e){r.setState({history:Ut(r.state.history,r.props.initialInstances,"EDIT")},(function(){return r.forceUpdatePropertiesEditor()}))},r._onInstancesModified=function(e){r.forceUpdate()},r._onSelectInstances=function(e,t,n){if(r.instancesSelection.selectInstances({instances:e,multiSelect:t,layersLocks:null,ignoreSeal:!0}),r.editorDisplay){var i=null,o=r.editorDisplay.viewControls,a=o.getViewPosition();a&&"upperCenter"===n&&(i=[0,a.toSceneScale(a.getHeight()/4)]),o.centerViewOnLastInstance(e,i)}r.updateToolbar()},r._addInstanceForNewObject=function(e){var t=r.state.newObjectInstanceSceneCoordinates;t&&(r._addInstance(t,e),r.setState({newObjectInstanceSceneCoordinates:null}))},r._onObjectCreated=function(e){var t=function(e,t,n){var r=MT[e.getType()];return r?(r.onObjectAdded(e,t,n),r.getInfoBarDetails("onObjectAdded")):null}(e,r.props.layout,r.props.project);t&&r.setState({additionalWorkInfoBar:t,showAdditionalWorkInfoBar:!0}),r.props.unsavedChanges&&r.props.unsavedChanges.triggerUnsavedChanges(),r._addInstanceForNewObject(e.getName())},r._onRemoveLayer=function(e,t){r.setState({layerRemoved:e,onCloseLayerRemoveDialog:function(n,i){r.setState(function(t){var n={layerRemoved:null};return t&&e===r.state.selectedLayer&&(n.selectedLayer=""),n}(n),(function(){n&&(null===i?(r.instancesSelection.unselectInstancesOnLayer(e),iI.WholeProjectRefactorer.removeLayer(r.props.project,r.props.layout,e)):iI.WholeProjectRefactorer.mergeLayers(r.props.project,r.props.layout,e,i)),t(n),r.editorDisplay&&r.editorDisplay.instancesHandlers.forceRemountInstancesRenderers(),r.forceUpdateLayersList(),r.forceUpdatePropertiesEditor(),r.updateToolbar()}))}})},r._startRenamingSelectedObject=function(){var e=r.state.selectedObjectFolderOrObjectsWithContext[0];e&&(r.editorDisplay&&r.editorDisplay.renameObjectFolderOrObjectWithContext(e),r.updateToolbar())},r._onLayerRenamed=function(){r.forceUpdatePropertiesEditor()},r._onDeleteObjects=function(e,t,n){var i=1===t.length?{id:"Do you want to remove all references to this object in groups and events (actions and conditions using the object)?"}:{id:"Do you want to remove all references to these objects in groups and events (actions and conditions using the objects)?"},o=Y.ZP.showYesNoCancelDialog(e._(i));if("cancel"!==o){var a="yes"===o,s=r.props,l=s.project,c=s.layout;t.forEach((function(e){var t=e.object,n=e.global;r.instancesSelection.unselectInstancesOfObject(t.getName()),n?iI.WholeProjectRefactorer.globalObjectOrGroupRemoved(l,t.getName(),!1,a):iI.WholeProjectRefactorer.objectOrGroupRemovedInLayout(l,c,t.getName(),!1,a)})),n(!0),r.forceUpdatePropertiesEditor(),r.updateToolbar()}},r._getValidatedObjectOrGroupName=function(e,t,n){var i=r.props,o=i.project,a=i.layout;return(0,It.Z)(iI.Project.getSafeName(e),(function(e){if(a.hasObjectNamed(e)||o.hasObjectNamed(e)||a.getObjectGroups().has(e)||o.getObjectGroups().has(e))return!0;if(t){var n=a.getName();if((0,Et.mapFor)(0,o.getLayoutsCount(),(function(t){var r=o.getLayoutAt(t),i=r.getName();if(n!==i){if(r.hasObjectNamed(e))return i;if(r.getObjectGroups().has(e))return i}return null})).filter(Boolean).length>0)return!0}return!1}))},r._onRenameEditedObject=function(e){var t=r.state.editedObjectWithContext;t&&r._onRenameObjectFinish(t,e)},r._onRenameObjectFinish=function(e,t){var n=e.object,i=e.global,o=r.props,a=o.project,s=o.layout;n.getName()!==t&&(i?iI.WholeProjectRefactorer.globalObjectOrGroupRenamed(a,n.getName(),t,!1):iI.WholeProjectRefactorer.objectOrGroupRenamedInLayout(a,s,n.getName(),t,!1),n.setName(t))},r._onRenameObjectFolderOrObjectWithContextFinish=function(e,t,n){var i=e.objectFolderOrObject,o=e.global;if(Cx(i)===t)return r._onObjectFolderOrObjectWithContextSelected(e),void n(!1);if(i.isFolder())return i.setFolderName(t),void n(!0);var a=i.getObject();r._onRenameObjectFinish({object:a,global:o},t),r._onObjectFolderOrObjectWithContextSelected(e),n(!0)},r._onMoveInstancesZOrder=function(e){var t=r.instancesSelection.getSelectedInstances(),n=t.reduce((function(e,t){return t.isLocked()||e.add(t.getLayer()),e}),new Set),i=new iI.HighestZOrderFinder,o={};n.forEach((function(t){i.reset(),i.restrictSearchToLayer(t),r.props.initialInstances.iterateOverInstances(i),o[t]="back"===e?i.getLowestZOrder():i.getHighestZOrder()})),i.delete(),t.forEach((function(t){if(!t.isLocked()){var n=o[t.getLayer()];if(t.getZOrder()===n)return;t.setZOrder(n+("front"===e?1:-1))}})),r.forceUpdateInstancesList(),r.forceUpdatePropertiesEditor()},r._onDeleteGroup=function(e,t){var n=e.group,i=e.global,o=r.props,a=o.project,s=o.layout,l=Y.ZP.showConfirmDialog("Do you want to remove all references to this group in events (actions and conditions using the group)?");i?iI.WholeProjectRefactorer.globalObjectOrGroupRemoved(a,n.getName(),!0,!!l):iI.WholeProjectRefactorer.objectOrGroupRemovedInLayout(a,s,n.getName(),!0,!!l),t(!0)},r._onRenameGroup=function(e,t,n){var i=e.group,o=e.global,a=r.props,s=a.project,l=a.layout;i.getName()!==t&&(o?iI.WholeProjectRefactorer.globalObjectOrGroupRenamed(s,i.getName(),t,!0):iI.WholeProjectRefactorer.objectOrGroupRenamedInLayout(s,l,i.getName(),t,!0)),n(!0)},r.canObjectOrGroupBeGlobal=function(e,t){var n=r.props,i=n.layout,o=n.project,a=i.getName(),s=(0,Et.mapFor)(0,o.getLayoutsCount(),(function(e){var n=o.getLayoutAt(e),r=n.getName();if(a!==r){if(n.hasObjectNamed(t))return r;if(n.getObjectGroups().has(t))return r}return null})).filter(Boolean);return!(s.length>0)||Y.ZP.showConfirmDialog(e._({id:'Making "{objectOrGroupName}" global would conflict with the following scenes that have a group or an object with the same name:{0}Continue only if you know what you\'re doing.',values:{0:"\n\n - "+s.join("\n\n - ")+"\n\n",objectOrGroupName:t}}),"warning")},r.deleteSelection=function(){r.instancesSelection.getSelectedInstances().forEach((function(e){e.isLocked()||r.props.initialInstances.removeInstance(e)})),r.instancesSelection.clearSelection(),r.editorDisplay&&r.editorDisplay.instancesHandlers.clearHighlightedInstance(),r.setState({selectedObjectFolderOrObjectsWithContext:[],history:Ut(r.state.history,r.props.initialInstances,"DELETE")},(function(){r.updateToolbar(),r.forceUpdatePropertiesEditor()}))},r.zoomToInitialPosition=function(){r.editorDisplay&&r.editorDisplay.viewControls.zoomToInitialPosition()},r.zoomToFitContent=function(){r.editorDisplay&&r.editorDisplay.viewControls.zoomToFitContent()},r.zoomToFitSelection=function(){var e=r.instancesSelection.getSelectedInstances();r.editorDisplay&&r.editorDisplay.viewControls.zoomToFitSelection(e)},r.getContextMenuZoomItems=function(e){return[{label:e._({id:"Zoom in"}),click:r.zoomIn,accelerator:"CmdOrCtrl+numadd"},{label:e._({id:"Zoom out"}),click:r.zoomOut,accelerator:"CmdOrCtrl+numsub"},{label:e._({id:"Zoom to fit selection"}),click:r.zoomToFitSelection,enabled:r.instancesSelection.hasSelectedInstances(),accelerator:"Shift+num1"},{label:e._({id:"Zoom to initial position"}),click:r.zoomToInitialPosition,accelerator:"Shift+num2"},{label:e._({id:"Zoom to fit content"}),click:r.zoomToFitContent,accelerator:"Shift+num3"}]},r.getContextMenuLayoutItems=function(e){return[{label:e._({id:"Open scene events"}),click:function(){return r.props.onOpenEvents(r.props.layout.getName())}},{label:e._({id:"Open scene properties"}),click:function(){return r.openSceneProperties(!0)}}]},r.getContextMenuInstancesWiseItems=function(e){var t=r.instancesSelection.hasSelectedInstances();return[{label:e._({id:"Copy"}),click:function(){return r.copySelection()},enabled:t,accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return r.cutSelection()},enabled:t,accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),click:function(){return r.paste()},enabled:Rt.has(oI),accelerator:"CmdOrCtrl+V"},{label:e._({id:"Duplicate"}),enabled:t,click:function(){r.duplicateSelection()},accelerator:"CmdOrCtrl+D"},{type:"separator"},{label:e._({id:"Bring to front"}),enabled:t,click:function(){r._onMoveInstancesZOrder("front")}},{label:e._({id:"Send to back"}),enabled:t,click:function(){r._onMoveInstancesZOrder("back")}},{type:"separator"},{label:e._({id:"Show/Hide instance properties"}),click:function(){return r.toggleProperties()},enabled:t},{label:e._({id:"Delete"}),click:function(){return r.deleteSelection()},enabled:t,accelerator:"Delete"}]},r.setZoomFactor=function(e){r.editorDisplay&&r.editorDisplay.viewControls.setZoomFactor(e)},r.zoomIn=function(){r.editorDisplay&&r.editorDisplay.viewControls.zoomBy(LT.Qi)},r.zoomOut=function(){r.editorDisplay&&r.editorDisplay.viewControls.zoomBy(LT.e_)},r._onContextMenu=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r.contextMenu&&r.contextMenu.open(e,t,{ignoreSelectedObjectsForContextMenu:!!n})},r.isInstanceOf3DObject=function(e){var t=r.props,n=t.project,i=Ku(n,t.layout,e.getObjectName());return!!i&&iI.MetadataProvider.getObjectMetadata(n.getCurrentPlatform(),i.getType()).isRenderedIn3D()},r.buildContextMenu=function(e,t,n){if(n.ignoreSelectedObjectsForContextMenu||!r.instancesSelection.hasSelectedInstances())return[{label:e._({id:"Paste"}),click:function(){return r.paste()},enabled:Rt.has(oI),accelerator:"CmdOrCtrl+V"},{type:"separator"},{label:e._({id:"Insert new..."}),click:function(){return r._createNewObjectAndInstanceUnderCursor()}},{type:"separator"}].concat((0,v.Z)(r.getContextMenuZoomItems(e)),[{type:"separator"}],(0,v.Z)(r.getContextMenuLayoutItems(e)));var i=r.instancesSelection.getSelectedInstances();if(1===i.length||1===Wf()(i.map((function(e){return e.getObjectName()}))).length){var o=r.props,a=o.project,s=o.layout,l=i[0].getObjectName(),c=Ku(a,s,l),u=c?iI.MetadataProvider.getObjectMetadata(a.getCurrentPlatform(),c.getType()):null;return[].concat((0,v.Z)(r.getContextMenuInstancesWiseItems(e)),[{type:"separator"},{label:e._({id:"Edit object {0}",values:{0:(0,U.S)(l,14)}}),click:function(){return r.editObjectByName(l,"properties")}},{label:e._({id:"Edit object variables"}),click:function(){return r.editObjectByName(l,"variables")}},{label:e._({id:"Edit behaviors"}),click:function(){return r.editObjectByName(l,"behaviors")}},u?{label:e._({id:"Edit effects"}),click:function(){return r.editObjectByName(l,"effects")},enabled:u.hasDefaultBehavior("EffectCapability::EffectBehavior")}:null,{type:"separator"}],(0,v.Z)(r.getContextMenuLayoutItems(e))).filter(Boolean)}return[].concat((0,v.Z)(r.getContextMenuInstancesWiseItems(e)),[{type:"separator"}],(0,v.Z)(r.getContextMenuLayoutItems(e)))},r.copySelection=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.useLastCursorPosition,e.pasteInTheForeground),n=r.instancesSelection.getSelectedInstances().map((function(e){return(0,Dt.XH)(e)})),i=0,o=0;if(r.editorDisplay){var a=r.editorDisplay.instancesHandlers.getSelectionAABB();i=a.centerX(),o=a.centerY()}r.editorDisplay&&Rt.set(oI,{x:i,y:o,pasteInTheForeground:!!t,instances:n})},r.cutSelection=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).useLastCursorPosition;r.copySelection({useLastCursorPosition:e,pasteInTheForeground:!0}),r.deleteSelection()},r.duplicateSelection=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).useLastCursorPosition;var e=(0,Gc.Z)(r).editorDisplay;if(e){var t=r.instancesSelection.getSelectedInstances().map((function(e){return(0,Dt.XH)(e)})),n=e.instancesHandlers.addSerializedInstances({position:[0,0],copyReferential:[-2*St.rA,-2*St.rA],serializedInstances:t,preventSnapToGrid:!0});r._onInstancesAdded(n),r.instancesSelection.clearSelection(),r.instancesSelection.selectInstances({instances:n,multiSelect:!0,layersLocks:null}),r.forceUpdatePropertiesEditor()}},r.paste=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).useLastCursorPosition,t=(0,Gc.Z)(r).editorDisplay;if(t){var n=e?t.viewControls.getLastCursorSceneCoordinates():t.viewControls.getLastContextMenuSceneCoordinates(),i=Rt.get(oI),o=Ot.extractArrayProperty(i,"instances"),a=Ot.extractNumberProperty(i,"x"),s=Ot.extractNumberProperty(i,"y"),l=Ot.extractBooleanProperty(i,"pasteInTheForeground")||!1;if(null!==a&&null!==s&&null!==o){var c=t.viewControls.getViewPosition();if(c){var u=t.instancesHandlers.addSerializedInstances({position:c.containsPoint(n[0],n[1])?n:[c.getViewX(),c.getViewY()],copyReferential:[a,s],serializedInstances:o,addInstancesInTheForeground:l});r._onInstancesAdded(u),r.instancesSelection.clearSelection(),r.instancesSelection.selectInstances({instances:u,multiSelect:!0,layersLocks:null}),r.forceUpdatePropertiesEditor()}}}},r.onSelectAllInstancesOfObjectInLayout=function(e){var t=r.props.initialInstances,n=lk(t,e);r.instancesSelection.selectInstances({instances:n,ignoreSeal:!0,multiSelect:!1,layersLocks:null}),r.forceUpdateInstancesList(),r._onInstancesSelected(n)},r.updateBehaviorsSharedData=function(){var e=r.props,t=e.layout,n=e.project;t.updateBehaviorsSharedData(n)},r.forceUpdateObjectsList=function(){r.editorDisplay&&r.editorDisplay.forceUpdateObjectsList()},r.forceUpdateObjectGroupsList=function(){r.editorDisplay&&r.editorDisplay.forceUpdateObjectGroupsList()},r.forceUpdateLayersList=function(){r.props.layout.hasLayerNamed(r.state.selectedLayer)||r.setState({selectedLayer:""}),r.editorDisplay&&r.editorDisplay.forceUpdateLayersList()},r.forceUpdateInstancesList=function(){r.editorDisplay&&r.editorDisplay.forceUpdateInstancesList()},r.forceUpdatePropertiesEditor=function(){r.editorDisplay&&r.editorDisplay.forceUpdateInstancesPropertiesEditor()},r.reloadResourcesFor=function(e){var t=r.props.project,n=new iI.ResourcesInUseHelper(t.getResourcesManager());e.getConfiguration().exposeResources(n);var i=n.getAllImages().toNewVectorString().toJSArray();n.delete(),PT.Z.loadTextures(t,i).then((function(){r.editorDisplay&&r.editorDisplay.instancesHandlers.resetInstanceRenderersFor(e.getName())}))},r.instancesSelection=new dT,r.state={setupGridOpen:!1,scenePropertiesDialogOpen:!1,layersListOpen:!1,onCloseLayerRemoveDialog:null,layerRemoved:null,editedLayer:null,editedLayerInitialTab:"properties",isAssetExporterDialogOpen:!1,editedObjectWithContext:null,editedObjectInitialTab:"properties",variablesEditedInstance:null,newObjectInstanceSceneCoordinates:null,editedGroup:null,instancesEditorSettings:e.getInitialInstancesEditorSettings(),history:_t(e.initialInstances,{historyMaxSize:50}),layoutVariablesDialogOpen:!1,showAdditionalWorkInfoBar:!1,additionalWorkInfoBar:{identifier:"default-additional-work",message:"",touchScreenMessage:""},selectedObjectFolderOrObjectsWithContext:[],selectedLayer:"",invisibleLayerOnWhichInstancesHaveJustBeenAdded:null},r}return(0,at.Z)(n,[{key:"componentDidUpdate",value:function(e,t){this.state.history!==t.history&&this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges()}},{key:"componentDidMount",value:function(){this.resourceExternallyChangedCallbackId=av(this.onResourceExternallyChanged.bind(this))}},{key:"componentWillUnmount",value:function(){sv(this.resourceExternallyChangedCallbackId)}},{key:"getInstancesEditorSettings",value:function(){return this.state.instancesEditorSettings}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;this.props.layout===e.layout&&this.props.initialInstances===e.initialInstances&&this.props.project===e.project||(this.instancesSelection.clearSelection(),this.openSetupGrid(!1),this.editInstanceVariables(null),this.openSceneProperties(!1)),!this.props.isActive&&e.isActive&&(this.instancesSelection.cleanNonExistingInstances(this.props.initialInstances),this.setState((function(e){var n=e.selectedObjectFolderOrObjectsWithContext;return{selectedObjectFolderOrObjectsWithContext:rI(t.props.project,t.props.layout,n)}})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.layout,i=t.initialInstances,o=t.resourceManagementProps,a=t.isActive,s=this.state,c=s.editedObjectWithContext,u=s.selectedObjectFolderOrObjectsWithContext,p=this.state.variablesEditedInstance?this.state.variablesEditedInstance.getObjectName():null,f=p?Ku(n,r,p):null,h=null!==this.state.invisibleLayerOnWhichInstancesHaveJustBeenAdded?(0,d.jsx)(b.Trans,{id:'You just added an instance to a hidden layer ("{0}"). Open the layer panel to make it visible.',values:{0:this.state.invisibleLayerOnWhichInstancesHaveJustBeenAdded||(0,d.jsx)(b.Trans,{id:"Base layer"})}}):null;return(0,d.jsx)(w.I,{children:function(t){var s=t.isMobile?tI:UE;return(0,d.jsxs)("div",{style:aI.container,id:"scene-editor","data-active":a?"true":void 0,children:[(0,d.jsx)(ST,{project:n,layout:r,onEditObject:e.props.onEditObject||e.editObject,onEditObjectVariables:function(t){e.editObject(t,"variables")},onOpenSceneProperties:e.openSceneProperties,onOpenSceneVariables:e.editLayoutVariables,onEditObjectGroup:e.editGroup,onEditLayerEffects:e.editLayerEffects,onEditLayer:e.editLayer}),(0,d.jsx)(s,{ref:function(t){return e.editorDisplay=t},project:n,layout:r,initialInstances:i,instancesSelection:e.instancesSelection,onSelectInstances:e._onSelectInstances,onAddObjectInstance:e.addInstanceOnTheScene,selectedLayer:e.state.selectedLayer,editLayer:e.editLayer,editLayerEffects:e.editLayerEffects,editInstanceVariables:e.editInstanceVariables,editObjectByName:e.editObjectByName,selectedObjectFolderOrObjectsWithContext:u,onLayerRenamed:e._onLayerRenamed,onRemoveLayer:e._onRemoveLayer,onSelectLayer:function(t){return e.setState({selectedLayer:t})},onExportAssets:e.openObjectExporterDialog,onDeleteObjects:e._onDeleteObjects,getValidatedObjectOrGroupName:e._getValidatedObjectOrGroupName,onEditObjectGroup:e.editGroup,onDeleteObjectGroup:e._onDeleteGroup,onRenameObjectGroup:e._onRenameGroup,canObjectOrGroupBeGlobal:e.canObjectOrGroupBeGlobal,updateBehaviorsSharedData:e.updateBehaviorsSharedData,onEditObject:e.props.onEditObject||e.editObject,onRenameObjectFolderOrObjectWithContextFinish:e._onRenameObjectFolderOrObjectWithContextFinish,onObjectCreated:e._onObjectCreated,onObjectFolderOrObjectWithContextSelected:e._onObjectFolderOrObjectWithContextSelected,canInstallPrivateAsset:e.props.canInstallPrivateAsset,historyHandler:{undo:e.undo,redo:e.redo,canUndo:function(){return Nt(e.state.history)},canRedo:function(){return Bt(e.state.history)},saveToHistory:function(){return e.setState({history:Ut(e.state.history,e.props.initialInstances)})}},instancesEditorShortcutsCallbacks:{onCopy:function(){return e.copySelection({useLastCursorPosition:!0})},onCut:function(){return e.cutSelection({useLastCursorPosition:!0})},onPaste:function(){return e.paste({useLastCursorPosition:!0})},onDuplicate:function(){return e.duplicateSelection({useLastCursorPosition:!0})},onDelete:e.deleteSelection,onUndo:e.undo,onRedo:e.redo,onZoomOut:e.zoomOut,onZoomIn:e.zoomIn,onShift1:e.zoomToFitSelection,onShift2:e.zoomToInitialPosition,onShift3:e.zoomToFitContent},onInstancesAdded:e._onInstancesAdded,onInstancesSelected:e._onInstancesSelected,onInstanceDoubleClicked:e._onInstanceDoubleClicked,onInstancesMoved:e._onInstancesMoved,onInstancesResized:e._onInstancesResized,onInstancesRotated:e._onInstancesRotated,isInstanceOf3DObject:e.isInstanceOf3DObject,onSelectAllInstancesOfObjectInLayout:e.onSelectAllInstancesOfObjectInLayout,instancesEditorSettings:e.state.instancesEditorSettings,onInstancesEditorSettingsMutated:e._onInstancesEditorSettingsMutated,onContextMenu:e._onContextMenu,resourceManagementProps:e.props.resourceManagementProps,hotReloadPreviewButtonProps:e.props.hotReloadPreviewButtonProps,isActive:a,onOpenedEditorsChanged:e.updateToolbar}),(0,d.jsx)(b.I18n,{children:function(t){var i=t.i18n;return(0,d.jsx)(l.Fragment,{children:c&&(0,d.jsx)(lw,{open:!0,object:c.object,initialTab:e.state.editedObjectInitialTab,project:n,layout:r,resourceManagementProps:o,onComputeAllVariableNames:function(){var t=e.state.editedObjectWithContext;return t?fi.findAllObjectVariables(n.getCurrentPlatform(),n,r,t.object):[]},onCancel:function(){c&&e.reloadResourcesFor(c.object),e.editObject(null)},getValidatedObjectOrGroupName:function(t){return e._getValidatedObjectOrGroupName(t,c.global,i)},onRename:function(t){e._onRenameEditedObject(t)},onApply:function(){c&&e.reloadResourcesFor(c.object),e.editObject(null),e.updateBehaviorsSharedData(),e.forceUpdateObjectsList(),e.props.unsavedChanges&&e.props.unsavedChanges.triggerUnsavedChanges()},hotReloadPreviewButtonProps:e.props.hotReloadPreviewButtonProps,onUpdateBehaviorsSharedData:function(){return e.updateBehaviorsSharedData()},openBehaviorEvents:e.props.openBehaviorEvents})})}}),e.state.isAssetExporterDialogOpen&&(0,d.jsx)(cT,{project:n,layout:r,onClose:function(){return e.openObjectExporterDialog(!1)}}),!!e.state.editedGroup&&(0,d.jsx)(Sb,{project:n,group:e.state.editedGroup,objectsContainer:r,globalObjectsContainer:n,onCancel:function(){return e.editGroup(null)},onApply:function(){return e.editGroup(null)}}),e.state.setupGridOpen&&(0,d.jsx)(hT,{instancesEditorSettings:e.state.instancesEditorSettings,onChangeInstancesEditorSettings:e.setInstancesEditorSettings,onCancel:function(){return e.openSetupGrid(!1)},onApply:function(){return e.openSetupGrid(!1)}}),!!e.state.variablesEditedInstance&&!!f&&(0,d.jsx)(zn,{project:n,open:!0,variablesContainer:e.state.variablesEditedInstance.getVariables(),inheritedVariablesContainer:f.getVariables(),onCancel:function(){return e.editInstanceVariables(null)},onApply:function(){return e.editInstanceVariables(null)},emptyPlaceholderTitle:(0,d.jsx)(b.Trans,{id:"Add your first instance variable"}),emptyPlaceholderDescription:(0,d.jsx)(b.Trans,{id:"Instance variables overwrite the default values of the variables of the object."}),helpPagePath:"/all-features/variables/instance-variables",title:(0,d.jsx)(b.Trans,{id:"Instance Variables"}),onEditObjectVariables:f?function(){e.editObject(f,"variables"),e.editInstanceVariables(null)}:void 0,hotReloadPreviewButtonProps:e.props.hotReloadPreviewButtonProps,onComputeAllVariableNames:function(){var t=e.state.variablesEditedInstance;if(!t)return[];var i=Ku(n,r,t.getObjectName());return i?fi.findAllObjectVariables(n.getCurrentPlatform(),n,r,i):[]}}),!!e.state.layerRemoved&&e.state.onCloseLayerRemoveDialog&&(0,d.jsx)(Xw,{open:!0,project:n,layersContainer:r,layerRemoved:e.state.layerRemoved,onClose:e.state.onCloseLayerRemoveDialog}),!!e.state.editedLayer&&(0,d.jsx)(Jw,{project:n,resourceManagementProps:e.props.resourceManagementProps,layout:r,layer:e.state.editedLayer,initialInstances:i,initialTab:e.state.editedLayerInitialTab,onClose:function(){return e.setState({editedLayer:null})},hotReloadPreviewButtonProps:e.props.hotReloadPreviewButtonProps}),e.state.scenePropertiesDialogOpen&&(0,d.jsx)(ui,{open:!0,project:n,layout:r,onClose:function(){return e.openSceneProperties(!1)},onApply:function(){return e.openSceneProperties(!1)},onEditVariables:function(){return e.editLayoutVariables(!0)},onOpenMoreSettings:e.props.onOpenMoreSettings,resourceManagementProps:e.props.resourceManagementProps}),!!e.state.layoutVariablesDialogOpen&&(0,d.jsx)(hi,{open:!0,project:n,layout:r,onApply:function(){return e.editLayoutVariables(!1)},onClose:function(){return e.editLayoutVariables(!1)},hotReloadPreviewButtonProps:e.props.hotReloadPreviewButtonProps}),(0,d.jsx)(b.I18n,{children:function(t){var n=t.i18n;return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(qr,{show:e.state.showAdditionalWorkInfoBar,identifier:e.state.additionalWorkInfoBar.identifier,message:n._(e.state.additionalWorkInfoBar.message),touchScreenMessage:n._(e.state.additionalWorkInfoBar.touchScreenMessage)}),(0,d.jsx)(za.Z,{ref:function(t){return e.contextMenu=t},buildMenuTemplate:function(t,n){return e.buildContextMenu(t,r,n)}})]})}}),(0,d.jsx)(ET.Z,{message:h,duration:7e3,visible:!!h,hide:function(){return e.onInstanceAddedOnInvisibleLayer(null)}})]})}})}}]),n}(l.Component);lI.defaultProps={setToolbar:function(){}};var cI={container:{display:"flex",flex:1}},uI=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={externalPropertiesDialogOpen:!1},e.saveExternalProperties=function(t){var n=e.getExternalLayout();n&&(n.setAssociatedLayout(t.layoutName),e.setState({externalPropertiesDialogOpen:!1},(function(){return e.updateToolbar()})))},e.openExternalPropertiesDialog=function(){e.setState({externalPropertiesDialogOpen:!0})},e.saveUiSettings=function(){var t=e.getExternalLayout(),n=e.editor;n&&t&&(0,Dt.qx)(t.getAssociatedEditorSettings(),n.getInstancesEditorSettings())},e}return(0,at.Z)(n,[{key:"getProject",value:function(){return this.props.project}},{key:"shouldComponentUpdate",value:function(e){return this.props.isActive||e.isActive}},{key:"componentDidMount",value:function(){if(this.props.isActive){var e=this.props.projectItemName,t=this.getLayout();this.props.setPreviewedLayout(t?t.getName():null,e)}this.resourceExternallyChangedCallbackId=av(this.onResourceExternallyChanged.bind(this))}},{key:"componentWillUnmount",value:function(){sv(this.resourceExternallyChangedCallbackId)}},{key:"componentDidUpdate",value:function(e){if(!e.isActive&&this.props.isActive){var t=this.props.projectItemName,n=this.getLayout();this.props.setPreviewedLayout(n?n.getName():null,t)}}},{key:"onResourceExternallyChanged",value:function(e){var t=this.editor;t&&t.onResourceExternallyChanged(e)}},{key:"updateToolbar",value:function(){this.editor&&this.editor.updateToolbar()}},{key:"forceUpdateEditor",value:function(){var e=this.editor;e&&(e.forceUpdateObjectsList(),e.forceUpdateObjectGroupsList(),e.forceUpdateLayersList())}},{key:"getExternalLayout",value:function(){var e=this.props,t=e.project,n=e.projectItemName;return t&&n&&t.hasExternalLayoutNamed(n)?t.getExternalLayout(n):null}},{key:"getLayout",value:function(){var e=this.props.project;if(!e)return null;var t=this.getAssociatedLayoutName();return t?e.getLayout(t):void 0}},{key:"getAssociatedLayoutName",value:function(){var e=this.props.project;if(!e)return null;var t=this.getExternalLayout();if(!t)return null;var n=t.getAssociatedLayout();return e.hasLayoutNamed(n)?n:null}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.projectItemName,i=t.isActive,o=this.getExternalLayout(),a=this.getLayout();return o&&n?(0,d.jsxs)("div",{style:cI.container,children:[a&&(0,d.jsx)(lI,{setToolbar:this.props.setToolbar,resourceManagementProps:this.props.resourceManagementProps,unsavedChanges:this.props.unsavedChanges,hotReloadPreviewButtonProps:this.props.hotReloadPreviewButtonProps,ref:function(t){return e.editor=t},project:n,layout:a,initialInstances:o.getInitialInstances(),getInitialInstancesEditorSettings:function(){return fT((0,Dt.XH)(o.getAssociatedEditorSettings()),Math.max(n.getGameResolutionWidth(),n.getGameResolutionHeight()))},onOpenEvents:this.props.onOpenEvents,onOpenMoreSettings:this.openExternalPropertiesDialog,isActive:i,canInstallPrivateAsset:this.props.canInstallPrivateAsset,openBehaviorEvents:this.props.openBehaviorEvents}),!a&&(0,d.jsxs)(lb.Z,{children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"To edit the external layout, choose the scene in which it will be included"})}),(0,d.jsx)(L.x1,{justifyContent:"center",children:(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Choose the scene"}),primary:!0,onClick:this.openExternalPropertiesDialog})}),(0,d.jsx)(L.x1,{justifyContent:"flex-start",noMargin:!0,children:(0,d.jsx)(Vw.Z,{tutorialId:"Intermediate-externals",label:(0,d.jsx)(b.Trans,{id:"Watch tutorial"}),renderIfNotFound:(0,d.jsx)(Hn.Z,{helpPagePath:"/interface/events-editor/external-events"})})})]}),(0,d.jsx)(Hw,{title:(0,d.jsx)(b.Trans,{id:"Configure the external layout"}),helpTexts:[(0,d.jsx)(b.Trans,{id:'In order to see your objects in the scene, you need to add an action "Create objects from external layout" in your events sheet.'}),(0,d.jsx)(b.Trans,{id:"You can also launch a preview from this external layout, but remember that it will still create objects from the scene, as well as trigger its events. Make sure to disable any action loading the external layout before doing so to avoid having duplicate objects!"})],open:this.state.externalPropertiesDialogOpen,project:n,layoutName:this.getAssociatedLayoutName(),onChoose:this.saveExternalProperties,onClose:function(){return e.setState({externalPropertiesDialogOpen:!1})}})]}):(0,d.jsxs)("div",{children:["No external layout called ",r," found!"]})}}]),n}(l.Component),dI={textField:{top:$r.B2,fontSize:12}};var pI=function(e){var t=e.item,n=e.itemName,r=e.id,i=e.data,o=e.isBold,s=e.onRename,c=e.editingName,u=e.getThumbnail,p=e.renderItemLabel,h=e.selected,g=e.onItemSelected,x=e.errorStatus,m=e.buildMenuTemplate,v=e.onEdit,b=e.hideMenuButton,C=e.scaleUpItemIconWhenSelected,j=l.useRef(null),y=l.useRef(!1),Z=l.useContext(f.Z);l.useEffect((function(){if(c){y.current=!1;var e=setTimeout((function(){j.current&&j.current.focus()}),100);return function(){return clearTimeout(e)}}}),[c]);var k=c?(0,d.jsx)($r.ZP,{id:"rename-item-field",margin:"none",ref:j,defaultValue:n,onBlur:function(e){s(y.current?n:e.currentTarget.value)},onKeyPress:function(e){(0,kn.ph)(e)&&j.current&&j.current.blur()},onKeyUp:function(e){if((0,kn.W$)(e)){var t=j.current;t&&(y.current=!0,t.blur())}},fullWidth:!0,style:dI.textField}):(0,d.jsx)("div",{title:"string"===typeof n?n:void 0,style:(0,a.Z)((0,a.Z)({},B.t),{},{color:h?Z.listItem.selectedTextColor:void 0,fontStyle:o?"italic":void 0,fontWeight:o?"bold":"normal"}),children:p?p():(0,d.jsx)(F.Z,{noMargin:!0,size:"body-small",children:n})}),w={backgroundColor:h?""===x?Z.listItem.selectedBackgroundColor:"error"===x?Z.listItem.selectedErrorBackgroundColor:Z.listItem.selectedWarningBackgroundColor:void 0,color:""===x?void 0:"error"===x?Z.listItem.errorTextColor:Z.listItem.warningTextColor},T=u?(0,d.jsx)(Ms.Z,{iconSize:24,src:u(),cssAnimation:C&&h?"scale-and-jiggle 0.8s forwards":""}):null;return(0,d.jsx)(He.HC,{style:(0,a.Z)({},w),primaryText:k,leftIcon:T,displayMenuButton:!b,rightIconColor:h?Z.listItem.selectedRightIconColor:Z.listItem.rightIconColor,buildMenuTemplate:m,onClick:function(){g&&(c||g(h?null:t))},onDoubleClick:function(e){0===e.button&&v&&(c||(g(null),v(t)))},id:r,data:i})},fI=n(72662),hI=function(e){return(0,d.jsx)(L.sg,{expand:!0,noMargin:e.noMargin,children:(0,d.jsx)(L.x1,{children:(0,d.jsx)(T.Z,{primary:!0,onClick:e.onClick,label:e.primaryText,id:e.id,icon:"search"===e.kind?(0,d.jsx)(fI.Z,{}):(0,d.jsx)(vt.Z,{}),fullWidth:!0})})})},gI=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).DragSourceAndDropTarget=(0,Zt.x)(e.props.reactDndType),e}return(0,at.Z)(n,[{key:"forceUpdateGrid",value:function(){this._list&&this._list.forceUpdateGrid()}},{key:"scrollToItem",value:function(e){var t=this,n=this.props.fullList.findIndex((function(n){return t.props.getItemName(n)===t.props.getItemName(e)}));this._list&&-1!==n&&this._list.scrollToRow(n)}},{key:"_renderItemRow",value:function(e,t,n){var r=this,i=this.props,o=i.selectedItems,a=i.getItemThumbnail,s=i.erroredItems,l=i.isItemBold,c=i.onEditItem,u=i.renamedItem,p=i.getItemName,f=i.getItemId,h=i.getItemData,g=i.renderItemLabel,x=i.scaleUpItemIconWhenSelected,m=u===e,v=p(e),b=-1!==o.findIndex((function(e){return p(e)===v}));return(0,d.jsx)(pI,{item:e,itemName:v,id:f?f(e,t):void 0,data:h?h(e,t):void 0,renderItemLabel:g?function(){return g(e)}:void 0,isBold:!!l&&l(e),onRename:function(t){return r.props.onRename(e,t)},editingName:m,getThumbnail:a?function(){return a(e)}:void 0,selected:b,onItemSelected:this.props.onItemSelected,errorStatus:s&&s[v]||"",buildMenuTemplate:function(){return r.props.buildMenuTemplate(e,t)},onEdit:c,hideMenuButton:n,scaleUpItemIconWhenSelected:x})}},{key:"render",value:function(){var e=this,t=this.props,n=t.height,r=t.width,i=t.fullList,o=t.addNewItemLabel,a=t.addNewItemId,s=t.renamedItem,l=t.getItemThumbnail,c=t.getItemName,u=t.onAddNewItem,p=t.onMoveSelectionToItem,f=t.canMoveSelectionToItem,h=t.selectedItems,g=this.DragSourceAndDropTarget,x=new Image;return x.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",(0,d.jsx)(w.I,{children:function(t){var m=t.isMobile;return(0,d.jsx)(Gr.wh,{children:function(t){return(0,d.jsx)(hr.aV,{ref:function(t){return e._list=t},overscanIndicesGetter:function(e){var t=e.cellCount,n=(e.overscanCellsCount,e.startIndex),r=e.stopIndex;return{overscanStartIndex:Math.max(0,n-20),overscanStopIndex:Math.min(t-1,r+20)}},height:n,rowCount:i.length+(u?1:0),rowHeight:l?He.xD:He.Sv,rowRenderer:function(n){var v=n.index,b=n.key,C=n.style;if(v>=i.length)return(0,d.jsx)("div",{style:C,children:(0,d.jsx)(hI,{onClick:u,primaryText:r<200?"":o,id:a})},b);var j=i[v],y=s===j,Z=-1!==h.findIndex((function(e){return c(e)===c(j)})),k=!y&&("touch"!==t||Z);return(0,d.jsx)("div",{style:C,children:(0,d.jsx)(g,{beginDrag:function(){return"touch"===t&&e._list&&(e._list.props.style.overflow="hidden"),e.props.onItemSelected(j),{name:c(j),thumbnail:"GD_OBJECT_WITH_CONTEXT"===e.props.reactDndType&&l?l(j):void 0}},canDrag:function(){return k},canDrop:function(){return!f||f(j)},drop:function(){p(j)},endDrag:function(){"touch"===t&&e._list&&(e._list.props.style.overflow="auto",e.forceUpdate())},children:function(t){var n=t.connectDragSource,r=t.connectDropTarget,i=t.connectDragPreview,o=t.isOver,a=t.canDrop;i(x);var s=r((0,d.jsxs)("div",{children:[o&&(0,d.jsx)(kt.Z,{canDrop:a}),e._renderItemRow(j,v,m)]}));return s?n(s):null}})},b)},width:r})}})}})}}]),n}(l.Component),xI=n(57974),mI=n(17037),vI={listContainer:{flex:1}},bI=function(e){return e.getName()},CI=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={renamedResource:null,searchText:"",resourcesWithErrors:{},infoBarContent:null},e._deleteResource=function(t){e.props.onDeleteResource(t)},e._editName=function(t){e.setState({renamedResource:t},(function(){e.sortableList&&e.sortableList.forceUpdateGrid()}))},e._getResourceThumbnail=function(t){switch(t.getKind()){case"image":return Dl.Z.getResourceFullUrl(e.props.project,t.getName(),{});case"audio":return"res/actions/music24.png";case"json":case"tilemap":case"tileset":case"spine":return"res/actions/fichier24.png";case"video":return"JsPlatform/Extensions/videoicon24.png";case"font":return"res/actions/font24.png";case"bitmapFont":return"JsPlatform/Extensions/bitmapfont32.png";case"model3D":return"JsPlatform/Extensions/3d_model.svg";default:return"res/unknown32.png"}},e._rename=function(t,n){var r=e.props.project;e.setState({renamedResource:null}),t.getName()!==n&&(r.getResourcesManager().hasResource(n)?(0,Ur.T4)("Another resource with this name already exists",{delayToNextTick:!0}):e.props.onRenameResource(t,n,(function(r){r&&(t.setName(n),e.forceUpdate())})))},e._moveSelectionTo=function(t){var n=e.props,r=n.project,i=n.selectedResource;if(i){var o=r.getResourcesManager();o.moveResource(o.getResourcePosition(i.getName()),o.getResourcePosition(t.getName())),e.forceUpdateList()}},e.forceUpdateList=function(){e.forceUpdate(),e.sortableList&&e.sortableList.forceUpdateGrid()},e._renderResourceMenuTemplate=function(t){return function(n,r){var i=e.props,o=i.getResourceActionsSpecificToStorageProvider,a=i.fileMetadata,s=[{label:t._({id:"Rename"}),click:function(){return e._editName(n)}},{label:t._({id:"Delete"}),click:function(){return e._deleteResource(n)}},{type:"separator"},{label:t._({id:"Remove unused..."}),submenu:mI.Q.map((function(n){var r=n.displayName,i=n.kind;return{label:t._(r),click:function(){e.props.onRemoveUnusedResources(i)}}})).concat([{label:t._({id:"Resources (any kind)"}),click:function(){mI.Q.forEach((function(t){e.props.onRemoveUnusedResources(t.kind)}))}}])}];return o&&a&&(s.push({type:"separator"}),s=s.concat(o({project:e.props.project,fileMetadata:a,resource:n,i18n:t,informUser:e.openInfoBar,updateInterface:function(){return e.forceUpdateList()},cleanUserSelectionOfResources:function(){return e.props.onSelectResource(null)}}))),s}},e.checkMissingPaths=function(){var t=e.props.project,n=t.getResourcesManager().getAllResourceNames().toJSArray(),r={};n.forEach((function(e){r[e]=(0,xI.iz)(t,e)})),e.setState({resourcesWithErrors:r}),e.forceUpdateList()},e.openInfoBar=function(t){e.setState({infoBarContent:t})},e}return(0,at.Z)(n,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.renamedResource!==t.renamedResource||this.state.searchText!==t.searchText||this.state.infoBarContent!==t.infoBarContent||(this.props.project!==e.project||this.props.selectedResource!==e.selectedResource)}},{key:"componentDidMount",value:function(){this.checkMissingPaths()}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.selectedResource,i=t.onSelectResource,o=this.state,s=o.searchText,l=o.infoBarContent,c=n.getResourcesManager(),u=function(e,t){if(!t)return e;var n=t.toLowerCase();return e.filter((function(e){return-1!==e.getName().toLowerCase().indexOf(n)}))}(c.getAllResourceNames().toJSArray().map((function(e){return c.getResource(e)})),s),p=n.ptr;return(0,d.jsxs)(is,{children:[(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(st.Z,{value:s,onRequestSearch:function(){},onChange:function(t){return e.setState({searchText:t})},placeholder:{id:"Search resources"}})})}),(0,d.jsx)("div",{style:vI.listContainer,children:(0,d.jsx)(hr.qj,{children:function(t){var n=t.height,o=t.width;return(0,d.jsx)(b.I18n,{children:function(t){var a=t.i18n;return(0,d.jsx)(gI,{ref:function(t){return e.sortableList=t},fullList:u,width:o,height:n,getItemName:bI,getItemThumbnail:e._getResourceThumbnail,selectedItems:r?[r]:[],onItemSelected:i,renamedItem:e.state.renamedResource,onRename:e._rename,onMoveSelectionToItem:e._moveSelectionTo,buildMenuTemplate:e._renderResourceMenuTemplate(a),erroredItems:e.state.resourcesWithErrors,reactDndType:"GD_RESOURCE"},p)}})}})}),!!l&&(0,d.jsx)(ET.Z,(0,a.Z)({duration:7e3,visible:!0,hide:function(){return e.setState({infoBarContent:null})}},l))]})}}]),n}(l.Component),jI={previewContainer:{position:"relative",display:"flex",width:"100%",alignItems:"center",justifyContent:"center",height:200},iconContainer:{display:"flex",flex:1,height:"100%",alignItems:"center",justifyContent:"center",position:"relative"},icon:{width:60,height:60}},yI=function(e){var t=e.renderIcon;return(0,d.jsxs)("div",{style:jI.previewContainer,children:[(0,d.jsx)(jj.Z,{}),(0,d.jsx)("div",{style:jI.iconContainer,children:t({style:jI.icon})})]})},ZI=n(48812),kI=n(62981),wI=n(81730),TI=function(e){var t=e.project,n=e.resourceName,r=t.getResourcesManager();switch(r.hasResource(n)?r.getResource(n).getKind():null){case"image":return(0,d.jsx)(Lk.Z,{resourceName:n,imageResourceSource:e.resourcesLoader.getResourceFullUrl(t,n,{}),isImageResourceSmooth:(0,Lk.X)(t,n)});case"audio":return(0,d.jsx)(yI,{renderIcon:function(e){return(0,d.jsx)(Ly,(0,a.Z)({},e))}});case"json":case"tilemap":case"tileset":case"model3D":case"atlas":case"spine":return(0,d.jsx)(yI,{renderIcon:function(e){return(0,d.jsx)(kI.Z,(0,a.Z)({},e))}});case"video":return(0,d.jsx)(yI,{renderIcon:function(e){return(0,d.jsx)(wI.Z,(0,a.Z)({},e))}});case"font":case"bitmapFont":return(0,d.jsx)(yI,{renderIcon:function(e){return(0,d.jsx)(ZI.Z,(0,a.Z)({},e))}});default:return null}},SI={tableCell:{wordBreak:"break-word"}},PI=function(e){var t=e.resources;if(1!==t.length)return null;var n=t[0],r=(0,PT.k)(n);return r?(0,d.jsxs)(ZC.iA,{children:[(0,d.jsx)(ZC.xD,{children:(0,d.jsxs)(ZC.SC,{children:[(0,d.jsx)(ZC.bY,{children:(0,d.jsx)(b.Trans,{id:"Embedded file name"})}),(0,d.jsx)(ZC.bY,{children:(0,d.jsx)(b.Trans,{id:"Associated resource name"})})]})}),(0,d.jsx)(ZC.RM,{children:Object.entries(r).map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1],i="string"===typeof r?r:"Unrecognized value.";return(0,d.jsxs)(ZC.SC,{children:[(0,d.jsx)(ZC.Nn,{style:SI.tableCell,children:n}),(0,d.jsx)(ZC.Nn,{style:SI.tableCell,children:i})]},n)}))})]}):null},EI=l.forwardRef((function(e,t){var n=e.project,r=e.resourcesLoader,a=e.resources,s=e.onResourcePathUpdated,c=e.resourceManagementProps,u=(0,Pt.Z)();l.useImperativeHandle(t,(function(){return{forceUpdate:u}}));var p=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a[0],e.next=3,c.onChooseResource({initialSourceName:t.name,multiSelection:!1,resourceKind:n.getKind()});case 3:if((r=e.sent).length){e.next=6;break}return e.abrupt("return");case 6:return n.setFile(r[0].getFile()),r.forEach((function(e){return e.delete()})),s(),u(),e.next=12,c.onFetchNewlyAddedResources();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,a,s,u]),f=l.useMemo((function(){return[{name:"Resource name",valueType:"string",disabled:!0,getValue:function(e){return e.getName()},setValue:function(e,t){return e.setName(t)}},{name:"File",valueType:"string",getValue:function(e){return e.getFile()},setValue:function(e,t){return e.setFile(t)},onEditButtonClick:function(){var e=c.getStorageProvider(),t=c.resourceSources.filter((function(e){return e.kind===a[0].getKind()})).filter((function(t){var n=t.onlyForStorageProvider;return!n||n===e.internalName}))[0];t&&p(t)},onEditButtonBuildMenuTemplate:function(e){var t=c.getStorageProvider();return c.resourceSources.filter((function(e){return e.kind===a[0].getKind()})).filter((function(e){var n=e.onlyForStorageProvider;return!n||n===t.internalName})).map((function(t){return{label:e._(t.displayName),click:function(){return p(t)}}}))}}]}),[c,a,p]),h=l.useCallback((function(){var e=a[0].getProperties(),t=(0,qn.Z)(e,(function(e){return e.getProperties()}),(function(e,t,n){e.updateProperty(t,n),u()}));return(0,d.jsx)(Yn.Z,{schema:f.concat(t),instances:a})}),[a,f,u]);return(0,d.jsxs)(is,{maxWidth:!0,children:[function(){if(a&&a.length)return(0,d.jsx)(TI,{resourceName:a[0].getName(),resourcesLoader:r,project:n})}(),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(Tt.Z,{children:(0,d.jsxs)(C.ak,{expand:!0,children:[a&&a.length?h():(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"Resources are automatically added to your project whenever you add an image, a font or a video to an object or when you choose an audio file in events. Choose a resource to display its properties."})}),(0,d.jsx)(PI,{resources:a})]},a.map((function(e){return""+e.ptr})).join(";"))})]})})),II=EI,MI=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){return(0,ot.Z)(this,n),t.apply(this,arguments)}return(0,at.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.canDelete,n=e.isPropertiesShown;return(0,d.jsxs)(m,{lastChild:!0,children:[this.props.canOpenProjectFolder&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(M.Z,{size:"small",color:"default",onClick:this.props.onOpenProjectFolder,tooltip:{id:"Open the project folder"},children:(0,d.jsx)(Is,{})}),(0,d.jsx)(lm,{})]}),(0,d.jsx)(M.Z,{size:"small",color:"default",onClick:this.props.onToggleProperties,tooltip:{id:"Open the properties panel"},selected:n,children:(0,d.jsx)(bt.Z,{})}),(0,d.jsx)(M.Z,{size:"small",color:"default",onClick:this.props.onDeleteSelection,disabled:!t,tooltip:{id:"Delete the selected resource"},children:(0,d.jsx)(vn.Z,{})})]})}}]),n}(l.PureComponent),LI=MI,AI=n.g.gd,FI=ae()("@electron/remote"),OI=ae()("path"),RI={container:{display:"flex",flex:1,position:"relative",overflow:"hidden"}},DI={direction:"row",first:"properties",second:"resources-list",splitPercentage:66},_I=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).editorMosaic=null,e._propertiesEditor=null,e._resourcesList=null,e.resourcesLoader=Dl.Z,e.state={selectedResource:null},e.updateToolbar=function(){var t=e.editorMosaic?e.editorMosaic.getOpenedEditorNames():[];e.props.setToolbar((0,d.jsx)(LI,{onOpenProjectFolder:e.openProjectFolder,canOpenProjectFolder:!!FI&&!!e.props.fileMetadata&&"LocalFile"===e.props.storageProvider.internalName,onToggleProperties:e.toggleProperties,isPropertiesShown:t.includes("properties"),canDelete:!!e.state.selectedResource,onDeleteSelection:function(){return e.deleteResource(e.state.selectedResource)}}))},e.deleteResource=function(t){var n=e.props,r=n.project,i=n.onDeleteResource;t&&(Y.ZP.showConfirmDialog("Are you sure you want to remove this resource? This can't be undone.")&&i(t,(function(n){n&&t&&(r.getResourcesManager().removeResource(t.getName()),e.setState({selectedResource:null},(function(){e._resourcesList&&e._resourcesList.forceUpdateList(),e.updateToolbar()})))})))},e._removeUnusedResources=function(t){var n=e.props.project,r=e.state.selectedResource?e.state.selectedResource.getName():null,i=AI.ProjectResourcesAdder.getAllUseless(n,t).toJSArray();console.info("Removing ".concat(i.length," unused ").concat(t," resource(s):"),i),AI.ProjectResourcesAdder.removeAllUseless(n,t),i.includes(r)&&e._onResourceSelected(null),e._resourcesList&&e._resourcesList.forceUpdateList()},e._removeAllResourcesWithInvalidPath=function(){var t=e.props.project,n=e.state.selectedResource?e.state.selectedResource.getName():null,r=t.getResourcesManager(),i=r.getAllResourceNames().toJSArray().filter((function(e){return"error"===(0,xI.iz)(t,e)}));i.forEach((function(e){r.removeResource(e),console.info("Removed due to invalid path: "+e)})),i.includes(n)&&e._onResourceSelected(null),e._resourcesList&&e._resourcesList.forceUpdateList()},e.openProjectFolder=function(){FI&&FI.shell.openPath(OI.dirname(e.props.project.getProjectFile()))},e.toggleProperties=function(){e.editorMosaic&&e.editorMosaic.toggleEditor("properties","start",66,"column")},e._onResourceSelected=function(t){e.setState({selectedResource:t},(function(){e._propertiesEditor&&e._propertiesEditor.forceUpdate(),e.updateToolbar()}))},e.onResourceExternallyChanged=function(t){e._propertiesEditor&&e._propertiesEditor.forceUpdate(),e.refreshResourcesList()},e}return(0,at.Z)(n,[{key:"componentDidMount",value:function(){this.resourceExternallyChangedCallbackId=av(this.onResourceExternallyChanged.bind(this))}},{key:"componentWillUnmount",value:function(){sv(this.resourceExternallyChangedCallbackId)}},{key:"refreshResourcesList",value:function(){this._resourcesList&&this._resourcesList.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.onRenameResource,i=t.resourceManagementProps,o=t.fileMetadata,a=this.state.selectedResource,s=i.getStorageProviderResourceOperations(),l={properties:{type:"secondary",title:{id:"Properties"},renderEditor:function(){return(0,d.jsx)(II,{resources:a?[a]:[],project:n,resourcesLoader:e.resourcesLoader,ref:function(t){return e._propertiesEditor=t},onResourcePathUpdated:function(){e._resourcesList&&e._resourcesList.checkMissingPaths()},resourceManagementProps:i},a?a.ptr:void 0)}},"resources-list":{type:"primary",noTitleBar:!0,renderEditor:function(){return(0,d.jsx)(CI,{project:n,fileMetadata:o,onDeleteResource:e.deleteResource,onRenameResource:r,onSelectResource:e._onResourceSelected,selectedResource:a,ref:function(t){return e._resourcesList=t},onRemoveUnusedResources:e._removeUnusedResources,onRemoveAllResourcesWithInvalidPath:e._removeAllResourcesWithInvalidPath,getResourceActionsSpecificToStorageProvider:s})}}};return(0,d.jsx)("div",{style:RI.container,children:(0,d.jsx)(se.ZP.Consumer,{children:function(t){var n=t.getDefaultEditorMosaicNode,r=t.setDefaultEditorMosaicNode;return(0,d.jsx)(yv.Z,{editors:l,ref:function(t){return e.editorMosaic=t},initialNodes:n("resources-editor")||DI,onOpenedEditorsChanged:e.updateToolbar,onPersistNodes:function(e){return r("resources-editor",e)}})}})})}}]),n}(l.Component);_I.defaultProps={setToolbar:function(){}};var BI=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){return(0,ot.Z)(this,n),t.apply(this,arguments)}return(0,at.Z)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.isActive||e.isActive}},{key:"getProject",value:function(){return this.props.project}},{key:"getLayout",value:function(){return null}},{key:"updateToolbar",value:function(){this.editor&&this.editor.updateToolbar()}},{key:"forceUpdateEditor",value:function(){}},{key:"componentDidUpdate",value:function(e){this.editor&&this.props.isActive&&e.isActive!==this.props.isActive&&this.editor.refreshResourcesList()}},{key:"render",value:function(){var e=this,t=this.props.project;return t?(0,d.jsx)(_I,{setToolbar:this.props.setToolbar,onDeleteResource:this.props.onDeleteResource,onRenameResource:this.props.onRenameResource,resourceManagementProps:this.props.resourceManagementProps,ref:function(t){return e.editor=t},fileMetadata:this.props.fileMetadata,project:t,storageProvider:this.props.storageProvider}):null}}]),n}(l.Component),NI=function(e){(0,ei.Z)(n,e);var t=(0,ti.Z)(n);function n(){var e;(0,ot.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).saveUiSettings=function(){var t=e.getLayout(),n=e.editor;n&&t&&(0,Dt.qx)(t.getAssociatedEditorSettings(),n.getInstancesEditorSettings())},e}return(0,at.Z)(n,[{key:"getProject",value:function(){return this.props.project}},{key:"shouldComponentUpdate",value:function(e){return this.props.isActive||e.isActive}},{key:"componentDidMount",value:function(){if(this.props.isActive){var e=this.props.projectItemName;this.props.setPreviewedLayout(e)}}},{key:"componentDidUpdate",value:function(e){if(!e.isActive&&this.props.isActive){var t=this.props.projectItemName;this.props.setPreviewedLayout(t)}}},{key:"updateToolbar",value:function(){this.editor&&this.editor.updateToolbar()}},{key:"forceUpdateEditor",value:function(){var e=this.editor;e&&(e.forceUpdateObjectsList(),e.forceUpdateObjectGroupsList(),e.forceUpdateLayersList())}},{key:"getLayout",value:function(){var e=this.props,t=e.project,n=e.projectItemName;return t&&n&&t.hasLayoutNamed(n)?t.getLayout(n):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.projectItemName,i=t.isActive,o=this.getLayout();return o&&n?(0,d.jsx)(lI,{setToolbar:this.props.setToolbar,resourceManagementProps:this.props.resourceManagementProps,canInstallPrivateAsset:this.props.canInstallPrivateAsset,unsavedChanges:this.props.unsavedChanges,ref:function(t){return e.editor=t},project:n,layout:o,initialInstances:o.getInitialInstances(),getInitialInstancesEditorSettings:function(){return fT((0,Dt.XH)(o.getAssociatedEditorSettings()),Math.max(n.getGameResolutionWidth(),n.getGameResolutionHeight()))},onOpenEvents:this.props.onOpenEvents,isActive:i,hotReloadPreviewButtonProps:this.props.hotReloadPreviewButtonProps,openBehaviorEvents:this.props.openBehaviorEvents}):(0,d.jsxs)("div",{children:["No layout called ",r," found!"]})}}]),n}(l.Component),UI=function(e){return{projectItemName:e.projectItemName,editorKind:e.editorRef instanceof NI?"layout":e.editorRef instanceof Gw?"external events":e.editorRef instanceof uI?"external layout":e.editorRef instanceof BI?"resources":e.editorRef instanceof xv?"layout events":e.editorRef instanceof Uw?"events functions extension":e.editorRef instanceof ub?"debugger":"start page"}},HI=function(e,t){var n=t.label,r=t.icon,i=t.projectItemName,o=t.tabOptions,s=t.renderEditorContainer,l=t.key,c=t.extraEditorProps,u=t.dontFocusTab,d=t.closable,p=Wc()(e.editors,(function(e){return e.key===l}));if(-1!==p)return(0,a.Z)((0,a.Z)({},e),{},{currentTab:u?e.currentTab:p});var f={label:n,icon:r,projectItemName:i,tabOptions:o,renderEditorContainer:s,key:l,extraEditorProps:c,editorRef:null,closable:"undefined"===typeof d||!!d};return(0,a.Z)((0,a.Z)({},e),{},{editors:"start page"===l?[f].concat((0,v.Z)(e.editors)):[].concat((0,v.Z)(e.editors),[f]),currentTab:u?e.currentTab:e.editors.length})},VI=function(e,t){return(0,a.Z)((0,a.Z)({},e),{},{currentTab:Math.max(0,Math.min(t,e.editors.length-1))})},zI=function(e,t){var n=KI(e),r=e.editors.filter(t);return VI((0,a.Z)((0,a.Z)({},e),{},{editors:r}),r.indexOf(n)||0)},WI=function(e){return zI(e,(function(e){return!e.closable}))},GI=function(e,t){return zI(e,(function(e){return e!==t}))},YI=function(e,t){return zI(e,(function(e){return!e.closable||e===t}))},qI=function(e){return e.editors},XI=function(e){return e.currentTab},KI=function(e){return e.editors[e.currentTab]},JI=function(e,t){return zI(e,(function(e){var n=e.editorRef&&e.editorRef.getProject();return!n||n!==t}))},QI=function(e){e.editors.forEach((function(e){e.editorRef&&(e.editorRef instanceof NI||e.editorRef instanceof uI)&&e.editorRef.saveUiSettings()}))},$I=function(e){e.editors.forEach((function(e){var t=e.editorRef;t instanceof Uw&&t.previewOrExportWillStart()}))},eM=function(e,t){return zI(e,(function(e){var n=e.editorRef;if(n instanceof xv||n instanceof Gw||n instanceof uI||n instanceof NI){var r=n.getLayout();return!r||r!==t}return!0}))},tM=function(e,t){return zI(e,(function(e){var n=e.editorRef;return!(n instanceof uI)||(!n.getExternalLayout()||n.getExternalLayout()!==t)}))},nM=function(e,t){return zI(e,(function(e){var n=e.editorRef;return!(n instanceof Gw)||(!n.getExternalEvents()||n.getExternalEvents()!==t)}))},rM=function(e,t){return zI(e,(function(e){var n=e.editorRef;return!(n instanceof Uw)||(!n.getEventsFunctionsExtensionName()||n.getEventsFunctionsExtensionName()!==t)}))},iM=function(e,t){for(var n=0;n<e.editors.length;++n){var r=e.editors[n].editorRef;if(r instanceof Uw&&r.getEventsFunctionsExtension()===t)return{editor:r,tabIndex:n}}return null},oM=function(e,t,n){var r=(0,v.Z)(qI(e)),i=r[t];r.splice(t,1),r.splice(n,0,i);var o=XI(e),a=o;return t===o?a=n:t<o&&n>=o?a-=1:t>o&&n<=o&&(a+=1),{editors:r,currentTab:a}},aM=(0,Zt.x)("draggable-closable-tab"),sM=function(e){return"tab-".concat(e.key.replace(/\s/g,"-"))};function lM(e){var t=e.hideLabels,n=e.editorTabs,r=e.onClickTab,i=e.onCloseTab,o=e.onCloseOtherTabs,a=e.onCloseAll,s=e.onTabActivated,c=e.onDropTab,u=null,p=KI(n);return l.useEffect((function(){if(p){var e=document.getElementById(sM(p));e&&e.scrollIntoView()}}),[p]),(0,d.jsx)(Nc,{hideLabels:t,children:qI(n).map((function(e,t){var l=XI(n)===t;return(0,d.jsx)(cM,{index:t,label:e.label,icon:e.icon,id:sM(e),data:e.tabOptions?e.tabOptions.data:void 0,active:l,onClick:function(){return r(t)},onClose:function(){return i(e)},onCloseOthers:function(){return o(e)},onCloseAll:a,onActivated:function(){return s(e)},closable:e.closable,onBeginDrag:function(){return u=t,e},onDrop:function(e){"number"===typeof u&&(c(u,t),u=null)}},e.key)}))})}function cM(e){var t=e.index,n=e.id,r=e.data,i=e.active,o=e.onClose,a=e.onCloseOthers,s=e.onCloseAll,l=e.label,c=e.icon,u=e.closable,p=e.onClick,f=e.onActivated,h=e.onBeginDrag,g=e.onDrop;return(0,d.jsx)(Gr.wh,{children:function(e){return(0,d.jsx)(aM,{beginDrag:h,canDrag:function(){return"touch"!==e&&0!==t},canDrop:function(){return!0},drop:function(){return g(t)},children:function(e){var t=e.connectDragSource,h=e.connectDropTarget,g=e.isOver,x=(e.canDrop,h((0,d.jsxs)("div",{style:{display:"flex",flexShrink:0},children:[(0,d.jsx)(Uc,{id:n,data:r,active:i,onClose:o,onCloseOthers:a,onCloseAll:s,label:l,icon:c,closable:u,onClick:p,onActivated:f},n),g&&(0,d.jsx)(Vc,{})]})));return x?t(x):null}})}})}var uM,dM=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"57",height:"55",viewBox:"0 0 57 55",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("path",{d:"M2.04167 35.2219C1.86758 37.2956 2.46693 41.5295 6.25707 41.8761C6.60439 41.053 6.24756 38.5699 2.04167 35.2219Z",fill:"#FFFACB"}),(0,d.jsx)("path",{d:"M13.72 18.3321C11.6719 18.7007 7.73736 20.3754 8.38355 24.1261C9.26849 24.2486 11.5747 23.2612 13.72 18.3321Z",fill:"#D39902"}),(0,d.jsx)("path",{d:"M40.6471 3.52612C38.9383 2.33853 34.9719 0.740606 32.7767 3.84966C33.3159 4.562 35.6448 5.49457 40.6471 3.52612Z",fill:"#D39902"}),(0,d.jsx)("path",{d:"M44.2883 28.9654C42.2403 29.334 38.3057 31.0087 38.9519 34.7594C39.8368 34.8819 42.1431 33.8945 44.2883 28.9654Z",fill:"#FED501"}),(0,d.jsx)("path",{d:"M13.5177 47.1829C12.8129 49.1409 12.296 53.3857 15.8673 54.7014C16.4158 53.9963 16.7138 51.5054 13.5177 47.1829Z",fill:"#D39902"}),(0,d.jsx)("path",{d:"M52.0607 37.8797C51.3558 39.8377 50.839 44.0825 54.4102 45.3982C54.9588 44.6931 55.2568 42.2021 52.0607 37.8797Z",fill:"#FED501"})]}))})),pM=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"91",height:"102",viewBox:"0 0 91 102",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("path",{d:"M45.5 51.7436L3.25143 75.7867C2.77144 76.0599 2.77143 76.5027 3.25144 76.7759L45.502 100.82L88.6197 76.2825L45.5 51.7436Z",fill:"#009E62",stroke:"#322222",strokeWidth:"2",strokeLinejoin:"bevel"}),(0,d.jsx)("path",{d:"M45.5 51.0703L3.25143 75.1134C2.77144 75.3865 2.77143 75.8294 3.25144 76.1026L45.502 100.147L88.6197 75.6091L45.5 51.0703Z",fill:"#009E62",stroke:"#322222",strokeWidth:"2",strokeLinejoin:"bevel"}),(0,d.jsx)("path",{d:"M45.5 50.3969L3.25143 74.44C2.77144 74.7132 2.77143 75.1561 3.25144 75.4292L45.502 99.4735L88.6197 74.9358L45.5 50.3969Z",fill:"#009E62",stroke:"#322222",strokeWidth:"2",strokeLinejoin:"bevel"}),(0,d.jsx)("path",{d:"M45.5 49.7231L3.25143 73.7662C2.77144 74.0394 2.77143 74.4822 3.25144 74.7554L45.502 98.7997L88.6197 74.262L45.5 49.7231Z",fill:"#009E62",stroke:"#322222",strokeWidth:"2",strokeLinejoin:"bevel"}),(0,d.jsx)("path",{d:"M45.5 49.0502L3.25143 73.0933C2.77144 73.3665 2.77143 73.8094 3.25144 74.0825L45.502 98.1268L88.6197 73.5891L45.5 49.0502Z",fill:"#009E62",stroke:"#322222",strokeWidth:"2",strokeLinejoin:"bevel"}),(0,d.jsx)("path",{d:"M45.5 48.3764L3.25143 72.4195C2.77144 72.6927 2.77143 73.1356 3.25144 73.4087L45.502 97.453L88.6197 72.9153L45.5 48.3764Z",fill:"#009E62",stroke:"#322222",strokeWidth:"2",strokeLinejoin:"bevel"}),(0,d.jsx)("path",{d:"M45.5 47.7036L3.25143 71.7467C2.77144 72.0198 2.77143 72.4627 3.25144 72.7359L45.502 96.7801L88.6197 72.2424L45.5 47.7036Z",fill:"#009E62",stroke:"#322222",strokeWidth:"2",strokeLinejoin:"bevel"}),(0,d.jsx)("path",{d:"M45.5 47.0297L3.25143 71.0728C2.77144 71.346 2.77143 71.7889 3.25144 72.062L45.502 96.1063L88.6197 71.5686L45.5 47.0297Z",fill:"#009E62",stroke:"#322222",strokeWidth:"2",strokeLinejoin:"bevel"}),(0,d.jsx)("path",{d:"M45.5 46.3564L3.25143 70.3995C2.77144 70.6727 2.77143 71.1155 3.25144 71.3887L45.502 95.433L88.6197 70.8953L45.5 46.3564Z",fill:"#009E62",stroke:"#322222",strokeWidth:"2",strokeLinejoin:"bevel"}),(0,d.jsx)("path",{d:"M45.5 45.6835L3.25143 69.7266C2.77144 69.9998 2.77143 70.4427 3.25144 70.7158L45.502 94.7601L88.6197 70.2224L45.5 45.6835Z",fill:"#009E62",stroke:"#322222",strokeWidth:"2",strokeLinejoin:"bevel"}),(0,d.jsx)("path",{d:"M45.5 45.0097L3.25143 69.0528C2.77144 69.326 2.77143 69.7689 3.25144 70.042L45.502 94.0863L88.6197 69.5486L45.5 45.0097Z",fill:"#009E62",stroke:"#322222",strokeWidth:"2",strokeLinejoin:"bevel"}),(0,d.jsx)("path",{d:"M45.5 44.3364L3.25143 68.3795C2.77144 68.6526 2.77143 69.0955 3.25144 69.3687L45.502 93.4129L88.6197 68.8752L45.5 44.3364Z",fill:"#009E62",stroke:"#322222",strokeWidth:"2",strokeLinejoin:"bevel"}),(0,d.jsx)("path",{d:"M45.5 43.6635L3.25143 67.7066C2.77144 67.9798 2.77143 68.4227 3.25144 68.6958L45.502 92.7401L88.6197 68.2024L45.5 43.6635Z",fill:"#009E62",stroke:"#322222",strokeWidth:"2",strokeLinejoin:"bevel"}),(0,d.jsx)("path",{d:"M46.3691 42.4946C45.8891 42.2214 45.1109 42.2214 44.6309 42.4946L2.38231 66.5377C1.42231 67.084 1.42232 67.9698 2.38232 68.5161L44.6329 92.5604C45.1129 92.8335 45.8912 92.8335 46.3712 92.5604L89.4888 68.0227C89.9688 67.7495 89.9688 67.3066 89.4888 67.0335L46.3691 42.4946Z",fill:"#543B3C"}),(0,d.jsx)("path",{d:"M46.3711 52.3169C45.8911 52.0437 45.1128 52.0437 44.6328 52.3169L19.6432 66.5381C18.6832 67.0844 18.6832 67.9702 19.6433 68.5165L44.6341 82.7385C45.1141 83.0116 45.8923 83.0116 46.3723 82.7385L72.231 68.0226C72.711 67.7495 72.711 67.3066 72.231 67.0334L46.3711 52.3169Z",fill:"#7F4F42"}),(0,d.jsx)("g",{filter:"url(#filter0_f_1619_7058)",children:(0,d.jsx)("ellipse",{cx:"21.5463",cy:"1.17643",rx:"21.5463",ry:"1.17643",transform:"matrix(0.904419 0.426646 -0.444506 0.895776 28.2363 56.3481)",fill:"black",fillOpacity:"0.9"})}),(0,d.jsxs)("g",{opacity:"0.65",children:[(0,d.jsx)("path",{d:"M21.7119 57.3742C21.9325 57.3742 22.1113 57.1677 22.1113 56.9129C22.1113 56.6582 21.9325 56.4517 21.7119 56.4517C21.4913 56.4517 21.3125 56.6582 21.3125 56.9129C21.3125 57.1677 21.4913 57.3742 21.7119 57.3742Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M21.3614 47.6163C21.7756 47.6163 22.1114 47.2285 22.1114 46.7501C22.1114 46.2716 21.7756 45.8838 21.3614 45.8838C20.9471 45.8838 20.6113 46.2716 20.6113 46.7501C20.6113 47.2285 20.9471 47.6163 21.3614 47.6163Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M22.9478 51.1663C23.2544 51.1663 23.503 50.8792 23.503 50.525C23.503 50.1709 23.2544 49.8838 22.9478 49.8838C22.6412 49.8838 22.3926 50.1709 22.3926 50.525C22.3926 50.8792 22.6412 51.1663 22.9478 51.1663Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M17.0608 46.1218C17.2195 46.1218 17.3481 45.9732 17.3481 45.7899C17.3481 45.6066 17.2195 45.458 17.0608 45.458C16.9021 45.458 16.7734 45.6066 16.7734 45.7899C16.7734 45.9732 16.9021 46.1218 17.0608 46.1218Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M18.0238 39.4277C18.1556 39.4277 18.2624 39.3043 18.2624 39.1521C18.2624 38.9999 18.1556 38.8765 18.0238 38.8765C17.892 38.8765 17.7852 38.9999 17.7852 39.1521C17.7852 39.3043 17.892 39.4277 18.0238 39.4277Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M32.0112 42.2092C32.464 42.2092 32.8311 41.7853 32.8311 41.2623C32.8311 40.7394 32.464 40.3154 32.0112 40.3154C31.5585 40.3154 31.1914 40.7394 31.1914 41.2623C31.1914 41.7853 31.5585 42.2092 32.0112 42.2092Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M30.2477 45.1811C30.4665 45.1811 30.6438 44.9763 30.6438 44.7236C30.6438 44.471 30.4665 44.2661 30.2477 44.2661C30.0289 44.2661 29.8516 44.471 29.8516 44.7236C29.8516 44.9763 30.0289 45.1811 30.2477 45.1811Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M33.1048 39.5045C33.2554 39.5045 33.3775 39.3635 33.3775 39.1895C33.3775 39.0156 33.2554 38.8745 33.1048 38.8745C32.9541 38.8745 32.832 39.0156 32.832 39.1895C32.832 39.3635 32.9541 39.5045 33.1048 39.5045Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M30.3195 56.7496C30.922 56.7496 31.4104 56.1854 31.4104 55.4895C31.4104 54.7936 30.922 54.2295 30.3195 54.2295C29.717 54.2295 29.2285 54.7936 29.2285 55.4895C29.2285 56.1854 29.717 56.7496 30.3195 56.7496Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M58.7499 88.7474C58.9946 88.7474 59.1931 88.5182 59.1931 88.2355C59.1931 87.9528 58.9946 87.7236 58.7499 87.7236C58.5051 87.7236 58.3066 87.9528 58.3066 88.2355C58.3066 88.5182 58.5051 88.7474 58.7499 88.7474Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M63.6632 73.59C63.9313 73.59 64.1486 73.339 64.1486 73.0294C64.1486 72.7198 63.9313 72.4688 63.6632 72.4688C63.3951 72.4688 63.1777 72.7198 63.1777 73.0294C63.1777 73.339 63.3951 73.59 63.6632 73.59Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M62.2831 70.065C62.6445 70.065 62.9374 69.7267 62.9374 69.3093C62.9374 68.892 62.6445 68.5537 62.2831 68.5537C61.9218 68.5537 61.6289 68.892 61.6289 69.3093C61.6289 69.7267 61.9218 70.065 62.2831 70.065Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M65.6997 61.9515C65.8629 61.9515 65.9952 61.7988 65.9952 61.6103C65.9952 61.4218 65.8629 61.269 65.6997 61.269C65.5366 61.269 65.4043 61.4218 65.4043 61.6103C65.4043 61.7988 65.5366 61.9515 65.6997 61.9515Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M71.0289 53.9897C71.5507 53.9897 71.9737 53.5011 71.9737 52.8984C71.9737 52.2957 71.5507 51.8071 71.0289 51.8071C70.507 51.8071 70.084 52.2957 70.084 52.8984C70.084 53.5011 70.507 53.9897 71.0289 53.9897Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M69.7326 50.6658C69.9074 50.6658 70.0492 50.5021 70.0492 50.3002C70.0492 50.0983 69.9074 49.9346 69.7326 49.9346C69.5577 49.9346 69.416 50.0983 69.416 50.3002C69.416 50.5021 69.5577 50.6658 69.7326 50.6658Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M58.8018 62.3488C59.0753 62.3488 59.297 62.0928 59.297 61.777C59.297 61.4611 59.0753 61.2051 58.8018 61.2051C58.5283 61.2051 58.3066 61.4611 58.3066 61.777C58.3066 62.0928 58.5283 62.3488 58.8018 62.3488Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M56.3375 81.8922C56.4095 81.8922 56.4679 81.8247 56.4679 81.7415C56.4679 81.6583 56.4095 81.5908 56.3375 81.5908C56.2654 81.5908 56.207 81.6583 56.207 81.7415C56.207 81.8247 56.2654 81.8922 56.3375 81.8922Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M55.8085 89.4579C56.1008 89.4579 56.3378 89.1842 56.3378 88.8466C56.3378 88.509 56.1008 88.2354 55.8085 88.2354C55.5162 88.2354 55.2793 88.509 55.2793 88.8466C55.2793 89.1842 55.5162 89.4579 55.8085 89.4579Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M59.9272 81.5925C60.3324 81.5925 60.661 81.2131 60.661 80.745C60.661 80.2769 60.3324 79.8975 59.9272 79.8975C59.5219 79.8975 59.1934 80.2769 59.1934 80.745C59.1934 81.2131 59.5219 81.5925 59.9272 81.5925Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M58.9728 75.6785C59.0947 75.6785 59.1935 75.5643 59.1935 75.4235C59.1935 75.2826 59.0947 75.1685 58.9728 75.1685C58.8508 75.1685 58.752 75.2826 58.752 75.4235C58.752 75.5643 58.8508 75.6785 58.9728 75.6785Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M33.3118 83.1546C33.6856 83.1546 33.9887 82.8046 33.9887 82.3727C33.9887 81.9409 33.6856 81.5908 33.3118 81.5908C32.9379 81.5908 32.6348 81.9409 32.6348 82.3727C32.6348 82.8046 32.9379 83.1546 33.3118 83.1546Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M35.5783 76.1121C35.7424 76.1121 35.8754 75.9584 35.8754 75.7689C35.8754 75.5794 35.7424 75.4258 35.5783 75.4258C35.4142 75.4258 35.2812 75.5794 35.2812 75.7689C35.2812 75.9584 35.4142 76.1121 35.5783 76.1121Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M26.0733 75.3332C26.4902 75.3332 26.8282 74.9428 26.8282 74.4613C26.8282 73.9797 26.4902 73.5894 26.0733 73.5894C25.6563 73.5894 25.3184 73.9797 25.3184 74.4613C25.3184 74.9428 25.6563 75.3332 26.0733 75.3332Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M30.5695 89.2609C31.0339 89.2609 31.4105 88.8261 31.4105 88.2896C31.4105 87.7532 31.0339 87.3184 30.5695 87.3184C30.105 87.3184 29.7285 87.7532 29.7285 88.2896C29.7285 88.8261 30.105 89.2609 30.5695 89.2609Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M24.1832 72.0072C24.349 72.0072 24.4835 71.8519 24.4835 71.6604C24.4835 71.4688 24.349 71.3135 24.1832 71.3135C24.0173 71.3135 23.8828 71.4688 23.8828 71.6604C23.8828 71.8519 24.0173 72.0072 24.1832 72.0072Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M72.5169 76.2244C72.9383 76.2244 73.28 75.8299 73.28 75.3432C73.28 74.8565 72.9383 74.4619 72.5169 74.4619C72.0955 74.4619 71.7539 74.8565 71.7539 75.3432C71.7539 75.8299 72.0955 76.2244 72.5169 76.2244Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M55.2775 8.64549C55.872 8.64549 56.3539 8.08891 56.3539 7.40233C56.3539 6.71576 55.872 6.15918 55.2775 6.15918C54.6831 6.15918 54.2012 6.71576 54.2012 7.40233C54.2012 8.08891 54.6831 8.64549 55.2775 8.64549Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M72.1579 65.7874C72.3552 65.7874 72.5151 65.6027 72.5151 65.3749C72.5151 65.1471 72.3552 64.9624 72.1579 64.9624C71.9607 64.9624 71.8008 65.1471 71.8008 65.3749C71.8008 65.6027 71.9607 65.7874 72.1579 65.7874Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M70.8556 77.0004C71.0412 77.0004 71.1916 76.8266 71.1916 76.6123C71.1916 76.3979 71.0412 76.2241 70.8556 76.2241C70.67 76.2241 70.5195 76.3979 70.5195 76.6123C70.5195 76.8266 70.67 77.0004 70.8556 77.0004Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M70.5324 69.2586C70.7099 69.2586 70.8538 69.0924 70.8538 68.8874C70.8538 68.6823 70.7099 68.5161 70.5324 68.5161C70.3548 68.5161 70.2109 68.6823 70.2109 68.8874C70.2109 69.0924 70.3548 69.2586 70.5324 69.2586Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M68.0417 81.8907C68.3161 81.8907 68.5385 81.6338 68.5385 81.3169C68.5385 81 68.3161 80.7432 68.0417 80.7432C67.7673 80.7432 67.5449 81 67.5449 81.3169C67.5449 81.6338 67.7673 81.8907 68.0417 81.8907Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M71.1482 31.4934C71.4835 31.4934 71.7554 31.1794 71.7554 30.7921C71.7554 30.4048 71.4835 30.0908 71.1482 30.0908C70.8129 30.0908 70.541 30.4048 70.541 30.7921C70.541 31.1794 70.8129 31.4934 71.1482 31.4934Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M70.8328 24.7423C71.0059 24.7423 71.1462 24.5803 71.1462 24.3804C71.1462 24.1806 71.0059 24.0186 70.8328 24.0186C70.6598 24.0186 70.5195 24.1806 70.5195 24.3804C70.5195 24.5803 70.6598 24.7423 70.8328 24.7423Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M66.361 17.1918C66.5637 17.1918 66.7279 17.002 66.7279 16.768C66.7279 16.534 66.5637 16.3442 66.361 16.3442C66.1584 16.3442 65.9941 16.534 65.9941 16.768C65.9941 17.002 66.1584 17.1918 66.361 17.1918Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M66.4272 28.3844C66.6675 28.3844 66.8623 28.1594 66.8623 27.8819C66.8623 27.6044 66.6675 27.3794 66.4272 27.3794C66.187 27.3794 65.9922 27.6044 65.9922 27.8819C65.9922 28.1594 66.187 28.3844 66.4272 28.3844Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M64.5526 37.5236C64.7759 37.5236 64.9569 37.3146 64.9569 37.0567C64.9569 36.7989 64.7759 36.5898 64.5526 36.5898C64.3294 36.5898 64.1484 36.7989 64.1484 37.0567C64.1484 37.3146 64.3294 37.5236 64.5526 37.5236Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M28.9984 14.1733C29.1249 14.1733 29.2273 14.0549 29.2273 13.9089C29.2273 13.7629 29.1249 13.6445 28.9984 13.6445C28.872 13.6445 28.7695 13.7629 28.7695 13.9089C28.7695 14.0549 28.872 14.1733 28.9984 14.1733Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M31.6351 26.2732C32.0009 26.2732 32.2974 25.9307 32.2974 25.5082C32.2974 25.0857 32.0009 24.7432 31.6351 24.7432C31.2692 24.7432 30.9727 25.0857 30.9727 25.5082C30.9727 25.9307 31.2692 26.2732 31.6351 26.2732Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M27.2947 31.4934C27.63 31.4934 27.9018 31.1794 27.9018 30.7921C27.9018 30.4048 27.63 30.0908 27.2947 30.0908C26.9593 30.0908 26.6875 30.4048 26.6875 30.7921C26.6875 31.1794 26.9593 31.4934 27.2947 31.4934Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M25.2315 26.6082C25.3615 26.6082 25.4669 26.4865 25.4669 26.3363C25.4669 26.1862 25.3615 26.0645 25.2315 26.0645C25.1015 26.0645 24.9961 26.1862 24.9961 26.3363C24.9961 26.4865 25.1015 26.6082 25.2315 26.6082Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M20.2202 29.4793C20.482 29.4793 20.6942 29.2342 20.6942 28.9318C20.6942 28.6294 20.482 28.3843 20.2202 28.3843C19.9583 28.3843 19.7461 28.6294 19.7461 28.9318C19.7461 29.2342 19.9583 29.4793 20.2202 29.4793Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M23.8243 37.3343C24.3075 37.3343 24.6993 36.8818 24.6993 36.3236C24.6993 35.7655 24.3075 35.313 23.8243 35.313C23.341 35.313 22.9492 35.7655 22.9492 36.3236C22.9492 36.8818 23.341 37.3343 23.8243 37.3343Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M52.4528 13.2578C52.6769 13.2578 52.8587 13.048 52.8587 12.7891C52.8587 12.5302 52.6769 12.3203 52.4528 12.3203C52.2286 12.3203 52.0469 12.5302 52.0469 12.7891C52.0469 13.048 52.2286 13.2578 52.4528 13.2578Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M36.1679 6.9249C36.5346 6.9249 36.8319 6.58155 36.8319 6.15801C36.8319 5.73446 36.5346 5.39111 36.1679 5.39111C35.8012 5.39111 35.5039 5.73446 35.5039 6.15801C35.5039 6.58155 35.8012 6.9249 36.1679 6.9249Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M54.7868 1.13628C55.0585 1.13628 55.2788 0.881913 55.2788 0.568139C55.2788 0.254364 55.0585 0 54.7868 0C54.5152 0 54.2949 0.254364 54.2949 0.568139C54.2949 0.881913 54.5152 1.13628 54.7868 1.13628Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M44.2082 16.0934C44.6672 16.0934 45.0394 15.6636 45.0394 15.1334C45.0394 14.6032 44.6672 14.1733 44.2082 14.1733C43.7491 14.1733 43.377 14.6032 43.377 15.1334C43.377 15.6636 43.7491 16.0934 44.2082 16.0934Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M51.7248 29.4789C52.1067 29.4789 52.4164 29.1212 52.4164 28.6801C52.4164 28.239 52.1067 27.8813 51.7248 27.8813C51.3428 27.8813 51.0332 28.239 51.0332 28.6801C51.0332 29.1212 51.3428 29.4789 51.7248 29.4789Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M55.5306 30.6758C55.6705 30.6758 55.7838 30.5449 55.7838 30.3833C55.7838 30.2218 55.6705 30.0908 55.5306 30.0908C55.3907 30.0908 55.2773 30.2218 55.2773 30.3833C55.2773 30.5449 55.3907 30.6758 55.5306 30.6758Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M40.9264 30.3828C41.1425 30.3828 41.3177 30.1805 41.3177 29.9309C41.3177 29.6813 41.1425 29.479 40.9264 29.479C40.7103 29.479 40.5352 29.6813 40.5352 29.9309C40.5352 30.1805 40.7103 30.3828 40.9264 30.3828Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M39.2954 23.9142C39.5384 23.9142 39.7354 23.6867 39.7354 23.4061C39.7354 23.1254 39.5384 22.8979 39.2954 22.8979C39.0524 22.8979 38.8555 23.1254 38.8555 23.4061C38.8555 23.6867 39.0524 23.9142 39.2954 23.9142Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M53.1535 16.7683C53.3149 16.7683 53.4457 16.6172 53.4457 16.4308C53.4457 16.2444 53.3149 16.0933 53.1535 16.0933C52.9921 16.0933 52.8613 16.2444 52.8613 16.4308C52.8613 16.6172 52.9921 16.7683 53.1535 16.7683Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M50.9649 10.5508C51.1612 10.5508 51.3204 10.3669 51.3204 10.1401C51.3204 9.91334 51.1612 9.72949 50.9649 9.72949C50.7685 9.72949 50.6094 9.91334 50.6094 10.1401C50.6094 10.3669 50.7685 10.5508 50.9649 10.5508Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M13.9624 53.4497C14.139 53.4497 14.2822 53.2843 14.2822 53.0803C14.2822 52.8763 14.139 52.7109 13.9624 52.7109C13.7858 52.7109 13.6426 52.8763 13.6426 53.0803C13.6426 53.2843 13.7858 53.4497 13.9624 53.4497Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M36.2555 14.4396C36.538 14.4396 36.7669 14.1751 36.7669 13.8489C36.7669 13.5227 36.538 13.2583 36.2555 13.2583C35.9731 13.2583 35.7441 13.5227 35.7441 13.8489C35.7441 14.1751 35.9731 14.4396 36.2555 14.4396Z",fill:"#D1FEF9"}),(0,d.jsx)("path",{d:"M15.9614 55.0665C16.3479 55.0665 16.6612 54.7047 16.6612 54.2583C16.6612 53.812 16.3479 53.4502 15.9614 53.4502C15.575 53.4502 15.2617 53.812 15.2617 54.2583C15.2617 54.7047 15.575 55.0665 15.9614 55.0665Z",fill:"#D1FEF9"})]}),(0,d.jsx)("g",{opacity:"0.2",filter:"url(#filter1_f_1619_7058)",children:(0,d.jsx)("path",{d:"M40.8064 70.1355L32.868 64.2306C30.8387 62.7211 29.6427 60.3409 29.6427 57.8118L29.6426 40.3723C29.6426 37.8971 30.7883 35.5613 32.7455 34.0462L40.9228 27.7161C43.7607 25.5192 47.7145 25.4811 50.5942 27.623L58.4267 33.4486C60.4562 34.9581 61.6523 37.3384 61.6523 39.8677V57.3516C61.6523 59.8014 60.5298 62.1162 58.6061 63.6333L50.5349 69.9983C47.6957 72.2374 43.7076 72.2936 40.8064 70.1355Z",fill:"#5CF9BE"})}),(0,d.jsx)("g",{filter:"url(#filter2_f_1619_7058)",children:(0,d.jsx)("ellipse",{cx:"11.1792",cy:"0.610387",rx:"11.1792",ry:"0.610387",transform:"matrix(0.904419 0.426646 -0.444506 0.895776 34.0684 66.5498)",fill:"black",fillOpacity:"0.9"})}),(0,d.jsx)("path",{d:"M45.6562 31.7422L58.6697 48.4139L45.6562 56.1562V31.7422Z",fill:"#B5FFE3"}),(0,d.jsx)("path",{d:"M45.6562 66.1172L32.6428 48.4141L45.6563 56.1565L45.6562 66.1172Z",fill:"#1AD28D"}),(0,d.jsx)("path",{d:"M45.6561 31.7442V56.1579L32.6426 48.4157L45.6561 31.7442Z",fill:"#5CF9BE"}),(0,d.jsx)("path",{d:"M45.6565 66.1167L45.6565 56.1563L58.6699 48.4138L45.6565 66.1167Z",fill:"#5CF9BE"}),(0,d.jsxs)("defs",{children:[(0,d.jsxs)("filter",{id:"filter0_f_1619_7058",x:"17.707",y:"47.3408",width:"58.9863",height:"38.5073",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,d.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,d.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,d.jsx)("feGaussianBlur",{stdDeviation:"5",result:"effect1_foregroundBlur_1619_7058"})]}),(0,d.jsxs)("filter",{id:"filter1_f_1619_7058",x:"13.6426",y:"10.042",width:"64.0098",height:"77.6748",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,d.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,d.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,d.jsx)("feGaussianBlur",{stdDeviation:"8",result:"effect1_foregroundBlur_1619_7058"})]}),(0,d.jsxs)("filter",{id:"filter2_f_1619_7058",x:"23.793",y:"57.0649",width:"40.2285",height:"29.6025",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,d.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,d.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,d.jsx)("feGaussianBlur",{stdDeviation:"5",result:"effect1_foregroundBlur_1619_7058"})]})]})]}))})),fM="creationGoal",hM=(uM={},(0,r.Z)(uM,fM,{text:{id:"What is your goal with GDevelop?"},answers:[{text:{id:"I'm learning or teaching game development"},id:"learningOrTeaching",nextQuestion:"learningOrTeaching",imageSource:"res/questionnaire/learning-or-teaching.svg"},{text:{id:"I'm building a video game or app"},id:"building",nextQuestion:"buildingKindOfProjects",imageSource:"res/questionnaire/building-video-game-or-app.svg"},{text:{id:"Other"},id:"input",imageSource:"res/questionnaire/other.svg",isFree:!0}]}),(0,r.Z)(uM,"learningOrTeaching",{text:{id:"Are you teaching or learning game development?"},answers:[{text:{id:"I am teaching game development"},id:"teaching",nextQuestion:"gameDevelopmentExperience",imageSource:"res/questionnaire/learning.svg"},{text:{id:"I am learning game development"},id:"learning",nextQuestion:"learningHow",imageSource:"res/questionnaire/teaching.svg"}]}),(0,r.Z)(uM,"learningHow",{text:{id:"How are you learning game dev?"},answers:[{text:{id:"Through a teacher"},id:"withTeacher",imageSource:"res/questionnaire/through-a-teacher.svg"},{text:{id:"On my own"},id:"alone",nextQuestion:"learningKindOfProjects",imageSource:"res/questionnaire/on-my-own.svg"}]}),(0,r.Z)(uM,"learningKindOfProjects",{text:{id:"What kind of projects do you want to build with GDevelop?"},answers:[{text:{id:"A game to publish"},id:"gameToPublish",nextQuestion:"gameDevelopmentExperience",imageSource:"res/questionnaire/game-to-publish.svg"},{text:{id:"New interactive services for clients"},id:"interactiveService",nextQuestion:"gameDevelopmentExperience",imageSource:"res/questionnaire/interactive-services-for-clients.svg"},{text:{id:"Games to learn or teach something"},id:"seriousGame",nextQuestion:"gameDevelopmentExperience",imageSource:"res/questionnaire/serious-game.svg"},{text:{id:"Other"},id:"other",nextQuestion:"gameDevelopmentExperience",imageSource:"res/questionnaire/other.svg"}]}),(0,r.Z)(uM,"buildingKindOfProjects",{text:{id:"What kind of projects do you want to build with GDevelop?"},nextQuestion:"projectDescription",multi:!0,answers:[{text:{id:"Video game"},id:"videoGame",imageSource:"res/questionnaire/video-game.svg"},{text:{id:"Interactive content"},id:"interactiveContent",imageSource:"res/questionnaire/interactive-content.svg"},{text:{id:"App or tool"},id:"appOrTool",imageSource:"res/questionnaire/app-or-tool.svg"},{text:{id:"Game for teaching or learning"},id:"seriousGame",imageSource:"res/questionnaire/serious-game.svg"}]}),(0,r.Z)(uM,"projectDescription",{text:{id:"Would you like to describe your projects?"},nextQuestion:"workingTeam",answers:[{text:{id:"What kind of projects are you building?"},id:"input",isFree:!0}]}),(0,r.Z)(uM,"workingTeam",{text:{id:"How are you working on your projects?"},nextQuestion:"painPoints",answers:[{text:{id:"Completely alone"},id:"alone",imageSource:"res/questionnaire/completely-alone.svg"},{text:{id:"With at least one other person"},id:"onePlus",imageSource:"res/questionnaire/with-at-least-one-other-person.svg"},{text:{id:"With an established team of people during the whole project"},id:"team",imageSource:"res/questionnaire/with-a-team.svg"}]}),(0,r.Z)(uM,"painPoints",{text:{id:"Is there anything that you struggle with while working on your projects?"},multi:!0,nextQuestion:"targetDate",answers:[{text:{id:"Lack of Graphics & Animation"},id:"lackGraphics",imageSource:"res/questionnaire/lack-of-graphics.svg"},{text:{id:"Lack of Music & Sound"},id:"lackSound",imageSource:"res/questionnaire/lack-of-sounds.svg"},{text:{id:"Lack of Marketing & Publicity"},id:"lackMarketing",imageSource:"res/questionnaire/lack-of-marketing.svg"},{text:{id:"Implementing in-project monetization"},id:"inAppMonetization",imageSource:"res/questionnaire/in-app-monetization.svg"},{text:{id:"Dealing with data integration from external sources"},id:"externalIntegration",imageSource:"res/questionnaire/integration-of-external-services.svg"},{text:{id:"Other"},id:"input",imageSource:"res/questionnaire/other.svg",isFree:!0}]}),(0,r.Z)(uM,"targetDate",{text:{id:"When do you plan to finish or release your projects?"},nextQuestion:"gameDevelopmentExperience",answers:[{text:{id:"Less than a month"},id:"1MonthOrLess",imageSource:"res/questionnaire/delay-less-than-1-month.svg"},{text:{id:"Around 1 or 2 months"},id:"1To2Months",imageSource:"res/questionnaire/delay-1-to-2-months.svg"},{text:{id:"Around 3 to 5 months"},id:"3To5Months",imageSource:"res/questionnaire/delay-3-to-5-months.svg"},{text:{id:"More than 6 months"},id:"6MonthsPlus",imageSource:"res/questionnaire/delay-6-months-plus.svg"},{text:{id:"In around a year"},id:"1Year",imageSource:"res/questionnaire/delay-1-year.svg"},{text:{id:"I don\u2019t have a specific deadline"},id:"noDeadline",imageSource:"res/questionnaire/delay-no-deadline.svg"}]}),(0,r.Z)(uM,"gameDevelopmentExperience",{text:{id:"Do you have game development experience?"},getNextQuestion:function(e){return e.some((function(e){return"targetDate"===e.questionId||"learningKindOfProjects"===e.questionId&&e.answers.includes("interactiveService")}))?"targetPlatform":null},answers:[{text:{id:"No experience at all"},id:"none",imageSource:"res/questionnaire/zero-coding-experience.svg"},{text:{id:"Some no-code experience"},id:"someNoCode",imageSource:"res/questionnaire/no-code-experience.svg"},{text:{id:"Some code experience"},id:"someCode",imageSource:"res/questionnaire/coding-experience.svg"}]}),(0,r.Z)(uM,"targetPlatform",{text:{id:"Where are you planing to publish your project(s)?"},multi:!0,answers:[{text:{id:"On Steam and/or Epic Games"},id:"steamEpic",imageSource:"res/questionnaire/target-steam.svg"},{text:{id:"On Itch and/or Newgrounds"},id:"itchNewgrounds",imageSource:"res/questionnaire/target-itch.svg"},{text:{id:"On Poki and/or CrazyGames"},id:"pokiCrazyGames",imageSource:"res/questionnaire/target-poki.svg"},{text:{id:"Android mobile devices (Google Play, Amazon)"},id:"androidApp",imageSource:"res/questionnaire/target-play-store.svg"},{text:{id:"Apple mobile devices (App Store)"},id:"iosApp",imageSource:"res/questionnaire/target-app-store.svg"},{text:{id:"Sharing the final file with the client"},id:"client",imageSource:"res/questionnaire/target-client.svg"},{text:{id:"Personal or company website"},id:"personal",imageSource:"res/questionnaire/target-personal.svg"},{text:{id:"Consoles"},id:"console",imageSource:"res/questionnaire/target-console.svg"},{text:{id:"Other"},id:"other",imageSource:"res/questionnaire/other.svg"}]}),uM),gM=n(15955),xM=n(89141),mM=function(e,t){switch(e){case"small":return t?3:1;case"medium":return 2;case"large":return 3;default:return 4}},vM=function(e){return(0,R.Z)((function(t){return(0,D.Z)({root:{"&:hover":{filter:e?void 0:"dark"===t.palette.type?"brightness(120%)":"brightness(85%)"}}})}))()},bM=function(e){var t=e.i18n,n=e.text,r=e.multi,i=e.answers,o=e.textAlign;return(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(F.Z,{size:"block-title",align:o,noMargin:!0,children:t._(n)}),r?(0,d.jsx)(F.Z,{style:CM.subTitle,align:o,noMargin:!0,children:t._({id:"You can select more than one."})}):SM(i)?(0,d.jsx)(F.Z,{style:CM.subTitle,align:o,noMargin:!0,children:t._({id:"The more descriptive you are, the better we can match the content we\u2019ll recommend."})}):null,(0,d.jsx)(L.LZ,{})]})},CM={answerButton:{border:"solid",borderWidth:1,borderRadius:8,width:"100%",height:"100%",display:"flex"},questionContainer:{display:"flex",flexDirection:"column",alignItems:"stretch",overflow:"hidden",marginBottom:30},answerButtonBackground:{width:"100%",height:"100%"},answerCoverImage:{borderTopLeftRadius:8,borderTopRightRadius:8,width:"100%",aspectRatio:"292 / 103"},answerCheckboxAnchor:{position:"relative"},answerCheckboxContainer:{position:"absolute",left:5,top:"calc(50% - 9px)"},answerTextContainer:{marginLeft:25,marginRight:25},freeAnswerContent:{display:"flex",height:"100%",flexDirection:"column"},freeAnswerInputOutline:{border:"solid",borderWidth:1,borderRadius:4,flex:1,padding:8},subTitle:{opacity:.6}},jM=function(e){var t=e.answerData,n=e.i18n,r=e.onSelect,i=e.selected,o=e.showCheckbox,c=e.onClickSend,u=e.value,p=e.onChange,f=t.text,h=t.imageSource,g=t.id,x=l.useState(null),m=(0,s.Z)(x,2),v=m[0],j=m[1],y=(0,gM.Z)(),Z=("dark"===y.palette.type?xM._j:xM.$n)(y.palette.text.primary,i?0:.7),k=vM(i),w=c?function(){j(null);var e=u.trim();e?c(e):j((0,d.jsx)(b.Trans,{id:"Please explain your use of GDevelop."}))}:null;return(0,d.jsx)(O.Z,{style:(0,a.Z)((0,a.Z)({},CM.answerButton),{},{borderColor:Z}),classes:k,onClick:function(e){e.nativeEvent&&0===e.nativeEvent.x&&0===e.nativeEvent.y||r(g)},disableRipple:i,children:(0,d.jsx)(de.Z,{square:!1,background:"medium",style:CM.answerButtonBackground,children:(0,d.jsx)("div",{style:CM.freeAnswerContent,children:i||!h?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.x1,{justifyContent:"center",children:(0,d.jsx)(F.Z,{size:"sub-title",children:n._(f)})}),(0,d.jsx)(L.x1,{justifyContent:"center",useFullHeight:!0,expand:!0,noMargin:!0,children:(0,d.jsxs)(C.ak,{expand:!0,children:[(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},CM.freeAnswerInputOutline),{},{borderColor:y.palette.text.disabled}),children:(0,d.jsx)($r.ZP,{multiline:!0,fullWidth:!0,errorText:v,rows:5,rowsMax:5,maxLength:200,style:{fontSize:14},underlineShow:!1,margin:"none",translatableHintText:{id:"Tell us more!..."},type:"text",value:u,onChange:function(e,t){return p(t)},autoFocus:"desktop",onClick:function(e){return e.stopPropagation()}})}),w&&(0,d.jsx)(T.Z,{primary:!0,label:n._({id:"Send"}),fullWidth:!0,onClick:w,disabled:!u})]})}),(0,d.jsx)(L.LZ,{})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("img",{src:h,style:CM.answerCoverImage,alt:"Other"}),(0,d.jsxs)(L.x1,{justifyContent:o?"flex-start":"center",children:[o?(0,d.jsx)("div",{style:CM.answerCheckboxAnchor,children:(0,d.jsx)("div",{style:CM.answerCheckboxContainer,children:(0,d.jsx)(Xa.Z,{checked:i,paddingSize:"small"})})}):null,(0,d.jsx)(L.sg,{justifyContent:"center",alignItems:"center",expand:!0,children:(0,d.jsx)("div",{style:CM.answerTextContainer,children:(0,d.jsx)(F.Z,{noMargin:!0,children:n._(f)})})})]})]})})})})},yM=function(e){var t=e.answerData,n=e.i18n,r=e.onSelect,i=e.selected,o=e.showCheckbox,s=t.imageSource,l=t.text,c=t.id,u=(0,gM.Z)(),p=("dark"===u.palette.type?xM._j:xM.$n)(u.palette.text.primary,i?0:.7),f=vM();return(0,d.jsx)(O.Z,{style:(0,a.Z)((0,a.Z)({},CM.answerButton),{},{borderColor:p}),classes:f,onClick:function(){return r(c)},children:(0,d.jsxs)(de.Z,{square:!1,background:"medium",style:CM.answerButtonBackground,children:[(0,d.jsx)("img",{src:s,style:CM.answerCoverImage,alt:"Illustration for option ".concat(n._(l))}),(0,d.jsxs)(L.x1,{justifyContent:o?"flex-start":"center",children:[o?(0,d.jsx)("div",{style:CM.answerCheckboxAnchor,children:(0,d.jsx)("div",{style:CM.answerCheckboxContainer,children:(0,d.jsx)(Xa.Z,{checked:i,paddingSize:"small"})})}):null,(0,d.jsx)(L.sg,{justifyContent:"center",alignItems:"center",expand:!0,children:(0,d.jsx)("div",{style:CM.answerTextContainer,children:(0,d.jsx)(F.Z,{noMargin:!0,children:n._(l)})})})]})]})})},ZM=l.forwardRef((function(e,t){var n=e.questionData,r=e.onSelectAnswer,i=e.selectedAnswers,o=e.showNextButton,a=e.onClickNext,s=e.showQuestionText,l=e.onClickSend,c=e.userInputValue,u=e.onChangeUserInputValue,p=n.text,f=n.answers,h=n.multi,g=(0,w.U)(),x=g.windowSize,m=g.isLandscape,v=SM(f);return(0,d.jsx)(b.I18n,{children:function(e){var g=e.i18n;return(0,d.jsxs)("div",{ref:t,style:CM.questionContainer,children:[s?(0,d.jsx)(bM,{i18n:g,multi:h,answers:n.answers,text:p,textAlign:"left"}):null,(0,d.jsx)(pj.Z,{cols:v?1:mM(x,m),spacing:15,cellHeight:"auto",children:v&&void 0!==c&&u?(0,d.jsx)(xj.Z,{children:(0,d.jsx)(jM,{answerData:f[0],i18n:g,onSelect:function(){},selected:i.includes(f[0].id),showCheckbox:!1,onClickSend:l,value:c,onChange:u},f[0].id)}):f.map((function(e){return(0,d.jsx)(xj.Z,{children:"input"===e.id&&void 0!==c&&u?(0,d.jsx)(jM,{answerData:e,i18n:g,onSelect:r,selected:i.includes(e.id),showCheckbox:!!h,onClickSend:l,value:c,onChange:u}):(0,d.jsx)(yM,{answerData:e,i18n:g,onSelect:r,selected:i.includes(e.id),showCheckbox:!!h})},e.id)}))}),o&&(0,d.jsx)(L.x1,{justifyContent:"flex-end",children:(0,d.jsx)(T.Z,{primary:!0,label:g._({id:"Next"}),onClick:a,disabled:0===i.length||1===i.length&&"input"===i[0]&&!c})})]})}})})),kM="gd-user-survey",wM=function(){try{localStorage.removeItem(kM)}catch(e){console.log("An error occurred when clearing user survey in local storage:",e)}},TM="QUESTIONNAIRE_FINISHED",SM=function(e){return 1===e.length&&"isFree"in e[0]},PM={height:8,width:8,borderRadius:"50%",margin:5},EM=function(e){var t=e.stepIndex,n=l.useContext(f.Z);return(0,d.jsx)(L.x1,{justifyContent:"center",children:new Array(8).fill(0).map((function(e,r){return(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},PM),{},{backgroundColor:r===t?n.text.color.primary:n.text.color.disabled})},r)}))})},IM=function(e){var t=e.userAnswers,n=e.onSelectAnswer,r=e.goToNextQuestion,i=e.onClickSend,o=e.onChangeUserInputValue,s=e.questionId,c=hM[s],u=l.useRef(null),p=l.useCallback((function(){setTimeout((function(){u.current&&u.current.scrollIntoView({behavior:"smooth"})}),100)}),[]);l.useEffect((function(){p()}),[s,p]);var f=t.map((function(e,a){var l=hM[e.questionId];return{key:e.questionId,questionData:l,selectedAnswers:e.answers,onSelectAnswer:function(t){return n(e.questionId,t)},showNextButton:(l.multi||SM(l.answers))&&a===t.length-1&&s===e.questionId,onClickNext:function(){return r(l)},showQuestionText:!0,onClickSend:e.questionId===fM?i:void 0,userInputValue:e.userInput||"",onChangeUserInputValue:function(t){return o(e.questionId,t)}}}));if(c&&(!c.multi||t[t.length-1].questionId!==s)&&!(t[t.length-1]&&t[t.length-1].questionId===fM&&"input"===t[t.length-1].answers[0])&&!SM(c.answers)){var h=hM[s];f.push({key:s,questionData:h,selectedAnswers:[],onSelectAnswer:function(e){return n(s,e)},onClickNext:function(){return r(h)},showNextButton:h.multi,showQuestionText:!0})}return(0,d.jsx)(vy,{title:null,flexBody:!0,children:(0,d.jsxs)(C.ak,{noMargin:!0,children:[f.map((function(e,t){return(0,d.jsx)(ZM,(0,a.Z)((0,a.Z)({},e),{},{ref:t===f.length-1?u:null}))})),(0,d.jsx)("div",{style:{marginBottom:400}})]})})},MM=function(e){var t=e.userAnswers,n=e.onSelectAnswer,r=e.goToNextQuestion,i=e.goToPreviousQuestion,o=e.onClickSend,a=e.questionId,s=e.onChangeUserInputValue,c=l.useRef();l.useEffect((function(){c.current&&c.current.scrollToPosition(0)}),[a]);var u=hM[a];if(!u)return null;var p=t.find((function(e){return e.questionId===a}));return(0,d.jsx)(b.I18n,{children:function(e){var l=e.i18n;return(0,d.jsx)(vy,{title:null,flexBody:!0,noScroll:!0,children:(0,d.jsxs)("div",{style:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:[(0,d.jsx)(L.sg,{noMargin:!0,alignItems:"center",children:(0,d.jsx)(bM,{i18n:l,multi:u.multi,answers:u.answers,text:u.text,textAlign:"center"})}),(0,d.jsx)(Tt.Z,{ref:c,children:(0,d.jsx)(ZM,{questionData:u,selectedAnswers:p?p.answers:[],onSelectAnswer:function(e){return n(a,e)},onClickNext:function(){return r(u)},showNextButton:!1,showQuestionText:!1,onClickSend:a===fM?o:void 0,userInputValue:p?p.userInput||"":void 0,onChangeUserInputValue:function(e){return s(a,e)}},a)}),(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsxs)(C.pJ,{justifyContent:"stretch",expand:!0,children:[a!==fM&&(0,d.jsx)(J.Z,{fullWidth:!0,label:l._({id:"Back"}),onClick:i}),(u.multi||SM(u.answers))&&(0,d.jsx)(T.Z,{primary:!0,fullWidth:!0,label:l._({id:"Next"}),onClick:function(){return r(u)},disabled:!p||(0===p.answers.length||1===p.answers.length&&"input"===p.answers[0]&&!p.userInput)})]}),(0,d.jsx)(EM,{stepIndex:t.length+(u.multi&&t[t.length-1].questionId===a?-1:0)})]})]})})}})},LM=function(e){var t=e.onCompleted,n=e.onStarted,r=function(){try{var e=localStorage.getItem(kM);if(!e)return null;var t=JSON.parse(e);return!t.lastModifiedAt||Date.now()-t.lastModifiedAt>6e5?null:t}catch(n){return console.log("An error occurred when reading local storage:",n),null}}(),i=l.useState(r?r.questionId:fM),o=(0,s.Z)(i,2),c=o[0],u=o[1],p=(0,w.U)().isMobile,f=l.useState(r?r.userAnswers:[]),h=(0,s.Z)(f,2),g=h[0],x=h[1];l.useEffect((function(){g.length>0&&function(e){try{localStorage.setItem(kM,JSON.stringify((0,a.Z)((0,a.Z)({},e),{},{lastModifiedAt:Date.now()})))}catch(t){console.log("An error occurred when storing user survey in local storage:",t)}}({userAnswers:g,questionId:c})}),[c,g]);var m=g.length>=2||1===g.length&&g[0].questionId===fM&&1===g[0].answers.length&&"input"===g[0].answers[0];l.useEffect((function(){m&&n()}),[m,n]);var b=l.useCallback((function(e,t){if(t&&t.nextQuestion)u(t.nextQuestion);else if(e.nextQuestion)u(e.nextQuestion);else{if(e.getNextQuestion){var n=e.getNextQuestion(g);if(n)return void u(n)}u(TM)}}),[g]),C=l.useCallback((function(e,t){var n=g.findIndex((function(t){return t.questionId===e}));if(!(n<0)){var r=(0,v.Z)(g);r[n].userInput=t,x(r)}}),[g]);l.useEffect((function(){var e=hM[c];if(e){var t=e.answers;SM(t)&&g.every((function(e){return e.questionId!==c}))&&x([].concat((0,v.Z)(g),[{questionId:c,userInput:"",answers:[t[0].id]}]))}}),[c,g]),l.useEffect((function(){c===TM&&t(function(e){var t={};return e.forEach((function(e){var n=e.questionId,r=e.answers,i=e.userInput,o=r.filter((function(e){return"input"!==e}));"buildingKindOfProjects"===n||"learningKindOfProjects"===n?t.kindOfProjects=o:t[n]=o;var a=i?i.trim():null;SM(hM[n].answers)?t[n]=a||"":a&&(t["".concat(n,"Input")]=a,n===fM&&delete t[n])})),t}(g))}),[c,t,g]);var j=l.useCallback((function(e,t){var n=hM[e],r=n.multi,i=g.findIndex((function(t){return t.questionId===e}));if(i>=0){var o=i===g.length-1;if(r){var a=(0,v.Z)(g),s=a[i].answers.indexOf(t);s>=0?a[i].answers.splice(s,1):a[i].answers.push(t),x(a)}else{var l=e===fM&&"input"===t,c=!n.nextQuestion||l,u=(0,v.Z)(g);if(u[i].answers=[t],c&&u.splice(i+1,g.length-i),x(u),l)return;if(c){var d=n.answers.find((function(e){return e.id===t}));b(n,d)}else(o||p)&&b(n)}}else{var f="input"!==t;x([].concat((0,v.Z)(g),[{questionId:e,answers:[t]}]));var h=n.answers.find((function(e){return e.id===t}));!r&&f&&b(n,h)}}),[g,b,p]),y=l.useCallback((function(){var e=g.findIndex((function(e){return e.questionId===c}));-1===e?u(g[g.length-1].questionId):e>=1&&u(g[e-1].questionId)}),[g,c]),Z=l.useCallback((function(){u(TM)}),[]);return p?(0,d.jsx)(MM,{questionId:c,goToNextQuestion:b,goToPreviousQuestion:y,onSelectAnswer:j,userAnswers:g,onClickSend:Z,onChangeUserInputValue:C}):(0,d.jsx)(IM,{questionId:c,goToNextQuestion:b,onSelectAnswer:j,userAnswers:g,onClickSend:Z,onChangeUserInputValue:C})},AM=n(90099),FM=n(57748),OM=n(17358),RM=n(90569),DM={buttonBase:{height:"100%",width:"100%",borderRadius:8,cursor:"default",overflow:"hidden"},contentWrapper:{height:"100%",width:"100%",display:"flex"}},_M=function(e){var t=e.children,n=e.onClick,r=e.size,i=e.disabled,o=function(e){return(0,OM.Z)((function(t){return(0,RM.Z)({root:{border:"1px solid ".concat(t.palette.text.primary),borderBottom:"6px solid ".concat(t.palette.text.primary),transition:"background-color 100ms ease","&:focus":{backgroundColor:t.palette.action.hover},"&:hover":{backgroundColor:t.palette.action.hover},"&:disabled":e?{opacity:t.palette.action.disabledOpacity,border:"1px solid ".concat(t.palette.text.secondary),borderBottom:"6px solid ".concat(t.palette.text.secondary)}:void 0}})}))()}(e.useDefaultDisabledStyle),s=(0,w.U)().isMobile,l="banner"===r||s?void 0:"small"===r?200:320;return(0,d.jsx)(O.Z,{onClick:n,focusRipple:!0,elevation:2,style:(0,a.Z)((0,a.Z)({},DM.buttonBase),{},{maxWidth:l}),classes:o,tabIndex:0,onKeyPress:function(e){(0,kn.ph)(e)&&n()},disabled:i,children:(0,d.jsx)("div",{style:DM.contentWrapper,children:t})})},BM=n(63307),NM={linearProgress:{flex:1}};var UM=function(e){var t=l.useContext(f.Z),n=(0,R.Z)({root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:t.paper.backgroundColor.medium},bar:{borderRadius:5,backgroundColor:100===e.value?t.linearProgress.color.complete:t.linearProgress.color.incomplete}})();return(0,d.jsx)(BM.Z,{classes:n,style:NM.linearProgress,variant:"determinate",value:e.value})},HM={cardTextContainer:{flex:1,display:"flex",justifyContent:"center",padding:"10px 10px 20px 10px"},image:{height:130,width:130},lockerImage:{height:80,width:80},imageContainer:{width:"100%",height:130,display:"flex",justifyContent:"center",alignItems:"center"},keyPointsList:{paddingInlineStart:12,textAlign:"left",overflowWrap:"anywhere"}},VM=function(e){return e?{opacity:.4}:void 0},zM=function(e){var t=e.progress,n=e.locked,r=e.size,i=void 0===r?"large":r,o=e.disabled,s=e.title,c=e.description,u=e.durationInMinutes,p=e.keyPoints,h=e.onClick,g=e.renderImage,x=e.loading,m=l.useContext(f.Z),v=x||o||n;return(0,d.jsx)(b.I18n,{children:function(e){var r=e.i18n;return(0,d.jsx)(_M,{onClick:h,size:i,disabled:v,children:(0,d.jsxs)(L.sg,{noMargin:!0,alignItems:"center",expand:!0,children:[(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},HM.imageContainer),{},{backgroundColor:n?m.paper.backgroundColor.light:o?"dark"===m.palette.type?"#4F28CD":"#9979F1":"#7046EC"}),children:n?(0,d.jsx)(Qi,{style:HM.lockerImage}):g({style:(0,a.Z)((0,a.Z)({},HM.image),{},{opacity:o?.6:1})})}),(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},HM.cardTextContainer),{},{maxWidth:"banner"===i?"40%":void 0}),children:(0,d.jsxs)(C.ak,{expand:!0,justifyContent:"flex-start",useFullHeight:!0,children:[t&&t>0?(0,d.jsxs)(C.pJ,{alignItems:"center",noMargin:!0,children:[(0,d.jsxs)(F.Z,{displayInlineAsSpan:!0,noMargin:!0,size:"body2",children:[t,"%"]}),(0,d.jsx)(UM,{value:t})]}):u?(0,d.jsx)(L.x1,{noMargin:!0,justifyContent:"center",children:(0,d.jsx)(be.Z,{size:"small",label:1===u?(0,d.jsx)(b.Trans,{id:"1 minute"}):(0,d.jsx)(b.Trans,{id:"{durationInMinutes} minutes",values:{durationInMinutes:u}})})}):(0,d.jsx)(L.LZ,{}),(0,d.jsx)(F.Z,{size:"block-title",noMargin:!0,style:VM(v),color:"primary",children:r._(s)}),(0,d.jsx)(F.Z,{size:"body",noMargin:!0,style:VM(v),color:"secondary",children:r._(c)}),p&&(0,d.jsx)(Pr.Z,{}),p&&(0,d.jsx)(L.sg,{noMargin:!0,alignItems:"flex-start",justifyContent:"flex-start",expand:!0,children:(0,d.jsx)("ul",{style:HM.keyPointsList,children:p.map((function(e,t){return(0,d.jsx)(F.Z,{size:"body2",noMargin:!0,style:VM(v),color:"secondary",displayAsListItem:!0,children:r._(e)},"key-point-".concat(t))}))})})]})})]})})}})},WM=n(19817),GM=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:(0,d.jsxs)("g",{children:[(0,d.jsx)("path",{d:"M15.8065 105.143C15.5397 104.631 15.0628 104.33 14.5177 104.311L11.1971 104.107L8.8545 101.592C8.47918 101.169 7.88351 101.06 7.36551 101.169C6.88471 101.304 6.4441 101.63 6.26409 102.136L5.13234 105.381L2.07322 106.927C1.61258 107.157 1.26653 107.631 1.22853 108.207C1.18376 108.751 1.39618 109.308 1.81887 109.654L4.54449 111.821L5.04443 115.259C5.12829 115.809 5.4863 116.302 5.98032 116.532C6.47434 116.763 7.0363 116.711 7.48366 116.417L10.1842 114.579L10.2385 114.534L13.518 115.148C14.0459 115.238 14.581 115.059 14.9404 114.649C15.2694 114.246 15.3989 113.65 15.254 113.113L14.3276 109.765L15.8484 106.705C16.096 106.218 16.097 105.617 15.8065 105.143Z",fill:"#FFDA2D"}),(0,d.jsx)("path",{d:"M46.4456 104.014C46.2466 103.303 45.7293 102.802 45.0527 102.634L40.9541 101.506L38.6859 97.7452C38.3276 97.1182 37.6114 96.8257 36.935 96.8257C36.2984 96.8675 35.6616 97.1601 35.3036 97.7452L33.0354 101.506L28.8039 102.634C28.1674 102.802 27.6101 103.303 27.4112 104.014C27.2122 104.682 27.3314 105.434 27.7692 105.977L30.6078 109.404L30.3295 113.834C30.2897 114.544 30.6078 115.255 31.165 115.673C31.7222 116.09 32.4384 116.174 33.0752 115.923L36.935 114.335L37.0147 114.293L40.9542 115.923C41.5908 116.174 42.3071 116.09 42.8642 115.673C43.3815 115.255 43.7 114.544 43.6601 113.834L43.3815 109.404L46.0874 105.977C46.525 105.434 46.6843 104.682 46.4456 104.014Z",fill:"#FFDA2D"}),(0,d.jsx)("path",{d:"M78.093 102.672C77.9392 101.753 77.3574 101.053 76.5305 100.752L71.5371 98.7819L69.1973 93.7537C68.8322 92.9182 67.9724 92.4542 67.1232 92.3628C66.3184 92.3293 65.4793 92.6108 64.9508 93.2969L61.5951 97.7124L56.1301 98.5577C55.3083 98.6814 54.541 99.2357 54.1952 100.101C53.8551 100.913 53.9032 101.874 54.3794 102.615L57.4805 107.301L56.5328 112.825C56.3869 113.711 56.6903 114.646 57.3335 115.246C57.9767 115.846 58.8645 116.047 59.6979 115.819L64.7584 114.346L64.8641 114.305L69.5901 116.883C70.3555 117.284 71.2661 117.275 72.0219 116.826C72.7279 116.371 73.2237 115.522 73.2695 114.625L73.518 109.026L77.3781 105.089C78.0009 104.466 78.3025 103.543 78.093 102.672Z",fill:"#FFDA2D"}),(0,d.jsx)("path",{d:"M116.484 102.221C116.451 101.083 115.865 100.14 114.915 99.6368L109.203 96.4176L107.214 89.9427C106.912 88.8707 105.949 88.1655 104.937 87.9128C103.969 87.7376 102.907 87.9377 102.153 88.6794L97.3538 93.4599L90.6005 93.568C89.5856 93.5801 88.5644 94.1224 88.0013 95.1113C87.4539 96.0373 87.3514 97.2074 87.8035 98.1838L90.7711 104.372L88.7002 110.896C88.3754 111.944 88.5859 113.126 89.2637 113.96C89.9415 114.793 90.9819 115.186 92.0284 115.048L98.3972 114.114L98.5321 114.081L103.818 117.991C104.677 118.604 105.78 118.746 106.77 118.329C107.7 117.897 108.442 116.953 108.648 115.875L109.885 109.143L115.214 105.026C116.072 104.376 116.591 103.31 116.484 102.221Z",fill:"#FFDA2D"}),(0,d.jsx)("path",{d:"M100.117 18H9.88281C4.53299 18 0 22.3113 0 27.6526V72.9126C0 78.2535 4.53299 82.5652 9.88281 82.5652H100.117C105.467 82.5652 110 78.2535 110 72.9126V27.6526C110 22.3113 105.467 18 100.117 18Z",fill:"#FF507E"}),(0,d.jsx)("path",{d:"M94.7786 31.1523H16.4174C14.5887 31.1523 13.1523 32.5909 13.1523 34.4222V67.339C13.1523 69.1699 14.5887 70.6089 16.4174 70.6089H94.7786C96.6073 70.6089 98.0437 69.1699 98.0437 67.339V34.4222C98.0437 32.5909 96.6073 31.1523 94.7786 31.1523Z",fill:"#E1E4FB"}),(0,d.jsx)("path",{d:"M36.4676 35.9346H22.1198C21.785 35.9346 21.522 36.9372 21.522 38.2136V61.1556C21.522 62.4317 21.785 63.4346 22.1198 63.4346H36.4676C36.8024 63.4346 37.0655 62.4317 37.0655 61.1556V38.2136C37.0655 36.9372 36.8024 35.9346 36.4676 35.9346Z",fill:"#B2B7DE"}),(0,d.jsx)("path",{d:"M61.576 35.9346H47.2282C46.8934 35.9346 46.6304 36.9372 46.6304 38.2136V61.1556C46.6304 62.4317 46.8934 63.4346 47.2282 63.4346H61.576C61.9108 63.4346 62.1739 62.4317 62.1739 61.1556V38.2136C62.1739 36.9372 61.9108 35.9346 61.576 35.9346Z",fill:"#B2B7DE"}),(0,d.jsx)("path",{d:"M87.8807 35.9346H73.5329C73.1981 35.9346 72.9351 36.9372 72.9351 38.2136V61.1556C72.9351 62.4317 73.1981 63.4346 73.5329 63.4346H87.8807C88.2155 63.4346 88.4785 62.4317 88.4785 61.1556V38.2136C88.4785 36.9372 88.2155 35.9346 87.8807 35.9346Z",fill:"#B2B7DE"}),(0,d.jsx)("path",{d:"M32.5586 51.0915H25.6422C24.6872 51.0915 23.9131 50.3172 23.9131 49.3624V42.4459C23.9131 41.4911 24.6872 40.7168 25.6422 40.7168H32.5586C33.5135 40.7168 34.2878 41.4911 34.2878 42.4459V49.3624C34.2878 50.3172 33.5135 51.0915 32.5586 51.0915ZM27.3713 47.6332H30.8295V44.175H27.3713V47.6332Z",fill:"#42516D"}),(0,d.jsx)("path",{d:"M32.5586 58.0075H25.6422C24.6872 58.0075 23.9131 57.2332 23.9131 56.2784C23.9131 55.3236 24.6872 54.5493 25.6422 54.5493H30.8295V49.3619C30.8295 48.4071 31.6038 47.6328 32.5586 47.6328C33.5135 47.6328 34.2878 48.4071 34.2878 49.3619V56.2784C34.2878 57.2332 33.5135 58.0075 32.5586 58.0075Z",fill:"#42516D"}),(0,d.jsx)("path",{d:"M57.6675 51.0915H50.7511C49.7961 51.0915 49.022 50.3172 49.022 49.3624V42.4459C49.022 41.4911 49.7961 40.7168 50.7511 40.7168H57.6675C58.6223 40.7168 59.3966 41.4911 59.3966 42.4459V49.3624C59.3966 50.3172 58.6223 51.0915 57.6675 51.0915ZM52.4802 47.6332H55.9384V44.175H52.4802V47.6332Z",fill:"#42516D"}),(0,d.jsx)("path",{d:"M57.6675 58.0075H50.7511C49.7961 58.0075 49.022 57.2332 49.022 56.2784C49.022 55.3236 49.7961 54.5493 50.7511 54.5493H55.9384V49.3619C55.9384 48.4071 56.7127 47.6328 57.6675 47.6328C58.6223 47.6328 59.3966 48.4071 59.3966 49.3619V56.2784C59.3966 57.2332 58.6223 58.0075 57.6675 58.0075Z",fill:"#42516D"}),(0,d.jsx)("path",{d:"M83.9717 51.0915H77.0553C76.1003 51.0915 75.3262 50.3172 75.3262 49.3624V42.4459C75.3262 41.4911 76.1003 40.7168 77.0553 40.7168H83.9717C84.9265 40.7168 85.7008 41.4911 85.7008 42.4459V49.3624C85.7008 50.3172 84.9265 51.0915 83.9717 51.0915ZM78.7844 47.6332H82.2426V44.175H78.7844V47.6332Z",fill:"#42516D"}),(0,d.jsx)("path",{d:"M83.9717 58.0075H77.0553C76.1003 58.0075 75.3262 57.2332 75.3262 56.2784C75.3262 55.3236 76.1003 54.5493 77.0553 54.5493H82.2426V49.3619C82.2426 48.4071 83.0169 47.6328 83.9717 47.6328C84.9265 47.6328 85.7008 48.4071 85.7008 49.3619V56.2784C85.7008 57.2332 84.9265 58.0075 83.9717 58.0075Z",fill:"#42516D"})]})}))})),YM=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:(0,d.jsxs)("g",{children:[(0,d.jsx)("path",{d:"M104.436 85.293L104.428 91.3533L52.5811 121.483L52.5902 115.423L104.436 85.293Z",fill:"#C17E47"}),(0,d.jsx)("path",{d:"M52.5904 115.423L52.5813 121.483L0.395996 91.3541L0.404919 85.2939L52.5904 115.423Z",fill:"#D89C60"}),(0,d.jsx)("path",{d:"M104.437 85.2929L52.5903 115.423L0.404785 85.2936L52.2512 55.1636L104.437 85.2929Z",fill:"#E5AE70"}),(0,d.jsx)("path",{d:"M104.676 39.2806L104.527 85.8499V85.8939L86.9473 76.9182V76.8956L86.7486 76.7924L85.1843 75.9811H85.1596L83.5705 75.1688H83.5458L81.9567 74.3566L81.9319 74.3352L80.3429 73.5229L80.3181 73.5002L78.7291 72.7106L78.7043 72.6892L77.1153 71.8769L77.0905 71.8543L75.5014 71.043H75.4767L73.8876 70.2307L73.8629 70.2081L72.2738 69.3967H72.249L71.3801 68.9359C71.0964 68.7934 56.0305 61.2298 67.4321 66.9538L66.0417 66.2293H66.0169L64.4279 65.417L64.4031 65.3956L62.814 64.5833H62.7893L61.2002 63.771L61.1755 63.7496L59.5864 62.96L59.5616 62.9374L57.9726 62.1251H57.9478V62.1037L56.3563 61.3147L56.3315 61.2921L54.7425 60.4798H54.7177V60.4584L53.1287 59.6688L53.1039 59.6461L51.5148 58.8338H51.4901V58.8124L49.876 58.0002L50.0248 11.4082L51.6389 12.2419H51.6637L53.2528 13.0542L53.2775 13.0756L54.8666 13.8665V13.8879H54.8913L56.4804 14.7002L56.5052 14.7216L58.0942 15.5124V15.5338H58.119L59.708 16.3461L59.7328 16.3675L61.3218 17.1584V17.1798H61.3466L62.9357 17.9921L62.9604 18.0135L63.0845 18.0585L64.5495 18.8044V18.8258L66.1633 19.6381L67.7774 20.4504V20.4718L69.3915 21.2841L71.0053 22.0963V22.1177L72.5944 22.9086V22.93H72.6191L74.2082 23.7423L74.2329 23.7637L75.822 24.5546V24.576H75.8468L77.4358 25.3883L77.4606 25.4097L79.0496 26.2006V26.222H79.0744L80.6635 27.0343H80.6882V27.0557L82.2792 27.8466V27.868H82.304L83.893 28.6802H83.9178V28.7016L85.5068 29.4925V29.5139H85.5316L87.1207 30.3262H87.1454V30.3476L88.7345 31.1385V31.1599H88.7592L90.3483 31.9722H90.3731V31.9936L91.9621 32.8059H91.9869L93.5759 33.6182H93.6007V33.6396L95.1897 34.4519H95.2145L96.8036 35.2641H96.8283V35.2856L98.4174 36.0978H98.4422L100.031 36.9101H100.056V36.9315L101.645 37.7438H101.67L103.259 38.5561H103.284V38.5775L104.676 39.2806Z",fill:"#89B5D6"}),(0,d.jsx)("path",{d:"M41.9198 34.286C44.6751 35.35 47.1361 34.7847 48.7581 32.2302C49.7768 33.8116 50.8996 36.4141 52.6155 36.4141C53.448 36.4141 54.2378 36.7092 54.9467 36.2846C55.536 36.7062 56.2137 36.9462 56.9349 36.9462C59.2068 36.9462 61.0486 34.5641 61.0486 31.6258C61.0486 28.9378 59.5073 26.7154 57.5055 26.3561C56.5671 24.1083 54.7292 22.5811 52.6155 22.049C51.6306 22.049 51.117 21.8485 50.315 21.366C49.1464 16.8171 45.8293 12.4723 41.9198 11.4082C38.5739 11.4082 35.6619 11.683 34.1593 15.2273C33.3791 14.8229 32.5274 13.5364 31.6355 13.5364C28.8354 13.5364 26.4313 14.6652 25.3939 17.7955C25.3492 17.7936 25.3043 17.7927 25.2592 17.7927C22.9873 17.7927 21.1455 20.1747 21.1455 23.1131C21.1455 26.0515 22.9873 28.4335 25.2592 28.4335C25.9409 28.4335 26.5838 28.2191 27.1498 27.8396C28.3459 29.2027 29.916 31.0937 31.6355 31.0937C33.4865 32.1578 35.1644 31.1996 36.3889 29.6457C37.9036 32.2816 39.8268 34.286 41.9198 34.286Z",fill:"#FEFBFB"}),(0,d.jsx)("path",{d:"M94.7728 69.0016C93.4231 69.1368 93.0555 67.8136 93.0362 67.8116C89.8222 67.4695 87.5458 64.0572 87.8878 60.8431C88.2299 57.629 91.0609 55.8303 94.2749 56.1724C95.2559 56.2768 96.1025 57.1474 96.8677 57.6623C98.2614 55.9695 101.313 54.2461 104.622 54.5983C108.164 55.0766 110.216 59.2832 111.161 62.1823C111.892 61.959 112.575 62.9353 113.383 63.0213C116.494 64.4224 118.822 67.3052 118.48 70.5192C118.138 73.7333 115.255 76.0615 112.145 74.6605C112.142 74.6602 112.14 74.6599 112.137 74.6597C112.121 74.6579 112.104 74.656 112.087 74.654C110.54 75.7364 108.459 75.8087 104.07 74.2716C99.5778 73.7935 96.0576 70.3853 94.7728 69.0016Z",fill:"#FEFBFB"}),(0,d.jsx)("path",{d:"M33.0208 30.6826C29.8087 30.4476 27.4525 39.5944 25.8195 48.2259L20.9621 72.8919L75.0424 106.314L76.5211 106.377L76.5211 81.1189C76.5211 70.5596 76.2805 37.4117 70.9506 37.0217C64.2883 36.5343 61.4394 60.7593 59.417 60.6113C57.3945 60.4633 55.3407 43.4096 51.0578 43.0962C46.7749 42.7829 46.1278 52.6139 44.4264 52.981C42.7251 53.348 41.0845 46.3465 40.1807 43.9865C39.2769 41.6265 36.233 30.9176 33.0208 30.6826Z",fill:"#0B8735"}),(0,d.jsx)("path",{d:"M31.6214 30.6826C28.4093 30.4476 26.0531 39.5944 24.4201 48.2259L19.5627 72.8919L75.1217 106.377L75.1217 81.1189C75.1217 70.5596 74.881 37.4117 69.5512 37.0217C62.8889 36.5343 60.04 60.7593 58.0175 60.6113C55.9951 60.4633 53.9413 43.4096 49.6584 43.0962C45.3755 42.7828 44.7284 52.6139 43.027 52.981C41.3257 53.348 39.685 46.3465 38.7813 43.9865C37.8775 41.6265 34.8336 30.9176 31.6214 30.6826Z",fill:"#0CB746"}),(0,d.jsx)("path",{d:"M29.6153 63.3294C30.5215 63.2287 32.757 63.0273 34.4487 63.0273C34.9522 63.984 36.0499 66.018 36.4124 66.5014C36.8655 67.1056 36.4124 69.3713 36.4124 70.4286C36.4124 71.2744 34.9019 76.7221 34.1467 79.3403L27.5006 75.8662C27.3999 74.6578 27.259 71.4859 27.5006 68.465C27.7423 65.4441 29.0111 63.7826 29.6153 63.3294Z",fill:"#FA6C51"}),(0,d.jsx)("path",{d:"M32.7045 95.6785C32.3426 96.2264 31.979 96.7723 31.6138 97.3163C31.4133 97.6098 31.583 98.1501 32.0028 98.5209C33.3616 99.7394 35.7595 101.864 35.9887 101.503C36.1664 101.225 35.0151 99.7325 34.4414 99.0156C34.2529 98.7827 34.1913 98.517 34.2697 98.3365C34.4285 97.9961 34.587 97.6551 34.7451 97.3133C34.0643 96.7667 33.3841 96.2218 32.7045 95.6785Z",fill:"#FA6C51"}),(0,d.jsx)("path",{d:"M35.9957 101.5C35.7595 101.858 33.3685 99.7364 32.0028 98.5209C31.583 98.1501 31.4133 97.6098 31.6138 97.3104C31.631 97.2853 31.6479 97.2601 31.6644 97.235C31.5979 97.5374 31.7825 97.9489 32.1249 98.2641C33.3576 99.3696 35.3674 101.158 35.9897 101.272C36.0175 101.378 36.0175 101.458 35.9957 101.5Z",fill:"#E4E8EB"}),(0,d.jsx)("path",{d:"M14.5586 77.4409C13.7262 77.0139 12.8942 76.5872 12.0624 76.1609C11.6099 75.9299 11.2059 76.0826 11.1702 76.5208C11.0451 77.9287 10.8655 80.4043 11.3975 80.67C11.8223 80.8822 12.3781 79.7242 12.6222 79.1412C12.7056 78.9508 12.915 78.8933 13.1572 78.9964C13.6223 79.1901 14.0878 79.3838 14.5536 79.5774C14.555 78.8656 14.5566 78.1534 14.5586 77.4409Z",fill:"#FA6C51"}),(0,d.jsx)("path",{d:"M11.4044 80.673C10.8655 80.3973 11.0521 77.9316 11.1632 76.5109C11.199 76.0727 11.6099 75.923 12.0624 76.147C12.0988 76.1675 12.1356 76.1877 12.1726 76.2075C11.8183 76.1213 11.5543 76.2977 11.5116 76.6576C11.3995 77.9336 11.2317 80.0097 11.6138 80.671C11.5444 80.7106 11.4679 80.6997 11.4044 80.673Z",fill:"#E4E8EB"}),(0,d.jsx)("path",{d:"M25.2727 70.4442C24.7301 69.9769 24.1872 69.5096 23.644 69.0423C23.644 69.0423 21.2153 71.2424 22.709 72.6502C23.4425 73.3323 23.6718 71.5299 24.0221 71.4347C24.0221 71.4347 23.9536 72.4876 24.5759 72.8802C24.8667 73.0696 24.6236 70.3917 25.2727 70.4442Z",fill:"#F4D0B5"}),(0,d.jsx)("path",{d:"M34.636 98.396C34.636 98.396 38.5117 91.1942 38.1008 87.6686C37.8348 85.302 34.9248 81.6376 33.8578 79.1065C33.3576 77.9187 30.2199 78.585 30.2199 78.585C29.3399 80.2869 30.4509 78.6273 29.5742 80.3081C30.9306 82.4443 32.2897 84.5802 33.6514 86.7158C33.175 89.8957 32.69 93.0442 32.1964 96.1613C33.0083 96.9035 33.8214 97.6484 34.636 98.396Z",fill:"#636C77"}),(0,d.jsx)("path",{d:"M34.2826 79.1253C34.1933 79.2294 34.1099 79.3454 34.0067 79.4356C33.5859 79.9105 33.1254 80.3289 32.6341 80.7255C32.3383 80.9763 32.0336 81.1617 31.7914 81.4304C31.5354 81.6783 31.2863 81.9569 31.0441 82.2464C30.9945 82.2989 30.9538 82.3495 30.9051 82.403C30.6941 82.0679 30.4837 81.7328 30.2739 81.3977C30.524 81.1042 30.794 80.8346 31.0987 80.5857C31.4113 80.3408 31.7766 80.1485 32.115 79.9988C32.6946 79.7103 33.2871 79.4426 33.9253 79.2433C34.0424 79.1937 34.1586 79.164 34.2826 79.1253Z",fill:"#424852"}),(0,d.jsx)("path",{d:"M32.4951 63.0114C32.4951 63.0114 27.4006 63.2999 26.0667 63.7768C24.9124 64.1863 23.241 69.2862 23.241 69.2862C23.8742 69.8276 24.5071 70.3702 25.1397 70.9142C26.0958 69.6332 27.0575 68.3454 28.0249 67.0505C29.3853 67.27 30.741 67.4901 32.0922 67.7108C32.2179 66.1463 32.3522 64.5799 32.4951 63.0114Z",fill:"#FA6C51"}),(0,d.jsx)("path",{d:"M13.7686 79.5616C13.7686 79.5616 23.9437 84.5733 27.0741 84.5168C29.1474 84.495 30.3771 81.5831 31.9334 80.6303C32.6648 80.1842 34.2826 79.1253 34.2826 79.1253C32.0687 77.929 29.8498 76.7475 27.6259 75.5809C26.5983 76.9154 25.5721 78.2459 24.5472 79.5725C21.0721 78.7231 17.5943 77.8857 14.114 77.0601C13.9982 77.8943 13.883 78.7281 13.7686 79.5616Z",fill:"#636C77"}),(0,d.jsx)("path",{d:"M27.2994 75.5829C27.2994 75.5829 28.5519 73.4453 28.8348 72.6393C29.5504 70.593 29.3479 65.1182 30.7275 63.5864C31.3389 62.9083 33.9779 62.9033 33.9779 62.9033C34.8679 64.1241 35.7615 65.3509 36.6587 66.5836C36.6587 66.5836 37.5013 70.7615 37.4735 72.0187C37.4299 74.184 36.0979 77.1147 35.4409 78.6812C35.2126 79.2146 34.8156 81.0011 34.8156 81.0011C32.1358 79.8689 29.6387 78.0268 27.2994 75.5829Z",fill:"#FA6C51"}),(0,d.jsx)("path",{d:"M27.2994 75.5829C27.2994 75.5829 28.5519 73.4453 28.8348 72.6393C29.5504 70.593 29.3479 65.1182 30.7275 63.5864C31.3389 62.9083 33.9779 62.9033 33.9779 62.9033C34.8679 64.1241 35.7615 65.3509 36.6587 66.5836C36.6587 66.5836 37.5013 70.7615 37.4735 72.0187C37.4299 74.184 36.0979 77.1147 35.4409 78.6812C35.2126 79.2146 34.8156 81.0011 34.8156 81.0011C32.1358 79.8689 29.6387 78.0268 27.2994 75.5829Z",fill:"#FA6C51"}),(0,d.jsx)("path",{d:"M36.4413 76.0459C36.3847 76.2283 36.3222 76.3989 36.2527 76.5733C35.822 76.0033 35.4796 75.4183 35.1521 74.8482C34.3521 73.371 33.6583 71.8729 33.0787 70.3768C33.8439 71.8343 34.626 73.2956 35.5084 74.6777C35.8031 75.1397 36.1178 75.6206 36.4413 76.0459Z",fill:"#E8553E"}),(0,d.jsx)("path",{d:"M38.7429 66.5509C39.4397 66.6064 40.7498 63.2612 40.4471 61.7543C40.1533 60.2582 37.4378 60.2453 37.4378 60.2453C36.2924 59.5126 35.5917 60.048 35.2235 61.5302C35.2235 61.5302 34.4136 62.6406 33.972 62.9004C33.972 62.9004 35.2741 66.8057 36.2081 67.2082C36.7411 67.4412 36.1684 66.534 37.5341 65.6635C37.548 65.6615 38.1494 66.5062 38.7429 66.5509Z",fill:"#F4D0B5"}),(0,d.jsx)("path",{d:"M34.9317 61.9238C34.9317 61.9238 33.9462 59.8923 34.7283 58.6956C35.4994 57.5 36.3242 56.9854 37.7782 57.4673C39.2303 57.9511 42.1006 60.0975 40.6505 62.6694C40.5463 62.8548 40.3051 62.8518 40.1017 62.6713C39.8019 62.4096 39.3732 61.9803 39.0308 61.3805C38.4353 60.3494 37.9678 62.2599 37.3991 61.6739C36.8552 60.1898 35.6493 60.5268 36.1882 62.0041C36.2627 62.5355 34.9317 61.9238 34.9317 61.9238Z",fill:"#636C77"}),(0,d.jsx)("path",{d:"M36.5684 63.5696C36.5684 63.5696 36.4274 65.0726 36.8433 66.2891C36.9902 66.0878 37.2125 65.8826 37.541 65.6586C37.541 65.6586 36.8155 64.5918 36.5684 63.5696Z",fill:"#636C77"}),(0,d.jsx)("path",{d:"M46.3435 76.0806C46.3167 76.0667 46.284 76.0429 46.2562 76.0211C36.2617 68.2436 25.9992 60.7638 15.4687 53.5818C15.2742 53.4579 15.169 53.2229 15.2236 53.0543C15.2782 52.8868 15.4836 52.861 15.6791 52.9839C26.2129 60.1527 36.4658 67.6153 46.4378 75.3717C46.6194 75.5145 46.7197 75.7792 46.6721 75.9626C46.6254 76.1064 46.4904 76.154 46.3435 76.0806Z",fill:"#636C77"}),(0,d.jsx)("path",{d:"M12.8019 59.352C12.6143 60.5625 12.918 62.2639 14.0564 63.2345C15.1501 64.1674 16.365 63.9067 17.55 64.2338C18.9792 64.6334 20.465 65.9639 21.8257 66.0165C23.0455 66.067 23.8355 64.9685 23.8881 63.6023C24.0102 60.9532 21.3453 56.103 18.5782 55.3168C15.7069 54.4899 13.1979 56.7752 12.8019 59.352Z",fill:"#FDCD56"}),(0,d.jsx)("path",{d:"M13.4212 58.9138C13.2515 59.9895 13.5204 61.4975 14.5338 62.361C15.5094 63.1889 16.5873 62.9509 17.6463 63.2454C18.9167 63.5973 20.2447 64.7831 21.4535 64.8248C22.5363 64.8634 23.24 63.8898 23.2906 62.6783C23.4028 60.3315 21.0258 56.0237 18.5633 55.3247C16.0176 54.5881 13.7844 56.6235 13.4212 58.9138Z",fill:"#FBD277"}),(0,d.jsx)("path",{d:"M20.1325 54.6664C20.1911 54.3601 20.1355 53.9397 19.8486 53.7117C19.5757 53.4886 19.2611 53.5629 18.9603 53.4856C18.5931 53.3984 18.2199 53.0742 17.8726 53.0712C17.5619 53.0672 17.3535 53.3349 17.3436 53.669C17.3178 54.3145 17.9956 55.4873 18.6695 55.6827C19.3653 55.8859 20.0025 55.3069 20.1325 54.6664Z",fill:"#FDCD56"}),(0,d.jsx)("path",{d:"M18.6954 55.5657C18.3688 55.4407 18.0443 55.3029 17.7267 55.1463C17.6403 55.1056 17.5768 55.0045 17.5867 54.9232C17.5957 54.8429 17.6701 54.7943 17.7634 54.8578C18.3996 55.1641 19.0517 55.413 19.6918 55.5865C19.7861 55.6014 19.8556 55.6985 19.8606 55.7848C19.8645 55.872 19.803 55.9256 19.7156 55.8998C19.3752 55.8125 19.0348 55.6955 18.6954 55.5657Z",fill:"#636C77"}),(0,d.jsx)("path",{d:"M18.7271 64.4668C18.5405 63.172 18.737 62.017 19.2521 61.1624C18.9474 62.1716 18.9981 63.3792 19.3703 64.564C19.1559 64.5316 18.9415 64.4992 18.7271 64.4668Z",fill:"#FDCD56"}),(0,d.jsx)("path",{d:"M16.9644 63.4248C17.9817 62.5058 18.5683 61.0345 18.5524 59.2856C18.7956 61.1039 18.4393 62.8101 17.5242 64.0078C17.3369 63.8135 17.1504 63.6192 16.9644 63.4248Z",fill:"#FDCD56"}),(0,d.jsx)("path",{d:"M44.3913 75.6315C44.3913 75.6315 46.6185 76.0727 45.5724 73.8132C44.9421 72.445 44.5064 73.2956 44.4439 73.6674C44.4439 73.6674 44.3873 72.9338 44.0151 72.8802C43.7213 72.8346 43.7144 74.0333 43.7144 74.0333C43.94 74.5647 44.1656 75.0974 44.3913 75.6315Z",fill:"#F4D0B5"}),(0,d.jsx)("path",{d:"M33.0738 70.3748C33.0738 70.3748 35.7366 76.3275 37.3147 77.307C39.5429 78.7317 44.952 75.9368 44.952 75.9368C44.5557 74.991 44.1607 74.0475 43.767 73.1063C42.1472 73.2946 40.5235 73.4774 38.8958 73.6545C38.1077 72.2421 37.3233 70.8362 36.5426 69.4369",fill:"#FA6C51"})]})}))})),qM=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:[(0,d.jsx)("ellipse",{cx:"60.5",cy:"64",rx:"22.5",ry:"22",fill:"url(#paint0_radial_1818_4221)",fillOpacity:"0.5"}),(0,d.jsx)("circle",{cx:"60.5",cy:"64.5",r:"24.4",stroke:"#877629",strokeWidth:"0.2",fill:"none"}),(0,d.jsx)("path",{d:"M75.9801 54.0386C74.7269 52.2111 72.9567 50.9042 70.9538 50.3278C68.9509 49.7514 66.8315 49.939 64.9363 50.8605C63.2399 51.673 62.1935 52.3704 60.5 53.6757C58.8065 52.3704 57.7601 51.6686 56.0637 50.8605C54.1685 49.939 52.0491 49.7514 50.0462 50.3278C48.0433 50.9042 46.2731 52.2111 45.0199 54.0386C43.6984 55.9606 43 58.3627 43 60.9843C43 64.7571 45.0271 68.8963 49.0245 73.2914C52.2818 76.8714 56.131 79.8032 58.1349 81.2318C58.841 81.7334 59.6617 82 60.5 82C61.3383 82 62.159 81.7334 62.8651 81.2318C64.8674 79.8032 68.7182 76.8714 71.9755 73.2914C75.9729 68.898 78 64.7571 78 60.9843C78 58.3627 77.3016 55.9606 75.9801 54.0386Z",fill:"url(#paint1_radial_1818_4221)",fillOpacity:"0.3"}),(0,d.jsx)("path",{d:"M29.3264 56.1552C28.288 54.7274 26.8213 53.7064 25.1617 53.2561C23.5022 52.8058 21.7461 52.9523 20.1758 53.6723C18.7702 54.307 17.5167 55.3773 16.5 56.7976C15.4833 55.3738 14.2298 54.3036 12.8242 53.6723C11.2539 52.9523 9.49785 52.8058 7.83829 53.2561C6.17874 53.7064 4.71198 54.7274 3.67364 56.1552C2.57867 57.6567 2 59.5333 2 61.5815C2 64.529 3.67961 67.7627 6.99172 71.1964C9.69064 73.9933 12.88 76.2838 14.5403 77.3999C15.1254 77.7917 15.8054 78 16.5 78C17.1946 78 17.8746 77.7917 18.4597 77.3999C20.1187 76.2838 23.3094 73.9933 26.0083 71.1964C29.3204 67.7641 31 64.529 31 61.5815C31 59.5333 30.4213 57.6567 29.3264 56.1552Z",fill:"#EF6FFA"}),(0,d.jsx)("path",{d:"M74.2109 56.1552C73.101 54.7274 71.5331 53.7064 69.7591 53.2561C67.9851 52.8058 66.1079 52.9523 64.4293 53.6723C62.9268 54.307 61.5868 55.3773 60.5 56.7976C59.4132 55.3738 58.0732 54.3036 56.5707 53.6723C54.8921 52.9523 53.0149 52.8058 51.2409 53.2561C49.4669 53.7064 47.899 54.7274 46.7891 56.1552C45.6186 57.6567 45 59.5333 45 61.5815C45 64.529 46.7954 67.7627 50.336 71.1964C53.221 73.9933 56.6303 76.2838 58.4052 77.3999C59.0306 77.7917 59.7575 78 60.5 78C61.2425 78 61.9694 77.7917 62.5948 77.3999C64.3683 76.2838 67.779 73.9933 70.664 71.1964C74.2046 67.7641 76 64.529 76 61.5815C76 59.5333 75.3814 57.6567 74.2109 56.1552Z",fill:"#FA6FCB"}),(0,d.jsx)("path",{d:"M116.326 56.1552C115.288 54.7274 113.821 53.7064 112.162 53.2561C110.502 52.8058 108.746 52.9523 107.176 53.6723C105.77 54.307 104.517 55.3773 103.5 56.7976C102.483 55.3738 101.23 54.3036 99.8242 53.6723C98.2539 52.9523 96.4978 52.8058 94.8383 53.2561C93.1787 53.7064 91.712 54.7274 90.6736 56.1552C89.5787 57.6567 89 59.5333 89 61.5815C89 64.529 90.6796 67.7627 93.9917 71.1964C96.6906 73.9933 99.88 76.2838 101.54 77.3999C102.125 77.7917 102.805 78 103.5 78C104.195 78 104.875 77.7917 105.46 77.3999C107.119 76.2838 110.309 73.9933 113.008 71.1964C116.32 67.7641 118 64.529 118 61.5815C118 59.5333 117.421 57.6567 116.326 56.1552Z",fill:"#50379A"}),(0,d.jsx)("line",{x1:"60.75",y1:"48.75",x2:"60.75",y2:"38.25",stroke:"#F4C9FF",strokeWidth:"0.5",strokeLinecap:"round"}),(0,d.jsx)("line",{x1:"60.75",y1:"94.75",x2:"60.75",y2:"84.25",stroke:"#F4C9FF",strokeWidth:"0.5",strokeLinecap:"round"}),(0,d.jsx)("line",{x1:"78.25",y1:"66.75",x2:"86.75",y2:"66.75",stroke:"#F4C9FF",strokeWidth:"0.5",strokeLinecap:"round"}),(0,d.jsx)("line",{x1:"33.25",y1:"66.75",x2:"42.75",y2:"66.75",stroke:"#F4C9FF",strokeWidth:"0.5",strokeLinecap:"round"}),(0,d.jsx)("line",{x1:"76.2373",y1:"49.2572",x2:"77.9875",y2:"47.507",stroke:"#F4C9FF",strokeLinecap:"round"}),(0,d.jsx)("line",{x1:"43.6777",y1:"81.8168",x2:"45.4279",y2:"80.0666",stroke:"#F4C9FF",strokeLinecap:"round"}),(0,d.jsx)("line",{x1:"74.7735",y1:"80.0664",x2:"76.5237",y2:"81.8166",stroke:"#F4C9FF",strokeLinecap:"round"}),(0,d.jsx)("line",{x1:"42.2144",y1:"47.5073",x2:"43.9646",y2:"49.2575",stroke:"#F4C9FF",strokeLinecap:"round"}),(0,d.jsxs)("defs",{children:[(0,d.jsxs)("radialGradient",{id:"paint0_radial_1818_4221",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(60.5 64) rotate(90) scale(22 22.5)",children:[(0,d.jsx)("stop",{offset:"0.5",stopColor:"#DCFF7A",stopOpacity:"0"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#FFE27A",stopOpacity:"0.44"})]}),(0,d.jsxs)("radialGradient",{id:"paint1_radial_1818_4221",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(60.5 66) rotate(90) scale(16 17.5)",children:[(0,d.jsx)("stop",{stopColor:"#FA916F",stopOpacity:"0"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#FA916F"})]})]})]}))})),XM=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:[(0,d.jsx)("g",{filter:"url(#filter0_f_1901_4247)",children:(0,d.jsx)("ellipse",{cx:"57.5",cy:"72",rx:"33.5",ry:"33",fill:"#32323B"})}),(0,d.jsx)("ellipse",{cx:"56.5",cy:"69",rx:"33.5",ry:"33",fill:"#32323B"}),(0,d.jsx)("ellipse",{cx:"56.5",cy:"69",rx:"22.5",ry:"23",fill:"#3E3E4D"}),(0,d.jsx)("path",{d:"M71.2857 74L69 71.8L72.4285 68.5L69 65.2L71.2857 63L77 68.5L71.2857 74Z",fill:"#868698"}),(0,d.jsx)("path",{d:"M60 56L57 52.5715L54 56L52 53.7143L57 48L62 53.7143L60 56Z",fill:"#868698"}),(0,d.jsx)("path",{d:"M57 88L52 82.2857L54 80L57 83.4285L60 80L62 82.2857L57 88Z",fill:"#868698"}),(0,d.jsx)("path",{d:"M42.7143 74L37 68.5L42.7143 63L45 65.2L41.5715 68.5L45 71.8L42.7143 74Z",fill:"#868698"}),(0,d.jsx)("path",{d:"M86.4285 77L83 73.6L88.1427 68.5L83 63.4L86.4285 60L95 68.5L86.4285 77Z",fill:"#9A977E"}),(0,d.jsx)("path",{d:"M104.857 80L100 75.2L107.286 68L100 60.8L104.857 56L117 68L104.857 80Z",fill:"#CFD166"}),(0,d.jsx)("path",{d:"M25.7 63.1269L27.9219 65.2478L24.5891 68.4292L27.9219 71.6106L25.7 73.7314L20.1452 68.4292L25.7 63.1269Z",fill:"#9A977E",fillOpacity:"0.2"}),(0,d.jsx)("path",{d:"M12.0024 61.0057L15.0322 63.9749L10.4875 68.4289L15.0322 72.8828L12.0024 75.8521L4.42768 68.4289L12.0024 61.0057Z",fill:"#CFD166",fillOpacity:"0.2"}),(0,d.jsx)("defs",{children:(0,d.jsxs)("filter",{id:"filter0_f_1901_4247",x:"17",y:"32",width:"81",height:"80",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,d.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,d.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,d.jsx)("feGaussianBlur",{stdDeviation:"3.5",result:"effect1_foregroundBlur_1901_4247"})]})})]}))})),KM=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:[(0,d.jsxs)("g",{clipPath:"url(#clip0_1906_4221)",children:[(0,d.jsx)("path",{d:"M80.3175 45.6273V32.793H40.6821V45.6273C40.6821 54.6285 46.6834 62.2268 54.9028 64.6421C56.6159 65.1455 57.7944 66.7139 57.7944 68.4992V68.5011C57.7944 70.2864 56.6159 71.8548 54.9028 72.3582C46.6834 74.7735 40.6821 82.3719 40.6821 91.373V104.671H80.3174V91.373C80.3174 82.3709 74.3148 74.7718 66.0939 72.3574C64.3806 71.8542 63.2019 70.2856 63.2019 68.5002C63.2019 66.7145 64.3807 65.1459 66.0939 64.6429C74.315 62.2285 80.3175 54.6294 80.3175 45.6273Z",fill:"#EBEBFC"}),(0,d.jsx)("path",{d:"M66.0942 64.6429C74.3151 62.2285 80.3177 54.6294 80.3177 45.6273V32.793H74.5957V45.6273C74.5957 54.6294 71.6129 62.2285 63.3922 64.6429C61.6789 65.1461 60.5 66.7145 60.5 68.5002C60.5 70.2858 61.6789 71.8544 63.392 72.3574C71.6129 74.7717 74.5956 82.3709 74.5956 91.373V104.671H80.3175V91.373C80.3175 82.3709 74.315 74.7717 66.0941 72.3574C64.3809 71.8542 63.202 70.2858 63.202 68.5002C63.2022 66.7145 64.3811 65.1461 66.0942 64.6429Z",fill:"#B7B7DC"}),(0,d.jsx)("path",{d:"M79.7609 33.9936H41.2391C38.446 33.9936 36.1816 31.7292 36.1816 28.9361V27H84.8182V28.9361C84.8183 31.7292 82.554 33.9936 79.7609 33.9936Z",fill:"#BB706A"}),(0,d.jsx)("path",{d:"M73.7981 27V28.7824C73.7981 31.6605 71.465 33.9936 68.5869 33.9936H79.6069C82.485 33.9936 84.8181 31.6605 84.8181 28.7824V27H73.7981Z",fill:"#A55B5B"}),(0,d.jsx)("path",{d:"M41.2391 103.006H79.7609C82.554 103.006 84.8183 105.271 84.8183 108.064V110H36.1816V108.064C36.1816 105.271 38.446 103.006 41.2391 103.006Z",fill:"#BB706A"}),(0,d.jsx)("path",{d:"M79.6073 103.006H70.1362C73.0142 103.006 75.3474 105.339 75.3474 108.218V110H84.8185V108.218C84.8185 105.34 82.4854 103.006 79.6073 103.006Z",fill:"#A55B5B"}),(0,d.jsx)("path",{d:"M60.4999 60.6434C52.3001 60.6434 45.6528 53.9961 45.6528 45.7963V45.8618C47.0513 46.4616 49.2795 47.2073 51.9936 47.1333C59.7183 46.9228 63.19 40.2954 68.8303 41.1432C70.4768 41.3908 75.005 42.8303 75.3471 45.8618C75.3446 45.84 75.3471 45.8181 75.3471 45.7963C75.3471 53.9961 68.6998 60.6434 60.4999 60.6434Z",fill:"#FBB84D"}),(0,d.jsx)("path",{d:"M60.4999 94.791C65.0373 94.791 68.7156 98.4693 68.7156 103.007V102.971H52.2842V103.007C52.2842 98.4693 55.9624 94.791 60.4999 94.791Z",fill:"#FBB84D"}),(0,d.jsx)("path",{d:"M60.4999 59.3906C59.8078 59.3906 59.2471 59.9515 59.2471 60.6434V64.0166C59.2471 64.7086 59.8078 65.2694 60.4999 65.2694C61.1919 65.2694 61.7526 64.7085 61.7526 64.0166V60.6434C61.7526 59.9515 61.1919 59.3906 60.4999 59.3906Z",fill:"#FBB84D"}),(0,d.jsx)("path",{d:"M60.4999 72.3257C59.8078 72.3257 59.2471 72.8864 59.2471 73.5785V75.7361C59.2471 76.4282 59.8078 76.9889 60.4999 76.9889C61.1919 76.9889 61.7526 76.428 61.7526 75.7361V73.5785C61.7526 72.8866 61.1919 72.3257 60.4999 72.3257Z",fill:"#FBB84D"}),(0,d.jsx)("path",{d:"M60.4999 79.0381C59.8078 79.0381 59.2471 79.599 59.2471 80.2909V80.7595C59.2471 81.4516 59.8078 82.0123 60.4999 82.0123C61.1919 82.0123 61.7526 81.4516 61.7526 80.7595V80.2909C61.7526 79.599 61.1919 79.0381 60.4999 79.0381Z",fill:"#FBB84D"}),(0,d.jsx)("path",{d:"M60.4999 87.6826C59.8078 87.6826 59.2471 88.2435 59.2471 88.9354V94.7021C59.2471 95.394 59.8078 95.9549 60.4999 95.9549C61.1919 95.9549 61.7526 95.394 61.7526 94.7021V88.9354C61.7526 88.2434 61.1919 87.6826 60.4999 87.6826Z",fill:"#FBB84D"})]}),(0,d.jsx)("defs",{children:(0,d.jsx)("clipPath",{id:"clip0_1906_4221",children:(0,d.jsx)("rect",{width:"83",height:"83",fill:"white",transform:"translate(19 27)"})})})]}))})),JM=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:[(0,d.jsx)("path",{d:"M19.5 62.0972L6.00025 69.8906L19.5 77.684L32.9997 69.8906L19.5 62.0972Z",fill:"#FFFAF2"}),(0,d.jsx)("path",{d:"M33 69.8364L19.7721 77.5087L20 93L33 85.5596V69.8364Z",fill:"#FFECD1"}),(0,d.jsx)("path",{d:"M6.01367 69.8364L19.8503 77.5824L20 93L6.01367 85.5331V69.8364Z",fill:"#FFE1B4"}),(0,d.jsx)("path",{d:"M47.665 40L23.985 53.6705L47.665 67.341L71.3451 53.6705L47.665 40Z",fill:"#FFEDE8"}),(0,d.jsx)("path",{d:"M71.3447 53.5752L48.1556 67.182V94.6963L71.3447 81.1554V53.5752Z",fill:"#FFC2B4"}),(0,d.jsx)("path",{d:"M24.0088 53.5752L48.2798 67.1625V94.6962L24.0088 81.1088V53.5752Z",fill:"#FF8569"}),(0,d.jsx)("path",{d:"M94.6416 40.8213L76.2989 51.4105L94.6416 61.9997L112.984 51.4105L94.6416 40.8213Z",fill:"#FFFAF2"}),(0,d.jsx)("path",{d:"M112.984 51.3369L95.0236 61.8395V83.2396L112.984 72.7007V51.3369Z",fill:"#FFBC57"}),(0,d.jsx)("path",{d:"M76.3184 51.3369L95.1188 61.8617V83.1894L76.3184 72.6646V51.3369Z",fill:"#FB9600"}),(0,d.jsx)("path",{d:"M107.901 20H105.577V37.1051H107.901V20Z",fill:"#F9A823"}),(0,d.jsx)("path",{d:"M107.855 37.1051C111.115 37.1051 113.757 33.276 113.757 28.5526C113.757 23.8291 111.115 20 107.855 20C104.595 20 101.952 23.8291 101.952 28.5526C101.952 33.276 104.595 37.1051 107.855 37.1051Z",fill:"#F9A823"}),(0,d.jsx)("path",{d:"M113.757 27.9018C109.043 24.8164 104.599 25.8711 102.695 24.5293C103.687 21.833 105.641 20 107.889 20C110.988 20 113.527 23.4831 113.757 27.9018Z",fill:"#F9A823"}),(0,d.jsx)("path",{d:"M113.757 27.9018C109.043 24.8279 104.599 25.8787 102.695 24.5419C103.687 21.8556 102.695 19.7223 107.889 20.0295C110.988 20.0295 113.527 23.4996 113.757 27.9018Z",fill:"#F6C231"}),(0,d.jsx)("path",{d:"M105.856 37.1051C109.09 37.1051 111.712 33.276 111.712 28.5526C111.712 23.8291 109.09 20 105.856 20C102.622 20 100 23.8291 100 28.5526C100 33.276 102.622 37.1051 105.856 37.1051Z",fill:"#FFF69B"}),(0,d.jsx)("path",{d:"M105.763 37.1051C102.572 37.0137 100 33.2204 100 28.5536C100 23.8868 102.557 20.1105 105.737 20C105.15 25.6874 105.158 31.4195 105.763 37.1051Z",fill:"#FAF679"}),(0,d.jsx)("path",{d:"M105.205 32.4548C104.592 32.4081 104.117 31.8174 104.089 31.1481C104.074 30.7507 103.997 30.3364 103.997 28.7173C103.997 27.3425 104.08 26.5117 104.089 26.2525C104.085 25.9415 104.203 25.6413 104.417 25.4153C104.518 25.3105 104.641 25.2293 104.777 25.1775C104.913 25.1256 105.059 25.1046 105.205 25.1157C105.519 25.1589 105.807 25.316 106.013 25.5571C106.219 25.7981 106.328 26.1061 106.321 26.4224C106.271 27.1704 106.239 27.963 106.239 28.798C106.239 29.5948 106.261 30.3513 106.306 31.0673C106.321 31.2854 106.284 31.5041 106.197 31.7048C105.983 32.1765 105.591 32.4846 105.205 32.4548Z",fill:"#F9A823"}),(0,d.jsx)("path",{d:"M105.366 32.4557C104.841 32.409 104.418 31.8019 104.34 31.1353C104.279 30.6068 104.268 29.1739 104.281 28.7684C104.3 28.104 104.298 26.8706 104.361 26.2614C104.374 25.9488 104.491 25.6497 104.693 25.4123C104.773 25.3109 104.876 25.2308 104.993 25.179C105.111 25.1272 105.239 25.1052 105.366 25.1151C105.892 25.1618 106.321 25.7519 106.321 26.4206C106.273 27.1445 106.244 27.9066 106.241 28.7196C106.241 29.6345 106.269 30.5006 106.321 31.3115C106.223 31.9972 105.772 32.4833 105.366 32.4557Z",fill:"#FEBB2F"})]}))})),QM=function(e,t){switch(e){case"small":return t?4:1;case"medium":default:return 3;case"large":return 4;case"xlarge":return 6}},$M=QM("xlarge",!0),eL=330*$M,tL={grid:{textAlign:"center",maxWidth:eL,overflow:"hidden",width:"calc(100% + ".concat(10,"px)")},bannerContainer:{width:"100%",maxWidth:eL-10}},nL=function(e){var t=e.selectInAppTutorial,n=e.lessonsIds,r=(0,to.k)(),i=l.useContext(Yr.Z),o=i.inAppTutorialShortHeaders,s=i.inAppTutorialsFetchingError,c=i.fetchInAppTutorials,u=i.currentlyRunningInAppTutorial,p=l.useContext(se.ZP).getTutorialProgress,f=l.useContext(tr.ZP),h=(0,w.U)(),g=h.windowSize,x=h.isLandscape,m=function(e){var t=e.tutorialId,n=p({tutorialId:t,userId:f.profile?f.profile.id:void 0});return n&&n.progress?n.progress[0]:0},v=n||WM.PP,j=v.reduce((function(e,t){return 100===(m({tutorialId:t})||0)?e+1:e}),0),y=Math.round(j/v.length*100),Z=[{id:WM.EB,title:{id:"Joystick controls"},description:{id:"Learn how to add a joystick to control the player."},durationInMinutes:1,renderImage:function(e){return(0,d.jsx)(XM,(0,a.Z)({},e))}},{id:WM.yw,title:{id:"Health bar"},description:{id:"Learn how to display the health of a player on the foreground."},durationInMinutes:2,renderImage:function(e){return(0,d.jsx)(qM,(0,a.Z)({},e))}},{id:WM.Rv,title:{id:"3D box"},description:{id:"Learn how to add a 3D box to your game."},durationInMinutes:2,renderImage:function(e){return(0,d.jsx)(JM,(0,a.Z)({},e))}},{id:WM.UO,title:{id:"Background"},description:{id:"Learn how to create a parallax background as well as a camera that follows the player."},durationInMinutes:2,renderImage:function(e){return(0,d.jsx)(YM,(0,a.Z)({},e))}},{id:WM.HD,title:{id:"Timer"},description:{id:"Learn how to use a timer to count a score."},durationInMinutes:2,renderImage:function(e){return(0,d.jsx)(KM,(0,a.Z)({},e))}},{id:WM.Xj,title:{id:"Score multiplier"},description:{id:"Learn how to manipulate a score by adding collectibles."},durationInMinutes:3,renderImage:function(e){return(0,d.jsx)(GM,(0,a.Z)({},e))}}].filter((function(e){return v.includes(e.id)}));return(0,d.jsx)(L.x1,{children:(0,d.jsx)("div",{style:tL.bannerContainer,children:s?(0,d.jsxs)(fr.Z,{onRetry:c,children:[(0,d.jsx)(b.Trans,{id:"An error occurred when downloading the tutorials."})," ",(0,d.jsx)(b.Trans,{id:"Please check your internet connection or try again later."})]}):(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(L.sg,{children:(0,d.jsxs)(C.pJ,{alignItems:"center",children:[100!==y?(0,d.jsxs)(F.Z,{displayInlineAsSpan:!0,noMargin:!0,size:"body2",children:[y,"%"]}):(0,d.jsx)(Ic,{}),(0,d.jsx)(UM,{value:y})]})}),(0,d.jsx)(pj.Z,{cols:QM(g,x),style:tL.grid,cellHeight:"auto",spacing:10,children:Z.map((function(e,n){return(0,d.jsx)(xj.Z,{children:(0,d.jsx)(zM,{title:e.title,description:e.description,durationInMinutes:e.durationInMinutes,renderImage:e.renderImage,progress:m({tutorialId:e.id}),onClick:function(){return t(e.id)},disabled:!!u||!r,loading:!o})},e.id)}))})]})})})},rL=n(53669),iL=n(38295),oL={buttonStyle:{textAlign:"left",width:"100%"},imageContainer:{position:"relative",width:"100%"},overlay:{position:"absolute",background:"rgba(0, 0, 0, 0.7)",borderRadius:4,padding:"2px 6px"},overlayText:{color:"white",marginTop:0,marginBottom:0},titleContainerWithMinHeight:{minHeight:52},thumbnailImageWithDescription:{display:"block",objectFit:"cover",verticalAlign:"middle",width:"100%",borderRadius:8,border:"1px solid lightgrey",boxSizing:"border-box",aspectRatio:"16 / 9",transition:"opacity 0.3s ease-in-out"},dataLoadingSkeleton:{borderRadius:8,aspectRatio:"16 / 9"},imageLoadingSkeleton:{position:"absolute",borderRadius:8,aspectRatio:"16 / 9"},lockerImage:{height:80,width:80},lockedOverlay:{position:"absolute",background:"rgba(0, 0, 0, 0.6)",inset:0,display:"flex",justifyContent:"center",alignItems:"center"}},aL=(0,R.Z)((function(e){return(0,D.Z)({tile:{transition:"transform 0.3s ease-in-out","&:hover":{transform:"scale(1.02)"}}})})),sL=function(e){var t=e.content,n=e.position,r={top:"topLeft"===n||"topRight"===n?8:void 0,bottom:"bottomLeft"===n||"bottomRight"===n?8:void 0,left:"topLeft"===n||"bottomLeft"===n?8:void 0,right:"topRight"===n||"bottomRight"===n?8:void 0};return(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},oL.overlay),r),children:(0,d.jsx)(iL.Z,{variant:"body1",style:oL.overlayText,children:t})})},lL=function(){return(0,d.jsx)("div",{style:oL.lockedOverlay,children:(0,d.jsx)(Qi,{style:oL.lockerImage})})},cL=function(e){var t=e.items,n=e.isLoading,r=e.getColumnsFromWindowSize,i=e.getLimitFromWindowSize,o=(0,w.U)(),s=o.windowSize,c=o.isLandscape,u=aL(),p=r("xlarge",c),f=i?i(s,c):void 0,h=f?t.slice(0,f):t,g=(0,Pt.Z)(),x=(0,mC.t)(),m=l.useRef(new Set),v=l.useCallback((function(e){setTimeout((function(){x&&(m.current.add(e),g())}),50)}),[g,x]),b=r(s,c);return(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)(pj.Z,{cols:b,style:{flex:1,maxWidth:316*p},cellHeight:"auto",spacing:16,children:n?new Array(b).fill(0).map((function(e,t){return(0,d.jsx)(xj.Z,{classes:u,children:(0,d.jsx)(Dj.Z,{variant:"rect",width:"100%",height:"100%",style:oL.dataLoadingSkeleton})},t)})):h.map((function(e,t){return(0,d.jsx)(xj.Z,{classes:u,children:(0,d.jsx)(O.Z,{style:oL.buttonStyle,onClick:e.onClick,tabIndex:0,focusRipple:!0,children:(0,d.jsxs)(L.sg,{expand:!0,noMargin:!0,children:[(0,d.jsxs)("div",{style:oL.imageContainer,children:[m.current.has(e.imageUrl)?null:(0,d.jsx)(Dj.Z,{variant:"rect",width:"100%",height:"100%",style:oL.imageLoadingSkeleton}),(0,d.jsx)(Hg.W,{style:(0,a.Z)({opacity:m.current.has(e.imageUrl)?1:0},oL.thumbnailImageWithDescription),src:e.imageUrl,alt:"thumbnail ".concat(t),onLoad:function(){return v(e.imageUrl)}}),e.overlayText&&(0,d.jsx)(sL,{content:e.overlayText,position:e.overlayTextPosition||"bottomRight"}),e.isLocked&&(0,d.jsx)(lL,{})]}),e.title&&(0,d.jsx)("div",{style:1===b?void 0:oL.titleContainerWithMinHeight,children:(0,d.jsx)(F.Z,{size:"sub-title",children:e.title})}),e.description&&(0,d.jsx)(F.Z,{size:"body",color:"secondary",children:(0,U.S)(e.description,120)})]})})},t)}))})})},uL=function(e){var t=e.title,n=e.description,r=e.isLoading,i=e.items,o=e.onShowAll,a=e.showAllIcon,s=e.getLimitFromWindowSize,l=e.getColumnsFromWindowSize,c=e.seeAllLabel,u=e.margin,p=(0,w.U)().isMobile;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(C.pJ,{justifyContent:"space-between",alignItems:"center",noMargin:!0,expand:!0,children:[(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(F.Z,{size:"section-title",children:t})}),a&&o&&(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(J.Z,{onClick:o,label:p?(0,d.jsx)(b.Trans,{id:"Browse"}):c||(0,d.jsx)(b.Trans,{id:"See all"}),rightIcon:a})})]}),n&&(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)(F.Z,{noMargin:!0,children:n})}),"dense"===u?null:(0,d.jsx)(L.hS,{}),(0,d.jsx)(cL,{items:i,isLoading:r,getLimitFromWindowSize:s,getColumnsFromWindowSize:l})]})},dL=n(85814),pL=n.n(dL),fL=pL()("RC2XAJAUNE","7853cc8136c930e6c7b8f68238eea179"),hL=!0,gL={search:function(e){return(0,o.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==hL){t.next=3;break}return hL=!1,t.abrupt("return",Promise.resolve({results:[{hits:[]}]}));case 3:return t.abrupt("return",fL.search(e));case 4:case"end":return t.stop()}}),t)})))()}},xL="gdevelop",mL=function(e){return Object.entries(e).reduce((function(e,t){var n=(0,s.Z)(t,2),r=n[0],i=n[1];return i&&e.push([Number(r.replace("lvl","")),i]),e}),[]).sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]}))},vL=n(6571),bL=n(4324),CL=n(61567),jL=n(35595),yL=n(38489),ZL=n(81666),kL=n(98237),wL=function(e,t){var n=t.inputValue.toLowerCase();if(""===n)return e;var r=[],i=[];return e.forEach((function(e){if(e.hit)return r.push(e);var o=t.getOptionLabel(e).toLowerCase();return o.includes(n)?r.push(e):function(e,t){return!t||function(e,t){var n=t.toLowerCase();e=e.toLowerCase();for(var r=0,i=0;i<t.length;i++)n[i]===e[r]&&(r+=1);return r===e.length}(e,t)}(n,o)?i.push(e):void 0})),[].concat(r,i)},TL=n(60274),SL=(0,R.Z)((function(e){return{listItemContainer:{width:"100%"},rootSmallPadding:{paddingLeft:0},wikiPrimaryTextHierarchy:{color:e.palette.text.secondary},wikiSecondaryText:{color:e.palette.text.primary}}})),PL={chip:{borderRadius:3}},EL=function(e){var t,n=e.hit,r=(0,w.U)().isMobile,i=SL(),o=!1;n.content?t=n.content:(o=!0,t=function(e){var t=mL(e.hierarchy);return t[t.length-1]}(n));var a=function(e,t){var n=t.removeLastLevel,r=SL(),i=mL(e.hierarchy),o=(i=i.slice(0,i.length-(n?1:0))).pop();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:r.wikiPrimaryTextHierarchy,children:i.map((function(e){return"".concat(e," > ")}))})," ",(0,d.jsx)("span",{children:o})]})}(n,{removeLastLevel:o});return(0,d.jsxs)(xe.Z,{dense:!0,component:"div",ContainerComponent:"div",classes:{container:i.listItemContainer,root:r?i.rootSmallPadding:null},children:[(0,d.jsx)(ZL.Z,{children:(0,d.jsx)(TL.Z,{})}),(0,d.jsx)(me.Z,{primary:a,secondary:(0,d.jsx)("span",{className:i.wikiSecondaryText,children:t})})]})},IL=function(e){var t=(0,w.U)(),n=t.isMobile,r=t.isMediumScreen,i=(0,Gr.bX)(),o=l.useState(!0),c=(0,s.Z)(o,2),u=c[0],p=c[1],f=(0,ue.LB)(),h=SL(),g=l.useCallback((function(e){if(n||r)return null;if(e.text)return null;if(e.name){var t=f[e.name];if(!t)return null;var i=(0,ue.$3)(t);return(0,d.jsx)(ve.Z,{children:(0,d.jsx)(be.Z,{label:i,style:PL.chip})})}}),[f,n,r]),x=l.useCallback((function(t){if(t.text)return t.text;if(t.name){var n=Ce.Z[t.name],r=n.area,i=n.displayText,o=Ce.R[r];return e.i18n._(o)+" \u3009"+e.i18n._(i)}}),[e.i18n]),m=l.useCallback((function(e){return e.text&&e.iconSrc?(0,d.jsx)(Ms.Z,{iconSize:20,src:e.iconSrc}):e.icon?e.icon:(0,d.jsx)(Ct.Z,{})}),[]),v=l.useCallback((function(e){return e.hit?(0,d.jsx)(EL,{hit:e.hit}):(0,d.jsxs)(xe.Z,{dense:!0,component:"div",ContainerComponent:"div",classes:{container:h.listItemContainer,root:n?h.rootSmallPadding:null},children:[(0,d.jsx)(ZL.Z,{children:m(e)}),(0,d.jsx)(me.Z,{primary:x(e)}),g(e)]})}),[h.listItemContainer,h.rootSmallPadding,n,x,g,m]);return(0,d.jsx)(kL.ZP,{open:u,onClose:function(t,n){"select-option"!==n&&"toggleInput"!==n&&e.onClose()},onOpen:function(){return p(!0)},options:e.items,getOptionLabel:x,onChange:function(t,n){e.onSelect(n)},onInputChange:function(t,n,r){"input"===r&&e.onInputChange&&e.onInputChange(n)},openOnFocus:!0,autoHighlight:!0,filterOptions:wL,renderInput:function(t){return(0,d.jsx)(Fr.Z,(0,a.Z)((0,a.Z)({},t),{},{placeholder:e.i18n._(e.placeholder),variant:"outlined",autoFocus:i}))},renderOption:v})},ML=function(e){var t=e.id,n=l.useState(""),r=(0,s.Z)(n,2),i=r[0],o=r[1],c=l.useState(""),u=(0,s.Z)(c,2),p=u[0],f=u[1],h=l.useState(!1),g=(0,s.Z)(h,2),x=g[0],m=g[1],v=function(){m(!1),p&&""!==p.trim()||f("")},C=l.useState("ok"),j=(0,s.Z)(C,2),y=j[0],Z=j[1],k=(0,vL.b)(),w=k.results,T=k.status,S=(0,bL.l)().refine;l.useEffect((function(){"ok"===y&&"error"===T?Z("error"):"error"===y&&"idle"===T&&Z("ok")}),[T,y]);var P=(0,Ea.N)((function(){p&&S(p)}),200);l.useEffect(P,[p,P]);var E=function(){m(!0)},I=!!p&&p.length>0,M=l.useMemo((function(){return p?0===w.hits.length?[{hit:{content:(0,d.jsx)(b.Trans,{id:"No results found. The search is only available in English at the moment."}),objectID:"no-result",url:"https://wiki.gdevelop.io",hierarchy:{lvl0:""}},handler:function(){}}]:"error"===y?[{hit:{content:(0,d.jsx)(b.Trans,{id:"An error occurred while searching for a result. Please try again later."}),objectID:"error",url:"https://wiki.gdevelop.io",hierarchy:{lvl0:""}},handler:function(){}}]:w.hits.map((function(e){return{hit:e,handler:function(){return Y.ZP.openExternalURL(e.url)}}})):[]}),[w.hits,p,y]),L=function(e,t,n){"select-option"===n&&t?(t.handler(),o("")):o("")},A=function(e,t,n){f("reset"===n?"":t||"")};return(0,d.jsx)(b.I18n,{children:function(e){var n=e.i18n;return(0,d.jsx)(jL.Z,{isFocused:x,isSearchBarEmpty:!I,onCancel:function(){return f("")},renderContent:function(e){var r=e.inputStyle,o=e.popperContainerStyle;return(0,d.jsx)(yL.ZP,{id:t,options:M,freeSolo:!0,fullWidth:!0,defaultValue:"",inputValue:p,value:i,onChange:L,onInputChange:A,onBlur:v,onFocus:E,filterOptions:function(e){return e},PopperComponent:function(e){return(0,d.jsx)("div",{style:o,children:e.children})},getOptionLabel:function(){return""},renderOption:function(e){var t=e.hit;return(0,d.jsx)(EL,{hit:t})},renderInput:function(e){return(0,d.jsx)(Fr.Z,(0,a.Z)((0,a.Z)({margin:"none"},e),{},{InputProps:(0,a.Z)((0,a.Z)({},e.InputProps),{},{disableUnderline:!0,endAdornment:null,placeholder:n._({id:"Search GDevelop wiki"}),style:r})}))}})}})}})},LL=function(e){return(0,d.jsx)(CL.p,{searchClient:gL,indexName:xL,children:(0,d.jsx)(ML,(0,a.Z)({},e))})},AL=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"89",height:"138",viewBox:"0 0 89 138",fill:"none",children:[(0,d.jsx)("path",{d:"M37.987 47.4639V74.2398H11.5396C11.7151 73.853 11.9604 73.4966 12.2648 73.192L37.987 47.4639Z",fill:"#57B3DF"}),(0,d.jsx)("path",{d:"M11.2158 85.0957V112.252C11.2158 113.242 12.0175 114.043 13.0066 114.043H30.7706C31.7597 114.043 32.5614 113.242 32.5614 112.252V106.261C32.5614 99.6982 37.7809 94.228 44.3419 94.1428C51.0082 94.0563 56.4395 99.4352 56.4395 106.083V112.252C56.4395 113.242 57.2411 114.043 58.2302 114.043H75.9942C76.9833 114.043 77.785 113.242 77.785 112.252V85.0957H11.2158Z",fill:"#FFD064"}),(0,d.jsx)("path",{d:"M37.9885 44.931C37.9885 33.9396 46.8972 25.0293 57.8868 25.0293C68.8764 25.0293 77.7853 33.9396 77.7853 44.931H37.9885Z",fill:"#EAB14D"}),(0,d.jsx)("path",{d:"M67.2933 36.4279C67.2933 39.5019 66.5258 42.3962 65.1736 44.9314H77.7852C77.7852 36.0635 71.9854 28.5515 63.9731 25.9795C66.0641 28.9307 67.2933 32.5356 67.2933 36.4279Z",fill:"#E49824"}),(0,d.jsx)("path",{d:"M73.0818 85.0957V105.721C73.0818 107.719 71.462 109.339 69.4639 109.339H56.4395V112.252C56.4395 113.242 57.2411 114.043 58.2302 114.043H75.9942C76.9833 114.043 77.785 113.242 77.785 112.252V85.0957H73.0818Z",fill:"#FFC250"}),(0,d.jsx)("path",{d:"M13.0066 114.043H30.7706C31.7597 114.043 32.5614 113.241 32.5614 112.252V109.339H11.2158V112.252C11.2158 113.241 12.0177 114.043 13.0066 114.043Z",fill:"#FFC250"}),(0,d.jsx)("path",{d:"M77.785 74.24V85.0954H11.2158V75.7247C11.2158 75.2071 11.3286 74.7002 11.54 74.24H77.785Z",fill:"#95D6A4"}),(0,d.jsx)("path",{d:"M73.0818 74.2412H77.7851V85.0966H73.0818V74.2412Z",fill:"#78C2A4"}),(0,d.jsx)("path",{d:"M48.8423 44.9307V74.2403H37.9886V44.9307H48.8423Z",fill:"#E877A7"}),(0,d.jsx)("path",{d:"M77.7852 44.9307V74.2403H66.9315V44.9307H77.7852Z",fill:"#E877A7"}),(0,d.jsx)("path",{d:"M77.7852 44.9307V74.2403H73.0819V44.9307H77.7852Z",fill:"#DD5790"})]}))})),FL=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:(0,d.jsxs)("g",{children:[(0,d.jsx)("path",{d:"M54.193 62.1191L22.0432 73.4481L54.2016 89.8419L86.36 73.4481L54.193 62.1191Z",fill:"#936319"}),(0,d.jsx)("path",{d:"M86.3307 74.3174L54.2017 89.9795V122.001L86.3601 106.848V74.3703L86.3307 74.3174Z",fill:"#F0BB6B"}),(0,d.jsx)("path",{d:"M23.154 74.3174L23.1519 74.324V106.853L54.2014 122.001V89.9899L23.154 74.3174Z",fill:"#E5AC56"}),(0,d.jsx)("path",{d:"M86.4567 73.208L54.2017 89.5308L60.9187 103.149L93.0135 85.8519L86.4567 73.208Z",fill:"#EAB14D"}),(0,d.jsx)("path",{d:"M21.9465 73.208L15.3896 85.8519L47.4845 103.149L54.2015 89.5308L21.9465 73.208Z",fill:"#F0BB6B"}),(0,d.jsx)("path",{d:"M39.4453 44L52.3786 69.6372L42.9333 74.4021L30 48.7649L39.4453 44Z",fill:"#E877A7"}),(0,d.jsx)("path",{d:"M58.48 53.8975L65.1114 71.8263C65.353 72.4794 66.0667 72.8172 66.7056 72.5809L78.1802 68.3367C78.8191 68.1004 79.1412 67.3795 78.8996 66.7264L77.4365 62.7707C75.834 58.4381 77.8698 53.5796 82.087 51.9558C86.372 50.3059 91.1938 52.5595 92.8171 56.9482L94.3237 61.0214C94.5653 61.6745 95.2789 62.0123 95.9178 61.776L107.393 57.5318C108.031 57.2955 108.353 56.5746 108.112 55.9215L101.48 37.9926L58.48 53.8975Z",fill:"#FFD064"}),(0,d.jsx)("path",{d:"M3.28991 28.9998L21.6084 40.2898L10.3185 58.6083C10.1288 58.3236 9.98968 58.0034 9.91123 57.6642L3.28991 28.9998Z",fill:"#75CEF9"}),(0,d.jsx)("path",{d:"M50.5994 30.8701C52.0805 24.5156 48.13 18.1636 41.7755 16.6824C35.4211 15.2013 29.069 19.1519 27.5878 25.5064L50.5994 30.8701Z",fill:"#EAB14D"}),(0,d.jsx)("circle",{cx:"65",cy:"32",r:"9",fill:"#95D6A4"})]})}))})),OL=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"104",height:"138",viewBox:"0 0 104 138",fill:"none",children:(0,d.jsxs)("g",{children:[(0,d.jsx)("path",{d:"M31.8503 53.6963H2.16699V112.827H31.8503V53.6963Z",fill:"#FFD15C"}),(0,d.jsx)("path",{d:"M31.8503 53.6963H2.16699V56.5224H31.8503V53.6963Z",fill:"#F7B64C"}),(0,d.jsx)("path",{d:"M34.0167 46.7393H0V53.9132H34.0167V46.7393Z",fill:"#FFD15C"}),(0,d.jsx)("path",{d:"M101.833 66.7393H72.1499V112.826H101.833V66.7393Z",fill:"#F78471"}),(0,d.jsx)("path",{d:"M101.833 66.7393H72.1499V69.5654H101.833V66.7393Z",fill:"#F05540"}),(0,d.jsx)("path",{d:"M104 59.7822H69.9834V66.9561H104V59.7822Z",fill:"#F78471"}),(0,d.jsx)("path",{d:"M18.8503 74.7834C19.5003 73.9138 19.717 73.2616 19.717 72.3922C19.717 71.5228 19.5003 71.0879 19.067 70.4357C18.6337 70.001 17.9837 69.5661 17.117 69.5661C15.6003 69.5661 14.3003 70.6529 13.0003 72.6095L8.66699 70.4355C9.75026 68.6964 10.8335 67.6095 12.1335 66.7399C13.4335 65.8703 14.9503 65.4355 17.1168 65.4355C19.0668 65.4355 20.8001 66.0877 22.3168 67.3921C23.8335 68.6964 24.4835 70.4355 24.4835 72.6095C24.4835 73.6963 24.2668 75.0007 23.6168 76.0878C22.9668 77.1747 21.8835 78.479 20.3668 80.2183L16.2503 84.566H25.3503V89.1313H9.10026V85.2182L15.817 78.2618C17.117 76.74 18.2003 75.6531 18.8503 74.7834Z",fill:"white"}),(0,d.jsx)("path",{d:"M80.1672 82.6095V78.2617H94.2505V81.9573L89.4837 87.3922C91.217 87.6096 92.7337 88.479 93.817 89.7834C94.9002 91.0877 95.3337 92.3921 95.3337 94.1311C95.3337 96.5224 94.467 98.4789 92.9505 99.7833C91.2172 101.088 89.2672 101.74 86.6672 101.74C84.0672 101.74 81.4672 100.87 78.8672 99.1311L81.0337 95.0008C83.2005 96.5226 85.1505 97.392 86.8837 97.392C87.967 97.392 88.8337 97.1746 89.4837 96.7398C90.1337 96.3051 90.567 95.4355 90.567 94.5659C90.567 93.6962 90.1337 92.8268 89.4837 92.3919C88.617 91.7397 87.7505 91.5222 86.2337 91.5222C85.5837 91.5222 84.5005 91.7397 83.2005 92.1744V88.479L87.5337 83.2616H80.167V82.6095H80.1672Z",fill:"white"}),(0,d.jsx)("path",{d:"M66.9499 31.9561H37.2666V112.826H66.9499V31.9561Z",fill:"#95D6A4"}),(0,d.jsx)("path",{d:"M66.9499 31.9561H37.2666V34.7822H66.9499V31.9561Z",fill:"#4ABAA5"}),(0,d.jsx)("path",{d:"M68.9 25H34.8833V32.1739H68.9V25Z",fill:"#95D6A4"}),(0,d.jsx)("path",{d:"M47.4502 43.4785H56.7669V66.5221H51.7837V47.8265H47.4502V43.4785Z",fill:"white"})]})}))})),RL=function(e,t){return"small"===e?t?3:1:3},DL=RL("xlarge",!0),_L=330*DL,BL={grid:{textAlign:"center",maxWidth:_L,overflow:"hidden",width:"calc(100% + ".concat(10,"px)")},bannerContainer:{width:"100%",maxWidth:_L-10}},NL=function(e){var t=e.selectInAppTutorial,n=l.useContext(Yr.Z),r=n.inAppTutorialShortHeaders,i=n.inAppTutorialsFetchingError,o=n.fetchInAppTutorials,s=n.currentlyRunningInAppTutorial,c=l.useContext(se.ZP).getTutorialProgress,u=l.useContext(tr.ZP),p=(0,w.U)(),f=p.windowSize,h=p.isLandscape,g=function(e){var t=e.tutorialId,n=e.part,r=c({tutorialId:t,userId:u.profile?u.profile.id:void 0});return r&&r.progress?r.progress[n]:0},x=function(e){var t=e.tutorialId,n=e.part;return 100===g({tutorialId:t,part:n})},m=[{key:"create",title:{id:"Start your game"},description:{id:"Add your first characters to the scene and throw your first objects."},keyPoints:[{id:"Game scene size"},{id:"Objects and characters"},{id:"Game Scenes"},{id:"Throwing physics"}],durationInMinutes:5,locked:!1,disabled:!!s||x({tutorialId:WM.bs,part:0}),progress:g({tutorialId:WM.bs,part:0}),renderImage:function(e){return(0,d.jsx)(FL,(0,a.Z)({},e))}},{key:"publish",title:{id:"Improve and publish your Game"},description:{id:"Add personality to your game and publish it online."},keyPoints:[{id:"Game background"},{id:"In-game obstacles"},{id:"\u201cYou win\u201d message"},{id:"Sharing online"}],durationInMinutes:10,locked:!x({tutorialId:WM.bs,part:0}),disabled:!!s||x({tutorialId:WM.bs,part:1}),progress:g({tutorialId:WM.bs,part:1}),renderImage:function(e){return(0,d.jsx)(AL,(0,a.Z)({},e))}},{key:"leaderboards",title:{id:"Add leaderboards to your online Game"},description:{id:"Add player logins to your game and add a leaderboard."},keyPoints:[{id:"Game personalisation"},{id:"\u201cStart\u201d screen"},{id:"Timers"},{id:"Leaderboards"}],durationInMinutes:15,locked:!x({tutorialId:WM.bs,part:1}),disabled:!!s||x({tutorialId:WM.bs,part:2}),progress:g({tutorialId:WM.bs,part:2}),renderImage:function(e){return(0,d.jsx)(OL,(0,a.Z)({},e))}}],v=x({tutorialId:WM.bs,part:0})&&x({tutorialId:WM.bs,part:1})&&x({tutorialId:WM.bs,part:2});return(0,d.jsx)(L.x1,{children:(0,d.jsx)("div",{style:BL.bannerContainer,children:i?(0,d.jsxs)(fr.Z,{onRetry:o,children:[(0,d.jsx)(b.Trans,{id:"An error occurred when downloading the tutorials."})," ",(0,d.jsx)(b.Trans,{id:"Please check your internet connection or try again later."})]}):null===r?(0,d.jsx)(Xe.Z,{}):(0,d.jsx)(pj.Z,{cols:v?1:RL(f,h),style:BL.grid,cellHeight:"auto",spacing:10,children:v?(0,d.jsx)(xj.Z,{children:(0,d.jsx)(zM,{title:{id:"Congratulations! You've finished this tutorial!"},description:{id:"Find your finished game on the \u201cBuild\u201d section. Or restart the tutorial by clicking on the card."},size:"banner",locked:!1,disabled:!1,renderImage:function(e){return(0,d.jsxs)(L.x1,{justifyContent:"space-around",expand:!0,children:[(0,d.jsx)(FL,(0,a.Z)({},e)),(0,d.jsx)(AL,(0,a.Z)({},e)),(0,d.jsx)(OL,(0,a.Z)({},e))]})},onClick:function(){return t(WM.bs)}})}):m.map((function(e){return(0,d.jsx)(xj.Z,{children:(0,d.jsx)(zM,(0,a.Z)((0,a.Z)({},e),{},{onClick:function(){return t(WM.bs)}}))},e.key)}))})})})},UL=function(e){var t=e.tutorial,n=e.onClose,r=l.useContext(tr.ZP),a=r.limits,c=r.getAuthorizationHeader,u=r.profile,p=l.useState(null),f=(0,s.Z)(p,2),h=f[0],g=f[1],x=l.useState(null),m=(0,s.Z)(x,2),v=m[0],j=m[1],y=!(0,li.$S)(t,a?a.capabilities:null),Z=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return");case 2:return t.isPrivateTutorial&&"pdf-tutorial"===t.type||console.error("PrivateTutorialViewDialog is used for an unsupported tutorial type."),g(null),e.prev=4,e.next=7,(0,$C.sH)(c,{userId:u.id,tutorialId:t.id});case 7:n=e.sent,j(n),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error("An error occurred while fetching the PDF tutorial:",e.t0),g(e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,11]])}))),[c,u,t]);return l.useEffect((function(){Z()}),[Z]),(0,d.jsx)(b.I18n,{children:function(e){var r=e.i18n;return(0,d.jsx)(te.ZP,{title:(0,uc.a)(r,t.titleByLocale),open:!0,maxWidth:"md",actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Close"}),primary:!1,onClick:n},"close")],flexColumnBody:!0,children:(0,d.jsxs)(C.ak,{noMargin:!0,expand:!0,children:[(0,d.jsx)(F.Z,{children:(0,uc.a)(r,t.descriptionByLocale)}),y?(0,d.jsxs)(C.ak,{noMargin:!0,children:[t.redeemLinkByLocale&&(0,d.jsx)(L.x1,{noMargin:!0,justifyContent:"center",alignItems:"center",children:(0,d.jsx)(T.Z,{icon:(0,d.jsx)($i,{}),label:(0,d.jsx)(b.Trans,{id:"Get access"}),primary:!0,onClick:function(){t.redeemLinkByLocale&&Y.ZP.openExternalURL((0,uc.a)(r,t.redeemLinkByLocale))}})}),(0,d.jsx)(De.Z,{kind:"info",children:t.redeemHintByLocale?(0,uc.a)(r,t.redeemHintByLocale):(0,d.jsx)(b.Trans,{id:"This tutorial must be unlocked to be accessed."})})]}):v?(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(L.x1,{noMargin:!0,justifyContent:"center",alignItems:"center",children:(0,d.jsx)(T.Z,{icon:(0,d.jsx)(Kr.Z,{}),label:(0,d.jsx)(b.Trans,{id:"Download"}),primary:!0,onClick:function(){(0,Ar.dw)(t.id),Y.ZP.openExternalURL(v.downloadUrl)}})}),(0,d.jsx)(De.Z,{kind:"info",children:(0,d.jsx)(b.Trans,{id:"Remember that your access to this resource is exclusive to your account."})})]}):h?(0,d.jsx)(fr.Z,{onRetry:Z,children:(0,d.jsx)(b.Trans,{id:"Unable to load the tutorial. Please try again later or contact us if the problem persists."})}):(0,d.jsx)(Xe.Z,{})]})})}})},HL=function(e){var t=e.onSeeResources;return(0,d.jsx)(Cy.r,{renderImage:function(e){return(0,d.jsx)("img",{src:"res/education-resources.svg",style:e,alt:"Content for teachers"})},children:(0,d.jsxs)(C.ep,{noMargin:!0,expand:!0,alignItems:"stretch",children:[(0,d.jsxs)(C.ak,{alignItems:"flex-start",expand:!0,noMargin:!0,children:[(0,d.jsx)(F.Z,{noMargin:!0,size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Content for Teachers"})}),(0,d.jsx)(F.Z,{noMargin:!0,size:"body",children:(0,d.jsx)(b.Trans,{id:"Access GDevelop\u2019s resources for teaching game development and promote careers in technology."})}),(0,d.jsx)(L.LZ,{})]}),(0,d.jsx)(L.LZ,{}),(0,d.jsxs)(C.ak,{justifyContent:"center",alignItems:"center",noMargin:!0,children:[(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"See resources"}),primary:!0,fullWidth:!0,onClick:t}),(0,d.jsx)(Jx.Z,{label:(0,d.jsx)(b.Trans,{id:"About education plan"}),fullWidth:!0,onClick:function(){Y.ZP.openExternalURL("https://gdevelop.io/pricing/education")}})]})]})})},VL=(0,R.Z)({tile:{width:"100%"}}),zL=function(e,t){switch(e){case"small":return t?4:1;case"medium":default:return 3;case"large":return 4;case"xlarge":return 5}},WL=function(e,t){switch(e){case"small":return t?5:1;case"medium":default:return 3;case"large":return 5;case"xlarge":return 6}},GL=zL("xlarge",!0),YL={grid:{textAlign:"center",maxWidth:210*GL},helpItem:{padding:10,flex:1,display:"flex"}},qL=function(e){var t=e.limits,n=e.tutorials,r=e.category,i=e.onSelectCategory,o=e.onSelectTutorial;return(0,d.jsx)(b.I18n,{children:function(e){var a=e.i18n;return(0,d.jsx)(uL,{title:eA[r].title,description:eA[r].description,items:n.filter((function(e){return e.category===r})).map((function(e){return tA({i18n:a,limits:t,tutorial:e,onSelectTutorial:o})})),onShowAll:function(){return i(r)},showAllIcon:(0,d.jsx)(Ct.Z,{fontSize:"small"}),getColumnsFromWindowSize:WL,getLimitFromWindowSize:WL})}})},XL=function(e){var t=e.onOpenExampleStore,n=e.onTabChange,r=e.onSelectCategory,i=e.tutorials,o=e.selectInAppTutorial,a=l.useContext(tr.ZP).limits,c=VL(),u=(0,w.U)(),p=u.windowSize,f=u.isMobile,h=u.isLandscape,g=u.isMediumScreen,x=[{title:(0,d.jsx)(b.Trans,{id:"Documentation"}),description:(0,d.jsx)(b.Trans,{id:"Find the complete documentation on everything"}),action:function(){return Y.ZP.openExternalURL("https://wiki.gdevelop.io/gdevelop5/")}},{title:(0,d.jsx)(b.Trans,{id:"Examples"}),description:(0,d.jsx)(b.Trans,{id:"Have look at existing games from the inside"}),action:t},{title:(0,d.jsx)(b.Trans,{id:"Community"}),description:(0,d.jsx)(b.Trans,{id:"Ask your questions to the community"}),action:function(){return n("community")}}].filter(Boolean),m=l.useState(null),v=(0,s.Z)(m,2),j=v[0],y=v[1];return(0,d.jsxs)(vy,{title:(0,d.jsx)(b.Trans,{id:"Help and guides"}),children:[(0,d.jsx)(my,{children:(0,d.jsx)(LL,{})}),(0,d.jsx)(my,{children:(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)(pj.Z,{cols:zL(p,h),style:YL.grid,cellHeight:"auto",spacing:10,children:x.map((function(e,t){return(0,d.jsx)(xj.Z,{classes:{tile:c.tile},children:(0,d.jsx)(_M,{onClick:e.action,size:"large",disabled:e.disabled,useDefaultDisabledStyle:!0,children:(0,d.jsx)("div",{style:YL.helpItem,children:(0,d.jsxs)(C.ak,{expand:!0,justifyContent:"center",useFullHeight:!0,children:[(0,d.jsx)(F.Z,{noMargin:!0,size:"block-title",children:e.title}),(0,d.jsx)(F.Z,{noMargin:!0,size:"body",color:"secondary",children:e.description})]})})},t)},t)}))})})}),(0,d.jsxs)(my,{children:[(0,d.jsx)(F.Z,{noMargin:!0,size:"section-title",children:(0,d.jsx)(b.Trans,{id:"Guided lessons"})}),(0,d.jsx)(nL,{selectInAppTutorial:o})]}),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(my,{children:[(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)(F.Z,{size:"title",children:(0,d.jsx)(b.Trans,{id:"Courses"})})}),(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)(F.Z,{noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Learn everything about GDevelop from the ground up"})})}),a&&a.capabilities.classrooms&&a.capabilities.classrooms.hideUpgradeNotice?null:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.LZ,{}),(0,d.jsx)(HL,{onSeeResources:function(){return r("education-curriculum")}})]})]}),(0,d.jsx)(my,{children:(0,d.jsx)(qL,{limits:a,category:"official-beginner",onSelectCategory:r,onSelectTutorial:y,tutorials:i})}),(0,d.jsx)(my,{children:(0,d.jsx)(qL,{limits:a,category:"official-intermediate",onSelectCategory:r,onSelectTutorial:y,tutorials:i})}),(0,d.jsx)(my,{children:(0,d.jsx)(qL,{limits:a,category:"official-advanced",onSelectCategory:r,onSelectTutorial:y,tutorials:i})}),(0,d.jsxs)(my,{children:[(0,d.jsx)(F.Z,{noMargin:!0,size:"section-title",children:(0,d.jsx)(b.Trans,{id:"Create and Publish a Fling game"})}),(0,d.jsx)(F.Z,{size:"body",color:"secondary",noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"3-part tutorial to creating and publishing a game from scratch."})}),(0,d.jsx)(NL,{selectInAppTutorial:o})]}),(0,d.jsxs)(my,{children:[(0,d.jsxs)(C.pJ,{justifyContent:"space-between",alignItems:"center",noMargin:!0,expand:!0,children:[(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(F.Z,{size:"title",children:(0,d.jsx)(b.Trans,{id:"Guides and tutorials"})})}),(0,d.jsxs)(C.pJ,{noMargin:!0,children:[!f&&(0,d.jsx)(J.Z,{onClick:function(){Y.ZP.openExternalURL("https://github.com/GDevelopApp/GDevelop-examples/issues/new/choose")},primary:!0,leftIcon:(0,d.jsx)(SC,{}),label:g?(0,d.jsx)(b.Trans,{id:"Submit an example"}):(0,d.jsx)(b.Trans,{id:"Submit your project as an example"})}),!f&&(0,d.jsx)(J.Z,{onClick:function(){Y.ZP.openExternalURL("https://airtable.com/shrv295oHlsuS69el")},primary:!0,leftIcon:(0,d.jsx)(rL.Z,{}),label:g?(0,d.jsx)(b.Trans,{id:"Submit a tutorial"}):(0,d.jsx)(b.Trans,{id:"Submit a tutorial translated in your language"})})]})]}),(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)(F.Z,{noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Learn by doing"})})})]}),(0,d.jsx)(my,{children:(0,d.jsx)(qL,{limits:a,category:"education-curriculum",onSelectCategory:r,onSelectTutorial:y,tutorials:i})}),(0,d.jsx)(my,{children:(0,d.jsx)(qL,{limits:a,category:"full-game",onSelectCategory:r,onSelectTutorial:y,tutorials:i})}),(0,d.jsx)(my,{children:(0,d.jsx)(qL,{limits:a,category:"game-mechanic",onSelectCategory:r,onSelectTutorial:y,tutorials:i})}),j&&(0,d.jsx)(UL,{tutorial:j,onClose:function(){return y(null)}})]})]})},KL=function(e){switch(e){case"small":return 1;case"medium":default:return 3;case"large":return 5;case"xlarge":return 6}},JL=function(e){var t=e.category,n=e.tutorials,r=e.onBack,i=l.useContext(tr.ZP).limits,o=eA[t],a=n.filter((function(e){return e.category===t})),c=l.useState(null),u=(0,s.Z)(c,2),p=u[0],f=u[1];return(0,d.jsx)(b.I18n,{children:function(e){var t=e.i18n;return(0,d.jsxs)(vy,{title:o.title,subtitleText:o.description,backAction:r,children:[(0,d.jsx)(my,{children:(0,d.jsx)(cL,{items:a.map((function(e){return tA({i18n:t,limits:i,tutorial:e,onSelectTutorial:f})})),getColumnsFromWindowSize:KL})}),p&&(0,d.jsx)(UL,{tutorial:p,onClose:function(){return f(null)}})]})}})},QL=function(e){var t=e.i18n,n=e.dateAsNumber,r=e.relativeLimit,i=e.sameDayFormat,o=e.sameWeekFormat,a=e.dayBeforeFormat,s=Date.now();if(s-n<6e4)return t._({id:"Just now"});var l=new Date(s),c=new Date(n);if(l.getFullYear()===c.getFullYear()&&l.getMonth()===c.getMonth()&&l.getDate()===c.getDate()){if("todayAndHour"===i)return t._({id:"Today"})+" ".concat(t.date(c,{hour:"numeric"}));if("today"===i)return t._({id:"Today"});if(s-n<36e5){var u=Math.floor((s-n)/6e4);return t._({id:"{minutesAgo} minutes ago",values:{minutesAgo:u}})}var d=Math.floor((s-n)/36e5);return 1===d?t._({id:"1 hour ago"}):t._({id:"{hoursAgo} hours ago",values:{hoursAgo:d}})}var p=new Date(l);if(p.setDate(l.getDate()-1),l.getFullYear()===c.getFullYear()&&l.getMonth()===c.getMonth()&&p.getDate()===c.getDate())return"yesterdayAndHour"===a?t._({id:"Yesterday"})+" ".concat(t.date(c,{hour:"numeric"})):t._({id:"Yesterday"});var f=new Date(l);if(f.setDate(l.getDate()-7),f.setHours(0,0,0,0),l.getFullYear()===c.getFullYear()&&l.getMonth()===c.getMonth()&&f.getTime()<=c.getTime()){if("thisWeek"===o)return t._({id:"This week"});var h=Math.floor((s-n)/864e5);return 1===h?t._({id:"1 day ago"}):t._({id:"{daysAgo} days ago",values:{daysAgo:h}})}return"currentWeek"===r?t.date(c):l.getFullYear()===c.getFullYear()&&l.getMonth()===c.getMonth()?t._({id:"This month"}):l.getFullYear()===c.getFullYear()?t._({id:"This year"}):c.getFullYear()},$L=function(e){var t=Math.floor(e/60),n=e%60,r=n<10?"0".concat(n):n;return"".concat(t,":").concat(r)},eA={"full-game":{title:(0,d.jsx)(b.Trans,{id:"Entire games"}),description:(0,d.jsx)(b.Trans,{id:"Make complete games step by step"})},"game-mechanic":{title:(0,d.jsx)(b.Trans,{id:"Specific game mechanics"}),description:(0,d.jsx)(b.Trans,{id:"Find how to implement the most common game mechanics and more"})},"official-beginner":{title:(0,d.jsx)(b.Trans,{id:"Beginner course"}),description:(0,d.jsx)(b.Trans,{id:"Learn the fundamental principles of GDevelop"})},"official-intermediate":{title:(0,d.jsx)(b.Trans,{id:"Intermediate course"}),description:(0,d.jsx)(b.Trans,{id:"Learn all the game-building mechanics of GDevelop"})},"official-advanced":{title:(0,d.jsx)(b.Trans,{id:"Advanced course"}),description:(0,d.jsx)(b.Trans,{id:"The icing on the cake"})},"education-curriculum":{title:(0,d.jsx)(b.Trans,{id:"Education curriculum and resources"}),description:(0,d.jsx)(b.Trans,{id:"For teachers and educators having the GDevelop Education subscription. Ready to use resources for teaching."})},recommendations:{title:(0,d.jsx)(b.Trans,{id:"Recommendations"}),description:null}},tA=function(e){var t=e.i18n,n=e.tutorial,r=e.limits,i=e.onSelectTutorial,o=!(0,li.$S)(n,r?r.capabilities:null);return{title:(0,uc.a)(t,n.titleByLocale)||n.title,description:(0,uc.a)(t,n.descriptionByLocale)||n.description,isLocked:o,onClick:function(){n.isPrivateTutorial?i(n):((0,Ar.dw)(n.id),Y.ZP.openExternalURL((0,uc.a)(t,n.linkByLocale)||n.link))},imageUrl:(0,uc.a)(t,n.thumbnailUrlByLocale)||n.thumbnailUrl,overlayText:n.duration?$L(n.duration):"\ud83d\udcd8",overlayTextPosition:"bottomRight"}},nA={paper:{flex:1,display:"flex"}},rA=function(e){var t=e.onOpenExampleStore,n=e.onTabChange,r=e.selectInAppTutorial,i=e.initialCategory,o=l.useContext(rv.n),a=o.tutorials,c=o.fetchTutorials,u=o.error;l.useEffect((function(){c()}),[c]);var p=l.useState(i||null),f=(0,s.Z)(p,2),h=f[0],g=f[1];return l.useEffect((function(){i&&g(i)}),[i]),u?(0,d.jsx)(de.Z,{square:!0,style:nA.paper,background:"dark",children:(0,d.jsx)(fr.Z,{onRetry:c,children:(0,d.jsx)(b.Trans,{id:"Can't load the tutorials. Verify your internet connection or retry later."})})}):a?h?(0,d.jsx)(JL,{onBack:function(){return g(null)},category:h,tutorials:a}):(0,d.jsx)(XL,{onOpenExampleStore:t,onTabChange:n,onSelectCategory:g,tutorials:a,selectInAppTutorial:r}):(0,d.jsx)(Xe.Z,{})},iA=function(e){return(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Learn section"}),scope:"start-page-learn",children:(0,d.jsx)(rA,(0,a.Z)({},e))})},oA=(n(25625),{bulletIcon:{width:20,height:20,marginRight:10},bulletText:{flex:1},planRecommendationThumbnail:{maxWidth:350,flex:1},planRecommendationContainer:{borderRadius:8,maxWidth:850,padding:8}}),aA={individual:{path:"res/plan-individual.svg",alt:{id:"Red hero taking care of their diamond"}},education:{path:"res/plan-education.svg",alt:{id:"Red hero sharing knowledge with pink cloud students"}},professional:{path:"res/plan-professional.svg",alt:{id:"Red and Green heroes running side by side carrying their diamonds"}}},sA={silver:{title:(0,d.jsx)(b.Trans,{id:"GDevelop's Silver plan"}),description:(0,d.jsx)(b.Trans,{id:"Unlock GDevelop's features to build more and faster."}),image:aA.individual,link:"https://gdevelop.io/pricing/individual"},gold:{title:(0,d.jsx)(b.Trans,{id:"GDevelop's Gold plan"}),description:(0,d.jsx)(b.Trans,{id:"Unlock GDevelop's features to build more and faster."}),image:aA.individual,link:"https://gdevelop.io/pricing/individual"},education:{title:(0,d.jsx)(b.Trans,{id:"GDevelop's Education plan"}),description:(0,d.jsx)(b.Trans,{id:"For universities, extra curricular classes and summer camps."}),image:aA.education,link:"https://gdevelop.io/pricing/education"},startup:{title:(0,d.jsx)(b.Trans,{id:"GDevelop's Startup plan"}),description:(0,d.jsx)(b.Trans,{id:"Get the most out of GDevelop and get your games out in no time."}),image:aA.professional,link:"https://gdevelop.io/pricing/business"},business:{title:(0,d.jsx)(b.Trans,{id:"GDevelop's Business plan"}),description:(0,d.jsx)(b.Trans,{id:"Get the most out of GDevelop and get your games out in no time."}),image:aA.professional,link:"https://gdevelop.io/pricing/business"}},lA=function(e){var t=e.recommendationPlanId,n=e.subscriptionPlansWithPricingSystems,r=e.i18n,i=l.useContext(f.Z),o=(0,w.U)().isMobile,s="silver"===t?"gdevelop_silver":"gold"===t?"gdevelop_gold":"education"===t?"gdevelop_education":"startup"===t||"business"===t?"gdevelop_startup":null;if(!s)return null;var c=n.find((function(e){return e.id===s}));if(!c)return null;var u=sA[t];return(0,d.jsx)(L.x1,{justifyContent:"center",children:(0,d.jsx)(de.Z,{background:"dark",style:(0,a.Z)((0,a.Z)({},oA.planRecommendationContainer),{},{border:"1px solid ".concat(i.palette.secondary)}),children:(0,d.jsxs)(C.ep,{noColumnMargin:!0,noMargin:!0,children:[(0,d.jsx)("img",{src:u.image.path,alt:r._(u.image.alt),style:oA.planRecommendationThumbnail}),(0,d.jsx)(L.x1,{expand:!0,children:(0,d.jsxs)(C.ak,{children:[(0,d.jsx)(F.Z,{noMargin:!0,align:o?"center":"left",size:"section-title",children:u.title}),(0,d.jsx)(F.Z,{align:o?"center":"left",children:u.description}),(0,d.jsx)("div",{style:{padding:"0 20px"},children:(0,d.jsx)(C.ak,{noMargin:!0,children:c.bulletPointsByLocale.map((function(e,t){return(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,d.jsxs)(L.x1,{noMargin:!0,alignItems:"center",children:[(0,d.jsx)(Aa.Z,{style:(0,a.Z)((0,a.Z)({},oA.bulletIcon),{},{color:i.message.valid})}),(0,d.jsx)(F.Z,{style:oA.bulletText,size:"body2",noMargin:!0,children:(0,uc.a)(r,e)})]})},t)}))})}),(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(T.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Learn More"}),onClick:function(){return Y.ZP.openExternalURL(u.link)}})})]})})]})})})},cA=function(e){var t=e.onStartSurvey,n=e.hasFilledSurveyAlready;return(0,d.jsx)(Cy.r,{renderImage:function(e){return(0,d.jsx)("img",{src:"res/start-survey.svg",style:e,alt:"Survey"})},children:(0,d.jsx)(L.x1,{noMargin:!0,expand:!0,children:(0,d.jsxs)(C.ak,{alignItems:"flex-start",expand:!0,children:[(0,d.jsx)(F.Z,{noMargin:!0,size:"block-title",children:n?(0,d.jsx)(b.Trans,{id:"Have you changed your usage of GDevelop?"}):(0,d.jsx)(b.Trans,{id:"Personalize your suggested content"})}),(0,d.jsx)(F.Z,{noMargin:!0,size:"body",children:(0,d.jsx)(b.Trans,{id:"Answer a 1-minute survey to personalize your \u201cGet started\u201d content."})}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(T.Z,{label:n?(0,d.jsx)(b.Trans,{id:"Redo the survey"}):(0,d.jsx)(b.Trans,{id:"Start the survey!"}),primary:!0,onClick:t}),(0,d.jsx)(L.LZ,{})]})})})},uA={textTutorialContent:{padding:20,flex:1,display:"flex"}},dA=(0,OM.Z)({tile:{width:"100%",display:"flex",justifyContent:"center"}}),pA=function(e,t){switch(e){case"small":return t?4:1;case"medium":return 2;case"large":return 4;case"xlarge":return 5;default:return 3}},fA=function(e,t){switch(e){case"small":return t?5:1;case"medium":default:return 3;case"large":return 5;case"xlarge":return 6}},hA=function(e,t){switch(e){case"small":return t?5:3;case"medium":default:return 3;case"large":case"xlarge":return 5}},gA=function(e){var t=e.tutorials,n=dA(),r=(0,w.U)(),i=r.isLandscape,o=r.windowSize;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(F.Z,{size:"section-title",noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Read"})}),(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Text-based content directly from GDevelop\u2019s site and Wiki."})})]}),(0,d.jsx)(pj.Z,{cols:pA(o,i),cellHeight:"auto",spacing:10,children:t.map((function(e){return(0,d.jsx)(xj.Z,{classes:{tile:n.tile},children:(0,d.jsx)(_M,{onClick:function(){return Y.ZP.openExternalURL(e.link)},size:"large",children:(0,d.jsx)("div",{style:uA.textTutorialContent,children:(0,d.jsxs)(C.ak,{expand:!0,justifyContent:"center",useFullHeight:!0,children:[(0,d.jsx)(F.Z,{noMargin:!0,size:"block-title",children:e.title}),(0,d.jsx)(F.Z,{noMargin:!0,size:"body",color:"secondary",children:e.description})]})})})},e.id)}))})]})},xA=function(e){var t=e.authenticatedUser,n=e.selectInAppTutorial,r=e.subscriptionPlansWithPricingSystems,i=e.onStartSurvey,o=e.hasFilledSurveyAlready,a=e.onOpenProfile,c=t.recommendations,u=t.subscription,p=t.limits,f=t.badges,h=t.achievements,g=l.useContext(rv.n).tutorials,x=l.useContext(se.ZP).getTutorialProgress,m=l.useState(null),v=(0,s.Z)(m,2),C=v[0],j=v[1];if(!c)return(0,d.jsx)(Xe.Z,{});var y=g?c.map((function(e){return"gdevelop-tutorial"===e.type?g.find((function(t){return t.id===e.id})):null})).filter(Boolean):[],Z=y.filter((function(e){return"video"===e.type})),k=y.filter((function(e){return"text"===e.type})),w=c.find((function(e){return"guided-lessons"===e.type})),T=w?w.lessonsIds:null,S=c.find((function(e){return"plan"===e.type}));return(0,d.jsx)(b.I18n,{children:function(e){var s=e.i18n,l=[];if(i&&!o&&l.push((0,d.jsx)(my,{children:(0,d.jsx)(cA,{onStartSurvey:i,hasFilledSurveyAlready:!1})},"start-survey")),w){var c=!!T&&T.map((function(e){return function(e){var n=e.tutorialId,r=x({tutorialId:n,userId:t.profile?t.profile.id:void 0});return r&&r.progress?r.progress[0]:0}({tutorialId:e})})).every((function(e){return 100===e}));l.push((0,d.jsxs)(my,{children:[(0,d.jsx)(F.Z,{size:"section-title",noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Build game mechanics"})}),(0,d.jsx)(nL,{selectInAppTutorial:n,lessonsIds:T}),c&&(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Congratulations on completing this selection of guided lessons! Find all lessons in the Learn section."})})]},"guided-lessons"))}if(Z.length&&l.push((0,d.jsx)(my,{children:(0,d.jsx)(uL,{title:(0,d.jsx)(b.Trans,{id:"Get started with game creation"}),margin:"dense",items:Z.map((function(e){return tA({i18n:s,limits:p,tutorial:e,onSelectTutorial:j})})),getColumnsFromWindowSize:fA,getLimitFromWindowSize:hA})},"videos")),i&&o&&l.push((0,d.jsx)(my,{children:(0,d.jsx)(cA,{onStartSurvey:i,hasFilledSurveyAlready:!0})},"start-survey")),l.push((0,d.jsxs)(my,{children:[(0,d.jsx)(F.Z,{size:"section-title",noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Discover the ecosystem"})}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(by,{}),(0,d.jsx)(L.LZ,{}),jy({badges:f})&&(0,d.jsx)(yy,{achievements:h,onOpenProfile:a})]},"promotions")),k.length&&l.push((0,d.jsx)(my,{children:(0,d.jsx)(gA,{tutorials:k})},"texts")),S){var g=p&&!(p.capabilities.classrooms&&p.capabilities.classrooms.hideUpgradeNotice)&&(!u||function(e,t){return"gdevelop_education"!==e.planId&&("gdevelop_silver"===e.planId||"gdevelop_indie"===e.planId?["gold","startup","business","education"]:"gdevelop_gold"===e.planId||"gdevelop_pro"===e.planId?["startup","business","education"]:"gdevelop_startup"===e.planId?["business"]:[]).includes(t.id)}(u,S));g&&r&&l.push((0,d.jsx)(my,{children:(0,d.jsx)(lA,{recommendationPlanId:S.id,subscriptionPlansWithPricingSystems:r,i18n:s})},"plan"))}return(0,d.jsxs)(d.Fragment,{children:[l,C&&(0,d.jsx)(UL,{tutorial:C,onClose:function(){return j(null)}})]})}})},mA=n(58336),vA=n(50533),bA={icon:{width:80,height:80,margin:20},middlePageButtonContainer:{width:"100%",maxWidth:300,marginBottom:"15%"},bottomPageButtonContainer:{width:"100%",maxWidth:300,marginBottom:30},linearProgress:{width:200},getFormContainerStyle:function(e){return{marginTop:20,width:e?"95%":300}},questionnaireFinishedImage:{aspectRatio:"263 / 154"}},CA=function(e){var t,n=e.selectInAppTutorial,r=e.onUserSurveyStarted,a=e.onUserSurveyHidden,c=e.subscriptionPlansWithPricingSystems,u=e.onOpenProfile,p=function(){try{return localStorage.hasOwnProperty(kM)}catch(U){console.log("An error occurred when checking for user survey persisted state in local storage:",U)}}(),f=(0,to.k)(),h=l.useContext(tr.ZP),g=l.useState(!1),x=(0,s.Z)(g,2),m=x[0],v=x[1],j=h.profile,y=h.onResetPassword,Z=h.creatingOrLoggingInAccount,k=h.onLogin,S=h.onLoginWithProvider,P=h.onCancelLogin,E=h.onEditProfile,I=h.onCreateAccount,M=h.authenticationError,A=h.loginState,O=l.useContext(se.ZP),R=O.values,D=O.setShowGetStartedSectionByDefault,_=l.useRef(null),B=l.useState(null),N=(0,s.Z)(B,2),U=N[0],H=N[1],V=(0,Pt.Z)(),z=(0,w.U)().isMobile,W=l.useState(p?"survey":"recommendations"),G=(0,s.Z)(W,2),Y=G[0],q=G[1],X=l.useState(""),K=(0,s.Z)(X,2),Q=K[0],$=K[1],ee=l.useState(""),te=(0,s.Z)(ee,2),ne=te[0],re=te[1],ie=l.useState(""),oe=(0,s.Z)(ie,2),ae=oe[0],le=oe[1],ce=l.useState(!1),ue=(0,s.Z)(ce,2),de=ue[0],pe=ue[1],fe=l.useState(null),he=(0,s.Z)(fe,2),ge=he[0],xe=he[1],me=l.useState(!1),ve=(0,s.Z)(me,2),be=ve[0],Ce=ve[1],je=l.useState(!1),ye=(0,s.Z)(je,2),Ze=ye[0],ke=ye[1],we=l.useState("login"),Te=(0,s.Z)(we,2),Se=Te[0],Pe=Te[1],Ee=function(){Z||k({email:Q.trim(),password:ne})},Ie=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z){e.next=2;break}return e.abrupt("return");case 2:I({email:Q.trim(),password:ne,getNewsletterEmail:Ze,username:ae},R);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,q("surveyFinished"),_.current=(0,mA.g)(2500),e.next=5,Promise.all([E({survey:t},R),_.current]);case 5:(0,Ar.f4)(),wM(),q("recommendations"),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("An error occurred when sending survey:",e.t0),pe(!0),q("welcome");case 15:return e.prev=15,_.current=null,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,10,15,18]])})));return function(t){return e.apply(this,arguments)}}(),Le=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(!0),e.next=4,S(t);case 4:return e.prev=4,v(!1),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[0,,4,7]])})));return function(t){return e.apply(this,arguments)}}(),[S]);if(l.useEffect((function(){"login"===Y?Pe("login"):"register"===Y&&Pe("register")}),[Y]),l.useEffect((function(){h.authenticated||wM()}),[h.authenticated]),l.useEffect((function(){H(M)}),[M]),l.useEffect((function(){H(null),$(""),re("")}),[Se]),(Z||"loggingIn"===A)&&"recommendations"!==Y&&!_.current)return(0,d.jsx)(vy,{title:null,flexBody:!0,children:(0,d.jsxs)(C.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:[(0,d.jsx)(C.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:(0,d.jsx)(eo.Z,{size:40})}),m&&(0,d.jsx)("div",{style:bA.bottomPageButtonContainer,children:(0,d.jsx)(L.sg,{children:(0,d.jsx)(C.pJ,{expand:!0,justifyContent:"center",alignItems:"center",children:(0,d.jsx)(J.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Cancel"}),onClick:P})})})})]})});if(!f||de)return(0,d.jsx)(vy,{title:null,flexBody:!0,children:(0,d.jsx)(C.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:de?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(F.Z,{size:"title",align:"center",children:(0,d.jsx)(b.Trans,{id:"Error when sending survey."})}),(0,d.jsx)(dM,{style:bA.icon}),(0,d.jsx)(F.Z,{size:"body2",noMargin:!0,align:"center",children:(0,d.jsx)(b.Trans,{id:"Verify your internet connection and try again later."})})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(F.Z,{size:"title",align:"center",children:(0,d.jsx)(b.Trans,{id:"You seem to be offline"})}),(0,d.jsx)(dM,{style:bA.icon}),(0,d.jsx)(F.Z,{size:"body2",noMargin:!0,align:"center",children:(0,d.jsx)(b.Trans,{id:"Verify your internet connection to access your personalized content."})}),(0,d.jsx)("div",{style:bA.middlePageButtonContainer,children:(0,d.jsx)(L.x1,{expand:!0,children:(0,d.jsx)(T.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Refresh"}),onClick:V,fullWidth:!0})})})]})})});if("login"===Y)return(0,d.jsx)(vy,{title:null,flexBody:!0,children:(0,d.jsxs)(C.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:[(0,d.jsxs)(C.ak,{expand:!0,noMargin:!0,alignItems:"center",justifyContent:"center",children:[(0,d.jsx)(F.Z,{size:"title",align:"center",children:(0,d.jsx)(b.Trans,{id:"Log in to GDevelop"})}),(0,d.jsx)(Ta.Z,{children:(0,d.jsx)(b.Trans,{id:"This will synchronise your selected content wherever you go."})}),(0,d.jsx)("div",{style:bA.getFormContainerStyle(z),children:(0,d.jsx)(FM.Z,{email:Q,onChangeEmail:$,password:ne,onChangePassword:re,onLogin:Ee,onLoginWithProvider:Le,loginInProgress:Z,onForgotPassword:y,error:U})})]}),(0,d.jsx)("div",{style:bA.bottomPageButtonContainer,children:(0,d.jsx)(L.sg,{children:(0,d.jsxs)(C.pJ,{expand:!0,children:[(0,d.jsx)(J.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Back"}),onClick:function(){return q("welcome")},fullWidth:!0}),(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Next"}),primary:!0,onClick:Ee,fullWidth:!0})]})})})]})});if("register"===Y)return(0,d.jsx)(vy,{title:null,flexBody:!0,children:(0,d.jsxs)(C.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:[(0,d.jsxs)(C.ak,{expand:!0,noMargin:!0,alignItems:"center",justifyContent:"center",children:[(0,d.jsx)(F.Z,{size:"title",align:"center",children:(0,d.jsx)(b.Trans,{id:"Let's start by creating your GDevelop account"})}),(0,d.jsx)(Ta.Z,{children:(0,d.jsx)(b.Trans,{id:"This will synchronise your selected content wherever you go."})}),(0,d.jsx)("div",{style:bA.getFormContainerStyle(z),children:(0,d.jsx)(AM.Z,{email:Q,onChangeEmail:$,onLoginWithProvider:Le,password:ne,onChangePassword:re,username:ae,onChangeUsername:le,optInNewsletterEmail:Ze,onChangeOptInNewsletterEmail:ke,isValidatingUsername:be,onChangeIsValidatingUsername:Ce,usernameAvailability:ge,onChangeUsernameAvailability:xe,onCreateAccount:Ie,createAccountInProgress:Z,error:U})})]}),(0,d.jsx)("div",{style:bA.bottomPageButtonContainer,children:(0,d.jsx)(L.sg,{children:(0,d.jsxs)(C.pJ,{expand:!0,children:[(0,d.jsx)(J.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Back"}),onClick:function(){return q("welcome")},fullWidth:!0}),(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Next"}),primary:!0,onClick:Ie,fullWidth:!0})]})})})]})});if("welcome"===Y){var Ae=j&&Date.now()-j.createdAt<6048e5;return(0,d.jsx)(vy,{title:null,flexBody:!0,children:(0,d.jsxs)(C.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:[(0,d.jsxs)(C.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:[(0,d.jsx)(F.Z,{size:"title",align:"center",children:!j||Ae?(0,d.jsx)(b.Trans,{id:"Welcome to GDevelop!"}):j&&j.username?(0,d.jsx)(b.Trans,{id:"Good to see you {0}!",values:{0:j.username}}):(0,d.jsx)(b.Trans,{id:"We have something new for you!"})}),(0,d.jsx)(pM,{style:bA.icon}),(0,d.jsx)(F.Z,{size:"body2",noMargin:!0,align:"center",children:(0,d.jsx)(b.Trans,{id:"We've made a selection of GDevelop content to help you on your game development journey."})}),(0,d.jsx)(L.hS,{}),(0,d.jsx)(F.Z,{size:"sub-title",align:"center",children:j?(0,d.jsx)(b.Trans,{id:"Answer our questionnaire and get recommendations according to your current objectives."}):(0,d.jsx)(b.Trans,{id:"Let's start by creating your account."})}),(0,d.jsx)("div",{style:bA.middlePageButtonContainer,children:j?(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Let's go!"}),primary:!0,onClick:function(){return q("survey")},fullWidth:!0})}):(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Let's go!"}),primary:!0,onClick:function(){return q("register")},fullWidth:!0}),(0,d.jsx)(J.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"I already have an account"}),onClick:function(){return q("login")},fullWidth:!0})]})})]}),(t={isAuthenticated:h.authenticated},!!t.isAuthenticated&&(0,vA.pf)()>15&&(0,d.jsx)("div",{style:bA.bottomPageButtonContainer,children:(0,d.jsx)(Wn.Z,{label:(0,d.jsx)(b.Trans,{id:"Don't show this screen on next startup"}),checked:!R.showGetStartedSectionByDefault,onCheck:function(e,t){t&&a(),D(!t)}})}))]})})}if("surveyFinished"===Y)return(0,d.jsx)(vy,{title:null,flexBody:!0,children:(0,d.jsxs)(C.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:[(0,d.jsx)(F.Z,{size:"title",align:"center",children:(0,d.jsx)(b.Trans,{id:"Alright let's see what we have for you..."})}),(0,d.jsx)("img",{src:"res/questionnaire/welcome-back.svg",alt:"You as the red hero coming back to life",style:bA.questionnaireFinishedImage}),(0,d.jsx)(F.Z,{size:"body2",noMargin:!0,align:"center",children:(0,d.jsx)(b.Trans,{id:"Just one second please..."})}),(0,d.jsx)(L.x1,{children:(0,d.jsx)(Sa.Z,{variant:"indeterminate",style:bA.linearProgress})})]})});return"recommendations"===Y?(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(vy,{title:(0,d.jsx)(b.Trans,{id:"Start making games"}),renderSubtitle:function(){return(0,d.jsx)(C.ep,{justifyContent:"flex-end",alignItems:"center",noColumnMargin:!0,noMargin:!0,children:(0,d.jsx)(Wn.Z,{label:(0,d.jsx)(b.Trans,{id:"Don't show this screen on next startup"}),checked:!R.showGetStartedSectionByDefault,onCheck:function(e,t){return D(!t)}})})},flexBody:!0,showUrgentAnnouncements:!0,children:(0,d.jsx)(xA,{authenticatedUser:h,selectInAppTutorial:n,subscriptionPlansWithPricingSystems:c,onOpenProfile:u,onStartSurvey:j?function(){q("survey")}:null,hasFilledSurveyAlready:!!j&&!!j.survey})})}):(0,d.jsx)(LM,{onCompleted:Me,onStarted:r})},jA=function(e){return(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Get started section"}),scope:"start-page-get-started",children:(0,d.jsx)(CA,(0,a.Z)({},e))})},yA={imageHeight:{small:80,medium:130,large:150,xlarge:170}},ZA=Array(6).fill(0).map((function(e){return Math.random()})),kA={itemTitle:{textOverflow:"ellipsis",overflow:"hidden",overflowWrap:"break-word",whiteSpace:"nowrap"},gridList:{position:"relative"},image:{display:"block",objectFit:"cover",border:"1px solid lightgrey",boxSizing:"border-box",aspectRatio:"16 / 9",transition:"opacity 0.3s ease-in-out"},error:{display:"flex",justifyContent:"center",alignItems:"center"},itemTitleContainer:{height:24},arrowContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"absolute",borderRadius:4},container:{display:"flex",position:"relative"},overlay:{position:"absolute",borderRadius:4,padding:"2px 4px",backdropFilter:"brightness(40%)",color:"white"}},wA=(0,OM.Z)({root:{overflowX:"scroll",overflowY:"hidden",flexWrap:"nowrap",scrollbarWidth:"none","-ms-overflow-style":"none","&::-webkit-scrollbar":{height:0}}}),TA=(0,OM.Z)((function(e){return(0,RM.Z)({root:{width:"unset !important",transition:"transform 0.3s ease-in-out","&:hover":{transform:"scale(1.02)"},"&:focus":{transform:"scale(1.02)",outline:"none"}},tile:{display:"flex",flexDirection:"column"}})})),SA=function(e){var t=e.content,n=e.position,r={top:"topLeft"===n||"topRight"===n?8:void 0,bottom:"bottomLeft"===n||"bottomRight"===n?8:void 0,left:"topLeft"===n||"bottomLeft"===n?8:void 0,right:"topRight"===n||"bottomRight"===n?8:void 0};return(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},kA.overlay),r),children:t})},PA=function(e){var t=e.title,n=e.items,r=e.additionalAction,i=e.browseAllLink,o=e.onBrowseAllClick,c=e.browseAllLabel,u=e.browseAllIcon,p=e.error,h=e.displayItemTitles,g=void 0===h||h,x=e.roundedImages,m=void 0!==x&&x,v=e.displayArrowsOnDesktop,C=void 0!==v&&v,j=l.useState(!1),y=(0,s.Z)(j,2),Z=y[0],k=y[1],T=l.useState(C),S=(0,s.Z)(T,2),P=S[0],E=S[1],I=l.useState(!1),M=(0,s.Z)(I,2),A=M[0],O=M[1],R=(0,w.U)(),D=R.windowSize,_=R.isMobile,B=l.useContext(f.Z),N=(0,OM.Z)((function(e){return(0,RM.Z)({root:{"&:hover":{filter:"dark"===e.palette.type?"brightness(130%)":"brightness(90%)"},transition:"filter 100ms ease"}})}))(),U=wA(),H=TA(),V=l.useRef(null),z=l.useState(null),W=(0,s.Z)(z,2),G=W[0],q=W[1],X=n&&n.length>0,K=n&&n.length>0?n:Array(6).fill({skeleton:!0,title:"",thumbnail:""}).map((function(e,t){return(0,a.Z)((0,a.Z)({},e),{},{id:"skeleton".concat(t)})})),Q=(0,mC.t)(),$=(0,Pt.Z)(),ee=l.useRef(new Set),te=l.useCallback((function(e){setTimeout((function(){Q&&(ee.current.add(e),$())}),50)}),[$,Q]),ne=yA.imageHeight[D],re=30,ie=16/9*ne,oe=ie+12,ae=ne+(g?28:4),se=l.useCallback((function(e){return(0,d.jsx)(Hg.W,{src:e.thumbnailUrl,style:(0,a.Z)((0,a.Z)({},kA.image),{},{opacity:ee.current.has(e.thumbnailUrl)?1:0,height:ne,minHeight:ne,width:ie,borderRadius:m?8:0}),alt:e.title,title:e.title,onLoad:function(){return te(e.thumbnailUrl)}})}),[ie,ne,m,te]),le=function(e){return function(){Y.ZP.openExternalURL(e)}},ce=l.useCallback((function(e){return e.skeleton||e.link||e.thumbnailUrl?e.thumbnailUrl||e.link?se(e):e.skeleton?(0,d.jsx)(Dj.Z,{variant:"rect",height:ne,width:ie,style:{borderRadius:m?8:0}}):void 0:null}),[se,ie,ne,m]),ue=l.useCallback((function(e,t){return g?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.LZ,{}),e.title?(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},kA.itemTitleContainer),{},{width:ie}),children:(0,d.jsx)(F.Z,{noMargin:!0,style:kA.itemTitle,children:e.title})}):(0,d.jsx)(Dj.Z,{variant:"rect",height:24,width:ie/3*(1+2*ZA[t])})]}):null}),[ie,g]),de=l.useCallback((function(e){return Math.round(e/oe)*oe}),[oe]),pe=l.useCallback((function(e){return Math.max(Math.floor(e.offsetWidth/oe),1)}),[oe]),fe=l.useCallback((function(e,t){var n=pe(t),r=n*oe,i=t.scrollLeft,o=Math.round(i/oe);return"right"===e&&o>K.length-n-1?0:de(t.scrollLeft+r*("left"===e?-1:1))}),[oe,K,de,pe]),he=l.useCallback((function(e){var t=V.current;if(t){var n=fe(e,t);t.scrollTo({left:n,behavior:"smooth"})}}),[fe]),ge=l.useCallback((function(){var e=V.current;if(e&&C){var t=0===e.scrollLeft,n=e.scrollLeft>=e.scrollWidth-e.clientWidth-5===P;t===Z&&k(!Z),n&&E(!P)}}),[Z,P,C]),xe=l.useCallback((function(){var e=V.current;e&&e.scrollTo({left:de(e.scrollLeft),behavior:"smooth"})}),[de]),me=l.useCallback((function(e,t){if(e.currentTarget!==G){var n=e.currentTarget,r=n.offsetParent;if(!r||!(r instanceof HTMLElement))return;var i=pe(r),o=n.getBoundingClientRect(),a=r.getBoundingClientRect(),s=Math.round(o.left-a.left)<0,l=Math.round(o.right-a.right)>=0;s?r.scroll({left:n.offsetLeft}):l&&r.scroll({left:oe*(t-i+1)})}}),[pe,G,oe]);return l.useEffect((function(){var e=V.current;e&&(e.addEventListener("scroll",ge),e.addEventListener("touchend",xe),e.addEventListener("touchleave",xe))}),[ge,xe]),(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsxs)(L.x1,{justifyContent:"space-between",alignItems:"center",children:[(0,d.jsx)(F.Z,{size:"section-title",children:t}),(0,d.jsxs)(L.x1,{children:[r&&(0,d.jsxs)(d.Fragment,{children:[r,(0,d.jsx)(L.LZ,{})]}),(0,d.jsx)(J.Z,{onClick:o||(i?le(i):function(){}),label:_?(0,d.jsx)(b.Trans,{id:"Browse"}):c||(0,d.jsx)(b.Trans,{id:"Browse all"}),leftIcon:u})]})]}),(0,d.jsxs)("div",{style:kA.container,onMouseEnter:function(){return O(!0)},onMouseLeave:function(){return O(!1)},children:[C&&A&&!_&&Z&&X&&(0,d.jsx)("div",{className:N.root,style:(0,a.Z)((0,a.Z)({},kA.arrowContainer),{},{backgroundColor:B.paper.backgroundColor.light,width:re,height:re,left:5,zIndex:1,top:"calc(50% - ".concat(Math.floor(15),"px)")}),onClick:function(){return he("left")},children:(0,d.jsx)(Co.Z,{})}),(0,d.jsx)("div",{style:{width:"100%"},children:p?(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},kA.error),{},{height:ae}),children:(0,d.jsx)(De.Z,{kind:"warning",children:p})}):(0,d.jsx)(pj.Z,{classes:U,cols:K.length,cellHeight:ae,spacing:12,style:kA.gridList,ref:V,children:K.map((function(e,t){return(0,d.jsxs)(xj.Z,{classes:H,tabIndex:0,onFocus:function(e){return me(e,t)},onMouseEnter:function(e){return q(e.currentTarget)},onMouseLeave:function(){return q(null)},onKeyPress:function(t){(0,kn.ph)(t)&&(e.link&&le(e.link)(),e.onClick&&e.onClick())},onClick:e.link?le(e.link):e.onClick?e.onClick:null,children:[ce(e),e.overlayText&&ee.current.has(e.thumbnailUrl)&&(0,d.jsx)(SA,{content:e.overlayText,position:e.overlayTextPosition||"bottomRight"}),ue(e,t)]},e.id)}))})}),C&&A&&!_&&P&&X&&(0,d.jsx)("div",{className:N.root,style:(0,a.Z)((0,a.Z)({},kA.arrowContainer),{},{backgroundColor:B.paper.backgroundColor.light,width:re,height:re,right:0,top:"calc(50% - ".concat(Math.floor(15),"px)")}),onClick:function(){return he("right")},children:(0,d.jsx)(Ct.Z,{})})]})]})},EA=function(e){if(!e.authenticated)return!1;var t=e.limits,n=e.cloudProjects;return!(!t||!n)&&n.filter((function(e){return!e.deletedAt})).length>=t.capabilities.cloudProjects.maximumCount},IA=function(e){var t=e.onUpgrade,n=e.limits.capabilities.cloudProjects,r=n.maximumCount,i=n.canMaximumCountBeIncreased;return(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,children:(0,d.jsxs)(De.Z,{kind:"warning",renderRightButton:i?function(){return(0,d.jsx)(T.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Check our premiums plans"}),onClick:t})}:void 0,children:[(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"You've reached your maximum storage of {maximumCount} cloud-based projects",values:{maximumCount:r}})}),(0,d.jsx)(F.Z,{children:i?(0,d.jsx)(b.Trans,{id:"Update to GDevelop Premium to get more storage, leaderboards, and one-click packagings!"}):(0,d.jsx)(b.Trans,{id:"To keep using GDevelop cloud, consider deleting old, unused projects."})})]})})})},MA=n(30227),LA=function(e){var t=e.status,n=l.useContext(f.Z),r="success"===t?n.statusIndicator.success:"error"===t?n.statusIndicator.error:n.statusIndicator.warning;return(0,d.jsx)("div",{style:{width:8,height:8,margin:6,borderRadius:6,backgroundColor:r}})},AA={listItem:{padding:0,borderRadius:8,overflowWrap:"anywhere"},projectSkeleton:{borderRadius:6},noProjectsContainer:{padding:10},avatar:{width:20,height:20},mobileIconContainer:{marginTop:4}},FA=function(e){var t=e.avatarUrl,n=e.status,r=e.tooltipMessage,i=e.hideStatus;return t?r?(0,d.jsx)(Sc,{overlap:"circle",color:n,invisible:i,children:(0,d.jsx)(Ze.ZP,{title:r,children:(0,d.jsx)(Ni.Z,{src:t,style:AA.avatar})})}):(0,d.jsx)(Sc,{overlap:"circle",color:n,invisible:i,children:(0,d.jsx)(Ni.Z,{src:t,style:AA.avatar})}):(0,d.jsx)(LA,{status:"success"})},OA=function(e){var t=e.file,n=e.lastModifiedInfo,r=e.storageProvider,i=e.authenticatedUser,o=e.currentFileMetadata,a=e.textColor,s=void 0===a?"primary":a,l=!!r&&"Cloud"===r.internalName,c=!!o&&o.fileIdentifier===t.fileMetadata.fileIdentifier,u=n?n.lastModifiedAt:t.fileMetadata.lastModifiedDate?t.fileMetadata.lastModifiedDate:null;if(!u)return null;var p=i.profile&&i.profile.email,f=i.profile&&i.profile.username,h=l&&p?(0,rc.y)(p,{size:40}):null,g=n?n.lastModifiedByUsername:f,x=n?n.lastModifiedByIconUrl:h,m=!!c&&!!o&&!!n&&o.version!==n.lastKnownVersionId;return(0,d.jsx)(b.I18n,{children:function(e){var t=e.i18n;return(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[c&&(0,d.jsx)(FA,{avatarUrl:h,tooltipMessage:f,status:"success"}),l&&(!c||m)&&(0,d.jsx)(FA,{avatarUrl:x,tooltipMessage:g,status:"error",hideStatus:!m}),(0,d.jsx)(F.Z,{noMargin:!0,color:s,children:c?(0,d.jsx)(b.Trans,{id:"Modifying"}):QL({i18n:t,dateAsNumber:u,sameDayFormat:"todayAndHour",dayBeforeFormat:"yesterdayAndHour",relativeLimit:"currentWeek",sameWeekFormat:"thisWeek"})})]})}})},RA=function(e){var t=e.path,n=Array.from(t).map((function(e,t){return["/","\\"].includes(e)?t:null})).filter(Boolean);return 0===n.length?t:n.reduce((function(e,r,i){var o=n[i+1];return[].concat((0,v.Z)(e),[(0,d.jsx)("wbr",{},r),t.substring(r,o||t.length)])}),[])},DA=function(e){var t=e.file,n=e.currentFileMetadata,r=e.lastModifiedInfo,i=e.storageProviders,o=e.onOpenRecentFile,s=e.isWindowSizeMediumOrLarger,c=e.isLoading,u=e.onOpenContextMenu,p=l.useContext(tr.ZP),f=function(e,t){return e.find((function(e){return e.internalName===t}))}(i,t.storageProviderName),h=(0,As.i)(l.useCallback((function(e){u(e,t)}),[u,t]));return(0,d.jsx)(b.I18n,{children:function(e){var i=e.i18n;return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(xe.Z,(0,a.Z)((0,a.Z)({button:!0,onClick:function(){o(t)},style:AA.listItem,onContextMenu:function(e){return u(e,t)}},h),{},{children:s?(0,d.jsxs)(C.pJ,{justifyContent:"flex-start",expand:!0,children:[(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsxs)(L.x1,{noMargin:!0,alignItems:"center",children:[f&&f.renderIcon&&(0,d.jsxs)(d.Fragment,{children:[f.renderIcon({size:"small"}),(0,d.jsx)(L.LZ,{})]}),(0,d.jsx)(F.Z,{noMargin:!0,children:t.fileMetadata.name||(0,d.jsx)(RA,{path:t.fileMetadata.fileIdentifier})}),c&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.LZ,{}),(0,d.jsx)(eo.Z,{size:16})]})]})}),(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(F.Z,{noMargin:!0,children:f?i._(f.name):""})}),(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(OA,{file:t,lastModifiedInfo:r,storageProvider:f,authenticatedUser:p,currentFileMetadata:n})}),(0,d.jsx)(ve.Z,{children:(0,d.jsx)(M.Z,{size:"small",edge:"end","aria-label":"menu",onClick:function(e){e.stopPropagation(),u(e,t)},children:(0,d.jsx)(Ls.Z,{})})})]}):(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsxs)(C.pJ,{alignItems:"start",children:[f&&f.renderIcon&&(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)("div",{style:AA.mobileIconContainer,children:f.renderIcon({size:"small"})})}),(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(F.Z,{noMargin:!0,children:t.fileMetadata.name||(0,d.jsx)(RA,{path:t.fileMetadata.fileIdentifier})}),(0,d.jsx)(OA,{file:t,lastModifiedInfo:r,storageProvider:f,authenticatedUser:p,currentFileMetadata:n,textColor:"secondary"})]}),c&&(0,d.jsx)(eo.Z,{size:24})]})})}),t.fileMetadata.fileIdentifier)})}})},_A=function(e){return(e.isMobile?52:36)-2*L.XW},BA=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,o,a,s,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.cloudProjects,r=t.profile,o=n.filter((function(e){return!!e.committedAt&&!!e.lastCommittedBy&&e.lastCommittedBy!==r.id})),0!==(a=new Set(o.map((function(e){return e.lastCommittedBy})).filter(Boolean))).size){e.next=5;break}return e.abrupt("return",{});case 5:return e.prev=5,e.next=8,(0,oc.TL)(Array.from(a));case 8:return s=e.sent,l={},n.forEach((function(e){if(e.lastCommittedBy&&e.committedAt){var t=s[e.lastCommittedBy];t&&(l[e.id]={lastModifiedByUsername:t.username,lastModifiedByIconUrl:t.iconUrl,lastModifiedAt:Date.parse(e.committedAt),lastKnownVersionId:e.currentVersion})}})),e.abrupt("return",l);case 14:return e.prev=14,e.t0=e.catch(5),console.error("Error while fetching public profiles of contributors of projects:",e.t0),e.abrupt("return",{});case 18:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}(),NA=function(e,t){return e.map((function(e){if(e.deletedAt)return null;var n={storageProviderName:"Cloud",fileMetadata:{fileIdentifier:e.id,lastModifiedDate:Date.parse(e.lastModifiedAt),name:e.name,gameId:e.gameId,version:e.currentVersion}};return t&&(n.fileMetadata.ownerId=t),n})).filter(Boolean)},UA=function(e){var t=e.receivedGameTemplates,n=e.privateGameTemplateListingDatas,r=e.exampleShortHeaders,i=e.onSelectPrivateGameTemplateListingData,o=e.onSelectExampleShortHeader,a=e.i18n,s=e.numberOfItemsExclusivelyInCarousel,l=e.numberOfItemsInCarousel,c=e.numberOfItemsInGrid,u=e.privateGameTemplatesPeriodicity;if(!r||!n)return{carouselItems:[],gridItems:[]};for(var p=r.filter((function(e){return!!e.previewImageUrls&&!!e.previewImageUrls[0]})),f=[],h=[],g=0,x=0,m=function(){var e=v%u===u-1,r=!1;if(v<l&&(r=e,f.push(e?function(e){var t=e.gameTemplateListingData,n=e.onSelectGameTemplate,r=e.i18n,i=e.receivedGameTemplates,o=!!i&&!!i.find((function(e){return e.id===t.id}));return{id:t.id,title:t.name,thumbnailUrl:t.thumbnailUrls[0],onClick:function(){(0,Ar.rG)({gameTemplateName:t.name,gameTemplateId:t.id,source:"homepage"}),n(t)},overlayText:(0,bj.MS)({i18n:r,productListingData:t,owned:o}),overlayTextPosition:"topLeft"}}({i18n:a,onSelectGameTemplate:i,gameTemplateListingData:n[x],receivedGameTemplates:t}):function(e){var t=e.exampleShortHeader,n=e.onSelectExample;return{id:t.id,title:t.name,onClick:function(){return n(t)},thumbnailUrl:t.previewImageUrls[0]}}({exampleShortHeader:p[g],onSelectExample:o}))),v>=s){if(e){var c=n[x];if(c){var m=!!t&&!!t.find((function(e){return e.id===c.id}));h.push((0,d.jsx)(Aj,{privateGameTemplateListingData:c,onSelect:function(){i(c)},owned:m},c.id)),r=!0}}if(!r){var b=p[g];h.push((0,d.jsx)(Fj,{exampleShortHeader:b,onSelect:function(){return o(b)}},b.name))}}if(r?x++:g++,g>=p.length&&x>=n.length)return 1},v=0;v<c+s&&!m();++v);return{carouselItems:f,gridItems:h}},HA=ae()("electron"),VA=ae()("path"),zA={listItem:{padding:0,marginTop:2,marginBottom:2,borderRadius:8,overflowWrap:"anywhere"},projectSkeleton:{borderRadius:6},noProjectsContainer:{padding:10},refreshIconContainer:{fontSize:20,display:"flex",alignItems:"center"},grid:{margin:0,overflow:"unset"}},WA=function(e){e.project;var t=e.currentFileMetadata,n=e.canOpen,r=e.onChooseProject,a=e.onOpenNewProjectSetupDialog,c=e.onSelectExampleShortHeader,u=e.onSelectPrivateGameTemplateListingData,p=e.onOpenRecentFile,f=e.storageProviders,h=e.i18n,g=e.onOpenExampleStore,x=e.onManageGame,m=e.canManageGame,v=l.useContext(se.ZP).getRecentProjectFiles,j=l.useContext(MA.I).exampleShortHeaders,y=(0,lt.Z)(),Z=y.showDeleteConfirmation,k=y.showAlert,S=l.useContext(se.ZP).removeRecentProjectFile,P=l.useState(null),E=(0,s.Z)(P,2),I=E[0],A=E[1],O=l.useState(!1),R=(0,s.Z)(O,2),D=R[0],_=R[1],B=l.useContext(Ry.mJ).privateGameTemplateListingDatas,N=l.useRef(null),U=l.useContext(tr.ZP),H=l.useContext(Ro.o).openSubscriptionDialog,V=l.useState(!1),z=(0,s.Z)(V,2),W=z[0],G=z[1],Y=l.useState(!1),q=(0,s.Z)(Y,2),X=q[0],K=q[1],Q=U.authenticated,$=U.profile,ee=U.cloudProjects,te=U.limits,ne=U.cloudProjectsFetchingErrorLabel,re=U.onCloudProjectsChanged,ie=U.onOpenLoginDialog,oe=(0,w.U)(),ae=oe.windowSize,le=oe.isMobile,ue=oe.isLandscape,pe=l.useState({}),fe=(0,s.Z)(pe,2),he=fe[0],ge=fe[1],me=function(e,t){switch(e){case"small":return t?4:1;case"medium":default:return 3;case"large":return 4;case"xlarge":return 5}}(ae,ue),ve=l.useMemo((function(){return function(e){var t=e.privateGameTemplateListingDatas,n=e.exampleShortHeaders,r=e.columnsCount;return Math.floor(((t?t.length:0)+(n?n.filter((function(e){return e.tags.includes("game")||e.tags.includes("Starter")})).length:0))/r)*r}({privateGameTemplateListingDatas:B,exampleShortHeaders:j,columnsCount:me})}),[B,j,me]),be=v().filter((function(e){return e.fileMetadata}));ee&&(be=be.concat(NA(ee))),l.useEffect((function(){var e=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee&&$){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,BA({cloudProjects:ee,profile:$});case 4:t=e.sent,ge(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[ee,$]);var Ce=EA(U),je=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o,a,s,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.fileMetadata,"Cloud"===n.storageProviderName){e.next=3;break}return e.abrupt("return");case 3:if(o=r.name){e.next=6;break}return e.abrupt("return");case 6:return a=t._({id:"delete"}),e.next=9,Z({title:{id:"Do you really want to permanently delete your project {projectName}?",values:{projectName:o}},message:{id:"You\u2019re about to permanently delete your project {projectName}. You will no longer be able to access it.",values:{projectName:o}},fieldMessage:{id:'To confirm, type "{translatedConfirmText}"',values:{translatedConfirmText:a}},confirmText:a,confirmButtonLabel:{id:"Delete project"}});case 9:if(e.sent){e.next=12;break}return e.abrupt("return");case 12:return e.prev=12,A(r.fileIdentifier),e.next=16,(0,tT.Hj)(U,r.fileIdentifier);case 16:U.onCloudProjectsChanged(),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(12),s=(0,_o.T)(e.t0),l=s&&403===s.status?{id:"You don't have permissions to delete this project."}:{id:"An error occurred when saving the project. Please try again later."},k({title:{id:"Unable to delete the project"},message:l});case 24:return e.prev=24,A(null),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[12,19,24,27]])})));return function(t,n){return e.apply(this,arguments)}}(),ye=function(e,n){if(!n)return[];var r=!!t&&t.fileIdentifier===n.fileMetadata.fileIdentifier,i=[{label:e._({id:"Open"}),click:function(){return p(n)}}];"Cloud"===n.storageProviderName?i.push({label:e._({id:"Delete"}),click:function(){return je(e,n)},enabled:!r}):"LocalFile"===n.storageProviderName?i.push.apply(i,[{label:e._({id:"Show in local folder"}),click:function(){return function(e){HA&&HA.shell.showItemInFolder(VA.resolve(e.fileMetadata.fileIdentifier))}(n)}},{label:e._({id:"Remove from list"}),click:function(){return S(n)}}]):i.push({label:e._({id:"Remove from list"}),click:function(){return S(n)}});var o=n.fileMetadata.gameId;return o&&i.push.apply(i,[{type:"separator"},{label:e._({id:"Manage game"}),click:function(){return x({gameId:o})},enabled:m({gameId:o})}]),i},Ze=l.useCallback((function(e,t){N.current&&N.current.open(e.clientX,e.clientY,{file:t})}),[]),ke=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W){e.next=2;break}return e.abrupt("return");case 2:if(Q){e.next=5;break}return K(!0),e.abrupt("return");case 5:return e.prev=5,G(!0),e.next=9,re();case 9:return e.prev=9,setTimeout((function(){return G(!1)}),2e3),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[5,,9,12]])}))),[re,W,Q]);be.sort((function(e,t){return e.fileMetadata.lastModifiedDate?t.fileMetadata.lastModifiedDate?t.fileMetadata.lastModifiedDate-e.fileMetadata.lastModifiedDate:-1:1}));var we=l.useMemo((function(){return UA({receivedGameTemplates:U.receivedGameTemplates,privateGameTemplateListingDatas:B,exampleShortHeaders:j,onSelectPrivateGameTemplateListingData:u,onSelectExampleShortHeader:c,i18n:h,numberOfItemsExclusivelyInCarousel:D?0:le?3:5,numberOfItemsInCarousel:D?0:le?8:12,numberOfItemsInGrid:D?ve:le?16:20,privateGameTemplatesPeriodicity:le?2:3})}),[U.receivedGameTemplates,D,j,c,u,B,h,le,ve]),Te=_A({isMobile:le}),Se=D?(0,d.jsx)(vy,{title:(0,d.jsx)(b.Trans,{id:"All templates"}),backAction:function(){return _(!1)},children:(0,d.jsxs)(my,{children:[(0,d.jsx)(pj.Z,{cols:me,style:zA.grid,cellHeight:"auto",spacing:2,children:we.gridItems}),(0,d.jsx)(L.x1,{justifyContent:"center",children:(0,d.jsx)(J.Z,{primary:!0,fullWidth:le,label:(0,d.jsx)(b.Trans,{id:"See more"}),onClick:g})})]})}):(0,d.jsxs)(vy,{title:(0,d.jsx)(b.Trans,{id:"My projects"}),showUrgentAnnouncements:!0,renderFooter:te&&Ce?function(){return(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(IA,{limits:te,onUpgrade:function(){return H({analyticsMetadata:{reason:"Cloud Project limit reached"}})}})})})}:void 0,children:[(0,d.jsxs)(my,{children:[(0,d.jsx)(PA,{title:(0,d.jsx)(b.Trans,{id:"Ready-made games"}),displayItemTitles:!1,browseAllLabel:(0,d.jsx)(b.Trans,{id:"Browse all templates"}),onBrowseAllClick:function(){return _(!0)},items:we.carouselItems,browseAllIcon:(0,d.jsx)(Ct.Z,{fontSize:"small"}),roundedImages:!0,displayArrowsOnDesktop:!0}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(by,{})})]}),(0,d.jsxs)(my,{children:[(0,d.jsxs)(C.ep,{justifyContent:"space-between",alignItems:"center",noMargin:!0,expand:!0,children:[(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[(0,d.jsx)(F.Z,{size:"section-title",children:(0,d.jsx)(b.Trans,{id:"My projects"})}),(0,d.jsx)(M.Z,{size:"small",onClick:ke,disabled:W,tooltip:{id:"Refresh cloud projects"},children:(0,d.jsx)("div",{style:zA.refreshIconContainer,children:(0,d.jsx)(Xi.Z,{fontSize:"inherit"})})})]})}),(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsxs)(C.pJ,{noMargin:!0,children:[(0,d.jsx)(T.Z,{primary:!0,fullWidth:!n,label:le?(0,d.jsx)(b.Trans,{id:"Create"}):(0,d.jsx)(b.Trans,{id:"Create a project"}),onClick:a,icon:(0,d.jsx)(vt.Z,{fontSize:"small"}),id:"home-create-project-button"}),n&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"or"})}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(Jx.Z,{secondary:!0,label:le?(0,d.jsx)(b.Trans,{id:"Open"}):(0,d.jsx)(b.Trans,{id:"Open a project"}),onClick:r})]})]})})]}),ne&&(0,d.jsx)(L.x1,{children:(0,d.jsx)(fr.Z,{onRetry:re,children:(0,d.jsx)(De.Z,{kind:"warning",children:ne})})}),"loggingIn"===U.loginState&&0===be.length?new Array(10).fill(0).map((function(e,t){return(0,d.jsx)(xe.Z,{style:zA.listItem,children:(0,d.jsx)(L.x1,{expand:!0,children:(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(Dj.Z,{variant:"rect",height:Te,style:zA.projectSkeleton})})})},"skeleton-".concat(t))})):be.length>0?(0,d.jsx)(L.x1,{children:(0,d.jsxs)(L.sg,{noMargin:!0,expand:!0,children:[!le&&(0,d.jsxs)(L.x1,{justifyContent:"space-between",children:[(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(F.Z,{color:"secondary",children:(0,d.jsx)(b.Trans,{id:"File name"})})}),(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(F.Z,{color:"secondary",children:(0,d.jsx)(b.Trans,{id:"Location"})})}),(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(F.Z,{color:"secondary",children:(0,d.jsx)(b.Trans,{id:"Last edited"})})})]}),(0,d.jsx)(ce.Z,{children:be.map((function(e){return(0,d.jsx)(DA,{file:e,onOpenContextMenu:Ze,isLoading:I===e.fileMetadata.fileIdentifier,currentFileMetadata:t,storageProviders:f,isWindowSizeMediumOrLarger:!le,onOpenRecentFile:p,lastModifiedInfo:he[e.fileMetadata.fileIdentifier]},e.fileMetadata.fileIdentifier)}))})]})}):(0,d.jsx)(L.x1,{children:(0,d.jsx)(xe.Z,{style:zA.listItem,children:(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsxs)(de.Z,{variant:"outlined",background:"dark",style:zA.noProjectsContainer,children:[(0,d.jsx)(Ta.Z,{children:(0,d.jsx)(b.Trans,{id:"No projects yet."})}),(0,d.jsx)(Ta.Z,{children:(0,d.jsx)(b.Trans,{id:"Create your first project using one of our templates or start from scratch."})})]})})})})]}),(0,d.jsxs)(my,{children:[(0,d.jsx)(L.x1,{alignItems:"center",noMargin:!0,expand:!0,children:(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(F.Z,{size:"section-title",children:(0,d.jsx)(b.Trans,{id:"Start with a template"})})})}),(0,d.jsx)(pj.Z,{cols:me,style:zA.grid,cellHeight:"auto",spacing:2,children:we.gridItems})]})]});return(0,d.jsxs)(d.Fragment,{children:[Se,(0,d.jsx)(ET.Z,{message:(0,d.jsx)(b.Trans,{id:"Log in to see your cloud projects."}),visible:X,hide:function(){return K(!1)},duration:5e3,onActionClick:ie,actionLabel:(0,d.jsx)(b.Trans,{id:"Log in"})}),(0,d.jsx)(za.Z,{ref:N,buildMenuTemplate:function(e,t){var n=t.file;return ye(e,n)}})]})},GA=function(e){return(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Build section"}),scope:"start-page-build",children:(0,d.jsx)(WA,(0,a.Z)({},e))})},YA={border:0},qA=function(){var e=l.useContext(f.Z).palette.type,t=l.useState(null),n=(0,s.Z)(t,2),r=n[0],i=n[1];return window.addEventListener("message",(function(e){"https://gd.games"===e.origin&&"set-embedded-height"===e.data.id&&i(e.data.height)})),(0,d.jsx)(vy,{title:(0,d.jsx)(b.Trans,{id:"Play!"}),flexBody:!0,subtitleText:(0,d.jsx)(b.Trans,{id:"Explore games made by others"}),children:(0,d.jsxs)(my,{expand:!0,children:[(0,d.jsx)("iframe",{src:"https://gd.games/embedded/".concat(e),title:"gdgames",style:(0,a.Z)((0,a.Z)({},YA),{},{height:r}),scrolling:"no"}),!r&&(0,d.jsx)(Xe.Z,{})]})})},XA=function(){return(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Play section"}),scope:"start-page-play",children:(0,d.jsx)(qA,{})})},KA=n(20851),JA=n(1879),QA=n(65911),$A=n(75087),eF=n(78966),tF=function(e){var t=e.game,n=e.onClose,r=l.useState(!1),i=(0,s.Z)(r,2),o=i[0],a=i[1],c=(0,Ii.IH)(t);return c?(0,d.jsxs)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Share your game"}),open:!0,id:"game-card-share-dialog",minHeight:"sm",maxWidth:"md",actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Close"}),onClick:n},"close")],onRequestClose:n,children:[(0,d.jsxs)(L.sg,{children:[(0,d.jsx)($A.Z,{url:c}),navigator.share?(0,d.jsx)(eF.Z,{url:c}):(0,d.jsx)(QA.Z,{url:c})]}),o&&(0,d.jsx)(De.Z,{kind:"error",onHide:function(){return a(!1)},children:(0,d.jsx)(b.Trans,{id:"An error occurred while generating the game url with the currently set game slug."})})]}):null},nF=n(83689),rF={discoverable:{true:{id:"You are about to make this game discoverable on gd.games categories pages. Do you want to continue?"},false:{id:"You are about to hide this game from gd.games categories pages. Do you want to continue?"}},acceptsBuildComments:{true:{id:"You are about to activate a feedback banner on all builds of this game. By doing this you're allowing feedback from any player who has access to your gd.games build URLs. Do you want to continue?"},false:{id:"You are about to de-activate the feedback banner on all your gd.games build pages. Do you want to continue ?"}},acceptsGameComments:{true:{id:"You are about to activate a feedback banner on your gd.games game page. By doing this you will receive feedback from any gd.games visitor. Do you want to continue?"},false:{id:"You are about to de-activate the feedback banner on your gd.games game page. Do you want to continue ?"}}},iF=function(e){var t=e.game,n=e.isCurrentGame,a=e.onOpenGameManager,c=e.onUpdateGame,u=function(){var e=(0,Ii.IH)(t);e&&Y.ZP.openExternalURL(e)},p=l.useState(!1),f=(0,s.Z)(p,2),h=f[0],g=f[1],x=l.useState(null),m=(0,s.Z)(x,2),v=m[0],j=m[1],y=l.useState(!1),Z=(0,s.Z)(y,2),k=Z[0],w=Z[1],S=l.useContext(tr.ZP),P=S.getAuthorizationHeader,E=S.profile,I=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,o,a){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E){e.next=2;break}return e.abrupt("return");case 2:if(Y.ZP.showConfirmDialog(n._(rF[o][a.toString()]))){e.next=5;break}return e.abrupt("return");case 5:return j(o),e.prev=6,e.next=9,(0,Ii.Bi)(P,E.id,t.id,(0,r.Z)({},o,a));case 9:return e.next=11,c();case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),console.error("Unable to update property ".concat(o),e.t0),(0,Ur.gR)({message:n._({id:"Unable to update game."})+" "+n._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"game-dashboard-update-game-error"});case 17:j(null);case 18:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t,n,r){return e.apply(this,arguments)}}(),A=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.ZP.showConfirmDialog(n._({id:"Are you sure you want to unregister this game?"})+"\n\n"+n._({id:"It will disappear from your games dashboard and you won't get access to analytics, unless you register it again."}))){e.next=3;break}return e.abrupt("return");case 3:if(E){e.next=5;break}return e.abrupt("return");case 5:return r=E.id,w(!0),e.prev=7,e.next=10,(0,Ii.TT)(P,r,t.id);case 10:return e.next=12,c();case 12:e.next=20;break;case 14:e.prev=14,e.t0=e.catch(7),console.error("Unable to delete the game:",e.t0),(o=(0,_o.T)(e.t0))&&"game-deletion/leaderboards-exist"===o.code?(0,Ur.gR)({message:n._({id:"You cannot unregister a game that has active leaderboards. To delete them, go in the Leaderboards tab, and delete them one by one."}),rawError:e.t0,errorId:"game-dashboard-unregister-game-active-leaderboards-error"}):(0,Ur.gR)({message:n._({id:"Unable to delete the game."})+" "+n._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"game-dashboard-unregister-game-active-leaderboards-error"}),w(!1);case 20:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t){return e.apply(this,arguments)}}();return(0,d.jsx)(b.I18n,{children:function(e){var r=e.i18n;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(wa.Z,{background:n?"dark":"medium",cardCornerAction:(0,d.jsx)(Ig.Z,{element:(0,d.jsx)(M.Z,{size:"small",disabled:k,children:(0,d.jsx)(Ls.Z,{})}),buildMenuTemplate:function(e){return[{label:e._({id:"Game details"}),click:function(){return a("details")}},{label:e._({id:"Game builds"}),click:function(){return a("builds")}},{label:e._({id:"Game feedbacks"}),click:function(){return a("feedback")}},{label:e._({id:"Game analytics"}),click:function(){return a("analytics")}},{label:e._({id:"Game leaderboards"}),click:function(){return a("leaderboards")}},{type:"separator"},{label:e._({id:"Unregister game"}),click:function(){A(e)}}]}}),header:(0,d.jsxs)(L.x1,{children:[t.publicWebBuildId&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(F.Z,{size:"body2",noMargin:!0,displayInlineAsSpan:!0,children:t.discoverable?(0,d.jsx)(b.Trans,{id:"Public on gd.games"}):(0,d.jsx)(b.Trans,{id:"Not visible on gd.games"})}),(0,d.jsx)(L.LZ,{})]}),(0,d.jsx)(Ta.Z,{children:(0,d.jsx)(b.Trans,{id:"Created on {0}",values:{0:r.date(1e3*t.createdAt)}})})]}),children:(0,d.jsxs)(C.ep,{noMargin:!0,children:[(0,d.jsx)(L.sg,{noMargin:!0,alignItems:"center",children:(0,d.jsx)(JA.J,{gameName:t.gameName,thumbnailUrl:t.thumbnailUrl,background:n?"medium":"light"})}),(0,d.jsx)(L.LZ,{}),(0,d.jsxs)(L.sg,{expand:!0,justifyContent:"space-between",children:[(0,d.jsxs)(C.ep,{noMargin:!0,alignItems:"flex-start",children:[(0,d.jsx)(KA.Z,{title:t.gameName,subheader:n&&(0,d.jsx)(Li.Z,{size:"small",label:(0,d.jsx)(b.Trans,{id:"Currently edited"}),color:"primary"})}),(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,d.jsxs)(C.ep,{justifyContent:"flex-end",noColumnMargin:!0,children:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Manage game"}),onClick:function(){return a("details")}}),(0,d.jsxs)(C.pJ,{noMargin:!0,children:[(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,children:(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Open in browser"}),onClick:u,primary:!0,disabled:!t.publicWebBuildId||k})}),(0,d.jsx)(M.Z,{size:"small",disabled:!t.publicWebBuildId||k,onClick:function(){return g(!0)},tooltip:{id:"Share"},children:(0,d.jsx)(nF.Z,{})})]})]})})]}),(0,d.jsxs)(L.sg,{noMargin:!0,justifyContent:"flex-start",children:[(0,d.jsx)(ee.Z,{labelPosition:"left",onToggle:function(){I(r,"discoverable",!t.discoverable)},toggled:!!t.discoverable,label:(0,d.jsx)(b.Trans,{id:"Make discoverable on gd.games"}),disabled:"discoverable"===v||k}),(0,d.jsx)(ee.Z,{labelPosition:"left",onToggle:function(){I(r,"acceptsGameComments",!t.acceptsGameComments)},toggled:!!t.acceptsGameComments,label:(0,d.jsx)(b.Trans,{id:"Show feedback banner on gd.games game page"}),disabled:"acceptsGameComments"===v||k}),(0,d.jsx)(ee.Z,{labelPosition:"left",onToggle:function(){I(r,"acceptsBuildComments",!t.acceptsBuildComments)},toggled:!!t.acceptsBuildComments,label:(0,d.jsx)(b.Trans,{id:"Ask for feedback on all build pages"}),disabled:"acceptsBuildComments"===v||k})]})]})]})},t.id),h&&(0,d.jsx)(tF,{game:t,onClose:function(){return g(!1)}})]})}})},oF={noGameMessageContainer:{padding:10}},aF=function(e){var t=e.project,n=e.games,r=e.searchText,i=e.searchClient,o=e.currentPage;if(r)return i.search((0,qd.dr)(r)).map((function(e){return e.item}));var a=t?t.getProjectUuid():null,s=n.find((function(e){return!!a&&e.id===a}));return(s?[s].concat((0,v.Z)(n.filter((function(e){return e.id!==s.id})))):n).slice(10*o,10*(o+1))},sF=function(e){var t=e.project,n=e.games,r=e.onRefreshGames,c=e.onOpenGame,u=l.useContext(Ja.Z),p=u.routeArguments,f=u.addRouteArguments,h=u.removeRouteArguments,g=l.useContext(tr.ZP),x=g.getAuthorizationHeader,m=g.profile,v=(0,lt.Z)(),j=v.showAlert,y=v.showConfirmation,Z=l.useState(!1),k=(0,s.Z)(Z,2),w=k[0],T=k[1],S=l.useState(""),P=(0,s.Z)(S,2),E=P[0],I=P[1],A=l.useState(0),O=(0,s.Z)(A,2),R=O[0],D=O[1],_=l.useMemo((function(){return new Od.Z(n,(0,a.Z)((0,a.Z)({},qd.KE),{},{keys:[{name:"gameName",weight:1}]}))}),[n]),B=l.useState(aF({project:t,games:n,searchText:E,searchClient:_,currentPage:R})),N=(0,s.Z)(B,2),U=N[0],H=N[1],V=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var n,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m&&t){e.next=2;break}return e.abrupt("return");case 2:return n=m.id,e.prev=3,T(!0),e.next=7,(0,Ii.r$)(x,n,{gameId:t.getProjectUuid(),authorName:t.getAuthor()||"Unspecified publisher",gameName:t.getName()||"Untitled game",templateSlug:t.getTemplateSlug()});case 7:return e.next=9,r();case 9:case 18:e.next=22;break;case 11:if(e.prev=11,e.t0=e.catch(3),console.error("Unable to register the game.",e.t0),!(o=(0,_o.T)(e.t0))||403!==o.status){e.next=20;break}return e.next=18,j({title:{id:"Game already registered"},message:{id:"The project currently opened is registered online but you don't have access to it. Ask the original owner of the game to share it with you to be able to manage it."}});case 20:return e.next=22,j({title:{id:"Unable to register the game"},message:{id:"An error happened while registering the game. Verify your internet connection or retry later."}});case 22:return e.prev=22,T(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[3,11,22,25]])}))),[x,m,t,j,r]);l.useEffect((function(){var e=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p["game-id"],!n||!r){e.next=20;break}if(o=n.find((function(e){return e.id===r})),h(["game-id"]),!o){e.next=8;break}c(o),e.next=20;break;case 8:if(!t||t.getProjectUuid()!==r){e.next=18;break}return e.next=11,y({title:{id:"Game not found"},message:{id:"This project is not registered online. Register it now to get access to leaderboards, player accounts, analytics and more!"},confirmButtonLabel:{id:"Register"}});case 11:if(e.sent){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,V();case 16:e.next=20;break;case 18:return e.next=20,j({title:{id:"Game not found"},message:{id:"The game you're trying to open is not registered online. Open the project file, then register it before continuing."}});case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[n,p,h,V,y,j,t,c]);var z=(0,Ea.N)((function(){H(aF({project:t,games:n,searchText:E,searchClient:_,currentPage:R}))}),E?250:150);l.useEffect(z,[z,E,n,R]);var W=t?t.getProjectUuid():null;return(0,d.jsxs)(C.ak,{noMargin:!0,children:[!w&&(0,d.jsx)(ko.C,{project:t,hideLoader:!0,onGameRegistered:r}),(0,d.jsxs)(L.x1,{noMargin:!0,alignItems:"center",children:[(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,children:(0,d.jsx)(st.Z,{value:E,onChange:I,onRequestSearch:function(){},placeholder:{id:"Search by name"}})}),(0,d.jsx)(M.Z,{tooltip:{id:"Previous page"},onClick:function(){return D((function(e){return e-1}))},disabled:!!E||0===R,children:(0,d.jsx)(Co.Z,{})}),(0,d.jsx)(F.Z,{noMargin:!0,style:{opacity:E?.6:1},children:E?1:R+1}),(0,d.jsx)(M.Z,{tooltip:{id:"Next page"},onClick:function(){return D((function(e){return e+1}))},disabled:!!E||10*(R+1)>=n.length,children:(0,d.jsx)(Ct.Z,{})})]}),U.length>0?U.map((function(e){return(0,d.jsx)(iF,{isCurrentGame:!!W&&e.id===W,game:e,onOpenGameManager:function(t){f({"games-dashboard-tab":t}),c(e)},onUpdateGame:r},e.id)})):E?(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,d.jsx)(de.Z,{variant:"outlined",background:"dark",style:oF.noGameMessageContainer,children:(0,d.jsx)(Ta.Z,{children:(0,d.jsx)(b.Trans,{id:"No game matching your search."})})})}):null]})},lF=(0,xg.vA)("/publishing/"),cF={backgroundMessage:{padding:16},buttonContainer:{minWidth:150},gameDetailsContainer:{padding:8,flex:1,display:"flex"}},uF=function(e){var t=e.project,n=e.games,r=e.onRefreshGames,i=e.gamesFetchingError,o=e.openedGame,a=e.setOpenedGame,s=e.currentTab,c=e.setCurrentTab,u=l.useContext(tr.ZP),p=u.profile,f=u.onOpenCreateAccountDialog,h=u.onOpenLoginDialog;l.useEffect((function(){r()}),[]);var g=l.useCallback((function(){c("details"),a(null)}),[c,a]);return o?(0,d.jsxs)(vy,{flexBody:!0,title:null,backAction:g,children:[(0,d.jsx)(F.Z,{size:"title",allowSelection:!0,children:o.gameName}),(0,d.jsx)(L.hS,{}),(0,d.jsx)(my,{expand:!0,children:(0,d.jsx)(de.Z,{background:"dark",square:!1,style:cF.gameDetailsContainer,children:(0,d.jsxs)(C.ak,{noMargin:!0,expand:!0,noOverflowParent:!0,children:[(0,d.jsx)(le.m,{value:s,onChange:c,options:es}),(0,d.jsx)(ts,{game:o,project:t,onGameUpdated:r,onGameDeleted:function(){g(),r()},onLoading:function(){},currentTab:s,setCurrentTab:c,analyticsSource:"homepage"})]})})})]}):(0,d.jsx)(vy,{flexBody:!0,title:(0,d.jsx)(b.Trans,{id:"Manage Games"}),children:(0,d.jsx)(my,{expand:!0,children:p?n?0===n.length?(0,d.jsx)(de.Z,{variant:"outlined",background:"dark",style:cF.backgroundMessage,children:(0,d.jsx)(C.ak,{noMargin:!0,children:(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(L.x1,{noMargin:!0,justifyContent:"center",children:(0,d.jsx)(Ta.Z,{children:(0,d.jsx)(b.Trans,{id:"Learn how many users are playing your game, control published versions, and collect feedback from play testers."})})}),(0,d.jsx)(L.x1,{noMargin:!0,justifyContent:"center",children:(0,d.jsx)(Ta.Z,{children:(0,d.jsx)(b.Trans,{id:"<0>Share a project</0> to get started.",components:[(0,d.jsx)(Ie.Z,{href:lF,onClick:function(){return Y.ZP.openExternalURL(lF)}})]})})})]})})}):(0,d.jsx)(sF,{project:t,games:n,onRefreshGames:r,onOpenGame:a}):i?(0,d.jsx)(fr.Z,{onRetry:r,children:(0,d.jsx)(b.Trans,{id:"Can't load the games. Verify your internet connection or retry later."})}):(0,d.jsx)(L.sg,{expand:!0,justifyContent:"center",children:(0,d.jsx)(Xe.Z,{})}):(0,d.jsx)(de.Z,{variant:"outlined",background:"dark",style:cF.backgroundMessage,children:(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(Ta.Z,{children:(0,d.jsx)(b.Trans,{id:"Log-in or create an account to access your <0>published games</0> retention metrics, and player feedback.",components:[(0,d.jsx)(Ie.Z,{href:lF,onClick:function(){return Y.ZP.openExternalURL(lF)}})]})}),(0,d.jsxs)(C.ep,{noMargin:!0,noColumnMargin:!0,justifyContent:"center",children:[(0,d.jsx)("div",{style:cF.buttonContainer,children:(0,d.jsx)(J.Z,{fullWidth:!0,primary:!0,label:(0,d.jsx)(b.Trans,{id:"Login"}),onClick:h})}),(0,d.jsx)("div",{style:cF.buttonContainer,children:(0,d.jsx)(T.Z,{fullWidth:!0,primary:!0,label:(0,d.jsx)(b.Trans,{id:"Create an account"}),onClick:f})})]})]})})})})},dF=function(e){return(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Manage section"}),scope:"start-page-manage",children:(0,d.jsx)(uF,(0,a.Z)({},e))})},pF=n(3570),fF=n(44579),hF=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{children:(0,d.jsx)("path",{fill:"#6A3BEB",d:"M17,12V3A1,1 0 0,0 16,2H3A1,1 0 0,0 2,3V17L6,13H16A1,1 0 0,0 17,12M21,6H19V15H6V17A1,1 0 0,0 7,18H18L22,22V7A1,1 0 0,0 21,6Z"})}))})),gF=n(45658),xF=n(42839),mF=n(22853),vF=n(44023),bF=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.00004 7.33331C8.07957 7.33331 7.33337 8.0795 7.33337 8.99998V19C7.33337 19.9205 8.07956 20.6666 9.00004 20.6666H12.5C12.7884 20.6666 13.0627 20.7911 13.2526 21.0081L16 24.1481L18.7475 21.0081C18.9374 20.7911 19.2117 20.6666 19.5 20.6666H23C23.9206 20.6666 24.6667 19.9205 24.6667 19V8.99998C24.6667 8.07949 23.9205 7.33331 23 7.33331H9.00004ZM5.33337 8.99998C5.33337 6.97493 6.975 5.33331 9.00004 5.33331H23C25.0251 5.33331 26.6667 6.97494 26.6667 8.99998V19C26.6667 21.0251 25.0251 22.6666 23 22.6666H19.9538L16.7526 26.3252C16.5627 26.5422 16.2884 26.6666 16 26.6666C15.7117 26.6666 15.4374 26.5422 15.2475 26.3252L12.0463 22.6666H9.00004C6.97501 22.6666 5.33337 21.0251 5.33337 19V8.99998Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.6667 14.6666C10.6667 13.9304 11.2636 13.3333 12 13.3333C12.7365 13.3333 13.3334 13.9304 13.3334 14.6666C13.3334 15.4029 12.7365 16 12 16C11.2636 16 10.6667 15.4029 10.6667 14.6666Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.6667 14.6666C14.6667 13.9303 15.2637 13.3333 16 13.3333C16.7364 13.3333 17.3334 13.9303 17.3334 14.6666C17.3334 15.403 16.7364 16 16 16C15.2637 16 14.6667 15.403 14.6667 14.6666Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.6667 14.6666C18.6667 13.9303 19.2637 13.3333 20 13.3333C20.7364 13.3333 21.3334 13.9303 21.3334 14.6666C21.3334 15.403 20.7364 16 20 16C19.2637 16 18.6667 15.403 18.6667 14.6666Z",fill:"currentColor"})]}))})),CF=function(e){var t=e.user,n=e.avatarSize,r=e.expand,i=l.useContext(vr.Z).openUserPublicProfile;return(0,d.jsx)(O.Z,{onClick:t?function(){return i(t.id)}:void 0,style:{width:r?"100%":void 0},children:(0,d.jsxs)(C.pJ,{alignItems:"center",justifyContent:"flex-start",expand:!0,noMargin:!0,children:[(0,d.jsx)(Ni.Z,{src:t?t.iconUrl:void 0,style:{width:n,height:n}}),(0,d.jsx)(F.Z,{size:"body",children:t?t.username||(0,d.jsx)("i",{children:(0,d.jsx)(b.Trans,{id:"Anonymous"})}):(0,d.jsx)(Dj.Z,{variant:"rect",height:20,width:100})})]})})},jF={avatar:{width:16,height:16},paper:{flex:1},entryRow:{borderBottom:"1px solid black"},rankColumn:{width:30,textAlign:"center"},playerColumn:{},scoreColumn:{width:30,textAlign:"center"}},yF={userPublicProfile:null,count:null},ZF=function(e){var t=e.userLeaderboard,n=e.displayEntriesCount,r=l.useContext(f.Z);return(0,d.jsx)(b.I18n,{children:function(e){var i=e.i18n;return(0,d.jsx)(de.Z,{background:"medium",style:jF.paper,children:(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(F.Z,{size:"sub-title",align:"center",children:t?(0,uc.a)(i,t.displayNameByLocale):"-"}),(0,d.jsxs)("table",{children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{style:jF.rankColumn,children:(0,d.jsx)(F.Z,{size:"body2",color:"secondary",children:"#"})}),(0,d.jsx)("th",{style:jF.playerColumn,children:(0,d.jsx)(F.Z,{size:"body2",color:"secondary",align:"left",children:(0,d.jsx)(b.Trans,{id:"Player"})})}),(0,d.jsx)("th",{style:jF.scoreColumn,children:(0,d.jsx)(bF,{})})]})}),(0,d.jsx)("tbody",{children:(t?t.topUserCommentQualityRatings:new Array(n).fill(yF)).slice(0,n).map((function(e,t){return(0,d.jsxs)("tr",{style:(0,a.Z)((0,a.Z)({},jF.entryRow),{},{borderColor:r.toolbar.separatorColor}),children:[(0,d.jsx)("td",{style:jF.rankColumn,children:(0,d.jsx)(F.Z,{children:t+1})}),(0,d.jsx)("td",{style:jF.playerColumn,children:(0,d.jsx)(CF,{avatarSize:20,user:e.userPublicProfile,expand:!0})}),(0,d.jsx)("td",{style:jF.scoreColumn,children:(0,d.jsx)(F.Z,{children:e.count?e.count:"-"})})]},t)}))})]})]})})}})},kF={avatar:{width:16,height:16},paper:{flex:1},entryRow:{borderBottom:"1px solid black"},rankColumn:{width:30,textAlign:"center"},gameColumn:{},scoreColumn:{width:30,textAlign:"center"},gameThumbnailContainer:{width:100,height:28,display:"inline-block",overflow:"hidden",verticalAlign:"middle",marginRight:5},gameThumbnail:{width:100,height:28,objectFit:"cover"},fullWidthButtonSupportingEllipsisInATable:{justifyContent:"flex-start",height:32,width:0,minWidth:"100%"}},wF={publicGame:null,count:null},TF=function(e){var t=e.gameLeaderboard,n=e.displayEntriesCount,r=l.useContext(f.Z);return(0,d.jsx)(b.I18n,{children:function(e){var i=e.i18n;return(0,d.jsx)(de.Z,{background:"medium",style:kF.paper,children:(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(F.Z,{size:"sub-title",align:"center",children:t?(0,uc.a)(i,t.displayNameByLocale):"-"}),(0,d.jsxs)("table",{children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{style:kF.rankColumn,children:(0,d.jsx)(F.Z,{size:"body2",color:"secondary",children:"#"})}),(0,d.jsx)("th",{style:kF.gameColumn,children:(0,d.jsx)(F.Z,{size:"body2",color:"secondary",align:"left",children:(0,d.jsx)(b.Trans,{id:"Game"})})}),(0,d.jsx)("th",{style:kF.scoreColumn,children:(0,d.jsx)(bF,{})})]})}),(0,d.jsx)("tbody",{children:(t?t.topGameCommentQualityRatings:new Array(n).fill(wF)).slice(0,n).map((function(e,t){var n=(0,Ii.hO)(e.publicGame),i=e.publicGame?e.publicGame.gameName:"";return(0,d.jsxs)("tr",{style:(0,a.Z)((0,a.Z)({},kF.entryRow),{},{borderColor:r.toolbar.separatorColor}),children:[(0,d.jsx)("td",{style:kF.rankColumn,children:(0,d.jsx)(F.Z,{children:t+1})}),(0,d.jsx)("td",{style:kF.gameColumn,children:e.publicGame?(0,d.jsx)(O.Z,{onClick:n?function(){return Y.ZP.openExternalURL(n)}:void 0,style:kF.fullWidthButtonSupportingEllipsisInATable,children:(0,d.jsxs)(F.Z,{style:B.t,noMargin:!0,tooltip:i,children:[e.publicGame&&e.publicGame.thumbnailUrl?(0,d.jsx)("div",{style:kF.gameThumbnailContainer,children:(0,d.jsx)("img",{src:e.publicGame.thumbnailUrl,style:kF.gameThumbnail,alt:i,title:i})}):null,i]})}):(0,d.jsx)(Dj.Z,{variant:"rect",width:100,height:28})}),(0,d.jsx)("td",{style:kF.scoreColumn,children:(0,d.jsx)(F.Z,{children:e.count?e.count:"-"})})]},t)}))})]})]})})}})},SF=n(48025),PF={display:"flex",flexDirection:"column",flex:1},EF=function(){var e=l.useContext(SF.x),t=e.fetchCommunityLeaderboards,n=e.gameLeaderboards,r=e.userLeaderboards;l.useEffect((function(){t()}),[t]);var i=(0,w.U)().windowSize;return(0,d.jsxs)(C.ep,{noColumnMargin:!0,forceMobileLayout:"medium"===i,children:[(0,d.jsxs)("div",{style:(0,a.Z)((0,a.Z)({},PF),{},{flex:1}),children:[(0,d.jsx)(de.Z,{background:"light",children:(0,d.jsx)(L.x1,{expand:!0,justifyContent:"center",noMargin:!0,children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Daily"})})})}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(C.ep,{noColumnMargin:!0,noMargin:!0,children:(0,d.jsx)(TF,{gameLeaderboard:n&&n.find((function(e){return e.name.startsWith("daily")}))||null,displayEntriesCount:5})})]}),(0,d.jsxs)("div",{style:(0,a.Z)((0,a.Z)({},PF),{},{flex:2}),children:[(0,d.jsx)(de.Z,{background:"light",children:(0,d.jsx)(L.x1,{expand:!0,justifyContent:"center",noMargin:!0,children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Weekly"})})})}),(0,d.jsx)(L.LZ,{}),(0,d.jsxs)(C.ep,{noColumnMargin:!0,noMargin:!0,children:[(0,d.jsx)(ZF,{userLeaderboard:r&&r.find((function(e){return e.name.startsWith("weekly")}))||null,displayEntriesCount:5}),(0,d.jsx)(TF,{gameLeaderboard:n&&n.find((function(e){return e.name.startsWith("weekly")}))||null,displayEntriesCount:5})]})]}),(0,d.jsxs)("div",{style:(0,a.Z)((0,a.Z)({},PF),{},{flex:1}),children:[(0,d.jsx)(de.Z,{background:"light",children:(0,d.jsx)(L.x1,{expand:!0,justifyContent:"center",noMargin:!0,children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Monthly"})})})}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(C.ep,{noColumnMargin:!0,noMargin:!0,children:(0,d.jsx)(ZF,{userLeaderboard:r&&r.find((function(e){return e.name.startsWith("monthly")}))||null,displayEntriesCount:5})})]})]})},IF={list:{width:"100%"}},MF=[{onClick:function(){return Y.ZP.openExternalURL("https://forum.gdevelop.io")},icon:(0,d.jsx)(hF,{fontSize:"small"}),label:(0,d.jsx)(b.Trans,{id:"GDevelop Forums"})},{onClick:function(){return Y.ZP.openExternalURL("https://www.youtube.com/c/GDevelopApp")},icon:(0,d.jsx)(fF.Z,{fontSize:"small",htmlColor:"#FF0000"}),label:(0,d.jsx)(b.Trans,{id:"YouTube"})},{onClick:function(){return Y.ZP.openExternalURL("https://discord.gg/gdevelop")},icon:(0,d.jsx)(pF.Z,{fontSize:"small",htmlColor:"#5865F2"}),label:(0,d.jsx)(b.Trans,{id:"Discord"})},{onClick:function(){return Y.ZP.openExternalURL("https://www.reddit.com/r/gdevelop")},icon:(0,d.jsx)(gF.Z,{fontSize:"small",htmlColor:"#FF5700"}),label:(0,d.jsx)(b.Trans,{id:"Reddit"})},{onClick:function(){return Y.ZP.openExternalURL("https://twitter.com/GDevelopApp")},icon:(0,d.jsx)(xF.Z,{fontSize:"small",htmlColor:"#1DA1F2"}),label:(0,d.jsx)(b.Trans,{id:"Twitter"})},{onClick:function(){return Y.ZP.openExternalURL("https://www.facebook.com/GDevelopApp")},icon:(0,d.jsx)(mF.Z,{fontSize:"small",htmlColor:"#4267B2"}),label:(0,d.jsx)(b.Trans,{id:"Facebook"})},{onClick:function(){return Y.ZP.openExternalURL("https://www.tiktok.com/@gdevelop")},icon:(0,d.jsx)(vF.Z,{fontSize:"small",color:"inherit"}),label:(0,d.jsx)(b.Trans,{id:"TikTok"})}],LF=function(){var e=l.useContext(Oj.i).announcements,t=e&&e.length>0;return(0,d.jsx)(vy,{title:(0,d.jsx)(b.Trans,{id:"Community"}),showUrgentAnnouncements:!0,children:(0,d.jsx)(my,{children:(0,d.jsxs)(C.ak,{noMargin:!0,expand:!0,children:[t&&(0,d.jsx)(F.Z,{size:"title",children:(0,d.jsx)(b.Trans,{id:"News and announcements"})}),(0,d.jsx)(by,{}),(0,d.jsx)(hy,{canClose:!1,level:"normal"}),(0,d.jsx)(F.Z,{size:"title",children:(0,d.jsx)(b.Trans,{id:"Rankings"})}),(0,d.jsx)(EF,{}),(0,d.jsx)(F.Z,{size:"title",children:(0,d.jsx)(b.Trans,{id:"Join the conversation"})}),(0,d.jsx)(ce.Z,{style:IF.list,children:MF.map((function(e,t){return(0,d.jsx)(He.HC,{leftIcon:e.icon,primaryText:(0,d.jsx)(F.Z,{noMargin:!0,size:"body",children:e.label}),onClick:e.onClick},t)}))})]})})})},AF=function(){return(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Community section"}),scope:"start-page-community",children:(0,d.jsx)(LF,{})})},FF=function(e){var t=e.project,n=e.resourceManagementProps,r=e.canInstallPrivateAsset,i=e.onOpenPrivateGameTemplateListingData,o=e.onOpenProfile,a=l.useState(!1),c=(0,s.Z)(a,2),u=c[0],p=c[1],f=l.useContext(tj.KY),h=f.assetShortHeadersSearchResults,g=f.shopNavigationState.getCurrentPage(),x=g.openedAssetPack,m=g.openedAssetShortHeader,v=g.selectedFolders,C=l.useMemo((function(){return m?[m]:h?rZ(h,v):[]}),[m,h,v]),j=l.useMemo((function(){return t&&u?KZ(t):new Set}),[t,u]);return(0,d.jsxs)(vy,{title:null,flexBody:!0,noScroll:!0,children:[(0,d.jsx)(HZ,{onOpenPrivateGameTemplateListingData:i,displayPromotions:!0,onOpenProfile:o}),(x||m)&&(0,d.jsx)(L.x1,{justifyContent:"flex-end",children:(0,d.jsx)(T.Z,{primary:!0,onClick:function(){t&&p(!0)},disabled:!t||!C.length,label:t?m||1===C.length?(0,d.jsx)(b.Trans,{id:"Add this asset to the project"}):(0,d.jsx)(b.Trans,{id:"Add these assets to the project"}):m||1===C.length?(0,d.jsx)(b.Trans,{id:"Create a project first to add this asset"}):(0,d.jsx)(b.Trans,{id:"Create a project first to add assets from the asset store"})})}),t&&u&&!!C.length&&(0,d.jsx)(qZ,{assetPack:x,assetShortHeaders:C,addedAssetIds:j,onClose:function(){return p(!1)},onAssetsAdded:function(){p(!1)},project:t,objectsContainer:null,onObjectsAddedFromAssets:function(){},canInstallPrivateAsset:r,resourceManagementProps:n})]})},OF=function(e){return(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Shop section"}),scope:"start-page-shop",children:(0,d.jsx)(FF,(0,a.Z)({},e))})},RF={avatar:{width:20,height:20},buttonContainer:{flexShrink:0}},DF=function(e){var t=e.onOpenProfile,n=l.useContext(tr.ZP),r=n.profile,i=n.onOpenCreateAccountDialog,o=n.loginState;return r||"loggingIn"!==o?r?(0,d.jsx)(Jx.Z,{label:(0,U.S)(r.username||r.email,20),onClick:t,allowBrowserAutoTranslate:!1,icon:(0,d.jsx)(Ni.Z,{src:(0,rc.y)(r.email||"",{size:50}),style:RF.avatar})}):(0,d.jsx)("div",{style:RF.buttonContainer,children:(0,d.jsx)(C.pJ,{noMargin:!0,alignItems:"center",children:(0,d.jsx)(T.Z,{label:(0,d.jsx)("span",{children:(0,d.jsx)(b.Trans,{id:"Create account"})}),onClick:i,primary:!0,icon:(0,d.jsx)(br,{fontSize:"small"})})})}):(0,d.jsx)(eo.Z,{size:25})},_F=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:[(0,d.jsx)("path",{d:"M15.3333 9.66669C14.1285 9.66669 12.7081 10.0654 11.5773 11.0934C10.4227 12.143 9.66663 13.7607 9.66663 16C9.66663 18.1527 10.206 19.8116 11.4106 20.9066C12.5958 21.9841 14.229 22.3334 16 22.3334C19.2021 22.3334 20.6502 20.1669 20.9672 18.9206L20.9938 18.823L21.0698 18.5411C21.1327 18.3072 21.2167 17.9923 21.3009 17.6698C21.3847 17.3485 21.47 17.0146 21.5349 16.7445C21.5671 16.6102 21.5959 16.4846 21.6173 16.3812L21.6192 16.3719C21.6326 16.3077 21.6666 16.1443 21.6666 16C21.6666 15.5087 21.3402 15.24 21.2244 15.1595C21.0927 15.0678 20.9671 15.0257 20.912 15.0085C20.7884 14.9699 20.665 14.9524 20.5852 14.9428C20.4086 14.9217 20.1875 14.9113 19.9614 14.9058C19.4991 14.8947 18.8962 14.9022 18.3093 14.9163C17.7187 14.9305 17.1296 14.9517 16.6892 14.9693C16.4687 14.9781 16.2848 14.9861 16.156 14.9918L16.006 14.9986L15.952 15.0012C15.4004 15.0276 14.9746 15.4963 15.0011 16.048C15.0276 16.5996 15.4969 17.0253 16.0486 16.9988L16.0987 16.9965L16.245 16.9898C16.3713 16.9842 16.5521 16.9764 16.7691 16.9677C17.2036 16.9504 17.7812 16.9296 18.3573 16.9158C18.7356 16.9067 19.1071 16.9008 19.4342 16.9005C19.4118 16.9877 19.3888 17.0763 19.3657 17.1648C19.2832 17.481 19.2005 17.7908 19.1384 18.0219L19.0635 18.2996L19.0352 18.4034L19.0324 18.4137L19.0298 18.4242C18.8965 18.9575 18.1214 20.3334 16 20.3334C14.4375 20.3334 13.4041 20.0159 12.756 19.4267C12.1272 18.8552 11.6666 17.8473 11.6666 16C11.6666 14.2394 12.2439 13.1904 12.9226 12.5733C13.6251 11.9347 14.5381 11.6667 15.3333 11.6667H22.6666C23.2189 11.6667 23.6666 11.219 23.6666 10.6667C23.6666 10.1144 23.2189 9.66669 22.6666 9.66669H15.3333Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 1.66669C8.08387 1.66669 1.66663 8.08394 1.66663 16C1.66663 23.916 8.08387 30.3334 16 30.3334C23.916 30.3334 30.3333 23.916 30.3333 16C30.3333 8.08393 23.916 1.66669 16 1.66669ZM3.66663 16C3.66663 9.1885 9.18844 3.66669 16 3.66669C22.8114 3.66669 28.3333 9.18851 28.3333 16C28.3333 22.8115 22.8114 28.3334 16 28.3334C9.18845 28.3334 3.66663 22.8115 3.66663 16Z",fill:"currentColor"})]}))})),BF=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.8016 18.0978C19.1921 17.7073 19.8253 17.7073 20.2158 18.0978L26.7654 24.6475C27.1559 25.038 27.1559 25.6711 26.7654 26.0617C26.3749 26.4522 25.7417 26.4522 25.3512 26.0617L18.8016 19.5121C18.4111 19.1215 18.4111 18.4884 18.8016 18.0978Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.8016 26.0618C18.4111 25.6713 18.4111 25.0381 18.8016 24.6476L25.3512 18.098C25.7417 17.7075 26.3749 17.7075 26.7654 18.098C27.1559 18.4885 27.1559 19.1217 26.7654 19.5122L20.2158 26.0618C19.8253 26.4523 19.1921 26.4523 18.8016 26.0618Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.03705 19.0667V23.9185H11.8889V19.0667H7.03705ZM5.03705 18.828C5.03705 17.8552 5.82562 17.0667 6.79837 17.0667H12.1276C13.1003 17.0667 13.8889 17.8552 13.8889 18.828V24.1572C13.8889 25.13 13.1003 25.9185 12.1276 25.9185H6.79837C5.82562 25.9185 5.03705 25.13 5.03705 24.1572V18.828Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.75704 6.02592C9.41578 5.02757 10.8806 5.02758 11.5393 6.02592L15.0478 11.3432C15.7789 12.4513 14.9842 13.9278 13.6567 13.9278H6.63966C5.31209 13.9278 4.51738 12.4513 5.24854 11.3432L8.75704 6.02592ZM10.1482 7.54907L7.25896 11.9278H13.0374L10.1482 7.54907Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.7963 8.10371C20.4565 8.10371 19.3704 9.18984 19.3704 10.5296C19.3704 11.8694 20.4565 12.9556 21.7963 12.9556C23.1361 12.9556 24.2222 11.8694 24.2222 10.5296C24.2222 9.18984 23.1361 8.10371 21.7963 8.10371ZM17.3704 10.5296C17.3704 8.08527 19.3519 6.10371 21.7963 6.10371C24.2407 6.10371 26.2222 8.08527 26.2222 10.5296C26.2222 12.974 24.2407 14.9556 21.7963 14.9556C19.3519 14.9556 17.3704 12.974 17.3704 10.5296Z",fill:"currentColor"})]}))})),NF=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33337 6.33331C5.33337 5.78103 5.78109 5.33331 6.33337 5.33331H9.33337C9.79224 5.33331 10.1922 5.64561 10.3035 6.09078L11.1142 9.33331H25.6667C25.9722 9.33331 26.261 9.47296 26.4506 9.71244C26.6403 9.95193 26.7101 10.265 26.6401 10.5624L24.4572 19.8398C24.0674 21.496 22.5896 22.6666 20.888 22.6666H15.386C13.7223 22.6666 12.2671 21.5465 11.8414 19.9383L9.36724 10.5914C9.36614 10.5872 9.36507 10.5831 9.36402 10.579C9.36376 10.5779 9.36349 10.5769 9.36323 10.5758L8.5526 7.33331H6.33337C5.78109 7.33331 5.33337 6.8856 5.33337 6.33331ZM11.6325 11.3333L13.7748 19.4265C13.7748 19.4265 13.7748 19.4265 13.7748 19.4265C13.9683 20.1575 14.6298 20.6666 15.386 20.6666H20.888C21.6614 20.6666 22.3332 20.1346 22.5104 19.3817L24.4041 11.3333H11.6325Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M13.3334 26.6666C14.0698 26.6666 14.6667 26.0697 14.6667 25.3333C14.6667 24.5969 14.0698 24 13.3334 24C12.597 24 12 24.5969 12 25.3333C12 26.0697 12.597 26.6666 13.3334 26.6666Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M22.6667 26.6666C23.4031 26.6666 24 26.0697 24 25.3333C24 24.5969 23.4031 24 22.6667 24C21.9303 24 21.3334 24.5969 21.3334 25.3333C21.3334 26.0697 21.9303 26.6666 22.6667 26.6666Z",fill:"currentColor"})]}))})),UF={"credits-drop":(0,d.jsx)(_F,{}),"one-game-feedback-received":(0,d.jsx)(bF,{}),"multiple-game-feedback-received":(0,d.jsx)(bF,{}),"claimable-asset-pack":(0,d.jsx)(NF,{}),"game-sessions-achievement":(0,d.jsx)(BF,{})},HF=function(e){var t=e.notification,n=e.onCloseNotificationList,r=e.onMarkNotificationAsSeen,i=l.useContext(f.Z),o=l.useContext(Ja.Z).addRouteArguments,a=function(e){var t=e.notification,n=e.addRouteArguments,r=e.onCloseNotificationList,i=e.onMarkNotificationAsSeen;if("credits-drop"===t.type)return null;if("one-game-feedback-received"===t.type||"multiple-game-feedback-received"===t.type)return function(){n({"initial-dialog":"games-dashboard","game-id":t.data.gameId,"games-dashboard-tab":"feedback"}),i(),r()};if("claimable-asset-pack"===t.type)return function(){n({"initial-dialog":"store","asset-pack":t.data.privateAssetPackId}),i(),r()};if("game-sessions-achievement"===t.type){if(1===t.data.gameCount){var o=t.data,a=o.gameId,s=o.gameName;return a&&s?function(){n({"initial-dialog":"games-dashboard","game-id":a,"games-dashboard-tab":"analytics"}),i(),r()}:null}if("all"===t.data.gameCount||Number.isInteger(t.data.gameCount))return function(){n({"initial-dialog":"games-dashboard","games-dashboard-tab":"analytics"}),i(),r()}}return null}({notification:t,addRouteArguments:o,onMarkNotificationAsSeen:r,onCloseNotificationList:n}),s=function(e){if("credits-drop"===e.type&&e.data.reason.startsWith("subscription"))return(0,d.jsx)(b.Trans,{id:"You received {0} credits thanks to your subscription",values:{0:e.data.creditsAmount}});if("one-game-feedback-received"===e.type)return e.data.playerName?(0,d.jsx)(b.Trans,{id:'Player {0} left a feedback message on {1}: "{2}..."',values:{0:e.data.playerName,1:e.data.gameName,2:(0,U.S)(e.data.comment,25)}}):(0,d.jsx)(b.Trans,{id:'Your game {0} received a feedback message: "{1}..."',values:{0:e.data.gameName,1:(0,U.S)(e.data.comment,25)}});if("multiple-game-feedback-received"===e.type)return(0,d.jsx)(b.Trans,{id:"Your game {0} received {1} feedback messages",values:{0:e.data.gameName,1:e.data.count}});if("claimable-asset-pack"===e.type)return(0,d.jsx)(b.Trans,{id:"The asset pack {0} is now available, go claim it in the shop!",values:{0:e.data.privateAssetPackName}});if("game-sessions-achievement"===e.type){if(1===e.data.gameCount)return e.data.gameId&&e.data.gameName?(0,d.jsx)(b.Trans,{id:"Your game {0} was played more than {1} times!",values:{0:e.data.gameName,1:e.data.sessionsCount}}):null;if(e.data.allGames)return(0,d.jsx)(b.Trans,{id:"All your games were played more than {0} times in total!",values:{0:e.data.sessionsCount}});var t=e.data.gameCount;if(Number.isInteger(t))return(0,d.jsx)(b.Trans,{id:"{gameCount} of your games were played more than {0} times in total!",values:{0:e.data.sessionsCount,gameCount:t}})}return null}(t);return s?(0,d.jsx)(b.I18n,{children:function(e){var n=e.i18n;return(0,d.jsx)(He.HC,{primaryText:s,secondaryText:QL({i18n:n,dateAsNumber:t.createdAt,sameDayFormat:"timeAgo",sameWeekFormat:"timeAgo",dayBeforeFormat:"yesterday",relativeLimit:"currentWeek"}),onClick:a,leftIcon:UF[t.type],displayDot:!t.seenAt,dotColor:i.notification.badgeColor,isGreyed:!!t.seenAt,secondaryTextSize:"body-small"})}}):null},VF=function(e){var t=e.notifications,n=e.onMarkAllAsRead,r=e.canMarkAllAsRead,a=e.onMarkNotificationAsSeen,c=e.onCloseNotificationList,u=l.useState(!1),p=(0,s.Z)(u,2),f=p[0],h=p[1],g=l.useState(!1),x=(0,s.Z)(g,2),m=x[0],v=x[1],C=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,e.next=4,n();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("An error occurred while marking all notifications as seen:",e.t0);case 9:return e.prev=9,h(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])}))),[n]),j=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("An error occurred while marking notification as seen:",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),[a]),y=m?t:t.slice(0,5),Z=t.length>5&&!m;return(0,d.jsx)(b.I18n,{children:function(e){e.i18n;return(0,d.jsxs)(L.sg,{noMargin:!0,expand:!0,children:[(0,d.jsxs)(L.x1,{justifyContent:"space-between",alignItems:"center",noMargin:!0,children:[(0,d.jsx)(F.Z,{size:"block-title",children:(0,d.jsx)(b.Trans,{id:"Notifications"})}),(0,d.jsx)(Sr.Z,{isLoading:f,children:(0,d.jsx)(J.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Mark all as read"}),disabled:!r,onClick:C})})]}),(0,d.jsx)(Tt.Z,{autoHideScrollbar:!0,children:(0,d.jsxs)(L.sg,{children:[(0,d.jsx)(He.aV,{children:y.length>0?y.map((function(e){return(0,d.jsx)(HF,{notification:e,onCloseNotificationList:c,onMarkNotificationAsSeen:function(){j(e)}},e.id)})):(0,d.jsx)(He.HC,{primaryText:(0,d.jsx)(b.Trans,{id:"You have 0 notifications."})})}),Z&&(0,d.jsx)(Jx.Z,{secondary:!0,label:(0,d.jsx)(b.Trans,{id:"Load more..."}),onClick:function(){return v(!0)}})]})})]})}})},zF=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.66707 6.66663C4.66707 4.45749 6.45794 2.66663 8.66707 2.66663C10.8762 2.66663 12.6671 4.45748 12.6671 6.66663V7.88819L13.9528 10.6204C14.0257 10.7753 14.0143 10.9567 13.9226 11.1012C13.8309 11.2457 13.6716 11.3333 13.5004 11.3333H3.83374C3.66257 11.3333 3.50329 11.2457 3.41157 11.1012C3.31986 10.9567 3.30845 10.7753 3.38133 10.6204L4.66707 7.88819V6.66663ZM8.66707 3.66663C7.01022 3.66663 5.66707 5.00978 5.66707 6.66663V7.99996C5.66707 8.07356 5.65082 8.14626 5.61948 8.21286L4.62163 10.3333H12.7125L11.7147 8.21286C11.6833 8.14626 11.6671 8.07356 11.6671 7.99996V6.66663C11.6671 5.00977 10.3239 3.66663 8.66707 3.66663Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.16706 11.1623C7.16472 10.8881 6.94177 10.6666 6.66707 10.6666C6.39093 10.6666 6.16707 10.8905 6.16707 11.1666H6.66707C6.16707 11.1666 6.16707 11.1663 6.16707 11.1666L6.16708 11.1679L6.16708 11.1693L6.1671 11.1726L6.16723 11.1811C6.16735 11.1876 6.16758 11.1957 6.16796 11.2053C6.16873 11.2246 6.17016 11.2501 6.17281 11.2809C6.17808 11.3424 6.18826 11.4262 6.20803 11.5251C6.24722 11.721 6.32626 11.9871 6.48833 12.2572C6.83186 12.8298 7.49768 13.3333 8.66707 13.3333C9.83646 13.3333 10.5023 12.8298 10.8458 12.2572C11.0079 11.9871 11.0869 11.721 11.1261 11.5251C11.1459 11.4262 11.1561 11.3424 11.1613 11.2809C11.164 11.2501 11.1654 11.2246 11.1662 11.2053C11.1666 11.1957 11.1668 11.1876 11.1669 11.1811L11.167 11.1726L11.1671 11.1693L11.1671 11.1679C11.1671 11.1676 11.1671 11.1666 10.6671 11.1666H11.1671C11.1671 10.8905 10.9432 10.6666 10.6671 10.6666C10.3924 10.6666 10.1694 10.8881 10.1671 11.1623",fill:"currentColor"})]}))})),WF=n(50631),GF={notificationListContainer:{padding:16,display:"flex",maxWidth:400,minWidth:300},popoverPaper:{overflowY:"hidden",maxHeight:"80%",display:"flex"}},YF=function(e){var t=l.useContext(f.Z),n=l.useContext(tr.ZP),r=n.notifications,a=n.profile,c=n.getAuthorizationHeader,u=n.onRefreshNotifications,p=l.useState(null),h=(0,s.Z)(p,2),g=h[0],x=h[1],m=l.useMemo((function(){return!!r&&r.some((function(e){return!e.seenAt}))}),[r]),v=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&a){e.next=2;break}return e.abrupt("return");case 2:if(t=r[0]){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,(0,WF.nq)(c,{allStartingFromNotificationId:t.id,userId:a.id});case 7:return e.next=9,u();case 9:case"end":return e.stop()}}),e)}))),[r,a,c,u]),b=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&!t.seenAt){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,WF.nq)(c,{notificationIds:[t.id],userId:a.id});case 4:return e.next=6,u();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,c,u]),C=l.useCallback((function(){x(null)}),[]);return a&&r?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(M.Z,{size:"small",onClick:function(e){x(e.currentTarget)},children:(0,d.jsx)(TS,{variant:"dot",overlap:"circle",invisible:!m,forcedColor:t.notification.badgeColor,children:(0,d.jsx)(zF,{color:"secondary"})})}),(0,d.jsx)(Kx.ZP,{open:!!g,anchorEl:g,PaperProps:{style:GF.popoverPaper},onClose:C,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:(0,d.jsx)(de.Z,{style:GF.notificationListContainer,background:"light",children:(0,d.jsx)(VF,{notifications:r,onMarkAllAsRead:v,onMarkNotificationAsSeen:b,canMarkAllAsRead:m,onCloseNotificationList:C})})})]}):null},qF=ae()("electron"),XF=function(e){var t=e.hasProject,n=e.onOpenProjectManager,r=e.onOpenProfile,i=e.onOpenLanguageDialog,o=e.onSave,a=e.canSave,s=(0,w.U)().isMobile;return(0,d.jsx)(b.I18n,{children:function(e){var l=e.i18n;return(0,d.jsxs)(C.pJ,{justifyContent:"space-between",alignItems:"center",noMargin:!0,expand:!0,children:[(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsxs)(L.x1,{noMargin:!0,children:[(0,d.jsx)(M.Z,{size:"small",id:"main-toolbar-project-manager-button",onClick:n,tooltip:{id:"Project Manager"},color:"default",disabled:!t,children:(0,d.jsx)(E,{})}),!!t&&(0,d.jsx)(M.Z,{size:"small",id:"main-toolbar-save-button",onClick:o,tooltip:{id:"Save project"},color:"default",disabled:!a,children:(0,d.jsx)(I,{})})]})}),(0,d.jsx)(L.sg,{children:(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[!qF&&!(0,$l._F)()&&(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Get the app"}),onClick:function(){return Y.ZP.openExternalURL("https://gdevelop.io/download")}}),(0,d.jsx)(DF,{onOpenProfile:r}),(0,d.jsx)(YF,{}),s?(0,d.jsx)(M.Z,{size:"small",onClick:i,children:(0,d.jsx)(rL.Z,{fontSize:"small"})}):(0,d.jsx)(Jx.Z,{label:l.language.toUpperCase(),onClick:i,icon:(0,d.jsx)(rL.Z,{fontSize:"small"})})]})})]})}})},KF={team:null,groups:null,members:null,memberships:null,onChangeGroupName:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onChangeUserGroup:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onListUserProjects:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onDeleteGroup:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onCreateGroup:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRefreshMembers:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},JF=l.createContext(KF),QF=["value","callback","callbackErrorText","emptyErrorText","onCancel"],$F=function(e){var t=e.value,n=e.callback,r=e.callbackErrorText,c=e.emptyErrorText,u=e.onCancel,p=(0,Bi.Z)(e,QF),f=l.useState(!1),h=(0,s.Z)(f,2),g=h[0],x=h[1],m=l.useState(null),v=(0,s.Z)(m,2),b=v[0],C=v[1],j=l.useState(t),y=(0,s.Z)(j,2),Z=y[0],k=y[1],w=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=Z.trim(),!c||o){e.next=4;break}return C(c),e.abrupt("return");case 4:if(o!==t){e.next=6;break}return e.abrupt("return");case 6:return x(!0),e.prev=7,e.next=10,n(o);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(7),console.error(e.t0),C(r);case 16:return e.prev=16,x(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[7,12,16,19]])})));return function(){return e.apply(this,arguments)}}(),T=l.useCallback((function(e,t){b&&C(null),k(t)}),[b]),S=l.useCallback((function(){k(t),u()}),[t,u]);return(0,d.jsx)($r.ZP,(0,a.Z)({value:Z,disabled:g,onChange:T,errorText:b,onKeyUp:function(e){(0,kn.ph)(e)?w():(0,kn.W$)(e)&&(e.stopPropagation(),S())},endAdornment:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(M.Z,{edge:"end",onClick:S,disabled:g,size:"small",children:(0,d.jsx)(_.Z,{})}),(0,d.jsx)(M.Z,{edge:"end",onClick:w,disabled:g,size:"small",children:(0,d.jsx)(ac.Z,{})})]}),type:"text"},p))},eO=function(e){var t=e.group,n=e.onFinishEditingGroupName,r=e.allowDelete,a=e.onDeleteGroup,c=l.useState(!1),u=(0,s.Z)(c,2),p=u[0],f=u[1],h=l.useState(!1),g=(0,s.Z)(h,2),x=g[0],m=g[1],v=l.useCallback((function(){m(!0)}),[]),j=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.prev=1,e.next=4,a(t);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("An error occurred when deleting the group ".concat(t.id),e.t0),f(!1);case 10:case"end":return e.stop()}}),e,null,[[1,6]])}))),[t,a]);return(0,d.jsx)(L.x1,{noMargin:!0,children:x?(0,d.jsx)($F,{margin:"dense",maxLength:50,autoFocus:"desktopAndMobileDevices",value:t.name,callback:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t,r);case 2:m(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),callbackErrorText:(0,d.jsx)(b.Trans,{id:"An error occurred while renaming the group name. Please try again later."}),onCancel:function(){return m(!1)},emptyErrorText:(0,d.jsx)(b.Trans,{id:"Group name cannot be empty."})}):(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[(0,d.jsx)(F.Z,{size:"block-title",children:t.name}),(0,d.jsx)(M.Z,{onClick:v,size:"small",children:(0,d.jsx)(bt.Z,{fontSize:"small"})}),r&&(0,d.jsx)(M.Z,{onClick:j,size:"small",children:p?(0,d.jsx)(eo.Z,{size:10}):(0,d.jsx)(vn.Z,{fontSize:"small"})})]})})},tO=function(e){var t=e.onValidateGroupName,n=e.onDismiss;return(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)($F,{margin:"dense",maxLength:50,autoFocus:"desktopAndMobileDevices",translatableHintText:{id:"New group name"},value:"",callback:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({name:r});case 2:n();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),callbackErrorText:(0,d.jsx)(b.Trans,{id:"An error occurred while creating the group. Please try again later."}),onCancel:n,emptyErrorText:(0,d.jsx)(b.Trans,{id:"Group name cannot be empty."})})})},nO={padding:"4px 0",borderRadius:8,overflowWrap:"anywhere"},rO=(0,Zt.x)("team-groups"),iO=function(e){var t=e.isTemporary,n=e.member,r=e.onListUserProjects,i=e.onDrag,o=e.onOpenContextMenu,s=(0,w.U)().isMobile,c=l.useContext(f.Z);return(0,d.jsx)(rO,{canDrop:function(){return!1},beginDrag:function(){return i(n),{}},drop:function(){},children:function(e){var i=e.connectDragSource,l=e.connectDragPreview;return(0,d.jsx)(xe.Z,{style:(0,a.Z)((0,a.Z)({},nO),{},{backgroundColor:t?c.paper.backgroundColor.light:void 0}),children:(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",justifyContent:"space-between",expand:!0,children:[(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[i((0,d.jsx)("div",{children:(0,d.jsx)(yt.Z,{})})),l((0,d.jsx)("div",{children:s?(0,d.jsx)(me.Z,{disableTypography:!0,primary:(0,d.jsx)(F.Z,{allowSelection:!0,noMargin:!0,children:n.username||n.email}),secondary:n.username?(0,d.jsx)(F.Z,{allowSelection:!0,noMargin:!0,color:"secondary",children:n.email}):null}):(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[n.username&&(0,d.jsx)(F.Z,{allowSelection:!0,noMargin:!0,children:n.username}),(0,d.jsx)(F.Z,{allowSelection:!0,noMargin:!0,color:"secondary",children:n.email})]})}))]}),s?(0,d.jsx)(ve.Z,{children:(0,d.jsx)(xn.Z,{size:"small",edge:"end","aria-label":"menu",onClick:function(e){e.stopPropagation(),o(e,n)},children:(0,d.jsx)(Ls.Z,{})})}):(0,d.jsx)(J.Z,{primary:!0,rightIcon:(0,d.jsx)(Ct.Z,{fontSize:"small"}),label:(0,d.jsx)(b.Trans,{id:"See projects"}),onClick:r})]})})}})},oO={listItem:{padding:0,marginTop:2,marginBottom:2,borderRadius:8,overflowWrap:"anywhere"},skeleton:{borderRadius:6}},aO=function(e){var t=e.user,n=e.currentFileMetadata,r=e.onClickBack,i=e.onOpenRecentFile,o=e.storageProviders,a=e.projects,s=e.onRefreshProjects,c=e.isLoadingProjects,u=(0,w.U)().isMobile,p=_A({isMobile:u}),f=l.useRef(null),h=a?NA(a,t.id):null,g=l.useCallback((function(e,t){f.current&&f.current.open(e.clientX,e.clientY,{file:t})}),[]);return(0,d.jsxs)(vy,{title:(0,d.jsx)(b.Trans,{id:"{0}'s projects",values:{0:t.username||t.email}}),titleAdornment:(0,d.jsx)(J.Z,{primary:!0,disabled:c,label:u?(0,d.jsx)(b.Trans,{id:"Refresh"}):(0,d.jsx)(b.Trans,{id:"Refresh dashboard"}),onClick:function(){return s(t)},leftIcon:(0,d.jsx)(Xi.Z,{fontSize:"small"})}),backAction:r,children:[(0,d.jsxs)(my,{children:[!u&&(0,d.jsxs)(L.x1,{justifyContent:"space-between",children:[(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(F.Z,{color:"secondary",children:(0,d.jsx)(b.Trans,{id:"File name"})})}),(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(F.Z,{color:"secondary",children:(0,d.jsx)(b.Trans,{id:"Location"})})}),(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(F.Z,{color:"secondary",children:(0,d.jsx)(b.Trans,{id:"Last edited"})})})]}),(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,children:h?0===h.length?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"This user does not have projects yet."})}),(0,d.jsx)(De.Z,{kind:"info",children:(0,d.jsx)(b.Trans,{id:"Only cloud projects can be displayed here. If the user has created local projects, they need to be saved as cloud projects to be visible."})})]}):(0,d.jsx)(He.aV,{children:h.map((function(e){return(0,d.jsx)(DA,{file:e,currentFileMetadata:n,isLoading:!1,onOpenContextMenu:g,onOpenRecentFile:i,storageProviders:o,isWindowSizeMediumOrLarger:!u},e.fileMetadata.fileIdentifier)}))}):(0,d.jsx)(He.aV,{children:new Array(5).fill(0).map((function(e,t){return(0,d.jsx)(xe.Z,{style:oO.listItem,children:(0,d.jsx)(L.x1,{expand:!0,children:(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(Dj.Z,{variant:"rect",height:p,width:"100%",style:oO.skeleton})})})},"skeleton-".concat(t))}))})})})]}),(0,d.jsx)(za.Z,{ref:f,buildMenuTemplate:function(e,t){return function(e,t){return t?[{label:e._({id:"Open"}),click:function(){return i(t)}}]:[]}(e,t.file)}})]})},sO={list:{padding:0},lobbyContainer:{padding:16},roomsContainer:{paddingRight:16},titleAdornmentContainer:{paddingRight:16}},lO=function(e,t){return(e.username||e.email).localeCompare(t.username||t.email)},cO=Lh("team-groups"),uO=l.forwardRef((function(e,t){e.project;var n=e.onOpenRecentFile,r=e.storageProviders,a=e.currentFileMetadata,c=e.onOpenTeachingResources,u=l.useContext(JF),p=u.groups,h=u.members,g=u.memberships,x=u.onChangeGroupName,m=u.onChangeUserGroup,j=u.onListUserProjects,y=u.onDeleteGroup,Z=u.onCreateGroup,k=u.onRefreshMembers,S=l.useContext(f.Z),P=(0,Pt.Z)(),E=(0,w.U)().isMobile,I=l.useRef(null);l.useImperativeHandle(t,(function(){return{forceUpdate:P}}));var M=l.useRef(null),A=l.useState(null),O=(0,s.Z)(A,2),R=O[0],D=O[1],_=l.useState(null),B=(0,s.Z)(_,2),N=B[0],U=B[1],H=l.useState(!1),V=(0,s.Z)(H,2),z=V[0],W=V[1],G=l.useState(!1),Y=(0,s.Z)(G,2),q=Y[0],X=Y[1],K=l.useState(!1),Q=(0,s.Z)(K,2),$=Q[0],ee=Q[1],te=l.useState(null),ne=(0,s.Z)(te,2),re=ne[0],ie=ne[1],oe=l.useCallback((function(e){M.current=e}),[]),ae=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(!0),e.prev=1,D(t),e.next=5,j(t);case 5:n=e.sent,U(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:return e.prev=12,W(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(t){return e.apply(this,arguments)}}(),[j]),se=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ee(!0),e.prev=1,e.next=4,k();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("An error occurred when refreshing team members:",e.t0);case 9:return e.prev=9,ee(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])}))),[k]),le=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ie({groupId:n.id,users:[t]}),e.next=4,m(t,n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("An error occurred when changing user ".concat(t.email," to group ").concat(n.name,": "),e.t0);case 9:return e.prev=9,ie(null),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(t,n){return e.apply(this,arguments)}}(),[m]),ue=l.useCallback((function(e,t){I.current&&I.current.open(e.clientX,e.clientY,{member:t})}),[]),pe=function(e){var t=e.groups,n=e.members,r=e.memberships;if(!(t&&n&&r))return null;var i={};return n.forEach((function(e){var n=r.find((function(t){return t.userId===e.id}));if(n){var o=n.groups;if(o){var a=t.find((function(e){return e.id===o[0]}));if(a){var s=i[a.id];s?s.members=[].concat((0,v.Z)(s.members),[e]):i[a.id]={group:a,members:[e]}}}else{var l=i.NONE;i.NONE={members:[].concat((0,v.Z)(l&&l.members||[]),[e]),group:{id:"none",name:"none"}}}}})),t.forEach((function(e){e.id in i||(i[e.id]={group:e,members:[]})})),i}({groups:p,members:h,memberships:g});if(!pe)return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(vy,{title:(0,d.jsx)(b.Trans,{id:"Team"}),children:(0,d.jsx)(my,{children:(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{noMargin:!0,expand:!0,alignItems:"center",children:(0,d.jsx)(eo.Z,{})})})})})});if(R)return(0,d.jsx)(aO,{user:R,currentFileMetadata:a,projects:N,storageProviders:r,onOpenRecentFile:n,onClickBack:function(){D(null),U(null)},onRefreshProjects:ae,isLoadingProjects:z});var fe=pe.NONE,he=fe&&re?{group:fe.group,members:fe.members.filter((function(e){return!re.users.includes(e)}))}:fe,ge=Object.keys(pe).map((function(e){return"NONE"===e?null:pe[e]})).filter(Boolean).sort((function(e,t){return e.group.name.localeCompare(t.group.name)}));return(0,d.jsxs)(vy,{title:(0,d.jsx)(b.Trans,{id:"Classrooms"}),titleAdornment:(0,d.jsx)("div",{style:sO.titleAdornmentContainer,children:(0,d.jsx)(J.Z,{primary:!0,disabled:$,label:E?(0,d.jsx)(b.Trans,{id:"Refresh"}):(0,d.jsx)(b.Trans,{id:"Refresh dashboard"}),onClick:se,leftIcon:(0,d.jsx)(Xi.Z,{fontSize:"small"})})}),children:[(0,d.jsxs)(my,{children:[(0,d.jsx)(HL,{onSeeResources:c}),(0,d.jsx)(L.LZ,{}),he&&(0,d.jsx)(de.Z,{background:"medium",style:sO.lobbyContainer,children:(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsxs)(C.ak,{noMargin:!0,expand:!0,children:[(0,d.jsx)(F.Z,{size:"section-title",noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Lobby"})}),(0,d.jsx)(ce.Z,{style:sO.list,children:he.members.sort(lO).map((function(e){return(0,d.jsx)(iO,{isTemporary:!1,onOpenContextMenu:ue,member:e,onListUserProjects:function(){return ae(e)},onDrag:oe},e.id)}))})]})})}),(0,d.jsxs)("div",{style:sO.roomsContainer,children:[(0,d.jsxs)(L.x1,{justifyContent:"space-between",alignItems:"center",children:[(0,d.jsx)(F.Z,{size:"section-title",noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Rooms"})}),(0,d.jsx)(T.Z,{primary:!0,label:E?(0,d.jsx)(b.Trans,{id:"Create"}):(0,d.jsx)(b.Trans,{id:"Create a new room"}),icon:(0,d.jsx)(vt.Z,{fontSize:"small"}),onClick:function(){return X(!0)}})]}),q&&(0,d.jsx)(L.x1,{children:(0,d.jsx)(tO,{onValidateGroupName:Z,onDismiss:function(){return X(!1)}})}),(0,d.jsx)(C.ak,{noMargin:!0,children:ge.length>0?ge.map((function(e){var t=e.group,n=e.members,r=(0,v.Z)(n);return re&&re.groupId===t.id&&re.users.forEach((function(e){n.some((function(t){return t.id===e.id}))||r.push(e)})),(0,d.jsx)(cO,{canDrop:function(){return!0},drop:function(){var e=M.current;e&&(le(e,t),M.current=null)},children:function(e){var n=e.connectDropTarget,i=e.isOver;return n((0,d.jsx)("div",{style:i?{backgroundColor:S.paper.backgroundColor.light,outline:"2px dashed ".concat(S.dropIndicator.canDrop)}:void 0,children:(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsxs)(L.sg,{noMargin:!0,expand:!0,children:[(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(eO,{group:t,onFinishEditingGroupName:x,allowDelete:0===r.length,onDeleteGroup:y})}),(0,d.jsx)(ce.Z,{style:sO.list,children:r.sort(lO).map((function(e){var t=!!re&&re.users.some((function(t){return t.id===e.id}));return(0,d.jsx)(iO,{isTemporary:t,member:e,onOpenContextMenu:ue,onListUserProjects:function(){return ae(e)},onDrag:oe},e.id+(t?"_temp":""))}))})]})})}))}},t.id)})):q?null:(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"Create a room and drag and drop members in it."})})})]})]}),(0,d.jsx)(za.Z,{ref:I,buildMenuTemplate:function(e,t){return function(e,t){return[{label:e._({id:"See projects"}),click:function(){return ae(t)}}]}(e,t.member)}})]})})),dO=function(e){return(0,d.jsx)(_e.ZP,{componentTitle:(0,d.jsx)(b.Trans,{id:"Team section"}),scope:"start-page-team",children:(0,d.jsx)(uO,(0,a.Z)({},e))})},pO=function(e){var t=e.children,n=l.useContext(tr.ZP),r=n.limits,c=n.profile,u=n.getAuthorizationHeader,p=n.authenticated,f=l.useState(null),h=(0,s.Z)(f,2),g=h[0],x=h[1],m=l.useState(null),b=(0,s.Z)(m,2),C=b[0],j=b[1],y=l.useState(null),Z=(0,s.Z)(y,2),k=Z[0],w=Z[1],T=l.useState(null),S=(0,s.Z)(T,2),P=S[0],E=S[1];l.useEffect((function(){p||(j(null),x(null),w(null),E(null))}),[p]),l.useEffect((function(){var e=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c&&r&&r.capabilities.classrooms&&r.capabilities.classrooms.showClassroomTab){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,oc.wO)(u,c.id);case 4:t=e.sent,j(t[0]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[u,c,r]),l.useEffect((function(){var e=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C&&c){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,oc.TA)(u,c.id,C.id);case 4:t=e.sent,x(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[C,u,c]);var I=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C&&c){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,oc.on)(u,c.id,C.id);case 4:t=e.sent,w(t);case 6:case"end":return e.stop()}}),e)}))),[C,u,c]);l.useEffect((function(){I()}),[I]);var M=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C&&c){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,oc.YB)(u,c.id,C.id);case 4:t=e.sent,E(t);case 6:case"end":return e.stop()}}),e)}))),[C,u,c]);l.useEffect((function(){M()}),[M]);var L=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C&&c&&g){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,oc.mD)(u,c.id,C.id,t.id,{name:n});case 4:r=e.sent,-1!==(o=g.findIndex((function(e){return e.id===t.id})))&&((a=(0,v.Z)(g))[o]=r,x(a));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[C,u,c,g]),A=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C&&c&&P){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,r=P.findIndex((function(e){return e.userId===t.id})),!P[r].groups||P[r].groups[0]!==n.id){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,(0,oc.GX)(u,c.id,C.id,n.id,t.id);case 8:-1!==r&&((o=(0,v.Z)(P))[r]=(0,a.Z)((0,a.Z)({},P[r]),{},{groups:[n.id]}),E(o)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error("An error occurred while update user group:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}(),[C,u,c,P]),F=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",(0,tT.Un)(u,c.id,t.id));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u,c]),O=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c&&C){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,oc.iE)(u,c.id,C.id,t.id);case 4:x((function(e){return e?e.filter((function(e){return e.id!==t.id})):null}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[C,u,c]),R=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c&&C){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,oc.sS)(u,c.id,C.id,t);case 4:n=e.sent,x(g?[].concat((0,v.Z)(g),[n]):null);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[C,u,c,g]),D=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([I(),M()]);case 2:case"end":return e.stop()}}),e)}))),[I,M]);return(0,d.jsx)(JF.Provider,{value:{team:C,groups:g,members:k,memberships:P,onChangeGroupName:L,onChangeUserGroup:A,onListUserProjects:F,onDeleteGroup:O,onCreateGroup:R,onRefreshMembers:D},children:t})},fO={gamesDashboardInProjectManager:{count:2,intervalInDays:7,minimumProgramOpeningCount:10},gamesDashboardInHomePage:{count:2,intervalInDays:7,minimumProgramOpeningCount:10}},hO=function(){var e=l.useContext(se.ZP),t=e.values.newFeaturesAcknowledgements,n=e.setNewFeaturesAcknowledgements;return{shouldDisplayNewFeatureHighlighting:l.useCallback((function(e){var n=e.featureId,r=(0,vA.MJ)(),i=fO[n];if(!i)return!1;var o=i.count,a=i.intervalInDays,s=i.minimumProgramOpeningCount,l=t[n];if(!l)return r>s;var c=l.dates;if(c.length>=o)return!1;var u=c[c.length-1];return r>s&&Date.now()>u+864e5*a}),[t]),acknowledgeNewFeature:l.useCallback((function(e){var i=e.featureId;if(fO[i]){var o=t[i];n(o?(0,a.Z)((0,a.Z)({},t),{},(0,r.Z)({},i,(0,a.Z)((0,a.Z)({},o),{},{dates:[].concat((0,v.Z)(o.dates),[Date.now()])}))):(0,a.Z)((0,a.Z)({},t),{},(0,r.Z)({},i,{dates:[Date.now()]})))}}),[t,n])}},gO=function(e,t){return getComputedStyle(e).getPropertyValue(t)},xO=function e(t,n){return t.parentElement?e(t.parentElement,n.concat([t])):n},mO=function(e){return/(auto|scroll)/.test(function(e){return gO(e,"overflow")+gO(e,"overflow-y")+gO(e,"overflow-x")}(e))},vO=function(e){return"in-app-tutorial-avatar"===e.id?Kh.BI:function(e){var t=document.querySelector("#root");return!!t&&t.contains(e)}(e)?getComputedStyle(e).getPropertyPriority("z-index")+10:Kh.BI},bO=n(89765),CO=n(32694),jO={padding:"8px 10px",minWidth:180},yO=(0,R.Z)({popper:{'&[x-placement*="bottom"] #new-feature-popper-arrow':{top:0,left:0,marginTop:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"0 100%"}},'&[x-placement*="top"] #new-feature-popper-arrow':{bottom:0,left:0,marginBottom:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"100% 0"}},'&[x-placement*="right"] #new-feature-popper-arrow':{left:0,marginLeft:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"100% 100%"}},'&[x-placement*="left"] #new-feature-popper-arrow':{right:0,marginRight:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"0 0"}}},arrow:{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box","&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}}),ZO=function(e){var t=e.title,n=e.thumbnailSource,r=e.thumbnailAlt,i=e.content,o=e.anchorElement,s=e.onClose,c=e.placement,u=e.closeWithBackdropClick,p=yO(),h=l.useContext(f.Z);if(l.useContext(Yr.Z).currentlyRunningInAppTutorial)return null;var g=(0,d.jsx)(pd.Z,{id:"in-app-tutorial-tooltip-displayer",open:!0,className:p.popper,anchorEl:o,transition:!0,placement:c,popperOptions:{modifiers:{arrow:{enabled:!0,element:"#new-feature-popper-arrow"},offset:{enabled:!0,offset:"0,10"},preventOverflow:{enabled:!0,boundariesElement:document.querySelector(".main-frame")}}},style:{zIndex:vO(o),maxWidth:"min(90%, 300px)"},children:function(e){var o=e.TransitionProps;return(0,d.jsx)(bO.Z,(0,a.Z)((0,a.Z)({},o),{},{timeout:{enter:350,exit:0},children:(0,d.jsxs)(CO.Z,{style:(0,a.Z)((0,a.Z)({},jO),{},{backgroundColor:h.paper.backgroundColor.light}),elevation:4,children:[(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsxs)(L.x1,{noMargin:!0,justifyContent:"space-between",alignItems:"center",children:[(0,d.jsx)(F.Z,{noMargin:!0,size:"sub-title",children:t}),(0,d.jsx)(M.Z,{size:"small",onClick:s,children:(0,d.jsx)(_.Z,{fontSize:"small"})})]}),n&&r&&(0,d.jsx)(Hg.W,{src:n,alt:r,style:{aspectRatio:"16 / 9",objectFit:"cover"}}),i]}),(0,d.jsx)("span",{id:"new-feature-popper-arrow",className:p.arrow,style:{color:h.paper.backgroundColor.light}})]})}))}});return u?(0,d.jsx)(mt.Z,{onClickAway:function(e){e.preventDefault(),e.stopPropagation(),s()},children:g}):g},kO=(0,xg.vA)("/interface/games-dashboard/"),wO=function(e){return"asset-store"===e["initial-dialog"]||"store"===e["initial-dialog"]},TO=function(e){return"games-dashboard"===e["initial-dialog"]},SO={container:{display:"flex",flexDirection:"row-reverse",marginTop:0,marginBottom:0,flex:1,minHeight:0,width:"100%"},mobileContainer:{display:"flex",flexDirection:"column",flex:1,width:"100%"},scrollableContainer:{display:"flex",marginLeft:0,marginRight:0,flexDirection:"column",alignItems:"stretch",flex:1,height:"100%",minWidth:0,overflowY:"auto"}},PO=l.memo(l.forwardRef((function(e,t){var n=e.project,r=e.fileMetadata,i=e.canOpen,o=e.onChooseProject,a=e.onOpenRecentFile,c=e.onOpenNewProjectSetupDialog,u=e.onOpenExampleStore,p=e.onSelectExampleShortHeader,f=e.onPreviewPrivateGameTemplateListingData,h=e.onOpenPrivateGameTemplateListingData,g=e.onOpenProjectManager,x=e.onOpenLanguageDialog,m=e.onOpenProfile,v=e.setToolbar,C=e.selectInAppTutorial,j=e.onOpenPreferences,y=e.onOpenAbout,Z=e.isActive,k=e.storageProviders,T=e.onSave,S=e.canSave,P=e.resourceManagementProps,E=e.canInstallPrivateAsset,I=l.useContext(tr.ZP),M=I.authenticated,L=I.onCloudProjectsChanged,A=l.useRef(!1),O=l.useRef(!1),R=l.useContext(rv.n).fetchTutorials,D=l.useContext(MA.I).fetchExamplesAndFilters,_=l.useContext(Ry.mJ),B=_.fetchGameTemplates,N=_.shop.setInitialGameTemplateUserFriendlySlug,U=l.useState(null),H=(0,s.Z)(U,2),V=H[0],z=H[1],W=l.useState("details"),G=(0,s.Z)(W,2),q=G[0],X=G[1],K=l.useContext(Ja.Z),J=K.routeArguments,Q=K.removeRouteArguments,$=(0,w.U)().isMobile,ee=l.useContext(se.ZP).values.showGetStartedSectionByDefault,te=l.useRef(wO(J)),ne=l.useRef(TO(J)),re=te.current?"shop":ne.current?"manage":ee?"get-started":"build",ie=l.useState(re),oe=(0,s.Z)(ie,2),ae=oe[0],le=oe[1],ce=l.useState(null),ue=(0,s.Z)(ce,2),de=ue[0],pe=ue[1],fe=l.useContext(tj.KY).setInitialPackUserFriendlySlug,he=l.useState(!1),ge=(0,s.Z)(he,2),xe=ge[0],me=ge[1],ve=Mi(),be=ve.games,Ce=ve.gamesFetchingError,je=ve.fetchGames,ye=hO(),Ze=ye.shouldDisplayNewFeatureHighlighting,ke=ye.acknowledgeNewFeature,we=document.getElementById("home-manage-tab"),Te=Ze({featureId:"gamesDashboardInHomePage"}),Se=(0,Oc.Z)({includeLegacy:!1}).subscriptionPlansWithPricingSystems,Pe=Z&&Te&&we,Ee=l.useCallback((function(){me(!1),ke({featureId:"gamesDashboardInHomePage"})}),[ke]);l.useEffect((function(){wO(J)?(le("shop"),J["asset-pack"]&&fe(J["asset-pack"]),J["game-template"]&&N(J["game-template"]),Q(["initial-dialog","asset-pack","game-template"])):TO(J)&&(le("manage"),Q(["initial-dialog"]))}),[J,Q,fe,N]),l.useEffect((function(){"get-started"===re&&(0,vA.sO)()}),[re]),l.useEffect((function(){D(),B(),R()}),[D,R,B]),l.useEffect((function(){"manage"!==ae&&"build"!==ae||be||je()}),[je,ae,be]),l.useEffect((function(){if(Pe){var e=setTimeout((function(){me(!0)}),500);return function(){return clearTimeout(e)}}me(!1)}),[Pe]),l.useEffect((function(){Z&&M&&L()}),[Z,M,L]);var Me=l.useCallback((function(){}),[]),Le=l.useCallback((function(){v&&v((0,d.jsx)(XF,{hasProject:!!n,onOpenLanguageDialog:x,onOpenProfile:m,onOpenProjectManager:g,onSave:T,canSave:S}))}),[v,x,m,g,n,T,S]);l.useEffect((function(){Le()}),[Le]);var Ae=l.useCallback((function(){}),[]);l.useImperativeHandle(t,(function(){return{getProject:Me,updateToolbar:Le,forceUpdateEditor:Ae}})),l.useEffect((function(){"team-view"!==ae||M||le("build")}),[M,ae]);var Fe=l.useCallback((function(){A.current||((0,Ar.N8)(),A.current=!0)}),[]),Oe=l.useCallback((function(){O.current||((0,Ar.gw)(),O.current=!0)}),[]);l.useEffect((function(){M||(A.current=!1,O.current=!1)}),[M]);var Re=l.useCallback((function(e){var t=e.gameId;if(be){var n=be.find((function(e){return e.id===t}));n&&(z(n),le("manage"))}}),[be]),De=l.useCallback((function(e){var t=e.gameId;return!!be&&be.findIndex((function(e){return e.id===t}))>-1}),[be]);return(0,d.jsx)(b.I18n,{children:function(e){var t=e.i18n;return(0,d.jsxs)(pO,{children:[(0,d.jsxs)("div",{style:$?SO.mobileContainer:SO.container,children:[(0,d.jsxs)("div",{style:SO.scrollableContainer,children:["manage"===ae&&(0,d.jsx)(dF,{project:n,games:be,onRefreshGames:je,gamesFetchingError:Ce,openedGame:V,setOpenedGame:z,currentTab:q,setCurrentTab:X}),"get-started"===ae&&(0,d.jsx)(jA,{selectInAppTutorial:C,onUserSurveyStarted:Fe,onUserSurveyHidden:Oe,subscriptionPlansWithPricingSystems:Se,onOpenProfile:m}),"build"===ae&&(0,d.jsx)(GA,{project:n,currentFileMetadata:r,canOpen:i,onChooseProject:o,onOpenNewProjectSetupDialog:c,onSelectExampleShortHeader:p,onSelectPrivateGameTemplateListingData:f,onOpenRecentFile:a,onOpenExampleStore:u,onManageGame:Re,canManageGame:De,storageProviders:k,i18n:t}),"learn"===ae&&(0,d.jsx)(iA,{onOpenExampleStore:u,onTabChange:le,selectInAppTutorial:C,initialCategory:de}),"play"===ae&&(0,d.jsx)(XA,{}),"community"===ae&&(0,d.jsx)(AF,{}),"shop"===ae&&(0,d.jsx)(OF,{project:n,resourceManagementProps:P,canInstallPrivateAsset:E,onOpenPrivateGameTemplateListingData:h,onOpenProfile:m}),"team-view"===ae&&(0,d.jsx)(dO,{project:n,onOpenRecentFile:a,storageProviders:k,currentFileMetadata:r,onOpenTeachingResources:function(){pe("education-curriculum"),le("learn")}})]}),(0,d.jsx)(ay,{activeTab:ae,setActiveTab:le,onOpenPreferences:j,onOpenAbout:y})]}),xe&&(0,d.jsx)(ZO,{anchorElement:we,title:(0,d.jsx)(b.Trans,{id:"Games Dashboard"}),thumbnailSource:"res/features/games-dashboard.svg",thumbnailAlt:"Red hero presenting games analytics",content:[(0,d.jsx)(F.Z,{noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Follow your games\u2019 online performance, manage published versions, and collect player feedback."})},"paragraph"),(0,d.jsx)(F.Z,{noMargin:!0,children:(0,d.jsx)(Ie.Z,{href:kO,onClick:function(){return Y.ZP.openExternalURL(kO)},children:(0,d.jsx)(b.Trans,{id:"Learn more"})})},"link")],placement:$?"bottom":"right",onClose:Ee,closeWithBackdropClick:!1})]})}})})),(function(e,t){return e.isActive||t.isActive})),EO=function(e){var t=e.open,n=e.onClose,r=(0,Pt.Z)();if(!t)return null;var i=[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Close"}),primary:!0,onClick:n},"close")];return(0,d.jsxs)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"What's new in GDevelop?"}),actions:i,open:t,onRequestClose:n,flexColumnBody:!0,children:[(0,d.jsxs)(C.ep,{noMargin:!0,justifyContent:"space-between",children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"GDevelop was upgraded to a new version! Check out the changes."})}),(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"See all the release notes"}),onClick:function(){return Y.ZP.openExternalURL("https://github.com/4ian/GDevelop/releases")}})]}),(0,d.jsx)($e,{onUpdated:r})]})},IO=function(e){var t=e.defaultOpen,n=l.useState(t),r=(0,s.Z)(n,2),i=r[0],o=r[1];return(0,d.jsx)(EO,{open:i,onClose:function(){return o(!1)}})},MO=function(e){return(0,d.jsx)(se.ZP.Consumer,{children:function(e){var t=e.values,n=e.verifyIfIsNewVersion;return(0,d.jsx)(IO,{defaultOpen:n()&&t.autoDisplayChangelog})}})},LO=n(88991),AO=function(e){var t=e.open,n=e.onClose,r=l.useContext(se.ZP).values,i=l.useState(!1),o=(0,s.Z)(i,2),a=o[0],c=o[1];return t?(0,d.jsx)(b.I18n,{children:function(e){var i=e.i18n.language!==r.language.replace("_","-");return(0,d.jsx)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Language"}),actions:[(0,d.jsx)(J.Z,{label:i?(0,d.jsx)(b.Trans,{id:"Loading..."}):(0,d.jsx)(b.Trans,{id:"Close"}),primary:!1,onClick:function(){n({languageDidChange:a})},disabled:i},"close")],secondaryActions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Report a wrong translation"}),primary:!1,onClick:function(){return Y.ZP.openExternalURL("https://github.com/4ian/GDevelop/issues/969")}},"report-wrong-translation")],cannotBeDismissed:i,onRequestClose:function(){return n({languageDidChange:a})},open:t,maxWidth:"sm",children:(0,d.jsx)(Oe,{onLanguageChanged:function(){return c(!0)}})})}}):null},FO=n.g.GD_STARTUP_TIMES;FO||console.error("Could not find GD_STARTUP_TIMES array. Have you declared it in index.html, in a synchronous script?");var OO=function(){var e=["<init>",0];return{steps:FO.map((function(t){var n={stepName:t[0],time:t[1],elapsedTime:t[1]-e[1]};return e=t,n})),totalStartupTime:e[1]}},RO=(0,OM.Z)((function(e){return{root:{border:"1px solid ".concat(e.palette.divider),borderRadius:8}}})),DO=function(e){var t=e.storageProvider,n=e.onChooseProvider,r=l.useContext(tr.ZP),i=RO(),o=t.needUserAuthentication&&!r.authenticated,a=!t.disabled&&(!t.needUserAuthentication||!o);return(0,d.jsx)(b.I18n,{children:function(e){var s=e.i18n;return(0,d.jsxs)(xe.Z,{classes:i,disabled:t.disabled,onClick:a?function(){return n(t)}:null,button:a,children:[(0,d.jsx)(ZL.Z,{children:t.renderIcon?t.renderIcon({}):void 0}),(0,d.jsx)(me.Z,{children:(0,d.jsxs)(L.x1,{justifyContent:"space-between",alignItems:"center",children:[(0,d.jsx)(F.Z,{noMargin:!0,children:s._(t.name)}),o&&(0,d.jsxs)(L.x1,{noMargin:!0,children:[(0,d.jsx)(J.Z,{label:s._({id:"Create an Account"}),onClick:function(){return r.onOpenCreateAccountDialog()}}),(0,d.jsx)(L.LZ,{}),(0,d.jsx)(T.Z,{primary:!0,label:s._({id:"Login with GDevelop"}),onClick:function(){return r.onOpenLoginDialog()}})]})]})})]},t.internalName)}})},_O=ae()("electron"),BO=function(e){var t=e.onClose,n=e.storageProviders,r=e.onChooseProvider,i=n.some((function(e){return"Cloud"===e.internalName}));return(0,d.jsx)(b.I18n,{children:function(e){e.i18n;return(0,d.jsxs)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Choose where to load the project from"}),actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),primary:!1,onClick:t},"close")],onRequestClose:t,open:!0,maxWidth:"sm",children:[i&&(0,d.jsx)(De.Z,{kind:"info",children:(0,d.jsx)(b.Trans,{id:"You can find your cloud projects in the Build section of the homepage."})}),(0,d.jsx)(He.aV,{useGap:!0,children:n.filter((function(e){return!e.hiddenInOpenDialog})).map((function(e){return(0,d.jsx)(DO,{onChooseProvider:r,storageProvider:e},e.internalName)}))}),!_O&&(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(Ta.Z,{children:(0,d.jsx)(b.Trans,{id:"If you have a popup blocker interrupting the opening, allow the popups and try a second time to open the project."})})})})]})}})},NO=function(e){var t=e.onClose,n=e.storageProviders,r=e.onChooseProvider;return(0,d.jsx)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Choose where to save the project to"}),actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),primary:!1,onClick:t},"close")],onRequestClose:t,open:!0,maxWidth:"sm",children:(0,d.jsx)(He.aV,{useGap:!0,children:n.filter((function(e){return!e.hiddenInSaveDialog})).map((function(e){return(0,d.jsx)(DO,{onChooseProvider:r,storageProvider:e},e.internalName)}))})})},UO=function(e){var t=e.onClose,n=e.onConfirm;return(0,d.jsxs)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Confirm the opening"}),actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),primary:!1,onClick:t},"close"),(0,d.jsx)(te.vF,{label:(0,d.jsx)(b.Trans,{id:"Open the project"}),primary:!0,onClick:n},"open-project")],onRequestClose:t,onApply:n,open:!0,maxWidth:"sm",children:[(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:'You\'re about to open (or re-open) a project. Click on "Open the Project" to continue.'})})})}),(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(Ta.Z,{children:(0,d.jsx)(b.Trans,{id:"If you have a popup blocker interrupting the opening, allow the popups and try a second time to open the project."})})})})]})};function HO(e,t){return!t.gdVersion&&t.eventsFunctions?((0,Ur.gR)({message:[e._({id:"Unable to open this file."}),e._({id:"This file is an extension file for GDevelop 5. You should instead import it, using the window to add a new extension to your project."})].join("\n"),rawError:void 0,errorId:"extension-opened-as-project-error",doNotReport:!0}),!1):!(!t.gdVersion&&!t.eventsFunctions)||((0,Ur.gR)({message:[e._({id:"Unable to open this file."}),e._({id:"This file is not recognized as a GDevelop 5 project. Be sure to open a file that was saved using GDevelop."})].join("\n"),rawError:void 0,errorId:"malformed-project-error",doNotReport:!0}),!1)}var VO=n(36559);var zO=function(e,t,n){return e?t(e).map((function(e){return{text:e.getName(),handler:function(){return n(e.getName())}}})):[]},WO=function(e){(0,xi.YZ)("QUIT_APP",!0,{handler:e.onCloseApp}),(0,xi.YZ)("OPEN_PROFILE",!!e.project,{handler:e.onOpenProfile}),(0,xi.YZ)("OPEN_PROJECT_MANAGER",!!e.project,{handler:e.onOpenProjectManager}),(0,xi.YZ)("LAUNCH_NEW_PREVIEW",e.previewEnabled,{handler:e.onLaunchPreview}),(0,xi.YZ)("HOT_RELOAD_PREVIEW",e.hasPreviewsRunning,{handler:e.onHotReloadPreview}),(0,xi.YZ)("LAUNCH_DEBUG_PREVIEW",e.previewEnabled&&e.allowNetworkPreview,{handler:e.onLaunchDebugPreview}),(0,xi.YZ)("LAUNCH_NETWORK_PREVIEW",e.previewEnabled&&e.allowNetworkPreview,{handler:e.onLaunchNetworkPreview}),(0,xi.YZ)("OPEN_HOME_PAGE",!0,{handler:e.onOpenHomePage}),(0,xi.YZ)("CREATE_NEW_PROJECT",!0,{handler:e.onCreateBlank}),(0,xi.YZ)("OPEN_PROJECT",!0,{handler:e.onOpenProject}),(0,xi.YZ)("SAVE_PROJECT",!!e.project,{handler:e.onSaveProject}),(0,xi.YZ)("SAVE_PROJECT_AS",!!e.project,{handler:e.onSaveProjectAs}),(0,xi.YZ)("CLOSE_PROJECT",!!e.project,{handler:e.onCloseProject}),(0,xi.YZ)("EXPORT_GAME",!!e.project,{handler:e.onExportGame}),(0,xi.YZ)("INVITE_COLLABORATORS",!!e.project,{handler:e.onInviteCollaborators}),(0,xi.YZ)("OPEN_COMMAND_PALETTE",!0,{handler:e.onOpenCommandPalette}),(0,xi.gT)("OPEN_LAYOUT",!!e.project,{generateOptions:l.useCallback((function(){return zO(e.project,Ff,e.onOpenLayout)}),[e.project,e.onOpenLayout])}),(0,xi.gT)("OPEN_EXTERNAL_EVENTS",!!e.project,{generateOptions:l.useCallback((function(){return zO(e.project,Of,e.onOpenExternalEvents)}),[e.project,e.onOpenExternalEvents])}),(0,xi.gT)("OPEN_EXTERNAL_LAYOUT",!!e.project,{generateOptions:l.useCallback((function(){return zO(e.project,Rf,e.onOpenExternalLayout)}),[e.project,e.onOpenExternalLayout])}),(0,xi.gT)("OPEN_EXTENSION",!!e.project,{generateOptions:l.useCallback((function(){return zO(e.project,Df,e.onOpenEventsFunctionsExtension)}),[e.project,e.onOpenEventsFunctionsExtension])})},GO=n(59788),YO=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,d.jsx)("path",{d:"M6.00016 6.16663C5.72402 6.16663 5.50016 6.39048 5.50016 6.66663C5.50016 6.94277 5.72402 7.16663 6.00016 7.16663H7.41741L8.1925 9.49144C8.26056 9.69559 8.45163 9.83329 8.66683 9.83329H11.3335C11.6096 9.83329 11.8335 9.60944 11.8335 9.33329C11.8335 9.05715 11.6096 8.83329 11.3335 8.83329H9.02719L8.2521 6.50848C8.18403 6.30433 7.99297 6.16663 7.77776 6.16663H6.00016Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M9.7335 6.16663C9.45735 6.16663 9.2335 6.39048 9.2335 6.66663C9.2335 6.94277 9.45735 7.16663 9.7335 7.16663H11.3335C11.6096 7.16663 11.8335 6.94277 11.8335 6.66663C11.8335 6.39048 11.6096 6.16663 11.3335 6.16663H9.7335Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.51868 2.16663C4.07174 2.16663 3.64311 2.34417 3.32708 2.66021C3.01104 2.97624 2.8335 3.40487 2.8335 3.85181V12.1481C2.8335 12.595 3.01104 13.0237 3.32708 13.3397C3.64311 13.6557 4.07174 13.8333 4.51868 13.8333H12.815C13.2619 13.8333 13.6905 13.6557 14.0066 13.3397C14.3226 13.0237 14.5002 12.595 14.5002 12.1481V3.85181C14.5002 3.40487 14.3226 2.97624 14.0066 2.66021C13.6905 2.34417 13.2619 2.16663 12.815 2.16663H4.51868ZM4.03418 3.36731C4.16268 3.23882 4.33696 3.16663 4.51868 3.16663H12.815C12.9967 3.16663 13.171 3.23881 13.2995 3.36731C13.428 3.49581 13.5002 3.67009 13.5002 3.85181V12.1481C13.5002 12.3298 13.428 12.5041 13.2995 12.6326C13.171 12.7611 12.9967 12.8333 12.815 12.8333H4.51868C4.33696 12.8333 4.16268 12.7611 4.03418 12.6326C3.90568 12.5041 3.8335 12.3298 3.8335 12.1481V3.85181C3.8335 3.67009 3.90569 3.49581 4.03418 3.36731Z",fill:"currentColor"})]}))})),qO=(0,R.Z)({scrollPaper:{alignItems:"flex-start"}}),XO=(0,R.Z)({rounded:{borderRadius:4}}),KO=l.forwardRef((function(e,t){var n=qO(),r=XO(),i=(0,w.U)().isMobile,o=l.useState(""),c=(0,s.Z)(o,2),u=c[0],p=c[1],f=l.useContext(GO.Z),h=l.useState("closed"),g=(0,s.Z)(h,2),x=g[0],m=g[1],v=l.useState(null),C=(0,s.Z)(v,2),j=C[0],y=C[1],Z=(0,vL.b)(),k=Z.results,T=Z.status,S=(0,bL.l)().refine,P=l.useState("ok"),E=(0,s.Z)(P,2),I=E[0],M=E[1];l.useEffect((function(){"ok"===I&&"error"===T?M("error"):"error"===I&&"idle"===T&&M("ok")}),[T,I]);var L=!u||"error"===I,A=l.useCallback((function(e){e.handler?(e.handler(),"OPEN_COMMAND_PALETTE"!==e.name&&m("closed")):(y(e),m("option"))}),[y,m]),F=function(e){e.handler(),m("closed")},O=l.useCallback((function(){m(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?"command":"closed")}),[]),R=l.useCallback((function(e){var t=f.getNamedCommand(e);t&&A(t)}),[A,f]);l.useImperativeHandle(t,(function(){return{open:O,launchCommand:R}}));var D=(0,Ea.N)((function(){u&&S(u)}),200);l.useEffect(D,[u,D]);var _=l.useMemo((function(){var e=f.getAllNamedCommands().filter((function(e){return!Ce.Z[e.name].ghost})).map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{icon:(0,d.jsx)(YO,{})})}));if(L)return e;var t=k.hits.map((function(e){return{hit:e,handler:function(){return Y.ZP.openExternalURL(e.url)}}}));return e.concat(t)}),[f,k.hits,L]),B=l.useCallback((function(){m("closed")}),[]);return(0,d.jsx)(b.I18n,{children:function(e){var t=e.i18n;return(0,d.jsxs)(ql.Z,{onClose:B,"aria-label":"command-palette",open:"closed"!==x,fullWidth:!0,hideBackdrop:!0,maxWidth:"sm",classes:n,transitionDuration:0,PaperProps:{classes:r},children:["command"===x&&(0,d.jsx)(IL,{i18n:t,onInputChange:p,items:_,placeholder:i?{id:"Search"}:{id:"Start typing a command or searching something..."},onClose:B,onSelect:A}),"option"===x&&j&&(0,d.jsx)(IL,{i18n:t,items:j.generateOptions(),placeholder:Ce.Z[j.name],onClose:B,onSelect:F})]})}})})),JO=l.forwardRef((function(e,t){return(0,d.jsx)(CL.p,{searchClient:gL,indexName:xL,children:(0,d.jsx)(KO,{ref:t})})})),QO=(0,at.Z)((function e(t){var n=this;(0,ot.Z)(this,e),this.setActive=function(e){n._isActive=e},this.registerCommand=function(e,t){n._commands[e]=t,n._isActive&&n._centralManager.registerCommand(e,t)},this.deregisterCommand=function(e){delete n._commands[e],n._isActive&&n._centralManager.deregisterCommand(e)},this.registerAllCommandsToCentralManager=function(){Object.keys(n._commands).forEach((function(e){n._centralManager.registerCommand(e,n._commands[e])}))},this.deregisterAllCommandsFromCentralManager=function(){Object.keys(n._commands).forEach((function(e){n._centralManager.deregisterCommand(e)}))},this.getAllNamedCommands=function(){return Object.keys(n._commands).map((function(e){var t=n._commands[e];return(0,a.Z)((0,a.Z)({},t),{},{name:e})}))},this.getNamedCommand=function(e){var t=n._commands[e];return t?(0,a.Z)({name:e},t):n._centralManager.getNamedCommand(e)},this._commands={},this._isActive=!1,this._centralManager=t})),$O=function(e){var t=l.useContext(GO.Z),n=(0,Ln.Z)((function(){return new QO(t)}));return l.useEffect((function(){if(e.active)return n.setActive(!0),n.registerAllCommandsToCentralManager(),function(){n.setActive(!1),n.deregisterAllCommandsFromCentralManager()}}),[e.active,n]),(0,d.jsx)(GO.Z.Provider,{value:n,children:e.children})};function eR(e){var t=e.onClose,n=e.onLaunchNewPreview;return function(e){return e.filter((function(e){return"error"===e.kind||"fatal"===e.kind})).length>0}(e.logs)?(0,d.jsx)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Restarting the preview from scratch is required"}),actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Close"}),primary:!1,onClick:t},"close"),(0,d.jsx)(te.vF,{icon:(0,d.jsx)(j,{}),label:(0,d.jsx)(b.Trans,{id:"Close and launch a new preview"}),primary:!0,onClick:n},"new-preview")],secondaryActions:[(0,d.jsx)(Hn.Z,{helpPagePath:"/interface/preview"},"help")],onRequestClose:t,open:!0,children:(0,d.jsx)(C.ak,{noMargin:!0,children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Your latest changes could not be applied to the preview(s) being run. You should start a new preview instead to make sure that all your changes are reflected in the game."})})})}):null}var tR=ae()("electron"),nR=tR?tR.ipcRenderer:null,rR=Date.now(),iR=function(e){(0,l.useEffect)((function(){!function(e){if(null!==nR){var t={details:e?"Working on:":"Not working on",state:e?e.getName():"any game",startTimestamp:rR,largeImageKey:"gdicon",largeImageText:"GDevelop"};nR.send("update-discord-rich-presence",t)}}(e)}),[e])},oR={iconBackground:{flex:0,display:"flex",justifyContent:"left"},icon:(0,a.Z)((0,a.Z)({},mr.b),{},{padding:1})},aR=function(e){var t=e.exampleShortHeader,n=(0,w.U)().isMobile,r=t.previewImageUrls[0],i=r.endsWith("square-icon.png")?"1 / 1":"16 / 9",o=n?void 0:120,s=n?"100%":void 0;return(0,d.jsx)("div",{style:oR.iconBackground,children:(0,d.jsx)(Hg.W,{style:(0,a.Z)((0,a.Z)({},oR.icon),{},{height:o,width:s,aspectRatio:i}),src:r,alt:t.name})})},sR=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:(0,d.jsx)("path",{d:"M3 22v-2h3.5v-4.5H11V11h4.5V6.5H20V3h2v5.5h-4.5V13H13v4.5H8.5V22Z"})}))})),lR={marginRight:2,marginBottom:2,background:"none"},cR=function(e){var t,n=e.difficultyLevel,r=l.useContext(f.Z).example.difficulty.color[n];return(0,d.jsx)(be.Z,{icon:(0,d.jsx)(sR,{style:{color:r}}),size:"small",style:(0,a.Z)((0,a.Z)({},lR),{},{border:r?"1px solid ".concat(r):void 0}),label:"simple"===n?(0,d.jsx)(b.Trans,{id:"Simple"}):"advanced"===n?(0,d.jsx)(b.Trans,{id:"Advanced"}):"expert"===n?(0,d.jsx)(b.Trans,{id:"Expert"}):(t=n,t.charAt(0).toUpperCase()+t.slice(1))},"example-size-level")},uR=n(98809),dR={chip:{marginRight:2,marginBottom:2}},pR=function(e){var t,n=e.codeSizeLevel;return(0,d.jsx)(be.Z,{icon:(0,d.jsx)(uR.Z,{}),size:"small",style:dR.chip,label:"tiny"===n?(0,d.jsx)(b.Trans,{id:"Tiny"}):"small"===n?(0,d.jsx)(b.Trans,{id:"Short"}):"medium"===n?(0,d.jsx)(b.Trans,{id:"Medium"}):"big"===n?(0,d.jsx)(b.Trans,{id:"Long"}):"huge"===n?(0,d.jsx)(b.Trans,{id:"Huge"}):(t=n,t.charAt(0).toUpperCase()+t.slice(1))},"example-size-level")},fR=Y.ZP.isDev(),hR=ae()("electron"),gR=function(e){Y.ZP.openExternalURL("".concat(fR?"http://localhost:3000":"https://editor.gdevelop.io","/?project=").concat(e.projectFileUrl))};function xR(e){var t=e.isOpening,n=e.exampleShortHeader,r=e.onClose,a=e.onOpen,c=l.useState(null),u=(0,s.Z)(c,2),p=u[0],f=u[1],h=l.useState(null),g=(0,s.Z)(h,2),x=g[0],m=g[1],v=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(null),e.prev=1,e.next=4,(0,bi.W7)(n);case 4:t=e.sent,m(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),f(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),[n]);l.useEffect((function(){v()}),[v]);var j=(0,$C.LG)((0,Qe.r1)(),n),y=n.previewImageUrls.length>0,Z=!t&&j,k=l.useCallback((function(){Z&&a()}),[a,Z]);return(0,d.jsx)(te.ZP,{title:n.name,actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Back"}),primary:!1,onClick:r,disabled:t},"close"),(0,d.jsx)(Sr.Z,{isLoading:t,children:(0,d.jsx)(VZ.Z,{label:j?(0,d.jsx)(b.Trans,{id:"Open"}):(0,d.jsx)(b.Trans,{id:"Not compatible"}),primary:!0,onClick:k,disabled:!Z,buildMenuTemplate:function(e){return[{label:hR?e._({id:"Open in the web-app"}):e._({id:"Open in a new tab"}),disabled:!x,click:function(){x&&gR(x)}}]}})},"open")],open:!0,cannotBeDismissed:t,onRequestClose:r,onApply:k,children:(0,d.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[!j&&(0,d.jsx)(De.Z,{kind:"error",children:(0,d.jsx)(b.Trans,{id:"Unfortunately, this example requires a newer version of GDevelop to work. Update GDevelop to be able to open this example."})}),(0,d.jsxs)(C.ep,{alignItems:"center",noMargin:!0,children:[y?(0,d.jsx)(aR,{exampleShortHeader:n}):null,(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(L.x1,{children:(0,d.jsxs)("div",{style:{flexWrap:"wrap"},children:[n.difficultyLevel&&(0,d.jsx)(cR,{difficultyLevel:n.difficultyLevel}),n.codeSizeLevel&&(0,d.jsx)(pR,{codeSizeLevel:n.codeSizeLevel}),n.authors&&n.authors.map((function(e){return(0,d.jsx)(jr,{user:e,isClickable:!0},e.id)}))]})}),(0,d.jsx)(F.Z,{noMargin:!0,children:n.shortDescription})]})]}),x&&x.description&&(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(Pr.Z,{}),(0,d.jsx)(F.Z,{size:"body",displayInlineAsSpan:!0,children:(0,d.jsx)(Ke.r,{source:x.description})})]}),!x&&p&&(0,d.jsx)(fr.Z,{onRetry:v,children:(0,d.jsx)(b.Trans,{id:"Can't load the example. Verify your internet connection or try again later."})})]})})}var mR,vR=ae()("electron"),bR={container:{display:"flex",overflow:"hidden",paddingTop:8,paddingBottom:8,paddingRight:8},button:{alignItems:"flex-start",textAlign:"left",flex:1}},CR=function(e){var t=e.exampleShortHeader,n=e.matches,r=e.isOpening,a=e.onChoose,s=e.onOpen,c=e.onHeightComputed,u=(0,lt.Z)().showAlert,p=l.useRef(null);l.useLayoutEffect((function(){p.current&&c(p.current.getBoundingClientRect().height)}));var f=(0,$C.LG)((0,Qe.r1)(),t),h=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,bi.W7)(t);case 3:r=e.sent,gR(r),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,u({title:{id:"Unable to fetch the example."},message:{id:"Verify your internet connection or try again later."}});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[t,u]),g=function(e){var r=t[e];if(!n)return r;var i=n.filter((function(t){return t.key===e}));return 0===i.length?r:(0,d.jsx)(Zr,{text:r,matchesCoordinates:i[0].indices})};return(0,d.jsx)("div",{style:bR.container,ref:p,children:(0,d.jsxs)(C.ep,{noMargin:!0,expand:!0,children:[(0,d.jsx)(O.Z,{style:bR.button,onClick:a,focusRipple:!0,children:(0,d.jsxs)(C.ep,{noMargin:!0,expand:!0,children:[!!t.previewImageUrls.length&&(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(aR,{exampleShortHeader:t})}),(0,d.jsxs)(L.sg,{expand:!0,noMargin:!0,children:[(0,d.jsxs)(F.Z,{noMargin:!0,children:[g("name")," "]}),(0,d.jsx)(L.x1,{children:(0,d.jsxs)("div",{style:{flexWrap:"wrap"},children:[t.difficultyLevel&&(0,d.jsx)(cR,{difficultyLevel:t.difficultyLevel}),t.codeSizeLevel&&(0,d.jsx)(pR,{codeSizeLevel:t.codeSizeLevel}),t.authors&&t.authors.map((function(e){return(0,d.jsx)(jr,{user:e},e.id)}))]})}),(0,d.jsx)(F.Z,{noMargin:!0,size:"body2",displayInlineAsSpan:!0,children:g("shortDescription")})]})]})}),(0,d.jsx)(L.sg,{justifyContent:"flex-end",children:(0,d.jsx)(L.x1,{noMargin:!0,justifyContent:"flex-end",children:(0,d.jsx)(k.Z,{label:(0,d.jsx)(b.Trans,{id:"Open"}),disabled:r||!f,onClick:s,buildMenuTemplate:function(e){return[{label:e._({id:"Open details"}),click:a},{label:vR?e._({id:"Open in the web-app"}):e._({id:"Open in a new tab"}),click:function(){h(e)}}]}})})})]})})},jR=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.38082 2.20631C9.58606 2.29331 9.70892 2.50568 9.68203 2.72698L9.2316 6.43332H13.3338C13.5266 6.43332 13.7022 6.54413 13.7851 6.71812C13.8681 6.89212 13.8437 7.0983 13.7223 7.24808L8.53714 13.6481C8.3968 13.8213 8.15875 13.8807 7.95351 13.7937C7.74826 13.7067 7.6254 13.4943 7.65229 13.273L8.10272 9.56666H4.00049C3.80773 9.56666 3.63214 9.45585 3.54917 9.28186C3.46621 9.10786 3.49065 8.90168 3.612 8.7519L8.79718 2.3519C8.93752 2.17869 9.17557 2.1193 9.38082 2.20631ZM5.04909 8.56666H8.66716C8.81028 8.56666 8.94653 8.62799 9.04143 8.73512C9.13633 8.84224 9.18077 8.9849 9.16351 9.12698L8.85476 11.6675L12.2852 7.43332H8.66716C8.52404 7.43332 8.38779 7.37199 8.29289 7.26486C8.19799 7.15773 8.15355 7.01507 8.17081 6.873L8.47956 4.33248L5.04909 8.56666Z",fill:"currentColor"})}))})),yR={container:{display:"flex",overflow:"hidden",paddingTop:8,paddingBottom:8,paddingRight:8},button:{alignItems:"flex-start",textAlign:"left",flex:1},iconBackground:{flex:0,display:"flex",justifyContent:"left"},icon:(0,a.Z)((0,a.Z)({},mr.b),{},{padding:1,aspectRatio:"16 / 9"}),priceTagContainer:{position:"absolute",top:10,left:10,cursor:"default"},chip:{marginRight:2,marginBottom:2}},ZR=function(e){var t=e.privateGameTemplateListingData,n=e.matches,r=e.isOpening,i=e.onChoose,o=e.onHeightComputed,s=e.owned,c=(0,w.U)().isMobile,u=l.useRef(null);l.useLayoutEffect((function(){u.current&&o(u.current.getBoundingClientRect().height)}));var p=function(e){var r=t[e];if(!n)return r;var i=n.filter((function(t){return t.key===e}));return 0===i.length?r:(0,d.jsx)(Zr,{text:r,matchesCoordinates:i[0].indices})};return(0,d.jsx)("div",{style:yR.container,ref:u,children:(0,d.jsxs)(C.ep,{noMargin:!0,expand:!0,children:[(0,d.jsx)(O.Z,{style:yR.button,onClick:i,focusRipple:!0,children:(0,d.jsxs)(C.ep,{noMargin:!0,expand:!0,children:[!!t.thumbnailUrls.length&&(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(Hg.W,{style:(0,a.Z)((0,a.Z)({},yR.icon),{},{height:c?void 0:120,width:c?"100%":void 0}),src:(0,zy.PN)()&&t.appStoreThumbnailUrls&&t.appStoreThumbnailUrls[0]||t.thumbnailUrls[0],alt:t.name}),(0,d.jsx)("div",{style:yR.priceTagContainer,children:(0,d.jsx)(bj.ZP,{productListingData:t,withOverlay:!0,owned:s})})]}),(0,d.jsxs)(L.sg,{expand:!0,noMargin:!0,children:[(0,d.jsxs)(F.Z,{noMargin:!0,children:[p("name")," "]}),(0,d.jsx)(L.x1,{children:(0,d.jsxs)("div",{style:{flexWrap:"wrap"},children:[t.isSellerGDevelop&&(0,d.jsx)(be.Z,{icon:(0,d.jsx)(jR,{}),variant:"outlined",color:"secondary",size:"small",style:yR.chip,label:(0,d.jsx)(b.Trans,{id:"Ready-made"})},"premium"),t.categories.map((function(e){return(0,d.jsx)(be.Z,{size:"small",style:yR.chip,label:(0,RZ.capitalize)(e)},e)}))]})}),(0,d.jsx)(F.Z,{noMargin:!0,size:"body2",displayInlineAsSpan:!0,children:p("description")})]})]})}),(0,d.jsx)(L.sg,{justifyContent:"flex-end",children:(0,d.jsx)(L.x1,{noMargin:!0,justifyContent:"flex-end",children:(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Open"}),disabled:r,onClick:i})})})]})})},kR=function(e){return e.id},wR=function(e){var t=e.isOpening,n=e.onOpenNewProjectSetupDialog,r=e.focusOnMount,i=(e.selectedExampleShortHeader,e.onSelectExampleShortHeader),o=(e.selectedPrivateGameTemplateListingData,e.onSelectPrivateGameTemplateListingData),a=l.useContext(tr.ZP).receivedGameTemplates,s=l.useContext(MA.I),c=s.exampleFilters,u=s.exampleShortHeadersSearchResults,p=s.error,f=s.fetchExamplesAndFilters,h=s.filtersState,g=s.searchText,x=s.setSearchText,m=l.useContext(Ry.mJ),b=m.gameTemplateFilters,C=m.error,j=m.fetchGameTemplates,y=m.exampleStore,Z=y.privateGameTemplateListingDatasSearchResults,k=y.filtersState,w=y.setSearchText,T=(0,Gr.bX)(),S=l.useRef(null);l.useEffect((function(){r&&T&&S.current&&S.current.focus()}),[T,r]);var P=l.useMemo((function(){return{add:function(e){h.addFilter(e),k.addFilter(e)},remove:function(e){h.removeFilter(e),k.removeFilter(e)},chosenTags:h.chosenFilters}}),[h,k]),E=l.useCallback((function(e){x(e),w(e)}),[x,w]),I=l.useCallback((function(){j(),f()}),[j,f]);l.useEffect((function(){I()}),[I]);var M=function(e){if(!u)return[];var t=u.find((function(t){return t.item.id===e.id}));return t?t.matches:[]},A=function(e){if(!Z)return[];var t=Z.find((function(t){return t.item.id===e.id}));return t?t.matches:[]},F=l.useMemo((function(){var e=[],t=Z?Z.map((function(e){return e.item})):[],n=u?u.map((function(e){return e.item})):[];if(g||P.chosenTags.size>0)return[].concat((0,v.Z)(t),(0,v.Z)(n));for(var r=0;r<n.length;++r)if(e.push(n[r]),r%2===1&&t.length>0){var i=Math.floor(r/2);i<t.length&&e.push(t[i])}return e}),[u,Z,g,P]),O=l.useMemo((function(){var e=[].concat((0,v.Z)(c?c.defaultTags:[]),(0,v.Z)(b?b.defaultTags:[])),t=new Set(e);return Array.from(t)}),[c,b]);return(0,d.jsx)(l.Fragment,{children:(0,d.jsxs)(L.sg,{expand:!0,noMargin:!0,useFullHeight:!0,children:[(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,d.jsx)(st.Z,{value:g,onChange:E,onRequestSearch:function(){},tagsHandler:P,tags:O,ref:S,placeholder:{id:"Search examples"}})})}),(0,d.jsx)(L.x1,{expand:!0,overflow:"hidden",noMargin:!0,children:(0,d.jsx)(xr,{disableAutoTranslate:!0,onRetry:I,error:C||p,searchItems:F,getSearchItemUniqueId:kR,renderSearchItem:function(e,r){if(e.authorIds)return(0,d.jsx)(CR,{isOpening:t,onHeightComputed:r,exampleShortHeader:e,matches:M(e),onChoose:function(){(0,Ar.CU)(e.slug),i(e)},onOpen:function(){i(e),n()}});if(e.listing){var s=!!a&&!!a.find((function(t){return t.id===e.id}));return(0,d.jsx)(ZR,{isOpening:t,onHeightComputed:r,privateGameTemplateListingData:e,matches:A(e),onChoose:function(){o(e),(0,Ar.rG)({gameTemplateName:e.name,gameTemplateId:e.id,source:"examples-list"})},owned:s})}return null}})})]})})},TR=function(e){var t=e.open,n=e.onClose,r=e.selectedExampleShortHeader,i=e.selectedPrivateGameTemplateListingData,o=e.onSelectExampleShortHeader,a=e.onSelectPrivateGameTemplateListingData,s=e.onOpenNewProjectSetupDialog,c=e.isProjectOpening,u=l.useMemo((function(){return[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Close"}),primary:!1,onClick:n},"close"),(0,d.jsx)(te.vF,{id:"create-blank-project-button",label:(0,d.jsx)(b.Trans,{id:"Create a blank project"}),primary:!0,onClick:s},"create-blank")]}),[n,s]);return t?(0,d.jsx)(b.I18n,{children:function(e){e.i18n;return(0,d.jsx)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Create a new project"}),actions:u,onRequestClose:n,onApply:s,open:t,fullHeight:!0,flexColumnBody:!0,children:(0,d.jsx)(wR,{focusOnMount:!0,isOpening:c,onOpenNewProjectSetupDialog:s,onSelectExampleShortHeader:o,onSelectPrivateGameTemplateListingData:a,selectedExampleShortHeader:r,selectedPrivateGameTemplateListingData:i})})}}):null},SR=function(e){var t=e.privateGameTemplateListingData,n=e.privateGameTemplateListingDatasFromSameCreator,r=e.onGameTemplateOpen,i=e.onCreateWithGameTemplate,o=e.onClose;return(0,d.jsx)(te.ZP,{title:null,actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Back"}),primary:!1,onClick:o},"close")],open:!0,onRequestClose:o,minHeight:"lg",flexColumnBody:!0,children:(0,d.jsx)(UZ,{privateGameTemplateListingData:t,privateGameTemplateListingDatasFromSameCreator:n,onGameTemplateOpen:r,onCreateWithGameTemplate:i})})},PR=function(e){var t=e.isProjectOpening,n=e.onOpenNewProjectSetupDialog,r=l.useState(!1),i=(0,s.Z)(r,2),o=i[0],a=i[1],c=l.useState(null),u=(0,s.Z)(c,2),p=u[0],f=u[1],h=l.useState(null),g=(0,s.Z)(h,2),x=g[0],m=g[1],v=l.useContext(tr.ZP).receivedGameTemplates,b=l.useContext(Ry.mJ).privateGameTemplateListingDatas,C=l.useCallback((function(e){var t=e.deselectExampleAndGameTemplate;a(!1),t&&(f(null),m(null))}),[a]),j=l.useCallback((function(){a(!0)}),[a]),y=l.useMemo((function(){if(!x||!b||!v)return null;var e=v.map((function(e){return e.id}));return b.filter((function(t){return t.sellerId===x.privateGameTemplateListingData.sellerId&&!e.includes(t.sellerId)})).sort((function(e,t){return e.name.localeCompare(t.name)}))}),[x,b,v]);return{selectedExampleShortHeader:p,selectedPrivateGameTemplateListingData:x?x.privateGameTemplateListingData:null,closeExampleStoreDialog:C,openExampleStoreDialog:j,onSelectExampleShortHeader:f,onSelectPrivateGameTemplate:m,renderExampleOrGameTemplateDialogs:function(){return(0,d.jsxs)(d.Fragment,{children:[o&&(0,d.jsx)(TR,{open:!0,onClose:function(){return C({deselectExampleAndGameTemplate:!0})},isProjectOpening:t,selectedExampleShortHeader:p,selectedPrivateGameTemplateListingData:x?x.privateGameTemplateListingData:null,onSelectExampleShortHeader:f,onSelectPrivateGameTemplateListingData:function(e){return m(e?{privateGameTemplateListingData:e,openDialog:!0}:null)},onOpenNewProjectSetupDialog:n}),!!p&&(0,d.jsx)(xR,{isOpening:t,exampleShortHeader:p,onOpen:n,onClose:function(){return f(null)}}),!!x&&x.openDialog&&(0,d.jsx)(SR,{privateGameTemplateListingData:x.privateGameTemplateListingData,onCreateWithGameTemplate:n,onGameTemplateOpen:function(e){return m({privateGameTemplateListingData:e,openDialog:!0})},onClose:function(){return m(null)},privateGameTemplateListingDatasFromSameCreator:y})]})}}},ER=function(e){var t=e.project,n=e.fileMetadata,r=e.getStorageProvider,a=e.options,c=e.i18n,u=e.resourceSources,p=e.onClose,f=e.onChooseResources,h=(0,w.U)().isMobile,g=l.useMemo((function(){return r()}),[r]),x=l.useContext(se.ZP),m=u.filter((function(e){return e.kind===a.resourceKind})).filter((function(e){var t=e.onlyForStorageProvider;return!t||t===g.internalName})),j=m.filter((function(e){return"standalone"===e.displayTab})),y=m.filter((function(e){return"import"===e.displayTab})),Z=m.filter((function(e){return"import-advanced"===e.displayTab})),k=m.find((function(e){return e.name===a.initialSourceName})),T=k&&k.selectResourcesHeadless,S=l.useState((function(){return k?"import"===k.displayTab?"import":"standalone"===k.displayTab?"standalone-"+k.name:"import":"import"})),P=(0,s.Z)(S,2),E=P[0],I=P[1],M=l.useState(!1),A=(0,s.Z)(M,2),O=A[0],R=A[1],D=l.useState(!1),_=(0,s.Z)(D,2),B=_[0],N=_[1];return l.useEffect((function(){return function(){return R(!0)}}),[E]),l.useEffect((function(){if(k){var e=k.selectResourcesHeadless;e&&(0,o.Z)((0,i.Z)().mark((function o(){var s;return(0,i.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e({i18n:c,options:a,project:t,fileMetadata:n,getStorageProvider:r,getLastUsedPath:x.getLastUsedPath,setLastUsedPath:x.setLastUsedPath,resourcesImporationBehavior:x.values.resourcesImporationBehavior});case 3:s=i.sent,f(s),i.next=11;break;case 7:i.prev=7,i.t0=i.catch(0),console.error("Unexpected error from a resource source:",i.t0),f([]);case 11:case"end":return i.stop()}}),o,null,[[0,7]])})))()}}),[]),T?null:(0,d.jsxs)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"New resource"}),open:!0,fullHeight:!0,flexColumnBody:!0,actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Close"}),primary:!0,onClick:p},"close")],secondaryActions:[Z.length>0?(0,d.jsx)(L.sg,{children:(0,d.jsx)(ee.Z,{onToggle:function(e,t){return N(t)},toggled:B,labelPosition:"right",label:(0,d.jsx)(b.Trans,{id:"Show advanced import options"})})},"show-advanced-toggle"):null],onRequestClose:p,fixedContent:(0,d.jsx)(le.m,{value:E,onChange:I,options:[].concat((0,v.Z)(j.map((function(e){var t=e.name,n=e.displayName;return{label:c._(n),value:"standalone-"+t}}))),[{label:(0,d.jsx)(b.Trans,{id:"Choose a file"}),value:"import"}]),variant:h?"scrollable":void 0}),children:[j.map((function(e){return E!=="standalone-"+e.name?null:e.renderComponent({i18n:c,options:a,project:t,fileMetadata:n,getStorageProvider:r,getLastUsedPath:x.getLastUsedPath,setLastUsedPath:x.setLastUsedPath,onChooseResources:f,resourcesImporationBehavior:x.values.resourcesImporationBehavior})})),"import"===E?(0,d.jsx)(L.x1,{expand:!0,noMargin:!0,children:(0,d.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[y.map((function(e){return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(F.Z,{size:"block-title",children:c._(e.displayName)}),e.renderComponent({i18n:c,options:a,project:t,fileMetadata:n,getStorageProvider:r,getLastUsedPath:x.getLastUsedPath,setLastUsedPath:x.setLastUsedPath,onChooseResources:f,resourcesImporationBehavior:x.values.resourcesImporationBehavior,automaticallyOpenIfPossible:k===e&&!O})]},e.name)})),B&&Z.map((function(e){return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(F.Z,{size:"block-title",children:c._(e.displayName)}),e.renderComponent({i18n:c,options:a,project:t,fileMetadata:n,getStorageProvider:r,getLastUsedPath:x.getLastUsedPath,setLastUsedPath:x.setLastUsedPath,onChooseResources:f,resourcesImporationBehavior:x.values.resourcesImporationBehavior})]},e.name)}))]})}):null]})},IR={imgContainer:{marginBottom:16}},MR=function(e){var t=e.learningKeys;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"You're about to start this guided lesson."})}),(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"In this tutorial you will learn:"})}),t.map((function(e,t){return(0,d.jsx)(F.Z,{displayAsListItem:!0,noMargin:!0,children:e},t)}))]})},LR=(mR={},(0,r.Z)(mR,WM.bs,{title:(0,d.jsx)(b.Trans,{id:"Let's make a Fling Game"}),content:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"You're about to start the first chapter of this guided lesson."})}),(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"GDevelop will save your progress so you can take a break when you need it."})})]})}),(0,r.Z)(mR,WM.Xj,{title:(0,d.jsx)(b.Trans,{id:"Let's improve a scoring system"}),content:MR({learningKeys:[(0,d.jsx)(b.Trans,{id:"Making objects disappear or appear when colliding"}),(0,d.jsx)(b.Trans,{id:"Creating, modifying and accessing a scene variable"}),(0,d.jsx)(b.Trans,{id:"Updating a score accordingly"})]})}),(0,r.Z)(mR,WM.HD,{title:(0,d.jsx)(b.Trans,{id:"Let's use time to measure a score"}),content:MR({learningKeys:[(0,d.jsx)(b.Trans,{id:"Create and modify a text"}),(0,d.jsx)(b.Trans,{id:"Start a timer"}),(0,d.jsx)(b.Trans,{id:"Use the timer to display a score"})]})}),(0,r.Z)(mR,WM.UO,{title:(0,d.jsx)(b.Trans,{id:"Let's improve the camera and the background"}),content:MR({learningKeys:[(0,d.jsx)(b.Trans,{id:"Add a background with parallax effect"}),(0,d.jsx)(b.Trans,{id:"Add an extension"}),(0,d.jsx)(b.Trans,{id:"Use basic camera movements to follow the player"})]})}),(0,r.Z)(mR,WM.yw,{title:(0,d.jsx)(b.Trans,{id:"Let's communicate to the player the remaining health points"}),content:MR({learningKeys:[(0,d.jsx)(b.Trans,{id:"Use a prefab for a health bar"}),(0,d.jsx)(b.Trans,{id:"Update the health bar based on the player's health"})]})}),(0,r.Z)(mR,WM.EB,{title:(0,d.jsx)(b.Trans,{id:"Let's add mobile controls to our game"}),content:MR({learningKeys:[(0,d.jsx)(b.Trans,{id:"Add a joystick prefab"}),(0,d.jsx)(b.Trans,{id:"Add a behavior"})]})}),(0,r.Z)(mR,WM.Rv,{title:(0,d.jsx)(b.Trans,{id:"Let's add a 3D object to our game"}),content:MR({learningKeys:[(0,d.jsx)(b.Trans,{id:"Add a 3D Box"}),(0,d.jsx)(b.Trans,{id:"Add a behavior"})]})}),mR),AR=function(e){var t=e.open,n=e.tutorialId,r=e.onClose,i=e.tutorialCompletionStatus,o=e.isProjectOpened,a=e.startTutorial,s=e.isProjectOpening,l=function(){return a("startOver")},c={notStarted:{title:LR[n].title,content:LR[n].content,primaryAction:{label:(0,d.jsx)(b.Trans,{id:"Yes"}),onClick:function(){return a("start")}},secondaryAction:{label:(0,d.jsx)(b.Trans,{id:"No"}),onClick:r},tertiaryAction:null},started:{title:(0,d.jsx)(b.Trans,{id:"Welcome back!"}),content:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Let's finish your Fling Game, shall we?"})}),primaryAction:{label:(0,d.jsx)(b.Trans,{id:"Let's go"}),onClick:function(){return a("resume")}},secondaryAction:{label:o?(0,d.jsx)(b.Trans,{id:"No, close project"}):(0,d.jsx)(b.Trans,{id:"No"}),onClick:r},tertiaryAction:{label:(0,d.jsx)(b.Trans,{id:"Restart tutorial"}),onClick:l}},complete:{title:(0,d.jsx)(b.Trans,{id:"Restart the Tutorial"}),content:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"You're about to restart this 3-chapter guided lesson."})}),(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"GDevelop will save your progress, so you can take a break if you need."})})]}),primaryAction:{label:(0,d.jsx)(b.Trans,{id:"Yes"}),onClick:l},secondaryAction:{label:(0,d.jsx)(b.Trans,{id:"No"}),onClick:r},tertiaryAction:null}}[(0,WM.d1)(n)?"notStarted":i],u=c.title,p=c.content,f=c.primaryAction,h=c.secondaryAction,g=c.tertiaryAction,x=[(0,d.jsx)(J.Z,{label:h.label,onClick:h.onClick,disabled:s},"close"),(0,d.jsx)(te.vF,{label:f.label,primary:!0,onClick:f.onClick,disabled:s},"start")],m=g?[(0,d.jsx)(J.Z,{label:g.label,onClick:g.onClick,disabled:s},"other")]:void 0;return(0,d.jsx)(te.ZP,{title:u,actions:x,secondaryActions:m,open:t,onRequestClose:r,onApply:f.onClick,maxWidth:"xs",cannotBeDismissed:!0,children:(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(L.x1,{alignItems:"center",justifyContent:"center",noMargin:!0,children:(0,d.jsx)("div",{style:IR.imgContainer,children:(0,d.jsx)("img",{alt:"hero",src:"res/hero.png",width:48,height:48})})}),p,(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Are you ready?"})})]})})},FR=n(84360),OR=n.g.gd,RR=function(e){e.leaderboardsToReplace;var t=e.onClose,n=e.onTriggerReplace,r=l.useContext(tr.ZP),i=r.authenticated,o=r.onOpenLoginDialog;return(0,d.jsx)(te.ZP,{title:(0,d.jsx)(b.Trans,{id:"Set up new leaderboards for this game"}),actions:i?[(0,d.jsx)(J.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Close"}),onClick:t},"register-close"),(0,d.jsx)(te.vF,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Create new leaderboards now"}),onClick:n,id:"create-and-replace-new-leaderboard"},"register-game-now")]:[(0,d.jsx)(J.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Close"}),onClick:t},"login-close"),(0,d.jsx)(te.vF,{label:(0,d.jsx)(b.Trans,{id:"Login now"}),primary:!0,onClick:function(){return o()},id:"login-now"},"login-now")],open:!0,maxWidth:"sm",onRequestClose:t,children:(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsxs)(C.ak,{noMargin:!0,children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"This game is using leaderboards. GDevelop will create new leaderboards for this game in your account, so that the game is ready to be played and players can send their scores."})}),(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"If you skip this step, you can still do it manually later from the leaderboards panel in your Games Dashboard."})})]})})})},DR=function(e){var t=e.erroredLeaderboards,n=e.onRetry,r=e.onAbandon,i=e.progress,o=t.length>0;return(0,d.jsx)(te.ZP,{title:null,actions:[n?(0,d.jsx)(te.vF,{label:(0,d.jsx)(b.Trans,{id:"Retry"}),primary:!0,onClick:n},"retry"):null,(0,d.jsx)(J.Z,{label:r?(0,d.jsx)(b.Trans,{id:"Abandon"}):(0,d.jsx)(b.Trans,{id:"Please wait..."}),disabled:!r,onClick:r},"close")],cannotBeDismissed:!o,open:!0,maxWidth:"sm",children:(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsxs)(C.ak,{expand:!0,children:[(0,d.jsx)(F.Z,{children:o&&100===i?(0,d.jsx)(b.Trans,{id:"There were errors when preparing new leaderboards for the project."}):(0,d.jsx)(b.Trans,{id:"Preparing the leaderboard for your game..."})}),(0,d.jsx)(L.x1,{noMargin:!0,expand:!0,children:(0,d.jsx)(Sa.Z,{variant:"determinate",value:i})}),o&&100===i?(0,d.jsxs)(ZC.iA,{children:[(0,d.jsx)(ZC.xD,{children:(0,d.jsxs)(ZC.SC,{children:[(0,d.jsx)(ZC.bY,{children:"Leaderboard ID"}),(0,d.jsx)(ZC.bY,{children:"Error"})]})}),(0,d.jsx)(ZC.RM,{children:t.map((function(e){var t=e.leaderboardId,n=e.error;return(0,d.jsxs)(ZC.SC,{children:[(0,d.jsx)(ZC.Nn,{children:t}),(0,d.jsx)(ZC.Nn,{children:n.toString()})]},t)}))})]}):null]})})})},_R=n(78602),BR=n.n(_R),NR=["abandoned","abashed","aberrant","abhorrent","abiding","abject","ablaze","able","abounding","abrasive","abrupt","absent","absorbed","absorbing","abstracted","absurd","abundant","acceptable","accessible","accidental","accurate","acidic","acoustic","acrid","actionable","active","actual","adamant","adaptable","adept","adhesive","adjoining","adorable","adroit","adventurous","affable","affectionate","afraid","aggressive","agile","agonizing","agreeable","airy","alert","alive","alleged","alluring","aloof","amazing","ambiguous","ambitious","amiable","ample","amused","amusing","ancient","angry","animated","annoyed","annoying","anxious","apathetic","apt","aquatic","ardent","aromatic","arrogant","ashamed","aspiring","assorted","astonishing","astute","attractive","august","auspicious","automatic","available","average","avid","aware","awesome","awful","axiomatic","bad","balmy","barbarous","bashful","bawdy","beautiful","befitting","belligerent","beneficial","benevolent","bent","berserk","best","better","bewildered","big","billowing","billowy","bitter","bizarre","blessed","bloody","blue","blushing","boiling","bold","boorish","bored","boring","boss","bouncy","boundless","brainy","brash","brave","brawny","breakable","breezy","brief","bright","brisk","broad","broken","bumpy","burly","bustling","busy","cagey","calculating","callous","calm","can","canny","capable","capricious","cared","careful","careless","caring","casual","cautious","ceaseless","celestial","certain","changeable","charming","cheap","cheerful","chemical","chic","chief","childlike","chilly","chivalrous","choice","chosen","chubby","chummy","chunky","civic","civil","clammy","classy","clean","clear","clever","cloistered","close","closed","cloudy","clumsy","cluttered","cogent","coherent","cold","colorful","colossal","combative","comfortable","common","complete","complex","composed","concerned","condemned","confused","conscious","cooing","cool","cooperative","coordinated","cosmic","courageous","cowardly","cozy","crabby","craven","crazy","creepy","crooked","crowded","cruel","cuddly","cultured","cumbersome","curious","curly","curved","curvy","cut","cute","cynical","daffy","daily","dainty","damaged","damaging","damp","dandy","dangerous","dapper","daring","dark","dashing","dazzling","dead","deadpan","deafening","dear","debonair","decent","decisive","decorous","deep","deeply","defeated","defective","defiant","deft","delicate","delicious","delightful","delirious","deluxe","demonic","dependent","deranged","descriptive","deserted","detailed","determined","devilish","devout","didactic","different","difficult","diligent","direct","direful","dirty","disagreeable","disastrous","discreet","disgusted","disgusting","disillusioned","dispensable","distinct","disturbed","divergent","divine","dizzy","domineering","doted","doting","doubtful","drab","draconian","dramatic","dreamy","dreary","driven","dry","dull","dusty","dynamic","dysfunctional","eager","early","earsplitting","earthy","easy","eatable","economic","educated","efficacious","efficient","eight","elastic","elated","electric","elegant","elfin","elite","embarrassed","eminent","empty","enchanted","enchanting","encouraging","end","endurable","energetic","energized","enigmatic","enormous","entertaining","enthusiastic","envious","equable","equal","erect","erratic","ethereal","evanescent","evasive","even","evil","exact","excellent","excited","exciting","exclusive","exotic","expensive","expert","exuberant","exultant","fabulous","faded","faint","fair","faithful","fallacious","false","famed","familiar","famous","fanatical","fancy","fantastic","far","fascinated","fast","faulty","fearful","fearless","feigned","fertile","festive","few","fierce","fiery","filthy","fine","finicky","first","fit","fixed","flagrant","flaky","flashy","flat","flawless","fleet","flimsy","flippant","flowery","flowing","fluent","fluffy","fluttering","flying","foamy","fond","foolish","for","foregoing","forgetful","forlorn","fortunate","fragile","frail","frank","frantic","free","freezing","frequent","fresh","fretful","friendly","frightened","frightening","full","fumbling","fun","functional","funny","furry","furtive","fuscia","future","futuristic","fuzzy","gabby","gainful","gamy","gaping","garrulous","gas","gaudy","general","genial","gentle","giant","giddy","gifted","gigantic","giving","glad","glamorous","gleaming","glib","glistening","glorious","glossy","gnarly","godly","gold","golden","good","goodly","goofy","gorgeous","graceful","grand","grandiose","grateful","gratis","gray","greasy","great","greedy","green","grey","grieving","groovy","grotesque","grouchy","grubby","gruesome","grumpy","guarded","guided","guiltless","gullible","gusty","gutsy","guttural","habitual","half","hallowed","haloed","halting","handsome","handsomely","handy","hanging","hapless","happy","hard","hardy","harmonious","harsh","heady","healthy","heartbreaking","hearty","heavenly","heavy","hellish","helpful","helpless","heroic","hesitant","hideous","high","highfalutin","hilarious","hip","hissing","historical","holistic","hollow","holy","homely","honest","honorable","horrible","hospitable","hot","huge","hulking","human","humane","humble","humdrum","humorous","hungry","hunky","hurried","hurt","hushed","husky","hypnotic","hysterical","icky","icy","ideal","ignorant","ill","illegal","illustrious","imaginary","immense","imminent","immune","impartial","imperfect","impolite","important","imported","impossible","incandescent","incompetent","inconclusive","incredible","indigo","industrious","inexpensive","infamous","innate","innocent","inquisitive","insidious","instinctive","intelligent","interesting","internal","invincible","irate","irritating","itchy","jaded","jagged","jazzed","jazzy","jealous","jittery","jolly","jovial","joyful","joyous","jubilant","judicious","juicy","jumbled","jumpy","just","kaput","keen","khaki","kind","kindhearted","kindly","kingly","knotty","knowing","knowledgeable","known","labored","lackadaisical","lacking","lame","lamentable","languid","large","last","late","laughable","lavish","lawful","lazy","lean","legal","legit","lethal","level","lewd","light","like","likeable","likely","limber","limitless","limping","literate","little","lively","living","lonely","long","longing","loose","lopsided","loud","lousy","loutish","loved","lovely","loving","low","lowly","loyal","lucid","lucky","ludicrous","lumpy","lush","luxuriant","lying","lyrical","macabre","macho","maddening","madly","magenta","magical","magnificent","main","majestic","major","makeshift","malicious","mammoth","maniacal","many","marked","married","marvelous","massive","material","materialistic","max","maxed","mean","measly","meaty","medical","meek","mellow","melodic","melted","merciful","mere","merry","messy","mighty","military","milky","mindless","miniature","minor","mint","mirthful","miscreant","misty","mixed","moaning","modern","modest","moldy","momentous","money","moonlit","moral","motionless","mountainous","moving","mucho","muddled","mundane","murky","mushy","mute","mutual","mysterious","naive","nappy","narrow","nasty","native","natural","naughty","nauseating","near","neat","nebulous","necessary","needed","needless","needy","neighborly","nervous","new","next","nice","nifty","nimble","nippy","noble","noiseless","noisy","nonchalant","nondescript","nonstop","normal","nostalgic","nosy","noted","novel","noxious","null","numberless","numero","numerous","nutritious","nutty","oafish","obedient","obeisant","obnoxious","obscene","obsequious","observant","obsolete","obtainable","oceanic","odd","offbeat","okay","omniscient","onerous","open","opposite","optimal","orange","ordinary","organic","ossified","outgoing","outrageous","outstanding","oval","overconfident","overjoyed","overrated","overt","overwrought","pacific","painful","painstaking","pale","paltry","panicky","panoramic","parallel","parched","parsimonious","past","pastoral","pathetic","peaceful","peachy","penitent","peppy","perfect","periodic","permissible","perpetual","petite","phobic","physical","picayune","pink","piquant","pithy","placid","plain","plant","plastic","plausible","pleasant","plucky","plum","poetic","pointless","poised","polite","political","posh","possessive","possible","potent","powerful","precious","premium","present","pretty","previous","pricey","prickly","prime","primo","private","prized","pro","probable","productive","profuse","prompt","proper","protective","proud","psychedelic","psychotic","public","puffy","pumped","punchy","puny","pure","purple","purring","pushy","puzzled","puzzling","quack","quaint","quarrelsome","questionable","quick","quickest","quiet","quirky","quixotic","quizzical","rabid","rad","radioactive","ragged","rainy","rambunctious","rampant","rapid","rare","raspy","ratty","reach","ready","real","rebel","receptive","recondite","red","redundant","reflective","regal","regular","relieved","remarkable","reminiscent","repulsive","resilient","resolute","resonant","responsible","rhetorical","rich","right","righteous","rightful","rigid","ripe","ritzy","roasted","robust","romantic","roomy","rooted","rosy","rotten","rough","round","royal","ruddy","rude","rugged","rural","rustic","ruthless","sable","sad","safe","salty","same","sassy","satisfying","saucy","savory","savvy","scandalous","scarce","scared","scary","scattered","scenic","scientific","scintillating","scrawny","screeching","second","secret","secretive","sedate","seemly","selective","selfish","sensitive","separate","serene","serious","shaggy","shaky","shallow","sharp","shiny","shivering","shocking","short","showy","shrewd","shrill","shut","shy","sick","silent","silky","silly","simple","simplistic","sincere","skillful","skinny","sleek","sleepy","slick","slim","slimy","slippery","sloppy","slow","small","smart","smelly","smiley","smiling","smoggy","smooth","snappy","snazzy","sneaky","snobbish","snotty","snowy","snugly","social","soft","soggy","sole","solid","solitary","somber","sophisticated","sordid","sore","sound","sour","spacial","sparkling","special","spectacular","spicy","spiffy","spiky","spiritual","spiteful","splendid","spooky","spotless","spotted","spotty","spry","spurious","squalid","square","squealing","squeamish","stable","staking","stale","standing","star","stark","statuesque","steadfast","steady","steep","stereotyped","sticky","stiff","stimulating","stingy","stoic","stormy","straight","strange","striped","strong","stunning","stupendous","sturdy","suave","subdued","subsequent","substantial","subtle","successful","succinct","sudden","sulky","sunny","sunset","super","superb","superficial","supreme","sure","swank","swanky","sweet","swell","sweltering","swift","symptomatic","synonymous","taboo","tacit","tacky","talented","tall","tame","tan","tangible","tangy","tart","tasteful","tasteless","tasty","tawdry","teal","tearful","tedious","teeny","telling","temporary","tender","tense","tenuous","terrible","terrific","tested","testy","thankful","therapeutic","thin","thinkable","third","thoughtful","thoughtless","threatening","thriving","thundering","tidy","timely","tiny","tired","tiresome","toothsome","top","tops","torpid","tough","touted","towering","tranquil","trashy","tremendous","tricky","trim","trite","tropical","troubled","truculent","true","trusty","truthful","try","typical","ubiquitous","ultra","unable","unaccountable","unadvised","unarmed","unbecoming","unbiased","uncovered","understood","undisturbed","unequal","unequaled","uneven","unhealthy","uninterested","unique","united","unkempt","unknown","unnatural","unruly","unsightly","unsuitable","untidy","unused","unusual","unwavering","unwieldy","unwritten","upbeat","uplifting","uppity","upset","uptight","urbane","usable","used","useful","utmost","utopian","utter","uttermost","vacuous","vagabond","vague","valid","valuable","various","vast","vengeful","venomous","verdant","versed","vestal","viable","victorious","vigorous","violent","violet","vital","vivacious","vivid","vocal","vogue","voiceless","volatile","voracious","wacky","waggish","waiting","wakeful","wandering","wanted","wanting","warlike","warm","wary","wasteful","watery","weak","wealthy","weary","wet","whimsical","whispering","whole","wholesale","wicked","wide","wiggly","wild","willing","windy","winged","wired","wiry","wise","wistful","witty","woebegone","wonderful","wooden","woozy","workable","worried","worthy","wrathful","wretched","wrong","wry","yielding","young","youthful","yummy","zany","zealous","zesty","zippy","zonked"],UR=["account","achiever","acoustics","act","action","activity","actor","addition","adjustment","advertisement","advice","aftermath","afternoon","afterthought","agreement","air","airplane","airport","alarm","amount","amusement","anger","angle","animal","ants","apparatus","apparel","appliance","approval","arch","argument","arithmetic","arm","army","art","attack","attraction","authority","back","badge","bag","bait","balance","ball","base","baseball","basin","basket","basketball","bat","bath","battle","bead","bear","bed","bedroom","beds","bee","beef","beginner","behavior","belief","believe","bell","bells","berry","bike","bikes","bird","birds","birth","birthday","bit","bite","blade","blood","blow","board","boat","bomb","bone","book","books","boot","border","bottle","boundary","box","brake","branch","brass","breath","brick","bridge","bubble","bucket","building","bulb","burst","bushes","business","butter","button","cabbage","cable","cactus","cake","cakes","calculator","calendar","camera","camp","can","cannon","canvas","cap","caption","car","card","care","carpenter","carriage","cars","cart","cast","cat","cats","cattle","cause","cave","celery","cellar","cemetery","cent","chalk","chance","change","channel","cheese","cherries","cherry","chess","chicken","chickens","chin","church","circle","clam","class","cloth","clover","club","coach","coal","coast","coat","cobweb","coil","collar","color","committee","company","comparison","competition","condition","connection","control","cook","copper","corn","cough","country","cover","cow","cows","crack","cracker","crate","crayon","cream","creator","creature","credit","crib","crime","crook","crow","crowd","crown","cub","cup","current","curtain","curve","cushion","day","death","debt","decision","deer","degree","design","desire","desk","destruction","detail","development","digestion","dime","dinner","dinosaurs","direction","dirt","discovery","discussion","distance","distribution","division","dock","doctor","dog","dogs","doll","dolls","donkey","door","downtown","drain","drawer","dress","drink","driving","drop","duck","ducks","dust","ear","earth","earthquake","edge","education","effect","egg","eggnog","eggs","elbow","end","engine","error","event","example","exchange","existence","expansion","experience","expert","eye","eyes","face","fact","fairies","fall","fang","farm","fear","feeling","field","finger","fire","fish","flag","flame","flavor","flesh","flight","flock","floor","flower","flowers","fly","fog","fold","food","foot","force","fork","form","fowl","frame","friction","friend","friends","frog","frogs","front","fruit","fuel","furniture","gate","geese","ghost","giants","giraffe","glass","glove","gold","government","governor","grade","grain","grape","grass","grip","ground","group","growth","guide","guitar","gun","hair","haircut","hall","hammer","hand","hands","harbor","harmony","hat","head","health","heat","hill","history","hobbies","hole","holiday","home","honey","hook","hope","horn","horse","horses","hose","hospital","hot","hour","house","houses","humor","hydrant","ice","icicle","idea","impulse","income","increase","industry","ink","insect","instrument","insurance","interest","invention","iron","island","jail","jam","jar","jeans","jelly","jellyfish","jewel","join","judge","juice","jump","kettle","key","kick","kiss","kittens","kitty","knee","knife","knot","knowledge","laborer","lace","ladybug","lake","lamp","land","language","laugh","leather","leg","legs","letter","letters","lettuce","level","library","limit","line","linen","lip","liquid","loaf","lock","locket","look","loss","love","low","lumber","lunch","lunchroom","machine","magic","maid","mailbox","marble","mark","market","mask","mass","match","meal","measure","meat","meeting","memory","metal","mice","middle","milk","mind","mine","minister","mint","minute","mist","mitten","money","month","moon","morning","mother","motion","mountain","mouth","move","muscle","name","nation","neck","need","needle","nerve","nest","night","noise","north","nose","note","notebook","number","nut","oatmeal","observation","ocean","offer","office","oil","orange","oranges","order","oven","page","pail","pan","pancake","paper","parcel","part","partner","party","passenger","payment","peace","pear","pen","pencil","person","pest","pet","pets","pickle","picture","pie","pies","pig","pigs","pin","pipe","pizzas","place","plane","planes","plant","plantation","plants","plastic","plate","play","playground","pleasure","plot","plough","pocket","point","poison","pollution","popcorn","porter","position","pot","potato","powder","power","price","produce","profit","property","prose","protest","pull","pump","punishment","purpose","push","quarter","quartz","question","quicksand","quiet","quill","quilt","quince","quiver","rabbit","rabbits","rail","railway","rain","rainstorm","rake","range","rat","rate","ray","reaction","reading","reason","receipt","recess","record","regret","relation","religion","representative","request","respect","rest","reward","rhythm","rice","riddle","rifle","ring","rings","river","road","robin","rock","rod","roll","roof","room","root","rose","route","rub","rule","run","sack","sail","salt","sand","scale","scarecrow","scarf","scene","scent","school","science","scissors","screw","sea","seashore","seat","secretary","seed","selection","self","sense","servant","shade","shake","shame","shape","sheep","sheet","shelf","ship","shirt","shock","shoe","shoes","shop","show","side","sidewalk","sign","silk","silver","sink","size","skate","skin","skirt","sky","sleep","sleet","slip","slope","smash","smell","smile","smoke","snail","snails","snake","snakes","sneeze","snow","soap","society","sock","soda","sofa","song","songs","sort","sound","soup","space","spade","spark","spiders","sponge","spoon","spot","spring","spy","square","squirrel","stage","stamp","star","start","statement","station","steam","steel","stem","step","stew","stick","sticks","stitch","stocking","stomach","stone","stop","store","story","stove","stranger","straw","stream","street","stretch","string","structure","substance","sugar","suggestion","suit","summer","sun","support","surprise","sweater","swim","swing","system","table","tail","talk","tank","taste","tax","teaching","team","teeth","temper","tendency","tent","territory","test","texture","theory","thing","things","thought","thread","thrill","throat","throne","thumb","thunder","ticket","tiger","time","tin","title","toad","toe","toes","tomatoes","tongue","tooth","toothbrush","toothpaste","top","touch","town","toy","toys","trade","trail","train","trains","tramp","transport","tray","treatment","tree","trees","trick","trip","trouble","trousers","truck","trucks","tub","turkey","turn","twig","twist","umbrella","underwear","unit","use","vacation","value","van","vase","vegetable","veil","vein","verse","vessel","vest","view","visitor","voice","volcano","volleyball","voyage","walk","wall","war","wash","waste","watch","water","wave","waves","wax","way","wealth","weather","week","weight","wheel","whip","whistle","wilderness","wind","window","wine","wing","winter","wire","wish","wood","wool","word","work","worm","wound","wren","wrench","wrist","writer","writing","yak","yam","yard","yarn","year","yoke","zebra","zephyr","zinc","zipper","zoo"],HR=function(){return"".concat(gj()(BR()(NR))," ").concat(gj()(BR()(UR)))},VR=n(37489),zR=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o,a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.userId,o=n.generatedProjectId,e.next=3,t();case 3:return a=e.sent,e.next=6,We().get("".concat(Ge.xP.baseUrl,"/generated-project/").concat(o),{params:{userId:r},headers:{Authorization:a}});case 6:return s=e.sent,e.abrupt("return",s.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),WR=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o,a,s,l,c,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.userId,o=n.prompt,a=n.width,s=n.height,l=n.projectName,e.next=3,t();case 3:return c=e.sent,e.next=6,We().post("".concat(Ge.xP.baseUrl,"/generated-project"),{prompt:o,width:a,height:s,projectName:l},{params:{userId:r},headers:{Authorization:c}});case 6:return u=e.sent,e.abrupt("return",u.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),GR=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"54",height:"38",viewBox:"0 0 54 38",fill:"none",children:(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M51 2.09815e-06C52.6569 2.17057e-06 54 1.34315 54 3V35C54 36.6569 52.6569 38 51 38L3 38C1.34315 38 0 36.6569 0 35V3C0 1.34315 1.34315 0 3 0L51 2.09815e-06ZM51 1C52.1046 1 53 1.89543 53 3V35C53 36.1046 52.1046 37 51 37L3 37C1.89543 37 1 36.1046 1 35L1 3C1 1.89543 1.89543 1 3 1L51 1Z",fill:"currentColor"})}))})),YR=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"40",height:"26",viewBox:"0 0 40 26",fill:"none",children:(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M37 0C38.6569 0 40 1.34315 40 3V23C40 24.6569 38.6569 26 37 26L3 26C1.34314 26 0 24.6569 0 23V3C0 1.34315 1.34315 0 3 0H37ZM37 1C38.1046 1 39 1.89543 39 3V23C39 24.1046 38.1046 25 37 25L3 25C1.89543 25 1 24.1046 1 23L1 3C1 1.89543 1.89543 1 3 1L37 1Z",fill:"currentColor"})}))})),qR=l.memo((function(e){return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"26",height:"40",viewBox:"0 0 26 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 3C0 1.34315 1.34315 0 3 0H23C24.6569 0 26 1.34315 26 3V37C26 38.6569 24.6569 40 23 40H3C1.34315 40 0 38.6569 0 37V3ZM1 3C1 1.89543 1.89543 1 3 1H23C24.1046 1 25 1.89543 25 3V37C25 38.1046 24.1046 39 23 39H3C1.89543 39 1 38.1046 1 37V3Z",fill:"currentColor"})}))})),XR=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"60",height:"46",viewBox:"0 0 60 46",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M53.9614 6.1923L6.1922 6.1923L6.19219 39.8077H53.9614V6.1923ZM7.1922 7.1923L7.19219 38.8077H52.9614V7.1923L7.1922 7.1923Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M7.0769 46L7.0769 41.5769H6.0769L6.0769 46H7.0769Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M7.0769 0V4.42308H6.0769V0H7.0769Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M0 7.07689H4.42308V6.07689H0V7.07689Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M53.0769 0V4.42308H54.0769V0H53.0769Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M60.1538 7.07689H55.7307V6.07689H60.1538V7.07689Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M53.0769 46V41.5769H54.0769V46H53.0769Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M60.1538 38.9231H55.7307V39.9231H60.1538V38.9231Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M0 38.9231H4.42308V39.9231H0V38.9231Z",fill:"currentColor"})]}))})),KR={optionsContainer:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(8rem, 1fr))",gridGap:"0.5rem",margin:2},optionContainer:{display:"flex",flexDirection:"column",flex:1,marginLeft:4,marginRight:4},buttonBase:{height:"100%",width:"100%",borderRadius:8,padding:8,cursor:"default",overflow:"hidden",boxSizing:"border-box"},contentWrapper:{height:"100%",width:"100%",display:"flex"},largeIcon:{transform:"scale(1.5)"},customSizeField:{fontSize:12,padding:2}},JR={mobilePortrait:{label:(0,d.jsx)(b.Trans,{id:"Mobile portrait"}),width:720,height:1280,orientation:"portrait",icon:(0,d.jsx)(qR,{fontSize:"large"})},desktopMobileLandscape:{label:(0,d.jsx)(b.Trans,{id:"Desktop & Mobile landscape"}),width:1280,height:720,orientation:"landscape",icon:(0,d.jsx)(YR,{fontSize:"large"})},desktopHD:{label:(0,d.jsx)(b.Trans,{id:"Desktop Full HD"}),width:1920,height:1080,orientation:"default",icon:(0,d.jsx)(GR,{fontSize:"large",style:KR.largeIcon})},custom:{label:(0,d.jsx)(b.Trans,{id:"Custom size"}),orientation:"default",icon:(0,d.jsx)(XR,{fontSize:"large",style:KR.largeIcon})}},QR=function(e){var t=e.value,n=e.onChange,r=e.defaultValue;e.disabled;return(0,d.jsx)(An.Z,{margin:"none",style:KR.customSizeField,inputStyle:{padding:0},type:"number",value:t?t.toString(10):"",onChange:function(e){var t=parseInt(e,10),r=isNaN(t)?null:t;n(r)},onBlur:function(){var e=parseInt(t||r,10),i=Math.min(Math.max(e,1),9999);n(i)},min:0,max:9999,step:10})},$R=function(e){var t=e.children,n=e.onClick,r=e.selected,i=e.disabled,o=function(e){return(0,OM.Z)((function(t){return(0,RM.Z)({root:{outline:e?"2px solid ".concat(t.palette.secondary.dark):"1px solid ".concat(t.palette.text.disabled),"&:focus":{backgroundColor:t.palette.action.hover},"&:hover":{backgroundColor:t.palette.action.hover}}})}))()}(r);return(0,d.jsx)(O.Z,{onClick:n,elevation:2,style:(0,a.Z)({},KR.buttonBase),classes:o,tabIndex:0,onKeyPress:function(e){(0,kn.ph)(e)&&!r&&n()},disableTouchRipple:r,disabled:i,children:(0,d.jsx)("div",{style:KR.contentWrapper,children:t})})},eD=function(e){var t=e.selectedOption,n=e.onClick,r=e.disabled,i=e.customWidth,o=e.customHeight,a=e.onCustomWidthChange,s=e.onCustomHeightChange;return(0,d.jsx)("div",{style:KR.optionsContainer,children:Object.keys(JR).map((function(e,l){var c=JR[e],u=c.width,p=c.height,f=c.label,h=c.icon;return(0,d.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,d.jsx)($R,{onClick:function(){return n(e)},selected:t===e,disabled:r,children:(0,d.jsxs)(L.sg,{expand:!0,alignItems:"center",justifyContent:"center",noMargin:!0,children:[h,(0,d.jsx)(L.LZ,{}),(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(F.Z,{size:"body2",noMargin:!0,children:f}),u&&p?(0,d.jsxs)(F.Z,{size:"body-small",noMargin:!0,color:"secondary",children:[u,"x",p]}):(0,d.jsxs)(L.x1,{noMargin:!0,alignItems:"center",justifyContent:"center",children:[(0,d.jsx)(F.Z,{size:"body-small",noMargin:!0,color:"secondary",children:"W"}),(0,d.jsx)(QR,{value:i,onChange:a,defaultValue:800,disabled:r}),(0,d.jsx)(F.Z,{size:"body-small",noMargin:!0,color:"secondary",children:"H"}),(0,d.jsx)(QR,{value:o,onChange:s,defaultValue:600,disabled:r})]})]})]})})},e)}))})},tD=["knight","warrior","wizard","mage","rogue","ninja","bunny","animal","robot","alien","monster","zombie","ghost","vampire","werewolf","clown","pirate","ninja","elf","dwarf","orc","goblin","troll","spider","snake","dragon","demon","angel","god","goddess","hero","heroine","prince","princess","king","queen","knight","warrior","wizard","mage","rogue","ninja","bunny","animal","robot","alien","monster","zombie","ghost","vampire","werewolf","clown","pirate","ninja","elf","dwarf","orc","goblin","troll","spider","snake","dragon","demon","angel","god","goddess","hero","heroine","prince","princess","king","queen"],nD=["dungeon","castle","forest","cave","mountain","desert","swamp","city","village","town","island","ship","space station"],rD=["coins","treasure","gems","crystals","artifacts","weapons","armor","potions","scrolls","books","runes","orbs","rings"],iD=["the exit","the treasure","the key","the door","the portal","the artifact","the weapon"],oD=["platformer","top-down","side-shooter","twinstick-shooter","flappy-bird","endless-runner","megaman"],aD=function(e){return"".concat(function(e){return["a","e","i","o","u"].includes(e[0].toLowerCase())}(e)?"an":"a"," ").concat(e)},sD=function(){var e=BR()(oD),t=BR()(tD),n=BR()(nD),r=BR()(rD),i=BR()(iD);return"".concat(aD(e)," game with ").concat(aD(t)," in ").concat(aD(n)," collecting ").concat(r," and trying to reach ").concat(i)},lD=n(77791),cD=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:[(0,d.jsx)("path",{d:"M2.625 0.75C1.99264 0.75 1.4887 1.08656 1.18306 1.49408C0.882583 1.89471 0.75 2.37906 0.75 2.83333C0.75 3.28761 0.882583 3.77196 1.18306 4.17259C1.4887 4.58011 1.99264 4.91667 2.625 4.91667C3.25736 4.91667 3.7613 4.58011 4.06694 4.17259C4.36742 3.77196 4.5 3.28761 4.5 2.83333C4.5 2.37906 4.36742 1.89471 4.06694 1.49408C3.7613 1.08656 3.25736 0.75 2.625 0.75Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M11.375 0.75C10.7426 0.75 10.2387 1.08656 9.93306 1.49408C9.63258 1.89471 9.5 2.37906 9.5 2.83333C9.5 3.28761 9.63258 3.77196 9.93306 4.17259C10.2387 4.58011 10.7426 4.91667 11.375 4.91667C12.0074 4.91667 12.5113 4.58011 12.8169 4.17259C13.1174 3.77196 13.25 3.28761 13.25 2.83333C13.25 2.37906 13.1174 1.89471 12.8169 1.49408C12.5113 1.08656 12.0074 0.75 11.375 0.75Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.87464 9.4403C2.38579 8.96131 1.6012 8.96436 1.11612 9.44945C0.627961 9.93761 0.627961 10.7291 1.11612 11.2172L1.11792 11.219L1.11989 11.221L1.12432 11.2254L1.13514 11.2359L1.1646 11.264C1.18773 11.2857 1.21786 11.3132 1.25499 11.3457C1.32923 11.4106 1.43171 11.4957 1.5625 11.5938C1.82391 11.7898 2.19993 12.0392 2.69098 12.2847C3.67718 12.7778 5.11738 13.25 7 13.25C8.88262 13.25 10.3228 12.7778 11.309 12.2847C11.8001 12.0392 12.1761 11.7898 12.4375 11.5938C12.5683 11.4957 12.6708 11.4106 12.745 11.3457C12.7821 11.3132 12.8123 11.2857 12.8354 11.264L12.8649 11.2359L12.8757 11.2254L12.8801 11.221L12.8821 11.219C12.8846 11.2165 12.8839 11.2172 12.8839 11.2172C13.372 10.7291 13.372 9.93761 12.8839 9.44945C12.3989 8.96443 11.6144 8.96131 11.1256 9.44011C11.1217 9.44369 11.1123 9.4524 11.0987 9.46423C11.0688 9.49041 11.015 9.53559 10.9375 9.59375C10.7822 9.71019 10.5333 9.87749 10.191 10.0486C9.51051 10.3889 8.45071 10.75 7 10.75C5.54929 10.75 4.48949 10.3889 3.80902 10.0486C3.46673 9.87749 3.21776 9.71019 3.0625 9.59375C2.98496 9.53559 2.93118 9.49041 2.90126 9.46423C2.88661 9.45141 2.87773 9.44319 2.87464 9.4403Z",fill:"currentColor"})]}))}));function uD(e){var t=function(e){return(0,R.Z)((function(t){return{container:{position:"relative",overflow:"hidden",padding:"0.75rem",borderRadius:"0.75rem",display:"flex",justifyContent:"center",alignItems:"center","&::before":{content:"''",display:"block",background:"conic-gradient(".concat("light"===t.palette.type?"#f0f0f0":"#262231",", #b07bf7)"),width:"calc(100% * 1.41421356237)",paddingBottom:"calc(100% * 1.41421356237)",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",borderRadius:"100%",zIndex:0,animation:e?"spin-background 3s linear infinite":"none"},"&::after":{content:"''",position:"absolute",inset:"0.35rem",background:t.palette.background.alternate,zIndex:1,borderRadius:"0.5rem"}},svgContainer:{display:"flex",zIndex:2}}}))()}(e.rotating);return(0,d.jsx)("div",{className:t.container,children:(0,d.jsx)("div",{className:t.svgContainer,children:(0,d.jsx)(cD,{})})})}var dD=[(0,d.jsx)(b.Trans,{id:"Talking to the AI... beep boop beep boop..."}),(0,d.jsx)(b.Trans,{id:"The AI has accepted your request. It is now thinking about the best way to create your game..."}),(0,d.jsx)(b.Trans,{id:"It is now choosing objects from the asset store..."}),(0,d.jsx)(b.Trans,{id:"It is now placing everything in the scene..."}),(0,d.jsx)(b.Trans,{id:"Almost done..."})],pD=function(e){var t=e.generatingProjectId,n=e.storageProvider,r=e.saveAsLocation,a=e.onClose,c=e.onCreate,u=l.useContext(tr.ZP),p=u.getAuthorizationHeader,h=u.profile,g=l.useState(!1),x=(0,s.Z)(g,2),m=x[0],v=x[1],j=l.useState(!1),y=(0,s.Z)(j,2),Z=y[0],k=y[1],w=l.useContext(f.Z),S=l.useState(0),P=(0,s.Z)(S,2),E=P[0],I=P[1],M=l.useState(0),A=(0,s.Z)(M,2),O=A[0],R=A[1],D=l.useCallback((function(){R(O+5),E>=dD.length-1||I(E+1)}),[E,I,O]);(0,oo.Y)(D,5e3);var _=O>35,B=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&h){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,zR(p,{generatedProjectId:t,userId:h.id});case 5:if("ready"!==(o=e.sent).status){e.next=14;break}if(k(!0),o.fileUrl){e.next=10;break}throw new Error("Generated project has no fileUrl");case 10:return e.next=12,c(o,{projectName:o.projectName,storageProvider:n,saveAsLocation:r});case 12:e.next=16;break;case 14:if("error"!==o.status){e.next=16;break}throw new Error("Generated project has an error");case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),console.error(e.t0),v(!0);case 22:case"end":return e.stop()}}),e,null,[[2,18]])}))),[t,p,h,c,r,n]),N=!Z&&!m&&t;return(0,oo.Y)((function(){B()}),N?3e3:null),(0,d.jsx)(te.ZP,{open:!0,title:null,id:"project-generating-dialog",maxWidth:"sm",actions:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),onClick:a},"cancel")],cannotBeDismissed:!0,onRequestClose:a,children:m?(0,d.jsxs)(C.ak,{noMargin:!0,alignItems:"center",children:[(0,d.jsx)(F.Z,{size:"section-title",align:"center",children:(0,d.jsx)(b.Trans,{id:"Oh. We lost contact with the AI."})}),(0,d.jsx)(lD.Z,{style:{color:w.message.error,width:40,height:40}}),(0,d.jsx)(F.Z,{size:"sub-title",align:"center",children:(0,d.jsx)(b.Trans,{id:"It's probably tired."})}),(0,d.jsx)(F.Z,{size:"sub-title",align:"center",children:(0,d.jsx)(b.Trans,{id:"Try making your prompt more specific."})}),(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Try again"}),primary:!0,onClick:a})]}):(0,d.jsxs)(C.ak,{noMargin:!0,alignItems:"center",children:[(0,d.jsx)(F.Z,{size:"section-title",align:"center",children:(0,d.jsx)(b.Trans,{id:"Creating new project"})}),(0,d.jsx)(L.hS,{}),(0,d.jsx)(uD,{rotating:!0}),(0,d.jsx)(F.Z,{size:"sub-title",align:"center",children:_?(0,d.jsx)(b.Trans,{id:"This is taking longer than expected... We might have lost contact with the AI."}):dD[E]}),_&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(F.Z,{size:"sub-title",align:"center",children:(0,d.jsx)(b.Trans,{id:"You can wait a bit more, or try refining your prompt."})}),(0,d.jsx)(T.Z,{label:(0,d.jsx)(b.Trans,{id:"Try again"}),primary:!0,onClick:a})]})]})})},fD=ae()("electron"),hD=ae()("@electron/remote"),gD=hD?hD.app:null,xD=function(e){var t=e.isOpeningProject,n=e.onClose,r=e.onCreateEmptyProject,a=e.onCreateFromExample,c=e.onCreateProjectFromPrivateGameTemplate,u=e.onCreateWithLogin,p=e.onCreateFromAIGeneration,f=e.selectedExampleShortHeader,h=e.selectedPrivateGameTemplateListingData,g=e.storageProviders,x=e.authenticatedUser,m=function(){return f?"".concat(HR()," (").concat(f.name,")"):h?"".concat(HR()," (").concat(h.name,")"):HR()},v=l.useContext(tr.ZP),j=v.getAuthorizationHeader,y=v.profile,Z=(0,lt.Z)().showAlert,k=(0,to.k)(),w=l.useContext(se.ZP),T=w.values,S=w.setNewProjectsDefaultStorageProviderName,P=l.useContext(Yr.Z).currentlyRunningInAppTutorial,E=l.useContext(Ro.o).openSubscriptionDialog,I=l.useState(null),A=(0,s.Z)(I,2),O=A[0],R=A[1],D=l.useState(m()),_=(0,s.Z)(D,2),B=_[0],N=_[1],U=l.useState(""),H=(0,s.Z)(U,2),V=H[0],z=H[1],W=l.useState(!1),G=(0,s.Z)(W,2),Y=G[0],q=G[1],X=l.useState(null),Q=(0,s.Z)(X,2),ee=Q[0],ne=Q[1],re=l.useState("desktopMobileLandscape"),ie=(0,s.Z)(re,2),oe=ie[0],ae=ie[1],le=l.useState(800),ce=(0,s.Z)(le,2),ue=ce[0],pe=ce[1],fe=l.useState(600),ge=(0,s.Z)(fe,2),xe=ge[0],me=ge[1],ve=l.useState(!1),be=(0,s.Z)(ve,2),Ce=be[0],je=be[1],ye=l.useState(!(P||!k)),Ze=(0,s.Z)(ye,2),ke=Ze[0],we=Ze[1],Te=gD?(0,VR.X)(gD,T.newProjectsDefaultFolder||""):"",Se=l.useState((function(){var e=g.find((function(e){return"LocalFile"===e.internalName})),t=g.find((function(e){return"Cloud"===e.internalName})),n=g.find((function(e){return e.internalName===T.newProjectsDefaultStorageProviderName}));return P?e||cw.H:h?n||(e||(t||cw.H)):"Empty"===T.newProjectsDefaultStorageProviderName?cw.H:n||(x.authenticated&&t?t:e||cw.H)})),Pe=(0,s.Z)(Se,2),Ee=Pe[0],Ie=Pe[1],Me=l.useState(Ee.getProjectLocation?Ee.getProjectLocation({projectName:B,saveAsLocation:null,newProjectsDefaultFolder:Te}):null),Le=(0,s.Z)(Me,2),Ae=Le[0],Fe=Le[1],Oe=x.limits?x.limits.quotas["ai-project-generation"]:null,Re=Oe&&!Oe.limitReached,De=Ee.needUserAuthentication&&!x.authenticated,_e=x.limits,Be="Cloud"===Ee.internalName&&EA(x),Ne="Empty"===Ee.internalName,Ue=JR[oe].width||ue||800,He=JR[oe].height||xe||600,Ve=JR[oe].orientation,ze=Y||t,We=!f&&!h,Ge=!fD&&!h,Ye=ze||De||Be||Ne&&!Ge,qe=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ye){e.next=2;break}return e.abrupt("return");case 2:if(y){e.next=4;break}return e.abrupt("return");case 4:return q(!0),e.prev=5,e.next=8,WR(j,{userId:y.id,prompt:V,width:Ue,height:He,projectName:B});case 8:t=e.sent,ne(t.id),e.next=23;break;case 12:if(e.prev=12,e.t0=e.catch(5),!(n=(0,_o.T)(e.t0))||"project-generation/quota-exceeded"!==n.code){e.next=21;break}return z(""),e.next=19,x.onRefreshLimits();case 19:e.next=22;break;case 21:Z({title:{id:"Unable to generate project"},message:{id:"Looks like the AI service is not available. Please try again later or create a project without a prompt."}});case 22:q(!1);case 23:case"end":return e.stop()}}),e,null,[[5,12]])}))),[Ye,j,V,y,B,Z,x,He,Ue]),Xe=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!V){e.next=3;break}return qe(),e.abrupt("return");case 3:if(!Ye){e.next=5;break}return e.abrupt("return");case 5:if(R(null),B){e.next=9;break}return R((0,d.jsx)(b.Trans,{id:"Please enter a name for your project."})),e.abrupt("return");case 9:if(n=Ee.getProjectLocation?Ee.getProjectLocation({projectName:B,saveAsLocation:Ae,newProjectsDefaultFolder:Te}):Ae,o={projectName:B,storageProvider:Ee,saveAsLocation:n,height:He,width:Ue,orientation:Ve,optimizeForPixelArt:Ce,allowPlayersToLogIn:ke},!f){e.next=16;break}return e.next=14,a(f,{projectName:B,storageProvider:Ee,saveAsLocation:n},t);case 14:case 19:e.next=29;break;case 16:if(!h){e.next=21;break}return e.next=19,c(h,{projectName:B,storageProvider:Ee,saveAsLocation:Ae},t);case 21:if(!ke){e.next=27;break}return e.next=24,u(o);case 24:return e.abrupt("return");case 27:return e.next=29,r(o);case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[V,Ye,B,Ee,Ae,Te,He,Ue,Ve,Ce,ke,f,qe,h,a,c,u,r]),Je=l.useCallback((function(e,t){O&&R(null),N(t)}),[N,O]);return(0,d.jsx)(b.I18n,{children:function(e){var t=e.i18n;return(0,d.jsxs)(te.ZP,{open:!0,title:(0,d.jsx)(b.Trans,{id:"New Project"}),id:"project-pre-creation-dialog",maxWidth:"sm",actions:[(0,d.jsx)(J.Z,{disabled:ze,label:(0,d.jsx)(b.Trans,{id:"Cancel"}),onClick:n},"cancel"),(0,d.jsx)(Sr.Z,{isLoading:ze,children:(0,d.jsx)(te.vF,{primary:!0,disabled:Ye,label:(0,d.jsx)(b.Trans,{id:"Create project"}),onClick:function(){return Xe(t)},id:"create-project-button"})},"create")],cannotBeDismissed:ze,onRequestClose:n,onApply:function(){return Xe(t)},children:[(0,d.jsxs)(C.ak,{noMargin:!0,children:[We&&(0,d.jsx)(eD,{onClick:function(e){return ae(e)},selectedOption:oe,disabled:ze,customHeight:xe,customWidth:ue,onCustomHeightChange:me,onCustomWidthChange:pe}),(0,d.jsx)($r.ZP,{type:"text",errorText:O,disabled:ze,value:B,onChange:Je,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Project name"}),endAdornment:(0,d.jsx)(M.Z,{size:"small",onClick:function(){return N(m())},tooltip:{id:"Generate random name"},disabled:ze,children:(0,d.jsx)(Xi.Z,{})}),autoFocus:"desktop",maxLength:100}),(0,d.jsxs)(K.Z,{fullWidth:!0,disabled:ze,floatingLabelText:(0,d.jsx)(b.Trans,{id:"Where to store this project"}),value:Ee.internalName,onChange:function(e,t,n){S(n);var r=g.find((function(e){return e.internalName===n}))||cw.H;Ie(r),Fe(null)},children:[g.filter((function(e){return!!e.renderNewProjectSaveAsLocationChooser})).map((function(e){return(0,d.jsx)($.Z,{value:e.internalName,label:e.name,disabled:e.disabled},e.internalName)})),Ge&&(0,d.jsx)($.Z,{value:cw.H.internalName,label:{id:"Don't save this project now"}})]}),De&&(0,d.jsx)(de.Z,{background:"dark",variant:"outlined",children:(0,d.jsx)(L.x1,{justifyContent:"center",children:(0,d.jsx)(Ac.Z,{onOpenLoginDialog:x.onOpenLoginDialog,onOpenCreateAccountDialog:x.onOpenCreateAccountDialog,message:(0,d.jsx)(b.Trans,{id:"Create an account to store your project online."})})})}),!De&&Ee.renderNewProjectSaveAsLocationChooser&&Ee.renderNewProjectSaveAsLocationChooser({projectName:B,saveAsLocation:Ae,setSaveAsLocation:Fe,newProjectsDefaultFolder:Te}),We&&(0,d.jsxs)(C.ak,{noMargin:!0,expand:!0,children:[(0,d.jsx)(he.Z,{kind:"info",identifier:"new-generate-project-from-prompt",children:(0,d.jsx)(b.Trans,{id:"NEW! Generate a pre-made AI scene with assets."})}),(0,d.jsxs)(C.pJ,{expand:!0,noMargin:!0,alignItems:"center",justifyContent:"center",children:[(0,d.jsx)(uD,{}),(0,d.jsx)($r.ZP,{type:"text",multiline:!0,maxLength:200,fullWidth:!0,disabled:ze||!x.authenticated||!k||!Re,value:V,onChange:function(e,t){return z(t)},floatingLabelText:(0,d.jsx)(b.Trans,{id:"AI prompt"}),floatingLabelFixed:!0,translatableHintText:x.authenticated&&k?{id:"Type a prompt yourself or generate a random one"}:{id:"Log in to generate a project from a prompt"},endAdornment:(0,d.jsx)(M.Z,{size:"small",onClick:function(){return z(sD())},tooltip:{id:"Generate random prompt"},disabled:ze||!x.authenticated||!k||!Re,children:(0,d.jsx)(Xi.Z,{})})})]}),x.authenticated&&!Re&&(0,d.jsx)(er.Z,{subscriptionDialogOpeningReason:"Generate project from prompt",children:(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(F.Z,{noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"You've used all your daily pre-made AI scenes! Generate as many as you want with a subscription."})})})})}),(0,d.jsx)(F.Z,{size:"sub-title",children:(0,d.jsx)(b.Trans,{id:"Advanced File options"})}),(0,d.jsx)(Wn.Z,{checked:Ce,label:(0,d.jsx)(b.Trans,{id:"Optimize for Pixel Art"}),onCheck:function(e,t){je(t)},disabled:ze}),(0,d.jsx)(Wn.Z,{checked:ke,label:(0,d.jsx)(b.Trans,{id:"Allow players to authenticate in-game"}),onCheck:function(e,t){we(t)},disabled:ze||!k,tooltipOrHelperText:(0,d.jsx)(Ke.r,{translatableSource:{id:"Learn more about [player authentication](https://wiki.gdevelop.io/gdevelop5/all-features/player-authentication)."}})})]}),_e&&Be?(0,d.jsx)(IA,{limits:_e,onUpgrade:function(){return E({analyticsMetadata:{reason:"Cloud Project limit reached"}})}}):null]}),Y&&ee&&(0,d.jsx)(pD,{generatingProjectId:ee,storageProvider:Ee,saveAsLocation:Ae,onCreate:p,onClose:function(){ne(null),q(!1)}})]})}})},mD=function(e){var t=e.onSaveProject,n=e.canEndTutorial,r=e.endTutorial,i=e.onClose,o=e.isSavingProject,a=l.useState(!1),c=(0,s.Z)(a,2),u=c[0],p=c[1],f=l.useState((0,d.jsx)(b.Trans,{id:"Leave the tutorial"})),h=(0,s.Z)(f,2),g=h[0],x=h[1];l.useEffect((function(){u&&(o?x((0,d.jsx)(b.Trans,{id:"Saving project"})):n&&x((0,d.jsx)(b.Trans,{id:"Project saved"})))}),[o,n,u]);var m=function(){r(),i()},v=function(){p(!0),n?m():t()},C=o?(0,d.jsx)(b.Trans,{id:"Saving..."}):n?(0,d.jsx)(b.Trans,{id:"Close Project"}):(0,d.jsx)(b.Trans,{id:"Save Project"});return(0,d.jsxs)(te.ZP,{open:!0,maxWidth:"sm",title:g,onRequestClose:function(){o||i()},onApply:v,secondaryActions:[(0,d.jsx)(J.Z,{onClick:m,label:(0,d.jsx)(b.Trans,{id:"Exit without saving"})},"exit")],actions:[(0,d.jsx)(J.Z,{onClick:i,label:(0,d.jsx)(b.Trans,{id:"Cancel"})},"cancel"),(0,d.jsx)(Sr.Z,{isLoading:o,children:(0,d.jsx)(te.vF,{primary:!0,label:C,disabled:o,onClick:v})},"save-and-exit")],flexColumnBody:!0,children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"You are about to quit the tutorial."})}),(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"You can save your project to come back to it later. What do you want to do?"})})]})},vD=function(e){var t=e.openInAppTutorialDialog,n=e.openProfileDialog,r=l.useContext(Ja.Z),i=r.routeArguments,o=r.removeRouteArguments,a=l.useContext(Ro.o).openSubscriptionDialog,s=l.useContext(tr.ZP),c=s.onOpenCreateAccountDialog,u=s.onOpenLoginDialog,d=s.authenticated;l.useEffect((function(){switch(i["initial-dialog"]){case"subscription":a({analyticsMetadata:{reason:"Landing dialog at opening"}}),o(["initial-dialog"]);break;case"signup":var e=setTimeout((function(){d?n(!0):c(),o(["initial-dialog"])}),2e3);return function(){return clearTimeout(e)};case"onboarding":case"guided-lesson":var r=i["tutorial-id"];t(r||WM.bs),o(["initial-dialog","tutorial-id"])}}),[i,t,n,o,a,d,c,u])},bD={image:{maxWidth:350},imageLink:{cursor:"pointer",maxWidth:350}};var CD=function(e){var t=e.dialogContent,n=e.endTutorial,r=e.goToNextStep,i=e.isLastStep,o=function(){i?n():r&&r()},a=i?[(0,d.jsx)(te.vF,{onClick:o,label:(0,d.jsx)(b.Trans,{id:"Close"})},"close")]:[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Leave the tutorial"}),onClick:n},"leave"),(0,d.jsx)(te.vF,{primary:!0,onClick:o,label:(0,d.jsx)(b.Trans,{id:"Start next chapter"})},"next")];return(0,d.jsx)(b.I18n,{children:function(e){var n=e.i18n;return(0,d.jsx)(te.ZP,{title:null,onApply:o,open:!0,actions:a,maxWidth:"sm",flexColumnBody:!0,cannotBeDismissed:!0,children:(0,d.jsx)(C.ak,{noMargin:!0,children:t.content.map((function(e,t){if(e.messageDescriptor)return(0,d.jsx)(Ke.r,{translatableSource:e.messageDescriptor},e.messageDescriptor.id||e.messageDescriptor);if(e.messageByLocale)return(0,d.jsx)(Ke.r,{source:(0,uc.a)(n,e.messageByLocale)},Object.values(e.messageByLocale)[0]);if(e.image){var r=e.image,i=r.linkHref,o=r.imageSource;return i?(0,d.jsx)(L.x1,{justifyContent:"center",children:(0,d.jsx)(Ie.Z,{href:i,onClick:function(){return Y.ZP.openExternalURL(i)},children:(0,d.jsx)(Hg.W,{style:bD.imageLink,src:o,alt:"End of tutorial dialog image"})})},"image-".concat(t)):(0,d.jsx)(L.x1,{justifyContent:"center",children:(0,d.jsx)(Hg.W,{style:bD.image,src:o,alt:"End of tutorial dialog image"})},"image-".concat(t))}return null}))})})}})},jD=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2.66669C8.13664 2.66669 8.26733 2.72261 8.36168 2.82145L11.8617 6.48812C12.0523 6.68787 12.045 7.00436 11.8452 7.19503C11.6455 7.3857 11.329 7.37834 11.1383 7.17859L8 3.89083L4.86168 7.17859C4.67101 7.37834 4.35451 7.3857 4.15476 7.19503C3.95501 7.00436 3.94765 6.68787 4.13832 6.48812L7.63832 2.82145C7.73267 2.72261 7.86336 2.66669 8 2.66669Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 3.33335C8.27614 3.33335 8.5 3.55721 8.5 3.83335V12.8334C8.5 13.1095 8.27614 13.3334 8 13.3334C7.72386 13.3334 7.5 13.1095 7.5 12.8334V3.83335C7.5 3.55721 7.72386 3.33335 8 3.33335Z",fill:"currentColor"})]}))})),yD=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.15476 8.80501C4.35451 8.61434 4.67101 8.6217 4.86168 8.82145L8 12.1092L11.1383 8.82145C11.329 8.6217 11.6455 8.61434 11.8452 8.80501C12.045 8.99568 12.0523 9.31218 11.8617 9.51193L8.36168 13.1786C8.26733 13.2774 8.13664 13.3334 8 13.3334C7.86336 13.3334 7.73267 13.2774 7.63832 13.1786L4.13832 9.51193C3.94765 9.31218 3.95501 8.99568 4.15476 8.80501Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2.66669C8.27614 2.66669 8.5 2.89054 8.5 3.16669V12.1667C8.5 12.4428 8.27614 12.6667 8 12.6667C7.72386 12.6667 7.5 12.4428 7.5 12.1667V3.16669C7.5 2.89054 7.72386 2.66669 8 2.66669Z",fill:"currentColor"})]}))})),ZD="#FF8629",kD={rectangleHighlight:{position:"fixed",outline:"1px solid ".concat(ZD),boxShadow:"0 0 8px 6px ".concat(ZD),boxSizing:"border-box",pointerEvents:"none"},scrollIndicator:{position:"fixed",zIndex:Kh.BI},scrollDirectionArrow:{color:"#1D1D26",display:"flex",backgroundColor:ZD,boxShadow:"0 0 12px 2px ".concat(ZD),padding:2,borderRadius:3}};var wD=function(e){var t=e.element,n=(0,Pt.Z)();(0,Nj.Z)(n);var r=l.useState(!0),i=(0,s.Z)(r,2),o=i[0],c=i[1],u=function(e){if(!(e instanceof HTMLElement))return null;var t=e.parentElement;if(!t)return null;var n,r=xO(t,[]),i=(0,ia.Z)(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(mO(o))return o}}catch(a){i.e(a)}finally{i.f()}return document.scrollingElement||document.documentElement}(t),p=u?NT.fromDOMRect(u.getBoundingClientRect()):void 0,f=NT.fromDOMRect(t.getBoundingClientRect()),h=l.useCallback((function(){return p?f.left<p.left?"left":f.right>p.right?"right":f.top<p.top?"top":f.bottom>p.bottom?"bottom":null:null}),[p,f]),g=l.useState(h()),x=(0,s.Z)(g,2),m=x[0],v=x[1],b=l.useCallback((function(e){var t=e[0].isIntersecting;c(t),!t&&p&&v(h()),n()}),[n,p,h]);Fc(t,b),l.useEffect((function(){if(u)return u.addEventListener("scroll",n),function(){u.removeEventListener("scroll",n)}}),[u,n]);var C=getComputedStyle(t),j=l.useMemo((function(){switch(m){case"top":return jD;case"bottom":return yD;case"left":return uy;case"right":return sZ;default:return null}}),[m]);return(0,d.jsxs)(d.Fragment,{children:[o&&(0,d.jsx)("div",{id:"in-app-tutorial-element-highlighter",style:(0,a.Z)((0,a.Z)((0,a.Z)({},kD.rectangleHighlight),f.toCSSPosition()),{},{borderRadius:C.getPropertyValue("border-radius"),zIndex:vO(t)})}),!o&&p&&(0,d.jsx)("div",{id:"in-app-tutorial-scroll-indicator",style:(0,a.Z)((0,a.Z)({},kD.scrollIndicator),{},{animation:"0.5s ease-in-out 0s infinite alternate none running ".concat("top"===m||"bottom"===m?"vertical-translate":"horizontal-translate"),top:"top"===m?p.top+15:"bottom"===m?p.bottom-50:f.centerY()-15,left:"left"===m?p.left+15:"right"===m?p.right-50:f.centerX()-15}),children:(0,d.jsx)("div",{style:kD.scrollDirectionArrow,children:j&&(0,d.jsx)(j,{fontSize:"large"})})})]})},TD="#EBEBED",SD="#D9D9DE",PD="#C5C5C9",ED="#A6A6AB",ID="#7F7F85",MD="#1D1D26",LD={paper:{padding:"10px 12px",minWidth:180},title:{color:MD},description:{color:"#494952"},divider:{backgroundColor:SD,height:1},descriptionImage:{margin:"auto"},iconButtonContainer:{cursor:"pointer",borderRadius:5,display:"flex",alignItems:"center"},iconButtonContainerWithPadding:{paddingRight:5},headerText:{fontSize:12},headerContentPreview:{color:MD}},AD=(0,R.Z)({popper:{'&[x-placement*="bottom"] #arrow-popper':{top:0,left:0,marginTop:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"0 100%"}},'&[x-placement*="top"] #arrow-popper':{bottom:0,left:0,marginBottom:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"100% 0"}},'&[x-placement*="right"] #arrow-popper':{left:0,marginLeft:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"100% 100%"}},'&[x-placement*="left"] #arrow-popper':{right:0,marginRight:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"0 0"}}},arrow:{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box","&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}}),FD=function(e){var t=e.tooltip,n=e.buttonLabel,r=e.goToNextStep,i=e.fillAutomatically,o=(0,w.U)().isMobile,s=(0,d.jsxs)(L.sg,{noMargin:!0,children:[t.title&&(0,d.jsx)(iL.Z,{style:LD.title,variant:"subtitle1",translate:"no",children:(0,d.jsx)(Ke.r,{source:t.title,allowParagraphs:!0})}),t.title&&t.description&&(0,d.jsx)("span",{style:LD.divider}),t.description&&(0,d.jsx)(iL.Z,{style:LD.description,translate:"no",children:(0,d.jsx)(Ke.r,{source:t.description,allowParagraphs:!0})})]}),l=t.image&&(0,d.jsx)("img",{src:t.image.dataUrl,alt:"Tutorial helper",style:(0,a.Z)((0,a.Z)({},LD.descriptionImage),{},{width:t.image.width||"100%",maxWidth:o?150:"100%",maxHeight:o?150:"100%"})}),c=n&&(0,d.jsxs)(L.sg,{noMargin:!0,expand:!0,children:[t.image?(0,d.jsx)(L.LZ,{}):null,(0,d.jsx)(T.Z,{primary:!0,label:n,onClick:r})]}),u=o?(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[l,c]}):(0,d.jsxs)(L.sg,{noMargin:!0,alignItems:"center",children:[l,c]}),p=i&&(0,d.jsx)(Jx.Z,{onClick:i,label:(0,d.jsx)(b.Trans,{id:"Fill automatically"}),primary:!0});return(0,d.jsxs)(L.sg,{noMargin:!0,children:[s,u,p]})},OD=function(e){var t=e.paletteType,n=e.progress,r=e.showFoldButton,i=e.showQuitButton,o=e.onClickFoldButton,s=e.tooltipContent,l=e.endTutorial,c="light"===t?ED:PD,u="light"===t?{color:ID,backgroundColor:SD}:{color:ED,backgroundColor:TD};return(0,d.jsxs)(C.pJ,{alignItems:"center",noMargin:!0,justifyContent:s?void 0:"space-between",children:[(0,d.jsxs)(iL.Z,{style:(0,a.Z)((0,a.Z)({},LD.headerText),{},{color:c}),translate:"no",children:[n,"%"]}),(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",overflow:"hidden",children:[s||!i?null:(0,d.jsx)(O.Z,{disableRipple:!0,onClick:l,children:(0,d.jsxs)("div",{style:(0,a.Z)((0,a.Z)((0,a.Z)({},LD.iconButtonContainer),LD.iconButtonContainerWithPadding),u),children:[(0,d.jsx)(_.Z,{}),(0,d.jsx)(iL.Z,{style:LD.headerText,translate:"no",children:(0,d.jsx)(b.Trans,{id:"Quit tutorial"})})]})}),s&&(0,d.jsx)(iL.Z,{variant:"body2",style:(0,a.Z)((0,a.Z)({},LD.headerContentPreview),B.t),translate:"no",children:s}),r?(0,d.jsx)(O.Z,{disableRipple:!0,onClick:o,children:(0,d.jsx)("span",{style:(0,a.Z)((0,a.Z)({},LD.iconButtonContainer),u),children:s?(0,d.jsx)(kg.Z,{}):(0,d.jsx)(jt.Z,{})})}):null]})]})},RD=function(e){var t=e.anchorElement,n=e.tooltip,r=e.showQuitButton,i=e.buttonLabel,o=e.progress,c=e.endTutorial,u=e.goToNextStep,p=e.fillAutomatically,h=(0,w.U)().isMobile,g=l.useContext(f.Z).palette.type,x=l.useState(!1),m=(0,s.Z)(x,2),v=m[0],b=m[1],C=l.useState(!1),j=(0,s.Z)(C,2),y=j[0],Z=j[1],k=l.useCallback((function(e){b(e[0].isIntersecting)}),[]),T=((n.title||"")+(n.description||"")).replace(/\(.+\)/g,"");l.useEffect((function(){Z(!1)}),[T]),Fc(t,k);var S=AD(),P=h&&n.mobilePlacement?n.mobilePlacement:n.placement||"bottom",E="light"===g?"#EBEBED":"#FAFAFA";return(0,d.jsx)(pd.Z,{id:"in-app-tutorial-tooltip-displayer",open:v,className:S.popper,anchorEl:t,transition:!0,placement:P,popperOptions:{modifiers:{arrow:{enabled:!0,element:"#arrow-popper"},offset:{enabled:!0,offset:"0,10"},preventOverflow:{enabled:!0,boundariesElement:document.querySelector(".main-frame")}}},style:{zIndex:vO(t),maxWidth:"min(90%, 300px)",width:h?"100%":void 0},children:function(e){var t=e.TransitionProps;return(0,d.jsx)(bO.Z,(0,a.Z)((0,a.Z)({},t),{},{timeout:{enter:350,exit:0},children:(0,d.jsxs)(CO.Z,{style:(0,a.Z)((0,a.Z)({},LD.paper),{},{backgroundColor:E}),elevation:4,children:[(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(OD,{paletteType:g,showFoldButton:!!n.standalone,showQuitButton:r,progress:o,tooltipContent:y?n.title||n.description:void 0,onClickFoldButton:function(){return Z(!y)},endTutorial:c}),!y&&(0,d.jsx)(FD,{tooltip:n,buttonLabel:i,goToNextStep:u,fillAutomatically:p})]}),(0,d.jsx)("span",{id:"arrow-popper",className:S.arrow,style:{color:E}})]})}))}})},DD={avatarContainer:{position:"absolute",left:20,bottom:20,zIndex:Kh.BI,display:"flex",visibility:"hidden",boxShadow:"0px 2px 4px -1px rgb(0 0 0 / 20%), 0px 4px 5px 0px rgb(0 0 0 / 14%), 0px 1px 10px 0px rgb(0 0 0 / 12%)",borderRadius:30},link:{cursor:"pointer"},avatarImage:{cursor:"pointer"}};var _D=function(e){var t=e.step,n=t.elementToHighlightId,r=t.tooltip,i=t.nextStepTrigger,o=t.isOnClosableDialog,c=t.dialog,u=e.expectedEditor,p=e.goToFallbackStep,f=e.endTutorial,h=e.progress,g=e.goToNextStep,x=l.useState(null),m=(0,s.Z)(x,2),v=m[0],C=m[1],j=l.useState(null),y=(0,s.Z)(j,2),Z=y[0],k=y[1],w=l.useState(!1),T=(0,s.Z)(w,2),S=T[0],P=T[1],E=l.useState(null),I=(0,s.Z)(E,2),M=I[0],L=I[1],A=l.useCallback((function(e){e&&L(e)}),[]),F=l.useCallback((function(){if(n){var e=function(e){var t=document.querySelector(e);if(t instanceof HTMLTextAreaElement){var n=t.closest("div");if(n instanceof HTMLElement&&(0,Kh.h$)(n))return{elementToHighlight:n,elementWithId:t}}else if(t instanceof HTMLInputElement&&"searchBar"in t.dataset){var r=t.closest("div[data-search-bar-container]");if(r instanceof HTMLElement)return{elementToHighlight:r,elementWithId:t}}return{elementToHighlight:t,elementWithId:t}}(n),t=e.elementToHighlight,r=e.elementWithId;C(t),k(r)}}),[n]);(0,oo.Y)(F,500);var O=l.useCallback((function(){if(v){P(!1);var e=function(e){for(var t=xO(e,[]),n=t.length-1;n>=0;n--){var r=t[n];if((0,Kh.yP)(r))return r}return null}(v);e&&function(e){for(var t=e.nextElementSibling;t;){if((0,Kh.yP)(t,{isVisible:!0}))return!0;t=t.nextElementSibling}return!1}(e)&&P(!0)}}),[v]);(0,oo.Y)(O,1e3),l.useEffect((function(){C(null),P(!1)}),[n]),l.useEffect((function(){if(n&&!v&&!u){var e=setTimeout(p,1e3);return function(){return clearTimeout(e)}}}),[n,v,p,u]);var R=function(){if(!v&&!u||S)return null;if(u){var e=document.querySelector(KD({editor:u.editor,sceneName:u.scene}));return e?(0,d.jsx)(wD,{element:e}):null}return v?(0,d.jsx)(wD,{element:v}):null},D=l.useCallback((function(){if(i&&i.valueEquals&&(Z instanceof HTMLInputElement||Z instanceof HTMLTextAreaElement)){var e=Object.getOwnPropertyDescriptor(Z.constructor.prototype,"value");if(e){var t=e.set;if(t)return function(){t.call(Z,i.valueEquals),Z.dispatchEvent(new Event("blur",{bubbles:!0}))}}}}),[i,Z]),_=function(e){if(r&&!u){var t=r.standalone?M:v||null;return t?(0,d.jsx)(RD,{endTutorial:f,showQuitButton:!o,anchorElement:t,tooltip:r,progress:h,goToNextStep:g,buttonLabel:i&&i.clickOnTooltipButton?i.clickOnTooltipButton:void 0,fillAutomatically:D()}):null}var n=function(e,t){if(!t)return null;var n="Scene"===t.editor?e._({id:"the scene editor"}):"Home"===t.editor?e._({id:"the home page"}):e._({id:"the events sheet"}),r=t.scene?' for scene "'.concat(t.scene,'"'):"";return{title:e._({id:"You're leaving the game tutorial"}),placement:"top",description:e._({id:"Go back to {translatedExpectedEditor}{sceneMention} to keep creating your game.",values:{translatedExpectedEditor:n,sceneMention:r}}),standalone:!0}}(e,u);return n&&M?(0,d.jsx)(RD,{endTutorial:f,showQuitButton:!0,anchorElement:M,tooltip:n,progress:h,goToNextStep:g}):null};return(0,d.jsx)(b.I18n,{children:function(e){var t=e.i18n,n=u||r&&r.standalone;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},DD.avatarContainer),{},{visibility:n?"visible":"hidden"}),ref:A,id:"in-app-tutorial-avatar",children:(0,d.jsx)("img",{alt:"GDevelop mascot red hero",src:"res/hero60.png",width:60,height:60,style:DD.avatarImage})}),R(),_(t),c?(0,d.jsx)(CD,{dialogContent:c,goToNextStep:g,endTutorial:f}):null]})}})},BD=n(997),ND="instancesCount:",UD="objectInObjectsList:",HD="sceneInProjectManager:",VD="objectInObjectOrResourceSelector:",zD="editorTab:",WD=/#object-item-[0-9]{1,2}$/,GD=function(e){return e.map((function(t,n){return 0===n?0:e[n-1]+1}))},YD=function(e){var t,n=e.text,r=e.data,i=e.i18n,o=e.project;if(n)return"string"!==typeof(t=n.messageByLocale?(0,uc.a)(i,n.messageByLocale):i._(n.messageDescriptor,r))?"":function(e,t,n){var r=e.matchAll(/\$\(([\w:]+)\)/g),i=e;return(0,v.Z)(r).forEach((function(e){var r,o=e[0],a=e[1];if(a.startsWith(ND)){var s=a.split(":")[1],l=t[s];if(l&&n&&n.getLayoutsCount()>0){var c=n.getLayoutAt(0);r=ck(c.getInitialInstances(),l).toString()}}!r&&Object.keys(t).includes(a)&&(r=t[a]),r&&(i=i.replace(o,r))})),i}(t,r,o)},qD=function(e,t){return e?(0,a.Z)((0,a.Z)({},e),{},{scene:e.scene?t[e.scene]:void 0}):null},XD=function(e){var t=e.project,n=e.sceneName;if(0!==t.getLayoutsCount())return(t.hasLayoutNamed(n)?t.getLayout(n):t.getLayoutAt(0)).getObjectsCount()},KD=function(e){var t=e.editor,n=e.sceneName;if("Home"===t)return'button[id="tab-start-page-button"]';var r=n?'[data-scene="'.concat(n,'"]'):"";return'button[id^="tab"][data-type="'.concat("Scene"===t?"layout":"layout-events",'"]').concat(r)},JD=function(e,t){if(e.startsWith(zD)){var n=e.split(":"),r=n[1],i=n[2];if(!i)throw new Error('There might be missing a ":" in the element id '.concat(e));return KD({editor:i,sceneName:t[r]})}if(e.startsWith(UD)){var o=e.split(":")[1];return'#scene-editor[data-active] #objects-list div[data-object-name="'.concat(t[o],'"]')}if(e.startsWith(HD)){var a=e.split(":")[1];return'div[role="presentation"][data-open="true"] #project-manager [id^="scene-item"][data-scene="'.concat(t[a],'"]')}if(e.startsWith(VD)){var s=e.split(":")[1];return'#instruction-or-object-selector div[data-object-name="'.concat(t[s],'"]')}return e},QD=function(e,t){return!!e&&(!(!e.presenceOfElement||e.presenceOfElement.match(WD)||!document.querySelector(JD(e.presenceOfElement,t)))||(!(!e.absenceOfElement||document.querySelector(JD(e.absenceOfElement,t)))||!(!e.editorIsActive||!document.querySelector(function(e,t){var n=e.split(":"),r=(0,s.Z)(n,2),i=r[0],o=r[1];if(!o)throw new Error('There might be missing a ":" in the trigger '.concat(e));if("Home"===o)return'button[id="tab-start-page-button"][data-active="true"]';var a=i?'[data-scene="'.concat(t[i],'"]'):"";return'button[id^="tab"][data-active="true"][data-type="'.concat("Scene"===o?"layout":"layout-events",'"]').concat(a)}(e.editorIsActive,t)))))},$D=function(e){return(0,Kh.NL)(e)?(0,Kh.Rz)(e):"TEXTAREA"===e.tagName?e.textContent:e.value},e_=l.forwardRef((function(e,t){var n=e.tutorial,r=e.endTutorial,c=e.project,u=e.currentEditor,p=e.currentSceneName,f=e.startStepIndex,h=e.startProjectData,g=(0,Pt.Z)(),x=l.useState(!1),m=(0,s.Z)(x,2),v=m[0],C=m[1],j=l.useState(f),y=(0,s.Z)(j,2),Z=y[0],k=y[1],w=l.useState(null),T=(0,s.Z)(w,2),S=T[0],P=T[1],E=l.useState(h),I=(0,s.Z)(E,2),M=I[0],L=I[1],A=l.useRef({}),F=l.useState(!1),O=(0,s.Z)(F,2),R=O[0],D=O[1],_=l.useRef(0),B=l.useState(null),N=(0,s.Z)(B,2),U=N[0],H=N[1],V=l.useState(null),z=(0,s.Z)(V,2),W=z[0],G=z[1],Y=l.useRef(null),q=l.useState(null),X=(0,s.Z)(q,2),K=X[0],J=X[1],Q=l.useRef(null),$=l.useState(null),ee=(0,s.Z)($,2),te=ee[0],ne=ee[1],re=l.useState(!1),ie=(0,s.Z)(re,2),oe=ie[0],ae=ie[1],le=l.useRef(null),ce=l.useState(!1),ue=(0,s.Z)(ce,2),de=ue[0],pe=ue[1],fe=l.useContext(se.ZP),he=l.useContext(tr.ZP),ge=n.flow,xe=n.endDialog,me=n.editorSwitches,ve=n.id,be=ge.length,Ce=ge[Z],je=l.useCallback((function(e){k(e),(0,Ar.xN)({tutorialId:ve,step:e,isCompleted:e>=be-1})}),[ve,be]);l.useEffect((function(){je(f);for(var e=f;e>=0;e--)if(!n.flow[e].isOnClosableDialog){_.current=e;break}for(var t={editor:"Home"},r=f;r>=0;r--)if(n.flow[r].id&&n.editorSwitches.hasOwnProperty(n.flow[r].id)){t=n.editorSwitches[n.flow[r].id];break}H(t)}),[n,je,f]);var ye=l.useCallback((function(e){var t=e.stepIndex,n=e.gatherData;if(t>=be)D(!0);else{for(var r=t;r<be-1&&ge[r]&&(ge[r].deprecated||ge[r].skippable&&QD(ge[r].nextStepTrigger,M));)r+=1;if(n){var i=function(e){var t=e.flow,n=e.startIndex,r=e.endIndex,i=e.data,o=e.project;if(!o)return i;for(var l=(0,a.Z)({},i),c=function(e){var n=t[e].mapProjectData;n&&Object.entries(n).forEach((function(t){var n=(0,s.Z)(t,2),r=n[0],a=n[1];if("projectLastSceneName"===a){if(!o)return;if(0===o.getLayoutsCount())throw new Error("No layout was found in project after step ".concat(e," of flow"));l[r]=o.getLayoutAt(o.getLayoutsCount()-1).getName()}else if(a.startsWith("sceneLastObjectName")){if(!o||0===o.getLayoutsCount())return;var c=a.split(":")[1],u=c?i[c]:void 0,d=u&&o.hasLayoutNamed(u)?o.getLayout(u):o.getLayoutAt(0);if(0===d.getObjectsCount())throw new Error("No object was found in layout after step ".concat(e," of flow"));l[r]=d.getObjectAt(d.getObjectsCount()-1).getName()}}))},u=n;u<=r;u++)c(u);return l}({flow:ge,startIndex:Z,endIndex:r-1,data:M,project:c});L(i)}je(r)}}),[ge,je,be,M,c,Z]);l.useEffect((function(){for(var e=[],t=0;t<n.flow.length;t++)n.flow[t].isCheckpoint&&e.push(t);e.push(n.flow.length-1),P(e)}),[n.flow]);var Ze=l.useCallback((function(){if(!S)return[0];var e=GD(S);return S.map((function(t,n){if(Z>=t)return 100;var r=e[n];return Z<r?0:Math.floor((Z-r)/(t-r)*100)}))}),[Z,S]),ke=l.useCallback((function(){if(!c||0===c.getLayoutsCount()||!p)return!1;var e=XD({project:c,sceneName:p}),t=A.current[p];return"number"===typeof t&&"number"===typeof e&&e>t}),[c,p]),we=function(){return{step:Z,progress:Ze(),projectData:M}},Te=l.useCallback((function(){for(var e=Z;ge[e].skippable;)e+=1;for(var t=null,n=e;n>=Z;n--){if(QD(ge[n].nextStepTrigger,M)){t=n+1;break}}if(null===t){var r=ge[Z].shortcuts;if(!r)return;var i,o=(0,ia.Z)(r);try{var a,s=function(){var e=i.value;if(QD(e.trigger,M)||e.trigger&&(e.trigger.objectAddedInLayout||e.trigger.presenceOfElement&&e.trigger.presenceOfElement.match(WD))&&ke())return(t=ge.findIndex((function(t){return t.id===e.stepId})))<0?(console.warn("Step with id ".concat(e.stepId," could not be found. Shortcut not taken.")),{v:void 0}):0};for(o.s();!(i=o.n()).done&&0!==(a=s());)if(a)return a.v}catch(l){o.e(l)}finally{o.f()}if(null===t)return}ye({stepIndex:t,gatherData:!0})}),[Z,ye,M,ge,ke]),Se=(0,Ea.N)(Te,200),Pe=l.useCallback((function(e){ye({stepIndex:Z+1,gatherData:e})}),[Z,ye]),Ee=function(e,t){var n=null;Object.entries(M).forEach((function(t){var r=(0,s.Z)(t,2),i=r[0];r[1]!==e||(n=i)})),n&&(M[n]=t)};l.useImperativeHandle(t,(function(){return{onPreviewLaunch:Ie,getProgress:we,changeData:Ee}}));var Ie=l.useCallback((function(){if(Ce){var e=Ce.nextStepTrigger;e&&e.previewLaunched&&Pe()}}),[Pe,Ce]);l.useEffect((function(){var e=document.querySelector("body");if(e){var t=new MutationObserver(Se);return t.observe(e,{childList:!0,attributes:!1,subtree:!0,characterData:!0}),le.current=t,function(){le.current&&(le.current.disconnect(),le.current=null)}}}),[Se]),l.useEffect((function(){if(Ce){var e=Ce.id,t=Ce.isOnClosableDialog;e&&me.hasOwnProperty(e)&&H(me[e]),t||(_.current=Z),G(null),J(null),ne(null),ae(!1),pe(!1),Z>=be&&D(!0)}}),[Ce,Z,be,me]),l.useEffect((function(){if(Ce&&p&&c){var e=XD({project:c,sceneName:p});"number"===typeof e&&(A.current[p]=e)}}),[Ce,p,c]),l.useEffect((function(){if(Ce){var e=Ce.nextStepTrigger,t=Ce.elementToHighlightId;if(e&&e.valueEquals){if(!t)return;Q.current=e.valueEquals,J(t)}else if(e&&e.valueHasChanged){if(!t)return;var n=document.querySelector(t);n&&(Y.current=$D(n)),G(t)}else if(e&&e.instanceAddedOnScene){var r=e.instanceAddedOnScene.split(":"),i=(0,s.Z)(r,2),o=i[0],a=i[1],l=M[o];if(!l)return;var c=a?M[a]:void 0;ne({objectName:l,sceneName:c,count:e.instancesCount})}else e&&(e.objectAddedInLayout||e.presenceOfElement&&e.presenceOfElement.match(WD))&&ae(!0)}}),[Ce,M]),l.useEffect((function(){if(Ce){var e=Ce.tooltip;e&&[e.description,e.title].some((function(e){return!!(t=e)&&(t.messageByLocale?Object.values(t.messageByLocale).some((function(e){return e.includes("$(".concat(ND))})):"string"===typeof t.messageDescriptor&&t.messageDescriptor.includes("$(".concat(ND))||"object"===typeof t.messageDescriptor&&Object.values(t.messageDescriptor).some((function(e){return"string"===typeof e&&e.includes("$(".concat(ND))})));var t}))&&pe(!0)}}),[Ce]);var Me=l.useCallback((function(){if(W){var e=document.querySelector(W),t=Y.current;e&&$D(e)!==t&&Pe()}}),[Pe,W]),Le=l.useCallback((function(){if(K){var e=document.querySelector(K),t=Q.current;t&&e&&$D(e).replace(/\s/g,"")===t.replace(/\s/g,"")&&Pe()}}),[Pe,K]),Ae=l.useCallback((function(){if(te&&c&&0!==c.getLayoutsCount()){var e=te.objectName,t=te.sceneName,n=te.count,r=t&&c.hasLayoutNamed(t)?c.getLayout(t):c.getLayoutAt(0);if(n)ck(r.getInitialInstances(),e)>=n&&Pe();else r.getInitialInstances().hasInstancesOfObject(e)&&Pe()}}),[c,Pe,te]),Fe=l.useCallback((function(){oe&&ke()&&Pe(!0)}),[ke,Pe,oe]);(0,oo.Y)(g,de?500:null),(0,oo.Y)(Me,W?1e3:null),(0,oo.Y)(Le,K?1e3:null),(0,oo.Y)(Ae,te?500:null),(0,oo.Y)(Fe,oe?1e3:null),(0,oo.Y)(Te,Ce&&Ce.isTriggerFlickering?500:null);var Oe=l.useMemo((function(){return(0,WM.d1)(n.id)}),[n.id]),Re="touch"===(0,Gr.BF)(),De=function(e){if(!Ce)return null;var t,n,i=Ce.tooltip;if(i){var o=YD({text:i.title,data:M,i18n:e,project:c}),s=YD({text:Re&&i.touchDescription?i.touchDescription:i.description,data:M,i18n:e,project:c});t=(0,a.Z)((0,a.Z)({},i),{},{title:o,description:s})}var l=Ce.nextStepTrigger;if(l&&l.clickOnTooltipButton){var u=YD({text:l.clickOnTooltipButton,data:M,i18n:e,project:c});n=u?{clickOnTooltipButton:u}:void 0}else n=l;var p=(0,a.Z)((0,a.Z)({},Ce),{},{tooltip:t,nextStepTrigger:n});Ce.elementToHighlightId&&(p.elementToHighlightId=JD(Ce.elementToHighlightId,M));var f=0;if(S){var h=GD(S);f=S.map((function(e,t){return Z<=e&&Z>=h[t]})).indexOf(!0)}return(0,d.jsx)(_D,{step:p,expectedEditor:v?qD(U,M):null,goToFallbackStep:function(){je(_.current)},endTutorial:function(){return r({shouldCloseProject:!Oe,shouldWarnAboutUnsavedChanges:!Oe})},progress:Ze()[f],goToNextStep:Pe})},_e=(0,Ea.N)((function(){C(!!U&&(U.editor!==u||!!U.scene&&M[U.scene]!==p))}),v?0:1e3);return l.useEffect((function(){_e()}),[_e,u,p]),function(e){var t=e.authenticatedUser,n=e.displayEndDialog,r=e.tutorial,a=t.badges,s=t.onBadgesChanged,c=t.profile,u=t.getAuthorizationHeader;l.useEffect((function(){(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c&&n){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,BD.x)({times:3},(function(){return(0,Xr.gK)({badges:a,onBadgesChanged:s,profile:c,getAuthorizationHeader:u},(0,Xr.vO)(r.id))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Couldn't create completion badge for tutorial ".concat(r.id,"."),e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))()}),[n,a,s,c,u,r.id])}({authenticatedUser:he,tutorial:n,displayEndDialog:R}),(0,d.jsx)(b.I18n,{children:function(e){var t=e.i18n;return(0,d.jsxs)(d.Fragment,{children:[De(t),R&&(0,d.jsx)(CD,{isLastStep:!0,dialogContent:xe,endTutorial:function(){D(!1),Oe&&fe.saveTutorialProgress((0,a.Z)({tutorialId:n.id,userId:he.profile?he.profile.id:void 0},we())),r({shouldCloseProject:!1,shouldWarnAboutUnsavedChanges:!Oe})}})]})}})})),t_=function(e){var t=e.editorTabs,n=l.useState(null),r=(0,s.Z)(n,2),i=r[0],o=r[1],a=l.useState(null),c=(0,s.Z)(a,2),u=c[0],d=c[1];return l.useEffect((function(){var e=KI(t);if(e){var n=e.key.startsWith("start page")?"Home":e.key.startsWith("layout event")?"EventsSheet":e.key.startsWith("external events")?"ExternalEvents":e.key.startsWith("external layout")?"ExternalLayout":e.key.startsWith("events functions extension")?"Extension":e.key.startsWith("resources")?"Resources":"Scene";o(n),e.key.startsWith("layout")&&e.projectItemName&&d(e.projectItemName)}else o(null)}),[t]),{InAppTutorialOrchestrator:e_,orchestratorProps:{currentEditor:i,currentSceneName:u}}},n_=l.memo((function(e){return(0,d.jsxs)(u.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.75 7C21.75 7.41421 21.4142 7.75 21 7.75H5C4.58579 7.75 4.25 7.41421 4.25 7C4.25 6.58579 4.58579 6.25 5 6.25H21C21.4142 6.25 21.75 6.58579 21.75 7Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.75 17C21.75 17.4142 21.4142 17.75 21 17.75H5C4.58579 17.75 4.25 17.4142 4.25 17C4.25 16.5858 4.58579 16.25 5 16.25H21C21.4142 16.25 21.75 16.5858 21.75 17Z",fill:"currentColor"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.75 12C21.75 12.4142 21.4142 12.75 21 12.75H5C4.58579 12.75 4.25 12.4142 4.25 12C4.25 11.5858 4.58579 11.25 5 11.25H21C21.4142 11.25 21.75 11.5858 21.75 12Z",fill:"currentColor"})]}))})),r_=ae()("electron"),i_="title-bar-draggable-part",o_={container:{display:"flex",flexShrink:0,alignItems:"flex-end"},leftSideArea:{alignSelf:"stretch"},rightSideArea:{alignSelf:"stretch",flex:1},menuIcon:{marginLeft:4,marginRight:4}};function a_(e){var t=e.children,n=e.onBuildMenuTemplate,r=(0,Pt.Z)(),i=l.useContext(f.Z).titlebar.backgroundColor;l.useEffect((function(){Y.ZP.setTitleBarColor(i)}),[i]),(0,Y.C)({onChanged:r});var o=!!r_&&(0,$l.z1)()?76:0,s=!!r_&&!(0,$l.z1)()?150:0,c=navigator.windowControlsOverlay;if(c&&c.visible){var u=c.getTitlebarAreaRect(),p=u.x,h=u.width;o=p,s=window.innerWidth-p-h}return(0,d.jsxs)("div",{style:(0,a.Z)((0,a.Z)({},o_.container),{},{backgroundColor:i}),children:[(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},o_.leftSideArea),{},{width:o}),className:i_}),(0,d.jsx)(Ig.Z,{element:(0,d.jsx)(M.Z,{size:"small",id:"gdevelop-main-menu",style:o_.menuIcon,color:"default",children:(0,d.jsx)(n_,{})}),buildMenuTemplate:n}),t,(0,d.jsx)("div",{style:(0,a.Z)((0,a.Z)({},o_.rightSideArea),{},{minWidth:s+30}),className:i_})]})}var s_=n(85545),l_=(n(51497),{position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"}),c_=function(e){var t=e.clientOffset,n=e.previewPosition,r=e.screenType;if(!t)return{display:"none"};var i=t.x,o=t.y,a="touch"===r?80:48,s="center"===n?o-a/2:o-16,l="translate(".concat("center"===n?i-a/2:i+16,"px, ").concat(s,"px)");return{transform:l,WebkitTransform:l}},u_=(0,Mh.DragLayer)((function(e){return{item:e.getItem(),itemType:e.getItemType(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset(),clientOffset:e.getClientOffset(),isDragging:e.isDragging()}}))((function(e){var t=e.item,n=(e.itemType,e.isDragging),r=(e.initialOffset,e.currentOffset,e.clientOffset),i=(0,Gr.BF)(),o=l.useMemo((function(){if(!t||!r)return null;if(function(e){var t=e.x,n=e.y,r=document.querySelector("#".concat(KE));if(r){var i=r.getBoundingClientRect();return!(t>=i.left&&t<=i.right&&n>=i.top&&n<=i.bottom)}var o=document.querySelector("#scene-editor[data-active=true] #".concat(mS));if(o){var a=o.getBoundingClientRect();if(t>=a.left&&t<=a.right&&n>=a.top&&n<=a.bottom)return!0}return!1}(r))return null;var e="touch"===i?80:48;return t.thumbnail?(0,d.jsx)(Hg.W,{alt:t.name,src:t.thumbnail,style:{maxWidth:e,maxHeight:e}}):(0,d.jsx)(F.Z,{children:t.name})}),[t,r,i]);return n?(0,d.jsx)("div",{style:l_,children:(0,d.jsx)("div",{style:c_({clientOffset:r,previewPosition:t&&!t.thumbnail?"aboveRight":"center",screenType:i}),children:o})}):null})),d_=function(e){var t=e.cloudProjectId,n=e.onClose,r=e.onOpenPreviousVersion,a=l.useContext(tr.ZP),c=a.profile,u=l.useState(null),p=(0,s.Z)(u,2),f=p[0],h=p[1],g=l.useState(!1),x=(0,s.Z)(g,2),m=x[0],v=x[1],C=l.useState(!1),j=(0,s.Z)(C,2),y=j[0],Z=j[1],k=l.useState(!0),w=(0,s.Z)(k,2),T=w[0],S=w[1];l.useEffect((function(){t&&c&&c.id&&(0,Ar.eN)({cloudProjectId:t,userId:c.id})}),[t,c]),l.useEffect((function(){var e,n=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var n,r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,tT.MH)(a,t);case 2:if(n=e.sent){e.next=5;break}throw new Error("We couldn't get the project last versions.");case 5:r=1;case 6:if(!(r<n.length)){e.next=17;break}return o=n[r],e.next=10,(0,tT.Rn)(a,t,o.id);case 10:if(!e.sent){e.next=14;break}return h(o),e.abrupt("return");case 14:r++,e.next=6;break;case 17:Z(!0);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(t){return new Promise((function(n){e=setTimeout((function(){n()}),t)}))},s=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([n(),r(15e3)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),v(!0);case 8:return e.prev=8,S(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[0,5,8,11]])})));return function(){return e.apply(this,arguments)}}();return s(),function(){return clearTimeout(e)}}),[t,a]);var P=m||y?[(0,d.jsx)(te.vF,{label:(0,d.jsx)(b.Trans,{id:"Close"}),onClick:n},"close")]:T?[]:f?[(0,d.jsx)(J.Z,{label:(0,d.jsx)(b.Trans,{id:"Cancel"}),onClick:n},"cancel"),(0,d.jsx)(te.vF,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Accept"}),onClick:function(){return r(f.id)}},"restore")]:[],E=m||y?n:T?void 0:f?function(){return r(f.id)}:void 0,I=a.cloudProjects?a.cloudProjects.find((function(e){return e.id===t})):null,M=I?I.name:null;return(0,d.jsx)(b.I18n,{children:function(e){var t=e.i18n;return(0,d.jsx)(te.ZP,{open:!0,flexColumnBody:!0,maxWidth:"sm",onRequestClose:n,onApply:E,actions:P,title:f&&!T?(0,d.jsx)(b.Trans,{id:"A functioning save has been found!"}):(0,d.jsx)(b.Trans,{id:"This file is corrupt"}),children:m?(0,d.jsx)(De.Z,{kind:"error",children:(0,d.jsx)(b.Trans,{id:"An error occurred while trying to recover your project last versions. Please try again later."})}):T?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.x1,{children:(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(F.Z,{noMargin:!0,children:M?(0,d.jsx)(b.Trans,{id:'The latest save of "{cloudProjectName}" is corrupt and cannot be opened.',values:{cloudProjectName:M}}):(0,d.jsx)(b.Trans,{id:"The latest save of this project is corrupt and cannot be opened."})}),(0,d.jsx)(F.Z,{noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Please wait while we scan your project to find a solution."})})]})}),(0,d.jsx)(L.x1,{justifyContent:"center",children:(0,d.jsx)(eo.Z,{})})]}):y?(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(L.x1,{children:(0,d.jsxs)(L.sg,{noMargin:!0,children:[(0,d.jsx)(F.Z,{noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"We couldn't find a version to go back to."})}),(0,d.jsx)(F.Z,{noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"Please get in touch with us to find a solution."})})]})})}):f?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.x1,{children:(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(F.Z,{noMargin:!0,children:(0,d.jsx)(b.Trans,{id:"We have found a non-corrupt save from {0} available for modification.",values:{0:t.date(f.createdAt,{dateStyle:"long",timeStyle:"short"})}})})})}),(0,d.jsx)(L.x1,{children:(0,d.jsx)(F.Z,{children:(0,d.jsx)(b.Trans,{id:"Would you like to open the non-corrupt version instead?"})})})]}):null})}})},p_=function(e){var t=e.onClose,n=e.isLoading,r=e.onSaveAsDuplicate,i=e.onSaveAsMainVersion,o=[(0,d.jsx)(J.Z,{disabled:n,label:(0,d.jsx)(b.Trans,{id:"Save as..."}),onClick:r},"save-copy"),(0,d.jsx)(Sr.Z,{isLoading:n,children:(0,d.jsx)(te.vF,{primary:!0,disabled:n,label:(0,d.jsx)(b.Trans,{id:"Save as main version"}),onClick:i})},"save-main")];return(0,d.jsx)(te.ZP,{open:!0,flexColumnBody:!0,cannotBeDismissed:n,maxWidth:"sm",onRequestClose:t,onApply:i,actions:o,title:(0,d.jsx)(b.Trans,{id:"What would you like to do with this uncorrupted version of your project?"}),children:(0,d.jsx)(L.x1,{})})},f_=function(e){var t=e.beforeCreatingProject,n=e.afterCreatingProject,r=e.onSuccessOrError,s=e.onError,c=e.getStorageProviderOperations,u=e.loadFromProject,d=e.openFromFileMetadata,p=e.onProjectSaved,f=e.ensureResourcesAreMoved,h=l.useContext(tr.ZP),g=h.profile,x=l.useContext(q.Z),m=l.useContext(se.ZP),v=(0,lt.Z)().showAlert,b=l.useContext(Yr.Z).getInAppTutorialShortHeader,C=function(e,t){e.resetProjectUuid(),e.setVersion("1.0.0"),e.getAuthorIds().clear(),e.setAuthor(""),t.templateSlug&&e.setTemplateSlug(t.templateSlug),t.width&&t.height&&e.setGameResolutionSize(t.width,t.height),t.orientation&&e.setOrientation(t.orientation),t.optimizeForPixelArt&&(e.setPixelsRounding(!0),e.setScaleMode("nearest")),t.projectName&&e.setName(t.projectName||"New game")},j=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,a){var l,g,b,j,y,Z,k,w,T,S,P,E,I,M,L;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,g=t.storageProvider,b=g?c(t.storageProvider):null,!t.project){e.next=11;break}return e.next=8,u(t.project,null);case 8:l=e.sent,e.next=15;break;case 11:if(!t.fileMetadata||!g){e.next=15;break}return e.next=14,d(t.fileMetadata);case 14:l=e.sent;case 15:if(l){e.next=17;break}throw new Error("Neither a project nor a file metadata to load was provided for the new project");case 17:if(y=(j=l).currentProject,Z=j.editorTabs,y){e.next=20;break}throw new Error("The new project could not be opened.");case 20:if(k=y.getProjectUuid(),C(y,a),!h.profile){e.next=31;break}return e.prev=23,e.next=26,(0,Ii.r$)(h.getAuthorizationHeader,h.profile.id,{gameId:y.getProjectUuid(),authorName:y.getAuthor()||"Unspecified publisher",gameName:y.getName()||"Untitled game",templateSlug:y.getTemplateSlug()});case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(23),console.error("Unable to register the game to the user profile, the game will not be listed in the user profile.",e.t0);case 31:if(w=c(a.storageProvider),!(T=w.onSaveProjectAs)){e.next=40;break}return e.next=36,T(y,a.saveAsLocation,{onStartSaving:function(){console.log("Start saving as the new project...")},onMoveResources:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.newFileMetadata,console.log("Start moving resources to the new project..."),g&&b&&t.fileMetadata){e.next=5;break}return console.log("No storage provider set or no previous FileMetadata (probably creating a blank project) - skipping resources copy."),e.abrupt("return");case 5:return e.next=7,f({project:y,newFileMetadata:r,newStorageProvider:a.storageProvider,newStorageProviderOperations:w,oldFileMetadata:t.fileMetadata,oldStorageProvider:g,oldStorageProviderOperations:b,authenticatedUser:h});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 36:S=e.sent,P=S.wasSaved,E=S.fileMetadata,P&&(p(E),x.sealUnsavedChanges(),"LocalFile"===a.storageProvider.internalName&&m.setHasProjectOpened(!0));case 40:return e.next=42,n({project:y,editorTabs:Z,oldProjectId:k});case 42:e.next=50;break;case 44:e.prev=44,e.t1=e.catch(2),I=c(),M=I.getWriteErrorMessage,L=M?M(e.t1):{id:"An error occurred when opening or saving the project. Try again later or choose another location to save the project to."},v({title:{id:"Unable to create the project"},message:L}),s();case 50:return e.prev=50,r(),e.finish(50);case 53:case"end":return e.stop()}}),e,null,[[2,44,50,53],[23,28]])})));return function(t,n){return e.apply(this,arguments)}}(),[h,c,u,s,p,d,m,v,n,f,r,x]),y=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),r=wi(),e.next=4,j(r,n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,j]),Z=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,r,o){var s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),e.next=3,Ei({i18n:o,exampleShortHeader:n});case 3:return s=e.sent,e.next=6,j(s,(0,a.Z)((0,a.Z)({},r),{},{templateSlug:n.slug}));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[t,j]),k=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,r){var o,a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(),g){e.next=3;break}throw new Error("Unable to create the project with the game template because no profile was found.");case 3:return e.next=5,(0,dZ.W_)(h.getAuthorizationHeader,{userId:g.id});case 5:return o=e.sent,e.next=8,(0,$C.N)(n,o);case 8:return a=e.sent,e.next=11,Pi(a,n.id);case 11:return s=e.sent,e.next=14,j(s,r);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t,j,g,h]),w=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,r){var o,a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(),o=b(n)){e.next=4;break}throw new Error('No in app tutorial found for id "'.concat(n,'"'));case 4:if(a=o.initialTemplateUrl){e.next=7;break}throw new Error('No initial template URL for the in-app tutorial "'.concat(n,'"'));case 7:return e.next=9,Si(a,o.id);case 9:return s=e.sent,e.next=12,j(s,r);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t,j,b]),T=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),r=Ti(),e.next=4,j(r,n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,j]),S=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,r){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),i=n,(0,Ar.tP)({exampleUrl:i,exampleSlug:"generated-project"}),o=yi(i),e.next=4,j(o,r);case 4:case"end":return e.stop()}var i}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t,j]);return{createEmptyProject:y,createProjectFromExample:Z,createProjectFromPrivateGameTemplate:k,createProjectFromInAppTutorial:w,createProjectWithLogin:T,createProjectFromAIGeneration:S}},h_=function(e){var t=e.currentProjectId,n=e.editorTabs,r=e.getEditorOpeningOptions,i=e.setEditorTabs,o=l.useContext(se.ZP),a=o.setEditorStateForProject,s=o.getEditorStateForProject,c=l.useCallback((function(){if(t&&0!==n.currentTab){var e={currentTab:n.currentTab,editors:n.editors.filter((function(e){return"start page"!==e.key})).map(UI)};a(t,0===e.editors.length?void 0:{editorTabs:e})}}),[t,n,a]),u=(0,Ea.N)(c,t?1e3:0);return l.useEffect((function(){u()}),[u,t,n,a]),{hasAPreviousSaveForEditorTabsState:l.useCallback((function(e){var t=e.getProjectUuid();return!!s(t)}),[s]),openEditorTabsFromPersistedState:l.useCallback((function(e){var t=e.getProjectUuid(),o=s(t);if(!o)return 0;var a=!0,l=o.editorTabs.editors.map((function(t){return function(e){var t=e.project,n=e.kind,r=e.name;if(["debugger","start page","resources"].includes(n))return!0;switch(n){case"events functions extension":return t.hasEventsFunctionsExtensionNamed(r);case"layout":case"layout events":return t.hasLayoutNamed(r);case"external layout":return t.hasExternalLayoutNamed(r);case"external events":return t.hasExternalEventsNamed(r);default:return!1}}({project:e,kind:t.editorKind,name:t.projectItemName||""})?r({kind:t.editorKind,name:t.projectItemName||"",dontFocusTab:!0}):(a=!1,null)})).filter(Boolean),c=WI(n);c.editors.some((function(e){return"start page"===e.key}))||(c=HI(c,r({kind:"start page",name:""})));var u,d=(0,ia.Z)(l);try{for(d.s();!(u=d.n()).done;){var p=u.value;c=HI(c,p)}}catch(f){d.e(f)}finally{d.f()}return c=VI(c,a?o.editorTabs.currentTab:c.editors.length>=1?1:0),i(c),l.length}),[r,i,n,s])}},g_=n(42132),x_=n(77080),m_={appBar:{height:32,minHeight:32},toolbar:{height:32,minHeight:32,paddingLeft:15,paddingRight:15},title:{fontSize:"15px",flexGrow:1,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}},v_=function(e){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(te.pi,{backgroundColor:"transparent"}),(0,d.jsx)(g_.Z,{position:"static",style:m_.appBar,className:"safe-area-aware-top-margin",color:"primary",elevation:0,children:(0,d.jsxs)(x_.Z,{style:m_.toolbar,children:[(0,d.jsx)(Ze.ZP,{title:e.title,placement:"bottom",enterDelay:mP.K,children:(0,d.jsx)(iL.Z,{variant:"h6",style:m_.title,children:e.title})}),(0,d.jsx)(xn.Z,{onClick:e.onClose,edge:"end",color:"inherit",size:"small",id:"".concat(e.id,"-close"),children:(0,d.jsx)(_.Z,{})})]})})]})},b_=n(87622),C_=(new Date).getFullYear(),j_={avatar:{width:20,height:20},greyed:{opacity:.7},versionsContainer:{display:"flex",flexDirection:"column",paddingLeft:30,gap:2},dateContainer:{flexShrink:0},iconContainer:{fontSize:20,display:"flex",alignItems:"center"},restoredVersionContainer:{opacity:.7},sharedRowStyle:{display:"flex",alignItems:"center",padding:8,borderRadius:4},labelTextfield:{width:"100%"},labelSubRow:{display:"flex",alignItems:"center",padding:"2px 12px 2px 2px",borderRadius:4},versionSubRow:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"2px 12px 2px 32px",borderRadius:4},statusIndicator:{height:6,width:6,borderRadius:3},rowContainer:{flex:1,display:"flex",flexDirection:"column"}},y_=function(e){var t=e.status,n=l.useContext(f.Z);if("opened"===t)return null;var r=N(n,t);return(0,d.jsx)("span",{style:(0,a.Z)((0,a.Z)({},j_.statusIndicator),{},{backgroundColor:r})})},Z_=function(e){var t=e.status,n=l.useContext(f.Z),r="unsavedChanges"===t?(0,d.jsx)(b.Trans,{id:"Unsaved changes"}):"saving"===t?(0,d.jsx)(b.Trans,{id:"Saving..."}):"latest"===t?(0,d.jsx)(b.Trans,{id:"Latest save"}):(0,d.jsx)(b.Trans,{id:"Changes saved"}),i=N(n,t);return(0,d.jsx)(be.Z,{style:{backgroundColor:i,color:"#111111",padding:"3px 0",height:"auto"},label:r})},k_=(0,R.Z)((function(e){return(0,D.Z)({root:(0,a.Z)((0,a.Z)({},j_.sharedRowStyle),{},{justifyContent:"space-between",alignItems:"flex-start","&:hover":{backgroundColor:e.palette.action.hover},"&.selected":{backgroundColor:e.palette.action.focus}})})})),w_=function(e){var t=e.authenticatedUserId,n=e.version,i=e.usersPublicProfileByIds,o=e.isEditing,c=e.isLatest,u=e.isLoading,p=e.onRename,h=e.onCancelRenaming,g=e.onContextMenu,x=e.displayFullDate,m=e.openedVersionStatus,v=e.getAnonymousAvatar,j=l.useRef(null),y=l.useState(n.label||""),Z=(0,s.Z)(y,2),k=Z[0],w=Z[1],T=n.userId?i[n.userId]:null,S=function(){p(n,k)},P=l.useCallback((function(){w(n.label||""),h()}),[n,h]),E=(0,As.i)((function(e){return g(e,n)})),I=k_(),O=function(e,t){var n=l.useContext(f.Z);if(t&&t.version.id===e.id&&"unsavedChanges"===t.status)return{border:"1px solid ".concat(n.statusIndicator.error)}}(n,m),R=v(),D=m&&"opened"!==m.status&&m.version.id===n.id?m.status:c?"latest":null;return(0,d.jsx)(b.I18n,{children:function(e){var i,s=e.i18n;return(0,d.jsxs)("div",{className:Pn()((i={},(0,r.Z)(i,I.root,!0),(0,r.Z)(i,"selected",!!m&&m.version.id===n.id),i)),style:O,children:[(0,d.jsxs)("div",(0,a.Z)((0,a.Z)({onContextMenu:function(e){return g(e,n)},style:j_.rowContainer},E),{},{children:[D&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)(Z_,{status:D})}),(0,d.jsx)(L.LZ,{})]}),o?(0,d.jsx)($r.ZP,{ref:j,margin:"none",value:k,stopContextMenuPropagation:!0,translatableHintText:{id:"End of jam"},onChange:function(e,t){return w(t.slice(0,tT.XU))},autoFocus:"desktopAndMobileDevices",onKeyPress:function(e){(0,kn.ph)(e)&&S()},onKeyDown:function(e){e.stopPropagation()},onKeyUp:function(e){(0,kn.W$)(e)&&P()},inputStyle:{fontSize:14},endAdornment:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(M.Z,{edge:"end",onClick:P,disabled:u,size:"small",children:(0,d.jsx)(_.Z,{})}),(0,d.jsx)(M.Z,{edge:"end",onClick:S,disabled:u,size:"small",children:(0,d.jsx)(ac.Z,{})})]}),style:j_.labelTextfield}):n.label?(0,d.jsxs)(C.pJ,{noMargin:!0,children:[(0,d.jsx)(F.Z,{noMargin:!0,children:n.label}),u&&(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(eo.Z,{size:20})}),(0,d.jsx)("div",{style:j_.dateContainer,children:(0,d.jsx)(F.Z,{noMargin:!0,style:j_.greyed,children:x?s.date(n.createdAt,{dateStyle:"medium",timeStyle:"short"}):s.date(n.createdAt,{hour:"numeric",minute:"numeric"})})})]}):(0,d.jsxs)(C.pJ,{noMargin:!0,children:[(0,d.jsx)(F.Z,{noMargin:!0,children:s.date(n.createdAt,{hour:"numeric",minute:"numeric"})}),u&&(0,d.jsx)(L.sg,{noMargin:!0,children:(0,d.jsx)(eo.Z,{size:20})})]}),n.restoredFromVersion&&(0,d.jsx)("div",{style:j_.restoredVersionContainer,children:(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[(0,d.jsx)("div",{style:j_.iconContainer,children:(0,d.jsx)(A,{fontSize:"inherit"})}),(0,d.jsx)(F.Z,{noMargin:!0,children:n.restoredFromVersion.label||s.date(n.restoredFromVersion.createdAt,{dateStyle:"medium",timeStyle:"short"})})]})}),T?(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[(0,d.jsx)(Ni.Z,{src:T.iconUrl,style:j_.avatar}),(0,d.jsx)(F.Z,{noMargin:!0,style:j_.greyed,children:T.username||(n.userId===t?(0,d.jsx)(b.Trans,{id:"Me"}):"")})]}):(0,d.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[(0,d.jsx)("img",{src:R.src,alt:R.alt,style:j_.avatar}),(0,d.jsx)(F.Z,{noMargin:!0,style:j_.greyed,children:(0,d.jsx)(b.Trans,{id:"Anonymous"})})]})]})),(0,d.jsx)(M.Z,{size:"small",onClick:function(e){g(e,n)},children:(0,d.jsx)(Ls.Z,{})})]})}})},T_=(0,R.Z)((function(e){return(0,D.Z)({root:(0,a.Z)((0,a.Z)({},j_.sharedRowStyle),{},{justifyContent:"flex-start","&:hover":{backgroundColor:e.palette.action.hover},"&:focus":{backgroundColor:e.palette.action.hover}}),labelSubRow:(0,a.Z)((0,a.Z)({},j_.labelSubRow),{},{"&.selected":{backgroundColor:e.palette.action.focus}}),versionSubRow:(0,a.Z)((0,a.Z)({},j_.versionSubRow),{},{"&.selected":{backgroundColor:e.palette.action.focus}})})})),S_=function(e){var t=e.day,n=e.authenticatedUserId,i=e.versions,o=e.isOpenedInitially,a=e.editedVersionId,c=e.latestVersion,u=e.loadingVersionId,p=e.onRenameVersion,f=e.onCancelRenaming,h=e.onContextMenu,g=e.openedVersionStatus,x=e.usersPublicProfileByIds,m=e.getAnonymousAvatar,v=l.useState(o),j=(0,s.Z)(v,2),y=j[0],Z=j[1],k=new Date(t).getFullYear()!==C_,w=l.useMemo((function(){return i.filter((function(e){return e.label}))}),[i]),T=!!c&&i.find((function(e){return e.id===c.id})),S=!!g&&i.find((function(e){return e.id===g.version.id}))&&!!g&&!g.version.label&&!y,P=T&&c&&!c.label&&!y,E=T_();return(0,d.jsx)(b.I18n,{children:function(e){var o,s=e.i18n;return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(O.Z,{onClick:function(){return Z(!y)},className:E.root,children:(0,d.jsxs)(L.sg,{noMargin:!0,expand:!0,children:[(0,d.jsxs)("div",{className:Pn()((o={},(0,r.Z)(o,E.labelSubRow,!0),(0,r.Z)(o,"selected",S),o)),children:[y?(0,d.jsx)(jt.Z,{}):(0,d.jsx)(Ct.Z,{}),(0,d.jsxs)(L.x1,{noMargin:!0,justifyContent:"space-between",expand:!0,alignItems:"center",children:[(0,d.jsx)(F.Z,{noMargin:!0,children:s.date(t,{month:"short",day:"numeric",year:k?"numeric":void 0})}),S&&g?(0,d.jsx)(y_,{status:g.status}):P?(0,d.jsx)(y_,{status:"latest"}):null]})]}),w&&(0,d.jsx)(b_.Z,{in:!y,children:(0,d.jsx)(C.ak,{noMargin:!0,children:w.map((function(e){var t,n=g&&g.version.id===e.id,i=c&&c.id===e.id;return(0,d.jsxs)("div",{className:Pn()((t={},(0,r.Z)(t,E.versionSubRow,!0),(0,r.Z)(t,"selected",n),t)),children:[(0,d.jsx)("div",{style:j_.greyed,children:(0,d.jsx)(F.Z,{size:"body-small",noMargin:!0,children:e.label})}),n&&g?(0,d.jsx)(y_,{status:g.status}):i?(0,d.jsx)(y_,{status:"latest"}):null]},e.id)}))})})]})}),(0,d.jsx)(b_.Z,{in:y,children:(0,d.jsx)("div",{style:j_.versionsContainer,children:i.map((function(e){return(0,d.jsx)(w_,{authenticatedUserId:n,isLatest:!!c&&c.id===e.id,version:e,onRename:p,isLoading:u===e.id,onCancelRenaming:f,usersPublicProfileByIds:x,isEditing:e.id===a,onContextMenu:h,getAnonymousAvatar:m,openedVersionStatus:g},e.id)}))})})]})}})},P_=[{src:"res/avatar/green-hero.svg",alt:"Green hero avatar"},{src:"res/avatar/red-hero.svg",alt:"Red hero avatar"},{src:"res/avatar/ghost.svg",alt:"Ghost avatar"},{src:"res/avatar/pink-cloud.svg",alt:"Pink cloud avatar"}],E_={scrollView:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},container:{flex:1,display:"flex",flexDirection:"column",gap:2}},I_=l.memo((function(e){var t=e.projectId,n=e.authenticatedUserId,r=e.versions,a=e.onRenameVersion,c=e.openedVersionStatus,u=e.onLoadMore,p=e.canLoadMore,f=e.onCheckoutVersion,h=l.useState(),g=(0,s.Z)(h,2),x=g[0],m=g[1],v=l.useState(null),C=(0,s.Z)(v,2),j=C[0],y=C[1],Z=l.useState(null),k=(0,s.Z)(Z,2),w=k[0],T=k[1],S=l.useState(!1),P=(0,s.Z)(S,2),E=P[0],I=P[1],M=l.useRef(null),A=l.useMemo((function(){return new Set(r.map((function(e){return e.userId})).filter(Boolean))}),[r]),F=r[0]||null,O=l.useMemo((function(){return function(e){if(0===e.length)return{};var t={};return e.forEach((function(e){var n=new Date(e.createdAt.slice(0,10)).getTime();t[n]?t[n].push(e):t[n]=[e]})),t}(r)}),[r]),R=Object.keys(O).map((function(e){return Number(e)})).sort().reverse();l.useEffect((function(){(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A){e.next=2;break}return e.abrupt("return");case 2:if(0!==A.size){e.next=5;break}return m({}),e.abrupt("return");case 5:return e.next=7,(0,oc.TL)(Array.from(A));case 7:t=e.sent,m(t);case 9:case"end":return e.stop()}}),e)})))()}),[A]);var D=l.useCallback((function(e,t){var n=!c&&F&&F.id!==t.version.id,r=!!c&&c.version.id!==t.version.id,i=!!c&&F&&F.id===t.version.id;return[{label:e._(t.version.label?{id:"Edit name"}:{id:"Name version"}),click:function(){y(t.version.id)}},{label:i?e._({id:"Come back to latest version"}):e._({id:"Open version"}),click:function(){f(t.version)},enabled:n||r}]}),[f,F,c]),_=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(null),T(t.id),e.prev=2,e.next=5,a(t,{label:n});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("An error occurred while rename project version:",e.t0);case 10:return e.prev=10,T(null),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})));return function(t,n){return e.apply(this,arguments)}}(),[a]),B=l.useCallback((function(){y(null)}),[]),N=l.useCallback((function(e,t){var n=M.current;n&&n.open(e.clientX,e.clientY,{version:t})}),[]),U=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),e.prev=1,e.next=4,u();case 4:return e.prev=4,I(!1),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])}))),[u]),H=l.useCallback((function(){var e=0;return t.split("").forEach((function(n){e+=t.charCodeAt(0)})),P_[e%P_.length]}),[t]);return x?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(b.I18n,{children:function(e){e.i18n;return(0,d.jsxs)(Tt.Z,{style:E_.scrollView,children:[(0,d.jsxs)("div",{style:E_.container,children:[R.map((function(e,t){var r=O[e];return r&&0!==r.length?(0,d.jsx)(S_,{versions:r,latestVersion:F,authenticatedUserId:n,day:e,isOpenedInitially:0===t,usersPublicProfileByIds:x,onRenameVersion:_,onCancelRenaming:B,onContextMenu:N,editedVersionId:j,loadingVersionId:w,getAnonymousAvatar:H,openedVersionStatus:c},e):null})),p&&(0,d.jsx)(J.Z,{primary:!0,disabled:E||!p,label:E?(0,d.jsx)(b.Trans,{id:"Loading..."}):(0,d.jsx)(b.Trans,{id:"Show older"}),onClick:U})]}),!p&&(0,d.jsx)(L.x1,{noMargin:!0,children:(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"This is the end of the version history."})})})]})}}),(0,d.jsx)(za.Z,{ref:M,buildMenuTemplate:D})]}):null}),(function(e,t){return!e.isVisible&&!t.isVisible})),M_=I_,L_=n(32438),A_=function(e,t){return t&&e===L_.Z.internalName?t.fileIdentifier.startsWith("http")?null:t.fileIdentifier:null},F_={drawerContent:{width:320,overflowX:"hidden",display:"flex",flexDirection:"column"}},O_=function(e,t){var n=Date.parse(t[0].createdAt),r=e.filter((function(e){return Date.parse(e.createdAt)>n}));return[].concat((0,v.Z)(r),(0,v.Z)(t))},R_={versions:null,nextPageUri:null},D_=function(e){var t=e.fileMetadata,n=e.isSavingProject,r=e.getStorageProvider,c=e.onOpenCloudProjectOnSpecificVersion,u=l.useContext(q.Z).hasUnsavedChanges,p=(0,lt.Z)().showAlert,f=l.useContext(Ro.o).openSubscriptionDialog,h=l.useState(null),g=(0,s.Z)(h,2),x=g[0],m=g[1],j=l.useContext(tr.ZP),y=l.useRef(!1),Z=l.useRef(!1),k=j.subscription,w=j.getAuthorizationHeader,S=j.profile,P=r(),E=l.useState(R_),I=(0,s.Z)(E,2),M=I[0],A=I[1],F=l.useState(null),O=(0,s.Z)(F,2),R=O[0],D=O[1],_=l.useState(!1),B=(0,s.Z)(_,2),N=B[0],U=B[1],H=P.internalName,V=H===L_.Z.internalName,z=(0,nr.K6)(k),W=l.useState(A_(H,t)),G=(0,s.Z)(W,2),Y=G[0],X=G[1],K=l.useState(V&&t?t.lastModifiedDate:null),J=(0,s.Z)(K,2),Q=J[0],$=J[1],ee=V&&z,te=M.versions&&M.versions[0]?M.versions[0].id:null,ne=S?S.id:null;l.useEffect((function(){y.current||(X(A_(H,t)),$(V&&t?t.lastModifiedDate:null))}),[H,V,t]),l.useEffect((function(){(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z.current){e.next=2;break}return e.abrupt("return");case 2:if(Y&&ee){e.next=5;break}return A(R_),e.abrupt("return");case 5:return m(null),e.prev=6,e.next=9,(0,tT.If)(w,ne,Y,{forceUri:null});case 9:if(t=e.sent){e.next=12;break}return e.abrupt("return");case 12:A((function(e){return e.versions?{versions:O_(t.versions,e.versions),nextPageUri:e.nextPageUri}:{versions:t.versions,nextPageUri:t.nextPageUri}})),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(6),console.error("An error occurred while fetching project versions:",e.t0),m((0,d.jsx)(b.Trans,{id:"Could not load the project versions. Verify your internet connection or try again later."}));case 19:case"end":return e.stop()}}),e,null,[[6,15]])})))()}),[P,w,ne,Y,ee,Q]),l.useEffect((function(){Z.current||D((function(e){return!e||u&&"unsavedChanges"===e.status?e:{version:e.version,status:"unsavedChanges"}}))}),[u]),l.useEffect((function(){Z.current||D((function(e){return!e||n&&"saving"===e.status?e:n?{version:e.version,status:"saving"}:null}))}),[n]),l.useEffect((function(){t||D(null)}),[t]);var re=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y){e.next=2;break}return e.abrupt("return");case 2:return m(null),e.prev=3,e.next=6,(0,tT.If)(w,ne,Y,{forceUri:M.nextPageUri});case 6:if(t=e.sent){e.next=9;break}return e.abrupt("return");case 9:A({versions:[].concat((0,v.Z)(M.versions||[]),(0,v.Z)(t.versions)),nextPageUri:t.nextPageUri}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.error("An error occurred while fetching more project versions:",e.t0),m((0,d.jsx)(b.Trans,{id:"Could not load the project versions. Verify your internet connection or try again later."}));case 16:case"end":return e.stop()}}),e,null,[[3,12]])}))),[w,ne,Y,M]),ie=l.useCallback((function(){U(!0)}),[]),oe=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&R&&te){e.next=2;break}return e.abrupt("return");case 2:return Z.current=!0,y.current=!0,e.prev=4,e.next=7,c({fileMetadata:t,versionId:te,ignoreUnsavedChanges:!0,openingMessage:{id:"Opening latest save..."}});case 7:D(null);case 8:return e.prev=8,Z.current=!1,y.current=!1,e.finish(8);case 12:case"end":return e.stop()}}),e,null,[[4,,8,12]])}))),[t,c,R,te]),ae=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(R||!u){e.next=6;break}return e.next=5,p({title:{id:"There are unsaved changes"},message:{id:"Save your project before using the version history."}});case 5:return e.abrupt("return");case 6:if(!R||n.id!==te){e.next=11;break}return e.next=9,oe();case 9:return U(!1),e.abrupt("return");case 11:return Z.current=!0,y.current=!0,e.prev=13,e.next=16,c({fileMetadata:t,versionId:n.id,ignoreUnsavedChanges:!0,openingMessage:{id:"Opening older version..."}});case 16:D({version:n,status:"opened"});case 17:return e.prev=17,Z.current=!1,y.current=!1,e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[13,,17,21]])})));return function(t){return e.apply(this,arguments)}}(),[t,c,R,p,u,te,oe]),se=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,tT.Gk)(j,Y,t.id,n);case 4:if(r=e.sent){e.next=7;break}return e.abrupt("return");case 7:A((function(e){return e.versions?{versions:e.versions.map((function(e){return e.id===r.id?(0,a.Z)((0,a.Z)({},e),{},{label:r.label}):e})),nextPageUri:e.nextPageUri}:e}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[j,Y]);return{checkedOutVersionStatus:R,openVersionHistoryPanel:ie,renderVersionHistoryPanel:function(){return(0,d.jsxs)(vm.ZP,{open:N,PaperProps:{style:F_.drawerContent,className:"safe-area-aware-left-container"},ModalProps:{keepMounted:!0},onClose:function(){return U(!1)},children:[(0,d.jsx)(v_,{title:(0,d.jsx)(b.Trans,{id:"File history"}),onClose:function(){return U(!1)},id:"version-history-drawer"}),Y?z?!M.versions&&x?(0,d.jsx)(L.x1,{expand:!0,children:(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(fr.Z,{onRetry:re,children:x})})}):M.versions?(0,d.jsx)(M_,{authenticatedUserId:j.profile?j.profile.id:"",isVisible:N,projectId:t?t.fileIdentifier:"",canLoadMore:!!M.nextPageUri,onCheckoutVersion:ae,onLoadMore:re,onRenameVersion:se,openedVersionStatus:R,versions:M.versions}):(0,d.jsx)(Xe.Z,{}):(0,d.jsx)(L.x1,{expand:!0,children:(0,d.jsxs)(C.ak,{children:[(0,d.jsx)(De.Z,{kind:"info",children:(0,d.jsx)(b.Trans,{id:"Access project history, name saves, restore older versions.<0/>Upgrade to a Pro plan to get started!",components:[(0,d.jsx)("br",{})]})}),(0,d.jsx)(T.Z,{primary:!0,label:(0,d.jsx)(b.Trans,{id:"Upgrade my subscription"}),onClick:function(){return f({analyticsMetadata:{reason:"Version history"},filter:"team"})}})]})}):(0,d.jsx)(L.x1,{expand:!0,children:(0,d.jsx)(L.sg,{expand:!0,children:(0,d.jsx)(De.Z,{kind:"info",children:(0,d.jsx)(b.Trans,{id:"The version history is available for cloud projects only."})})})})]})},onQuitVersionHistory:oe}},__={width:320,overflowX:"hidden",display:"flex",flexDirection:"column"},B_=function(e){var t=e.title,n=e.children,r=e.projectManagerOpen,i=e.toggleProjectManager,o=(0,bm.T)();return(0,d.jsxs)(vm.ZP,(0,a.Z)((0,a.Z)({open:r,PaperProps:{style:(0,a.Z)((0,a.Z)({},__),(0,bm.E)(o)),className:"safe-area-aware-left-container"},ModalProps:{keepMounted:!0},onClose:i},(0,Fs.Y)({open:r?"true":void 0})),{},{children:[(0,d.jsx)(v_,{title:t,onClose:i,id:"project-manager-drawer"}),n,!n&&(0,d.jsx)(qe.Z,{children:(0,d.jsx)(b.Trans,{id:"To begin, open or create a new project."})})]}))},N_=n.g.GD_STARTUP_TIMES||[],U_=n.g.gd,H_={debugger:function(e){return(0,d.jsx)(ub,(0,a.Z)({},e))},"layout events":function(e){return(0,d.jsx)(xv,(0,a.Z)({},e))},"external events":function(e){return(0,d.jsx)(Gw,(0,a.Z)({},e))},layout:function(e){return(0,d.jsx)(NI,(0,a.Z)({},e))},"external layout":function(e){return(0,d.jsx)(uI,(0,a.Z)({},e))},"events functions extension":function(e){return(0,d.jsx)(Uw,(0,a.Z)({},e))},"start page":function(e){return(0,d.jsx)(PO,{ref:e.ref,project:e.project,fileMetadata:e.fileMetadata,isActive:e.isActive,projectItemName:e.projectItemName,setToolbar:e.setToolbar,canOpen:e.canOpen,onChooseProject:e.onChooseProject,onOpenRecentFile:e.onOpenRecentFile,onOpenExampleStore:e.onOpenExampleStore,onSelectExampleShortHeader:e.onSelectExampleShortHeader,onPreviewPrivateGameTemplateListingData:e.onPreviewPrivateGameTemplateListingData,onOpenPrivateGameTemplateListingData:e.onOpenPrivateGameTemplateListingData,onOpenNewProjectSetupDialog:e.onOpenNewProjectSetupDialog,onOpenProjectManager:e.onOpenProjectManager,onOpenLanguageDialog:e.onOpenLanguageDialog,onOpenProfile:e.onOpenProfile,selectInAppTutorial:e.selectInAppTutorial,onOpenPreferences:e.onOpenPreferences,onOpenAbout:e.onOpenAbout,storageProviders:e.extraEditorProps&&e.extraEditorProps.storageProviders||[],onSave:e.onSave,canSave:e.canSave,resourceManagementProps:e.resourceManagementProps,canInstallPrivateAsset:e.canInstallPrivateAsset})},resources:function(e){return(0,d.jsx)(BI,(0,a.Z)({},e))}},V_=3e3,z_=function(e,t,n){var r=n.storageProviderName,i=t.filter((function(e){return e.internalName===r}))[0];if(i)return i;(0,Ur.gR)({message:e._({id:"Unable to open the project because this provider is unknown: {storageProviderName}. Try to open the project again from another location.",values:{storageProviderName:r}}),rawError:new Error("Can't find storage provider called \"".concat(r,'"')),errorId:"unknown-storage-provider"})},W_=function(e,t){return e.current&&t.ptr===e.current.ptr},G_={previewLayoutName:null,previewExternalLayoutName:null,isPreviewOverriden:!1,overridenPreviewLayoutName:null,overridenPreviewExternalLayoutName:null},Y_=function(e){var t=function(e){var t=l.useState(e),n=(0,s.Z)(t,2),r=n[0],i=n[1],o=l.useRef(null),a=l.useCallback((function(e){return new Promise((function(t){o.current=t,i(e)}))}),[i]);return l.useEffect((function(){null!==o.current&&(o.current(r),o.current=null)}),[r]),[r,a]}({currentProject:null,currentFileMetadata:null,editorTabs:{editors:[],currentTab:0},snackMessage:"",snackMessageOpen:!1,snackDuration:V_,updateStatus:{message:"",status:"unknown"},openFromStorageProviderDialogOpen:!1,saveToStorageProviderDialogOpen:!1,eventsFunctionsExtensionsError:null,gdjsDevelopmentWatcherEnabled:!1}),n=(0,s.Z)(t,2),u=n[0],f=n[1],h=l.useRef(null),g=l.useContext(tr.ZP),x=l.useState(null),m=(0,s.Z)(x,2),b=m[0],C=m[1],j=l.useState(null),y=(0,s.Z)(j,2),Z=y[0],k=y[1],w=l.useState(!1),T=(0,s.Z)(w,2),S=T[0],P=T[1],E=l.useState(null),I=(0,s.Z)(E,2),M=I[0],L=I[1],A=l.useState(null),F=(0,s.Z)(A,2),O=F[0],R=F[1],D=l.useRef(null),_=(0,Pt.Z)(),B=l.useState(!1),N=(0,s.Z)(B,2),U=N[0],H=N[1],V=l.useState(!1),z=(0,s.Z)(V,2),W=z[0],K=z[1],J=l.useState(!1),Q=(0,s.Z)(J,2),$=Q[0],ee=Q[1],te=l.useState(!1),ne=(0,s.Z)(te,2),re=ne[0],ie=ne[1],oe=l.useState(!1),ae=(0,s.Z)(oe,2),le=ae[0],ce=ae[1],de=l.useState(!1),pe=(0,s.Z)(de,2),fe=pe[0],he=pe[1],ge=l.useState(!1),xe=(0,s.Z)(ge,2),me=xe[0],ve=xe[1],be=l.useState(!1),Ce=(0,s.Z)(be,2),je=Ce[0],ye=Ce[1],Ze=l.useState(!1),ke=(0,s.Z)(Ze,2),we=ke[0],Te=ke[1],Se=l.useState(!1),Pe=(0,s.Z)(Se,2),Ee=Pe[0],Ie=Pe[1],Me=l.useState(!1),Le=(0,s.Z)(Me,2),Ae=Le[0],Fe=Le[1],Oe=l.useState(!1),Re=(0,s.Z)(Oe,2),De=Re[0],Be=Re[1],Ne=l.useState(null),He=(0,s.Z)(Ne,2),Ve=He[0],ze=He[1],We=(0,lt.Z)(),Ge=We.showConfirmation,Ye=We.showAlert,qe=l.useContext(se.ZP),Xe=qe.setHasProjectOpened,Ke=l.useState(!1),Je=(0,s.Z)(Ke,2),Qe=Je[0],$e=Je[1],et=l.useState(G_),tt=(0,s.Z)(et,2),nt=tt[0],rt=tt[1],ot=l.useRef(null),at=l.useRef(null),st=l.useState(null),ct=(0,s.Z)(st,2),ut=ct[0],dt=ct[1],pt=l.useContext(Nr.Z),ft=D.current&&D.current.getPreviewDebuggerServer(),ht=function(e){var t=l.useState([]),n=(0,s.Z)(t,2),r=n[0],i=n[1],o=l.useState([]),a=(0,s.Z)(o,2),c=a[0],u=a[1];return l.useEffect((function(){if(e){var t=e.registerCallbacks({onErrorReceived:function(e){},onConnectionClosed:function(e){e.id;var t=e.debuggerIds;i((0,v.Z)(t))},onConnectionOpened:function(e){e.id;var t=e.debuggerIds;i((0,v.Z)(t))},onConnectionErrored:function(e){e.id},onServerStateChanged:function(){},onHandleParsedMessage:function(e){e.id;var t=e.parsedMessage;"hotReloader.logs"===t.command&&u(t.payload)}});return function(){t()}}i([])}),[e]),{previewDebuggerIds:r,hotReloadLogs:c,clearHotReloadLogs:l.useCallback((function(){return u([])}),[u])}}(ft),gt=ht.previewDebuggerIds,xt=ht.hotReloadLogs,mt=ht.clearHotReloadLogs,vt=!!gt.length,bt=function(){var e=l.useRef(!1),t=l.useRef(null),n=l.useState(!1),r=(0,s.Z)(n,2),i=r[0],o=r[1];return{ensureInteractionHappened:function(n){return new Promise((function(r){!e.current&&n.doesInitialOpenRequireUserInteraction?(console.info("Displaying confirmation dialog to ensure an interaction is made before continuing."),t.current=r,o(!0)):r(!0)}))},renderOpenConfirmDialog:function(){if(!i)return null;var n=function(n){e.current=!0,o(!1);var r=t.current;r&&(r(n),t.current=null)};return(0,d.jsx)(UO,{onClose:function(){return n(!1)},onConfirm:function(){return n(!0)}})}}}(),Ct=bt.ensureInteractionHappened,jt=bt.renderOpenConfirmDialog,yt=function(){var e=l.useState(null),t=(0,s.Z)(e,2),n=t[0],r=t[1],a=l.useState(null),c=(0,s.Z)(a,2),u=c[0],p=c[1],f=l.useState(!1),h=(0,s.Z)(f,2),g=h[0],x=h[1],m=l.useState(null),v=(0,s.Z)(m,2),b=v[0],C=v[1],j=l.useContext(tr.ZP),y=l.useState([]),Z=(0,s.Z)(y,2),k=Z[0],w=Z[1],T=l.useState(0),S=(0,s.Z)(T,2),P=S[0],E=S[1],I=l.useState(null),M=(0,s.Z)(I,2),L=M[0],A=M[1],F=l.useState(null),O=(0,s.Z)(F,2),R=O[0],D=O[1],_=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var t,r,a,s,l,c,d,p,f,h;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=j.getAuthorizationHeader,r=j.profile,b&&n&&u){e.next=3;break}throw new Error("No leaderboards found in events sheet.");case 3:if(r){e.next=5;break}throw new Error("User is not connected.");case 5:return a=b.length+2,s=1/a*100,l={},E(0),A(null),D(null),w([]),e.prev=12,e.next=15,(0,Ii.r$)(t,r.id,{gameId:n.getProjectUuid(),authorName:n.getAuthor()||"Unspecified publisher",gameName:n.getName()||"Untitled game",templateSlug:n.getTemplateSlug()});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(12),console.error("Could not register game: ",e.t0);case 20:return E(s),c=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,no.vW)(t,n.getProjectUuid(),{sourceGameId:u,sourceLeaderboardId:r.replace(/"/g,"")});case 3:return o=e.sent,l[r]='"'.concat(o.id,'"'),E((function(e){return e+s})),e.abrupt("return",null);case 9:return e.prev=9,e.t0=e.catch(0),console.error("Could not duplicate leaderboard ".concat(r),e.t0),E((function(e){return e+s})),e.abrupt("return",{leaderboardId:r,error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),e.next=24,Promise.all(Array.from(b).map(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c(j,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 24:if(d=e.sent,p=d.filter(Boolean),w(p),Object.keys(l).length&&(f=(0,FR.R)(l),h=new OR.EventsLeaderboardsRenamer(n,f),f.delete(),OR.ProjectBrowserHelper.exposeProjectEvents(n,h),h.delete()),E(100),0!==p.length){e.next=33;break}return x(!1),C(null),e.abrupt("return",{someLeaderboardsWereDuplicated:!0});case 33:return e.abrupt("return",new Promise((function(e){A((function(){return function(){C(b.filter((function(e){return p.some((function(t){return t.leaderboardId===e}))}))),e(_())}})),D((function(){return function(){w([]),x(!1),C(null),e({someLeaderboardsWereDuplicated:!0})}}))})));case 34:case"end":return e.stop()}}),e,null,[[12,17]])}))),[j,u,b,n]),B=l.useCallback((function(e,t){r(e),p(t);var n=new OR.EventsLeaderboardsLister(e);OR.ProjectBrowserHelper.exposeProjectEvents(e,n);var i=n.getLeaderboardIds();C(i.toNewVectorString().toJSArray()),n.delete()}),[]);return{findLeaderboardsToReplace:B,renderLeaderboardReplacerDialog:function(){return b&&b.length?u&&n&&g&&j.authenticated?(0,d.jsx)(DR,{erroredLeaderboards:k,onRetry:L,onAbandon:R,progress:P}):(0,d.jsx)(RR,{leaderboardsToReplace:b,onClose:function(){return C(null)},onTriggerReplace:function(){x(!0),_()}}):null}}}(),Zt=yt.findLeaderboardsToReplace,kt=yt.renderLeaderboardReplacerDialog,wt=l.useContext(Nr.Z),Tt=l.useContext(q.Z),St=l.useContext(Yr.Z),Et=St.currentlyRunningInAppTutorial,Mt=St.getInAppTutorialShortHeader,Lt=St.endTutorial,At=St.startTutorial,Ft=St.startStepIndex,Ot=St.startProjectData,Rt=l.useState(null),Dt=(0,s.Z)(Rt,2),_t=Dt[0],Bt=Dt[1],Nt=t_({editorTabs:u.editorTabs}),Ut=Nt.InAppTutorialOrchestrator,Ht=Nt.orchestratorProps,Vt=l.useState(!1),zt=(0,s.Z)(Vt,2),Wt=zt[0],Gt=zt[1],Yt=l.useState(null),qt=(0,s.Z)(Yt,2),Xt=qt[0],Kt=qt[1],Jt=l.useState(null),Qt=(0,s.Z)(Jt,2),$t=Qt[0],en=Qt[1],tn=u.currentProject,nn=u.currentFileMetadata,rn=u.updateStatus,on=u.eventsFunctionsExtensionsError,an=e.renderShareDialog,sn=e.resourceSources,ln=e.renderPreviewLauncher,cn=e.resourceExternalEditors,un=e.resourceMover,dn=e.resourceFetcher,pn=e.getStorageProviderOperations,fn=e.getStorageProviderResourceOperations,hn=e.getStorageProvider,gn=e.initialFileMetadataToOpen,xn=e.i18n,mn=e.renderGDJSDevelopmentWatcher,vn=e.renderMainMenu,bn=function(e){var t=e.resourceMover,n=(0,eT.s)({onDoProcess:l.useCallback((function(e,n){return t.moveAllProjectResources((0,a.Z)((0,a.Z)({},e),{},{onProgress:n}))}),[t])}),r=n.ensureProcessIsDone,i=n.renderProcessDialog;return l.useMemo((function(){return{ensureResourcesAreMoved:r,renderResourceMoverDialog:i}}),[r,i])}({resourceMover:un}),Cn=bn.ensureResourcesAreMoved,jn=bn.renderResourceMoverDialog,yn=function(e){var t=e.resourceFetcher,n=(0,eT.s)({onDoProcess:l.useCallback((function(e,n){var r=e(),i=r.project,o=r.fileMetadata,a=r.storageProvider,s=r.storageProviderOperations,l=r.authenticatedUser;return i&&o?t.fetchAllProjectResources({project:i,fileMetadata:o,storageProvider:a,storageProviderOperations:s,authenticatedUser:l,onProgress:n}):Promise.resolve({erroredResources:[]})}),[t])}),r=n.ensureProcessIsDone,i=n.renderProcessDialog;return l.useMemo((function(){return{ensureResourcesAreFetched:r,renderResourceFetcherDialog:i}}),[r,i])}({resourceFetcher:dn}),Zn=yn.ensureResourcesAreFetched,kn=yn.renderResourceFetcherDialog;lv({getStorageProvider:hn,fileMetadata:nn,isProjectSplitInMultipleFiles:!!tn&&tn.isFolderProject()});var wn=PR({isProjectOpening:Ee,onOpenNewProjectSetupDialog:function(){return Te(!0)}}),Tn=wn.selectedExampleShortHeader,Sn=wn.selectedPrivateGameTemplateListingData,Pn=wn.onSelectExampleShortHeader,En=wn.onSelectPrivateGameTemplate,In=wn.renderExampleOrGameTemplateDialogs,Mn=wn.closeExampleStoreDialog,Ln=wn.openExampleStoreDialog,An=(0,s_.i)(tn),Fn=(0,s_.i)(nn);l.useEffect((function(){Tr(),N_.push(["MainFrameComponentDidMount",performance.now()]),Xn().then((function(){return f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{gdjsDevelopmentWatcherEnabled:!0})}))})).then(function(){var t=(0,o.Z)((0,i.Z)().mark((function t(n){var r,o,a,s,l,c,u;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(N_.push(["MainFrameComponentDidMountFinished",performance.now()]),console.info("Startup times:",OO()),r=qe.getAutoOpenMostRecentProject,o=qe.getRecentProjectFiles,a=qe.hadProjectOpenedDuringLastSession,!gn){t.next=11;break}return s=pn(),t.next=7,Ct(s);case 7:t.sent&&Wn(),t.next=21;break;case 11:if(!(r()&&a()&&o()[0])){t.next=21;break}if(l=o()[0],c=z_(xn,e.storageProviders,l)){t.next=16;break}return t.abrupt("return");case 16:return u=pn(c),t.next=19,Ct(u);case 19:t.sent&&Hr(l);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){}))}),[]);var On=l.useCallback((function(t){var n=t.kind,r=t.name,i=t.dontFocusTab,o="resources"===n?xn._({id:"Resources"}):"start page"===n?xn._({id:"Home"}):"debugger"===n?xn._({id:"Debugger"}):"layout events"===n?r+" ".concat(xn._({id:"(Events)"})):"events functions extension"===n?r+" ".concat(xn._({id:"(Extension)"})):r,a="layout"===n?{data:{scene:r,type:"layout"}}:"layout events"===n?{data:{scene:r,type:"layout-events"}}:void 0,s=["layout","layout events","external events","external layout","events functions extension"].includes(n)?"".concat(n," ").concat(r):n,l="start page"===n?(0,d.jsx)(p,{titleAccess:"Home"}):void 0,c="start page"!==n,u="start page"===n?{storageProviders:e.storageProviders}:void 0;return{icon:l,closable:c,label:o,projectItemName:r,tabOptions:a,renderEditorContainer:H_[n],extraEditorProps:u,key:s,dontFocusTab:i}}),[xn,e.storageProviders]),Rn=l.useCallback((function(e){f((function(t){return(0,a.Z)((0,a.Z)({},t),{},{editorTabs:e})}))}),[f]),Dn=h_({currentProjectId:u.currentProject?u.currentProject.getProjectUuid():null,editorTabs:u.editorTabs,setEditorTabs:Rn,getEditorOpeningOptions:On}),_n=Dn.hasAPreviousSaveForEditorTabsState,Bn=Dn.openEditorTabsFromPersistedState;vD({openInAppTutorialDialog:function(e){WM.W3.includes(e)&&oi(e)},openProfileDialog:ve});var Nn=l.useCallback((function(){f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{snackMessageOpen:!1,snackDuration:V_})}))}),[f]),Un=l.useCallback((function(e,t){f((function(n){return(0,a.Z)((0,a.Z)({},n),{},{snackMessage:e,snackMessageOpen:!0,snackDuration:void 0!==t?t:V_})}))}),[f]),Hn=l.useCallback((function(e,t){Nn(),setTimeout((function(){return Un(e,t)}),200)}),[Nn,Un]),Vn=l.useCallback((function(e){$I(u.editorTabs),ze(e||null),Be(!0)}),[u.editorTabs]),zn=l.useCallback((function(){Be(!1),ze(null)}),[Be,ze]),Wn=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(gn){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,er(gn);case 4:(t=e.sent)&&Rr({currentProject:t.currentProject,editorTabs:t.editorTabs});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Yn=l.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.editorTabs,t=KI(e);t&&t.editorRef?t.editorRef.updateToolbar():dr(null)}),[u.editorTabs]);l.useEffect((function(){Yn()}),[Yn]);var qn=function(){U_.MeasurementUnit.applyTranslation(),U_.JsPlatform.get().reloadBuiltinExtensions(),Xn().catch((function(){}))},Xn=function(){var t=e.extensionsLoader,n=e.i18n;return t?t.loadAllExtensions((0,LO.L)(n)).then((function(e){var t=e.filter((function(e){return!e.result.error})),n=e.filter((function(e){return e.result.error&&!e.result.dangerous})),r=e.filter((function(e){return e.result.error&&e.result.dangerous}));console.info("Loaded ".concat(t.length," JS extensions.")),n.length&&console.error("\u26a0\ufe0f Unable to load ".concat(n.length," JS extensions. Please check these errors:"),n),r.length&&console.error("\ud83d\udca3 Dangerous exceptions while loading ".concat(r.length," JS extensions. \ud83d\udd25 Please check these errors as they will CRASH GDevelop:"),r)})):(console.info("No extensions loader specified, skipping extensions loading."),Promise.reject(new Error("No extension loader specified.")))};iR(tn);var Kn=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Xe(!1),rt(G_),console.info("Closing project..."),Fe(!0),t=An.current){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{currentProject:null,currentFileMetadata:null,editorTabs:JI(e.editorTabs,t)})}));case 9:return console.info("Deleting project from memory..."),wt.unloadProjectEventsFunctionsExtensions(t),e.next=13,wt.ensureLoadFinished();case 13:t.delete(),Tt.hasUnsavedChanges&&Tt.sealUnsavedChanges(),console.info("Project closed.");case 16:case"end":return e.stop()}}),e)}))),[An,wt,Xe,f,Tt]),Jn=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o,s,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&(r=hn(),o=pn(r),o.onSaveProject&&qe.insertRecentProjectFile({fileMetadata:(0,a.Z)((0,a.Z)({},n),{},{name:t.getName(),gameId:t.getProjectUuid()}),storageProviderName:r.internalName})),e.next=3,Kn();case 3:return Dl.Z.burstAllUrlsCache(),PT.Z.burstCache(),e.next=7,f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{currentProject:t,currentFileMetadata:n})}));case 7:if(s=e.sent,Mn({deselectExampleAndGameTemplate:!1}),wt.loadProjectEventsFunctionsExtensions(t),!n){e.next=17;break}return t.setProjectFile(n.fileIdentifier),l=hn(),c=pn(l),e.next=16,Zn((function(){return{project:t,fileMetadata:n,storageProvider:l,storageProviderOperations:c,authenticatedUser:g}}));case 16:Fe(!1);case 17:return e.abrupt("return",s);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[f,Kn,qe,Mn,wt,hn,pn,Zn,g]),Qn=l.useCallback((function(e,t){var n=Date.now(),r=U_.ProjectHelper.createNewGDJSProject();r.unserializeFrom(e);var i=Date.now()-n;return console.info("Unserialization took ".concat(i.toFixed(2)," ms")),Jn(r,t)}),[Jn]),$n=function(e,t){Kt(e),en(t)},er=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,a,s,l,c,u,d,p,f,h,g,x,m,v,b,j;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=pn(),a=r.getAutoSaveCreationDate,s=r.onGetAutoSave,l=r.onOpen,c=r.getOpenErrorMessage,l){e.next=5;break}return console.error("Tried to open a file for a storage without onOpen support:",t,r),e.abrupt("return");case 5:return u=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&s){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,a(t,!0);case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",t);case 7:return e.next=9,Ge({title:{id:"This project has an auto-saved version"},message:{id:"GDevelop automatically saved a newer version of this project on {0}. This new version might differ from the one that you manually saved. Which version would you like to open?",values:{0:new Date(n).toLocaleString()}},dismissButtonLabel:{id:"My manual save"},confirmButtonLabel:{id:"GDevelop auto-save"}});case 9:if(e.sent){e.next=12;break}return e.abrupt("return",t);case 12:return e.abrupt("return",s(t));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&s){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,a(t,!1);case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,Ge({title:{id:"This project cannot be opened"},message:{id:"The project file appears to be corrupted, but an autosave file exists (backup made automatically by GDevelop on {0}). Would you like to try to load it instead?",values:{0:new Date(n).toLocaleString()}},confirmButtonLabel:{id:"Load autosave"}});case 9:if(e.sent){e.next=12;break}return e.abrupt("return",null);case 12:return e.abrupt("return",s(t));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n&&n.openingMessage&&dt(n.openingMessage),H(!0),e.prev=9,e.next=12,(0,mA.g)(150);case 12:return f=null,e.prev=13,e.next=16,u();case 16:return h=e.sent,e.next=19,l(h,$n);case 19:g=e.sent,p=g.content,e.next=34;break;case 23:return e.prev=23,e.t0=e.catch(13),f=e.t0,e.next=28,d();case 28:if(!(x=e.sent)){e.next=34;break}return e.next=32,l(x);case 32:m=e.sent,p=m.content;case 34:return e.prev=34,H(!1),dt(null),$n(null,null),e.finish(34);case 39:if(p){e.next=41;break}throw f||new Error("The project file content could not be read. It might be corrupted/malformed.");case 41:if(HO(xn,p)){e.next=43;break}return e.abrupt("return");case 43:return v=U_.Serializer.fromJSObject(p),e.prev=44,b=Qn(v,t),e.abrupt("return",b);case 47:return e.prev=47,v.delete(),e.finish(47);case 50:e.next=62;break;case 52:if(e.prev=52,e.t1=e.catch(9),"CloudProjectReadingError"!==e.t1.name){e.next=58;break}C(t),e.next=62;break;case 58:return j=c?c(e.t1):{id:"Ensure that you are connected to internet and that the URL used is correct, then try again."},e.next=61,Ye({title:{id:"Unable to open the project"},message:j});case 61:throw e.t1;case 62:case"end":return e.stop()}}),e,null,[[9,52],[13,23,34,39],[44,,47,50]])})));return function(t,n){return e.apply(this,arguments)}}(),[xn,pn,Qn,Ge,Ye]),nr=f_({beforeCreatingProject:function(){Ie(!0)},getStorageProviderOperations:pn,afterCreatingProject:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.project,r=t.editorTabs,o=t.oldProjectId,Te(!1),Mn({deselectExampleAndGameTemplate:!0}),Zt(n,o),Rr({currentProject:n,editorTabs:r}),Fe(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(){Fe(!0)},onSuccessOrError:function(){Ie(!1),H(!1),$n(null,null)},loadFromProject:Jn,openFromFileMetadata:er,onProjectSaved:function(e){f((function(t){return(0,a.Z)((0,a.Z)({},t),{},{currentFileMetadata:e})}))},ensureResourcesAreMoved:Cn}),rr=nr.createEmptyProject,ir=nr.createProjectFromExample,or=nr.createProjectFromPrivateGameTemplate,ar=nr.createProjectFromInAppTutorial,sr=nr.createProjectWithLogin,lr=nr.createProjectFromAIGeneration,cr=l.useCallback((function(){return Y.ZP.quit()}),[]),ur=l.useCallback((function(){h.current&&ee((function(e){return!e}))}),[ee]),dr=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];h.current&&t&&h.current.setEditorToolbar(e)},pr=function(e,t){rt((function(n){return(0,a.Z)((0,a.Z)({},n),{},{previewLayoutName:e,previewExternalLayoutName:t})}))},fr=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tn){e.next=2;break}return e.abrupt("return");case 2:if(t=pn(),!(Tt.hasUnsavedChanges&&qe.values.autosaveOnPreview&&t.onAutoSaveProject&&nn)){e.next=14;break}return e.prev=5,e.next=8,t.onAutoSaveProject(tn,nn);case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(5),console.error("Error while auto-saving the project: ",e.t0),Un(xn._({id:"There was an error while making an auto-save of the project. Verify that you have permissions to write in the project folder."}));case 14:case"end":return e.stop()}}),e,null,[[5,10]])}))),[xn,Un,tn,nn,pn,qe.values.autosaveOnPreview,Tt.hasUnsavedChanges]),hr=l.useCallback((function(e){var t=e.networkPreview,n=e.hotReload,r=e.projectDataOnlyExport,i=e.fullLoadingScreen;if(tn&&0!==tn.getLayoutsCount()){var o=D.current;if(o){$e(!0),$I(u.editorTabs);var a=nt.isPreviewOverriden?nt.overridenPreviewLayoutName:nt.previewLayoutName,s=nt.isPreviewOverriden?nt.overridenPreviewExternalLayoutName:nt.previewExternalLayoutName,l=a&&tn.hasLayoutNamed(a)?tn.getLayout(a):tn.getLayoutAt(0),c=s&&tn.hasExternalLayoutNamed(s)?tn.getExternalLayout(s):null;fr(),(0,Gn.IE)(tn);var d=g.profile?{username:g.profile.username||"",id:g.profile.id}:null;wt.ensureLoadFinished().then((function(){return o.launchPreview({project:tn,layout:l,externalLayout:c,networkPreview:!!t,hotReload:!!n,projectDataOnlyExport:!!r,fullLoadingScreen:!!i,fallbackAuthor:d,getIsMenuBarHiddenInPreview:qe.getIsMenuBarHiddenInPreview,getIsAlwaysOnTopInPreview:qe.getIsAlwaysOnTopInPreview})})).catch((function(e){console.error("Error caught while launching preview, this should never happen.",e)})).then((function(){$e(!1),at.current&&at.current.onPreviewLaunch()}))}}}),[fr,tn,wt,nt,u.editorTabs,qe.getIsMenuBarHiddenInPreview,qe.getIsAlwaysOnTopInPreview,g.profile]),gr=(0,Xr.zi)(g,Xr.SH,hr),xr=l.useCallback((function(){return gr({networkPreview:!1})}),[gr]),mr=l.useCallback((function(){return gr({networkPreview:!1,hotReload:!0})}),[gr]),vr=l.useCallback((function(){return gr({networkPreview:!0,hotReload:!1})}),[gr]),br=l.useMemo((function(){return{hasPreviewsRunning:vt,launchProjectWithLoadingScreenPreview:function(){return gr({fullLoadingScreen:!0})},launchProjectDataOnlyPreview:function(){return gr({hotReload:!0,projectDataOnlyExport:!0})}}}),[vt,gr]),Cr=l.useCallback((function(e,t,n){var r=n.openEventsEditor,i=n.openSceneEditor,o=On({kind:"layout",name:t}),a=On({kind:"layout events",name:t,dontFocusTab:i}),s=i?HI(e,o):e;return r?HI(s,a):s}),[On]),jr=l.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.openEventsEditor,r=void 0===n||n,i=t.openSceneEditor,o=void 0===i||i,s=arguments.length>2?arguments[2]:void 0;f((function(t){return(0,a.Z)((0,a.Z)({},t),{},{editorTabs:Cr(s||t.editorTabs,e,{openEventsEditor:r,openSceneEditor:o})})}))}),[f,Cr]),yr=l.useCallback((function(e){f((function(t){return(0,a.Z)((0,a.Z)({},t),{},{editorTabs:HI(t.editorTabs,On({kind:"external events",name:e}))})}))}),[f,On]),Zr=l.useCallback((function(e){f((function(t){return(0,a.Z)((0,a.Z)({},t),{},{editorTabs:HI(t.editorTabs,On({kind:"external layout",name:e}))})}))}),[f,On]),kr=l.useCallback((function(e,t,n){f((function(r){return(0,a.Z)((0,a.Z)({},r),{},{editorTabs:HI(r.editorTabs,(0,a.Z)((0,a.Z)({},On({kind:"events functions extension",name:e})),{},{extraEditorProps:{initiallyFocusedFunctionName:t,initiallyFocusedBehaviorName:n}}))})}))}),[f,On]),wr=l.useCallback((function(){f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{editorTabs:HI(e.editorTabs,On({kind:"resources",name:""}))})}))}),[On,f]),Tr=l.useCallback((function(){f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{editorTabs:HI(e.editorTabs,On({kind:"start page",name:""}))})}))}),[f,On]),Sr=l.useCallback((function(){f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{editorTabs:HI(e.editorTabs,On({kind:"debugger",name:""}))})}))}),[On,f]),Pr=(0,Xr.zi)(g,Xr.x9,Sr),Er=l.useCallback((function(){Pr(),mr()}),[Pr,mr]),Ir=function(e,t){var n=u.currentProject,r=u.editorTabs;if(n){var i=e.getName();if(n.hasEventsFunctionsExtensionNamed(i)){var o=n.getEventsFunctionsExtension(i),s=(0,bh._u)(t),l=iM(r,o);l?(l.editor.selectEventsFunctionByName(s.name,s.behaviorName),f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{editorTabs:VI(r,l.tabIndex)})}))):kr(i,s.name,s.behaviorName)}else console.warn("Extension with name=".concat(i," can not be opened (no editor for this)"))}},Mr=function(e,t){var n=u.currentProject,r=u.editorTabs;if(n)if(n.hasEventsFunctionsExtensionNamed(e)){var i=n.getEventsFunctionsExtension(e),o=iM(r,i);o?(o.editor.selectEventsBasedBehaviorByName(t),f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{editorTabs:VI(r,o.tabIndex)})}))):kr(e,null,t)}else console.warn("Extension with name=".concat(e," can not be opened (no editor for this)"))},Lr=function(){Tt&&Tt.triggerUnsavedChanges(),_()},Fr=function(e,t,n){var r=u.currentProject;if(r){(0,Ar.cc)({step:"end",parentEditor:n});var i=!r.hasEventsFunctionsExtensionNamed(e),o=i?r.insertNewEventsFunctionsExtension(e,0):r.getEventsFunctionsExtension(e);i&&(o.setFullName(e),o.setDescription("Originally automatically extracted from events of the project")),o.insertEventsFunction(t,0),wt.loadProjectEventsFunctionsExtensions(r)}},Or=l.useCallback((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];f((function(t){return(0,a.Z)((0,a.Z)({},t),{},{openFromStorageProviderDialogOpen:e})}))}),[f]),Rr=l.useCallback((function(e){var t=e.currentProject,n=e.editorTabs;if(t){if(0===t.getLayoutsCount()){var r=xn._({id:"Untitled scene"});t.insertNewLayout(r,0);var i=t.getLayout(r);ki(i)}jr(t.getLayoutAt(0).getName(),{openSceneEditor:!0,openEventsEditor:!0},n),H(!1),$n(null,null),t.getLayoutsCount()>1?ee(!0):ee(!1)}}),[jr,xn]),Dr=l.useCallback((function(e){var t=e.currentProject,n=e.editorTabs;if(!t)return n;var r=t.getLayoutsCount();if(0===r)return n;for(var i=n,o=0;o<r;o++)i=Cr(i,t.getLayoutAt(o).getName(),{openSceneEditor:!0,openEventsEditor:!0});return i}),[Cr]),_r=l.useCallback((function(e){var t=e.currentProject;t&&(0!==t.getLayoutsCount()&&(f((function(t){return(0,a.Z)((0,a.Z)({},t),{},{editorTabs:Dr(e)})})),H(!1),$n(null,null),ee(!1)))}),[Dr,f]),Br=l.useCallback((function(){var e=pn();if(e.onOpenWithPicker)return e.onOpenWithPicker().then((function(e){if(e)return er(e).then((function(e){if(e){var t=e.currentProject;if(t&&_n(t))0===Bn(t)?Rr({currentProject:t,editorTabs:e.editorTabs}):(H(!1),$n(null,null),ee(!1));else Rr({currentProject:t,editorTabs:e.editorTabs});"LocalFile"===hn().internalName&&Xe(!0)}}))})).catch((function(t){var n=e.getOpenErrorMessage?e.getOpenErrorMessage(t):{id:"Verify that you have the authorization for reading the file you're trying to access."};(0,Ur.gR)({message:[xn._({id:"Unable to open the project."}),xn._(n)].join("\n"),errorId:"project-open-with-picker-error",rawError:t})}))}),[xn,_n,Bn,pn,er,Rr,hn,Xe]),Hr=l.useCallback(function(){var t=(0,o.Z)((0,i.Z)().mark((function t(n,r){var o,a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Tt.hasUnsavedChanges||r&&r.ignoreUnsavedChanges){t.next=5;break}if(Y.ZP.showConfirmDialog(xn._({id:"Open a new project? Any changes that have not been saved will be lost."}))){t.next=4;break}return t.abrupt("return");case 4:Tt.sealUnsavedChanges();case 5:if(o=n.fileMetadata,a=z_(xn,e.storageProviders,n)){t.next=9;break}return t.abrupt("return");case 9:return pn(a),t.next=12,er(o,{openingMessage:r&&r.openingMessage||null}).then((function(e){if(e){var t=e.currentProject;if(r&&r.openAllScenes)_r({currentProject:t,editorTabs:e.editorTabs});else if(t&&_n(t)){0===Bn(t)?Rr({currentProject:t,editorTabs:e.editorTabs}):(H(!1),$n(null,null),ee(!1))}else Rr({currentProject:t,editorTabs:e.editorTabs});"LocalFile"===hn().internalName&&Xe(!0)}})).catch((function(e){}));case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),[xn,er,Rr,e.storageProviders,pn,Tt,hn,Xe,_r,_n,Bn]),Vr=l.useCallback((function(e){var t=e.fileMetadata,n=e.versionId,r=e.ignoreUnsavedChanges,i=e.openingMessage;return Hr({storageProviderName:"Cloud",fileMetadata:(0,a.Z)((0,a.Z)({},t),{},{version:n})},{ignoreUnsavedChanges:r,openingMessage:i})}),[Hr]),zr=D_({getStorageProvider:hn,isSavingProject:W,fileMetadata:nn,onOpenCloudProjectOnSpecificVersion:Vr}),Wr=zr.renderVersionHistoryPanel,Gr=zr.openVersionHistoryPanel,qr=zr.checkedOutVersionStatus,Kr=zr.onQuitVersionHistory,Jr=l.useCallback((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&ee(!1),f((function(t){return(0,a.Z)((0,a.Z)({},t),{},{saveToStorageProviderDialogOpen:e})}))}),[f]),Qr=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,s,l,c,d,p,h,x,m,v,b,C,j,y,Z,w;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tn){e.next=2;break}return e.abrupt("return");case 2:if(QI(u.editorTabs),!W){e.next=6;break}return console.info("Project is already being saved, not triggering save."),e.abrupt("return");case 6:if(n=hn(),r=pn(),s=pn(t),l=hn(),c=s.onSaveProjectAs,d=s.onChooseSaveProjectAsLocation,p=s.getWriteErrorMessage,h=s.canFileMetadataBeSafelySavedAs,c){e.next=13;break}return e.abrupt("return");case 13:if(K(!0),x=l.internalName,e.prev=15,m=null,!d){e.next=31;break}return e.next=20,d({project:tn,fileMetadata:nn});case 20:if(v=e.sent,b=v.saveAsLocation){e.next=24;break}return e.abrupt("return");case 24:if(!h||!nn){e.next=30;break}return e.next=27,h(nn,{showAlert:Ye,showConfirmation:Ge});case 27:if(e.sent){e.next=30;break}return e.abrupt("return");case 30:m=b;case 31:return e.next=33,c(tn,m,{onStartSaving:function(){return Hn(xn._({id:"Saving..."}),null)},onMoveResources:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.newFileMetadata,!nn){e.next=4;break}return e.next=4,Cn({project:tn,newFileMetadata:o,newStorageProvider:l,newStorageProviderOperations:s,oldFileMetadata:nn,oldStorageProvider:n,oldStorageProviderOperations:r,authenticatedUser:g});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 33:if(C=e.sent,j=C.wasSaved,y=C.fileMetadata,j){e.next=38;break}return e.abrupt("return");case 38:if(Tt.sealUnsavedChanges(),Hn(xn._({id:"Project properly saved"})),P(!1),k(null),y){e.next=44;break}return e.abrupt("return");case 44:Z={fileMetadata:y,storageProviderName:x},qe.insertRecentProjectFile(Z),Et&&!(0,WM.d1)(Et.id)&&at.current&&qe.saveTutorialProgress((0,a.Z)((0,a.Z)({tutorialId:Et.id,userId:g.profile?g.profile.id:null},at.current.getProgress()),{},{fileMetadataAndStorageProviderName:Z})),g.onCloudProjectsChanged(),Dl.Z.burstAllUrlsCache(),W_(An,tn)&&f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{currentFileMetadata:y})})),e.next=57;break;case 52:e.prev=52,e.t0=e.catch(15),Nn(),w=p?p(e.t0):{id:"An error occurred when saving the project. Please try again later."},(0,Ur.gR)({message:xn._(w),rawError:e.t0,errorId:"project-save-as-error"});case 57:return e.prev=57,K(!1),e.finish(57);case 60:case"end":return e.stop()}}),e,null,[[15,52,57,60]])})));return function(t){return e.apply(this,arguments)}}(),[xn,W,tn,An,nn,pn,Tt,f,u.editorTabs,Hn,Nn,hn,qe,Cn,g,Et,Ye,Ge]),$r=!!tn&&!qr,ei=l.useCallback((function(){if($r)if(!Z||S){var t=pn();e.storageProviders.filter((function(e){return!e.hiddenInSaveDialog})).length>1||!t.onSaveProjectAs?Jr():Qr()}else P(!0)}),[pn,Jr,e.storageProviders,Qr,Z,S,$r]),ti=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var t,n,r,o,s,l,c,d,p,h,x,m;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tn){e.next=2;break}return e.abrupt("return");case 2:if(nn){e.next=4;break}return e.abrupt("return",ei());case 4:if(!!!nn.ownerId){e.next=7;break}return e.abrupt("return");case 7:if(!Z||S){e.next=10;break}return P(!0),e.abrupt("return");case 10:if(t=pn(),n=t.onSaveProject,r=t.canFileMetadataBeSafelySaved,n){e.next=14;break}return e.abrupt("return",ei());case 14:if(QI(u.editorTabs),!W){e.next=18;break}return console.info("Project is already being saved, not triggering save."),e.abrupt("return");case 18:if(!qr){e.next=26;break}return e.next=21,Ge({title:{id:"Restore this version"},message:{id:"You're trying to save changes made to a previous version of your project. If you continue, it will be used as the new latest version."}});case 21:if(e.sent){e.next=24;break}return e.abrupt("return");case 24:e.next=32;break;case 26:if(!r){e.next=32;break}return e.next=29,r(nn,{showAlert:Ye,showConfirmation:Ge});case 29:if(e.sent){e.next=32;break}return e.abrupt("return");case 32:return Un(xn._({id:"Saving..."}),null),K(!0),e.prev=34,o=performance.now(),s=hn().internalName,l={},Z&&(l.previousVersion=Z),qr&&(l.restoredFromVersionId=qr.version.id),e.next=42,n(tn,nn,l);case 42:c=e.sent,d=c.wasSaved,p=c.fileMetadata,d&&(console.info("Project saved in ".concat(performance.now()-o,"ms.")),P(!1),k(null),h={fileMetadata:p,storageProviderName:s},qe.insertRecentProjectFile(h),Et&&!(0,WM.d1)(Et.id)&&at.current&&qe.saveTutorialProgress((0,a.Z)((0,a.Z)({tutorialId:Et.id,userId:g.profile?g.profile.id:null},at.current.getProgress()),{},{fileMetadataAndStorageProviderName:h})),W_(An,tn)&&f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{currentFileMetadata:p})})),Tt.sealUnsavedChanges(),Hn(xn._({id:"Project properly saved"}))),e.next=54;break;case 48:e.prev=48,e.t0=e.catch(34),x=(0,_o.T)(e.t0),m=x&&403===x.status?{id:"You don't have permissions to save this project. Please choose another location."}:{id:"An error occurred when saving the project. Please try again later."},Ye({title:{id:"Unable to save the project"},message:m}),Nn();case 54:return e.prev=54,K(!1),e.finish(54);case 57:case"end":return e.stop()}}),e,null,[[34,48,54,57]])}))),[W,tn,An,nn,pn,Un,Nn,Hn,xn,Tt,ei,u.editorTabs,hn,qe,f,g,Et,Z,S,Ye,Ge,qr]),ni=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tn){e.next=2;break}return e.abrupt("return",!0);case 2:if(!Tt.hasUnsavedChanges){e.next=6;break}if(Y.ZP.showConfirmDialog(xn._({id:"Close the project? Any changes that have not been saved will be lost."}))){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,Kn();case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)}))),[tn,Tt,xn,Kn]),ri=function(e){Yn((arguments.length>1&&void 0!==arguments[1]?arguments[1]:u).editorTabs),e.editorRef&&e.editorRef.forceUpdateEditor()},ii=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,Kn();case 3:Lt(),e.next=7;break;case 6:Lt();case 7:Tr();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Lt,Kn,Tr]),oi=l.useCallback((function(e){var t=qe.getTutorialProgress({tutorialId:e,userId:g.profile?g.profile.id:void 0});Bt({tutorialId:e,userProgress:t})}),[qe,g.profile]),ai=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tn&&nn){e.next=2;break}return e.abrupt("return");case 2:if(n=pn(),r=(0,a.Z)((0,a.Z)({},nn),{},{name:t}),!n.onChangeProjectProperty){e.next=9;break}return e.next=7,n.onChangeProjectProperty(tn,nn,{name:t});case 7:(o=e.sent)&&(Tt.sealUnsavedChanges(),r=(0,a.Z)((0,a.Z)({},r),o));case 9:return e.next=11,f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{currentFileMetadata:r})}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),si=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Cloud"!==hn().internalName||!t.newName){e.next=3;break}return e.abrupt("return",Ge({title:{id:"Project name changed"},message:{id:"Your project name has changed, this will also save the whole project, continue?"},confirmButtonLabel:{id:"Save and continue"}}));case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),li=l.useCallback((function(e){b&&(Vr({fileMetadata:b,versionId:e,ignoreUnsavedChanges:!1,openingMessage:{id:"Recovering older version..."}}),C(null),k(e))}),[b,Vr]),ci=l.useCallback((function(){var e=hn();return"LocalFile"===e.internalName||"Cloud"===e.internalName}),[hn]),ui=l.useCallback((function(e){return new Promise((function(t){L(e);R((function(){return t}))}))}),[R,L]),di=l.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,o,a,s,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_t){e.next=2;break}return e.abrupt("return");case 2:if(n=_t.userProgress,r=_t.tutorialId,o=n?n.fileMetadataAndStorageProviderName:null,!n||"resume"!==t||!o){e.next=21;break}if(!tn){e.next=18;break}if(!nn||nn.fileIdentifier===o.fileMetadata.fileIdentifier){e.next=15;break}return e.next=9,ni();case 9:if(e.sent){e.next=12;break}return e.abrupt("return");case 12:Hr(o,{openAllScenes:!0}),e.next=16;break;case 15:_r({currentProject:tn,editorTabs:u.editorTabs});case 16:e.next=19;break;case 18:Hr(o,{openAllScenes:!0});case 19:e.next=26;break;case 21:return e.next=23,ni();case 23:if(e.sent){e.next=26;break}return e.abrupt("return");case 26:if(a=Mt(r)){e.next=29;break}return e.abrupt("return");case 29:if(!(s=a.initialTemplateUrl)){e.next=40;break}return e.prev=31,e.next=34,ar(a.id,{storageProvider:cw.H,saveAsLocation:null});case 34:e.next=40;break;case 36:return e.prev=36,e.t0=e.catch(31),(0,Ur.gR)({message:xn._({id:"Unable to create a new project for the tutorial. Try again later."}),rawError:new Error("Can't create project from template \"".concat(s,'"')),errorId:"cannot-create-project-from-template"}),e.abrupt("return");case 40:return l=n&&"resume"===t?n.step:0,c=n&&"resume"===t?n.projectData:a.initialProjectData||{},e.next=44,At({tutorialId:r,initialStepIndex:l,initialProjectData:c});case 44:(0,Ar.ei)({tutorialId:r,scenario:t}),Bt(null);case 46:case"end":return e.stop()}}),e,null,[[31,36]])})));return function(t){return e.apply(this,arguments)}}(),[xn,Mt,ar,ni,At,_t,Hr,u.editorTabs,tn,nn,_r]),pi=l.useCallback((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(An.current&&Fn.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Zn((function(){return{project:An.current,fileMetadata:Fn.current,storageProvider:hn(),storageProviderOperations:pn(),authenticatedUser:g}}));case 4:case"end":return e.stop()}}),e)}))),[An,Fn,Zn,hn,pn,g]),fi=(0,s_._)(pi);(0,ue.aL)(ot.current?ot.current.launchCommand:function(){});var hi=l.useCallback((function(){ot.current&&ot.current.open()}),[]);WO({i18n:xn,project:u.currentProject,previewEnabled:!!u.currentProject&&u.currentProject.getLayoutsCount()>0,onOpenProjectManager:ur,hasPreviewsRunning:vt,allowNetworkPreview:!!D.current&&D.current.canDoNetworkPreview(),onLaunchPreview:xr,onHotReloadPreview:mr,onLaunchDebugPreview:Er,onLaunchNetworkPreview:vr,onOpenHomePage:Tr,onCreateBlank:function(){return Te(!0)},onOpenProject:function(){return Or()},onSaveProject:ti,onSaveProjectAs:ei,onCloseApp:cr,onCloseProject:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ni();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onExportGame:function(){return Vn("publish")},onInviteCollaborators:function(){return Vn("invite")},onOpenLayout:function(e){jr(e)},onOpenExternalEvents:yr,onOpenExternalLayout:Zr,onOpenEventsFunctionsExtension:kr,onOpenCommandPalette:hi,onOpenProfile:function(){return ve(!0)}});var xi=l.useMemo((function(){return{resourceSources:sn,onChooseResource:ui,resourceExternalEditors:cn,getStorageProvider:hn,onFetchNewlyAddedResources:fi,getStorageProviderResourceOperations:fn}}),[sn,ui,cn,hn,fi,fn]),mi=U||Qe,vi=(0,ue.LB)(),bi={i18n:xn,project:u.currentProject,canSaveProjectAs:$r,recentProjectFiles:qe.getRecentProjectFiles(),shortcutMap:vi,isApplicationTopLevelMenu:!1},Ci={onChooseProject:function(){return Or()},onOpenRecentFile:Hr,onSaveProject:ti,onSaveProjectAs:ei,onShowVersionHistory:Gr,onCloseProject:ni,onCloseApp:cr,onExportProject:function(){return Vn("publish")},onInviteCollaborators:function(){return Vn("invite")},onCreateProject:Ln,onCreateBlank:function(){return Te(!0)},onOpenProjectManager:function(){return ee(!0)},onOpenHomePage:Tr,onOpenDebugger:Pr,onOpenAbout:function(){return he(!0)},onOpenPreferences:function(){return ye(!0)},onOpenLanguage:function(){return ie(!0)},onOpenProfile:function(){return ve(!0)},setElectronUpdateStatus:function(e){f((function(t){return(0,a.Z)((0,a.Z)({},t),{},{updateStatus:e})}));var t=function(e){return"update-available"===e.status?"A new update is available!":""}(e),n=function(e){return"update-available"===e.status?"It will be downloaded and installed automatically (unless you deactivated this in preferences)":""}(e);t&&(new window.Notification(t,{body:n}).onclick=function(){return he(!0)})}},ji=!!nn&&!!nn.ownerId,yi=!!u.currentProject&&!W&&(!nn||!ji);return(0,d.jsxs)("div",{className:"main-frame",children:[!!vn&&vn((0,a.Z)((0,a.Z)({},bi),{},{isApplicationTopLevelMenu:!0}),Ci,{onClosePreview:D.current&&D.current.closePreview?D.current.closePreview:null}),(0,d.jsx)(X,{projectName:tn?tn.getName():null,fileMetadata:nn,storageProvider:hn(),i18n:xn}),(0,d.jsx)(B_,{projectManagerOpen:$,toggleProjectManager:ur,title:u.currentProject?u.currentProject.getName():"No project",children:tn?(0,d.jsx)(Rl,{project:tn,onChangeProjectName:ai,onSaveProjectProperties:si,onOpenExternalEvents:yr,onOpenLayout:function(e){jr(e)},onOpenExternalLayout:Zr,onOpenEventsFunctionsExtension:kr,onInstallExtension:function(e){var t=u.currentProject;if(t){var n=e.name;t.hasEventsFunctionsExtensionNamed(n)&&f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{editorTabs:rM(e.editorTabs,n)})}))}},onDeleteLayout:function(t){var n=u.currentProject,r=e.i18n;n&&(Y.ZP.showConfirmDialog(r._({id:"Are you sure you want to remove this scene? This can't be undone."}))&&f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{editorTabs:eM(e.editorTabs,t)})})).then((function(e){n.getFirstLayout()===t.getName()&&n.setFirstLayout(""),n.removeLayout(t.getName()),Lr()})))},onDeleteExternalLayout:function(t){var n=u.currentProject,r=e.i18n;n&&(Y.ZP.showConfirmDialog(r._({id:"Are you sure you want to remove this external layout? This can't be undone."}))&&f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{editorTabs:tM(e.editorTabs,t)})})).then((function(e){e.currentProject&&e.currentProject.removeExternalLayout(t.getName()),Lr()})))},onDeleteEventsFunctionsExtension:function(t){var n=u.currentProject,r=e.i18n;if(n&&Y.ZP.showConfirmDialog(r._({id:"Are you sure you want to remove this extension? This can't be undone."}))){var i=t.getName();f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{editorTabs:rM(e.editorTabs,i)})})).then((function(e){wt.unloadProjectEventsFunctionsExtension(n,i),n.removeEventsFunctionsExtension(i),Lr(),wt.reloadProjectEventsFunctionsExtensions(n)}))}},onDeleteExternalEvents:function(t){var n=e.i18n;u.currentProject&&(Y.ZP.showConfirmDialog(n._({id:"Are you sure you want to remove these external events? This can't be undone."}))&&f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{editorTabs:nM(e.editorTabs,t)})})).then((function(e){e.currentProject&&e.currentProject.removeExternalEvents(t.getName()),Lr()})))},onRenameLayout:function(t,n){var r=u.currentProject,i=e.i18n;if(r&&r.hasLayoutNamed(t)&&n!==t){var o=(0,It.Z)(n||i._({id:"Unnamed"}),(function(e){return r.hasLayoutNamed(e)})),s=r.getLayout(t),l=t===r.getFirstLayout();f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{editorTabs:eM(e.editorTabs,s)})})).then((function(e){s.setName(o),U_.WholeProjectRefactorer.renameLayout(r,t,o),at.current&&at.current.changeData(t,o),l&&r.setFirstLayout(o),Lr()}))}},onRenameExternalLayout:function(t,n){var r=u.currentProject,i=e.i18n;if(r&&r.hasExternalLayoutNamed(t)&&n!==t){var o=(0,It.Z)(n||i._({id:"Unnamed"}),(function(e){return r.hasExternalLayoutNamed(e)})),s=r.getExternalLayout(t);f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{editorTabs:tM(e.editorTabs,s)})})).then((function(e){s.setName(o),U_.WholeProjectRefactorer.renameExternalLayout(r,t,o),Lr()}))}},onRenameEventsFunctionsExtension:function(e,t){var n=u.currentProject;if(n&&n.hasEventsFunctionsExtensionNamed(e)&&t!==e){var r=(0,It.Z)(U_.Project.getSafeName(t),(function(e){return gi(e,n)})),i=n.getEventsFunctionsExtension(e);U_.WholeProjectRefactorer.renameEventsFunctionsExtension(n,i,e,r),i.setName(r),wt.unloadProjectEventsFunctionsExtension(n,e),f((function(t){return(0,a.Z)((0,a.Z)({},t),{},{editorTabs:rM(t.editorTabs,e)})})).then((function(e){wt.reloadProjectEventsFunctionsExtensions(n),Lr()}))}},onRenameExternalEvents:function(t,n){var r=u.currentProject,i=e.i18n;if(r&&r.hasExternalEventsNamed(t)&&n!==t){var o=(0,It.Z)(n||i._({id:"Unnamed"}),(function(e){return r.hasExternalEventsNamed(e)})),s=r.getExternalEvents(t);f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{editorTabs:nM(e.editorTabs,s)})})).then((function(e){s.setName(o),U_.WholeProjectRefactorer.renameExternalEvents(r,t,o),Lr()}))}},onOpenResources:wr,onOpenPlatformSpecificAssets:function(){return ce(!0)},eventsFunctionsExtensionsError:on,onReloadEventsFunctionsExtensions:function(){Ae||wt.reloadProjectEventsFunctionsExtensions(tn)},onShareProject:function(){return Vn()},freezeUpdate:!$,unsavedChanges:Tt,hotReloadPreviewButtonProps:br,resourceManagementProps:xi}):null}),(0,d.jsx)(a_,{onBuildMenuTemplate:function(){return(0,VO.z)((0,VO.c)(bi),Ci)},children:(0,d.jsx)(lM,{hideLabels:!1,editorTabs:u.editorTabs,onClickTab:function(e){return t=e,void f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{editorTabs:VI(e.editorTabs,t)})})).then((function(e){return ri(KI(e.editorTabs),e)}));var t},onCloseTab:function(e){return function(e){QI(u.editorTabs),f((function(t){return(0,a.Z)((0,a.Z)({},t),{},{editorTabs:GI(t.editorTabs,e)})}))}(e)},onCloseOtherTabs:function(e){return function(e){QI(u.editorTabs),f((function(t){return(0,a.Z)((0,a.Z)({},t),{},{editorTabs:YI(t.editorTabs,e)})}))}(e)},onCloseAll:function(){QI(u.editorTabs),f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{editorTabs:WI(e.editorTabs)})}))},onTabActivated:function(e){return ri(e)},onDropTab:function(e,t){f((function(n){return(0,a.Z)((0,a.Z)({},n),{},{editorTabs:(r=n.editorTabs,i=e,o=t,oM(r,i,i>o?o+1:o))});var r,i,o}))}})}),(0,d.jsx)(G,{ref:h,showProjectButtons:!["start page","debugger",null].includes(KI(u.editorTabs)?KI(u.editorTabs).key:null),canSave:yi,onSave:ti,toggleProjectManager:ur,openShareDialog:function(){return Vn()},isSharingEnabled:!qr&&!Z,onOpenDebugger:Er,hasPreviewsRunning:vt,onPreviewWithoutHotReload:xr,onNetworkPreview:vr,onHotReloadPreview:mr,canDoNetworkPreview:!!D.current&&D.current.canDoNetworkPreview(),setPreviewOverride:function(e){var t=e.isPreviewOverriden,n=e.overridenPreviewLayoutName,r=e.overridenPreviewExternalLayoutName;rt((function(e){return(0,a.Z)((0,a.Z)({},e),{},{isPreviewOverriden:t,overridenPreviewLayoutName:n,overridenPreviewExternalLayoutName:r})}))},isPreviewEnabled:!!tn&&tn.getLayoutsCount()>0,previewState:nt,onOpenVersionHistory:Gr,checkedOutVersionStatus:qr,onQuitVersionHistory:Kr,canQuitVersionHistory:!W}),(0,d.jsx)(lo,{gameId:u.currentProject?u.currentProject.getProjectUuid():"",children:qI(u.editorTabs).map((function(t,n){var i=XI(u.editorTabs)===n,o=(0,_e.Ap)(t.key);return(0,d.jsx)(Bc,{active:i,children:(0,d.jsx)($O,{active:i,children:(0,d.jsx)(_e.ZP,{componentTitle:o.componentTitle,scope:o.scope,children:t.renderEditorContainer({isActive:i,extraEditorProps:t.extraEditorProps,project:tn,fileMetadata:nn,storageProvider:hn(),ref:function(e){return t.editorRef=e},setToolbar:function(e){return dr(e,i)},projectItemName:t.projectItemName,setPreviewedLayout:pr,onOpenExternalEvents:yr,onOpenEvents:function(e){jr(e,{openEventsEditor:!0,openSceneEditor:!1})},previewDebuggerServer:ft,hotReloadPreviewButtonProps:br,onOpenLayout:function(e){jr(e,{openEventsEditor:!0,openSceneEditor:!1})},resourceManagementProps:xi,onSave:ti,canSave:yi,onCreateEventsFunction:Fr,openInstructionOrExpression:Ir,unsavedChanges:Tt,canOpen:!!e.storageProviders.filter((function(e){return!e.hiddenInOpenDialog})).length,canInstallPrivateAsset:ci,onChooseProject:function(){return Or()},onOpenRecentFile:Hr,onOpenNewProjectSetupDialog:function(){Te(!0)},onOpenProjectManager:function(){return ee(!0)},onCloseProject:function(){return ni()},onOpenExampleStore:Ln,onSelectExampleShortHeader:Pn,onPreviewPrivateGameTemplateListingData:function(e){return En({privateGameTemplateListingData:e,openDialog:!0})},onOpenPrivateGameTemplateListingData:function(e){En({privateGameTemplateListingData:e,openDialog:!1}),Te(!0)},onOpenProfile:function(){return ve(!0)},onOpenLanguageDialog:function(){return ie(!0)},onOpenPreferences:function(){return ye(!0)},onOpenAbout:function(){return he(!0)},selectInAppTutorial:oi,onLoadEventsFunctionsExtensions:function(){return Ae?Promise.resolve():wt.loadProjectEventsFunctionsExtensions(tn)},onReloadEventsFunctionsExtensionMetadata:function(e){Ae||wt.reloadProjectEventsFunctionsExtensionMetadata(tn,e)},onDeleteResource:function(e,t){t(!0)},onRenameResource:function(e,t,n){tn&&(0,xI.jJ)(tn,(0,r.Z)({},e.getName(),t)),n(!0)},openBehaviorEvents:Mr})})})},t.key)}))}),(0,d.jsx)(JO,{ref:ot}),(0,d.jsx)(Ql,{show:mi,progress:Xt,message:ut||$t}),(0,d.jsx)(c.Z,{open:u.snackMessageOpen,autoHideDuration:u.snackDuration,onClose:Nn,ContentProps:{"aria-describedby":"snackbar-message"},message:(0,d.jsx)("span",{id:"snackbar-message",children:u.snackMessage})}),De&&an({onClose:zn,onChangeSubscription:zn,project:u.currentProject,onSaveProject:ti,isSavingProject:W,fileMetadata:nn,storageProvider:hn(),initialTab:Ve}),!!tn&&le&&(0,d.jsx)(Yl,{project:tn,open:!0,onApply:function(){return ce(!1)},onClose:function(){return ce(!1)},resourceManagementProps:xi}),!!ln&&ln({getIncludeFileHashs:pt.getIncludeFileHashs,onExport:function(){return Vn("publish")}},(function(e){D.current=e})),M&&O&&!!tn&&(0,d.jsx)(ER,{project:tn,fileMetadata:nn,getStorageProvider:hn,i18n:xn,resourceSources:sn,onChooseResources:function(e){R(null),L(null),O(e)},onClose:function(){R(null),L(null),O([])},options:M}),me&&(0,d.jsx)(Dc,{open:!0,onClose:function(){ve(!1)}}),we&&(0,d.jsx)(xD,{authenticatedUser:g,isOpeningProject:Ee,onClose:function(){return Te(!1)},onCreateEmptyProject:rr,onCreateFromExample:ir,onCreateProjectFromPrivateGameTemplate:or,onCreateWithLogin:sr,onCreateFromAIGeneration:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fileUrl){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,lr(r,n);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),storageProviders:e.storageProviders,selectedExampleShortHeader:Tn,selectedPrivateGameTemplateListingData:Sn}),b&&(0,d.jsx)(d_,{cloudProjectId:b.fileIdentifier,onClose:function(){return C(null)},onOpenPreviousVersion:li}),S&&(0,d.jsx)(p_,{isLoading:W,onClose:function(){return P(!1)},onSaveAsMainVersion:ti,onSaveAsDuplicate:ei}),je&&(0,d.jsx)(Ue,{i18n:e.i18n,onClose:function(e){ye(!1),e.languageDidChange&&qn()}}),re&&(0,d.jsx)(AO,{open:!0,onClose:function(e){ie(!1),e.languageDidChange&&qn()}}),fe&&(0,d.jsx)(it,{open:!0,onClose:function(){return he(!1)},updateStatus:rn}),u.openFromStorageProviderDialogOpen&&(0,d.jsx)(BO,{onClose:function(){return Or(!1)},storageProviders:e.storageProviders,onChooseProvider:function(e){Or(!1),pn(e),Br()}}),u.saveToStorageProviderDialogOpen&&(0,d.jsx)(NO,{onClose:function(){return Jr(!1)},storageProviders:e.storageProviders,onChooseProvider:function(e){Jr(!1),Qr(e)}}),jt(),kt(),jn(),kn(),Wr(),In(),(0,d.jsx)(nc,{shouldPrompt:!!u.currentProject,i18n:e.i18n,language:e.i18n.language,hasUnsavedChanges:Tt.hasUnsavedChanges}),(0,d.jsx)(MO,{}),_t&&(0,d.jsx)(AR,{open:!0,tutorialCompletionStatus:_t.userProgress?_t.userProgress.progress.every((function(e){return 100===e}))?"complete":"started":"notStarted",tutorialId:_t.tutorialId,startTutorial:di,onClose:function(){Bt(null)},isProjectOpening:Ee}),u.gdjsDevelopmentWatcherEnabled&&mn&&mn(),!!xt.length&&(0,d.jsx)(eR,{logs:xt,onClose:mt,onLaunchNewPreview:function(){mt(),xr()}}),Et&&(0,d.jsx)(Ut,(0,a.Z)({ref:at,tutorial:Et,startStepIndex:Ft,startProjectData:Ot,project:tn,endTutorial:function(e){var t=e.shouldCloseProject;e.shouldWarnAboutUnsavedChanges&&tn&&(!nn||Tt.hasUnsavedChanges)?Gt(!0):ii(t)}},Ht)),Wt&&(0,d.jsx)(mD,{onSaveProject:ti,onClose:function(){return Gt(!1)},isSavingProject:W,canEndTutorial:!!nn&&!Tt.hasUnsavedChanges,endTutorial:function(){ii(!0)}}),(0,d.jsx)(u_,{})]})}},44151:function(e,t,n){"use strict";n.d(t,{Z:function(){return L}});var r=n(1413),i=n(74165),o=n(15861),a=n(29439),s=n(28381),l=n(36600),c=n(71106),u=n(61325),d=n(16999),p=n(86278),f=n(96591),h=n(2066),g=n(78118),x=n(29343),m=s.memo((function(e){return(0,x.jsxs)(g.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"35",height:"40",viewBox:"0 0 35 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,x.jsx)("path",{d:"M3.66272 3.00012L3.1062 3.55664L5.71722 6.16766L6.27374 5.61114L3.66272 3.00012Z",fill:"#848B99"}),(0,x.jsx)("path",{d:"M0.442144 10.2565L0.202881 11.0063L3.67081 12.1129L3.91007 11.3631L0.442144 10.2565Z",fill:"#848B99"}),(0,x.jsx)("path",{d:"M4.4833 23.2356L1.41846 25.2949L1.85739 25.9482L4.92223 23.8888L4.4833 23.2356Z",fill:"#848B99"}),(0,x.jsx)("path",{d:"M3.61608 17.009L0 17.4272L0.0904321 18.2091L3.70651 17.7909L3.61608 17.009Z",fill:"#848B99"}),(0,x.jsx)("path",{d:"M29.4879 22.873L27.1136 32.1143C26.9168 32.9604 26.0773 33.4851 25.2312 33.2883C25.2247 33.2883 25.2181 33.2883 25.2116 33.2818L23.7424 32.9079C22.8963 32.6784 22.3913 31.8192 22.6012 30.9665L24.4376 23.483L29.4879 22.873Z",fill:"#11A8E4"}),(0,x.jsx)("path",{d:"M33.9873 19.1739L33.6922 21.2333C33.5151 22.4467 32.387 23.2928 31.1671 23.1157L29.488 22.873L30.5899 16.4258L32.105 16.6488C33.3183 16.8259 34.1644 17.954 33.9873 19.1739Z",fill:"#11A8E4"}),(0,x.jsx)("path",{d:"M20.9681 28.6839L23.0342 29.2021L24.1688 24.6831L20.7124 27.405C20.2401 27.7788 20.391 28.5397 20.9681 28.6839Z",fill:"#FE664C"}),(0,x.jsx)("path",{d:"M30.59 16.4258L29.4881 22.873L24.4444 23.483L22.4243 23.7978C23.1458 22.0335 23.6508 20.1839 23.9263 18.295C24.1755 16.616 24.2345 14.9173 24.1099 13.2251L30.59 16.4258Z",fill:"#64D2FF"}),(0,x.jsx)("path",{d:"M18.2724 17.3312C17.8264 20.3941 16.823 23.0701 15.5833 24.8606C14.4552 26.4937 13.1238 27.3989 11.8383 27.2086C10.8938 27.0709 10.1002 26.3691 9.49683 25.2607C9.84444 25.6608 10.2511 25.91 10.6971 25.969C11.4448 26.074 12.2121 25.6608 12.9336 24.8541C13.4977 24.2244 14.0355 23.3587 14.5143 22.3093C14.9931 21.2664 15.3997 20.0399 15.7145 18.6954C15.7342 18.597 16.0621 16.8721 16.0621 16.8721C16.1408 16.3408 16.2917 14.6814 16.3048 14.3797C16.4032 12.0251 16.1212 9.96569 15.5243 8.549C15.0586 7.44713 14.4028 6.7519 13.6092 6.64041C13.2747 6.59449 12.9336 6.65352 12.5991 6.80437C13.3534 6.19441 14.147 5.91238 14.9275 6.02388C16.3376 6.23376 17.4198 7.70948 18.0101 9.9001C18.5545 11.9136 18.6856 14.5306 18.2724 17.3312Z",fill:"#26B2D1"}),(0,x.jsx)("path",{d:"M16.3048 14.3795C16.2917 14.6812 16.1409 16.3406 16.0622 16.8719C16.0622 16.8719 15.7342 18.5968 15.7145 18.6952C15.3997 20.0397 14.9931 21.2662 14.5143 22.3091C14.0421 23.3585 13.4977 24.2242 12.9336 24.8539C12.2056 25.6606 11.4448 26.0738 10.6971 25.9688C10.2511 25.9033 9.84447 25.6606 9.49685 25.2605C8.92624 24.6112 8.49992 23.5487 8.25069 22.2172C8.25069 22.2172 7.68664 19.4232 8.25069 15.7569C8.87377 11.5921 10.4741 8.19463 12.1663 7.04685C12.3106 6.94847 12.4548 6.86976 12.5991 6.80417C12.9402 6.65332 13.2813 6.59429 13.6092 6.6402C14.4028 6.7517 15.0521 7.44693 15.5243 8.5488C16.1212 9.96549 16.4032 12.0249 16.3048 14.3795Z",fill:"#3A6CA7"}),(0,x.jsx)("path",{d:"M16.2457 15.3045C16.2064 15.8161 16.1473 16.3408 16.0686 16.8721C16.0686 16.8721 15.885 17.9871 15.7997 18.3937C15.7801 18.4921 15.7538 18.597 15.7341 18.6954C14.4224 18.597 13.0254 18.4396 12.8745 18.4134C11.7267 18.2494 10.92 17.2787 11.0709 16.249C11.2217 15.2193 12.2711 14.524 13.4189 14.688C13.5698 14.7274 14.9864 14.9897 16.2457 15.3045Z",fill:"#FFC061"}),(0,x.jsx)("path",{d:"M23.9197 18.2951C23.6442 20.184 23.1392 22.027 22.4177 23.7913L15.5835 24.8604C16.8231 23.0699 17.8266 20.3939 18.2726 17.331C18.6858 14.5304 18.5546 11.9134 18.0102 9.8999L24.1033 13.2252C24.2279 14.9173 24.1689 16.6161 23.9197 18.2951Z",fill:"#C2C5C6"})]}))})),v=s.memo((function(e){return(0,x.jsxs)(g.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"34",height:"40",viewBox:"0 0 34 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,x.jsx)("path",{d:"M17 31.8398C24.732 31.8398 31 25.5718 31 17.8398C31 10.1079 24.732 3.83984 17 3.83984C9.26801 3.83984 3 10.1079 3 17.8398C3 25.5718 9.26801 31.8398 17 31.8398Z",fill:"#C2C5C6"}),(0,x.jsx)("path",{d:"M29.3084 17.8396H24.5251C24.5251 16.4396 24.1751 15.2146 23.5334 14.0479C22.8917 12.8812 21.9001 11.9479 20.7917 11.3062L23.1834 7.16455C25.0501 8.27288 26.6251 9.78955 27.6751 11.6562C28.6667 13.5229 29.3084 15.6229 29.3084 17.8396Z",fill:"#F8B64C"}),(0,x.jsx)("path",{d:"M29.3084 17.8396C29.3084 20.0563 28.7251 22.1563 27.6751 23.9646C26.6251 25.8313 25.0501 27.4063 23.1834 28.4563L20.7917 24.3146C21.9584 23.6729 22.8917 22.6813 23.5334 21.5729C24.1751 20.4646 24.5251 19.1813 24.5251 17.7812H29.3084V17.8396Z",fill:"#FF7058"}),(0,x.jsx)("path",{d:"M13.2083 11.3065C12.0417 11.9481 11.1083 12.9398 10.4667 14.0481C9.82498 15.1565 9.47498 16.4398 9.47498 17.8398H4.69165C4.69165 15.6231 5.27498 13.5231 6.32498 11.7148C7.37498 9.84814 8.94998 8.27314 10.8167 7.22314L13.2083 11.3065Z",fill:"#54C0EB"}),(0,x.jsx)("path",{d:"M13.2083 24.3732L10.8167 28.5148C8.94998 27.4648 7.37498 25.8898 6.32498 24.0232C5.33332 22.1565 4.69165 20.0565 4.69165 17.8398H9.47498C9.47498 19.2398 9.82498 20.5232 10.4667 21.6315C11.1667 22.7398 12.1 23.6732 13.2083 24.3732Z",fill:"#84DBFF"}),(0,x.jsx)("path",{d:"M23.125 7.22292L20.7333 11.3646C19.625 10.7229 18.3416 10.3729 16.9416 10.3729C15.5416 10.3729 14.3166 10.7229 13.15 11.3646L10.7583 7.22292C12.6833 6.17292 14.7833 5.53125 17 5.53125C19.2166 5.53125 21.3166 6.17292 23.125 7.22292Z",fill:"#FFD15C"}),(0,x.jsx)("path",{d:"M17.0001 25.3649C21.156 25.3649 24.5251 21.9959 24.5251 17.8399C24.5251 13.684 21.156 10.3149 17.0001 10.3149C12.8442 10.3149 9.4751 13.684 9.4751 17.8399C9.4751 21.9959 12.8442 25.3649 17.0001 25.3649Z",fill:"#F2F2F2"}),(0,x.jsx)("path",{d:"M17.9335 16.4399C18.6335 16.9649 18.8085 17.9566 18.3418 18.6566C17.8168 19.3566 16.8251 19.5316 16.1251 19.0649C15.4251 18.5399 11.3418 13.8149 11.3418 13.8149C11.3418 13.8149 17.1751 15.9149 17.9335 16.4399Z",fill:"#40596B"}),(0,x.jsx)("path",{d:"M17 18.6562C17.5155 18.6562 17.9333 18.2383 17.9333 17.7229C17.9333 17.2074 17.5155 16.7896 17 16.7896C16.4845 16.7896 16.0667 17.2074 16.0667 17.7229C16.0667 18.2383 16.4845 18.6562 17 18.6562Z",fill:"#FF7058"}),(0,x.jsx)("path",{opacity:"0.15",d:"M17 6.69792C23.5917 6.69792 28.9583 11.8896 29.25 18.4229C29.25 18.2479 29.3083 18.0146 29.3083 17.8396C29.3083 11.0729 23.825 5.53125 17 5.53125C10.175 5.53125 4.69165 11.0729 4.69165 17.8396C4.69165 18.0146 4.69165 18.2479 4.74998 18.4229C5.04165 11.8896 10.4083 6.69792 17 6.69792Z",fill:"#40596B"})]}))})),b=s.memo((function(e){return(0,x.jsxs)(g.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"34",height:"40",viewBox:"0 0 34 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,x.jsx)("path",{d:"M25.9447 4.00023C25.9887 4.00023 26.0332 4.00369 26.0777 4.01071C26.3972 4.06135 26.6601 4.28882 26.7562 4.59767L27.8579 8.14205L31.4023 9.24382C31.7112 9.33982 31.9387 9.60281 31.9893 9.92226C32.0399 10.2417 31.9047 10.5621 31.6407 10.7489L28.6102 12.892L28.6577 16.6034C28.6618 16.9267 28.482 17.2244 28.1939 17.3712C27.9058 17.5181 27.5592 17.4885 27.3001 17.2951L24.3253 15.0753L20.8102 16.2673C20.5039 16.3711 20.1652 16.2921 19.9366 16.0634C19.7079 15.8348 19.6288 15.4961 19.7327 15.1898L20.9247 11.6747L18.7049 8.6999C18.5114 8.44077 18.4819 8.09425 18.6287 7.80612C18.7756 7.51799 19.0744 7.33912 19.3966 7.34229L23.108 7.38976L25.2511 4.35927C25.4119 4.13198 25.6717 4.00023 25.9447 4.00023Z",fill:"#F7BB22"}),(0,x.jsx)("path",{d:"M9.93509 20.409C10.1525 20.409 10.37 20.4919 10.5358 20.6579C10.8676 20.9896 10.8676 21.5276 10.5358 21.8594L6.53073 25.8644C6.19893 26.1962 5.66096 26.1963 5.32922 25.8644C4.99742 25.5327 4.99742 24.9947 5.32922 24.6629L9.33431 20.6579C9.50027 20.492 9.71771 20.409 9.93509 20.409Z",fill:"#F4901B"}),(0,x.jsx)("path",{d:"M7.93241 27.2178C8.14985 27.2178 8.36729 27.3008 8.53313 27.4667C8.86493 27.7985 8.86493 28.3364 8.53313 28.6682L4.45016 32.7512C4.11842 33.0829 3.58045 33.0829 3.24865 32.7512C2.91685 32.4195 2.91685 31.8815 3.24865 31.5497L7.33162 27.4667C7.49752 27.3008 7.71497 27.2178 7.93241 27.2178Z",fill:"#F8B64C"}),(0,x.jsx)("path",{d:"M11.7372 19.4563C12.069 19.788 12.607 19.788 12.9388 19.4563L18.1742 14.2208C18.506 13.889 18.506 13.3511 18.1742 13.0193C18.0083 12.8534 17.7909 12.7704 17.5735 12.7704C17.3561 12.7704 17.1386 12.8534 16.9728 13.0193L11.7373 18.2548C11.4054 18.5865 11.4054 19.1245 11.7372 19.4563Z",fill:"#F8B64C"}),(0,x.jsx)("path",{d:"M20.9491 21.0588L22.9802 19.0278C23.312 18.696 23.312 18.1581 22.9802 17.8263C22.8143 17.6603 22.5968 17.5774 22.3794 17.5774C22.162 17.5774 21.9445 17.6604 21.7787 17.8263L19.7476 19.8573C19.4158 20.189 19.4158 20.7269 19.7476 21.0588C20.0793 21.3906 20.6172 21.3906 20.9491 21.0588Z",fill:"#F8B64C"}),(0,x.jsx)("path",{d:"M10.9363 26.2649L17.3444 19.8568C17.6762 19.525 17.6762 18.987 17.3444 18.6552C17.1785 18.4893 16.9611 18.4064 16.7437 18.4064C16.5263 18.4064 16.3088 18.4893 16.143 18.6552L9.73485 25.0634C9.40305 25.3951 9.40305 25.9331 9.73485 26.2649C10.0666 26.5966 10.6046 26.5966 10.9363 26.2649Z",fill:"#F4B24E"}),(0,x.jsx)("path",{d:"M17.3446 22.26L10.1354 29.4691C9.80365 29.8009 9.80365 30.3388 10.1354 30.6706C10.4672 31.0024 11.0052 31.0024 11.337 30.6706L18.5461 23.4615C18.8779 23.1298 18.8779 22.5918 18.5461 22.26C18.3802 22.0941 18.1627 22.0111 17.9453 22.0111C17.728 22.0111 17.5105 22.0941 17.3446 22.26Z",fill:"#F4901B"}),(0,x.jsx)("path",{d:"M10.7595 11.9302L11.6092 11.9302L11.6092 12.7798C11.6092 13.249 11.9895 13.6294 12.4588 13.6294C12.928 13.6294 13.3084 13.249 13.3084 12.7798L13.3084 11.9302L14.158 11.9302C14.6272 11.9302 15.0076 11.5498 15.0076 11.0806C15.0076 10.6114 14.6272 10.231 14.158 10.231L13.3084 10.231L13.3084 9.38137C13.3084 8.91217 12.928 8.53177 12.4588 8.53177C11.9895 8.53177 11.6092 8.91216 11.6092 9.38137L11.6092 10.231L10.7595 10.231C10.2903 10.231 9.90994 10.6114 9.90994 11.0806C9.90994 11.5498 10.2903 11.9302 10.7595 11.9302Z",fill:"#FFAA5C"}),(0,x.jsx)("path",{d:"M27.7517 31.3008L28.6013 31.3008L28.6013 32.1504C28.6013 32.6196 28.9817 33 29.4509 33C29.9202 33 30.3005 32.6196 30.3005 32.1504L30.3005 31.3008L31.1502 31.3008C31.6194 31.3008 31.9998 30.9204 31.9998 30.4512C31.9998 29.982 31.6194 29.6016 31.1502 29.6016L30.3005 29.6016L30.3005 28.752C30.3005 28.2828 29.9202 27.9024 29.4509 27.9024C28.9817 27.9024 28.6013 28.2828 28.6013 28.752L28.6013 29.6016L27.7517 29.6016C27.2825 29.6016 26.9021 29.982 26.9021 30.4512C26.9021 30.9204 27.2825 31.3008 27.7517 31.3008Z",fill:"#FFAA5C"}),(0,x.jsx)("path",{d:"M22.9373 25.2403C22.9373 24.7711 22.5569 24.3907 22.0877 24.3907C21.6185 24.3907 21.2381 24.7711 21.2381 25.2403L21.2381 26.0899L20.3885 26.0899C19.9192 26.0899 19.5388 26.4703 19.5388 26.9395C19.5388 27.4087 19.9192 27.7891 20.3885 27.7891L21.2381 27.7891L21.2381 28.6387C21.2381 29.1079 21.6185 29.4883 22.0877 29.4883C22.5569 29.4883 22.9373 29.1079 22.9373 28.6387L22.9373 27.7891L23.7869 27.7891C24.2561 27.7891 24.6365 27.4087 24.6365 26.9395C24.6365 26.4703 24.2561 26.0899 23.7869 26.0899L22.9373 26.0899L22.9373 25.2403Z",fill:"#F6C547"}),(0,x.jsx)("path",{d:"M16.707 30.3374C16.2378 30.3374 15.8574 30.7178 15.8574 31.187C15.8574 31.6562 16.2378 32.0366 16.707 32.0366C17.1763 32.0366 17.5566 31.6562 17.5566 31.187C17.5566 30.7178 17.1763 30.3374 16.707 30.3374Z",fill:"#F8B64C"}),(0,x.jsx)("path",{d:"M28.0349 21.8418C27.5657 21.8418 27.1853 22.2222 27.1853 22.6914C27.1853 23.1606 27.5657 23.541 28.0349 23.541C28.5041 23.541 28.8845 23.1606 28.8845 22.6914C28.8845 22.2222 28.5041 21.8418 28.0349 21.8418Z",fill:"#FFD15C"}),(0,x.jsx)("path",{d:"M8.21094 4.84962C7.74172 4.84962 7.36134 5.23 7.36134 5.69922C7.36134 6.16845 7.74172 6.54883 8.21094 6.54883C8.68017 6.54883 9.06055 6.16845 9.06055 5.69922C9.06055 5.23 8.68017 4.84962 8.21094 4.84962Z",fill:"#F8B64C"}),(0,x.jsx)("path",{d:"M4.81251 16.1777C4.34328 16.1777 3.9629 16.5581 3.9629 17.0273C3.9629 17.4966 4.34328 17.877 4.81251 17.877C5.28173 17.877 5.66211 17.4966 5.66211 17.0273C5.66211 16.5581 5.28173 16.1777 4.81251 16.1777Z",fill:"#FFD15C"})]}))})),C=n(24910),j=n(40243),y=n(32484),Z=n(82422),k=n(65056),w=n(92078),T=n(78081),S=n(75383),P=n(62903),E=n(5051),I={campaign:{display:"flex",flex:1,borderRadius:8,padding:16},titleContainer:{width:"100%",display:"flex",justifyContent:"center"},bulletPointsContainer:{width:"100%",display:"flex",flexDirection:"column"},bulletIcon:{width:20,height:20,marginRight:10},iconStyle:{width:40,height:40}},M=function(e){switch(e.id){case"featuring-basic":return(0,x.jsx)(m,{style:I.iconStyle});case"featuring-pro":return(0,x.jsx)(v,{style:I.iconStyle});case"featuring-premium":return(0,x.jsx)(b,{style:I.iconStyle});default:return null}},L=function(e){var t=e.game,n=s.useContext(c.ZP),g=n.profile,m=n.limits,v=n.getAuthorizationHeader,b=s.useContext(P.q$),L=b.openCreditsPackageDialog,A=b.openCreditsUsageDialog,F=s.useContext(E.Y),O=F.marketingPlans,R=F.error,D=F.fetchMarketingPlans,_=s.useContext(C.Z),B=(0,k.Z)().showAlert,N=s.useState(null),U=(0,a.Z)(N,2),H=U[0],V=U[1],z=s.useState(null),W=(0,a.Z)(z,2),G=W[0],Y=W[1],q=s.useMemo((function(){if(!H)return{activeBasicFeaturing:null,activeProFeaturing:null,activePremiumFeaturing:null};var e=H.filter((function(e){return e.expiresAt>Date.now()/1e3}));return{activeBasicFeaturing:e.filter((function(e){return"games-platform-home"===e.featuring}))[0],activeProFeaturing:e.filter((function(e){return"socials-newsletter"===e.featuring}))[0],activePremiumFeaturing:e.filter((function(e){return"gdevelop-banner"===e.featuring}))[0]}}),[H]),X=q.activeBasicFeaturing,K=q.activeProFeaturing,J=q.activePremiumFeaturing,Q=s.useCallback((function(e){switch(e.id){case"featuring-basic":return X;case"featuring-pro":return K;case"featuring-premium":return J;default:return null}}),[X,J,K]),$=s.useCallback((function(e){if(!g||!m)return null;var t=m.credits.prices[e.id];return t?t.priceInCredits:null}),[m,g]);s.useEffect((function(){D()}),[D]);var ee=s.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,Y(null),e.next=6,(0,d.LK)(v,{gameId:t.id,userId:g.id});case 6:n=e.sent,V(n),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("An error occurred while fetching game featurings.",e.t0),Y(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,10]])}))),[t,v,g]);s.useEffect((function(){ee()}),[ee]);var te=s.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,r){var a,s,c,u,p,f;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&m){e.next=2;break}return e.abrupt("return");case 2:if(a=r.id,s=r.nameByLocale,c=$(r)){e.next=6;break}return e.abrupt("return");case 6:if(u=(0,w.a)(n,s),!(p=Q(r))||"featuring-pro"!==r.id&&"featuring-premium"!==r.id){e.next=12;break}return e.next=11,B({title:{id:"Featuring already active"},message:{id:"You already have an active {translatedName} featuring for your game {0}. Check your emails or discord, we will get in touch with you to get the campaign up!",values:{0:t.gameName,translatedName:u}}});case 11:return e.abrupt("return");case 12:if(!((f=m.credits.userBalance.amount)<c)){e.next=16;break}return L({missingCredits:c-f}),e.abrupt("return");case 16:A({title:p?(0,x.jsx)(l.Trans,{id:"Extend Featuring"}):(0,x.jsx)(l.Trans,{id:"Get Featuring"}),message:p?(0,x.jsx)(l.Trans,{id:"You are about to use {planCreditsAmount} credits to extend the game featuring {translatedName} for your game {0} and push it to the top of gd.games. Continue?",values:{0:t.gameName,planCreditsAmount:c,translatedName:u}}):(0,x.jsx)(l.Trans,{id:"You are about to use {planCreditsAmount} credits to purchase the game featuring {translatedName} for your game {0}. Continue?",values:{0:t.gameName,planCreditsAmount:c,translatedName:u}}),onConfirm:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.Ui)(v,{gameId:t.id,usageType:a,userId:g.id});case 2:return e.next=4,ee();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),successMessage:"featuring-basic"===r.id?(0,x.jsx)(l.Trans,{id:"\ud83c\udf89 Congrats on getting the {translatedName} featuring for your game {0}! Ensure that your game is public and you have configured a thumbnail for gd.games. This can take a few minutes for your game to be visible on the platform.",values:{0:t.gameName,translatedName:u}}):(0,x.jsx)(l.Trans,{id:"\ud83c\udf89 Congrats on getting the {translatedName} featuring for your game {0}. We will get in touch with you to get the campaign up!",values:{0:t.gameName,translatedName:u}})});case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t,v,m,g,B,Q,ee,L,A,$]),ne=function(e){e.marketingPlan;var t=e.activeFeaturing,n=e.i18n;return e.hasErrors?(0,x.jsx)(l.Trans,{id:"Fix those issues to get the campaign up!"}):"games-platform-home"===t.featuring?(0,x.jsx)(l.Trans,{id:"Active until {0}",values:{0:n.date(1e3*t.expiresAt)}}):(0,x.jsx)(l.Trans,{id:"Active, we will get in touch to get the campaign up!"})};return g&&m?(0,x.jsx)(l.I18n,{children:function(e){var n=e.i18n;return R||G?(0,x.jsx)(S.Z,{onRetry:function(){D(),ee()},children:(0,x.jsx)(l.Trans,{id:"Error while loading the marketing plans. Verify your internet connection or try again later."})}):O?(0,x.jsxs)(u.ak,{noMargin:!0,children:[(0,x.jsx)(p.Z,{color:"secondary",noMargin:!0,children:(0,x.jsx)(l.Trans,{id:"Get ready-made packs to make your game visible to the GDevelop community. <0>Read more</0> about how they increase your views.",components:[(0,x.jsx)(f.Z,{href:"https://wiki.gdevelop.io/gdevelop5/interface/games-dashboard/marketing",onClick:function(){return h.ZP.openExternalURL("https://wiki.gdevelop.io/gdevelop5/interface/games-dashboard/marketing")}})]})}),(0,x.jsx)(u.ep,{noColumnMargin:!0,children:O.map((function(e){var i=e.id,o=e.nameByLocale,a=e.descriptionByLocale,s=e.bulletPointsByLocale,c=$(e);if(!c)return console.error("Could not find price for marketing plan ".concat(i,", hiding it.")),null;var d=Q(e),f=d?function(e){var n=[];return"featuring-basic"===e.id&&(t.thumbnailUrl||n.push((0,x.jsx)(l.Trans,{id:"You don't have a thumbnail"})),t.publicWebBuildId||n.push((0,x.jsx)(l.Trans,{id:"Your game does not have a public build"})),t.discoverable||n.push((0,x.jsx)(l.Trans,{id:"Your game is not discoverable"}))),n}(e):[],h=f.length>0;return(0,x.jsx)("div",{style:(0,r.Z)((0,r.Z)({},I.campaign),{},{border:d?"2px solid ".concat(_.message.valid):"1px solid ".concat(_.palette.secondary)}),children:(0,x.jsxs)(u.ak,{alignItems:"center",justifyContent:"space-between",noMargin:!0,expand:!0,children:[(0,x.jsx)("div",{style:I.titleContainer,children:(0,x.jsxs)(u.pJ,{justifyContent:"space-between",alignItems:"flex-start",expand:!0,children:[(0,x.jsxs)(u.pJ,{noMargin:!0,alignItems:"flex-start",children:[M(e),(0,x.jsx)(p.Z,{size:"sub-title",children:(0,w.a)(n,o)})]}),(0,x.jsx)(p.Z,{size:"body-small",color:"secondary",children:(0,x.jsx)(l.Trans,{id:"{planCreditsAmount} credits",values:{planCreditsAmount:c}})})]})}),(0,x.jsx)("div",{style:I.bulletPointsContainer,children:h?f.map((function(e,t){return(0,x.jsx)(j.sg,{expand:!0,noMargin:!0,children:(0,x.jsxs)(j.x1,{noMargin:!0,alignItems:"center",children:[(0,x.jsx)(Z.Z,{style:(0,r.Z)((0,r.Z)({},I.bulletIcon),{},{color:_.message.error})}),(0,x.jsx)(p.Z,{style:{flex:1},children:e})]})},t)})):s.map((function(e,t){return(0,x.jsx)(j.sg,{expand:!0,noMargin:!0,children:(0,x.jsxs)(j.x1,{noMargin:!0,alignItems:"center",children:[(0,x.jsx)(Z.Z,{style:(0,r.Z)((0,r.Z)({},I.bulletIcon),d?{color:_.message.valid}:{})}),(0,x.jsx)(p.Z,{style:{flex:1},children:(0,w.a)(n,e)})]})},t)}))}),(0,x.jsx)(j.sg,{noMargin:!0,alignItems:"flex-start",expand:!0,justifyContent:"flex-end",children:(0,x.jsx)(p.Z,{size:"body-small",noMargin:!0,color:"secondary",align:"left",children:d?ne({activeFeaturing:d,marketingPlan:e,i18n:n,hasErrors:h}):(0,w.a)(n,a)})}),(0,x.jsx)(y.Z,{primary:!d,onClick:function(){return te(n,e)},label:H?d?"games-platform-home"===d.featuring?(0,x.jsx)(l.Trans,{id:"Extend"}):(0,x.jsx)(l.Trans,{id:"Activated"}):(0,x.jsx)(l.Trans,{id:"Purchase"}):(0,x.jsx)(l.Trans,{id:"Loading..."}),fullWidth:!0,disabled:!H})]})},i)}))})]}):(0,x.jsx)(T.Z,{})}}):null}},5051:function(e,t,n){"use strict";n.d(t,{Y:function(){return u},c:function(){return d}});var r=n(74165),i=n(15861),o=n(29439),a=n(28381),s=n(16999),l=n(4900),c=n(29343),u=a.createContext({fetchMarketingPlans:function(){},marketingPlans:null,error:null}),d=function(e){var t=e.children,n=a.useState(null),d=(0,o.Z)(n,2),p=d[0],f=d[1],h=a.useState(null),g=(0,o.Z)(h,2),x=g[0],m=g[1],v=a.useRef(!1),b=a.useCallback((function(){v.current||x||(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(null),v.current=!0,e.prev=2,e.next=5,(0,s.lX)();case 5:t=e.sent,console.info("Loaded ".concat(t?t.length:0," marketing plans from the store.")),m(t),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("Unable to load the marketing plans from the store:",e.t0),f(e.t0);case 14:v.current=!1;case 15:case"end":return e.stop()}}),e,null,[[2,10]])})))()}),[x]);a.useEffect((function(){if(!v.current){var e=setTimeout((function(){console.info("Pre-fetching marketing plans..."),b()}),l.NH);return function(){return clearTimeout(e)}}}),[b]);var C=a.useMemo((function(){return{marketingPlans:x,fetchMarketingPlans:b,error:p}}),[x,b,p]);return(0,c.jsx)(u.Provider,{value:C,children:t})}},35924:function(e,t,n){"use strict";var r=n(29439),i=n(36600),o=n(28381),a=n(40243),s=n(61325),l=n(3290),c=n(2597),u=n(25588),d=n(42986),p=n(67835),f=n(86278),h=n(38501),g=n(78081),x=n(14331),m=n(58758),v=n(96355),b=n(29343),C={imageContainer:{position:"relative",display:"flex",flex:1,width:"100%",height:"calc(100% - 80px)"},loaderContainer:{position:"absolute",left:"calc(50% - 30px)",top:"calc(50% - 30px)"},timeField:{width:75},timeIcon:{paddingLeft:6,paddingRight:8}};t.Z=function(e){var t=e.animationName,n=e.resourceNames,j=e.getImageResourceSource,y=e.isImageResourceSmooth,Z=e.timeBetweenFrames,k=e.onChangeTimeBetweenFrames,w=e.isLooping,T=e.hideCheckeredBackground,S=e.deactivateControls,P=e.displaySpacedView,E=e.fixedHeight,I=e.fixedWidth,M=e.isAssetPrivate,L=e.hideAnimationLoader,A=(0,h.Z)(),F=Number.parseFloat((1/Z).toFixed(4)),O=o.useRef(),R=o.useRef(),D=o.useRef(0),_=o.useRef(Z),B=o.useRef(!1),N=o.useRef(0),U=o.useRef(n[0]),H=o.useRef(w),V=o.useRef(t),z=o.useRef(new Array(n.length).fill(!1)),W=o.useRef(null),G=o.useState(!0),Y=(0,r.Z)(G,2),q=Y[0],X=Y[1];o.useEffect((function(){w!==H.current&&(H.current=w),t!==V.current&&(V.current=t,z.current=new Array(n.length).fill(!1))}),[Z,w,t,n]);var K=function(){N.current=0,D.current=0,B.current=!1,A()},J=o.useCallback((function(e){var t=R.current,r=N.current,i=D.current,o=_.current,a=B.current,s=H.current,l=n.length,c=z.current[r];if(t&&c){var u=r,d=i+(a?0:(e-t)/1e3);if(d>o){var p=Math.floor(d/o);u+=p,(d-=p*o)<0&&(d=0)}u>=l&&(u=s?u%l:l-1),u<0&&(u=0),N.current=u,D.current=d;var f=n[N.current];r!==u&&(f===U.current?z.current[N.current]=!0:(z.current[N.current]=!1,W.current=setTimeout((function(){console.warn("The image took too long to load, displaying a loader."),X(!0)}),500)),U.current=f,A())}O.current=requestAnimationFrame(J),R.current=e}),[A,n]);o.useEffect((function(){return O.current=requestAnimationFrame(J),function(){O.current&&cancelAnimationFrame(O.current)}}),[J]);var Q=o.useCallback((function(){z.current[N.current]=!0,!z.current.some((function(e){return!e}))&&X(!1),W.current&&(clearTimeout(W.current),W.current=null),A()}),[A]);N.current>=n.length&&(N.current=0);var $=n[N.current];return(0,b.jsxs)(a.sg,{expand:!0,noOverflowParent:!0,noMargin:!0,children:[(0,b.jsxs)("div",{style:C.imageContainer,children:[(0,b.jsx)(l.Z,{resourceName:$,imageResourceSource:j($),isImageResourceSmooth:y($),displaySpacedView:P,hideCheckeredBackground:T,deactivateControls:S,fixedHeight:E,fixedWidth:I,onImageLoaded:Q,isImagePrivate:M,hideLoader:!0}),!L&&q&&(0,b.jsx)("div",{style:C.loaderContainer,children:(0,b.jsx)(g.Z,{})})]}),!S&&(0,b.jsx)(a.sg,{noMargin:!0,children:(0,b.jsxs)(s.ep,{alignItems:"center",children:[(0,b.jsxs)(s.pJ,{alignItems:"center",justifyContent:"center",noMargin:!0,children:[(0,b.jsx)(f.Z,{children:(0,b.jsx)(i.Trans,{id:"FPS:"})}),(0,b.jsx)(d.Z,{commitOnBlur:!0,margin:"none",value:F.toString(),onChange:function(e){if(e){var t=Number.parseFloat(e);if(t>0){var n=1/t;_.current=n,k&&k(n),K()}}},id:"direction-time-between-frames",type:"number",min:0,max:100,style:C.timeField}),(0,b.jsx)(u.Z,{style:C.timeIcon}),(0,b.jsx)(d.Z,{commitOnBlur:!0,margin:"none",value:(0,v.q)(_.current,6),onChange:function(e){if(e){var t=Number.parseFloat(e);t>0&&(_.current=t,k&&k(t),K())}},id:"direction-time-between-frames",type:"number",step:.005,precision:2,min:.01,max:5,style:C.timeField})]}),(0,b.jsxs)(s.pJ,{alignItems:"center",justifyContent:"center",noMargin:!0,children:[(0,b.jsx)(p.Z,{leftIcon:(0,b.jsx)(c.Z,{}),label:(0,b.jsx)(i.Trans,{id:"Replay"}),onClick:K}),(0,b.jsx)(p.Z,{leftIcon:B.current?(0,b.jsx)(x.Z,{}):(0,b.jsx)(m.Z,{}),label:B.current?"Play":"Pause",onClick:function(){B.current=!B.current,A()}})]})]})})]})}},8278:function(e,t,n){"use strict";n.d(t,{CO:function(){return b},DJ:function(){return T},E8:function(){return E},Gn:function(){return Z},K3:function(){return S},Mr:function(){return x},Ng:function(){return P},Vv:function(){return v},__:function(){return c},c:function(){return f},eS:function(){return k},fd:function(){return m},ge:function(){return u},ir:function(){return g},lg:function(){return w},rY:function(){return y},sL:function(){return j},tY:function(){return l},xw:function(){return p}});var r=n(93433),i=n(18455),o=n(49179),a=n.n(o),s=n.g.gd,l=function(e,t,n,r){var i=t<e.getAnimationsCount()?e.getAnimation(t):null;if(!i)return{animation:null,direction:null,sprite:null};var o=n<i.getDirectionsCount()?i.getDirection(n):null;if(!o)return{animation:i,direction:null,sprite:null};var a=r<o.getSpritesCount()?o.getSprite(r):null;return{animation:i,direction:o,sprite:a}},c=function(e){for(var t=0,n=0;n<e.getAnimationsCount();n++)for(var r=e.getAnimation(n),i=0;i<r.getDirectionsCount();i++){t+=r.getDirection(i).getSpritesCount()}return t},u=function(e){for(var t=new Set,n=0;n<e.getAnimationsCount();n++)for(var i=e.getAnimation(n),o=0;o<i.getDirectionsCount();o++)for(var a=i.getDirection(o),s=0;s<a.getSpritesCount();s++)for(var l=a.getSprite(s).getAllNonDefaultPoints(),c=0;c<l.size();c++){var u=l.at(c);t.add(u.getName())}return(0,r.Z)(t)},d=function(e,t){t.setX(e.getX()),t.setY(e.getY()),t.setName(e.getName())},p=function(e,t){e.ptr!==t.ptr&&(d(e.getCenter(),t.getCenter()),d(e.getOrigin(),t.getOrigin()),t.setDefaultCenterPoint(e.isDefaultCenterPoint()),t.getAllNonDefaultPoints().clear(),(0,i.mapVector)(e.getAllNonDefaultPoints(),(function(e){t.addPoint(e)})))},f=function(e,t){(0,i.mapFor)(0,t.getDirectionsCount(),(function(n){var r=t.getDirection(n);(0,i.mapFor)(0,r.getSpritesCount(),(function(t){var n=r.getSprite(t);p(e,n)}))}))},h=function(e,t){return e.getX()===t.getX()&&e.getY()===t.getY()&&e.getName()===t.getName()},g=function(e,t){return a()((0,i.mapFor)(0,t.getSpritesCount(),(function(n){var r,o,s=t.getSprite(n);return o=e,!!h((r=s).getCenter(),o.getCenter())&&!!h(r.getOrigin(),o.getOrigin())&&r.isDefaultCenterPoint()===o.isDefaultCenterPoint()&&r.getAllNonDefaultPoints().size()===o.getAllNonDefaultPoints().size()&&a()((0,i.mapVector)(r.getAllNonDefaultPoints(),(function(e){return!!o.hasPoint(e.getName())&&h(e,o.getPoint(e.getName()))})))})))},x=function(e,t){return a()((0,i.mapFor)(0,t.getDirectionsCount(),(function(n){var r=t.getDirection(n);return g(e,r)})))},m=function(e,t){return a()((0,i.mapFor)(0,t.getAnimationsCount(),(function(n){var r=t.getAnimation(n);return x(e,r)})))},v=function(e,t){e.ptr!==t.ptr&&(t.setFullImageCollisionMask(e.isFullImageCollisionMask()),t.getCustomCollisionMask().clear(),(0,i.mapVector)(e.getCustomCollisionMask(),(function(e){t.getCustomCollisionMask().push_back(e)})))},b=function(e,t){(0,i.mapFor)(0,t.getDirectionsCount(),(function(n){var r=t.getDirection(n);(0,i.mapFor)(0,r.getSpritesCount(),(function(t){var n=r.getSprite(t);v(e,n)}))}))},C=function(e,t){if(e.isFullImageCollisionMask()!==t.isFullImageCollisionMask())return!1;if(e.isFullImageCollisionMask()&&t.isFullImageCollisionMask())return!0;var n=e.getCustomCollisionMask(),r=t.getCustomCollisionMask();return n.size()===r.size()&&a()((0,i.mapVector)(n,(function(e,t){return function(e,t){var n=e.getVertices(),r=t.getVertices();return n.size()===r.size()&&a()((0,i.mapVector)(n,(function(e,t){var n=r.at(t);return e.get_x()===n.get_x()&&e.get_y()===n.get_y()})))}(e,r.at(t))})))},j=function(e,t){return a()((0,i.mapFor)(0,t.getSpritesCount(),(function(n){var r=t.getSprite(n);return C(r,e)})))},y=function(e,t){return a()((0,i.mapFor)(0,t.getDirectionsCount(),(function(n){var r=t.getDirection(n);return j(e,r)})))},Z=function(e,t){return a()((0,i.mapFor)(0,t.getAnimationsCount(),(function(n){var r=t.getAnimation(n);return y(e,r)})))},k=function(e){var t=l(e,0,0,0).sprite;return!!t&&t.isFullImageCollisionMask()},w=function(e,t){(0,i.mapFor)(0,e.getDirectionsCount(),(function(n){for(var r=e.getDirection(n),o=(0,i.mapFor)(0,r.getSpritesCount(),(function(e){var n=r.getSprite(e);return!!t[n.ptr]})),a=r.getSpritesCount()-1;a>=0;a--)o[a]&&r.removeSprite(a)}))},T=function(e,t){(0,i.mapFor)(0,e.getDirectionsCount(),(function(n){for(var r=e.getDirection(n),o=(0,i.mapFor)(0,r.getSpritesCount(),(function(e){var n=r.getSprite(e);return!!t[n.ptr]})),a=r.getSpritesCount()-1;a>=0;a--)if(o[a]){var l=r.getSprite(a),c=new s.Sprite;c.setImageName(l.getImageName()),p(l,c),v(l,c),r.addSprite(c),r.moveSprite(r.getSpritesCount()-1,a),c.delete()}}))},S=function(e){for(var t=0;t<e.getAnimationsCount();t++)for(var n=e.getAnimation(t),r=0;r<n.getDirectionsCount();r++){if(n.getDirection(r).getSpritesCount()>0)return!0}return!1},P=function(e){if(0===e.getAnimationsCount())return null;var t=e.getAnimation(0);if(0===t.getDirectionsCount())return null;var n=t.getDirection(0);return 0===n.getSpritesCount()?null:n.getSprite(0)},E=function(e,t){for(var n=0;n<e.getAnimationsCount();n++)for(var r=e.getAnimation(n),i=0;i<r.getDirectionsCount();i++)for(var o=r.getDirection(i),a=0;a<o.getSpritesCount();a++){var s=o.getSprite(a);s.setFullImageCollisionMask(!t),t&&s.setCustomCollisionMask(t)}}},85529:function(e,t,n){"use strict";n.d(t,{Z:function(){return Fn}});var r=n(15671),i=n(43144),o=n(60136),a=n(29388),s=n(1413),l=n(36600),c=n(28381),u=n(21601),d=n(40243),p=n(37237),f=n(94854),h=n(61325),g=n(74661),x=n(72410),m=n(42986),v=n(89267),b=n(51535),C=n(3781),j=n(78118),y=n(29343),Z=c.memo((function(e){return(0,y.jsxs)(j.Z,(0,s.Z)((0,s.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 6.66667C3.5 6.39052 3.72386 6.16667 4 6.16667H11.3333C11.6095 6.16667 11.8333 6.39052 11.8333 6.66667C11.8333 6.94281 11.6095 7.16667 11.3333 7.16667H4C3.72386 7.16667 3.5 6.94281 3.5 6.66667Z",fill:"currentColor"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 4C3.5 3.72386 3.72386 3.5 4 3.5H13.3333C13.6095 3.5 13.8333 3.72386 13.8333 4C13.8333 4.27614 13.6095 4.5 13.3333 4.5H4C3.72386 4.5 3.5 4.27614 3.5 4Z",fill:"currentColor"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 9.33333C3.5 9.05719 3.72386 8.83333 4 8.83333H13.3333C13.6095 8.83333 13.8333 9.05719 13.8333 9.33333C13.8333 9.60948 13.6095 9.83333 13.3333 9.83333H4C3.72386 9.83333 3.5 9.60948 3.5 9.33333Z",fill:"currentColor"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 12C3.5 11.7239 3.72386 11.5 4 11.5H11.3333C11.6095 11.5 11.8333 11.7239 11.8333 12C11.8333 12.2761 11.6095 12.5 11.3333 12.5H4C3.72386 12.5 3.5 12.2761 3.5 12Z",fill:"currentColor"})]}))})),k=c.memo((function(e){return(0,y.jsxs)(j.Z,(0,s.Z)((0,s.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 6.66667C5.5 6.39052 5.72386 6.16667 6 6.16667H11.3333C11.6095 6.16667 11.8333 6.39052 11.8333 6.66667C11.8333 6.94281 11.6095 7.16667 11.3333 7.16667H6C5.72386 7.16667 5.5 6.94281 5.5 6.66667Z",fill:"currentColor"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 4C3.5 3.72386 3.72386 3.5 4 3.5H13.3333C13.6095 3.5 13.8333 3.72386 13.8333 4C13.8333 4.27614 13.6095 4.5 13.3333 4.5H4C3.72386 4.5 3.5 4.27614 3.5 4Z",fill:"currentColor"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 9.33333C3.5 9.05719 3.72386 8.83333 4 8.83333H13.3333C13.6095 8.83333 13.8333 9.05719 13.8333 9.33333C13.8333 9.60948 13.6095 9.83333 13.3333 9.83333H4C3.72386 9.83333 3.5 9.60948 3.5 9.33333Z",fill:"currentColor"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 12C5.5 11.7239 5.72386 11.5 6 11.5H11.3333C11.6095 11.5 11.8333 11.7239 11.8333 12C11.8333 12.2761 11.6095 12.5 11.3333 12.5H6C5.72386 12.5 5.5 12.2761 5.5 12Z",fill:"currentColor"})]}))})),w=c.memo((function(e){return(0,y.jsxs)(j.Z,(0,s.Z)((0,s.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 6.66667C5.5 6.39052 5.72386 6.16667 6 6.16667H13.3333C13.6095 6.16667 13.8333 6.39052 13.8333 6.66667C13.8333 6.94281 13.6095 7.16667 13.3333 7.16667H6C5.72386 7.16667 5.5 6.94281 5.5 6.66667Z",fill:"currentColor"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 4C3.5 3.72386 3.72386 3.5 4 3.5H13.3333C13.6095 3.5 13.8333 3.72386 13.8333 4C13.8333 4.27614 13.6095 4.5 13.3333 4.5H4C3.72386 4.5 3.5 4.27614 3.5 4Z",fill:"currentColor"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 9.33333C3.5 9.05719 3.72386 8.83333 4 8.83333H13.3333C13.6095 8.83333 13.8333 9.05719 13.8333 9.33333C13.8333 9.60948 13.6095 9.83333 13.3333 9.83333H4C3.72386 9.83333 3.5 9.60948 3.5 9.33333Z",fill:"currentColor"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 12C5.5 11.7239 5.72386 11.5 6 11.5H13.3333C13.6095 11.5 13.8333 11.7239 13.8333 12C13.8333 12.2761 13.6095 12.5 13.3333 12.5H6C5.72386 12.5 5.5 12.2761 5.5 12Z",fill:"currentColor"})]}))})),T=n(86278),S=n(11858),P=n(90286),E=n.g.gd,I={marginRight:10},M={sizeTextField:(0,s.Z)({width:90},I),resourcesSelector:{alignSelf:"center"},toolbarItem:I,checkbox:I},L=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.objectConfiguration,r=t.project,i=t.resourceManagementProps,o=t.renderObjectNameField,a=E.asTextObjectConfiguration(n),s=a.getTextAlignment();return(0,y.jsxs)(h.ak,{noMargin:!0,children:[o&&o(),(0,y.jsxs)(h.ep,{noMargin:!0,alignItems:"center",children:[(0,y.jsxs)(d.x1,{noMargin:!0,alignItems:"center",children:[(0,y.jsx)(f.c,{firstChild:!0,children:(0,y.jsx)(l.Trans,{id:"Size:"})}),(0,y.jsx)(m.Z,{commitOnBlur:!0,id:"text-object-font-size",type:"number",margin:"none",style:M.sizeTextField,value:a.getCharacterSize(),onChange:function(t){a.setCharacterSize(parseInt(t,10)||0),e.forceUpdate()}}),(0,y.jsx)(f.c,{children:(0,y.jsx)(l.Trans,{id:"Color:"})}),(0,y.jsx)(p.Z,{style:M.toolbarItem,disableAlpha:!0,color:(0,S.A0)(a.getColor(),255),onChangeComplete:function(t){var n=(0,S.KC)(t.rgb);a.setColor(n),e.forceUpdate()}})]}),(0,y.jsxs)(d.x1,{noMargin:!0,alignItems:"center",children:[(0,y.jsx)(u.Z,{label:(0,y.jsx)(l.Trans,{id:"Bold"}),checked:a.isBold(),onCheck:function(t,n){a.setBold(n),e.forceUpdate()},style:M.checkbox}),(0,y.jsx)(u.Z,{label:(0,y.jsx)(l.Trans,{id:"Italic"}),checked:a.isItalic(),onCheck:function(t,n){a.setItalic(n),e.forceUpdate()},style:M.checkbox}),(0,y.jsxs)(v.Z,{size:"small",children:[(0,y.jsx)(C.ZP,{title:(0,y.jsx)(l.Trans,{id:"Align text on the left"}),children:(0,y.jsx)(b.Z,{variant:"left"===s?"contained":"outlined",color:"left"===s?"secondary":"default",onClick:function(){a.setTextAlignment("left"),e.forceUpdate()},children:(0,y.jsx)(Z,{})})}),(0,y.jsx)(C.ZP,{title:(0,y.jsx)(l.Trans,{id:"Align text on the center"}),children:(0,y.jsx)(b.Z,{variant:"center"===s?"contained":"outlined",color:"center"===s?"secondary":"default",onClick:function(){a.setTextAlignment("center"),e.forceUpdate()},children:(0,y.jsx)(k,{})})}),(0,y.jsx)(C.ZP,{title:(0,y.jsx)(l.Trans,{id:"Align text on the right"}),children:(0,y.jsx)(b.Z,{variant:"right"===s?"contained":"outlined",color:"right"===s?"secondary":"default",onClick:function(){a.setTextAlignment("right"),e.forceUpdate()},children:(0,y.jsx)(w,{})})})]})]})]}),(0,y.jsx)(g.Z,{project:r,resourceManagementProps:i,resourcesLoader:x.Z,resourceKind:"font",fullWidth:!0,canBeReset:!0,initialResourceName:a.getFontName(),onChange:function(t){a.setFontName(t),e.forceUpdate()},floatingLabelText:(0,y.jsx)(l.Trans,{id:"Choose a font"}),hintText:(0,y.jsx)(l.Trans,{id:"Choose a font"})}),(0,y.jsx)(d.x1,{noMargin:!0,children:(0,y.jsx)(m.Z,{floatingLabelText:(0,y.jsx)(l.Trans,{id:"Initial text to display"}),floatingLabelFixed:!0,id:"text-object-initial-text",commitOnBlur:!0,translatableHintText:{id:"Enter the text to be displayed by the object"},fullWidth:!0,multiline:!0,rows:8,rowsMax:8,value:a.getText(),onChange:function(t){a.setText(t),e.forceUpdate(),e.props.onSizeUpdated()}})}),(0,y.jsx)(T.Z,{size:"block-title",noMargin:!0,children:(0,y.jsx)(l.Trans,{id:"Outline"})}),(0,y.jsx)(u.Z,{label:(0,y.jsx)(l.Trans,{id:"Enabled"}),checked:a.isOutlineEnabled(),onCheck:function(t,n){a.setOutlineEnabled(n),e.forceUpdate()}}),(0,y.jsxs)(h.ep,{noMargin:!0,noColumnMargin:!0,children:[(0,y.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,y.jsx)(P.Z,{floatingLabelText:(0,y.jsx)(l.Trans,{id:"Color"}),disableAlpha:!0,fullWidth:!0,color:a.getOutlineColor(),onChange:function(t){var n=0===t.length?"":(0,S.JO)(t);a.setOutlineColor(n),e.forceUpdate()}})}),(0,y.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,y.jsx)(m.Z,{floatingLabelFixed:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Thickness"}),type:"number",value:a.getOutlineThickness(),onChange:function(t){a.setOutlineThickness(parseInt(t,10)||0),e.forceUpdate()}})})]}),(0,y.jsx)(T.Z,{size:"block-title",noMargin:!0,children:(0,y.jsx)(l.Trans,{id:"Shadow"})}),(0,y.jsx)(u.Z,{label:(0,y.jsx)(l.Trans,{id:"Enabled"}),checked:a.isShadowEnabled(),onCheck:function(t,n){a.setShadowEnabled(n),e.forceUpdate()}}),(0,y.jsxs)(h.ep,{noMargin:!0,noColumnMargin:!0,children:[(0,y.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,y.jsx)(m.Z,{floatingLabelFixed:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Distance"}),type:"number",value:a.getShadowDistance(),onChange:function(t){a.setShadowDistance(parseInt(t,10)||0),e.forceUpdate()}})}),(0,y.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,y.jsx)(m.Z,{floatingLabelFixed:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Angle"}),type:"number",value:a.getShadowAngle(),onChange:function(t){a.setShadowAngle(parseInt(t,10)||0),e.forceUpdate()}})})]}),(0,y.jsxs)(h.ep,{noMargin:!0,children:[(0,y.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,y.jsx)(P.Z,{floatingLabelText:(0,y.jsx)(l.Trans,{id:"Color"}),disableAlpha:!0,fullWidth:!0,color:a.getShadowColor(),onChange:function(t){var n=0===t.length?"":(0,S.JO)(t);a.setShadowColor(n),e.forceUpdate()}})}),(0,y.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,y.jsx)(m.Z,{floatingLabelFixed:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Opacity (0 - 255)"}),type:"number",value:a.getShadowOpacity(),onChange:function(t){a.setShadowOpacity(parseInt(t,10)||0),e.forceUpdate()}})})]}),(0,y.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,y.jsx)(m.Z,{floatingLabelFixed:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Blur radius"}),type:"number",value:a.getShadowBlurRadius(),onChange:function(t){a.setShadowBlurRadius(parseInt(t,10)||0),e.forceUpdate()}})})]})}}]),n}(c.Component),A=n(3115),F=n.g.gd,O=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.objectConfiguration,r=t.project,i=t.resourceManagementProps,o=t.objectName,a=t.renderObjectNameField,s=F.asTiledSpriteConfiguration(n);return(0,y.jsxs)(h.ak,{noMargin:!0,children:[a&&a(),(0,y.jsx)(A.Z,{project:r,resourceManagementProps:i,resourceKind:"image",resourceName:s.getTexture(),defaultNewResourceName:o,onChange:function(t){s.setTexture(t),e.forceUpdate()},floatingLabelText:(0,y.jsx)(l.Trans,{id:"Select an image"})}),(0,y.jsxs)(h.ep,{noMargin:!0,children:[(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Default width (in pixels)"}),fullWidth:!0,type:"number",value:s.getWidth(),onChange:function(t){s.setWidth(parseInt(t,10)||0),e.forceUpdate()}}),(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Default height (in pixels)"}),fullWidth:!0,type:"number",value:s.getHeight(),onChange:function(t){s.setHeight(parseInt(t,10)||0),e.forceUpdate()}})]})]})}}]),n}(c.Component),R=n.g.gd,D=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.objectConfiguration,r=t.project,i=t.resourceManagementProps,o=t.objectName,a=t.renderObjectNameField,s=R.asPanelSpriteConfiguration(n);return(0,y.jsxs)(h.ak,{noMargin:!0,children:[a&&a(),(0,y.jsx)(A.Z,{project:r,resourceManagementProps:i,resourceKind:"image",resourceName:s.getTexture(),defaultNewResourceName:o,onChange:function(t){s.setTexture(t),e.forceUpdate()},floatingLabelText:(0,y.jsx)(l.Trans,{id:"Select an image"})}),(0,y.jsx)(u.Z,{label:(0,y.jsx)(l.Trans,{id:"Repeat borders and center textures (instead of stretching them)"}),checked:s.isTiled(),onCheck:function(t,n){s.setTiled(n),e.forceUpdate()}}),(0,y.jsxs)(h.ep,{noMargin:!0,children:[(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Top margin"}),fullWidth:!0,type:"number",value:s.getTopMargin(),onChange:function(t){s.setTopMargin(parseInt(t,10)||0),e.forceUpdate()}}),(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Bottom margin"}),fullWidth:!0,type:"number",value:s.getBottomMargin(),onChange:function(t){s.setBottomMargin(parseInt(t,10)||0),e.forceUpdate()}})]}),(0,y.jsxs)(h.ep,{noMargin:!0,children:[(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Left margin"}),fullWidth:!0,type:"number",value:s.getLeftMargin(),onChange:function(t){s.setLeftMargin(parseInt(t,10)||0),e.forceUpdate()}}),(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Right margin"}),fullWidth:!0,type:"number",value:s.getRightMargin(),onChange:function(t){s.setRightMargin(parseInt(t,10)||0),e.forceUpdate()}})]}),(0,y.jsxs)(h.ep,{noMargin:!0,children:[(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Default width (in pixels)"}),fullWidth:!0,type:"number",value:s.getWidth(),onChange:function(t){s.setWidth(parseInt(t,10)||0),e.forceUpdate()}}),(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Default height (in pixels)"}),fullWidth:!0,type:"number",value:s.getHeight(),onChange:function(t){s.setHeight(parseInt(t,10)||0),e.forceUpdate()}})]})]})}}]),n}(c.Component),_=n(74165),B=n(15861),N=n(29439),U=n(4942),H=n(37762),V=n(93433),z=n(59863),W=n(18455),G=n(25588),Y=n(42699),q=n(73693),X=n(1773),K=n(35924),J=n(6996),Q=n(3290),$=n(38501),ee=n(37571),te=n(14331),ne=n(96355),re=n(24910),ie={container:{paddingLeft:12,paddingRight:12,display:"flex",alignItems:"center"},timeField:{width:75,fontSize:14},timeIcon:{paddingLeft:6,paddingRight:6},spacer:{width:16}},oe=function(e){var t=e.animationName,n=e.direction,r=e.resourcesLoader,i=e.project,o=e.resourceExternalEditors,a=e.onEditWith,u=e.onDirectionUpdated,d=(0,$.Z)(),p=c.useState(!1),f=(0,N.Z)(p,2),g=f[0],x=f[1],v=n.getTimeBetweenFrames(),b=(0,ne.q)(n.getTimeBetweenFrames(),6),j=0===n.getSpritesCount(),Z=c.useContext(re.Z),k=function(e){if(e){var t=Math.max(parseFloat(e),1e-5);if(v!==t)!isNaN(t)&&(n.setTimeBetweenFrames(t),u&&u(),d())}},w=function(e){x(e)},S=o.filter((function(e){return"image"===e.kind})),P=n.getSpritesCount(),E=(0,J.U)().isMobile;return(0,y.jsx)(l.I18n,{children:function(e){var o=e.i18n;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(h.ep,{alignItems:"center",justifyContent:"flex-end",noColumnMargin:!0,children:[(0,y.jsxs)(h.pJ,{noMargin:!0,children:[!!S.length&&(0,y.jsx)(Y.Z,{label:o._(E?P?{id:"Edit"}:{id:"Create"}:P?S[0].editDisplayName:S[0].createDisplayName),icon:(0,y.jsx)(ee.Z,{}),onClick:function(){return a(o,S[0])}}),(0,y.jsx)(Y.Z,{label:(0,y.jsx)(l.Trans,{id:"Preview"}),icon:(0,y.jsx)(te.Z,{}),onClick:function(){return w(!0)},disabled:j})]}),(0,y.jsxs)(h.pJ,{noMargin:!0,alignItems:"center",children:[(0,y.jsx)(C.ZP,{title:(0,y.jsx)(l.Trans,{id:"Time between frames"}),children:(0,y.jsx)(G.Z,{style:(0,s.Z)((0,s.Z)({},ie.timeIcon),{},{color:j?Z.text.color.disabled:Z.text.color.primary})})}),(0,y.jsx)(m.Z,{id:"direction-time-between-frames",margin:"none",style:ie.timeField,type:"number",step:.005,precision:2,min:.01,max:5,commitOnBlur:!0,value:b,onChange:k,disabled:j}),(0,y.jsx)(q.Z,{checked:n.isLooping(),label:(0,y.jsx)(T.Z,{size:"body-small",color:"primary",style:{opacity:j?.5:1},children:(0,y.jsx)(l.Trans,{id:"Loop"})}),onCheck:function(e,t){return function(e){n.setLoop(!!e),d(),u&&u()}(t)},disabled:j})]})]}),g&&(0,y.jsx)(X.ZP,{title:(0,y.jsx)(l.Trans,{id:"Preview {animationName}",values:{animationName:t}}),actions:[(0,y.jsx)(X.vF,{label:(0,y.jsx)(l.Trans,{id:"Ok"}),primary:!0,onClick:function(){return w(!1)}},"ok")],onRequestClose:function(){return w(!1)},onApply:function(){return w(!1)},open:g,fullHeight:!0,flexBody:!0,children:(0,y.jsx)(K.Z,{animationName:t,resourceNames:n.getSpriteNames().toJSArray(),getImageResourceSource:function(e){return r.getResourceFullUrl(i,e,{})},isImageResourceSmooth:function(e){return(0,Q.X)(i,e)},timeBetweenFrames:v,onChangeTimeBetweenFrames:k,isLooping:n.isLooping(),hideAnimationLoader:!0})})]})}})},ae=n(70729),se=n(8278),le=n(57974),ce=n(57244),ue=n(1491),de=n(32628),pe=n(65056),fe=n(70983),he=n.n(fe),ge=n(40271),xe=n.n(ge),me=[" ","_","-","."],ve=function(e){var t=new Map;if(0===e.length)return t;var n,r=e.map((function(e){var t=he().basename(e.getName(),he().extname(e.getName())),n=t.match(/\(\d+\)$|\d+$/g),r=n&&n[0].match(/\(\d+\)$|\d+$/g),i=r?parseInt(r[0]):null,o=function(e){for(var t=0,n=0;n<e.length;n++)if(!me.includes(e.charAt(n))){t=n-1;break}for(var r=e.length-1,i=e.length-1;i>=t;i--)if(!me.includes(e.charAt(i))){r=i+1;break}return e.substring(t,r+1)}(n?t.substring(0,t.length-n[0].length):t);return me.some((function(e){return o.endsWith(e)}))&&(o=o.substring(0,o.length-1)),{resource:e,name:o,index:isNaN(i)?null:i}})),i=function(e){if(0===e.length)return"";if(1===e.length)return e[0];for(var t=!0,n=0,r=function(r){var i=e[0].charAt(r);(t=e.every((function(e){return e.length>r&&e.charAt(r)===i})))||(n=r)},i=0;t;i++)r(i);return e[0].substring(0,n)}(r.map((function(e){return e.name}))),o=(0,H.Z)(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;a.name=a.name.substring(i.length)}}catch(u){o.e(u)}finally{o.f()}var s=xe()(r,(function(e){return e.name}));for(var l in s){var c=s[l];t.set(l,c.sort((function(e,t){return(e.index||0)-(t.index||0)})).map((function(e){return e.resource})))}return t},be=n.g.gd,Ce={spritesList:{whiteSpace:"nowrap",overflowY:"hidden",flex:1},thumbnailExtraStyle:{marginLeft:5},spriteThumbnailImage:{maxWidth:100,maxHeight:100,verticalAlign:"middle"}},je=(0,z.SortableElement)((function(e){var t=e.sprite,n=e.project,r=e.resourcesLoader,i=e.selected,o=e.onSelect,a=e.onContextMenu,s=e.isFirst;return(0,y.jsx)(ae.Z,{selectable:!0,selected:i,onSelect:o,onContextMenu:a,resourceName:t.getImageName(),resourcesLoader:r,project:n,style:s?{}:Ce.thumbnailExtraStyle})})),ye=(0,z.SortableContainer)((function(e){var t=e.direction,n=e.project,r=e.resourcesLoader,i=(e.resourceManagementProps,e.selectedSprites),o=e.onSelectSprite,a=e.onOpenSpriteContextMenu,s=t.getSpritesCount(),l=s>1;return(0,y.jsx)("div",{style:Ce.spritesList,children:[].concat((0,V.Z)((0,W.mapFor)(0,s,(function(e){var s=t.getSprite(e);return l?(0,y.jsx)(je,{sprite:s,index:e,isFirst:0===e,selected:!!i[s.ptr],onContextMenu:function(e,t){return a(e,t,s)},onSelect:function(e){return o(s,e)},resourcesLoader:r,project:n},s.ptr):(0,y.jsx)(ae.Z,{selectable:!0,selected:!!i[s.ptr],onSelect:function(e){return o(s,e)},onContextMenu:function(e,t){return a(e,t,s)},resourceName:s.getImageName(),resourcesLoader:r,project:n},s.ptr)}))),[0===s&&(0,y.jsx)(ae.Z,{project:n,resourceName:"",resourcesLoader:r},"empty")])})})),Ze=function(e,t,n){var r=function(e){var t=!1,n=!1,r=e.getSpritesCount()>0?e.getSprite(0):null;return r&&(t=(0,se.ir)(r,e),n=(0,se.sL)(r,e)),{allDirectionSpritesHaveSamePoints:t,allDirectionSpritesHaveSameCollisionMasks:n}}(t),i=r.allDirectionSpritesHaveSameCollisionMasks,o=r.allDirectionSpritesHaveSamePoints,a=function(e){var t=!1,n=!1,r=(0,se.tY)(e,0,0,0).sprite;return r&&(t=(0,se.fd)(r,e),n=(0,se.Gn)(r,e)),{allObjectSpritesHaveSamePoints:t,allObjectSpritesHaveSameCollisionMasks:n}}(e),s=a.allObjectSpritesHaveSameCollisionMasks,l=a.allObjectSpritesHaveSamePoints,c=(0,se.eS)(e),u=(0,se.tY)(e,0,0,0).sprite,d=t.getSpritesCount()>0?t.getSprite(0):null;l&&u?(0,se.xw)(u,n):o&&d&&(0,se.xw)(d,n),s&&u?(0,se.Vv)(u,n):i&&d&&(0,se.Vv)(d,n),c&&n.setFullImageCollisionMask(!0)},ke=function(e,t,n,r){var i=new be.Sprite;i.setImageName(n.getName()),Ze(e,t,i),r(i),t.addSprite(i),i.delete()},we=function(e){var t=e.animations,n=e.direction,r=e.project,i=e.resourcesLoader,o=e.resourceManagementProps,a=e.editDirectionWith,u=(e.onReplaceByDirection,e.onSpriteAdded),p=e.onSpriteUpdated,f=e.onFirstSpriteUpdated,g=e.addAnimations,x=(e.onChangeName,e.objectName,e.animationName),m=c.useRef({}),v=c.useRef(null),b=(0,$.Z)(),C=(0,pe.Z)().showConfirmation,j=c.useCallback((function(e,t,r){for(var i=e;i<=t;++i){var o=n.getSprite(i);if(i===t)m.current[o.ptr]=r;else{var a=i+1,s=!!m.current[n.getSprite(a).ptr];m.current[o.ptr]=s}}}),[n]),Z=c.useCallback((function(e,t,r){for(var i=e;i>=t;--i){var o=n.getSprite(i);if(i===t)m.current[o.ptr]=r;else{var a=i-1,s=!!m.current[n.getSprite(a).ptr];m.current[o.ptr]=s}}}),[n]),k=c.useCallback((function(e){var t=e.oldIndex,r=e.newIndex;if(t!==r){var i=!!m.current[n.getSprite(t).ptr];n.moveSprite(t,r),t<r?j(t,r,i):Z(t,r,i),b(),p&&p(),0!==t&&0!==r||f&&f()}}),[n,b,p,f,Z,j]),w=c.useCallback(function(){var e=(0,B.Z)((0,_.Z)().mark((function e(i){var a,s,l,c,d,h,x,m,v,C,j,y;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.getSpritesCount(),e.next=3,o.onChooseResource({initialSourceName:i.name,multiSelection:!0,resourceKind:"image"});case 3:if((s=e.sent).forEach((function(e){(0,le.r3)(r,e),r.getResourcesManager().addResource(e)})),0===a&&s.length>1)if((l=ve(s)).size>1)g(l);else{c=(0,H.Z)(l.values());try{for(c.s();!(d=c.n()).done;){h=d.value,x=(0,H.Z)(h);try{for(x.s();!(m=x.n()).done;)v=m.value,ke(t,n,v,u)}catch(Z){x.e(Z)}finally{x.f()}}}catch(Z){c.e(Z)}finally{c.f()}}else{C=(0,H.Z)(s);try{for(C.s();!(j=C.n()).done;)y=j.value,ke(t,n,y,u)}catch(Z){C.e(Z)}finally{C.f()}}return s.forEach((function(e){return e.delete()})),b(),e.next=10,o.onFetchNewlyAddedResources();case 10:s.length&&p&&p(),0===a&&f&&f();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,o,b,p,f,r,g,t,u]),T=c.useCallback((0,B.Z)((0,_.Z)().mark((function e(){var r,i,o,a,s,l,c,u;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=m.current,i=t.getAnimation(0).getDirection(0).getSprite(0).ptr,o=!!r[i],a=(0,se.__)(t),s=Object.keys(r).length===a,l=n.getSpritesCount()>0?n.getSprite(0):null,c=!t.adaptCollisionMaskAutomatically()&&l&&!l.isFullImageCollisionMask(),!(u=s&&c)){e.next=14;break}return e.next=11,C({title:{id:"Remove the sprite"},message:{id:"You are about to remove the last sprite of this object, which has a custom collision mask. The custom collision mask will be lost. Are you sure you want to continue?"},confirmButtonLabel:{id:"Remove"},dismissButtonLabel:{id:"Cancel"}});case 11:if(e.sent){e.next=14;break}return e.abrupt("return");case 14:(0,W.mapFor)(0,t.getAnimationsCount(),(function(e){var n=t.getAnimation(e);(0,se.lg)(n,r)})),m.current={},b(),p&&p(),o&&f&&f(),u&&t.setAdaptCollisionMaskAutomatically(!0);case 20:case"end":return e.stop()}}),e)}))),[p,f,t,b,C,n]),S=c.useCallback((function(){var e=m.current;(0,W.mapFor)(0,t.getAnimationsCount(),(function(n){var r=t.getAnimation(n);(0,se.DJ)(r,e)})),m.current={},b(),p&&p()}),[p,t,b]),P=c.useCallback((function(e,t){m.current=(0,s.Z)((0,s.Z)({},m.current),{},(0,U.Z)({},e.ptr,t)),b()}),[b]),E=c.useCallback((function(e){m.current=(0,U.Z)({},e.ptr,!0),b()}),[b]),I=c.useCallback((function(e,t,n){m.current[n.ptr]||E(n),v.current&&v.current.open(e,t)}),[E]),M=o.getStorageProvider(),L=o.resourceSources.filter((function(e){return"image"===e.kind})).filter((function(e){var t=e.onlyForStorageProvider;return!t||t===M.internalName}));return(0,y.jsxs)(h.ak,{noMargin:!0,children:[(0,y.jsx)(oe,{animationName:x,direction:n,resourcesLoader:i,project:r,resourceExternalEditors:o.resourceExternalEditors,onEditWith:function(e,t){return a(e,t,n)},onDirectionUpdated:p}),(0,y.jsxs)(h.ep,{noMargin:!0,expand:!0,alignItems:"center",children:[(0,y.jsx)(ye,{resourcesLoader:i,direction:n,project:r,onSortEnd:k,onAddSprite:w,resourceManagementProps:o,selectedSprites:m.current,onSelectSprite:P,onOpenSpriteContextMenu:I,helperClass:"sortable-helper",lockAxis:"x",axis:"x"}),(0,y.jsx)(de.Z,{ref:v,buildMenuTemplate:function(e){return[{label:e._({id:"Delete selection"}),click:T},{label:e._({id:"Duplicate selection"}),click:S}]}}),(0,y.jsx)(d.sg,{noMargin:!0,children:(0,y.jsx)(ce.Z,{onClick:function(){w(L[0])},disabled:0===L.length,label:(0,y.jsx)(l.Trans,{id:"Add a sprite"}),icon:(0,y.jsx)(ue.Z,{}),primary:!0,buildMenuTemplate:function(e){var t=o.getStorageProvider();return o.resourceSources.filter((function(e){return"image"===e.kind})).filter((function(e){var n=e.onlyForStorageProvider;return!n||n===t.internalName})).map((function(t){return{label:e._(t.displayName),click:function(){return w(t)}}}))}})})]})]})},Te=n(51598),Se=n(68196),Pe=n(53162),Ee=n(43228),Ie=n(62572),Me=n(65752),Le=n(85076),Ae=n(30141),Fe=n.g.gd,Oe=function(e){var t=e.lastIndexOf(".");return t<0?e:e.substring(0,t)},Re=(0,Ee.x)("sprite-animations-list"),De={rowContainer:{display:"flex",flexDirection:"column",marginTop:5},rowContent:{display:"flex",flex:1,alignItems:"center"},animationLine:{marginBottom:16}},_e=c.forwardRef((function(e,t){var n=e.animations,r=e.project,i=e.layout,o=e.object,a=e.objectName,u=e.resourceManagementProps,p=e.onSizeUpdated,f=e.onObjectUpdated,h=e.isAnimationListLocked,g=void 0!==h&&h,v=e.scrollView,b=e.onCreateMatchingSpriteCollisionMask,C=c.useState(!1),j=(0,N.Z)(C,2),Z=j[0],k=j[1],w=c.useRef(null),S=(0,$.Z)(),P=(0,J.U)().isMobile,E=(0,pe.Z)().showConfirmation,I=c.useState(null),M=(0,N.Z)(I,2),L=M[0],A=M[1],F=c.useRef(null);c.useEffect((function(){v.current&&F.current&&L&&(v.current.scrollTo(F.current),A(null),F.current=null)}),[L,v]);var O=(0,pe.Z)().showDeleteConfirmation,R=c.useRef(null),D=c.useContext(re.Z),V=c.useState({}),z=(0,N.Z)(V,2),G=z[0],Y=z[1],q=c.useCallback((function(e){var t=(0,se.Ng)(n);t&&(e.setFullImageCollisionMask(t.isFullImageCollisionMask()),e.setCustomCollisionMask(t.getCustomCollisionMask()),S())}),[n,S]),X=c.useCallback((function(e){var t=R.current;null!==t&&(Y({}),n.moveAnimation(t,e>t?e-1:e),0!==t&&0!==e||!n.adaptCollisionMaskAutomatically()||b(),S())}),[n,S,b]),K=c.useCallback((function(e){n.adaptCollisionMaskAutomatically()&&q(e)}),[q,n]),Q=c.useCallback((function(e){Y({});var t,r=(0,H.Z)(e);try{for(r.s();!(t=r.n()).done;){var i=(0,N.Z)(t.value,2),o=i[0],a=i[1],s=new Fe.Animation;s.setName(o),s.setDirectionsCount(1);var l,c=s.getDirection(0),u=(0,H.Z)(a);try{for(u.s();!(l=u.n()).done;){var d=l.value;ke(n,c,d,K)}}catch(h){u.e(h)}finally{u.f()}n.addAnimation(s),s.delete()}}catch(h){r.e(h)}finally{r.f()}S(),p(),f&&f()}),[S,f,p,K,n]),te=c.useCallback((function(){Y({});var e=new Fe.Animation;e.setDirectionsCount(1),n.addAnimation(e),e.delete(),S(),p(),f&&f(),setTimeout((function(){v.current&&v.current.scrollToBottom()}),100)}),[n,S,p,f,v]);c.useImperativeHandle(t,(function(){return{forceUpdate:S,addAnimation:te}}));var ne=c.useCallback(function(){var e=(0,B.Z)((0,_.Z)().mark((function e(t,r){var i,o,a,s,l,c;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,se.__)(n),o=n.getAnimation(t).getDirection(0).getSpritesCount()===i,a=(0,se.tY)(n,t,0,0).sprite,s=!n.adaptCollisionMaskAutomatically()&&a&&!a.isFullImageCollisionMask(),c=(l=o&&s)?{id:"Are you sure you want to remove this animation? You will lose the custom collision mask you have set for this object."}:{id:"Are you sure you want to remove this animation?"},e.next=8,O({title:{id:"Remove the animation"},message:c,confirmButtonLabel:{id:"Remove"},dismissButtonLabel:{id:"Cancel"}});case 8:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:Y({}),n.removeAnimation(t),S(),p(),0===t&&n.adaptCollisionMaskAutomatically()&&b(),l&&n.setAdaptCollisionMaskAutomatically(!0),f&&f();case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[S,f,p,O,n,b]),ie=c.useCallback((function(e,t){var a=n.getAnimation(e),c=a.getName();if(c!==t){Y({});var u=(0,W.mapFor)(0,n.getAnimationsCount(),(function(t){return t===e?void 0:n.getAnimation(t).getName()})).filter(Boolean);""!==t&&u.some((function(e){return e===t}))?Y((0,s.Z)((0,s.Z)({},G),{},(0,U.Z)({},e,(0,y.jsx)(l.Trans,{id:"The animation name {newName} is already taken",values:{newName:t}})))):(a.setName(t),i&&o&&Fe.WholeProjectRefactorer.renameObjectAnimation(r,i,o,c,t),S(),f&&f())}}),[S,i,G,o,f,r,n]),oe=c.useCallback((function(e,t,r){n.getAnimation(e).setDirection(r,t),S(),f&&f()}),[S,f,n]),ae=u.getStorageProvider(),ce=u.resourceSources.filter((function(e){return"image"===e.kind})).filter((function(e){var t=e.onlyForStorageProvider;return!t||t===ae.internalName})),ue=c.useCallback((function(){n.adaptCollisionMaskAutomatically()&&b()}),[b,n]),de=c.useCallback((0,B.Z)((0,_.Z)().mark((function e(){var t;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.onChooseResource({initialSourceName:ce[0].name,multiSelection:!0,resourceKind:"image"});case 2:if(0!==(t=e.sent).length){e.next=5;break}return e.abrupt("return");case 5:return t.forEach((function(e){(0,le.r3)(r,e),r.getResourcesManager().addResource(e)})),Q(ve(t)),t.forEach((function(e){return e.delete()})),S(),e.next=11,u.onFetchNewlyAddedResources();case 11:ue(),f&&f();case 13:case"end":return e.stop()}}),e)}))),[u,ce,Q,S,ue,f,r]),fe=c.useCallback(function(){var e=(0,B.Z)((0,_.Z)().mark((function e(t,i,o,s,l){var c,d,p,h,g,m,v,b,C;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.current=new AbortController,c=w.current.signal,d=(0,W.mapFor)(0,o.getSpritesCount(),(function(e){return o.getSprite(e).getImageName()})),p=n.getAnimation(s),h=p.getName(),e.prev=5,k(!0),e.next=9,i.edit({project:r,i18n:t,getStorageProvider:u.getStorageProvider,resourceManagementProps:u,resourceNames:d,extraOptions:{singleFrame:!1,fps:o.getTimeBetweenFrames()>0?1/o.getTimeBetweenFrames():1,name:h||d[0]&&Oe(d[0])||a,isLooping:o.isLooping(),existingMetadata:o.getMetadata()},signal:c});case 9:if(g=e.sent,k(!1),g){e.next=13;break}return e.abrupt("return");case 13:m=g.resources,v=g.newMetadata,b=g.newName,(C=new Fe.Direction).setTimeBetweenFrames(o.getTimeBetweenFrames()),C.setLoop(o.isLooping()),m.forEach((function(e){var t=new Fe.Sprite;if(t.setImageName(e.name),void 0!==e.originalIndex&&null!==e.originalIndex){var r=o.getSprite(e.originalIndex);(0,se.xw)(r,t),(0,se.Vv)(r,t)}else Ze(n,o,t);K(t),C.addSprite(t),t.delete()})),v&&C.setMetadata(JSON.stringify(v)),x.Z.burstUrlsCacheForResources(r,d),oe(s,l,C),b&&ie(s,b),C.delete(),f&&f(),0===s&&ue(),e.next=31;break;case 27:e.prev=27,e.t0=e.catch(5),"UserCancellationError"!==e.t0.name&&(console.error("An exception was thrown when launching or reading resources from the external editor:",e.t0),(0,Ae.gR)({message:"There was an error while using the external editor. Try with another resource and if this persists, please report this as a bug.",rawError:e.t0,errorId:"external-editor-error"})),k(!1);case 31:return e.prev=31,w.current=null,e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[5,27,31,34]])})));return function(t,n,r,i,o){return e.apply(this,arguments)}}(),[n,r,u,a,oe,f,K,ie,ue]),he=c.useCallback((0,B.Z)((0,_.Z)().mark((function e(){return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({title:{id:"Cancel editing"},message:{id:"You will lose any progress made with the external editor. Do you wish to cancel?"},confirmButtonLabel:{id:"Cancel edition"},dismissButtonLabel:{id:"Continue editing"}});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:w.current?w.current.abort():console.error("Cannot cancel editing with external editor, abort controller is missing.");case 6:case"end":return e.stop()}}),e)}))),[E]),ge=c.useCallback(function(){var e=(0,B.Z)((0,_.Z)().mark((function e(t,r){var i;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te(),i=n.getAnimation(0).getDirection(0),e.next=4,fe(t,r,i,0,0);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[te,fe,n]),xe=u.resourceExternalEditors.filter((function(e){return"image"===e.kind}));return(0,y.jsx)(l.I18n,{children:function(e){var t=e.i18n;return(0,y.jsxs)(y.Fragment,{children:[0===n.getAnimationsCount()&&xe.length>0?(0,y.jsx)(d.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,y.jsx)(Se.$,{title:(0,y.jsx)(l.Trans,{id:"Add your first animation"}),description:(0,y.jsx)(l.Trans,{id:"Animations are a sequence of images."}),actionLabel:(0,y.jsx)(l.Trans,{id:"Import images"}),secondaryActionLabel:t._(P?{id:"Draw"}:xe[0].createDisplayName),secondaryActionIcon:(0,y.jsx)(ee.Z,{}),helpPagePath:"/objects/sprite",tutorialId:"intermediate-changing-animations",onAction:function(){de()},onSecondaryAction:function(){ge(t,xe[0])}})}):(0,y.jsx)(y.Fragment,{children:(0,W.mapFor)(0,n.getAnimationsCount(),(function(e){var i=n.getAnimation(e),o=i.getName(),c=L===o?F:null;return(0,y.jsx)(Re,{beginDrag:function(){return R.current=e,{}},canDrag:function(){return!0},canDrop:function(){return!0},drop:function(){X(e)},children:function(p){var h=p.connectDragSource,v=p.connectDropTarget,b=p.isOver,C=p.canDrop;return v((0,y.jsxs)("div",{style:De.rowContainer,children:[g&&(0,y.jsx)(d.sg,{expand:!0,noMargin:!0,children:(0,y.jsx)(T.Z,{size:"block-title",children:o})}),!g&&b&&(0,y.jsx)(Me.Z,{canDrop:C}),!g&&(0,y.jsxs)("div",{ref:c,style:(0,s.Z)((0,s.Z)({},De.rowContent),{},{backgroundColor:D.list.itemsBackgroundColor}),children:[(0,y.jsxs)(d.x1,{noMargin:!0,expand:!0,alignItems:"center",children:[h((0,y.jsx)("span",{children:(0,y.jsx)(d.sg,{children:(0,y.jsx)(Ie.V,{})})})),(0,y.jsx)(T.Z,{noMargin:!0,noShrink:!0,children:(0,y.jsx)(l.Trans,{id:"Animation #{animationIndex}",values:{animationIndex:e}})}),(0,y.jsx)(d.LZ,{}),(0,y.jsx)(m.Z,{margin:"none",commitOnBlur:!0,errorText:G[e],translatableHintText:{id:"Optional animation name"},value:i.getName(),onChange:function(t){return ie(e,t)},fullWidth:!0}),(0,y.jsx)(Te.Z,{size:"small",onClick:function(){return ne(e,t)},children:(0,y.jsx)(Pe.Z,{})})]}),(0,y.jsx)(d.LZ,{})]}),(0,y.jsx)("div",{style:De.animationLine,children:(0,y.jsx)(d.sg,{expand:!0,noMargin:!0,children:(0,W.mapFor)(0,i.getDirectionsCount(),(function(t){var s=i.getDirection(t);return(0,y.jsx)(we,{animations:n,direction:s,project:r,resourcesLoader:x.Z,resourceManagementProps:u,editDirectionWith:function(n,r,i){return fe(n,r,i,e,t)},onReplaceByDirection:function(n){return oe(e,t,n)},objectName:a,animationName:o,onChangeName:function(t){return ie(e,t)},onSpriteUpdated:f,onFirstSpriteUpdated:0===e?ue:void 0,onSpriteAdded:K,addAnimations:Q},t)}))})})]},e))}},e)}))}),Z&&(0,y.jsx)(Le.G,{onClose:he})]})}})})),Be=_e,Ne=n(67835),Ue=n(32484),He=n(4076),Ve=n(86578),ze=n(11374),We=n(79431),Ge=n(2066),Ye=n(45987),qe={nameColumn:{width:"40%"},coordinateColumn:{width:96},toolColumn:{width:24,height:32}},Xe=["pointX","pointY"],Ke=function(e){var t=e.pointX,n=e.pointY,r=(0,Ye.Z)(e,Xe),i=c.useContext(re.Z);return(0,y.jsxs)(ze.SC,{style:{backgroundColor:r.selected?i.listItem.selectedBackgroundColor:i.list.itemsBackgroundColor},onClick:function(){return r.onClick(r.pointName)},onPointerEnter:function(){return r.onPointerEnter(r.pointName)},onPointerLeave:r.onPointerLeave,children:[(0,y.jsx)(ze.Nn,{style:qe.nameColumn,children:(0,y.jsx)(m.Z,{margin:"none",inputStyle:r.selected?{color:i.listItem.selectedTextColor}:void 0,value:r.pointName,id:r.pointName,fullWidth:!0,errorText:r.nameError?"This name is already taken":void 0,disabled:!r.onChangePointName,commitOnBlur:!0,onChange:r.onChangePointName||function(e){}})}),(0,y.jsx)(ze.Nn,{style:qe.coordinateColumn,padding:"none",children:(0,y.jsx)(d.sg,{children:(0,y.jsx)(m.Z,{margin:"none",inputStyle:r.selected?{color:i.listItem.selectedTextColor}:void 0,value:(0,ne.R)(t,4).toString(),type:"number",step:.5,id:"point-x",onChange:function(e){var t=parseFloat(e);isNaN(t)||r.onChangePointX(t)},onBlur:function(e){r.onChangePointX(parseFloat(e.currentTarget.value)||0)},disabled:r.isAutomatic})})}),(0,y.jsx)(ze.Nn,{style:qe.coordinateColumn,padding:"none",children:(0,y.jsx)(d.sg,{children:(0,y.jsx)(m.Z,{margin:"none",inputStyle:r.selected?{color:i.listItem.selectedTextColor}:void 0,value:(0,ne.R)(n,4).toString(),type:"number",step:.5,id:"point-y",onChange:function(e){var t=parseFloat(e);isNaN(t)||r.onChangePointY(t)},onBlur:function(e){r.onChangePointY(parseFloat(e.currentTarget.value)||0)},disabled:r.isAutomatic})})}),(0,y.jsxs)(ze.Nn,{style:qe.toolColumn,children:[!!r.onRemove&&(0,y.jsx)(Te.Z,{size:"small",onClick:r.onRemove,children:(0,y.jsx)(Pe.Z,{})}),!!r.onEdit&&(0,y.jsx)(Te.Z,{size:"small",onClick:r.onEdit,children:(0,y.jsx)(ee.Z,{})})]})]})},Je=n.g.gd,Qe=function(e){var t=c.useState({}),n=(0,N.Z)(t,2),r=n[0],i=n[1],o=e.pointsContainer,a=e.onHoverPoint,l=(0,$.Z)(),u=function(){l(),e.onPointsUpdated()},d=c.useCallback((function(){return a(null)}),[a]),p=o.getAllNonDefaultPoints(),f=(0,W.mapVector)(p,(function(t,n){var a=t.getName();return(0,y.jsx)(Ke,{pointX:t.getX(),pointY:t.getY(),onChangePointX:function(e){return function(e,t){e.setX(t),u()}(t,e)},onChangePointY:function(e){return function(e,t){e.setY(t),u()}(t,e)},pointName:a,selected:a===e.selectedPointName,nameError:r[a],onChangePointName:function(n){if(a!==n&&n){var r=!0;if(o.hasPoint(n))r=!1;else{var l=t.getName();t.setName(n),e.onRenamedPoint(l,n),e.selectedPointName===a&&e.onSelectPoint(n),u()}i((function(e){return(0,s.Z)((0,s.Z)({},e),{},(0,U.Z)({},a,!r))}))}},onPointerEnter:e.onHoverPoint,onPointerLeave:d,onClick:e.onSelectPoint,onRemove:function(){Ge.ZP.showConfirmDialog("Are you sure you want to remove this point? This can't be undone.")&&(o.delPoint(a),u())}},"point-".concat(t.ptr))})),h=o.getOrigin(),g=o.getCenter(),x=(0,y.jsx)(Ke,{pointName:"Origin",pointX:h.getX(),pointY:h.getY(),onChangePointX:function(e){o.getOrigin().setX(e),u()},onChangePointY:function(e){o.getOrigin().setY(e),u()},onPointerEnter:e.onHoverPoint,onPointerLeave:d,onClick:e.onSelectPoint,selected:"Origin"===e.selectedPointName},"origin-point-row"),m=o.isDefaultCenterPoint(),v=(0,y.jsx)(Ke,{pointName:"Center",isAutomatic:m,pointX:m?e.spriteSize[0]/2:g.getX(),pointY:m?e.spriteSize[1]/2:g.getY(),onChangePointX:function(e){o.getCenter().setX(e),u()},onChangePointY:function(e){o.getCenter().setY(e),u()},onPointerEnter:e.onHoverPoint,onPointerLeave:d,onClick:e.onSelectPoint,selected:"Center"===e.selectedPointName,onEdit:o.isDefaultCenterPoint()?function(){o.setDefaultCenterPoint(!1),u()}:null,onRemove:o.isDefaultCenterPoint()?null:function(){o.setDefaultCenterPoint(!0),u()}},"center-point-row");return(0,y.jsx)(ze.RM,{children:[x,v].concat((0,V.Z)(f))})},$e=function(e){return(0,y.jsxs)(d.sg,{expand:!0,children:[(0,y.jsxs)(ze.iA,{children:[(0,y.jsx)(ze.xD,{children:(0,y.jsxs)(ze.SC,{children:[(0,y.jsx)(ze.bY,{style:qe.nameColumn,children:(0,y.jsx)(l.Trans,{id:"Point name"})}),(0,y.jsx)(ze.bY,{style:qe.coordinateColumn,padding:"none",children:(0,y.jsx)(d.sg,{children:"X"})}),(0,y.jsx)(ze.bY,{style:qe.coordinateColumn,padding:"none",children:(0,y.jsx)(d.sg,{children:"Y"})}),(0,y.jsx)(ze.bY,{style:qe.toolColumn})]})}),(0,y.jsx)(Qe,{pointsContainer:e.pointsContainer,onHoverPoint:e.onHoverPoint,onSelectPoint:e.onSelectPoint,selectedPointName:e.selectedPointName,onPointsUpdated:e.onPointsUpdated,onRenamedPoint:e.onRenamedPoint,spriteSize:e.spriteSize})]}),(0,y.jsx)(d.LZ,{}),(0,y.jsx)(d.x1,{alignItems:"center",justifyContent:"center",children:(0,y.jsx)(Ue.Z,{primary:!0,icon:(0,y.jsx)(ue.Z,{}),label:(0,y.jsx)(l.Trans,{id:"Add a point"}),onClick:function(){var t=(0,We.Z)("Point",(function(t){return e.pointsContainer.hasPoint(t)})),n=new Je.Point(t);e.pointsContainer.addPoint(n),n.delete(),e.onSelectPoint(t),e.onPointsUpdated()}})})]})},et=n(16792),tt=1,nt=2,rt=3,it=function(e,t){return e===nt?"Origin":e===rt?"Center":t.getName()},ot=function(e){var t=c.useRef(null),n=c.useState({draggedPoint:null,draggedPointKind:null}),r=(0,N.Z)(n,2),i=r[0],o=r[1],a=e.pointsContainer,l=e.imageWidth,u=e.imageHeight,d=e.imageOffsetTop,p=e.imageOffsetLeft,f=e.imageZoomFactor,h=e.highlightedPointName,g=e.selectedPointName,x=e.onClickPoint,m=e.onPointsUpdated,v=e.forcedCursor,b=e.deactivateControls;b&&(i.draggedPoint||i.draggedPointKind)&&o({draggedPoint:null,draggedPointKind:null});var C=(0,$.Z)(),j=c.useCallback((function(e){if(!t.current)return null;var n=t.current.createSVGPoint();n.x=e.clientX,n.y=e.clientY;var r=t.current.getScreenCTM().inverse(),i=n.matrixTransform(r);return[i.x,i.y]}),[]),Z=c.useCallback((function(e,t){i.draggedPoint||o({draggedPoint:e,draggedPointKind:t})}),[i.draggedPoint]),k=c.useCallback((function(){var e;i.draggedPoint&&((e=i.draggedPoint).setX(Math.round(2*e.getX())/2),e.setY(Math.round(2*e.getY())/2),m(),i.draggedPointKind&&i.draggedPoint&&x(it(i.draggedPointKind,i.draggedPoint))),o({draggedPoint:null,draggedPointKind:null})}),[i.draggedPoint,i.draggedPointKind,m,x]),w=c.useCallback((function(t){var n=j(t);if(n){var r=i.draggedPoint,o=i.draggedPointKind;if(r&&o){var a=n[0]/f,s=n[1]/f;o===rt&&e.pointsContainer.setDefaultCenterPoint(!1),r.setX(a),r.setY(s),C()}}}),[C,j,f,e.pointsContainer,i]),T=c.useCallback((function(e){var t=e.x,n=e.y,r=e.kind,i=e.point,o=it(r,i),a={cursor:v||"move"};return(0,y.jsxs)(c.Fragment,{children:[(0,y.jsx)("line",{x1:"0",y1:-7,x2:"0",y2:7,style:{stroke:"white",strokeWidth:1,transform:"translate(".concat(t,"px, ").concat(n,"px)")}}),(0,y.jsx)("line",{x1:-7,y1:"0",x2:7,y2:"0",style:{stroke:"white",strokeWidth:1,transform:"translate(".concat(t,"px, ").concat(n,"px)")}}),(0,y.jsx)("circle",(0,s.Z)((0,s.Z)({onPointerDown:function(){return Z(i,r)}},(0,et.Y)({draggable:"true"})),{},{fill:o===h?"rgba(0,0,0,0.75)":o===g?"rgba(107,175,255,0.6)":"rgba(255,133,105,0.6)",stroke:o===h?"white":void 0,strokeWidth:2,cx:t,cy:n,r:7,style:a}))]},"point-".concat(o))}),[v,h,Z,g]),S=a.isDefaultCenterPoint(),P=c.useCallback((function(e){if("Origin"===e){var t=a.getOrigin();return T({x:t.getX()*f,y:t.getY()*f,kind:nt,point:t})}if("Center"===e){var n=a.getCenter();return T({x:(S?l/2:n.getX())*f,y:(S?u/2:n.getY())*f,kind:rt,point:n})}var r=a.getPoint(e);return T({x:r.getX()*f,y:r.getY()*f,kind:tt,point:r})}),[S,u,l,f,a,T]),E=v?{cursor:v}:{},I=(0,s.Z)({position:"relative",width:"100%",height:"100%"},E),M=(0,s.Z)({position:"absolute",top:d||0,left:p||0,width:l*f,height:u*f,overflow:"visible"},E),L=a.getAllNonDefaultPoints(),A=[].concat((0,V.Z)((0,W.mapVector)(L,(function(e,t){return e.getName()}))),["Origin","Center"]).filter((function(e){return e!==g&&e!==h}));return(0,y.jsx)("div",{style:I,onPointerMove:b?null:w,onPointerUp:b?null:k,children:(0,y.jsxs)("svg",{style:M,ref:t,children:[A.map((function(e){return P(e)})),h&&g&&g===h?null:g?P(g):null,h&&P(h)]})})},at=n(81683),st=n(90242),lt=n(57597),ct=function(e){var t=e.animations,n=e.animationIndex,r=e.directionIndex,i=e.spriteIndex,o=e.sameForAllAnimations,a=e.sameForAllSprites,s=e.chooseAnimation,u=e.chooseDirection,d=e.chooseSprite,p=e.setSameForAllAnimations,f=e.setSameForAllSprites,g=e.setSameForAllAnimationsLabel,x=e.setSameForAllSpritesLabel,m=e.hideControlsForSprite,v=(0,se.tY)(t,n,r,i),b=v.animation,C=v.direction,j=v.sprite,Z=!C||!C.getSpritesCount()||!j||m&&m(j);return(0,y.jsxs)(c.Fragment,{children:[(0,y.jsxs)(h.ep,{noColumnMargin:!0,children:[(0,y.jsx)(at.Z,{fullWidth:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Animation"}),value:n,onChange:function(e,t,n){return s(parseInt(n,10)||0)},children:(0,W.mapFor)(0,t.getAnimationsCount(),(function(e){var n=t.getAnimation(e);return(0,y.jsx)(st.Z,{value:e,label:{id:"Animation #{i} {0}",values:{0:n.getName(),i:e}}},e)}))}),b&&b.getDirectionsCount()>1&&(0,y.jsx)(at.Z,{fullWidth:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Direction"}),value:r,onChange:function(e,t,n){return u(parseInt(n,10)||0)},children:(0,W.mapFor)(0,b.getDirectionsCount(),(function(e){return(0,y.jsx)(st.Z,{value:e,label:{id:"Direction #{i}",values:{i:e}}},e)}))}),C&&(0,y.jsx)(at.Z,{fullWidth:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Frame"}),value:i,onChange:function(e,t,n){return d(parseInt(n,10)||0)},children:(0,W.mapFor)(0,C.getSpritesCount(),(function(e){return(0,y.jsx)(st.Z,{value:e,label:{id:"Frame #{i}",values:{i:e}}},e)}))})]}),!Z&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(lt.Z,{label:g,labelPosition:"right",toggled:o,onToggle:function(e,t){return p(t)}}),(0,y.jsx)(lt.Z,{label:x,labelPosition:"right",toggled:a,onToggle:function(e,t){return f(t)}})]})]})},ut=n(29459),dt=n(2632),pt=n(20914),ft={leftContainer:{display:"flex",overflow:"hidden",flexDirection:"column"},rightContainer:{display:"flex"}},ht={direction:"row",first:"preview",second:"properties",splitPercentage:66.67},gt={direction:"column",first:"preview",second:"properties",splitPercentage:50},xt=function(e){var t=e.animations,n=e.resourcesLoader,r=e.project,i=e.onPointsUpdated,o=e.onRenamedPoint,a=c.useState(0),u=(0,N.Z)(a,2),p=u[0],f=u[1],h=c.useState(0),g=(0,N.Z)(h,2),x=g[0],m=g[1],v=c.useState(0),b=(0,N.Z)(v,2),C=b[0],j=b[1],Z=c.useState(null),k=(0,N.Z)(Z,2),w=k[0],T=k[1],S=c.useState(null),P=(0,N.Z)(S,2),E=P[0],I=P[1],M=c.useState([0,0]),L=(0,N.Z)(M,2),A=L[0],F=L[1],O=(0,$.Z)(),R=(0,pe.Z)().showConfirmation,D=(0,se.tY)(t,p,x,C),U=D.animation,H=D.sprite,V=c.useState(!!H&&(0,se.fd)(H,t)),z=(0,N.Z)(V,2),G=z[0],Y=z[1],q=c.useState(!(!H||!U)&&(0,se.Mr)(H,U)),X=(0,N.Z)(q,2),K=X[0],ee=X[1],te=c.useCallback((function(e,n){U&&H&&(e?(0,W.mapFor)(0,t.getAnimationsCount(),(function(e){var n=t.getAnimation(e);(0,se.c)(H,n)})):n&&(0,se.c)(H,U)),O(),i&&i()}),[U,H,t,O,i]),ne=function(e){f(e),m(0),j(0)},re=function(e){m(e),j(0)},ie=function(e){j(e)};c.useEffect((function(){H&&U&&ee((0,se.Mr)(H,U))}),[U,H]);var oe=c.useCallback(function(){var e=(0,B.Z)((0,_.Z)().mark((function e(t){var n,r;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,R({title:{id:"Use same points for all animations?"},message:{id:"Having the same points for all animations will erase and reset all the other animations points. This can't be undone. Are you sure you want to share these points amongst all the animations of the object?"},confirmButtonLabel:{id:"Use same points"},dismissButtonLabel:{id:"Cancel"}});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:r=t||K,Y(n=t),ee(r),te(n,r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[K,te,R]),ae=c.useCallback(function(){var e=(0,B.Z)((0,_.Z)().mark((function e(t){var n,r;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,R({title:{id:"Use same points for all frames?"},message:{id:"Having the same points for all frames will erase and reset all the other frames points. This can't be undone. Are you sure you want to share these points amongst all the frames of the animation?"},confirmButtonLabel:{id:"Use same points"},dismissButtonLabel:{id:"Cancel"}});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:r=t,Y(n=t&&G),ee(r),te(n,r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[G,te,R]),le=(0,J.U)().isMobile?gt:ht;if(!t.getAnimationsCount())return null;var ce=H?H.getImageName():"",ue={preview:{type:"primary",noTitleBar:!0,noSoftKeyboardAvoidance:!0,renderEditor:function(){return(0,y.jsx)(pt.Z,{background:"medium",style:ft.leftContainer,square:!0,children:(0,y.jsx)(d.sg,{noMargin:!0,expand:!0,useFullHeight:!0,children:(0,y.jsx)(Q.Z,{resourceName:ce,imageResourceSource:n.getResourceFullUrl(r,ce,{}),isImageResourceSmooth:(0,Q.X)(r,ce),onImageSize:F,renderOverlay:function(e){return H&&(0,y.jsx)(ot,(0,s.Z)((0,s.Z)({},e),{},{pointsContainer:H,onPointsUpdated:function(){return te(G,K)},selectedPointName:w,highlightedPointName:E,onClickPoint:T}))}})})})}},properties:{type:"secondary",noTitleBar:!0,noSoftKeyboardAvoidance:!0,renderEditor:function(){return(0,y.jsx)(pt.Z,{background:"medium",style:ft.rightContainer,square:!0,children:(0,y.jsxs)(d.sg,{noMargin:!0,expand:!0,children:[(0,y.jsx)(d.x1,{children:(0,y.jsx)(d.sg,{expand:!0,children:(0,y.jsx)(ct,{animations:t,animationIndex:p,directionIndex:x,spriteIndex:C,chooseAnimation:ne,chooseDirection:re,chooseSprite:ie,sameForAllAnimations:G,sameForAllSprites:K,setSameForAllAnimations:oe,setSameForAllSprites:ae,setSameForAllAnimationsLabel:(0,y.jsx)(l.Trans,{id:"Share same points for all animations"}),setSameForAllSpritesLabel:(0,y.jsx)(l.Trans,{id:"Share same points for all sprites of this animation"})})})}),(0,y.jsxs)(dt.Z,{children:[!!H&&(0,y.jsx)($e,{pointsContainer:H,onPointsUpdated:function(){return te(G,K)},selectedPointName:w,onHoverPoint:I,onSelectPoint:T,onRenamedPoint:o,spriteSize:A}),!H&&(0,y.jsx)(Ve.Z,{children:(0,y.jsx)(l.Trans,{id:"Choose an animation and frame to edit the points"})})]})]})})}}};return(0,y.jsx)("div",{style:{flex:1},children:(0,y.jsx)(ut.Z,{editors:ue,initialNodes:le})})},mt={coordinateColumn:{width:96},toolColumn:{width:24}},vt=["verticeX","verticeY","parentVerticeId"],bt=function(e){var t=e.verticeX,n=e.verticeY,r=(e.parentVerticeId,(0,Ye.Z)(e,vt)),i=c.useContext(re.Z);return(0,y.jsxs)(ze.SC,{style:{backgroundColor:r.selected?i.listItem.selectedBackgroundColor:i.list.itemsBackgroundColor},onPointerEnter:r.onPointerEnter,onPointerLeave:r.onPointerLeave,onClick:r.onClick,children:[(0,y.jsx)(ze.Nn,{style:mt.coordinateColumn,children:(0,y.jsx)(m.Z,{margin:"none",inputStyle:r.selected?{color:i.listItem.selectedTextColor}:void 0,value:(0,ne.R)(t,4).toString(),type:"number",step:.5,id:"vertice-x",onChange:function(e){var t=parseFloat(e);isNaN(t)||r.onChangeVerticeX(t)},onBlur:function(e){r.onChangeVerticeX(parseFloat(e.currentTarget.value)||0)}})}),(0,y.jsx)(ze.Nn,{style:mt.coordinateColumn,children:(0,y.jsx)(m.Z,{margin:"none",inputStyle:r.selected?{color:i.listItem.selectedTextColor}:void 0,value:(0,ne.R)(n,4).toString(),type:"number",step:.5,id:"vertice-y",onChange:function(e){var t=parseFloat(e);isNaN(t)||r.onChangeVerticeY(t)},onBlur:function(e){r.onChangeVerticeY(parseFloat(e.currentTarget.value)||0)}})}),(0,y.jsx)(ze.Nn,{style:mt.toolColumn,children:!!r.onRemove&&(0,y.jsx)(Te.Z,{size:"small",onClick:r.onRemove,disabled:!r.canRemove,children:(0,y.jsx)(Pe.Z,{})})})]})},Ct=n(3108),jt=n(82936),yt=n.g.gd,Zt=function(e,t,n,r,i){var o=r*r,a=i*i,s=Number.POSITIVE_INFINITY,l=0,c=0,u=[0,0];if((0,W.mapVector)(e,(function(e,r){var i=e.getVertices(),a=i.at(i.size()-1),d=a.x,p=a.y;(0,W.mapVector)(i,(function(e,i){var a=e.x,f=e.y;u=Tt(t,n,d,p,a,f,u);var h=wt(u[0],u[1],d,p)>o&&wt(u[0],u[1],a,f)>o,g=wt(t,n,u[0],u[1]);g<s&&h&&(s=g,l=r,c=i),d=a,p=f}))})),s<a){var d=e.at(l).getVertices(),p=d.at(kt(c-1,d.size())),f=d.at(c);return{x:(u=Tt(t,n,p.x,p.y,f.x,f.y,u))[0],y:u[1],polygonIndex:l,vertexIndex:c}}return null},kt=function(e,t){return(e%t+t)%t},wt=function(e,t,n,r){var i=e-n,o=t-r;return i*i+o*o},Tt=function(e,t,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[0,0],s=wt(n,r,i,o);if(0===s)return[n,r];var l=Math.max(0,Math.min(1,((e-n)*(i-n)+(t-r)*(o-r))/s));return a[0]=n+l*(i-n),a[1]=r+l*(o-r),a},St=n(75779),Pt=n.g.gd,Et=function(e){return(0,y.jsxs)(d.sg,{expand:!0,children:[(0,y.jsxs)(ze.iA,{children:[(0,y.jsx)(ze.xD,{children:(0,y.jsxs)(ze.SC,{children:[(0,y.jsx)(ze.bY,{style:mt.coordinateColumn,children:"X"}),(0,y.jsx)(ze.bY,{style:mt.coordinateColumn,children:"Y"}),(0,y.jsx)(ze.Nn,{style:mt.toolColumn})]})}),(0,y.jsx)(ze.RM,{children:(0,W.mapVector)(e.vertices,(function(t,n){return(0,y.jsx)(bt,{parentVerticeId:e.vertices.ptr.toString(),onPointerEnter:function(){return e.onHoverVertice(t.ptr)},onPointerLeave:e.onHoverVertice,selected:e.selectedVerticePtr===t.ptr,onClick:function(){return e.onClickVertice(t.ptr)},verticeX:t.get_x(),verticeY:t.get_y(),onChangeVerticeX:function(n){return function(t,n){t.set_x(Math.min(e.spriteWidth,Math.max(n,0))),e.onUpdated()}(t,n)},onChangeVerticeY:function(n){return function(t,n){t.set_y(Math.min(e.spriteHeight,Math.max(n,0))),e.onUpdated()}(t,n)},onRemove:function(){Pt.removeFromVectorVector2f(e.vertices,n),e.onUpdated()},canRemove:e.vertices.size()>3},t.ptr)}))})]}),(0,y.jsx)(d.LZ,{}),e.hasWarning&&(0,y.jsx)(jt.Z,{kind:"warning",children:(0,y.jsx)(l.Trans,{id:"The polygon is not convex. Ensure it is, otherwise the collision mask won't work."})}),(0,y.jsx)(d.x1,{justifyContent:"center",children:(0,y.jsx)(Ne.Z,{leftIcon:(0,y.jsx)(ue.Z,{}),label:(0,y.jsx)(l.Trans,{id:"Add a vertex"}),onClick:function(){!function(e){var t=e.size();if(t>0){var n=0,r=e.at(t-1),i=r.x,o=r.y,a=-1;(0,W.mapFor)(0,t,(function(t){var r=e.at(t),s=r.x,l=r.y,c=s-i,u=l-o,d=c*c+u*u;d>a&&(a=d,n=t),i=s,o=l}));var s=e.at(kt(n-1,t)),l=e.at(n),c=new yt.Vector2f;c.x=(s.x+l.x)/2,c.y=(s.y+l.y)/2,e.push_back(c),e.moveVector2fInVector(t,n),c.delete()}else{var u=new yt.Vector2f;e.push_back(u),u.delete()}}(e.vertices),e.onUpdated()}})})]})},It=function(e){var t=c.useContext(re.Z).message.warning,n=e.polygon.getVertices(),r=n.size(),i=e.polygon.isConvex(),o=[i?null:(0,y.jsx)(Te.Z,{size:"small",tooltip:{id:"Polygon is not convex!"},children:(0,y.jsx)(St.Z,{style:{color:t}})},"not-convex"),(0,y.jsx)(Te.Z,{size:"small",onClick:function(t){t.stopPropagation(),e.onRemove()},tooltip:{id:"Delete collision mask"},children:(0,y.jsx)(Pe.Z,{})},"delete-mask")];return(0,y.jsxs)(Ct.UQ,{defaultExpanded:!0,children:[(0,y.jsx)(Ct._m,{actions:o,children:(0,y.jsxs)(T.Z,{displayInlineAsSpan:!0,children:[3===r&&(0,y.jsx)(l.Trans,{id:"Triangle"}),4===r&&(0,y.jsx)(l.Trans,{id:"Quadrilateral"}),r>=5&&(0,y.jsx)(l.Trans,{id:"Polygon with {verticesCount} vertices",values:{verticesCount:r}})]})}),(0,y.jsx)(Ct.X1,{disableGutters:!0,children:(0,y.jsx)(Et,{vertices:n,hasWarning:!i,onHoverVertice:e.onHoverVertice,onClickVertice:e.onClickVertice,selectedVerticePtr:e.selectedVerticePtr,onUpdated:e.onUpdated,spriteWidth:e.spriteWidth,spriteHeight:e.spriteHeight})})]})},Mt=function(e){var t=e.polygons,n=e.spriteSize,r=e.onPolygonsUpdated,i=e.onSetFullImageCollisionMask,o=e.onSetAutomaticallyAdaptCollisionMasks,a=e.onHoverVertice,s=e.onClickVertice,u=e.selectedVerticePtr,p=(0,N.Z)(n,2),f=p[0],h=p[1],g=c.useCallback((function(){var e=Pt.Polygon2d.createRectangle(f,h);e.move(f/2,h/2),t.push_back(e),r()}),[h,f,t,r]),x=c.useCallback((function(e){Pt.removeFromVectorPolygon2d(t,e),0===t.size()&&i(),r()}),[t,r,i]);return c.useEffect((function(){0===t.size()&&g()}),[t,g]),(0,y.jsx)(c.Fragment,{children:(0,y.jsxs)(d.sg,{noMargin:!0,expand:!0,useFullHeight:!0,children:[(0,y.jsx)(dt.Z,{children:(0,W.mapVector)(t,(function(e,t){return(0,y.jsx)(It,{polygon:e,onUpdated:r,onRemove:function(){return x(t)},onHoverVertice:a,onClickVertice:s,selectedVerticePtr:u,spriteWidth:f,spriteHeight:h},"polygon-".concat(t))}))}),(0,y.jsx)(d.sg,{children:(0,y.jsx)(d.x1,{alignItems:"center",justifyContent:"center",children:(0,y.jsx)(ce.Z,{primary:!0,icon:(0,y.jsx)(ue.Z,{}),label:(0,y.jsx)(l.Trans,{id:"Add collision mask"}),onClick:g,buildMenuTemplate:function(e){return[{label:e._({id:"Reset to automatic collision mask"}),click:o},{label:e._({id:"Use full image as collision mask"}),click:i}]}})})})]})})},Lt=n.g.gd,At=function(e){var t=c.useRef(null),n=c.useState(null),r=(0,N.Z)(n,2),i=r[0],o=r[1],a=c.useState(null),l=(0,N.Z)(a,2),u=l[0],d=l[1],p=e.polygons,f=e.imageZoomFactor,h=e.imageHeight,g=e.imageWidth,x=e.imageOffsetTop,m=e.imageOffsetLeft,v=e.isDefaultBoundingBox,b=e.onPolygonsUpdated,C=e.onClickVertice,j=e.forcedCursor,Z=e.deactivateControls,k=e.hideControls;Z&&(i&&o(null),u&&d(null));var w=(0,$.Z)(),T=c.useCallback((function(e,t,n){i||o({vertex:e,polygonIndex:t,vertexIndex:n})}),[i]),S=c.useCallback((function(e){if(!t.current)return null;var n=t.current.createSVGPoint();n.x=e.clientX,n.y=e.clientY;var r=t.current.getScreenCTM().inverse(),i=n.matrixTransform(r);return[i.x,i.y]}),[]),P=c.useCallback((function(e,t){var n=g*f,r=h*f;return{frameX:Math.min(n,Math.max(e,0)),frameY:Math.min(r,Math.max(t,0))}}),[f,h,g]),E=c.useCallback((function(e){var t=p.at(e.polygonIndex).getVertices(),n=t.size(),r=new Lt.Vector2f;r.x=e.x,r.y=e.y,t.push_back(r),r.delete(),t.moveVector2fInVector(n,e.vertexIndex);var i=t.at(e.vertexIndex);o({vertex:i,polygonIndex:e.polygonIndex,vertexIndex:e.vertexIndex}),d(null),C(i.ptr),b()}),[C,b,p]),I=c.useCallback((function(){if(!i)return!1;var e=p.at(i.polygonIndex).getVertices(),t=10/f,n=5/f,r=function(e,t,n,r){var i=n*n,o=r*r,a=e.at(t);if(e.size()<=3)return null;var s=e.at(kt(t-1,e.size())),l=e.at(kt(t+1,e.size())),c=a.x,u=a.y,d=s.x,p=s.y,f=l.x,h=l.y;if(wt(c,u,d,p)<i)return[d,p];if(wt(c,u,f,h)<i)return[f,h];var g=Tt(c,u,s.x,s.y,l.x,l.y);return wt(c,u,g[0],g[1])<o?g:null}(e,i.vertexIndex,t,n);return!!r&&(i.vertex.set_x(r[0]),i.vertex.set_y(r[1]),!0)}),[i,f,p]),M=c.useCallback((function(){if(i)if(I()){var e=p.at(i.polygonIndex).getVertices();Lt.removeFromVectorVector2f(e,i.vertexIndex),b(),C(null)}else(t=i.vertex).set_x(Math.round(2*t.get_x())/2),t.set_y(Math.round(2*t.get_y())/2),b(),C(i.vertex.ptr);var t;o(null)}),[p,i,b,C,I]),L=c.useCallback((function(e){var t=S(e);if(t){var n=P(t[0],t[1]),r=n.frameX/f,i=n.frameY/f,o=Zt(p,r,i,20/f,10/f);o&&E(o)}}),[p,E,P,S,f]),A=j?{cursor:j}:{},F=(0,s.Z)({cursor:"move"},A),O=(0,s.Z)({},A),R=(0,s.Z)({position:"relative",width:"100%",height:"100%"},A),D=(0,s.Z)({position:"absolute",top:x||0,left:m||0,width:g*f,height:h*f,overflow:"visible"},A);return(0,y.jsx)("div",{style:R,onPointerMove:Z?null:function(e){var t=S(e);if(t)if(i){var n=P(t[0],t[1]),r=n.frameX/f,o=n.frameY/f;i.vertex.set_x(r),i.vertex.set_y(o),I(),w()}else{var a=t[0]/f,s=t[1]/f;d(Zt(p,a,s,20/f,40/f))}},onPointerUp:Z?null:M,onPointerDown:Z?null:L,children:(0,y.jsxs)("svg",{style:D,ref:t,children:[v&&(0,y.jsx)("polygon",{style:A,fill:"rgba(255,133,105,0.2)",stroke:"rgba(255,133,105,0.5)",strokeWidth:1,fillRule:"evenodd",points:"0,0 ".concat(g*f,",0 ").concat(g*f,",").concat(h*f," 0,").concat(h*f)}),!v&&(0,y.jsxs)(c.Fragment,{children:[(0,W.mapVector)(p,(function(e,t){var n=e.getVertices();return(0,y.jsx)("polygon",{fill:"rgba(255,133,105,0.2)",stroke:"rgba(255,133,105,0.5)",strokeWidth:2,fillRule:"evenodd",points:(0,W.mapVector)(n,(function(e,t){return"".concat(e.get_x()*f,",").concat(e.get_y()*f)})).join(" "),style:O},"polygon-".concat(t))})),!k&&(0,W.mapVector)(p,(function(t,n){var r=t.getVertices();return(0,W.mapVector)(r,(function(t,r){return(0,c.createElement)("circle",(0,s.Z)((0,s.Z)({onPointerDown:Z?null:function(){return T(t,n,r)}},(0,et.Y)({draggable:"true"})),{},{key:"polygon-".concat(n,"-vertex-").concat(r),fill:t.ptr===e.highlightedVerticePtr?"rgba(0,0,0,0.75)":t.ptr===e.selectedVerticePtr?"rgba(107,175,255,0.75)":"rgba(255,133,105,0.75)",stroke:t.ptr===e.highlightedVerticePtr?"white":void 0,strokeWidth:2,cx:t.get_x()*f,cy:t.get_y()*f,r:7,style:F}))}))})),!k&&u&&(0,y.jsx)("circle",{onPointerDown:Z?null:function(){return E(u)},fill:"rgba(0,0,0,0.75)",stroke:"white",strokeWidth:2,cx:u.x*f,cy:u.y*f,r:5,style:F},"new-vertex")]})]})})},Ft={leftContainer:{display:"flex",overflow:"hidden",flexDirection:"column"},rightContainer:{display:"flex",paddingLeft:4,paddingRight:4}},Ot={direction:"row",first:"preview",second:"properties",splitPercentage:66.67},Rt={direction:"column",first:"preview",second:"properties",splitPercentage:50},Dt=function(e){var t=e.animations,n=e.resourcesLoader,r=e.project,i=e.onMasksUpdated,o=e.onCreateMatchingSpriteCollisionMask,a=c.useState(0),u=(0,N.Z)(a,2),p=u[0],f=u[1],h=c.useState(0),g=(0,N.Z)(h,2),x=g[0],m=g[1],v=c.useState(0),b=(0,N.Z)(v,2),C=b[0],j=b[1],Z=c.useState(null),k=(0,N.Z)(Z,2),w=k[0],T=k[1],S=c.useState(null),P=(0,N.Z)(S,2),E=P[0],I=P[1],M=c.useState([0,0]),L=(0,N.Z)(M,2),A=L[0],F=L[1],O=(0,$.Z)(),R=(0,pe.Z)().showConfirmation,D=(0,se.tY)(t,p,x,C),U=D.animation,H=D.sprite,V=c.useState(!!H&&(0,se.Gn)(H,t)),z=(0,N.Z)(V,2),G=z[0],Y=z[1],q=c.useState(!(!H||!U)&&(0,se.rY)(H,U)),X=(0,N.Z)(q,2),K=X[0],ee=X[1],te=c.useCallback((function(e,n){U&&H&&(e?(0,W.mapFor)(0,t.getAnimationsCount(),(function(e){var n=t.getAnimation(e);(0,se.CO)(H,n)})):n&&(0,se.CO)(H,U)),O(),i&&i()}),[U,H,t,O,i]),ne=function(e){f(e),m(0),j(0)},re=function(e){m(e),j(0)},ie=function(e){j(e)};c.useEffect((function(){U&&H&&ee((0,se.rY)(H,U))}),[U,H]);var oe=c.useCallback((0,B.Z)((0,_.Z)().mark((function e(){var n,r=arguments;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(r.length>0&&void 0!==r[0])||r[0],H){e.next=3;break}return e.abrupt("return");case 3:n&&t.setAdaptCollisionMaskAutomatically(!1),H.setFullImageCollisionMask(n),te(G,K);case 6:case"end":return e.stop()}}),e)}))),[H,te,G,K,t]),ae=c.useCallback(function(){var e=(0,B.Z)((0,_.Z)().mark((function e(t){var n,r;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,R({title:{id:"Use same collision mask for all animations?"},message:{id:"Having the same collision masks for all animations will erase and reset all the other animations collision masks. This can't be undone. Are you sure you want to share these collision masks amongst all the animations of the object?"},confirmButtonLabel:{id:"Use same collision mask"},dismissButtonLabel:{id:"Cancel"}});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:r=t||K,Y(n=t),ee(r),te(n,r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[K,te,R]),le=c.useCallback(function(){var e=(0,B.Z)((0,_.Z)().mark((function e(t){var n,r;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,R({title:{id:"Use same collision mask for all frames?"},message:{id:"Having the same collision masks for all frames will erase and reset all the other frames collision masks. This can't be undone. Are you sure you want to share these collision masks amongst all the frames of the animation?"},confirmButtonLabel:{id:"Use same collision mask"},dismissButtonLabel:{id:"Cancel"}});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:r=t,Y(n=t&&G),ee(r),te(n,r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[G,te,R]),ce=c.useCallback(function(){var e=(0,B.Z)((0,_.Z)().mark((function e(n){return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!H||H.isFullImageCollisionMask()){e.next=6;break}return e.next=3,R({title:{id:"Adapt collision mask?"},message:{id:"You will lose all custom collision masks. Do you want to continue?"},confirmButtonLabel:{id:"Adapt automatically"},dismissButtonLabel:{id:"Cancel"}});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:t.setAdaptCollisionMaskAutomatically(n),n&&(o(),Y(!0),ee(!0)),O();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,O,o,R,H]),ue=c.useCallback((function(){oe(!1),ce(!1)}),[oe,ce]),de=c.useCallback((function(){t.setAdaptCollisionMaskAutomatically(!1),te(G,K)}),[t,te,G,K]),fe=(0,J.U)().isMobile?Rt:Ot;if(!t.getAnimationsCount())return null;var he=H?H.getImageName():"",ge={preview:{type:"primary",noTitleBar:!0,noSoftKeyboardAvoidance:!0,renderEditor:function(){return(0,y.jsx)(pt.Z,{background:"medium",style:Ft.leftContainer,square:!0,children:(0,y.jsx)(d.sg,{expand:!0,noMargin:!0,useFullHeight:!0,children:(0,y.jsx)(Q.Z,{resourceName:he,imageResourceSource:n.getResourceFullUrl(r,he,{}),isImageResourceSmooth:(0,Q.X)(r,he),onImageSize:F,renderOverlay:function(e){return H&&(0,y.jsx)(At,(0,s.Z)((0,s.Z)({},e),{},{isDefaultBoundingBox:H.isFullImageCollisionMask(),hideControls:t.adaptCollisionMaskAutomatically(),polygons:H.getCustomCollisionMask(),onPolygonsUpdated:de,highlightedVerticePtr:w,selectedVerticePtr:E,onClickVertice:I}))}})})})}},properties:{type:"secondary",noTitleBar:!0,noSoftKeyboardAvoidance:!0,renderEditor:function(){return(0,y.jsx)(pt.Z,{background:"medium",style:Ft.rightContainer,square:!0,children:(0,y.jsxs)(d.sg,{expand:!0,noMargin:!0,children:[(0,y.jsx)(d.x1,{children:(0,y.jsx)(d.sg,{expand:!0,noMargin:!0,children:(0,y.jsx)(ct,{animations:t,animationIndex:p,directionIndex:x,spriteIndex:C,chooseAnimation:ne,chooseDirection:re,chooseSprite:ie,sameForAllAnimations:G,sameForAllSprites:K,setSameForAllAnimations:ae,setSameForAllSprites:le,setSameForAllAnimationsLabel:(0,y.jsx)(l.Trans,{id:"Share same collision masks for all animations"}),setSameForAllSpritesLabel:(0,y.jsx)(l.Trans,{id:"Share same collision masks for all sprites of this animation"}),hideControlsForSprite:function(e){return t.adaptCollisionMaskAutomatically()||e.isFullImageCollisionMask()}})})}),(0,y.jsxs)(dt.Z,{children:[!!H&&!H.isFullImageCollisionMask()&&!t.adaptCollisionMaskAutomatically()&&(0,y.jsx)(c.Fragment,{children:(0,y.jsx)(Mt,{polygons:H.getCustomCollisionMask(),onPolygonsUpdated:de,onSetFullImageCollisionMask:function(){return oe(!0)},onSetAutomaticallyAdaptCollisionMasks:function(){return ce(!0)},onHoverVertice:T,onClickVertice:I,selectedVerticePtr:E,spriteSize:A})}),!!H&&!H.isFullImageCollisionMask()&&t.adaptCollisionMaskAutomatically()&&(0,y.jsxs)(c.Fragment,{children:[(0,y.jsx)(jt.Z,{kind:"info",children:(0,y.jsx)(l.Trans,{id:"Automatic collision mask activated. Click on the button to replace it with a custom one."})}),(0,y.jsx)(d.x1,{justifyContent:"center",children:(0,y.jsx)(Ne.Z,{label:(0,y.jsx)(l.Trans,{id:"Use a custom collision mask"}),primary:!1,onClick:ue})})]}),!!H&&H.isFullImageCollisionMask()&&(0,y.jsxs)(c.Fragment,{children:[(0,y.jsx)(jt.Z,{kind:"info",children:(0,y.jsx)(l.Trans,{id:"This sprite uses a rectangle that is as large as the sprite for its collision mask."})}),(0,y.jsx)(d.x1,{justifyContent:"center",children:(0,y.jsx)(Ne.Z,{label:(0,y.jsx)(l.Trans,{id:"Use a custom collision mask"}),primary:!1,onClick:ue})})]}),!H&&(0,y.jsx)(Ve.Z,{children:(0,y.jsx)(l.Trans,{id:"Choose an animation and frame to edit the collision masks"})})]})]})})}}};return(0,y.jsx)("div",{style:{flex:1},children:(0,y.jsx)(ut.Z,{editors:ge,initialNodes:fe})})},_t=n(3429),Bt=function(){var e=(0,_t.Z)("intermediate-changing-animations").DismissableTutorialMessage;return e?(0,y.jsxs)(d.sg,{noMargin:!0,children:[e,(0,y.jsx)(d.LZ,{})]}):null},Nt=n(9383),Ut=n(85919),Ht=n.g.gd,Vt=function(e,t){return new Promise((function(n,r){e.addEventListener("load",(function(){return n(e)})),e.addEventListener("error",(function(){return r(new Error("Failed to load image"))})),e.src=t}))},zt=function(e,t,n,r){return e[(n*r+t<<2)+3]>=64},Wt=function(){var e=(0,B.Z)((0,_.Z)().mark((function e(t){var n,r,i,o,a,s,l,c,u,d,p,f,h,g,x,m,v,b,C,j,y,Z,k,w,T,S,P,E,I;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Image,(t.startsWith("http://")||t.startsWith("https://"))&&(n.crossOrigin=(0,Ut.bc)(t)?"use-credentials":"anonymous"),e.prev=2,e.next=5,Vt(n,t);case 5:if(r=document.createElement("canvas"),i=n.width,o=n.height,r.width=i,r.height=o,a=r.getContext("2d")){e.next=13;break}throw new Error("Unable to get 2D context.");case 13:a.drawImage(n,0,0),s=a.getImageData(0,0,r.width,r.height),l=s.data,c=null,u=null,d=null,p=null,f=0;case 21:if(!(f<o)){e.next=37;break}h=!1,g=0;case 24:if(!(g<i)){e.next=32;break}if(!zt(l,g,f,i)){e.next=29;break}return d=f,h=!0,e.abrupt("break",32);case 29:g++,e.next=24;break;case 32:if(!h){e.next=34;break}return e.abrupt("break",37);case 34:f++,e.next=21;break;case 37:if(null!==d){e.next=39;break}throw new Error("No non-transparent pixel found while scanning rows from top to bottom.");case 39:x=o-1;case 40:if(!(x>=0)){e.next=56;break}m=!1,v=0;case 43:if(!(v<i)){e.next=51;break}if(!zt(l,v,x,i)){e.next=48;break}return p=x,m=!0,e.abrupt("break",51);case 48:v++,e.next=43;break;case 51:if(!m){e.next=53;break}return e.abrupt("break",56);case 53:x--,e.next=40;break;case 56:if(null!==p){e.next=58;break}throw new Error("No non-transparent pixel found while scanning rows from bottom to top.");case 58:b=0;case 59:if(!(b<i)){e.next=75;break}C=!1,j=d;case 62:if(!(j<=p)){e.next=70;break}if(!zt(l,b,j,i)){e.next=67;break}return c=b,C=!0,e.abrupt("break",70);case 67:j++,e.next=62;break;case 70:if(!C){e.next=72;break}return e.abrupt("break",75);case 72:b++,e.next=59;break;case 75:if(null!==c){e.next=77;break}throw new Error("No non-transparent pixel found while scanning columns from left to right.");case 77:y=i-1;case 78:if(!(y>=0)){e.next=94;break}Z=!1,k=d;case 81:if(!(k<=p)){e.next=89;break}if(!zt(l,y,k,i)){e.next=86;break}return u=y,Z=!0,e.abrupt("break",89);case 86:k++,e.next=81;break;case 89:if(!Z){e.next=91;break}return e.abrupt("break",94);case 91:y--,e.next=78;break;case 94:if(null!==u){e.next=96;break}throw new Error("No non-transparent pixel found while scanning columns from right to left.");case 96:if(T=p-d+1,S=(c+u+1)/2,P=(d+p+1)/2,!((w=u-c+1)<=0||T<=0)){e.next=102;break}throw new Error("Invalid collision mask size.");case 102:return(E=Ht.Polygon2d.createRectangle(w,T)).move(S,P),(I=new Ht.VectorPolygon2d).push_back(E),e.abrupt("return",I);case 109:throw e.prev=109,e.t0=e.catch(2),new Error("Unable to load image: "+e.t0);case 112:case"end":return e.stop()}}),e,null,[[2,109]])})));return function(t){return e.apply(this,arguments)}}(),Gt=n.g.gd,Yt={scrollView:{display:"flex",flexDirection:"column"}};var qt=n.g.gd,Xt=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.objectConfiguration,r=t.renderObjectNameField,i=qt.asShapePainterConfiguration(n);return(0,y.jsxs)(h.ak,{noMargin:!0,children:[r&&r(),(0,y.jsx)(u.Z,{label:(0,y.jsx)(l.Trans,{id:"Draw the shapes relative to the object position on the scene"}),checked:!i.areCoordinatesAbsolute(),onCheck:function(t,n){n?i.setCoordinatesRelative():i.setCoordinatesAbsolute(),e.forceUpdate()}}),(0,y.jsx)(u.Z,{label:(0,y.jsx)(l.Trans,{id:"Clear the rendered image between each frame"}),checked:i.isClearedBetweenFrames(),onCheck:function(t,n){i.setClearBetweenFrames(n),e.forceUpdate()}}),(0,y.jsxs)(h.ep,{noMargin:!0,children:[(0,y.jsx)(P.Z,{floatingLabelText:(0,y.jsx)(l.Trans,{id:"Outline color"}),disableAlpha:!0,fullWidth:!0,color:(0,S.KC)({r:i.getOutlineColorR(),g:i.getOutlineColorG(),b:i.getOutlineColorB()}),onChange:function(t){var n=(0,S.A0)(t);n&&(i.setOutlineColor(n.r,n.g,n.b),e.forceUpdate())}}),(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Outline opacity (0-255)"}),fullWidth:!0,type:"number",value:i.getOutlineOpacity(),onChange:function(t){i.setOutlineOpacity(parseInt(t,10)||0),e.forceUpdate()}}),(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Outline size (in pixels)"}),fullWidth:!0,type:"number",value:i.getOutlineSize(),onChange:function(t){i.setOutlineSize(parseInt(t,10)||0),e.forceUpdate()}})]}),(0,y.jsxs)(h.ep,{noMargin:!0,children:[(0,y.jsx)(P.Z,{floatingLabelText:(0,y.jsx)(l.Trans,{id:"Fill color"}),disableAlpha:!0,fullWidth:!0,color:(0,S.KC)({r:i.getFillColorR(),g:i.getFillColorG(),b:i.getFillColorB()}),onChange:function(t){var n=(0,S.A0)(t);n&&(i.setFillColor(n.r,n.g,n.b),e.forceUpdate())}}),(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Fill opacity (0-255)"}),fullWidth:!0,type:"number",value:i.getFillOpacity(),onChange:function(t){i.setFillOpacity(parseInt(t,10)||0),e.forceUpdate()}})]}),(0,y.jsx)(h.ep,{alignItems:"center",noMargin:!0,children:(0,y.jsxs)(at.Z,{floatingLabelText:(0,y.jsx)(l.Trans,{id:"Anti-aliasing"}),value:i.getAntialiasing(),onChange:function(t,n,r){i.setAntialiasing(r),e.forceUpdate()},children:[(0,y.jsx)(st.Z,{value:"none",label:{id:"None"}},"none"),(0,y.jsx)(st.Z,{value:"low",label:{id:"Low quality"}},"low"),(0,y.jsx)(st.Z,{value:"medium",label:{id:"Medium quality"}},"medium"),(0,y.jsx)(st.Z,{value:"high",label:{id:"High quality"}},"high")]})})]})}}]),n}(c.Component),Kt=n(95644),Jt=n(94446),Qt=n.g.gd,$t=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.objectConfiguration,r=t.project,i=t.resourceManagementProps,o=t.objectName,a=t.renderObjectNameField,s=Qt.asParticleEmitterConfiguration(n),c=(0,Jt.cG)(n.getType());return(0,y.jsxs)(h.ak,{noMargin:!0,children:[a&&a(),c.map((function(e){return(0,y.jsx)(Kt.Z,{tutorialId:e},e)})),(0,y.jsxs)(at.Z,{fullWidth:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Particle type"}),value:s.getRendererType(),onChange:function(t,n,r){var i=parseInt(r,10)||0;s.setRendererType(i),i!==Qt.ParticleEmitterObject.Quad&&s.setParticleTexture(""),e.forceUpdate()},children:[(0,y.jsx)(st.Z,{value:Qt.ParticleEmitterObject.Point,label:{id:"Circle"}}),(0,y.jsx)(st.Z,{value:Qt.ParticleEmitterObject.Line,label:{id:"Line"}}),(0,y.jsx)(st.Z,{value:Qt.ParticleEmitterObject.Quad,label:{id:"Image"}})]}),s.getRendererType()===Qt.ParticleEmitterObject.Point&&(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Size"}),fullWidth:!0,type:"number",value:s.getRendererParam1(),onChange:function(t){s.setRendererParam1(parseFloat(t)),e.forceUpdate()}}),s.getRendererType()===Qt.ParticleEmitterObject.Line&&(0,y.jsxs)(h.ep,{noMargin:!0,children:[(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Lines length"}),fullWidth:!0,type:"number",value:s.getRendererParam1(),onChange:function(t){s.setRendererParam1(parseFloat(t)),e.forceUpdate()}}),(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Lines thickness"}),fullWidth:!0,type:"number",value:s.getRendererParam2(),onChange:function(t){s.setRendererParam2(parseFloat(t)),e.forceUpdate()}})]}),s.getRendererType()===Qt.ParticleEmitterObject.Quad&&(0,y.jsx)(A.Z,{project:r,resourceManagementProps:i,resourceKind:"image",resourceName:s.getParticleTexture(),defaultNewResourceName:o,onChange:function(t){s.setParticleTexture(t),e.forceUpdate()},floatingLabelText:(0,y.jsx)(l.Trans,{id:"Select an image"})}),s.getRendererType()===Qt.ParticleEmitterObject.Quad&&(0,y.jsxs)(h.ep,{noMargin:!0,children:[(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Particles start width"}),fullWidth:!0,type:"number",value:s.getRendererParam1(),onChange:function(t){s.setRendererParam1(Math.max(0,parseFloat(t))),e.forceUpdate()}}),(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Particles start height"}),fullWidth:!0,type:"number",value:s.getRendererParam2(),onChange:function(t){s.setRendererParam2(Math.max(0,parseFloat(t))),e.forceUpdate()}})]}),(0,y.jsxs)(h.ep,{noMargin:!0,children:[(0,y.jsx)(P.Z,{floatingLabelText:(0,y.jsx)(l.Trans,{id:"Particles start color"}),disableAlpha:!0,fullWidth:!0,color:(0,S.KC)({r:s.getParticleRed1(),g:s.getParticleGreen1(),b:s.getParticleBlue1()}),onChange:function(t){var n=(0,S.A0)(t);n&&(s.setParticleRed1(n.r),s.setParticleGreen1(n.g),s.setParticleBlue1(n.b),e.forceUpdate())}}),(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Start opacity (0-255)"}),fullWidth:!0,type:"number",value:s.getParticleAlpha1(),onChange:function(t){s.setParticleAlpha1(parseInt(t,10)||0),e.forceUpdate()}})]}),(0,y.jsxs)(h.ep,{noMargin:!0,children:[(0,y.jsx)(P.Z,{floatingLabelText:(0,y.jsx)(l.Trans,{id:"Particles end color"}),disableAlpha:!0,fullWidth:!0,color:(0,S.KC)({r:s.getParticleRed2(),g:s.getParticleGreen2(),b:s.getParticleBlue2()}),onChange:function(t){var n=(0,S.A0)(t);n&&(s.setParticleRed2(n.r),s.setParticleGreen2(n.g),s.setParticleBlue2(n.b),e.forceUpdate())}}),(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"End opacity (0-255)"}),fullWidth:!0,type:"number",value:s.getParticleAlpha2(),onChange:function(t){s.setParticleAlpha2(parseInt(t,10)||0),e.forceUpdate()}})]}),(0,y.jsx)(u.Z,{label:(0,y.jsx)(l.Trans,{id:"Additive rendering"}),checked:s.isRenderingAdditive(),onCheck:function(t,n){n?s.setRenderingAdditive():s.setRenderingAlpha(),e.forceUpdate()}}),(0,y.jsx)(u.Z,{label:(0,y.jsx)(l.Trans,{id:"Delete when out of particles"}),checked:s.getDestroyWhenNoParticles(),onCheck:function(t,n){s.setDestroyWhenNoParticles(n),e.forceUpdate()}}),(0,y.jsx)(h.ep,{noMargin:!0,children:(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Maximum number of particles displayed"}),fullWidth:!0,type:"number",value:s.getMaxParticleNb(),onChange:function(t){s.setMaxParticleNb(parseInt(t,10)||0),e.forceUpdate()}})}),(0,y.jsxs)(h.ep,{noMargin:!0,children:[(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Number of particles in tank (-1 for infinite)"}),fullWidth:!0,type:"number",value:s.getTank(),onChange:function(t){s.setTank(parseInt(t,10)||0),e.forceUpdate()}}),(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Flow of particles (particles/seconds)"}),fullWidth:!0,type:"number",value:s.getFlow(),onChange:function(t){s.setFlow(parseFloat(t)||0),e.forceUpdate()}})]}),(0,y.jsxs)(h.ep,{noMargin:!0,children:[(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Minimum emitter force applied on particles"}),fullWidth:!0,type:"number",value:s.getEmitterForceMin(),onChange:function(t){s.setEmitterForceMin(parseFloat(t)||0),e.forceUpdate()}}),(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Maximum emitter force applied on particles"}),fullWidth:!0,type:"number",value:s.getEmitterForceMax(),onChange:function(t){s.setEmitterForceMax(parseFloat(t)||0),e.forceUpdate()}})]}),(0,y.jsxs)(h.ep,{noMargin:!0,children:[(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Spray cone angle (in degrees)"}),fullWidth:!0,type:"number",value:s.getConeSprayAngle(),onChange:function(t){s.setConeSprayAngle(parseFloat(t)||0),e.forceUpdate()}}),(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Radius of the emitter"}),fullWidth:!0,type:"number",value:s.getZoneRadius(),onChange:function(t){s.setZoneRadius(parseFloat(t)||0),e.forceUpdate()}})]}),(0,y.jsxs)(h.ep,{noMargin:!0,children:[(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Gravity on particles on X axis"}),fullWidth:!0,type:"number",value:s.getParticleGravityX(),onChange:function(t){s.setParticleGravityX(parseFloat(t)),e.forceUpdate()}}),(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Gravity on particles on Y axis"}),fullWidth:!0,type:"number",value:s.getParticleGravityY(),onChange:function(t){s.setParticleGravityY(parseFloat(t)),e.forceUpdate()}})]}),(0,y.jsxs)(h.ep,{noMargin:!0,children:[(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Particle minimum lifetime (in seconds)"}),fullWidth:!0,type:"number",value:s.getParticleLifeTimeMin(),onChange:function(t){s.setParticleLifeTimeMin(parseFloat(t)),e.forceUpdate()}}),(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Particle maximum lifetime (in seconds)"}),fullWidth:!0,type:"number",value:s.getParticleLifeTimeMax(),onChange:function(t){s.setParticleLifeTimeMax(parseFloat(t)),e.forceUpdate()}})]}),(0,y.jsxs)(h.ep,{noMargin:!0,children:[(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Particle start size (in percents)"}),fullWidth:!0,type:"number",value:s.getParticleSize1(),onChange:function(t){s.setParticleSize1(parseFloat(t)),e.forceUpdate()}}),(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Particle end size (in percents)"}),fullWidth:!0,type:"number",value:s.getParticleSize2(),onChange:function(t){s.setParticleSize2(parseFloat(t)),e.forceUpdate()}})]}),(0,y.jsxs)(h.ep,{noMargin:!0,children:[(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Particle minimum rotation speed (degrees/second)"}),fullWidth:!0,type:"number",value:s.getParticleAngle1(),onChange:function(t){s.setParticleAngle1(parseFloat(t)),e.forceUpdate()}}),(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Particle maximum rotation speed (degrees/second)"}),fullWidth:!0,type:"number",value:s.getParticleAngle2(),onChange:function(t){s.setParticleAngle2(parseFloat(t)),e.forceUpdate()}})]}),(0,y.jsx)(h.ep,{noMargin:!0,children:(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Jump forward in time on creation (in seconds)"}),fullWidth:!0,type:"number",value:s.getJumpForwardInTimeOnCreation(),onChange:function(t){s.setJumpForwardInTimeOnCreation(parseFloat(t)),e.forceUpdate()}})})]})}}]),n}(c.Component),en=n(72611),tn=n(94258),nn=n(44397),rn=n.g.gd,on=function(e){var t=e.objectConfiguration,n=e.project,r=e.resourceManagementProps,i=e.unsavedChanges,o=e.renderObjectNameField,a=rn.castObject(t,rn.ObjectConfiguration),s=a.getProperties(),u=(0,tn.Z)(s,(function(e){return e.getProperties()}),(function(e,t,n){return e.updateProperty(t,n)})),p=(0,nn.gF)()[a.getType()],f=(0,Jt.cG)(a.getType());return(0,y.jsx)(l.I18n,{children:function(e){var t=e.i18n;return(0,y.jsxs)(h.ak,{noMargin:!0,children:[o&&o(),f.map((function(e){return(0,y.jsx)(Kt.Z,{tutorialId:e},e)})),u.length?(0,y.jsxs)(c.Fragment,{children:[p?(0,y.jsx)(d.x1,{children:(0,y.jsx)(h.ak,{noMargin:!0,children:p.map((function(e,n){var r=e.kind,i=e.message;return(0,y.jsx)(jt.Z,{kind:r,children:t._(i)},n)}))})}):null,(0,y.jsx)(en.Z,{unsavedChanges:i,schema:u,instances:[a],project:n,resourceManagementProps:r})]}):(0,y.jsx)(Ve.Z,{children:(0,y.jsx)(l.Trans,{id:"There is nothing to configure for this object. You can still use events to interact with the object."})})]})}})},an=n(33133),sn=n(36262),ln=n.g.gd,cn=function(e){var t=(0,$.Z)(),n=e.objectConfiguration,r=e.project,i=e.layout,o=e.object,a=e.objectName,s=e.resourceManagementProps,u=e.onSizeUpdated,p=e.onObjectUpdated,f=e.unsavedChanges,g=e.renderObjectNameField,m=e.isChildObject,v=(0,J.U)().isMobile,b=ln.asCustomObjectConfiguration(n),C=b.getProperties(),j=(0,tn.Z)(C,(function(e){return e.getProperties()}),(function(e,t,n){return e.updateProperty(t,n)})),Z=(0,nn.gF)()[b.getType()],k=c.useContext(sn.ZP).values,w=(0,Jt.cG)(b.getType()),S=r.hasEventsBasedObject(b.getType())?r.getEventsBasedObject(b.getType()):null,P=b.getAnimations(),E=c.useCallback((0,B.Z)((0,_.Z)().mark((function e(){var n,i,o,a;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,se.Ng)(P)){e.next=3;break}return e.abrupt("return");case 3:return i=n.getImageName(),o=x.Z.getResourceFullUrl(r,i,{}),a=null,e.prev=6,e.next=9,Wt(o);case 9:a=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),console.error("Unable to create a matching collision mask for the sprite, fallback to full image collision mask.",e.t0);case 15:(0,se.E8)(P,a),t();case 17:case"end":return e.stop()}}),e,null,[[6,12]])}))),[P,r,t]),I=c.useRef(null),M=c.useRef(null),L=c.useState(null),A=(0,N.Z)(L,2),F=A[0],O=A[1],R=c.useRef(null);c.useEffect((function(){I.current&&R.current&&F&&(I.current.scrollTo(R.current),O(null),R.current=null)}),[F]);var D=c.useState(!1),U=(0,N.Z)(D,2),H=U[0],V=U[1],z=c.useState(!1),G=(0,N.Z)(z,2),Y=G[0],q=G[1];return(0,y.jsx)(l.I18n,{children:function(e){var n=e.i18n;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(dt.Z,{ref:I,children:(0,y.jsxs)(h.ak,{noMargin:!0,children:[g&&g(),w.map((function(e){return(0,y.jsx)(Kt.Z,{tutorialId:e},e)})),j.length||S&&(S.getObjectsCount()||S.isAnimatable())?(0,y.jsxs)(c.Fragment,{children:[Z?(0,y.jsx)(d.x1,{children:(0,y.jsx)(h.ak,{noMargin:!0,children:Z.map((function(e,t){var r=e.kind,i=e.message;return(0,y.jsx)(jt.Z,{kind:r,children:n._(i)},t)}))})}):null,(0,y.jsx)(en.Z,{unsavedChanges:f,schema:j,instances:[b],project:r,resourceManagementProps:s}),S&&(0,W.mapFor)(0,S.getObjectsCount(),(function(e){var n=S.getObjectAt(e),o=b.getChildObjectConfiguration(n.getName()),l=Fn.getEditorConfiguration(r,o.getType()).component,c=ln.MetadataProvider.getObjectMetadata(ln.JsPlatform.get(),o.getType()).getIconFilename(),u=(0,Jt.cG)(o.getType()),p=u.filter((function(e){return!k.hiddenTutorialHints[e]}));return(0,y.jsxs)(Ct.UQ,{defaultExpanded:!0,children:[(0,y.jsxs)(Ct._m,{children:[c?(0,y.jsx)(an.q,{src:c,alt:n.getName(),size:20}):null,(0,y.jsx)(d.sg,{expand:!0,children:(0,y.jsx)(T.Z,{size:"block-title",children:n.getName()})})]}),(0,y.jsx)(Ct.X1,{children:(0,y.jsxs)(d.sg,{expand:!0,noMargin:!0,noOverflowParent:!0,children:[p.length?(0,y.jsx)(d.x1,{children:(0,y.jsx)(h.ak,{expand:!0,children:u.map((function(e){return(0,y.jsx)(Kt.Z,{tutorialId:e},e)}))})}):null,(0,y.jsx)(d.x1,{noMargin:!0,children:(0,y.jsx)(d.sg,{expand:!0,children:(0,y.jsx)(l,{isChildObject:!0,objectConfiguration:o,project:r,layout:i,resourceManagementProps:s,onSizeUpdated:t,objectName:a+" "+n.getName()})})})]})})]},n.getName())})),S&&S.isAnimatable()&&(0,y.jsxs)(d.sg,{expand:!0,children:[(0,y.jsx)(T.Z,{size:"block-title",children:(0,y.jsx)(l.Trans,{id:"Animations"})}),(0,y.jsx)(Be,{ref:M,animations:P,project:r,layout:i,object:o,objectName:a,resourceManagementProps:s,onSizeUpdated:u,onObjectUpdated:p,isAnimationListLocked:!1,scrollView:I,onCreateMatchingSpriteCollisionMask:E})]})]}):(0,y.jsx)(Ve.Z,{children:(0,y.jsx)(l.Trans,{id:"There is nothing to configure for this object. You can still use events to interact with the object."})})]})}),S&&S.isAnimatable()&&!m&&(0,y.jsx)(d.sg,{noMargin:!0,children:(0,y.jsxs)(h.ep,{justifyContent:"space-between",noColumnMargin:!0,children:[v?(0,y.jsx)(Nt.Z,{label:(0,y.jsx)(l.Trans,{id:"Edit collision masks"}),onClick:function(){return q(!0)},disabled:!(0,se.K3)(P),buildMenuTemplate:function(e){return[{label:e._({id:"Edit points"}),disabled:!(0,se.K3)(P),click:function(){return V(!0)}}]}}):(0,y.jsxs)(h.ep,{noMargin:!0,noColumnMargin:!0,children:[(0,y.jsx)(Ne.Z,{label:(0,y.jsx)(l.Trans,{id:"Edit collision masks"}),onClick:function(){return q(!0)},disabled:!(0,se.K3)(P)}),(0,y.jsx)(Ne.Z,{label:(0,y.jsx)(l.Trans,{id:"Edit points"}),onClick:function(){return V(!0)},disabled:!(0,se.K3)(P)})]}),(0,y.jsx)(Ue.Z,{label:(0,y.jsx)(l.Trans,{id:"Add an animation"}),primary:!0,onClick:function(){M.current&&M.current.addAnimation()},icon:(0,y.jsx)(ue.Z,{})})]})}),H&&(0,y.jsx)(X.ZP,{title:(0,y.jsx)(l.Trans,{id:"Edit points"}),actions:[(0,y.jsx)(Ne.Z,{label:(0,y.jsx)(l.Trans,{id:"Close"}),primary:!0,onClick:function(){return V(!1)}},"close")],secondaryActions:[(0,y.jsx)(He.Z,{helpPagePath:"/objects/sprite/edit-points"},"help")],onRequestClose:function(){return V(!1)},maxWidth:"lg",flexBody:!0,fullHeight:!0,open:H,children:(0,y.jsx)(xt,{animations:P,resourcesLoader:x.Z,project:r,onPointsUpdated:p,onRenamedPoint:function(e,t){return i&&o&&ln.WholeProjectRefactorer.renameObjectPoint(r,i,o,e,t)}})}),Y&&(0,y.jsx)(X.ZP,{title:(0,y.jsx)(l.Trans,{id:"Edit collision masks"}),actions:[(0,y.jsx)(Ne.Z,{label:(0,y.jsx)(l.Trans,{id:"Close"}),primary:!0,onClick:function(){return q(!1)}},"close")],secondaryActions:[(0,y.jsx)(He.Z,{helpPagePath:"/objects/sprite/collision-mask"},"help")],maxWidth:"lg",flexBody:!0,fullHeight:!0,onRequestClose:function(){return q(!1)},open:Y,children:(0,y.jsx)(Dt,{animations:P,resourcesLoader:x.Z,project:r,onMasksUpdated:p,onCreateMatchingSpriteCollisionMask:E})})]})}})},un=n(66733),dn=n(51626),pn=n(32832),fn=n(13923),hn=n(58247),gn=n(94002),xn=n(46564),mn=(n.g.gd,function(e){var t=e.objectConfiguration,n=e.propertyName,r=e.onChange,i=(0,$.Z)(),o=t.getProperties(),a=c.useCallback((function(e){var o=t.getProperties().get(n).getValue();t.updateProperty(n,e);var a=t.getProperties().get(n).getValue();r&&a!==o&&r(),i()}),[t,n,r,i]),s=o.get(n),l=s.getMeasurementUnit(),u={label:(0,tn.j)(l),tooltipContent:(0,y.jsx)(fn.Z,{label:l.getLabel(),description:l.getDescription(),elementsWithWords:l.getElementsWithWords()})};return(0,y.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,y.jsx)(m.Z,{floatingLabelFixed:!0,floatingLabelText:s.getLabel(),onChange:a,value:s.getValue(),endAdornment:(0,y.jsx)(C.ZP,{title:u.tooltipContent,children:(0,y.jsx)(dn.Z,{position:"end",children:u.label})})})},n)}),vn=function(e){var t=e.objectConfiguration,n=e.propertyName,r=(0,$.Z)(),i=t.getProperties(),o=c.useCallback((function(e,n){t.updateProperty(e,n),r()}),[t,r]),a=i.get(n);return(0,y.jsx)(u.Z,{checked:"true"===a.getValue(),label:(0,y.jsxs)(c.Fragment,{children:[(0,y.jsx)(d.x1,{noMargin:!0,children:a.getLabel()}),(0,y.jsx)(un.Z,{style:{display:"inline"},children:(0,y.jsx)(pn.r,{source:a.getDescription()})})]}),onCheck:function(e,t){o(n,t?"1":"0")}})},bn=function(e){var t=e.objectConfiguration,n=e.propertyName,r=e.project,i=e.resourceManagementProps,o=e.onChange,a=(0,$.Z)(),s=c.useRef(x.Z).current,l=t.getProperties(),u=c.useCallback((function(e,n){t.updateProperty(e,n),o(n),a()}),[t,o,a]),d=l.get(n),p=d.getExtraInfo(),f=d.getValue(),h=d.getLabel();return(0,y.jsx)(g.Z,{project:r,resourceKind:p.size()>0?p.at(0):"",floatingLabelText:h,resourceManagementProps:i,initialResourceName:f,onChange:function(e){e!==f&&u(n,e)},resourcesLoader:s,fullWidth:!0})},Cn=n.g.gd,jn=(0,Ee.x)("model3d-animations-list"),yn={rowContainer:{display:"flex",flexDirection:"column",marginTop:5},rowContent:{display:"flex",flex:1,alignItems:"center"}},Zn=1/65536,kn=function(e){for(var t=e.length-1;t>0;t--){if("."===e.charAt(t))return e.substring(0,t);if("0"!==e.charAt(t))return e}return e},wn=function(e){if(!e)return!0;for(var t=0;t<e.getLayersCount();t++){var n=e.getLayerAt(t);if("2d"!==n.getRenderingType())for(var r=n.getEffects(),i=0;i<r.getEffectsCount();i++){var o=r.getEffectAt(i).getEffectType();if("Scene3D::AmbientLight"===o||"Scene3D::DirectionalLight"===o||"Scene3D::HemisphereLight"===o)return!0}}return!1},Tn=function(e){var t=e.objectConfiguration,n=e.project,r=e.layout,i=e.object,o=e.onSizeUpdated,a=e.onObjectUpdated,p=e.resourceManagementProps,f=e.renderObjectNameField,g=c.useRef(null),x=c.useState(null),v=(0,N.Z)(x,2),b=v[0],C=v[1],j=c.useRef(null);c.useEffect((function(){g.current&&j.current&&b&&(g.current.scrollTo(j.current),C(null),j.current=null)}),[b]);var Z=(0,pe.Z)().showAlert,k=c.useRef(null),w=c.useContext(re.Z),S=(0,$.Z)(),P=Cn.asModel3DConfiguration(t),E=t.getProperties(),I=c.useState({}),M=(0,N.Z)(I,2),L=M[0],A=M[1],F=c.useCallback((function(e,n){t.updateProperty(e,n),S()}),[t,S]),O=c.useState(null),R=(0,N.Z)(O,2),D=R[0],V=R[1],z=c.useCallback(function(){var e=(0,B.Z)((0,_.Z)().mark((function e(t){var r;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hn.Z.get3DModel(n,t);case 2:r=e.sent,V(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]);D||z(E.get("modelResourceName").getValue());var G=c.useMemo((function(){if(!D)return null;var e=gn.clone(D.scene),t=new xn.Group;return t.rotation.order="ZYX",t.add(e),t}),[D]),Y=c.useState((function(){return E.get("originLocation").getValue()})),q=(0,N.Z)(Y,2),X=q[0],K=q[1],J=c.useCallback((function(e,t,n){F("originLocation",n),K(n)}),[F]),Q=c.useState((function(){return parseFloat(E.get("rotationX").getValue())||0})),ee=(0,N.Z)(Q,2),te=ee[0],ne=ee[1],ie=c.useState((function(){return parseFloat(E.get("rotationY").getValue())||0})),oe=(0,N.Z)(ie,2),ae=oe[0],se=oe[1],le=c.useState((function(){return parseFloat(E.get("rotationZ").getValue())||0})),ce=(0,N.Z)(le,2),de=ce[0],fe=ce[1],he=c.useCallback((function(){ne(parseFloat(E.get("rotationX").getValue())),se(parseFloat(E.get("rotationY").getValue())),fe(parseFloat(E.get("rotationZ").getValue()))}),[E]),ge=c.useMemo((function(){if(!G)return null;G.rotation.set(te*Math.PI/180,ae*Math.PI/180,de*Math.PI/180),G.updateMatrixWorld(!0);var e=(new xn.Box3).setFromObject(G);"ModelOrigin"===X&&e.expandByPoint(new xn.Vector3(0,0,0));var t=e.max.x-e.min.x,n=e.max.y-e.min.y,r=e.max.z-e.min.z;return{x:t<Zn?0:t,y:n<Zn?0:n,z:r<Zn?0:r}}),[G,X,te,ae,de]),xe=c.useState((function(){return parseFloat(E.get("width").getValue())||0})),me=(0,N.Z)(xe,2),ve=me[0],be=me[1],Ce=c.useState((function(){return parseFloat(E.get("height").getValue())||0})),je=(0,N.Z)(Ce,2),ye=je[0],Ze=je[1],ke=c.useState((function(){return parseFloat(E.get("depth").getValue())||0})),we=(0,N.Z)(ke,2),Ee=we[0],Le=we[1],Ae=c.useCallback((function(){be(parseFloat(E.get("width").getValue())),Ze(parseFloat(E.get("height").getValue())),Le(parseFloat(E.get("depth").getValue()))}),[E]),Fe=c.useMemo((function(){return ge?Math.min(ge.x<Zn?Number.POSITIVE_INFINITY:ve/ge.x,ge.y<Zn?Number.POSITIVE_INFINITY:ye/ge.y,ge.z<Zn?Number.POSITIVE_INFINITY:Ee/ge.z):null}),[Ee,ye,ge,ve]),Oe=c.useCallback((function(e){if(ge){var n=e*ge.x,r=e*ge.y,i=e*ge.z;t.updateProperty("width",n.toString(10)),t.updateProperty("height",r.toString(10)),t.updateProperty("depth",i.toString(10)),Ae(),S()}}),[S,ge,t,Ae]),Re=c.useCallback((function(){if(D){A({});var e,t=(0,W.mapFor)(0,P.getAnimationsCount(),(function(e){return P.getAnimation(e).getSource()})),n=!1,r=(0,H.Z)(D.animations);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(!t.includes(i.name)){var s=P.hasAnimationNamed(i.name)?"":i.name,l=new Cn.Model3DAnimation;l.setName(s),l.setSource(i.name),P.addAnimation(l),l.delete(),n=!0}}}catch(c){r.e(c)}finally{r.f()}n?(S(),o(),a&&a(),setTimeout((function(){g.current&&g.current.scrollToBottom()}),100)):Z({title:{id:"No new animation"},message:{id:"Every animation from the GLB file is already in the list."}})}}),[S,D,P,a,o,Z]),De=c.useCallback((function(){A({});var e=new Cn.Model3DAnimation;P.addAnimation(e),e.delete(),S(),o(),a&&a(),setTimeout((function(){g.current&&g.current.scrollToBottom()}),100)}),[S,a,o,P]),_e=c.useCallback((function(e){A({}),P.removeAnimation(e),S(),o(),a&&a()}),[S,a,o,P]),Be=c.useCallback((function(e){var t=k.current;null!==t&&(A({}),P.moveAnimation(t,e>t?e-1:e),S())}),[P,S]),He=c.useCallback((function(e,t){var o=P.getAnimation(e).getName();if(o!==t){var c=P.getAnimation(e);A({}),""!==t&&P.hasAnimationNamed(t)?A((0,s.Z)((0,s.Z)({},L),{},(0,U.Z)({},e,(0,y.jsx)(l.Trans,{id:"The animation name {newName} is already taken",values:{newName:t}})))):(c.setName(t),r&&i&&Cn.WholeProjectRefactorer.renameObjectAnimation(n,r,i,o,t),S(),a&&a())}}),[P,r,i,S,a,L,n]),Ve=D?D.animations.map((function(e){return(0,y.jsx)(st.Z,{value:e.name,label:e.name,shouldNotTranslate:!0},e.name)})):[];return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(dt.Z,{ref:g,children:(0,y.jsxs)(h.ak,{noMargin:!0,children:[f&&f(),(0,y.jsx)(bn,{objectConfiguration:t,propertyName:"modelResourceName",project:n,resourceManagementProps:p,onChange:function(e){z(e)}}),(0,y.jsxs)(at.Z,{value:E.get("materialType").getValue(),floatingLabelText:E.get("materialType").getLabel(),helperMarkdownText:E.get("materialType").getDescription(),onChange:function(e,t,n){F("materialType",n)},children:[(0,y.jsx)(st.Z,{label:{id:"No lighting effect"},value:"Basic"},"Basic"),(0,y.jsx)(st.Z,{label:{id:"Emit all ambient light"},value:"StandardWithoutMetalness"},"StandardWithoutMetalness"),(0,y.jsx)(st.Z,{label:{id:"Keep model material"},value:"KeepOriginal"},"KeepOriginal")]}),"Basic"!==E.get("materialType").getValue()&&!wn(r)&&(0,y.jsx)(jt.Z,{kind:"error",children:(0,y.jsx)(l.Trans,{id:'Make sure to set up a light in the effects of the layer or chose "No lighting effect" - otherwise the object will appear black.'})}),(0,y.jsx)(T.Z,{size:"block-title",noMargin:!0,children:(0,y.jsx)(l.Trans,{id:"Default orientation"})}),(0,y.jsxs)(h.ep,{expand:!0,noColumnMargin:!0,children:[(0,y.jsx)(mn,{objectConfiguration:t,propertyName:"rotationX",onChange:he}),(0,y.jsx)(mn,{objectConfiguration:t,propertyName:"rotationY",onChange:he}),(0,y.jsx)(mn,{objectConfiguration:t,propertyName:"rotationZ",onChange:he})]}),(0,y.jsx)(T.Z,{size:"block-title",noMargin:!0,children:(0,y.jsx)(l.Trans,{id:"Default size"})}),(0,y.jsxs)(h.ep,{expand:!0,noColumnMargin:!0,children:[(0,y.jsx)(mn,{objectConfiguration:t,propertyName:"width",onChange:Ae}),(0,y.jsx)(mn,{objectConfiguration:t,propertyName:"height",onChange:Ae}),(0,y.jsx)(mn,{objectConfiguration:t,propertyName:"depth",onChange:Ae})]}),(0,y.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,y.jsx)(m.Z,{floatingLabelFixed:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Scaling factor"}),onChange:function(e){return Oe(parseFloat(e)||0)},value:null===Fe?"":kn(Fe.toPrecision(5))})},"ScalingRatio"),(0,y.jsx)(vn,{objectConfiguration:t,propertyName:"keepAspectRatio"}),(0,y.jsx)(T.Z,{size:"block-title",noMargin:!0,children:(0,y.jsx)(l.Trans,{id:"Points"})}),(0,y.jsxs)(h.ep,{expand:!0,noColumnMargin:!0,children:[(0,y.jsxs)(at.Z,{value:X,floatingLabelText:E.get("originLocation").getLabel(),helperMarkdownText:E.get("originLocation").getDescription(),onChange:J,fullWidth:!0,children:[(0,y.jsx)(st.Z,{label:{id:"Model origin"},value:"ModelOrigin"},"ModelOrigin"),(0,y.jsx)(st.Z,{label:{id:"Top-left corner"},value:"TopLeft"},"TopLeftCorner"),(0,y.jsx)(st.Z,{label:{id:"Object center"},value:"ObjectCenter"},"ObjectCenter"),(0,y.jsx)(st.Z,{label:{id:"Bottom center (on Z axis)"},value:"BottomCenterZ"},"BottomCenterZ"),(0,y.jsx)(st.Z,{label:{id:"Bottom center (on Y axis)"},value:"BottomCenterY"},"BottomCenterY")]}),(0,y.jsxs)(at.Z,{value:E.get("centerLocation").getValue(),floatingLabelText:E.get("centerLocation").getLabel(),helperMarkdownText:E.get("centerLocation").getDescription(),onChange:function(e,t,n){F("centerLocation",n)},fullWidth:!0,children:[(0,y.jsx)(st.Z,{label:{id:"Model origin"},value:"ModelOrigin"},"ModelOrigin"),(0,y.jsx)(st.Z,{label:{id:"Object center"},value:"ObjectCenter"},"ObjectCenter"),(0,y.jsx)(st.Z,{label:{id:"Bottom center (on Z axis)"},value:"BottomCenterZ"},"BottomCenterZ"),(0,y.jsx)(st.Z,{label:{id:"Bottom center (on Y axis)"},value:"BottomCenterY"},"BottomCenterY")]})]}),(0,y.jsx)(T.Z,{size:"block-title",children:"Animations"}),(0,y.jsx)(d.sg,{noMargin:!0,expand:!0,useFullHeight:!0,children:0===P.getAnimationsCount()?(0,y.jsx)(d.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,y.jsx)(Se.$,{title:(0,y.jsx)(l.Trans,{id:"Add your first animation"}),description:(0,y.jsx)(l.Trans,{id:"Animations are a sequence of images."}),actionLabel:(0,y.jsx)(l.Trans,{id:"Add an animation"}),helpPagePath:"/objects/sprite",tutorialId:"intermediate-changing-animations",onAction:De})}):(0,y.jsx)(c.Fragment,{children:(0,W.mapFor)(0,P.getAnimationsCount(),(function(e){var t=P.getAnimation(e),n=b===t.getName()?j:null;return(0,y.jsx)(jn,{beginDrag:function(){return k.current=e,{}},canDrag:function(){return!0},canDrop:function(){return!0},drop:function(){Be(e)},children:function(r){var i=r.connectDragSource,o=r.connectDropTarget,a=r.isOver,c=r.canDrop;return o((0,y.jsxs)("div",{style:yn.rowContainer,children:[a&&(0,y.jsx)(Me.Z,{canDrop:c}),(0,y.jsxs)("div",{ref:n,style:(0,s.Z)((0,s.Z)({},yn.rowContent),{},{backgroundColor:w.list.itemsBackgroundColor}),children:[(0,y.jsxs)(d.x1,{noMargin:!0,expand:!0,alignItems:"center",children:[i((0,y.jsx)("span",{children:(0,y.jsx)(d.sg,{children:(0,y.jsx)(Ie.V,{})})})),(0,y.jsx)(T.Z,{noMargin:!0,noShrink:!0,children:(0,y.jsx)(l.Trans,{id:"Animation #{animationIndex}",values:{animationIndex:e}})}),(0,y.jsx)(d.LZ,{}),(0,y.jsx)(m.Z,{margin:"none",commitOnBlur:!0,errorText:L[e],translatableHintText:{id:"Optional animation name"},value:t.getName(),onChange:function(t){return He(e,t)},fullWidth:!0}),(0,y.jsx)(Te.Z,{size:"small",onClick:function(){return _e(e)},children:(0,y.jsx)(Pe.Z,{})})]}),(0,y.jsx)(d.LZ,{})]}),(0,y.jsx)(d.LZ,{}),(0,y.jsxs)(h.ak,{expand:!0,children:[(0,y.jsx)(at.Z,{id:"animation-source-field",value:t.getSource(),onChange:function(e,n){t.setSource(e.target.value),S()},margin:"dense",fullWidth:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"GLB animation name"}),translatableHintText:{id:"Choose an animation"},children:Ve}),(0,y.jsx)(u.Z,{label:(0,y.jsx)(l.Trans,{id:"Loop"}),checked:t.shouldLoop(),onCheck:function(e,n){t.setShouldLoop(n),S()}})]})]},e))}},e)}))})})]})}),(0,y.jsx)(d.sg,{noMargin:!0,children:(0,y.jsxs)(h.ep,{justifyContent:"space-between",noColumnMargin:!0,children:[(0,y.jsx)(Ne.Z,{label:(0,y.jsx)(l.Trans,{id:"Scan missing animations"}),onClick:Re}),(0,y.jsx)(Ue.Z,{label:(0,y.jsx)(l.Trans,{id:"Add an animation"}),primary:!0,onClick:De,icon:(0,y.jsx)(ue.Z,{})})]})})]})},Sn=[{id:"frontFace",blockName:(0,y.jsx)(l.Trans,{id:"Front face"}),visibilityProperty:"frontFaceVisible",resourceRepeatProperty:"frontFaceResourceRepeat",resourceNameProperty:"frontFaceResourceName",newResourceNameSuffix:"Front"},{id:"backFace",blockName:(0,y.jsx)(l.Trans,{id:"Back face"}),visibilityProperty:"backFaceVisible",resourceRepeatProperty:"backFaceResourceRepeat",resourceNameProperty:"backFaceResourceName",newResourceNameSuffix:"Back"},{id:"leftFace",blockName:(0,y.jsx)(l.Trans,{id:"Left face"}),visibilityProperty:"leftFaceVisible",resourceRepeatProperty:"leftFaceResourceRepeat",resourceNameProperty:"leftFaceResourceName",newResourceNameSuffix:"Left"},{id:"rightFace",blockName:(0,y.jsx)(l.Trans,{id:"Right face"}),visibilityProperty:"rightFaceVisible",resourceRepeatProperty:"rightFaceResourceRepeat",resourceNameProperty:"rightFaceResourceName",newResourceNameSuffix:"Right"},{id:"topFace",blockName:(0,y.jsx)(l.Trans,{id:"Top face"}),visibilityProperty:"topFaceVisible",resourceRepeatProperty:"topFaceResourceRepeat",resourceNameProperty:"topFaceResourceName",newResourceNameSuffix:"Top"},{id:"bottomFace",blockName:(0,y.jsx)(l.Trans,{id:"Bottom face"}),visibilityProperty:"bottomFaceVisible",resourceRepeatProperty:"bottomFaceResourceRepeat",resourceNameProperty:"bottomFaceResourceName",newResourceNameSuffix:"Bottom"}],Pn=function(e){var t=e.objectConfiguration,n=e.project,r=e.layout,i=e.resourceManagementProps,o=e.objectName,a=e.renderObjectNameField,s=(0,$.Z)(),p=t.getProperties(),f=c.useCallback((function(e,n){t.updateProperty(e,n),s()}),[t,s]),g=p.get("facesOrientation").getExtraInfo().toJSArray().map((function(e){return{value:e,label:e}})),x=p.get("backFaceUpThroughWhichAxisRotation").getExtraInfo().toJSArray().map((function(e){return{value:e,label:e}}));return(0,y.jsxs)(h.ak,{noMargin:!0,children:[a&&a(),(0,y.jsx)(T.Z,{size:"block-title",noMargin:!0,children:(0,y.jsx)(l.Trans,{id:"Default size"})}),(0,y.jsx)(h.ep,{expand:!0,noColumnMargin:!0,children:["width","height","depth"].map((function(e){var t=p.get(e),n=t.getMeasurementUnit(),r={label:(0,tn.j)(n),tooltipContent:(0,y.jsx)(fn.Z,{label:n.getLabel(),description:n.getDescription(),elementsWithWords:n.getElementsWithWords()})};return(0,y.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,y.jsx)(m.Z,{commitOnBlur:!0,floatingLabelFixed:!0,floatingLabelText:t.getLabel(),onChange:function(t){return f(e,t)},value:t.getValue(),endAdornment:(0,y.jsx)(C.ZP,{title:r.tooltipContent,children:(0,y.jsx)(dn.Z,{position:"end",children:r.label})}),id:"cube3d-object-".concat(e)})},e)}))}),(0,y.jsx)(T.Z,{size:"block-title",noMargin:!0,children:(0,y.jsx)(l.Trans,{id:"Settings"})}),(0,y.jsxs)(h.ak,{noMargin:!0,expand:!0,children:[(0,y.jsx)(u.Z,{checked:"true"===p.get("enableTextureTransparency").getValue(),label:(0,y.jsxs)(c.Fragment,{children:[(0,y.jsx)(d.x1,{noMargin:!0,children:p.get("enableTextureTransparency").getLabel()}),(0,y.jsx)(un.Z,{style:{display:"inline"},children:(0,y.jsx)(pn.r,{source:p.get("enableTextureTransparency").getDescription()})})]}),onCheck:function(e,t){f("enableTextureTransparency",t?"1":"0")}}),(0,y.jsx)(at.Z,{value:p.get("facesOrientation").getValue(),floatingLabelText:p.get("facesOrientation").getLabel(),helperMarkdownText:p.get("facesOrientation").getDescription(),onChange:function(e,t,n){f("facesOrientation",n)},children:g.map((function(e){return(0,y.jsx)(st.Z,{label:e.label,value:e.value},e.value)}))}),(0,y.jsx)(at.Z,{value:p.get("backFaceUpThroughWhichAxisRotation").getValue(),floatingLabelText:p.get("backFaceUpThroughWhichAxisRotation").getLabel(),helperMarkdownText:p.get("backFaceUpThroughWhichAxisRotation").getDescription(),onChange:function(e,t,n){f("backFaceUpThroughWhichAxisRotation",n)},children:x.map((function(e){return(0,y.jsx)(st.Z,{label:e.label,value:e.value},e.value)}))}),(0,y.jsxs)(at.Z,{value:p.get("materialType").getValue(),floatingLabelText:p.get("materialType").getLabel(),helperMarkdownText:p.get("materialType").getDescription(),onChange:function(e,t,n){f("materialType",n)},children:[(0,y.jsx)(st.Z,{label:{id:"No lighting effect"},value:"Basic"},"Basic"),(0,y.jsx)(st.Z,{label:{id:"React to lights"},value:"StandardWithoutMetalness"},"StandardWithoutMetalness")]}),"Basic"!==p.get("materialType").getValue()&&!wn(r)&&(0,y.jsx)(jt.Z,{kind:"error",children:(0,y.jsx)(l.Trans,{id:'Make sure to set up a light in the effects of the layer or chose "No lighting effect" - otherwise the object will appear black.'})})]}),Sn.map((function(e){return(0,y.jsxs)(c.Fragment,{children:[(0,y.jsx)(T.Z,{size:"block-title",children:e.blockName}),(0,y.jsxs)(h.ak,{noMargin:!0,children:[(0,y.jsxs)(h.ak,{noMargin:!0,children:[(0,y.jsx)(u.Z,{checked:"true"===p.get(e.visibilityProperty).getValue(),label:p.get(e.visibilityProperty).getLabel(),onCheck:function(t,n){f(e.visibilityProperty,n?"1":"0")},id:"cube3d-object-".concat(e.visibilityProperty)}),(0,y.jsx)(u.Z,{checked:"true"===p.get(e.resourceRepeatProperty).getValue(),label:p.get(e.resourceRepeatProperty).getLabel(),onCheck:function(t,n){f(e.resourceRepeatProperty,n?"1":"0")},id:"cube3d-object-".concat(e.resourceRepeatProperty)})]}),(0,y.jsx)(A.Z,{project:n,resourceKind:"image",floatingLabelText:p.get(e.resourceNameProperty).getLabel(),resourceManagementProps:i,resourceName:p.get(e.resourceNameProperty).getValue(),defaultNewResourceName:o+"_"+e.newResourceNameSuffix,onChange:function(t){return f(e.resourceNameProperty,t)},id:"cube3d-object-".concat(e.resourceNameProperty)})]})]},e.id)}))]})},En=n.g.gd,In=(0,Ee.x)("spine-animations-list"),Mn={rowContainer:{display:"flex",flexDirection:"column",marginTop:5},rowContent:{display:"flex",flex:1,alignItems:"center"}},Ln=function(e){var t=e.objectConfiguration,n=e.project,r=e.layout,i=e.object,o=e.onSizeUpdated,a=e.onObjectUpdated,p=e.resourceManagementProps,f=e.renderObjectNameField,g=c.useRef(null),x=c.useState(null),v=(0,N.Z)(x,2),b=v[0],C=v[1],j=c.useRef(null);c.useEffect((function(){g.current&&j.current&&b&&(g.current.scrollTo(j.current),C(null),j.current=null)}),[b]);var Z=(0,pe.Z)().showAlert,k=c.useRef(null),w=c.useContext(re.Z),S=(0,$.Z)(),P=En.asSpineConfiguration(t),E=t.getProperties(),I=c.useState({}),M=(0,N.Z)(I,2),L=M[0],A=M[1],F=c.useState({skeleton:null,loadingError:null,loadingErrorReason:null}),O=(0,N.Z)(F,2),R=O[0],D=O[1],V=c.useState([]),z=(0,N.Z)(V,2),G=z[0],Y=z[1],q=E.get("spineResourceName").getValue();c.useEffect((function(){(0,B.Z)((0,_.Z)().mark((function e(){var t;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hn.Z.getSpineData(n,q);case 2:t=e.sent,D(t),t.skeleton&&Y(t.skeleton.animations.map((function(e){return(0,y.jsx)(st.Z,{value:e.name,label:e.name,shouldNotTranslate:!0},e.name)})));case 5:case"end":return e.stop()}}),e)})))()}),[n,q,Y]);var X=c.useCallback((function(){P.removeAllAnimations(),S()}),[S,P]),K=c.useCallback((function(){var e=R.skeleton;if(e){A({});var t,n=(0,W.mapFor)(0,P.getAnimationsCount(),(function(e){return P.getAnimation(e).getSource()})),r=!1,i=(0,H.Z)(e.animations);try{for(i.s();!(t=i.n()).done;){var s=t.value;if(!n.includes(s.name)){var l=P.hasAnimationNamed(s.name)?"":s.name,c=new En.SpineAnimation;c.setName(l),c.setSource(s.name),P.addAnimation(c),c.delete(),r=!0}}}catch(u){i.e(u)}finally{i.f()}r?(S(),o(),a&&a(),setTimeout((function(){g.current&&g.current.scrollToBottom()}),100)):Z({title:{id:"No new animation"},message:{id:"Every animation from the Spine file is already in the list."}})}}),[S,R,P,a,o,Z]),J=c.useCallback((function(){A({});var e=new En.SpineAnimation;P.addAnimation(e),e.delete(),S(),o(),a&&a(),setTimeout((function(){g.current&&g.current.scrollToBottom()}),100)}),[S,a,o,P]),Q=c.useCallback((function(e){A({}),P.removeAnimation(e),S(),o(),a&&a()}),[S,a,o,P]),ee=c.useCallback((function(e){var t=k.current;null!==t&&(A({}),P.moveAnimation(t,e>t?e-1:e),S())}),[P,S]),te=c.useCallback((function(e,t){var o=P.getAnimation(e).getName();if(o!==t){var c=P.getAnimation(e);A({}),""!==t&&P.hasAnimationNamed(t)?A((0,s.Z)((0,s.Z)({},L),{},(0,U.Z)({},e,(0,y.jsx)(l.Trans,{id:"The animation name {newName} is already taken",values:{newName:t}})))):(c.setName(t),r&&i&&En.WholeProjectRefactorer.renameObjectAnimation(n,r,i,o,t),S(),a&&a())}}),[P,r,i,S,a,L,n]);return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(dt.Z,{ref:g,children:(0,y.jsxs)(h.ak,{noMargin:!0,children:[f&&f(),(0,y.jsx)(jt.Z,{kind:"warning",children:(0,y.jsx)(l.Trans,{id:"You need to own a license of Spine to publish a game with a Spine object."})}),(0,y.jsx)(bn,{objectConfiguration:t,propertyName:"spineResourceName",project:n,resourceManagementProps:p,onChange:X}),!R.skeleton&&R.loadingErrorReason?(0,y.jsx)(jt.Z,{kind:"error",children:"invalid-spine-resource"===R.loadingErrorReason?(0,y.jsx)(l.Trans,{id:"The selected resource is not a proper Spine resource."}):"missing-texture-atlas-name"===R.loadingErrorReason?(0,y.jsx)(l.Trans,{id:"Missing texture atlas name in the Spine file."}):"spine-resource-loading-error"===R.loadingErrorReason?(0,y.jsx)(l.Trans,{id:"Error while loading the Spine resource ( {0} ).",values:{0:R.loadingError?R.loadingError.message:"Unknown error"}}):"invalid-atlas-resource"===R.loadingErrorReason?(0,y.jsx)(l.Trans,{id:"The Atlas embedded in the Spine fine can't be located."}):"missing-texture-resources"===R.loadingErrorReason?(0,y.jsx)(l.Trans,{id:"Missing texture for an atlas in the Spine file."}):"atlas-resource-loading-error"===R.loadingErrorReason?(0,y.jsx)(l.Trans,{id:"Error while loading the Spine Texture Atlas resource ( {0} ).",values:{0:R.loadingError?R.loadingError.message:"Unknown error"}}):null}):null,(0,y.jsx)(T.Z,{size:"block-title",noMargin:!0,children:(0,y.jsx)(l.Trans,{id:"Default size"})}),(0,y.jsx)(mn,{objectConfiguration:t,propertyName:"scale"}),G.length&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(T.Z,{size:"block-title",children:"Animations"}),(0,y.jsx)(d.sg,{noMargin:!0,expand:!0,useFullHeight:!0,children:0===P.getAnimationsCount()?(0,y.jsx)(d.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,y.jsx)(Se.$,{title:(0,y.jsx)(l.Trans,{id:"Add your first animation"}),description:(0,y.jsx)(l.Trans,{id:"Import one or more animations that are available in this Spine file."}),actionLabel:(0,y.jsx)(l.Trans,{id:"Add an animation"}),onAction:J})}):(0,y.jsx)(c.Fragment,{children:(0,W.mapFor)(0,P.getAnimationsCount(),(function(e){var t=P.getAnimation(e),n=b===t.getName()?j:null;return(0,y.jsx)(In,{beginDrag:function(){return k.current=e,{}},canDrag:function(){return!0},canDrop:function(){return!0},drop:function(){ee(e)},children:function(r){var i=r.connectDragSource,o=r.connectDropTarget,a=r.isOver,c=r.canDrop;return o((0,y.jsxs)("div",{style:Mn.rowContainer,children:[a&&(0,y.jsx)(Me.Z,{canDrop:c}),(0,y.jsxs)("div",{ref:n,style:(0,s.Z)((0,s.Z)({},Mn.rowContent),{},{backgroundColor:w.list.itemsBackgroundColor}),children:[(0,y.jsxs)(d.x1,{noMargin:!0,expand:!0,alignItems:"center",children:[i((0,y.jsx)("span",{children:(0,y.jsx)(d.sg,{children:(0,y.jsx)(Ie.V,{})})})),(0,y.jsx)(T.Z,{noMargin:!0,noShrink:!0,children:(0,y.jsx)(l.Trans,{id:"Animation #{animationIndex}",values:{animationIndex:e}})}),(0,y.jsx)(d.LZ,{}),(0,y.jsx)(m.Z,{margin:"none",commitOnBlur:!0,errorText:L[e],translatableHintText:{id:"Optional animation name"},value:t.getName(),onChange:function(t){return te(e,t)},fullWidth:!0}),(0,y.jsx)(Te.Z,{size:"small",onClick:function(){return Q(e)},children:(0,y.jsx)(Pe.Z,{})})]}),(0,y.jsx)(d.LZ,{})]}),(0,y.jsx)(d.LZ,{}),(0,y.jsxs)(h.ak,{expand:!0,children:[(0,y.jsx)(at.Z,{id:"animation-source-field",value:t.getSource(),onChange:function(e,n){t.setSource(e.target.value),S()},margin:"dense",fullWidth:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Spine animation name"}),translatableHintText:{id:"Choose an animation"},children:G}),(0,y.jsx)(u.Z,{label:(0,y.jsx)(l.Trans,{id:"Loop"}),checked:t.shouldLoop(),onCheck:function(e,n){t.setShouldLoop(n),S()}})]})]},e))}},e)}))})}),(0,y.jsx)(d.sg,{noMargin:!0,children:(0,y.jsxs)(h.ep,{justifyContent:"space-between",noColumnMargin:!0,children:[(0,y.jsx)(Ne.Z,{label:(0,y.jsx)(l.Trans,{id:"Scan missing animations"}),onClick:K}),(0,y.jsx)(Ue.Z,{label:(0,y.jsx)(l.Trans,{id:"Add an animation"}),primary:!0,onClick:J,icon:(0,y.jsx)(ue.Z,{})})]})})]})]})})})},An=n.g.gd,Fn={getEditorConfiguration:function(e,t){if(this.editorConfigurations[t])return this.editorConfigurations[t];if(e.hasEventsBasedObject(t)){var n=An.MetadataProvider.getObjectMetadata(An.JsPlatform.get(),t);return this.getCustomObjectPropertiesEditor({helpPagePath:n.getHelpPath()})}return console.warn("Object with type ".concat(t," has no editor configuration registered. Please use registerEditorConfiguration to register your editor.")),this.getDefaultObjectJsImplementationPropertiesEditor({helpPagePath:""})},registerEditorConfiguration:function(e,t){t.component?t.createNewObject?t.castToObjectType?this.editorConfigurations.hasOwnProperty(e)?console.warn('Tried to register editor configuration for object "'.concat(e,'", but an editor configuration already exists.')):this.editorConfigurations[e]=t:console.warn('Tried to register editor configuration for object "'.concat(e,'", but "castToObjectType" property is not defined.')):console.warn('Tried to register editor configuration for object "'.concat(e,'", but "createNewObject" property is not defined.')):console.warn('Tried to register editor configuration for object "'.concat(e,'", but "component" property is not defined.'))},getDefaultObjectJsImplementationPropertiesEditor:function(e){return{component:on,createNewObject:function(e){return An.asObjectJsImplementation(e).clone().release()},castToObjectType:function(e){return An.asObjectJsImplementation(e)},helpPagePath:e.helpPagePath}},getCustomObjectPropertiesEditor:function(e){return{component:cn,createNewObject:function(e){return An.asCustomObjectConfiguration(An.asCustomObjectConfiguration(e).clone().release())},castToObjectType:function(e){return An.asCustomObjectConfiguration(e)},helpPagePath:e.helpPagePath}},editorConfigurations:{Sprite:{component:function(e){var t=e.objectConfiguration,n=e.project,r=e.layout,i=e.object,o=e.objectName,a=e.resourceManagementProps,s=e.onSizeUpdated,p=e.onObjectUpdated,f=e.isChildObject,g=e.renderObjectNameField,m=c.useState(!1),v=(0,N.Z)(m,2),b=v[0],C=v[1],j=c.useState(!1),Z=(0,N.Z)(j,2),k=Z[0],w=Z[1],T=c.useState(!1),S=(0,N.Z)(T,2),P=S[0],E=S[1],I=(0,$.Z)(),M=Gt.asSpriteConfiguration(t),L=M.getAnimations(),A=(0,J.U)().isMobile,F=c.useRef(null),O=c.useRef(null),R=c.useState(null),D=(0,N.Z)(R,2),U=D[0],H=D[1],V=c.useRef(null);c.useEffect((function(){F.current&&V.current&&U&&(F.current.scrollTo(V.current),H(null),V.current=null)}),[U]);var z=c.useCallback((0,B.Z)((0,_.Z)().mark((function e(){var t,r,i,o;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,se.Ng)(L)){e.next=3;break}return e.abrupt("return");case 3:return r=t.getImageName(),i=x.Z.getResourceFullUrl(n,r,{}),o=null,e.prev=6,e.next=9,Wt(i);case 9:o=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),console.error("Unable to create a matching collision mask for the sprite, fallback to full image collision mask.",e.t0);case 15:(0,se.E8)(L,o),I();case 17:case"end":return e.stop()}}),e,null,[[6,12]])}))),[L,n,I]);return(0,y.jsx)(l.I18n,{children:function(e){e.i18n;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(dt.Z,{ref:F,style:Yt.scrollView,children:[g&&g(),(0,y.jsx)(Bt,{}),(0,y.jsx)(Be,{ref:O,animations:L,project:n,layout:r,object:i,objectName:o,resourceManagementProps:a,onSizeUpdated:s,onObjectUpdated:p,isAnimationListLocked:f,scrollView:F,onCreateMatchingSpriteCollisionMask:z})]}),(0,y.jsx)(d.sg,{noMargin:!0,children:(0,y.jsxs)(h.ep,{justifyContent:"space-between",noColumnMargin:!0,children:[A?(0,y.jsx)(Nt.Z,{label:(0,y.jsx)(l.Trans,{id:"Edit collision masks"}),onClick:function(){return E(!0)},disabled:!(0,se.K3)(L),buildMenuTemplate:function(e){return[{label:e._({id:"Edit points"}),disabled:!(0,se.K3)(L),click:function(){return C(!0)}},f?{label:e._({id:"Advanced options"}),disabled:!(0,se.K3)(L),click:function(){return w(!0)}}:null].filter(Boolean)}}):(0,y.jsxs)(h.ep,{noMargin:!0,noColumnMargin:!0,children:[(0,y.jsx)(Ne.Z,{label:(0,y.jsx)(l.Trans,{id:"Edit collision masks"}),onClick:function(){return E(!0)},disabled:!(0,se.K3)(L)}),(0,y.jsx)(Ne.Z,{label:(0,y.jsx)(l.Trans,{id:"Edit points"}),onClick:function(){return C(!0)},disabled:!(0,se.K3)(L)}),!f&&(0,y.jsx)(Ne.Z,{label:(0,y.jsx)(l.Trans,{id:"Advanced options"}),onClick:function(){return w(!0)},disabled:!(0,se.K3)(L)})]}),!f&&(0,y.jsx)(Ue.Z,{label:(0,y.jsx)(l.Trans,{id:"Add an animation"}),primary:!0,onClick:function(){O.current&&O.current.addAnimation()},icon:(0,y.jsx)(ue.Z,{})})]})}),k&&(0,y.jsx)(X.ZP,{title:(0,y.jsx)(l.Trans,{id:"Advanced options"}),actions:[(0,y.jsx)(Ne.Z,{label:(0,y.jsx)(l.Trans,{id:"Close"}),primary:!0,onClick:function(){return w(!1)}},"close")],maxWidth:"sm",flexBody:!0,onRequestClose:function(){return w(!1)},open:!0,children:(0,y.jsx)(d.sg,{noMargin:!0,children:(0,y.jsx)(u.Z,{label:(0,y.jsx)(l.Trans,{id:"Don't play the animation when the object is far from the camera or hidden (recommended for performance)"}),checked:!M.getUpdateIfNotVisible(),onCheck:function(e,t){M.setUpdateIfNotVisible(!t),I(),p&&p()}})})}),b&&(0,y.jsx)(X.ZP,{title:(0,y.jsx)(l.Trans,{id:"Edit points"}),actions:[(0,y.jsx)(Ne.Z,{label:(0,y.jsx)(l.Trans,{id:"Close"}),primary:!0,onClick:function(){return C(!1)}},"close")],secondaryActions:[(0,y.jsx)(He.Z,{helpPagePath:"/objects/sprite/edit-points"},"help")],onRequestClose:function(){return C(!1)},maxWidth:"lg",flexBody:!0,fullHeight:!0,open:b,children:(0,y.jsx)(xt,{animations:L,resourcesLoader:x.Z,project:n,onPointsUpdated:p,onRenamedPoint:function(e,t){return r&&i&&Gt.WholeProjectRefactorer.renameObjectPoint(n,r,i,e,t)}})}),P&&(0,y.jsx)(X.ZP,{title:(0,y.jsx)(l.Trans,{id:"Edit collision masks"}),actions:[(0,y.jsx)(Ne.Z,{label:(0,y.jsx)(l.Trans,{id:"Close"}),primary:!0,onClick:function(){return E(!1)}},"close")],secondaryActions:[(0,y.jsx)(He.Z,{helpPagePath:"/objects/sprite/collision-mask"},"help")],maxWidth:"lg",flexBody:!0,fullHeight:!0,onRequestClose:function(){return E(!1)},open:P,children:(0,y.jsx)(Dt,{animations:L,resourcesLoader:x.Z,project:n,onMasksUpdated:p,onCreateMatchingSpriteCollisionMask:z})})]})}})},createNewObject:function(){return new An.SpriteObject},castToObjectType:function(e){return An.asSpriteConfiguration(e)},helpPagePath:"/objects/sprite"},"Scene3D::Cube3DObject":{component:Pn,createNewObject:function(e){return An.asObjectJsImplementation(e).clone().release()},castToObjectType:function(e){return An.asObjectJsImplementation(e)},helpPagePath:"/objects/3d-box"},"Scene3D::Model3DObject":{component:Tn,createNewObject:function(e){return An.asObjectJsImplementation(e).clone().release()},castToObjectType:function(e){return An.asObjectJsImplementation(e)},helpPagePath:"/objects/3d-model"},"SpineObject::SpineObject":{component:Ln,createNewObject:function(e){return An.asObjectJsImplementation(e).clone().release()},castToObjectType:function(e){return An.asObjectJsImplementation(e)},helpPagePath:"/objects/spine"},"TiledSpriteObject::TiledSprite":{component:O,createNewObject:function(){return new An.TiledSpriteObject},castToObjectType:function(e){return An.asTiledSpriteConfiguration(e)},helpPagePath:"/objects/tiled_sprite"},"PanelSpriteObject::PanelSprite":{component:D,createNewObject:function(){return new An.PanelSpriteObject},castToObjectType:function(e){return An.asPanelSpriteConfiguration(e)},helpPagePath:"/objects/panel_sprite"},"TextObject::Text":{component:L,createNewObject:function(){return new An.TextObject},castToObjectType:function(e){return An.asTextObjectConfiguration(e)},helpPagePath:"/objects/text"},"PrimitiveDrawing::Drawer":{component:Xt,createNewObject:function(){return new An.ShapePainterObject},castToObjectType:function(e){return An.asShapePainterConfiguration(e)},helpPagePath:"/objects/shape_painter"},"TextEntryObject::TextEntry":{component:function(e){var t=e.renderObjectNameField;return(0,y.jsxs)(d.sg,{noMargin:!0,children:[t&&t(),(0,y.jsx)(d.x1,{children:(0,y.jsx)(Ve.Z,{children:(0,y.jsx)(l.Trans,{id:"This object does not have any specific configuration. Add it on the scene and use events to interact with it."})})})]})},createNewObject:function(){return new An.TextEntryObject},castToObjectType:function(e){return An.asTextEntryConfiguration(e)},helpPagePath:"/objects/text_entry"},"ParticleSystem::ParticleEmitter":{component:$t,createNewObject:function(){return new An.ParticleEmitterObject},castToObjectType:function(e){return An.asParticleEmitterConfiguration(e)},helpPagePath:"/objects/particles_emitter"}}}},182:function(e,t,n){"use strict";n.d(t,{Z:function(){return ne}});var r=n(1413),i=n(86289),o=n(15671),a=n(43144),s=n(11752),l=n(61120),c=n(60136),u=n(29388),d=n(79916),p=n(58247),f=n(72410),h=n(36425),g=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,a,s,l){var c;return(0,o.Z)(this,n),(c=t.call(this,e,r,i,a,s,l))._pixiObject=new h.Graphics,c._pixiContainer.addChild(c._pixiObject),c}return(0,a.Z)(n,[{key:"onRemovedFromScene",value:function(){(0,s.Z)((0,l.Z)(n.prototype),"onRemovedFromScene",this).call(this),this._pixiObject.destroy()}},{key:"update",value:function(){var e=this.getWidth(),t=this.getHeight();this._pixiObject.clear(),this._pixiObject.beginFill(13311),this._pixiObject.lineStyle(1,16767232,1),this._pixiObject.moveTo(-e/2,-t/2),this._pixiObject.lineTo(e/2,-t/2),this._pixiObject.lineTo(e/2,t/2),this._pixiObject.lineTo(-e/2,t/2),this._pixiObject.endFill(),this._pixiObject.position.x=this._instance.getX()+e/2,this._pixiObject.position.y=this._instance.getY()+t/2,this._pixiObject.angle=this._instance.getAngle()}}],[{key:"getThumbnail",value:function(e,t,n){return"res/unknown32.png"}}]),n}(d.Z),x=n.g.gd,m=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,a,s,l){var c;return(0,o.Z)(this,n),(c=t.call(this,e,r,i,a,s,l))._sprite=null,c._shouldNotRotate=!1,c._renderedAnimation=0,c._renderedDirection=0,c._centerX=0,c._centerY=0,c._originX=0,c._originY=0,c._pixiObject=new h.Sprite(c._pixiResourcesLoader.getInvalidPIXITexture()),c._pixiContainer.addChild(c._pixiObject),c.updatePIXITextureAndSprite(),c}return(0,a.Z)(n,[{key:"onRemovedFromScene",value:function(){(0,s.Z)((0,l.Z)(n.prototype),"onRemovedFromScene",this).call(this),this._pixiObject.destroy(!1)}},{key:"updatePIXISprite",value:function(){var e=this._pixiObject.texture.frame;e&&(this._pixiObject.anchor.x=this._centerX/e.width,this._pixiObject.anchor.y=this._centerY/e.height,this._pixiObject.rotation=this._shouldNotRotate?0:d.Z.toRad(this._instance.getAngle()),this._instance.hasCustomSize()?(this._pixiObject.scale.x=this.getCustomWidth()/e.width,this._pixiObject.scale.y=this.getCustomHeight()/e.height):(this._pixiObject.scale.x=1,this._pixiObject.scale.y=1),this._pixiObject.position.x=this._instance.getX()+(this._centerX-this._originX)*Math.abs(this._pixiObject.scale.x),this._pixiObject.position.y=this._instance.getY()+(this._centerY-this._originY)*Math.abs(this._pixiObject.scale.y))}},{key:"updateSprite",value:function(){this._sprite=null,this._shouldNotRotate=!1;var e=x.asSpriteConfiguration(this._associatedObjectConfiguration).getAnimations();if(e.hasNoAnimations())return!1;this._renderedAnimation=this._instance.getRawDoubleProperty("animation"),this._renderedAnimation>=e.getAnimationsCount()&&(this._renderedAnimation=0);var t=e.getAnimation(this._renderedAnimation);if(t.hasNoDirections())return!1;if(this._renderedDirection=0,t.useMultipleDirections()){var n=Math.floor(this._instance.getAngle())%360;n<0&&(n+=360),this._renderedDirection=Math.round(n/45)%8}this._renderedDirection>=t.getDirectionsCount()&&(this._renderedDirection=0);var r=t.getDirection(this._renderedDirection);return 0!==r.getSpritesCount()&&(this._shouldNotRotate=t.useMultipleDirections(),this._sprite=r.getSprite(0),!0)}},{key:"updatePIXITextureAndSprite",value:function(){var e=this;this.updateSprite();var t=this._sprite;if(t){var n=this._pixiResourcesLoader.getPIXITexture(this._project,t.getImageName());if(this._pixiObject.texture=n,n.baseTexture.valid){var r=t.getOrigin();if(this._originX=r.getX(),this._originY=r.getY(),t.isDefaultCenterPoint())this._centerX=n.width/2,this._centerY=n.height/2;else{var i=t.getCenter();this._centerX=i.getX(),this._centerY=i.getY()}this.updatePIXISprite()}else n.once("update",(function(){return e.updatePIXITextureAndSprite()}))}}},{key:"update",value:function(){var e=this._instance.getRawDoubleProperty("animation");this._renderedAnimation!==e?this.updatePIXITextureAndSprite():this.updatePIXISprite()}},{key:"getOriginX",value:function(){return this._sprite&&this._pixiObject?this._sprite.getOrigin().getX()*this._pixiObject.scale.x:0}},{key:"getOriginY",value:function(){return this._sprite&&this._pixiObject?this._sprite.getOrigin().getY()*this._pixiObject.scale.y:0}},{key:"getDefaultWidth",value:function(){var e=this._pixiObject.texture.frame;return e?Math.abs(e.width):32}},{key:"getDefaultHeight",value:function(){var e=this._pixiObject.texture.frame;return e?Math.abs(e.height):32}},{key:"getCenterX",value:function(){return this._sprite&&this._pixiObject?this._centerX*this._pixiObject.scale.x:0}},{key:"getCenterY",value:function(){return this._sprite&&this._pixiObject?this._centerY*this._pixiObject.scale.y:0}}],[{key:"getThumbnail",value:function(e,t,n){var r=x.asSpriteConfiguration(n).getAnimations();if(r.getAnimationsCount()>0&&r.getAnimation(0).getDirectionsCount()>0&&r.getAnimation(0).getDirection(0).getSpritesCount()>0){var i=r.getAnimation(0).getDirection(0).getSprite(0).getImageName();return t.getResourceFullUrl(e,i,{})}return"res/unknown32.png"}}]),n}(d.Z),v=n.g.gd,b=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,a,s,l){var c;(0,o.Z)(this,n),c=t.call(this,e,r,i,a,s,l);var u=v.asTiledSpriteConfiguration(a);return c._texture=u.getTexture(),c._pixiObject=new h.TilingSprite(p.Z.getPIXITexture(e,u.getTexture()),u.getWidth(),u.getHeight()),c._pixiObject.anchor.x=.5,c._pixiObject.anchor.y=.5,c._pixiContainer.addChild(c._pixiObject),c}return(0,a.Z)(n,[{key:"onRemovedFromScene",value:function(){(0,s.Z)((0,l.Z)(n.prototype),"onRemovedFromScene",this).call(this),this._pixiObject.destroy(!1)}},{key:"update",value:function(){var e=v.asTiledSpriteConfiguration(this._associatedObjectConfiguration);this._instance.hasCustomSize()?(this._pixiObject.width=this.getCustomWidth(),this._pixiObject.height=this.getCustomHeight()):(this._pixiObject.width=e.getWidth(),this._pixiObject.height=e.getHeight()),this._texture!==e.getTexture()&&(this._texture=e.getTexture(),this._pixiObject.texture=p.Z.getPIXITexture(this._project,e.getTexture())),this._pixiObject.x=this._instance.getX()+this._pixiObject.width/2,this._pixiObject.y=this._instance.getY()+this._pixiObject.height/2,this._pixiObject.rotation=d.Z.toRad(this._instance.getAngle())}},{key:"getDefaultWidth",value:function(){return v.asTiledSpriteConfiguration(this._associatedObjectConfiguration).getWidth()}},{key:"getDefaultHeight",value:function(){return v.asTiledSpriteConfiguration(this._associatedObjectConfiguration).getHeight()}}],[{key:"getThumbnail",value:function(e,t,n){var r=v.asTiledSpriteConfiguration(n);return f.Z.getResourceFullUrl(e,r.getTexture(),{})}}]),n}(d.Z),C=n(37762),j=n.g.gd,y=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,a,s,l){var c;return(0,o.Z)(this,n),(c=t.call(this,e,r,i,a,s,l)).makeObjects(),c.updateTexture(),c}return(0,a.Z)(n,[{key:"update",value:function(){var e=j.asPanelSpriteConfiguration(this._associatedObjectConfiguration);e.isTiled()!==this._tiled&&this.makeObjects(),e.getTexture()!==this._textureName&&this.updateTexture(),this.updateAngle(),this.updatePosition();var t=this._width,n=this._height;if(this._instance.hasCustomSize())this._width=this.getCustomWidth(),this._height=this.getCustomHeight();else{var r=j.asPanelSpriteConfiguration(this._associatedObjectConfiguration);this._width=r.getWidth(),this._height=r.getHeight()}this._width===t&&this._height===n||this.updateWidthHeight()}},{key:"makeObjects",value:function(){var e=j.asPanelSpriteConfiguration(this._associatedObjectConfiguration);this._textureName=e.getTexture();var t=p.Z.getPIXITexture(this._project,this._textureName);this._tiled=e.isTiled();var n=this._tiled?h.TilingSprite:h.Sprite;this._pixiObject||(this._pixiObject=new h.Container,this._pixiContainer.addChild(this._pixiObject)),this._centerSprite=new n(new h.Texture(t)),this._borderSprites=[new n(new h.Texture(t)),new h.Sprite(t),new n(new h.Texture(t)),new h.Sprite(t),new n(new h.Texture(t)),new h.Sprite(t),new n(new h.Texture(t)),new h.Sprite(t)],this._pixiObject.removeChildren(),this._pixiObject.addChild(this._centerSprite);for(var r=0;r<this._borderSprites.length;++r)this._pixiObject.addChild(this._borderSprites[r])}},{key:"onRemovedFromScene",value:function(){(0,s.Z)((0,l.Z)(n.prototype),"onRemovedFromScene",this).call(this);var e,t=(0,C.Z)(this._borderSprites);try{for(t.s();!(e=t.n()).done;){e.value.destroy({texture:!0})}}catch(r){t.e(r)}finally{t.f()}this._centerSprite.destroy({texture:!0}),this._pixiObject.destroy(!1)}},{key:"updateAngle",value:function(){this._pixiObject.rotation=d.Z.toRad(this._instance.getAngle())}},{key:"updatePosition",value:function(){this._pixiObject.x=this._instance.getX()+this._width/2,this._pixiObject.y=this._instance.getY()+this._height/2}},{key:"_updateLocalPositions",value:function(){var e=j.asPanelSpriteConfiguration(this._associatedObjectConfiguration);this._centerSprite.position.x=e.getLeftMargin(),this._centerSprite.position.y=e.getTopMargin(),this._borderSprites[0].position.x=this._width-e.getRightMargin(),this._borderSprites[0].position.y=e.getTopMargin(),this._borderSprites[1].position.x=this._width-this._borderSprites[1].width,this._borderSprites[1].position.y=0,this._borderSprites[2].position.x=e.getLeftMargin(),this._borderSprites[2].position.y=0,this._borderSprites[3].position.x=0,this._borderSprites[3].position.y=0,this._borderSprites[4].position.x=0,this._borderSprites[4].position.y=e.getTopMargin(),this._borderSprites[5].position.x=0,this._borderSprites[5].position.y=this._height-this._borderSprites[5].height,this._borderSprites[6].position.x=e.getLeftMargin(),this._borderSprites[6].position.y=this._height-e.getBottomMargin(),this._borderSprites[7].position.x=this._width-this._borderSprites[7].width,this._borderSprites[7].position.y=this._height-this._borderSprites[7].height}},{key:"_updateSpritesAndTexturesSize",value:function(){var e=j.asPanelSpriteConfiguration(this._associatedObjectConfiguration);this._centerSprite.width=Math.max(this._width-e.getRightMargin()-e.getLeftMargin(),0),this._centerSprite.height=Math.max(this._height-e.getTopMargin()-e.getBottomMargin(),0),this._borderSprites[0].width=e.getRightMargin(),this._borderSprites[0].height=Math.max(this._height-e.getTopMargin()-e.getBottomMargin(),0),this._borderSprites[2].height=e.getTopMargin(),this._borderSprites[2].width=Math.max(this._width-e.getRightMargin()-e.getLeftMargin(),0),this._borderSprites[4].width=e.getLeftMargin(),this._borderSprites[4].height=Math.max(this._height-e.getTopMargin()-e.getBottomMargin(),0),this._borderSprites[6].height=e.getBottomMargin(),this._borderSprites[6].width=Math.max(this._width-e.getRightMargin()-e.getLeftMargin(),0),this._wasRendered=!0,this._pixiObject.cacheAsBitmap=!1}},{key:"updateTexture",value:function(){var e=this,t=j.asPanelSpriteConfiguration(this._associatedObjectConfiguration);this._textureName=t.getTexture();var n=p.Z.getPIXITexture(this._project,this._textureName);function r(e){return e.width<0&&(e.width=0),e.height<0&&(e.height=0),e.x<0&&(e.x=0),e.y<0&&(e.y=0),e.x>n.width&&(e.x=n.width),e.y>n.height&&(e.y=n.height),e.x+e.width>n.width&&(e.width=n.width-e.x),e.y+e.height>n.height&&(e.height=n.height-e.y),e}n.baseTexture.valid?(this._centerSprite.texture=new h.Texture(n,r(new h.Rectangle(t.getLeftMargin(),t.getTopMargin(),n.width-t.getLeftMargin()-t.getRightMargin(),n.height-t.getTopMargin()-t.getBottomMargin()))),this._borderSprites[0].texture=new h.Texture(n,r(new h.Rectangle(n.width-t.getRightMargin(),t.getTopMargin(),t.getRightMargin(),n.height-t.getTopMargin()-t.getBottomMargin()))),this._borderSprites[1].texture=new h.Texture(n,r(new h.Rectangle(n.width-t.getRightMargin(),0,t.getRightMargin(),t.getTopMargin()))),this._borderSprites[2].texture=new h.Texture(n,r(new h.Rectangle(t.getLeftMargin(),0,n.width-t.getLeftMargin()-t.getRightMargin(),t.getTopMargin()))),this._borderSprites[3].texture=new h.Texture(n,r(new h.Rectangle(0,0,t.getLeftMargin(),t.getTopMargin()))),this._borderSprites[4].texture=new h.Texture(n,r(new h.Rectangle(0,t.getTopMargin(),t.getLeftMargin(),n.height-t.getTopMargin()-t.getBottomMargin()))),this._borderSprites[5].texture=new h.Texture(n,r(new h.Rectangle(0,n.height-t.getBottomMargin(),t.getLeftMargin(),t.getBottomMargin()))),this._borderSprites[6].texture=new h.Texture(n,r(new h.Rectangle(t.getLeftMargin(),n.height-t.getBottomMargin(),n.width-t.getLeftMargin()-t.getRightMargin(),t.getBottomMargin()))),this._borderSprites[7].texture=new h.Texture(n,r(new h.Rectangle(n.width-t.getRightMargin(),n.height-t.getBottomMargin(),t.getRightMargin(),t.getBottomMargin()))),this._updateSpritesAndTexturesSize(),this._updateLocalPositions(),this.updatePosition()):n.once("update",(function(){return e.updateTexture()}))}},{key:"updateWidthHeight",value:function(){this._pixiObject.pivot.x=this._width/2,this._pixiObject.pivot.y=this._height/2,this._updateSpritesAndTexturesSize(),this._updateLocalPositions(),this.updatePosition()}},{key:"getDefaultWidth",value:function(){return j.asPanelSpriteConfiguration(this._associatedObjectConfiguration).getWidth()}},{key:"getDefaultHeight",value:function(){return j.asPanelSpriteConfiguration(this._associatedObjectConfiguration).getHeight()}}],[{key:"getThumbnail",value:function(e,t,n){var r=j.asPanelSpriteConfiguration(n);return f.Z.getResourceFullUrl(e,r.getTexture(),{})}}]),n}(d.Z),Z=n(11858),k=n.g.gd,w=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,a,s,l){var c;(0,o.Z)(this,n),(c=t.call(this,e,r,i,a,s,l))._isItalic=!1,c._isBold=!1,c._characterSize=0,c._wrapping=!1,c._wrappingWidth=0,c._styleFontDirty=!0,c._fontName="",c._fontFamily="",c._color="0;0;0",c._textAlignment="left",c._isOutlineEnabled=!1,c._outlineColor="255;255;255",c._outlineThickness=2,c._isShadowEnabled=!1,c._shadowDistance=3,c._shadowAngle=90,c._shadowColor="0;0;0",c._shadowOpacity=127,c._shadowBlurRadius=2;var u=new h.TextStyle({fontFamily:"Arial",fontSize:20,align:"left",padding:5});return c._pixiObject=new h.Text("",u),c._pixiObject.anchor.x=.5,c._pixiObject.anchor.y=.5,c._pixiContainer.addChild(c._pixiObject),c._styleFontDirty=!0,c.update(),c}return(0,a.Z)(n,[{key:"onRemovedFromScene",value:function(){(0,s.Z)((0,l.Z)(n.prototype),"onRemovedFromScene",this).call(this),this._pixiObject.destroy(!0)}},{key:"update",value:function(){var e=this,t=k.asTextObjectConfiguration(this._associatedObjectConfiguration);if(this._pixiObject.text=t.getText(),(t.isItalic()!==this._isItalic||t.isBold()!==this._isBold||t.getCharacterSize()!==this._characterSize||t.getTextAlignment()!==this._textAlignment||t.getColor()!==this._color||t.isOutlineEnabled()!==this._isOutlineEnabled||t.getOutlineColor()!==this._outlineColor||t.getOutlineThickness()!==this._outlineThickness||t.isShadowEnabled()!==this._isShadowEnabled||t.getShadowDistance()!==this._shadowDistance||t.getShadowAngle()!==this._shadowAngle||t.getShadowColor()!==this._shadowColor||t.getShadowOpacity()!==this._shadowOpacity||t.getShadowBlurRadius()!==this._shadowBlurRadius||this._instance.hasCustomSize()!==this._wrapping||this.getCustomWidth()!==this._wrappingWidth&&this._wrapping)&&(this._isItalic=t.isItalic(),this._isBold=t.isBold(),this._characterSize=t.getCharacterSize(),this._textAlignment=t.getTextAlignment(),this._color=t.getColor(),this._isOutlineEnabled=t.isOutlineEnabled(),this._outlineColor=t.getOutlineColor(),this._outlineThickness=t.getOutlineThickness(),this._isShadowEnabled=t.isShadowEnabled(),this._shadowDistance=t.getShadowDistance(),this._shadowAngle=t.getShadowAngle(),this._shadowColor=t.getShadowColor(),this._shadowOpacity=t.getShadowOpacity(),this._shadowBlurRadius=t.getShadowBlurRadius(),this._wrapping=this._instance.hasCustomSize(),this._wrappingWidth=this.getCustomWidth(),this._styleFontDirty=!0),this._fontName!==t.getFontName()&&(this._fontName=t.getFontName(),p.Z.loadFontFamily(this._project,t.getFontName()).then((function(t){e._fontFamily=t,e._styleFontDirty=!0})).catch((function(e){console.warn("Unable to load font family for RenderedTextInstance",e)}))),this._styleFontDirty){var n=this._pixiObject.style;n.fontFamily=this._fontFamily||"Arial",n.fontSize=Math.max(1,this._characterSize),n.fontStyle=this._isItalic?"italic":"normal",n.fontWeight=this._isBold?"bold":"normal",n.fill=(0,Z.UQ)(this._color),n.wordWrap=this._wrapping,n.wordWrapWidth=this._wrappingWidth<=1?1:this._wrappingWidth,n.breakWords=!0,n.align=this._textAlignment,n.stroke=(0,Z.UQ)(this._outlineColor),n.strokeThickness=this._isOutlineEnabled?this._outlineThickness:0,n.dropShadow=this._isShadowEnabled,n.dropShadowColor=(0,Z.UQ)(this._shadowColor),n.dropShadowAlpha=this._shadowOpacity/255,n.dropShadowBlur=this._shadowBlurRadius,n.dropShadowAngle=d.Z.toRad(this._shadowAngle),n.dropShadowDistance=this._shadowDistance;var r=n.dropShadow?n.dropShadowDistance+n.dropShadowBlur:0;n.padding=Math.ceil(r),this._pixiObject.dirty=!0,this._styleFontDirty=!1}if(this._instance.hasCustomSize()){var i="right"===this._textAlignment?1:"center"===this._textAlignment?.5:0,o=this.getCustomWidth(),a=(o-this._pixiObject.width)*(i-.5);this._pixiObject.position.x=this._instance.getX()+o/2,this._pixiObject.anchor.x=.5-a/this._pixiObject.width}else this._pixiObject.position.x=this._instance.getX()+this._pixiObject.width/2,this._pixiObject.anchor.x=.5;this._pixiObject.position.y=this._instance.getY()+this._pixiObject.height/2,this._pixiObject.rotation=d.Z.toRad(this._instance.getAngle())}},{key:"getDefaultWidth",value:function(){return this._pixiObject.width}},{key:"getDefaultHeight",value:function(){return this._pixiObject.height}}],[{key:"getThumbnail",value:function(e,t,n){return"CppPlatform/Extensions/texticon24.png"}}]),n}(d.Z);function T(e){return function(t){(0,c.Z)(r,t);var n=(0,u.Z)(r);function r(t,i,a,s,l,c){var u;return(0,o.Z)(this,r),(u=n.call(this,t,i,a,s,l,c))._pixiObject=new h.Sprite(h.Texture.from(e)),u._pixiContainer.addChild(u._pixiObject),u}return(0,a.Z)(r,[{key:"onRemovedFromScene",value:function(){(0,s.Z)((0,l.Z)(r.prototype),"onRemovedFromScene",this).call(this),this._pixiObject.destroy(!1)}},{key:"update",value:function(){this._pixiObject.position.x=this._instance.getX(),this._pixiObject.position.y=this._instance.getY(),this._pixiObject.angle=this._instance.getAngle()}}],[{key:"getThumbnail",value:function(t,n,r){return e}}]),r}(d.Z)}var S=T("CppPlatform/Extensions/primitivedrawingicon.png"),P=T("CppPlatform/Extensions/textentry.png"),E=n.g.gd,I=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,a,s,l){var c;return(0,o.Z)(this,n),(c=t.call(this,e,r,i,a,s,l))._pixiObject=new h.Graphics,c._pixiContainer.addChild(c._pixiObject),c.updateGraphics(),c}return(0,a.Z)(n,[{key:"update",value:function(){this._pixiObject.position.x=this._instance.getX(),this._pixiObject.position.y=this._instance.getY(),this.updateGraphics()}},{key:"updateGraphics",value:function(){var e=E.asParticleEmitterConfiguration(this._associatedObjectConfiguration);this._pixiObject.clear();var t=this._instance.getAngle()/180*3.14159,n=e.getConeSprayAngle(),r=t-n/2/180*3.14159,i=t+n/2/180*3.14159;this._pixiObject.beginFill(0,0),this._pixiObject.lineStyle(3,(0,Z.Y9)(e.getParticleRed2(),e.getParticleGreen2(),e.getParticleBlue2()),1),this._pixiObject.moveTo(0,0),this._pixiObject.lineTo(64*Math.cos(r),64*Math.sin(r)),this._pixiObject.moveTo(0,0),this._pixiObject.lineTo(64*Math.cos(i),64*Math.sin(i)),this._pixiObject.endFill(),this._pixiObject.lineStyle(0,0,1),this._pixiObject.beginFill((0,Z.Y9)(e.getParticleRed1(),e.getParticleGreen1(),e.getParticleBlue1())),this._pixiObject.drawCircle(0,0,8),this._pixiObject.endFill()}},{key:"getDefaultWidth",value:function(){return 128}},{key:"getDefaultHeight",value:function(){return 128}},{key:"getOriginX",value:function(){return 64}},{key:"getOriginY",value:function(){return 64}}],[{key:"getThumbnail",value:function(e,t,n){return"CppPlatform/Extensions/particleSystemicon.png"}}]),n}(d.Z),M=n(82963),L=n(77672),A=n(18455),F=["Show","LeftPadding","TopPadding","RightPadding","BottomPadding","HorizontalAnchorOrigin","HorizontalAnchorTarget","VerticalAnchorOrigin","VerticalAnchorTarget","AnchorOrigin","AnchorTarget","AnchorDeltaX","AnchorDeltaY","IsScaledProportionallyOnX","IsScaledProportionallyOnY","IsScaledProportionallyOnZ","IsScaledProportionally"],O=function(e){var t=(e.includes("-")?e.split("-")[1]:e).toLowerCase();return"left"===t?0:"right"===t?1:"center"===t?.5:null},R=function(e){var t=(e.includes("-")?e.split("-")[0]:e).toLowerCase();return"top"===t?0:"bottom"===t?1:"center"===t?.5:null},D=function(e){var t=(e.includes("-")?e.split("-")[2]||"":e).toLowerCase();return"Zmin"===t?0:"Zmax"===t?1:"center"===t?.5:null},_=function(e,t){var n=O(e);return null!==n?n:t&&t.has(e)?O(t.get(e).getValue()):null},B=function(e,t){var n=R(e);return null!==n?n:t&&t.has(e)?R(t.get(e).getValue()):null},N=function(e,t,n){var r=(e.includes("-")?e.split("-")[1]:e).toLowerCase();return"same"===r?n:"opposite"===r&&null!==n?1-n:_(r,t)},U=function(e,t,n){var r=(e.includes("-")?e.split("-")[0]:e).toLowerCase();return"same"===r?n:"opposite"===r&&null!==n?1-n:B(r,t)},H=function(){function e(){(0,o.Z)(this,e),this.x=0,this.y=0,this.z=0,this._customWidth=0,this._customHeight=0,this._customDepth=0,this._hasCustomSize=!1,this._hasCustomDepth=!1}return(0,a.Z)(e,[{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"getZ",value:function(){return this.z}},{key:"getAngle",value:function(){return 0}},{key:"getRotationX",value:function(){return 0}},{key:"getRotationY",value:function(){return 0}},{key:"setObjectName",value:function(e){}},{key:"getObjectName",value:function(){return""}},{key:"setX",value:function(e){}},{key:"setY",value:function(e){}},{key:"setZ",value:function(e){}},{key:"setAngle",value:function(e){}},{key:"setRotationX",value:function(e){}},{key:"setRotationY",value:function(e){}},{key:"isLocked",value:function(){return!1}},{key:"setLocked",value:function(e){}},{key:"isSealed",value:function(){return!1}},{key:"setSealed",value:function(e){}},{key:"getZOrder",value:function(){return 0}},{key:"setZOrder",value:function(e){}},{key:"getLayer",value:function(){return""}},{key:"setLayer",value:function(e){}},{key:"setHasCustomSize",value:function(e){this._hasCustomSize=e}},{key:"hasCustomSize",value:function(){return this._hasCustomSize}},{key:"hasCustomDepth",value:function(){return this._hasCustomDepth}},{key:"setCustomWidth",value:function(e){this._customWidth=e,this._hasCustomSize=!0}},{key:"getCustomWidth",value:function(){return this._customWidth}},{key:"setCustomHeight",value:function(e){this._customHeight=e,this._hasCustomSize=!0}},{key:"getCustomHeight",value:function(){return this._customHeight}},{key:"setCustomDepth",value:function(e){this._customDepth=e,this._hasCustomDepth=!0}},{key:"getCustomDepth",value:function(){return this._customDepth}},{key:"resetPersistentUuid",value:function(){return this}},{key:"updateCustomProperty",value:function(e,t,n,r){}},{key:"getCustomProperties",value:function(e,t){return null}},{key:"getRawDoubleProperty",value:function(e){return 0}},{key:"getRawStringProperty",value:function(e){return""}},{key:"setRawDoubleProperty",value:function(e,t){}},{key:"setRawStringProperty",value:function(e,t){}},{key:"getVariables",value:function(){return[]}},{key:"serializeTo",value:function(e){}},{key:"unserializeFrom",value:function(e){}}]),e}(),V=n(46564),z=n.g.gd,W=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,a,s,l,c){var u;if((0,o.Z)(this,n),(u=t.call(this,e,r,i,a,s,l,c))._pixiObject=new h.Container,u._pixiContainer.addChild(u._pixiObject),u._threeGroup){var d=new V.Group;d.rotation.order="ZYX",u._threeGroup.add(d),u._threeObjectPivot=new V.Group,u._threeObjectPivot.rotation.order="ZYX",d.add(u._threeObjectPivot),u._threeObject=d}var f=z.asCustomObjectConfiguration(a),g=f.getProperties(),x=g.has("ParentOrigin")&&g.get("ParentOrigin").getValue(),m=g.has("ParentOriginX")&&g.get("ParentOriginX").getValue(),v=g.has("ParentOriginY")&&g.get("ParentOriginY").getValue(),b=g.has("ParentOriginZ")&&g.get("ParentOriginZ").getValue();u._proportionalOriginX=x&&O(x)||m&&O(m)||0,u._proportionalOriginY=x&&R(x)||v&&R(v)||0,u._proportionalOriginZ=x&&D(x)||b&&D(b)||0;var C=e.hasEventsBasedObject(f.getType())?e.getEventsBasedObject(f.getType()):null;if(u.childrenInstances=[],u.childrenLayouts=[],u.childrenRenderedInstances=[],u.childrenRenderedInstanceByNames=new Map,!C)return(0,M.Z)(u);var j=function(e,t){for(var n=new Map,r=e.getPropertyDescriptors(),i=t.getProperties(),o=function(){var e=r.getAt(a),t=e.getExtraInfo();if(!t)return 1;var o=e.getName(),s=i.get(o).getValue(),l="true"===s,c=Number.parseFloat(s)||0,u=F.find((function(e){return o.includes(e)})),d="",p=null,f=null;if("HorizontalAnchorOrigin"===u||"VerticalAnchorOrigin"===u||"AnchorOrigin"===u){var h=o.replace("AnchorOrigin","AnchorTarget");if(r.has(h)){var g=r.get(h);d=g.getExtraInfo().size()>0?g.getExtraInfo().at(0):"";var x=i.get(h).getValue(),m=Number.parseFloat(x)||0;"HorizontalAnchorOrigin"!==u&&"AnchorOrigin"!==u||(p=_(x,i)||m),"VerticalAnchorOrigin"!==u&&"AnchorOrigin"!==u||(f=B(x,i)||m)}}for(var v=0;v<t.size();v++){var b=t.at(v),C=n.get(b);if(C||(C={isShown:!0,horizontalLayout:{},verticalLayout:{},depthLayout:{}},n.set(b,C)),"Show"===u)"true"!==s&&(C.isShown=!1);else if("LeftPadding"===u)C.horizontalLayout.minSideAbsoluteMargin=c;else if("RightPadding"===u)C.horizontalLayout.maxSideAbsoluteMargin=c;else if("TopPadding"===u)C.verticalLayout.minSideAbsoluteMargin=c;else if("BottomPadding"===u)C.verticalLayout.maxSideAbsoluteMargin=c;else if("AnchorDeltaX"===u)C.horizontalLayout.anchorDelta=c;else if("AnchorDeltaY"===u)C.verticalLayout.anchorDelta=c;else if("IsScaledProportionallyOnX"===u)C.horizontalLayout.isScaledProportionally=l;else if("IsScaledProportionallyOnY"===u)C.verticalLayout.isScaledProportionally=l;else if("IsScaledProportionallyOnZ"===u)C.depthLayout.isScaledProportionally=l;else if("IsScaledProportionally"===u)C.horizontalLayout.isScaledProportionally=l,C.verticalLayout.isScaledProportionally=l,C.depthLayout.isScaledProportionally=l;else{if("HorizontalAnchorOrigin"===u||"AnchorOrigin"===u){var j=N(s,i,p)||c;null!==j&&(C.horizontalLayout.anchorOrigin=j),null!==p&&(C.horizontalLayout.anchorTarget=p),C.horizontalLayout.anchorTargetObject=d}if("VerticalAnchorOrigin"===u||"AnchorOrigin"===u){var y=U(s,i,p)||c;null!==y&&(C.verticalLayout.anchorOrigin=y),null!==f&&(C.verticalLayout.anchorTarget=f),C.verticalLayout.anchorTargetObject=d}}}},a=0;a<r.getCount();a++)o();return n}(C,f);return(0,A.mapReverseFor)(0,C.getObjectsCount(),(function(t){var n=C.getObjectAt(t),i=j.get(n.getName())||{isShown:!0,horizontalLayout:{},verticalLayout:{},depthLayout:{}},o=f.getChildObjectConfiguration(n.getName()),a=new H,s=ne.createNewInstanceRenderer(e,r,a,o,u._pixiObject,u._threeObjectPivot);i.isShown||(u._pixiObject.removeChild(s._pixiObject),u._threeObjectPivot&&s instanceof L.Z&&u._threeObjectPivot.remove(s._threeObject)),s instanceof w&&(s._pixiObject.style.align="center"),u.childrenInstances.push(a),u.childrenLayouts.push(i),u.childrenRenderedInstances.push(s),u.childrenRenderedInstanceByNames.set(n.getName(),s)})),0===u.childrenRenderedInstances.length&&(u._pixiObject=new h.Sprite(p.Z.getInvalidPIXITexture()),u._pixiContainer.addChild(u._pixiObject)),u}return(0,a.Z)(n,[{key:"onRemovedFromScene",value:function(){(0,s.Z)((0,l.Z)(n.prototype),"onRemovedFromScene",this).call(this);var e,t=(0,C.Z)(this.childrenRenderedInstances);try{for(t.s();!(e=t.n()).done;){e.value.onRemovedFromScene()}}catch(r){t.e(r)}finally{t.f()}this._pixiObject.destroy(!1)}},{key:"update",value:function(){!function(e){for(var t=e.getWidth(),n=e.getHeight(),r=0;r<e.childrenRenderedInstances.length;r++){var i=e.childrenRenderedInstances[r],o=e.childrenInstances[r],a=e.childrenLayouts[r];if(null==a.horizontalLayout.anchorOrigin){var s=a.horizontalLayout.minSideAbsoluteMargin||(a.horizontalLayout.minSideProportionalMargin||0)*t,l=t-(a.horizontalLayout.maxSideAbsoluteMargin||(a.horizontalLayout.maxSideProportionalMargin||0)*t);o.x=s,o.setCustomWidth(l-s)}else{var c=a.horizontalLayout.anchorOrigin||0,u=a.horizontalLayout.anchorTarget||0,d=e.childrenRenderedInstanceByNames.get(a.horizontalLayout.anchorTargetObject||"")||e.childrenRenderedInstances[0],p=d._instance,f=p.hasCustomSize()?p.getCustomWidth():d.getDefaultWidth(),h=a.horizontalLayout.isScaledProportionally?f*i.getDefaultWidth()/d.getDefaultWidth():i.getDefaultWidth();o.x=p.getX()+(a.horizontalLayout.anchorDelta||0)+u*f-c*h,o.setCustomWidth(h)}if(null==a.verticalLayout.anchorOrigin){var g=a.verticalLayout.minSideAbsoluteMargin||(a.verticalLayout.minSideProportionalMargin||0)*n,x=n-(a.verticalLayout.maxSideAbsoluteMargin||(a.verticalLayout.maxSideProportionalMargin||0)*n);o.y=g;var m=x-g;o.setCustomHeight(x-g),i.update(),o.y+=(m-i._pixiObject.height)/2}else{var v=a.verticalLayout.anchorOrigin||0,b=a.verticalLayout.anchorTarget||0,C=e.childrenRenderedInstanceByNames.get(a.horizontalLayout.anchorTargetObject||"")||e.childrenRenderedInstances[0],j=C._instance,y=j.hasCustomSize()?j.getCustomHeight():C.getDefaultHeight(),Z=a.horizontalLayout.isScaledProportionally?y*i.getDefaultHeight()/C.getDefaultHeight():i.getDefaultHeight();o.y=j.getY()+(a.verticalLayout.anchorDelta||0)+b*y-v*Z,o.setCustomHeight(Z)}o.z=0,o.setCustomDepth(e.getDepth()),i.update()}}(this);var e=this.getOriginX(),t=this.getOriginY(),n=this.getOriginZ(),r=this.getCenterX(),i=this.getCenterY(),o=this.getCenterZ(),a=this.childrenRenderedInstances[0],s=a&&a instanceof L.Z,l=this._threeObject,c=this._threeObjectPivot;l&&c&&s?(l.position.set(this._instance.getX()+r-e,this._instance.getY()+i-t,this._instance.getZ()+o-n),c.position.set(-r+e,-i+t,-o+n),l.rotation.set(d.Z.toRad(this._instance.getRotationX()),d.Z.toRad(this._instance.getRotationY()),d.Z.toRad(this._instance.getAngle())),this._pixiObject.pivot.x=r-e,this._pixiObject.pivot.y=i-t):(this._pixiObject.pivot.x=r,this._pixiObject.pivot.y=i),this._pixiObject.position.x=this._instance.getX()+r-e,this._pixiObject.position.y=this._instance.getY()+i-t,this._pixiObject.rotation=d.Z.toRad(this._instance.getAngle()),this._pixiObject.scale.x=1,this._pixiObject.scale.y=1}},{key:"getDefaultWidth",value:function(){return this.childrenRenderedInstances.length>0?this.childrenRenderedInstances[0].getDefaultWidth():48}},{key:"getDefaultHeight",value:function(){return this.childrenRenderedInstances.length>0?this.childrenRenderedInstances[0].getDefaultHeight():48}},{key:"getDefaultDepth",value:function(){var e=this.childrenRenderedInstances[0];return e&&e instanceof L.Z?e.getDefaultDepth():48}},{key:"getOriginX",value:function(){return this._proportionalOriginX*this.getWidth()}},{key:"getOriginY",value:function(){return this._proportionalOriginY*this.getHeight()}},{key:"getOriginZ",value:function(){return this._proportionalOriginZ*this.getDepth()}},{key:"getCenterX",value:function(){return this.getWidth()/2}},{key:"getCenterY",value:function(){return this.getHeight()/2}},{key:"getCenterZ",value:function(){return this.getDepth()/2}}],[{key:"getThumbnail",value:function(e,t,n){var r=z.asCustomObjectConfiguration(n),i=e.hasEventsBasedObject(r.getType())?e.getEventsBasedObject(r.getType()):null;if(!i)return"res/unknown32.png";if(i.isAnimatable()){var o=r.getAnimations();if(o.getAnimationsCount()>0&&o.getAnimation(0).getDirectionsCount()>0&&o.getAnimation(0).getDirection(0).getSpritesCount()>0){var a=o.getAnimation(0).getDirection(0).getSprite(0).getImageName();return t.getResourceFullUrl(e,a,{})}return"res/unknown32.png"}for(var s=0;s<i.getObjectsCount();s++){var l=i.getObjectAt(s),c=r.getChildObjectConfiguration(l.getName()),u=c.getType();if("Sprite"===u||"TiledSpriteObject::TiledSprite"===u||"PanelSpriteObject::PanelSprite"===u||"Scene3D::Cube3DObject"===u){var d=ne.getThumbnail(e,c);if(d)return d}}return"res/unknown32.png"}}]),n}(L.Z),G=n.g.gd,Y=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,a,s,l,c){var u;(0,o.Z)(this,n),(u=t.call(this,e,r,i,a,s,l,c))._sprite=null,u._shouldNotRotate=!1,u._textureWidth=32,u._textureHeight=32,u._renderedAnimation=0,u._renderedDirection=0,u._centerX=0,u._centerY=0,u._originX=0,u._originY=0,u._pixiObject=new h.Graphics,u._pixiContainer.addChild(u._pixiObject),u.updateSprite();var d=u._pixiResourcesLoader.getThreeMaterial(e,u._sprite?u._sprite.getImageName():"",{useTransparentTexture:!0}),p=new V.PlaneGeometry(1,-1),f=new V.Mesh(p,d);return f.rotation.order="ZYX",u._threeGroup.add(f),u._threeObject=f,u.updateTextureAndSprite(),u}return(0,a.Z)(n,[{key:"onRemovedFromScene",value:function(){(0,s.Z)((0,l.Z)(n.prototype),"onRemovedFromScene",this).call(this),this._pixiObject.destroy(!1)}},{key:"updateThreeObject",value:function(){var e=this._threeObject;if(e){var t=this.getWidth(),n=this.getHeight(),r=this._centerX-this._textureWidth/2,i=this._centerY-this._textureHeight/2,o=this._originX-this._textureWidth/2,a=this._originY-this._textureHeight/2;e.rotation.set(L.Z.toRad(this._instance.getRotationX()),L.Z.toRad(this._instance.getRotationY()),L.Z.toRad(this._instance.getAngle())),e.position.set(-r,-i,0),e.position.applyEuler(e.rotation),e.position.x+=r-o,e.position.y+=i-a,e.position.x*=t/this._textureWidth,e.position.y*=n/this._textureHeight,e.position.x+=this._instance.getX(),e.position.y+=this._instance.getY(),e.position.z+=this._instance.getZ(),e.scale.set(t,n,1)}}},{key:"updateSprite",value:function(){this._sprite=null,this._shouldNotRotate=!1;var e=G.asCustomObjectConfiguration(this._associatedObjectConfiguration).getAnimations();if(e.hasNoAnimations())return!1;this._renderedAnimation=this._instance.getRawDoubleProperty("animation"),this._renderedAnimation>=e.getAnimationsCount()&&(this._renderedAnimation=0);var t=e.getAnimation(this._renderedAnimation);if(t.hasNoDirections())return!1;if(this._renderedDirection=0,t.useMultipleDirections()){var n=Math.floor(this._instance.getAngle())%360;n<0&&(n+=360),this._renderedDirection=Math.round(n/45)%8}this._renderedDirection>=t.getDirectionsCount()&&(this._renderedDirection=0);var r=t.getDirection(this._renderedDirection);return 0!==r.getSpritesCount()&&(this._shouldNotRotate=t.useMultipleDirections(),this._sprite=r.getSprite(0),!0)}},{key:"updateTextureAndSprite",value:function(){var e=this;this.updateSprite();var t=this._sprite;if(t){var n=this._pixiResourcesLoader.getPIXITexture(this._project,t.getImageName());if(this._pixiObject.texture=n,n.baseTexture.valid){this._textureWidth=n.width,this._textureHeight=n.height;var r=this._pixiResourcesLoader.getThreeMaterial(this._project,t.getImageName(),{useTransparentTexture:!0});this._threeObject&&(this._threeObject.material=r);var i=t.getOrigin();if(this._originX=i.getX(),this._originY=i.getY(),t.isDefaultCenterPoint())this._centerX=this._textureWidth/2,this._centerY=this._textureHeight/2;else{var o=t.getCenter();this._centerX=o.getX(),this._centerY=o.getY()}this.updateThreeObject()}else n.once("update",(function(){return e.updateTextureAndSprite()}))}}},{key:"update",value:function(){var e=this._instance.getRawDoubleProperty("animation");this._renderedAnimation!==e?this.updateTextureAndSprite():this.updateThreeObject(),this.updatePixiObject()}},{key:"updatePixiObject",value:function(){var e=this.getDefaultWidth(),t=this.getDefaultHeight(),n=-this._originX,r=-this._originY,i=n+e,o=r+t;this._pixiObject.clear(),this._pixiObject.beginFill(10066329,.2),this._pixiObject.lineStyle(1,16767232,0),this._pixiObject.moveTo(n,r),this._pixiObject.lineTo(i,r),this._pixiObject.lineTo(i,o),this._pixiObject.lineTo(n,o),this._pixiObject.endFill(),this._pixiObject.pivot.x=this._centerX-this._originX,this._pixiObject.pivot.y=this._centerY-this._originY,this._pixiObject.rotation=this._shouldNotRotate?0:L.Z.toRad(this._instance.getAngle()),this._instance.hasCustomSize()?(this._pixiObject.scale.x=this.getCustomWidth()/e,this._pixiObject.scale.y=this.getCustomHeight()/t):(this._pixiObject.scale.x=1,this._pixiObject.scale.y=1),this._pixiObject.position.x=this._instance.getX()+(this._centerX-this._originX)*Math.abs(this._pixiObject.scale.x),this._pixiObject.position.y=this._instance.getY()+(this._centerY-this._originY)*Math.abs(this._pixiObject.scale.y)}},{key:"getOriginX",value:function(){return this._sprite&&this._pixiObject?this._sprite.getOrigin().getX()*this._pixiObject.scale.x:0}},{key:"getOriginY",value:function(){return this._sprite&&this._pixiObject?this._sprite.getOrigin().getY()*this._pixiObject.scale.y:0}},{key:"getDefaultWidth",value:function(){return this._textureWidth}},{key:"getDefaultHeight",value:function(){return this._textureHeight}},{key:"getDefaultDepth",value:function(){return 0}},{key:"getCenterX",value:function(){return this._sprite&&this._pixiObject?this._centerX*this._pixiObject.scale.x:0}},{key:"getCenterY",value:function(){return this._sprite&&this._pixiObject?this._centerY*this._pixiObject.scale.y:0}}],[{key:"getThumbnail",value:function(e,t,n){var r=G.asCustomObjectConfiguration(n).getAnimations();if(r.getAnimationsCount()>0&&r.getAnimation(0).getDirectionsCount()>0&&r.getAnimation(0).getDirection(0).getSpritesCount()>0){var i=r.getAnimation(0).getDirection(0).getSprite(0).getImageName();return t.getResourceFullUrl(e,i,{})}return"res/unknown32.png"}}]),n}(L.Z),q=n(94002),X=n(50057),K=n.n(X),J=K()("path"),Q=K()("electron"),$=n.g.gd,ee=(0,r.Z)((0,r.Z)({},h),i);n.g.PIXI=ee;var te={},ne={renderers:{unknownObjectType:g,Sprite:m,"TiledSpriteObject::TiledSprite":b,"PanelSpriteObject::PanelSprite":y,"TextObject::Text":w,"PrimitiveDrawing::Drawer":S,"TextEntryObject::TextEntry":P,"ParticleSystem::ParticleEmitter":I},renderers3D:{},getThumbnail:function(e,t){var n=t.getType();return this.renderers.hasOwnProperty(n)?this.renderers[n].getThumbnail(e,f.Z,t):e.hasEventsBasedObject(n)?W.getThumbnail(e,f.Z,t):this.renderers.unknownObjectType.getThumbnail(e,f.Z,t)},createNewInstanceRenderer:function(e,t,n,r,i,o){var a=r.getType();if(o&&this.renderers3D.hasOwnProperty(a))return new this.renderers3D[a](e,t,n,r,i,o,p.Z);if(this.renderers.hasOwnProperty(a))return new this.renderers[a](e,t,n,r,i,p.Z);if(e.hasEventsBasedObject(a)){var s=e.getEventsBasedObject(a);return s.isRenderedIn3D()&&s.isAnimatable()&&0===s.getObjectsCount()?new Y(e,t,n,r,i,o,p.Z):new W(e,t,n,r,i,o,p.Z)}return console.warn("Object with type ".concat(a," has no instance renderer registered. Please use registerInstanceRenderer to register your renderer.")),new this.renderers.unknownObjectType(e,t,n,r,i,p.Z)},registerInstanceRenderer:function(e,t){t.getThumbnail?this.renderers.hasOwnProperty(e)?console.warn('Tried to register renderer for object "'.concat(e,'", but a renderer already exists.')):this.renderers[e]=t:console.warn('Tried to register renderer for object "'.concat(e,'", but getThumbnail is not defined.'))},registerInstance3DRenderer:function(e,t){this.renderers3D.hasOwnProperty(e)?console.warn('Tried to register 3D renderer for object "'.concat(e,'", but a renderer already exists.')):this.renderers3D[e]=t},renderersCacheClearingMethods:[],registerClearCache:function(e){this.renderersCacheClearingMethods.push(e)},registerModule:function(e,t){te[e]=t},requireModule:function(e,t){if(Q&&J){var r=J.join(e,t),i=K()("module");if(!i._load)throw new Error('module._load does not exist. This is possibly a change in Node.js that is breaking the custom loader, in ObjectsRenderingService.requireModule, that is injected to expose Pixi.js to extensions using "require".');var o=i._load,a={"pixi.js-legacy":ee,"pixi.js":ee,"@pixi/core":ee,"@pixi/display":ee,"@pixi/constants":ee,"@pixi/sprite":ee,"@pixi/math":ee,"@pixi/utils":ee,"@pixi/graphics":ee};i._load=function(e,t,n){var i=a[e];return i||(0===e.indexOf("./")||e===r?o(e,t,n):(console.error('A module ("'.concat(e,'") was required from ').concat(r,' but is not an allowed module or a relative file path starting with "./". null will be returned instead.')),console.warn("Allowed modules are: ",Object.keys(a)),console.warn("Please use only allowed modules or a reference a local file."),null))};var s=null;try{s=n.g.require(r)}catch(l){console.error('Unable to load module "'.concat(t,'". Only files located in ').concat(e," are supported. Exception was:"),l),s=null}return i._load=o,s}return te[t]?te[t]:(console.error('Unable to load module "'.concat(t,'". Are you sure you registered it using ObjectsRenderingService.registerModule? This is mandatory for the web-app to have the file bundled.')),null)},rgbOrHexToHexNumber:Z.gO,gd:$,PIXI:ee,THREE:V,THREE_ADDONS:{SkeletonUtils:q},RenderedInstance:d.Z,Rendered3DInstance:L.Z}},58247:function(e,t,n){"use strict";n.d(t,{Z:function(){return V},k:function(){return U}});var r=n(29439),i=n(93433),o=n(74165),a=n(15861),s=n(15671),l=n(43144),c=n(37762),u=n(86289),d=n(91479),p=n.n(d),f=n(14446),h=n.n(f),g=n(36425),x=n(46564),m=n(79362),v=n(87845),b=n(72410),C=n(38830),j=n.n(C),y=n(85919),Z=n.g.gd,k={},w={},T={},S=g.Texture.from("res/error48.png"),P={},E={},I={},M={},L={},A=function(){var e=new x.Group;return e.add(new x.Mesh(new x.BoxGeometry(1,1,1),new x.MeshBasicMaterial({color:"#ff00ff"}))),{scene:e,animations:[],cameras:[],scenes:[],asset:{},userData:{},parser:null}}(),F=null,O=function(){if(!F){F=new m.E;var e=new v._;e.setDecoderPath("./external/draco/gltf/"),F.setDRACOLoader(e)}return F},R=function(e){return(0,y.bc)(e)?"use-credentials":"anonymous"},D=function(e,t){"image"===e.getKind()&&(Z.asImageResource(e).isSmooth()||(t.baseTexture.scaleMode=g.SCALE_MODES.NEAREST))},_=function(e){e.metalness&&(e.metalness=0)},B=function(e){var t=e;if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)_(t.material[n]);else _(t.material)},N=function(e){return e.traverse(B)},U=function(e){var t=e.getMetadata();try{var n=JSON.parse(t);return n.embeddedResourcesMapping&&"object"===typeof n.embeddedResourcesMapping?n.embeddedResourcesMapping:null}catch(r){return null}},H=function(e,t,n){var r,i=e.getResourcesManager(),o=[],a=(0,c.Z)(i.getAllResourceNames().toJSArray());try{for(a.s();!(r=a.n()).done;){var s=r.value;if(t!==s){var l=i.getResource(s);if(l.getKind()===n){var u=U(l);if(u)Object.values(u).includes(t)&&o.push(l)}}}}catch(d){a.e(d)}finally{a.f()}return o},V=function(){function e(){(0,s.Z)(this,e)}return(0,l.Z)(e,null,[{key:"burstCache",value:function(){k={},w={},T={},P={},E={},I={},M={},L={}}},{key:"_reloadEmbedderResources",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n,r){var i,a=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=H(t,n,r),e.next=3,Promise.all(i.map((function(e){return a.reloadResource(t,e.getName())})));case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"reloadResource",value:function(){var t=(0,a.Z)((0,o.Z)().mark((function t(n,r){var i,s;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=T[r])||!i.textureCacheIds){t.next=7;break}return t.next=4,g.Assets.unload(i.textureCacheIds);case 4:return delete T[r],t.next=7,this._reloadEmbedderResources(n,r,"atlas");case 7:return t.next=9,e.loadTextures(n,[r]);case 9:if(I[r]&&delete I[r],w[r]&&delete w[r],k[r]&&delete k[r],P[r]&&(P[r].dispose(),delete P[r]),!M[r]){t.next=19;break}return t.next=16,g.Assets.unload(r).catch((0,a.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M[r];case 2:t=e.sent,(n=t.textureAtlas)&&n.dispose();case 5:case"end":return e.stop()}}),e)}))));case 16:return delete M[r],t.next=19,this._reloadEmbedderResources(n,r,"spine");case 19:if(!L[r]){t.next=24;break}return t.next=22,g.Assets.unload(r);case 22:delete L[r],g.Assets.resolver.prefer();case 24:(s=Object.keys(E).filter((function(e){return e.startsWith(r)}))).length>0&&s.forEach((function(e){E[e].dispose(),delete E[e]}));case 26:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"loadTextures",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n){var r,s,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.getResourcesManager(),s=n.map((function(e){if(!r.hasResource(e))return null;var t=r.getResource(e);return"image"!==t.getKind()?null:t})).filter(Boolean),l=n.map((function(e){if(!r.hasResource(e))return null;var t=r.getResource(e);return"video"!==t.getKind()?null:t})).filter(Boolean),e.next=5,Promise.all([].concat((0,i.Z)(s.map(function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n){var r,i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getName(),e.prev=1,i=b.Z.getResourceFullUrl(t,r,{isResourceForPixi:!0}),g.Assets.setPreferences({preferWorkers:!1,preferCreateImageBitmap:!1,crossOrigin:R(i)}),e.next=6,g.Assets.load(i);case 6:a=e.sent,T[r]=a,D(n,a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error("Unable to load file ".concat(n.getFile()," for image resource ").concat(r,":"),e.t0?e.t0:"(unknown error)");case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}())),(0,i.Z)(l.map(function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n){var r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.getName();try{i=b.Z.getResourceFullUrl(t,r,{isResourceForPixi:!0}),T[r]=g.Texture.from(i,{scaleMode:g.SCALE_MODES.LINEAR,resourceOptions:{autoPlay:!1,autoLoad:!0,crossorigin:R(i)}}),T[r]||(console.error("Texture loading for ".concat(i," returned nothing")),T[r]=S),T[r].baseTexture.resource.load().catch((function(e){console.error("Unable to load video texture from url ".concat(i,":"),e),T[r]=S}))}catch(o){console.error("Unable to load file ".concat(n.getFile()," for video resource ").concat(r,":"),o||"(unknown error)")}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getPIXITexture",value:function(e,t){if(T[t])return T[t];if(!e.getResourcesManager().hasResource(t))return S;var n=e.getResourcesManager().getResource(t);if("image"!==n.getKind())return S;var r=b.Z.getResourceFullUrl(e,t,{isResourceForPixi:!0});return T[t]=g.Texture.from(r,{resourceOptions:{crossorigin:R(r),autoLoad:!1}}),T[t]?(T[t].baseTexture.resource.load().catch((function(e){console.error("Unable to load texture from url ".concat(r,":"),e),T[t]=S})),D(n,T[t]),T[t]):(console.error("Texture loading for ".concat(r," returned nothing")),T[t]=S,T[t])}},{key:"getThreeTexture",value:function(t,n){var r=P[n];if(r)return r;var i=e.getPIXITexture(t,n).baseTexture.resource.source;if(!(i instanceof HTMLImageElement))throw new Error("Can't load texture for resource \"".concat(n,"\" as it's not an image."));var o=new x.Texture(i);return o.magFilter=x.LinearFilter,o.minFilter=x.LinearFilter,o.wrapS=x.RepeatWrapping,o.wrapT=x.RepeatWrapping,o.colorSpace=x.SRGBColorSpace,o.needsUpdate=!0,function(e,t){"image"===e.getKind()&&(Z.asImageResource(e).isSmooth()||(t.magFilter=x.NearestFilter,t.minFilter=x.NearestFilter))}(t.getResourcesManager().getResource(n),o),P[n]=o,o}},{key:"getThreeMaterial",value:function(e,t,n){var r=n.useTransparentTexture,i="".concat(t,"|transparent:").concat(r.toString()),o=E[i];if(o)return o;var a=new x.MeshBasicMaterial({map:this.getThreeTexture(e,t),side:r?x.DoubleSide:x.FrontSide,transparent:r});return E[i]=a,a}},{key:"get3DModel",value:function(e,t){var n=I[t];if(n)return n;var r=function(e,t){if(!e.getResourcesManager().hasResource(t))return Promise.resolve(A);if("model3D"!==e.getResourcesManager().getResource(t).getKind())return Promise.resolve(A);var n=b.Z.getResourceFullUrl(e,t,{isResourceForPixi:!0}),r=O();return r.withCredentials=(0,y.bc)(n),new Promise((function(e,t){r.load(n,(function(t){N(t.scene),e(t)}),void 0,(function(e){t(e)}))}))}(e,t);return I[t]=r,r}},{key:"_getSpineTextureAtlas",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n){var i,a,s,l,c,d,p=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=M[n])){e.next=3;break}return e.abrupt("return",i);case 3:if(n){e.next=5;break}return e.abrupt("return",{textureAtlas:null,loadingError:null,loadingErrorReason:"invalid-atlas-resource"});case 5:if((a=t.getResourcesManager()).hasResource(n)){e.next=8;break}return e.abrupt("return",{textureAtlas:null,loadingError:null,loadingErrorReason:"invalid-atlas-resource"});case 8:if("atlas"===(s=a.getResource(n)).getKind()){e.next=11;break}return e.abrupt("return",{textureAtlas:null,loadingError:null,loadingErrorReason:"invalid-atlas-resource"});case 11:if(l=U(s),(c=l?Object.entries(l):[]).length){e.next=15;break}return e.abrupt("return",{textureAtlas:null,loadingError:null,loadingErrorReason:"missing-texture-resources"});case 15:return d=c.reduce((function(e,n){var i=(0,r.Z)(n,2),o=i[0],a=i[1];return"string"===typeof a&&(e[o]=p.getPIXITexture(t,a)),e}),{}),e.abrupt("return",M[n]=new Promise((function(e){var r=b.Z.getResourceFullUrl(t,n,{isResourceForPixi:!0});g.Assets.setPreferences({preferWorkers:!1,crossOrigin:(0,y.bc)(r)?"use-credentials":"anonymous"}),g.Assets.add(n,r,{images:d}),g.Assets.load(n).then((function(t){"string"===typeof t?new u.TextureAtlas(t,(function(e,t){return t(d[e].baseTexture)}),(function(t){return e({textureAtlas:t,loadingError:null,loadingErrorReason:null})})):e({textureAtlas:t,loadingError:null,loadingErrorReason:null})}),(function(t){console.error('Error while loading Spine atlas "'.concat(n,'": ').concat(t,".\nCheck if you selected the correct pair of atlas and image files.")),e({textureAtlas:null,loadingError:t,loadingErrorReason:"atlas-resource-loading-error"})}))})));case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSpineData",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n){var r,i,a,s,l,c=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=L[n])){e.next=3;break}return e.abrupt("return",r);case 3:if(n){e.next=5;break}return e.abrupt("return",{skeleton:null,loadingError:null,loadingErrorReason:null});case 5:if((i=t.getResourcesManager()).hasResource(n)){e.next=8;break}return e.abrupt("return",{skeleton:null,loadingError:null,loadingErrorReason:"invalid-spine-resource"});case 8:if("spine"===(a=i.getResource(n)).getKind()){e.next=11;break}return e.abrupt("return",{skeleton:null,loadingError:null,loadingErrorReason:"invalid-spine-resource"});case 11:if(s=U(a),"string"===typeof(l=s?Object.values(s)[0]:null)){e.next=15;break}return e.abrupt("return",{skeleton:null,loadingError:null,loadingErrorReason:"missing-texture-atlas-name"});case 15:return e.abrupt("return",L[n]=new Promise((function(e){c._getSpineTextureAtlas(t,l).then((function(r){if(!r.textureAtlas)return e({skeleton:null,loadingError:r.loadingError,loadingErrorReason:r.loadingErrorReason});var i=b.Z.getResourceFullUrl(t,n,{isResourceForPixi:!0});g.Assets.setPreferences({preferWorkers:!1,crossOrigin:(0,y.bc)(i)?"use-credentials":"anonymous"}),g.Assets.add(n,i,{spineAtlas:r.textureAtlas}),g.Assets.load(n).then((function(t){e({skeleton:t.spineData,loadingError:null,loadingErrorReason:null})}),(function(t){console.error('Error while loading Spine data "'.concat(n,'": ').concat(t,".\nCheck if you selected correct files.")),e({skeleton:null,loadingError:t,loadingErrorReason:"spine-resource-loading-error"})}))}))})));case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getPIXIVideoTexture",value:function(e,t){if(T[t])return T[t];if(!e.getResourcesManager().hasResource(t))return S;if("video"!==e.getResourcesManager().getResource(t).getKind())return S;var n=b.Z.getResourceFullUrl(e,t,{isResourceForPixi:!0});return T[t]=g.Texture.from(n,{scaleMode:g.SCALE_MODES.LINEAR,resourceOptions:{autoPlay:!1,autoLoad:!0,crossorigin:R(n)}}),T[t]?(T[t].baseTexture.resource.load().catch((function(e){console.error("Unable to load video texture from url ".concat(n,":"),e),T[t]=S})),T[t]):(console.error("Texture loading for ".concat(n," returned nothing")),T[t]=S,T[t])}},{key:"loadFontFamily",value:function(e,t){if(w[t])return Promise.resolve(w[t]);var n=p()(t),r=null;e.getResourcesManager().hasResource(t)?"font"===e.getResourcesManager().getResource(t).getKind()&&(r=b.Z.getResourceFullUrl(e,t,{isResourceForPixi:!0})):r=b.Z.getFullUrl(e,t,{isResourceForPixi:!0});return r?function(e,t){if("undefined"!==typeof FontFace)return fetch(t,{credentials:(0,y.bc)(t)?"include":"same-origin"}).then((function(e){if(!e.ok){var n="Unable to fetch "+t+" to be loaded as a font. HTTP status is: "+e.status+".";throw console.error(n),new Error(n)}return e.arrayBuffer()})).then((function(t){var n=new FontFace(e,t,{});document.fonts.add(n)}));var n=document.createElement("style");return n.appendChild(document.createTextNode("@font-face {\n          font-family: ".concat(e,";\n          src: ").concat(t,";\n        }"))),document.head.appendChild(n),new(j())(e,{}).load().catch((function(t){throw console.warn("Error while loading font ".concat(e),t),t}))}(n,r).then((function(e){return w[t]=n,n})):Promise.resolve("Arial")}},{key:"getFontFamily",value:function(e,t){return w[t]?w[t]:p()(t)}},{key:"getBitmapFontData",value:function(e,t){if(k[t])return Promise.resolve(k[t].data);if(!e.getResourcesManager().hasResource(t))return Promise.reject(new Error("Can't find resource called ".concat(t,".")));if("bitmapFont"!==e.getResourcesManager().getResource(t).getKind())return Promise.reject(new Error("The resource called ".concat(t," is not a bitmap font file. Require .fnt or .xml format.")));var n=b.Z.getResourceFullUrl(e,t,{isResourceForPixi:!0});return n?h().get(n,{withCredentials:(0,y.bc)(n)}).then((function(e){return k[t]=e,e.data})):Promise.reject(new Error("The resource called ".concat(t," was no found.\nThe default bitmap font will be used.")))}},{key:"getInvalidPIXITexture",value:function(){return S}},{key:"getResourceJsonData",value:function(e,t){if(!e.getResourcesManager().hasResource(t))return Promise.reject(new Error("Can't find resource called ".concat(t,".")));var n=e.getResourcesManager().getResource(t);if("json"!==n.getKind()&&"tilemap"!==n.getKind()&&"tileset"!==n.getKind())return Promise.reject(new Error("The resource called ".concat(t," is not a json file.")));var r=b.Z.getResourceFullUrl(e,t,{isResourceForPixi:!0});return h().get(r,{withCredentials:(0,y.bc)(r)}).then((function(e){return e.data}))}}]),e}()},77672:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(15671),i=n(43144),o=(n(36425),n(58247),function(){function e(t,n,i,o,a,s,l){(0,r.Z)(this,e),this._pixiObject=null,this._threeObject=null,this._instance=i,this._associatedObjectConfiguration=o,this._pixiContainer=a,this._threeGroup=s,this._project=t,this._layout=n,this._pixiResourcesLoader=l,this.wasUsed=!0}return(0,i.Z)(e,[{key:"update",value:function(){}},{key:"getPixiObject",value:function(){return this._pixiObject}},{key:"getThreeObject",value:function(){return this._threeObject}},{key:"getInstance",value:function(){return this._instance}},{key:"onRemovedFromScene",value:function(){null!==this._pixiObject&&this._pixiContainer.removeChild(this._pixiObject),null!==this._threeObject&&this._threeGroup.remove(this._threeObject)}},{key:"getOriginX",value:function(){return 0}},{key:"getOriginY",value:function(){return 0}},{key:"getOriginZ",value:function(){return 0}},{key:"getCenterX",value:function(){return this.getWidth()/2}},{key:"getCenterY",value:function(){return this.getHeight()/2}},{key:"getCenterZ",value:function(){return this.getDepth()/2}},{key:"getCustomWidth",value:function(){return this._instance.getCustomWidth()}},{key:"getCustomHeight",value:function(){return this._instance.getCustomHeight()}},{key:"getCustomDepth",value:function(){return this._instance.getCustomDepth()}},{key:"getWidth",value:function(){return this._instance.hasCustomSize()?this.getCustomWidth():this.getDefaultWidth()}},{key:"getHeight",value:function(){return this._instance.hasCustomSize()?this.getCustomHeight():this.getDefaultHeight()}},{key:"getDepth",value:function(){return this._instance.hasCustomDepth()?this.getCustomDepth():this.getDefaultDepth()}},{key:"getDefaultWidth",value:function(){return 32}},{key:"getDefaultHeight",value:function(){return 32}},{key:"getDefaultDepth",value:function(){return 32}}],[{key:"toRad",value:function(e){return e/180*Math.PI}},{key:"applyRatio",value:function(e){var t=e.oldReferenceValue;return e.newReferenceValue/t*e.valueToApplyTo}}]),e}())},79916:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(15671),i=n(43144),o=(n(36425),n(58247),function(){function e(t,n,i,o,a,s){(0,r.Z)(this,e),this._pixiObject=null,this._instance=i,this._associatedObjectConfiguration=o,this._pixiContainer=a,this._project=t,this._layout=n,this._pixiResourcesLoader=s,this.wasUsed=!0}return(0,i.Z)(e,[{key:"update",value:function(){}},{key:"getPixiObject",value:function(){return this._pixiObject}},{key:"getInstance",value:function(){return this._instance}},{key:"onRemovedFromScene",value:function(){null!==this._pixiObject&&this._pixiContainer.removeChild(this._pixiObject)}},{key:"getOriginX",value:function(){return 0}},{key:"getOriginY",value:function(){return 0}},{key:"getCenterX",value:function(){return this.getWidth()/2}},{key:"getCenterY",value:function(){return this.getHeight()/2}},{key:"getCustomWidth",value:function(){return this._instance.getCustomWidth()}},{key:"getCustomHeight",value:function(){return this._instance.getCustomHeight()}},{key:"getWidth",value:function(){return this._instance.hasCustomSize()?this.getCustomWidth():this.getDefaultWidth()}},{key:"getHeight",value:function(){return this._instance.hasCustomSize()?this.getCustomHeight():this.getDefaultHeight()}},{key:"getDepth",value:function(){return 0}},{key:"getDefaultWidth",value:function(){return 32}},{key:"getDefaultHeight",value:function(){return 32}},{key:"getDefaultDepth",value:function(){return 0}}],[{key:"toRad",value:function(e){return e/180*Math.PI}}]),e}())},71106:function(e,t,n){"use strict";n.d(t,{Pu:function(){return s},aZ:function(){return a}});var r=n(74165),i=n(15861),o=n(28381),a=(n(71445),{authenticated:!1,firebaseUser:null,profile:null,loginState:null,creatingOrLoggingInAccount:!1,badges:null,cloudProjects:null,cloudProjectsFetchingErrorLabel:null,receivedAssetPacks:null,receivedAssetShortHeaders:null,receivedGameTemplates:null,gameTemplatePurchases:null,assetPackPurchases:null,recommendations:null,notifications:null,subscription:null,usages:null,limits:null,authenticationError:null,onLogin:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onLoginWithProvider:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onCancelLogin:function(){},onLogout:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onCreateAccount:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onEditProfile:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onResetPassword:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onOpenLoginDialog:function(){},onOpenEditProfileDialog:function(){},onOpenChangeEmailDialog:function(){},onOpenCreateAccountDialog:function(){},onBadgesChanged:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onCloudProjectsChanged:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRefreshUserProfile:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRefreshFirebaseProfile:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRefreshSubscription:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRefreshLimits:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRefreshGameTemplatePurchases:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRefreshAssetPackPurchases:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRefreshNotifications:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onPurchaseSuccessful:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onSendEmailVerification:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onOpenEmailVerificationDialog:function(){},onAcceptGameStatsEmail:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAuthorizationHeader:function(){return Promise.reject(new Error("Unimplemented"))},achievements:null}),s={authenticated:!1,firebaseUser:null,profile:null,loginState:"done",badges:null,cloudProjects:[],cloudProjectsFetchingErrorLabel:null,receivedAssetPacks:[],receivedAssetShortHeaders:[],receivedGameTemplates:[],subscription:null,usages:null,limits:null},l=o.createContext(a);t.ZP=l},67226:function(e,t,n){"use strict";n.d(t,{HZ:function(){return k},m1:function(){return Z}});var r=n(74165),i=n(15861),o=n(29439),a=n(36600),s=n(28381),l=n(67835),c=n(1773),u=n(63854),d=n(1589),p=n(61325),f=n(32832),h=n(45019),g=n(4076),x=n(86278),m=n(24893),v=n(40243),b=n(96591),C=n(6996),j=n(90099),y=n(29343),Z=function(e){if(e)return"auth/invalid-email"===e.code?(0,y.jsx)(a.Trans,{id:"This email is invalid."}):"auth/missing-email"===e.code?(0,y.jsx)(a.Trans,{id:"Please enter an email address."}):"auth/user-disabled"===e.code?(0,y.jsx)(a.Trans,{id:"This account has been deactivated or deleted."}):"auth/user-not-found"===e.code?(0,y.jsx)(a.Trans,{id:"This user was not found: have you created your account?"}):"auth/email-already-in-use"===e.code?(0,y.jsx)(a.Trans,{id:"This email was already used for another account."}):"auth/operation-not-allowed"===e.code?(0,y.jsx)(a.Trans,{id:"Service seems to be unavailable, please try again later."}):"auth/requires-recent-login"===e.code?(0,y.jsx)(a.Trans,{id:"Please log out and log in again to verify your identify, then change your email."}):"auth/network-request-failed"===e.code?(0,y.jsx)(a.Trans,{id:"The request could not reach the servers, ensure you are connected to internet."}):void 0},k=function(e){if(e)return"auth/too-many-requests"===e.code?(0,y.jsx)(a.Trans,{id:"That's a lot of unsuccessful login attempts! Wait a bit before trying again or reset your password."}):"auth/wrong-password"===e.code?(0,y.jsx)(a.Trans,{id:"The password is invalid."}):"auth/weak-password"===e.code?(0,y.jsx)(a.Trans,{id:"This password is too weak: please use more letters and digits."}):"auth/internal-error"===e.code?(0,y.jsx)(a.Trans,{id:"An unknown error happened, ensure your password is entered correctly."}):void 0};t.ZP=function(e){var t=e.onClose,n=e.onGoToLogin,Z=e.onCreateAccount,k=e.onLoginWithProvider,w=e.createAccountInProgress,T=e.error,S=(0,C.U)().isMobile,P={formContainer:{width:{isMobile:S}.isMobile?"95%":"60%",marginTop:20}},E=s.useState(""),I=(0,o.Z)(E,2),M=I[0],L=I[1],A=s.useState(""),F=(0,o.Z)(A,2),O=F[0],R=F[1],D=s.useState(""),_=(0,o.Z)(D,2),B=_[0],N=_[1],U=s.useState(!1),H=(0,o.Z)(U,2),V=H[0],z=H[1],W=s.useState(null),G=(0,o.Z)(W,2),Y=G[0],q=G[1],X=s.useState(!1),K=(0,o.Z)(X,2),J=K[0],Q=K[1],$=!w&&(0,h.js)(B,{allowEmpty:!0})&&!J&&(!Y||Y.isAvailable),ee=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Z({email:M.trim(),password:O,username:B,getNewsletterEmail:V});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}();return(0,y.jsx)(c.ZP,{title:null,id:"create-account-dialog",actions:[(0,y.jsx)(l.Z,{label:(0,y.jsx)(a.Trans,{id:"Cancel"}),primary:!1,onClick:t},"close"),(0,y.jsx)(u.Z,{isLoading:w,children:(0,y.jsx)(c.vF,{label:(0,y.jsx)(a.Trans,{id:"Create account"}),id:"create-account-button",primary:!0,disabled:!$,onClick:ee})},"create-account")],secondaryActions:[(0,y.jsx)(g.Z,{helpPagePath:"/interface/profile"},"help")],cannotBeDismissed:w,onApply:ee,onRequestClose:function(){w||t()},maxWidth:"sm",open:!0,flexColumnBody:!0,children:(0,y.jsxs)(p.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:[(0,y.jsx)(m.Z,{fontSize:"large"}),(0,y.jsx)(x.Z,{size:"title",align:"center",children:(0,y.jsx)(a.Trans,{id:"Sign up for free!"})}),(0,y.jsxs)(v.sg,{noMargin:!0,alignItems:"center",children:[(0,y.jsx)(x.Z,{size:"body2",noMargin:!0,align:"center",children:(0,y.jsx)(a.Trans,{id:"Welcome to GDevelop!"})}),(0,y.jsxs)(p.pJ,{noMargin:!0,children:[(0,y.jsx)(x.Z,{size:"body2",noMargin:!0,align:"center",children:(0,y.jsx)(a.Trans,{id:"Already a member?"})}),(0,y.jsx)(b.Z,{href:"#",onClick:n,disabled:w,children:(0,y.jsx)(x.Z,{size:"body2",noMargin:!0,color:"inherit",children:(0,y.jsx)(a.Trans,{id:"Log in to your account"})})})]})]}),(0,y.jsx)("div",{style:P.formContainer,children:(0,y.jsx)(j.Z,{onCreateAccount:ee,onLoginWithProvider:k,email:M,onChangeEmail:L,password:O,onChangePassword:R,username:B,onChangeUsername:N,optInNewsletterEmail:V,onChangeOptInNewsletterEmail:z,createAccountInProgress:w,error:T,usernameAvailability:Y,onChangeUsernameAvailability:q,isValidatingUsername:J,onChangeIsValidatingUsername:Q})}),(0,y.jsx)(d.Z,{children:(0,y.jsx)(f.r,{translatableSource:{id:"By creating an account and using GDevelop, you agree to the [Terms and Conditions](https://gdevelop.io/page/terms-and-conditions)."}})})]})})}},90099:function(e,t,n){"use strict";var r=n(36600),i=(n(28381),n(29277)),o=n(61325),a=n(45019),s=n(21601),l=n(86567),c=n(67226),u=n(40243),d=n(86278),p=n(67835),f=n(5295),h=n(35638),g=n(31370),x=n(82936),m=n(57748),v=n(29343),b={identityProvidersBlock:{display:"flex",flexDirection:"column",alignItems:"stretch",marginTop:30}};t.Z=function(e){var t=e.onCreateAccount,n=e.onLoginWithProvider,C=e.email,j=e.onChangeEmail,y=e.password,Z=e.onChangePassword,k=e.username,w=e.onChangeUsername,T=e.optInNewsletterEmail,S=e.onChangeOptInNewsletterEmail,P=(e.usernameAvailability,e.onChangeUsernameAvailability),E=e.isValidatingUsername,I=e.onChangeIsValidatingUsername,M=e.createAccountInProgress,L=e.error,A=!!L&&"auth/account-exists-with-different-credential"===L.code;return(0,v.jsx)(u.sg,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:(0,v.jsx)(l.Z,{onSubmit:t,autoComplete:"on",name:"createAccount",children:(0,v.jsxs)(o.ak,{noMargin:!0,children:[A&&(0,v.jsx)(x.Z,{kind:"error",children:m.b}),(0,v.jsx)(a.uR,{value:k,onChange:function(e,t){w(t)},allowEmpty:!0,onAvailabilityChecked:P,onAvailabilityCheckLoading:I,isValidatingUsername:E,disabled:M}),(0,v.jsx)(i.ZP,{value:C,floatingLabelText:(0,v.jsx)(r.Trans,{id:"Email"}),errorText:(0,c.m1)(L),fullWidth:!0,type:"email",required:!0,onChange:function(e,t){j(t)},onBlur:function(e){j(e.currentTarget.value.trim())},disabled:M}),(0,v.jsx)(i.ZP,{value:y,floatingLabelText:(0,v.jsx)(r.Trans,{id:"Password"}),errorText:(0,c.HZ)(L),type:"password",fullWidth:!0,required:!0,onChange:function(e,t){Z(t)},disabled:M}),(0,v.jsx)(s.Z,{label:(0,v.jsx)(r.Trans,{id:"I want to receive the GDevelop Newsletter"}),checked:T,onCheck:function(e,t){S(t)},disabled:M}),(0,v.jsxs)("div",{style:b.identityProvidersBlock,children:[(0,v.jsx)(u.x1,{noMargin:!0,justifyContent:"center",children:(0,v.jsx)(d.Z,{size:"body2",noMargin:!0,children:(0,v.jsx)(r.Trans,{id:"Or continue with"})})}),(0,v.jsx)(u.x1,{children:(0,v.jsxs)(o.ep,{expand:!0,noColumnMargin:!0,noMargin:!0,children:[(0,v.jsx)(p.Z,{primary:!0,fullWidth:!0,label:"Google",leftIcon:(0,v.jsx)(f.Z,{}),onClick:function(){n("google")},disabled:M}),(0,v.jsx)(p.Z,{primary:!0,fullWidth:!0,label:"GitHub",leftIcon:(0,v.jsx)(g.Z,{}),onClick:function(){n("github")},disabled:M}),(0,v.jsx)(p.Z,{primary:!0,fullWidth:!0,label:"Apple",leftIcon:(0,v.jsx)(h.Z,{}),onClick:function(){n("apple")},disabled:M})]})})]})]})})})}},54458:function(e,t,n){"use strict";var r=n(36600),i=(n(28381),n(67835)),o=n(32484),a=n(40243),s=n(86278),l=n(61325),c=n(29343),u={container:{maxWidth:"480px",whiteSpace:"normal"}};t.Z=function(e){var t=e.message,n=e.onOpenLoginDialog,d=e.onOpenCreateAccountDialog;e.justifyContent;return(0,c.jsx)(a.sg,{alignItems:"center",children:(0,c.jsx)("div",{style:u.container,children:(0,c.jsxs)(l.ak,{children:[(0,c.jsx)(s.Z,{noMargin:!0,align:"center",children:t||(0,c.jsx)(r.Trans,{id:"You are not connected. Create an account to build your game for Android, Windows, macOS and Linux in one click, and get access to metrics for your game."})}),(0,c.jsxs)(l.ep,{justifyContent:"center",noMargin:!0,children:[(0,c.jsx)(o.Z,{id:"create-account-button",label:(0,c.jsx)(r.Trans,{id:"Create my account"}),onClick:d,primary:!0}),(0,c.jsx)(i.Z,{label:(0,c.jsx)(r.Trans,{id:"Login"}),onClick:n})]})]})})})}},96059:function(e,t,n){"use strict";n.d(t,{H:function(){return x}});var r=n(74165),i=n(15861),o=n(29439),a=n(36600),s=n(28381),l=n(67835),c=n(1773),u=n(40243),d=n(29277),p=n(63854),f=n(86278),h=n(86567),g=n(29343),x=/^(.+)@(.+)$/;t.Z=function(e){var t=e.onClose,n=e.onForgotPassword,m=s.useState(""),v=(0,o.Z)(m,2),b=v[0],C=v[1],j=s.useState(!1),y=(0,o.Z)(j,2),Z=y[0],k=y[1],w=s.useState(!1),T=(0,o.Z)(w,2),S=T[0],P=T[1],E=s.useState(!0),I=(0,o.Z)(E,2),M=I[0],L=I[1],A=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=b.trim(),C(t),L(x.test(t)),!S&&b&&M){e.next=5;break}return e.abrupt("return");case 5:return P(!0),e.next=8,n({email:b});case 8:P(!1),k(!0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,g.jsx)(c.ZP,{title:(0,g.jsx)(a.Trans,{id:"Reset your password"}),open:!0,actions:[(0,g.jsx)(l.Z,{label:(0,g.jsx)(a.Trans,{id:"Close"}),onClick:t,disabled:S},"close"),Z?null:(0,g.jsx)(p.Z,{isLoading:S,children:(0,g.jsx)(c.vF,{label:(0,g.jsx)(a.Trans,{id:"Reset password"}),primary:!0,onClick:A,disabled:S||!M})},"reset")],cannotBeDismissed:S,onRequestClose:t,maxWidth:"xs",onApply:A,children:Z?(0,g.jsx)(u.sg,{noMargin:!0,children:(0,g.jsx)(f.Z,{children:(0,g.jsx)(a.Trans,{id:"You should have received an email containing instructions to reset and set a new password. Once it's done, you can use your new password in GDevelop."})})}):(0,g.jsx)(h.Z,{onSubmit:A,autoComplete:"on",name:"resetPassword",children:(0,g.jsx)(u.sg,{noMargin:!0,children:(0,g.jsx)(d.ZP,{autoFocus:"desktop",value:b,floatingLabelText:(0,g.jsx)(a.Trans,{id:"Email"}),onChange:function(e,t){M||L(!0),C(t)},errorText:M?void 0:(0,g.jsx)(a.Trans,{id:"Invalid email address."}),type:"email",fullWidth:!0,onBlur:function(e){var t=e.currentTarget.value.trim();C(t),L(x.test(t))}})})})})}},57748:function(e,t,n){"use strict";n.d(t,{b:function(){return j}});var r=n(29439),i=n(36600),o=n(28381),a=n(29277),s=n(86278),l=n(67226),c=n(61325),u=n(96591),d=n(96059),p=n(86567),f=n(40243),h=n(67835),g=n(82936),x=n(5295),m=n(35638),v=n(31370),b=n(29343),C={identityProvidersBlock:{display:"flex",flexDirection:"column",alignItems:"stretch",marginTop:30}},j=(0,b.jsx)(i.Trans,{id:"You already have an account for this email address with a different provider (Google, Apple or GitHub). Please try with one of those."});t.Z=function(e){var t=e.onLogin,n=e.onLoginWithProvider,y=e.email,Z=e.onChangeEmail,k=e.password,w=e.onChangePassword,T=e.onForgotPassword,S=e.loginInProgress,P=e.error,E=o.useState(!1),I=(0,r.Z)(E,2),M=I[0],L=I[1],A=!!P&&"auth/account-exists-with-different-credential"===P.code;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(c.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"stretch",children:[(0,b.jsx)(p.Z,{onSubmit:t,autoComplete:"on",name:"login",children:(0,b.jsxs)(c.ak,{noMargin:!0,children:[A&&(0,b.jsx)(g.Z,{kind:"error",children:j}),(0,b.jsx)(a.ZP,{autoFocus:"desktop",value:y,floatingLabelText:(0,b.jsx)(i.Trans,{id:"Email"}),errorText:(0,l.m1)(P),onChange:function(e,t){Z(t)},onBlur:function(e){Z(e.currentTarget.value.trim())},fullWidth:!0,type:"email",disabled:S}),(0,b.jsx)(a.ZP,{value:k,floatingLabelText:(0,b.jsx)(i.Trans,{id:"Password"}),errorText:(0,l.HZ)(P),type:"password",onChange:function(e,t){w(t)},fullWidth:!0,disabled:S})]})}),(0,b.jsx)(f.x1,{noMargin:!0,justifyContent:"center",children:(0,b.jsx)(u.Z,{href:"",onClick:function(){return L(!0)},disabled:S,children:(0,b.jsx)(s.Z,{size:"body2",noMargin:!0,color:"inherit",children:(0,b.jsx)(i.Trans,{id:"Did you forget your password?"})})})}),(0,b.jsxs)("div",{style:C.identityProvidersBlock,children:[(0,b.jsx)(f.x1,{noMargin:!0,justifyContent:"center",children:(0,b.jsx)(s.Z,{size:"body2",noMargin:!0,children:(0,b.jsx)(i.Trans,{id:"Or continue with"})})}),(0,b.jsx)(f.x1,{children:(0,b.jsxs)(c.ep,{expand:!0,noColumnMargin:!0,noMargin:!0,children:[(0,b.jsx)(h.Z,{primary:!0,fullWidth:!0,label:"Google",leftIcon:(0,b.jsx)(x.Z,{}),onClick:function(){n("google")},disabled:S}),(0,b.jsx)(h.Z,{primary:!0,fullWidth:!0,label:"GitHub",leftIcon:(0,b.jsx)(v.Z,{}),onClick:function(){n("github")},disabled:S}),(0,b.jsx)(h.Z,{primary:!0,fullWidth:!0,label:"Apple",leftIcon:(0,b.jsx)(m.Z,{}),onClick:function(){n("apple")},disabled:S})]})})]})]}),M&&(0,b.jsx)(d.Z,{onClose:function(){return L(!1)},onForgotPassword:T})]})}},56596:function(e,t,n){"use strict";var r={openUserPublicProfile:function(e){}},i=n(28381).createContext(r);t.Z=i},13055:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(29439),i=n(36600),o=n(28381),a=n(1773),s=n(67835),l=n(1413),c=n(74165),u=n(15861),d=n(24910),p=n(78081),f=n(75383),h=n(38501),g=n(58336),x=n(12813),m=n(29343),v={border:0,flex:1},b="https://gd.games",C=function(e){var t=e.loadErrorMessage,n=e.path,r=e.onMessageReceived,i=e.supportedMessageIds,a=o.useContext(d.Z).palette.type,s=o.useRef("loading"),C=(0,x.t)(),j=(0,h.Z)(),y=new URL(n,b);return y.searchParams.set("supportedMessageIds",i.join(",")),y.searchParams.set("theme",a),o.useEffect((function(){var e=function(e){e.origin===b&&e.data&&"object"===typeof e.data&&("pageLoaded"===e.data.id?(s.current="loaded",j()):r(e.data))};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}),[j,r]),o.useEffect((function(){(0,u.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.g)(6e3);case 2:if(C.current){e.next=4;break}return e.abrupt("return");case 4:if("loaded"!==s.current){e.next=6;break}return e.abrupt("return");case 6:s.current="errored",j();case 8:case"end":return e.stop()}}),e)})))()}),[j,C]),(0,m.jsxs)(m.Fragment,{children:["errored"!==s.current&&(0,m.jsx)("iframe",{src:y.toString(),title:"gdgames",style:(0,l.Z)((0,l.Z)({},v),{},{visibility:"loaded"===s.current?"visible":"hidden"})}),"loading"===s.current&&(0,m.jsx)("div",{style:{position:"absolute",inset:30},children:(0,m.jsx)(p.Z,{style:{width:"100%",height:"100%"}})}),"errored"===s.current&&(0,m.jsx)(f.Z,{onRetry:function(){s.current="loading",j()},children:t})]})},j=n(85545),y=function(e){var t=e.userId,n=e.onClose,l=e.onAssetPackOpen,c=e.onGameTemplateOpen,u=o.useMemo((function(){return{openAssetPack:l?function(e){e.privateAssetPackListingData&&l(e.privateAssetPackListingData)}:null,openGameTemplate:c?function(e){e.privateGameTemplateListingData&&c(e.privateGameTemplateListingData)}:null}}),[l,c]),d=o.useCallback((function(e){e.id&&u[e.id]&&u[e.id](e)}),[u]),p=(0,j._)(d);return(0,m.jsx)(a.ZP,{title:null,open:!0,fullHeight:!0,maxWidth:"md",actions:[(0,m.jsx)(s.Z,{label:(0,m.jsx)(i.Trans,{id:"Close"}),primary:!1,onClick:n},"close")],flexColumnBody:!0,onRequestClose:n,children:(0,m.jsx)(C,{path:"/embedded/user/".concat(t),loadErrorMessage:(0,m.jsx)(i.Trans,{id:"Can't load the profile. Verify your internet connection or try again later."}),supportedMessageIds:Object.entries(u).filter((function(e){var t=(0,r.Z)(e,2);t[0];return!!t[1]})).map((function(e){return(0,r.Z)(e,1)[0]})),onMessageReceived:p})})}},90115:function(e,t,n){"use strict";var r=n(36600),i=n(28381),o=n(86278),a=n(40243),s=n(61325),l=n(96591),c=n(80856),u=n(32484),d=n(67835),p=n(84482),f=n(18876),h=n(29343),g={diamondIcon:{width:50,height:50},coinIcon:{width:12,height:12,aspectRatio:"1"}};t.Z=function(e){var t=e.children,n=e.subscriptionDialogOpeningReason,x=e.label,m=e.makeButtonRaised,v=e.hideButton,b=e.payWithCreditsOptions,C=i.useContext(c.o).openSubscriptionDialog;return(0,h.jsx)(f.r,{renderImage:function(e){return(0,h.jsx)("img",{src:"res/diamond.svg",style:g.diamondIcon,alt:"diamond"})},children:(0,h.jsx)(a.sg,{expand:!0,justifyContent:"center",children:(0,h.jsxs)(s.ep,{alignItems:"center",noColumnMargin:!0,noMargin:!0,children:[(0,h.jsx)(a.sg,{noMargin:!0,expand:!0,children:t}),b&&(0,h.jsx)(d.Z,{leftIcon:(0,h.jsx)(p.Z,{style:g.coinIcon}),label:b.label,primary:!0,onClick:b.onPayWithCredits}),!v&&(m?(0,h.jsx)(u.Z,{label:x||(0,h.jsx)(r.Trans,{id:"Upgrade"}),primary:!0,onClick:function(){C({analyticsMetadata:{reason:n}})}}):(0,h.jsx)(l.Z,{href:"#",onClick:function(){C({analyticsMetadata:{reason:n}})},children:(0,h.jsx)(o.Z,{noMargin:!0,color:"inherit",children:x||(0,h.jsx)(r.Trans,{id:"Upgrade"})})}))]})})})}},68680:function(e,t,n){"use strict";n.d(t,{ZP:function(){return P},sG:function(){return S},H$:function(){return T}});var r=n(1413),i=n(28381),o=n(36600),a=n(86278),s=n(40243),l=n(24910),c=n(61325),u=n(82422),d=n(20914),p=n(6996),f=n(78118),h=n(29343),g=i.memo((function(e){return(0,h.jsxs)(f.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"40",height:"54",viewBox:"0 0 40 54",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,h.jsx)("g",{opacity:"0.2",filter:"url(#filter0_f_1852_139)",children:(0,h.jsx)("path",{d:"M15.9349 33.6183L11.9977 31.3434C9.52385 29.9139 8.00011 27.2737 8.00008 24.4166L8.00004 18.7744C8.00001 15.9671 9.47152 13.3651 11.8774 11.9184L16.0154 9.4302C18.5091 7.93064 21.6205 7.90344 24.1401 9.35916L28.0021 11.5905C30.4761 13.0199 32 15.6602 32 18.5175V24.2028C32 26.9866 30.5528 29.5703 28.1789 31.0245L24.1162 33.5133C21.6146 35.0457 18.475 35.086 15.9349 33.6183Z",fill:"#B4C8D1"})}),(0,h.jsx)("g",{filter:"url(#filter1_f_1852_139)",children:(0,h.jsx)("ellipse",{cx:"8.40804",cy:"0.459081",rx:"8.40804",ry:"0.459081",transform:"matrix(0.904419 0.426646 -0.444506 0.895776 11.0721 36.003)",fill:"black",fillOpacity:"0.9"})}),(0,h.jsx)("path",{d:"M19.7878 9.82303L29.5755 22.3621L19.7878 25.1757V9.82303Z",fill:"#CBD7DE"}),(0,h.jsx)("path",{d:"M19.7878 35.6775L10.0002 22.3627L19.7878 25.1766L19.7878 35.6775Z",fill:"#474E53"}),(0,h.jsx)("path",{d:"M19.7876 9.82401V25.1765L10 22.3629L19.7876 9.82401Z",fill:"#969B9C"}),(0,h.jsx)("path",{d:"M19.7876 35.6773L19.7876 25.1766L29.5752 22.3627L19.7876 35.6773Z",fill:"#969B9C"}),(0,h.jsxs)("defs",{children:[(0,h.jsxs)("filter",{id:"filter0_f_1852_139",x:"0",y:"0.286133",width:"40",height:"42.4054",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,h.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,h.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,h.jsx)("feGaussianBlur",{stdDeviation:"4",result:"effect1_foregroundBlur_1852_139"})]}),(0,h.jsxs)("filter",{id:"filter1_f_1852_139",x:"0.865234",y:"26.3904",width:"35.2145",height:"27.2222",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,h.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,h.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,h.jsx)("feGaussianBlur",{stdDeviation:"5",result:"effect1_foregroundBlur_1852_139"})]})]})]}))})),x=i.memo((function(e){return(0,h.jsxs)(f.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"41",height:"52",viewBox:"0 0 41 52",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,h.jsx)("g",{opacity:"0.2",filter:"url(#filter0_f_1852_149)",children:(0,h.jsx)("path",{d:"M16.4529 32.7606L12.5127 30.5624C9.97992 29.1494 8.41026 26.4764 8.41024 23.5761L8.4102 18.6059C8.41017 15.7547 9.92765 13.119 12.3934 11.6874L16.5293 9.28617C18.9705 7.8688 21.9781 7.84296 24.4433 9.21817L28.3075 11.3737C30.8404 12.7867 32.4102 15.4598 32.4102 18.3602V23.3732C32.4102 26.2013 30.917 28.8192 28.4828 30.259L24.4232 32.6601C21.9735 34.109 18.9384 34.1473 16.4529 32.7606Z",fill:"#FFF69B"})}),(0,h.jsx)("g",{filter:"url(#filter1_f_1852_149)",children:(0,h.jsx)("ellipse",{cx:"8.40812",cy:"0.459085",rx:"8.40812",ry:"0.459085",transform:"matrix(0.904419 0.426646 -0.444506 0.895776 12.072 34.0032)",fill:"black",fillOpacity:"0.9"})}),(0,h.jsx)("path",{d:"M20.7878 7.82306L30.5756 20.3622L20.7878 23.1759V7.82306Z",fill:"#FFF69B"}),(0,h.jsx)("path",{d:"M20.7878 33.6774L11.0001 20.3625L20.7878 23.1764L20.7878 33.6774Z",fill:"#D39902"}),(0,h.jsx)("path",{d:"M20.7877 7.82476V23.1774L11 20.3637L20.7877 7.82476Z",fill:"#FED501"}),(0,h.jsx)("path",{d:"M20.7875 33.6769L20.7875 23.1761L30.5752 20.3621L20.7875 33.6769Z",fill:"#FED501"}),(0,h.jsxs)("defs",{children:[(0,h.jsxs)("filter",{id:"filter0_f_1852_149",x:"0.410156",y:"0.204651",width:"40",height:"41.5696",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,h.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,h.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,h.jsx)("feGaussianBlur",{stdDeviation:"4",result:"effect1_foregroundBlur_1852_149"})]}),(0,h.jsxs)("filter",{id:"filter1_f_1852_149",x:"1.86511",y:"24.3906",width:"35.2146",height:"27.2222",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,h.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,h.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,h.jsx)("feGaussianBlur",{stdDeviation:"5",result:"effect1_foregroundBlur_1852_149"})]})]})]}))})),m=i.memo((function(e){return(0,h.jsxs)(f.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"43",height:"45",viewBox:"0 0 43 45",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,h.jsx)("g",{opacity:"0.2",filter:"url(#filter0_f_1852_159)",children:(0,h.jsx)("path",{d:"M17.4264 35.4835L12.1452 32.5793C9.58858 31.1733 8.00012 28.487 8.00009 25.5693L8.00004 19.3058C8.00002 16.4368 9.53633 13.7874 12.0264 12.3624L17.501 9.22931C19.9206 7.84462 22.8865 7.81932 25.3293 9.16254L30.5213 12.0175C33.0781 13.4233 34.6667 16.1097 34.6667 19.0276V25.3337C34.6667 28.1798 33.1546 30.8115 30.696 32.245L25.3106 35.3847C22.8823 36.8004 19.8893 36.8379 17.4264 35.4835Z",fill:"#FF846A"})}),(0,h.jsx)("path",{d:"M9.33337 23.3333L15.3334 12.941L27.3334 12.941L33.3334 23.3333L27.3334 33.7256L15.3334 33.7256L9.33337 23.3333Z",fill:"url(#paint0_linear_1852_159)"}),(0,h.jsx)("path",{d:"M14.3334 23.3333L17.8334 17.2712L24.8334 17.2712L28.3334 23.3333L24.8334 29.3955L17.8334 29.3955L14.3334 23.3333Z",fill:"#FF4D4D"}),(0,h.jsx)("path",{d:"M24.8334 17.2333L27.3333 12.9333L33.3333 23.3333H28.3333L24.8334 17.2333Z",fill:"#ED2B00"}),(0,h.jsx)("path",{d:"M17.8334 17.2333L15.3334 12.9333L9.3334 23.3333H14.3334L17.8334 17.2333Z",fill:"#D21E13"}),(0,h.jsx)("path",{d:"M17.7571 29.3774L15.2783 33.6896L27.2849 33.6994L24.7899 29.3664L17.7571 29.3774Z",fill:"#B71409"}),(0,h.jsxs)("defs",{children:[(0,h.jsxs)("filter",{id:"filter0_f_1852_159",x:"0",y:"0.172668",width:"42.6666",height:"44.3008",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,h.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,h.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,h.jsx)("feGaussianBlur",{stdDeviation:"4",result:"effect1_foregroundBlur_1852_159"})]}),(0,h.jsxs)("linearGradient",{id:"paint0_linear_1852_159",x1:"15.3334",y1:"35.3333",x2:"35.3334",y2:"15.8333",gradientUnits:"userSpaceOnUse",children:[(0,h.jsx)("stop",{stopColor:"#D32A05"}),(0,h.jsx)("stop",{offset:"1",stopColor:"#FF3B3B"})]})]})]}))})),v=i.memo((function(e){return(0,h.jsxs)(f.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"43",height:"45",viewBox:"0 0 43 45",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,h.jsx)("g",{opacity:"0.2",filter:"url(#filter0_f_1852_168)",children:(0,h.jsx)("path",{d:"M17.4264 35.4835L12.1452 32.5793C9.58858 31.1733 8.00012 28.487 8.00009 25.5693L8.00004 19.3058C8.00002 16.4368 9.53633 13.7874 12.0264 12.3624L17.501 9.22931C19.9206 7.84462 22.8865 7.81932 25.3293 9.16254L30.5213 12.0175C33.0781 13.4233 34.6667 16.1097 34.6667 19.0276V25.3337C34.6667 28.1798 33.1546 30.8115 30.696 32.245L25.3106 35.3847C22.8823 36.8004 19.8893 36.8379 17.4264 35.4835Z",fill:"#99FF6A"})}),(0,h.jsx)("path",{d:"M9.33337 23.3333L15.3334 12.941L27.3334 12.941L33.3334 23.3333L27.3334 33.7256L15.3334 33.7256L9.33337 23.3333Z",fill:"url(#paint0_linear_1852_168)"}),(0,h.jsx)("path",{d:"M14.3334 23.3333L17.8334 17.2712L24.8334 17.2712L28.3334 23.3333L24.8334 29.3955L17.8334 29.3955L14.3334 23.3333Z",fill:"#15E8AE"}),(0,h.jsx)("path",{d:"M24.8334 17.2333L27.3333 12.9333L33.3333 23.3333H28.3333L24.8334 17.2333Z",fill:"#00D684"}),(0,h.jsx)("path",{d:"M17.8334 17.2333L15.3334 12.9333L9.3334 23.3333H14.3334L17.8334 17.2333Z",fill:"#03D388"}),(0,h.jsx)("path",{d:"M17.7572 29.3774L15.2784 33.6896L27.2851 33.6994L24.79 29.3664L17.7572 29.3774Z",fill:"#12835A"}),(0,h.jsxs)("defs",{children:[(0,h.jsxs)("filter",{id:"filter0_f_1852_168",x:"0",y:"0.172668",width:"42.6666",height:"44.3008",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,h.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,h.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,h.jsx)("feGaussianBlur",{stdDeviation:"4",result:"effect1_foregroundBlur_1852_168"})]}),(0,h.jsxs)("linearGradient",{id:"paint0_linear_1852_168",x1:"16.6667",y1:"39",x2:"21.3334",y2:"3.66667",gradientUnits:"userSpaceOnUse",children:[(0,h.jsx)("stop",{stopColor:"#13947C"}),(0,h.jsx)("stop",{offset:"1",stopColor:"#00D581"})]})]})]}))})),b=i.memo((function(e){return(0,h.jsxs)(f.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"42",height:"43",viewBox:"0 0 42 43",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,h.jsx)("g",{opacity:"0.2",filter:"url(#filter0_f_1893_85)",children:(0,h.jsx)("path",{d:"M17.1841 33.9319L12.2352 31.2924C9.62842 29.902 8.00011 27.1881 8.00009 24.2337L8.00004 18.9593C8.00002 16.0529 9.57631 13.375 12.1175 11.9645L17.2554 9.11264C19.6285 7.7954 22.5077 7.77125 24.9025 9.04848L29.7646 11.6415C32.3716 13.0318 34 15.7458 34 18.7004V24.0171C34 26.9008 32.448 29.5614 29.9377 30.9809L24.8867 33.837C22.5045 35.1841 19.5989 35.2199 17.1841 33.9319Z",fill:"#3888FF"})}),(0,h.jsx)("path",{d:"M15.5625 9H27.4375L31 12.8658V28.658L27.4375 32.5238H15.5625L12 28.658V12.8658L15.5625 9Z",fill:"url(#paint0_linear_1893_85)"}),(0,h.jsx)("path",{d:"M17.8244 12.619H25.1756L27.3809 15.2954V26.2284L25.1756 28.9048H17.8244L15.619 26.2284V15.2954L17.8244 12.619Z",fill:"#569EF4"}),(0,h.jsx)("path",{d:"M27.3809 15.3333L31 12.8543L27.4714 9L25.119 12.619L27.3809 15.3333Z",fill:"#4E98F0"}),(0,h.jsx)("path",{d:"M15.6191 15.3333L12 12.8543L15.5286 9L17.881 12.619L15.6191 15.3333Z",fill:"#2E82E5"}),(0,h.jsx)("path",{d:"M27.3809 26.1905L31 28.6695L27.4714 32.5238L25.119 28.9048L27.3809 26.1905Z",fill:"#2178E0"}),(0,h.jsx)("path",{d:"M15.6191 26.1905L12 28.6695L15.5286 32.5238L17.881 28.9048L15.6191 26.1905Z",fill:"#1564C2"}),(0,h.jsx)("path",{d:"M31 12.8519V28.6734L27.381 26.1905V15.3333L31 12.8519Z",fill:"#3187ED"}),(0,h.jsx)("path",{d:"M25.1149 12.619L17.8768 12.619L15.5343 9L27.4714 9L25.1149 12.619Z",fill:"#3491FF"}),(0,h.jsxs)("defs",{children:[(0,h.jsxs)("filter",{id:"filter0_f_1893_85",x:"0",y:"0.107361",width:"42",height:"42.7658",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,h.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,h.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,h.jsx)("feGaussianBlur",{stdDeviation:"4",result:"effect1_foregroundBlur_1893_85"})]}),(0,h.jsxs)("linearGradient",{id:"paint0_linear_1893_85",x1:"31",y1:"9",x2:"21.9524",y2:"35.6905",gradientUnits:"userSpaceOnUse",children:[(0,h.jsx)("stop",{stopColor:"#78B3F9"}),(0,h.jsx)("stop",{offset:"1",stopColor:"#0C64CC"})]})]})]}))})),C=n(24893),j=n(92078),y=n(74394),Z={bulletIcon:{width:20,height:20,marginRight:10},planPricesPaper:{padding:10,display:"flex",flexDirection:"column",alignItems:"center"},bulletText:{flex:1},discountedPrice:{textDecoration:"line-through",opacity:.7},discountContainer:{position:"absolute",top:10,right:10,padding:"4px 8px",borderRadius:4,display:"flex",alignItems:"center"}},k=function(e){return"USD"===e.currency?"$".concat(e.amountInCents/100):"".concat(e.amountInCents/100).concat("EUR"===e.currency?"\u20ac":e.currency)},w=function(e){var t=(0,h.jsx)(s.sg,{noMargin:!0,alignItems:"center",children:(0,h.jsx)("b",{children:k(e)})});return"week"===e.period?1===e.periodCount?e.isPerUser?(0,h.jsx)(a.Z,{noMargin:!0,color:"primary",children:(0,h.jsx)(o.Trans,{id:"{price} per seat, each week",values:{price:t}})},"week"):(0,h.jsx)(a.Z,{noMargin:!0,color:"primary",children:(0,h.jsx)(o.Trans,{id:"{price} per week",values:{price:t}})},"week"):e.isPerUser?(0,h.jsx)(a.Z,{noMargin:!0,color:"primary",children:(0,h.jsx)(o.Trans,{id:"{price} per seat, every {0} weeks",values:{0:e.periodCount,price:t}})},"week"):(0,h.jsx)(a.Z,{noMargin:!0,color:"primary",children:(0,h.jsx)(o.Trans,{id:"{price} every {0} weeks",values:{0:e.periodCount,price:t}})},"week"):"month"===e.period?1===e.periodCount?e.isPerUser?(0,h.jsx)(a.Z,{noMargin:!0,color:"primary",children:(0,h.jsx)(o.Trans,{id:"{price} per seat, each month",values:{price:t}})},"month"):(0,h.jsx)(a.Z,{noMargin:!0,color:"primary",children:(0,h.jsx)(o.Trans,{id:"{price} per month",values:{price:t}})},"month"):e.isPerUser?(0,h.jsx)(a.Z,{noMargin:!0,color:"primary",children:(0,h.jsx)(o.Trans,{id:"{price} per seat, every {0} months",values:{0:e.periodCount,price:t}})},"month"):(0,h.jsx)(a.Z,{noMargin:!0,color:"primary",children:(0,h.jsx)(o.Trans,{id:"{price} every {0} months",values:{0:e.periodCount,price:t}})},"month"):1===e.periodCount?e.isPerUser?(0,h.jsx)(a.Z,{noMargin:!0,color:"primary",children:(0,h.jsx)(o.Trans,{id:"{price} per seat, each year",values:{price:t}})},"year"):(0,h.jsx)(a.Z,{noMargin:!0,color:"primary",children:(0,h.jsx)(o.Trans,{id:"{price} per year",values:{price:t}})},"year"):e.isPerUser?(0,h.jsx)(a.Z,{noMargin:!0,color:"primary",children:(0,h.jsx)(o.Trans,{id:"{price} per seat, every {0} years",values:{0:e.periodCount,price:t}})},"year"):(0,h.jsx)(a.Z,{noMargin:!0,color:"primary",children:(0,h.jsx)(o.Trans,{id:"{price} every {0} years",values:{0:e.periodCount,price:t}})},"year")},T=function(e){var t=e.pricingSystems;return e.hidePrice?null:t.length>0?t.map((function(e,t){return[0!==t?(0,h.jsx)(a.Z,{noMargin:!0,size:"body2",color:"primary",children:(0,h.jsx)(o.Trans,{id:"or"})}):null,w(e)]})).flat():(0,h.jsx)(a.Z,{noMargin:!0,color:"primary",children:(0,h.jsx)(o.Trans,{id:"Free"})})},S=function(e){var t=e.subscriptionPlan,n=e.logoSize,r=n+20;switch(t.id){case"gdevelop_silver":case"gdevelop_indie":return(0,h.jsx)(g,{style:{width:r,height:r}});case"gdevelop_gold":case"gdevelop_pro":return(0,h.jsx)(x,{style:{width:r,height:r}});case"gdevelop_education":return(0,h.jsx)(b,{style:{width:r,height:r}});case"gdevelop_startup":return(0,h.jsx)(m,{style:{width:r,height:r}});case"gdevelop_enterprise":return(0,h.jsx)(v,{style:{width:r,height:r}});default:return(0,h.jsx)(C.Z,{style:{width:n,height:n,padding:10}})}},P=function(e){var t=i.useContext(l.Z),n=(0,p.U)().isMobile,f=S({subscriptionPlan:e.subscriptionPlanWithPricingSystems,logoSize:25}),g=e.subscriptionPlanWithPricingSystems.pricingSystems.find((function(t){return t.period===e.periodToDisplay})),x="year"===e.periodToDisplay?e.subscriptionPlanWithPricingSystems.pricingSystems.find((function(e){return"month"===e.period})):null,m="year"===e.periodToDisplay?function(e){var t=e.pricingSystems.find((function(e){return"month"===e.period})),n=e.pricingSystems.find((function(e){return"year"===e.period}));return t&&n?"-"+(100-n.amountInCents/(12*t.amountInCents)*100).toFixed(0)+"%":null}(e.subscriptionPlanWithPricingSystems):null;return(0,h.jsx)(o.I18n,{children:function(i){var o,l=i.i18n;return(0,h.jsxs)(d.Z,{background:e.background,style:(0,r.Z)({padding:n?8:16,border:"1px solid ".concat(t.text.color.disabled),maxWidth:n?void 0:350,minWidth:280,display:"flex",flex:1,position:"relative"},e.isHighlighted?{borderTopWidth:5,borderTopColor:t.palette.secondary}:{}),children:[m&&(0,h.jsxs)("span",{style:(0,r.Z)((0,r.Z)({},Z.discountContainer),{},{backgroundColor:t.message.hot.backgroundColor,color:t.message.hot.color}),children:[(0,h.jsx)(y.Z,{fontSize:"small"}),(0,h.jsx)(s.LZ,{}),(0,h.jsx)(a.Z,{color:"inherit",noMargin:!0,children:m})]}),(0,h.jsxs)(s.sg,{expand:!0,noMargin:!0,alignItems:"stretch",children:[(0,h.jsxs)(s.sg,{noMargin:!0,alignItems:"center",children:[f,(0,h.jsxs)(c.ak,{noMargin:!0,justifyContent:"space-between",alignItems:"center",children:[(0,h.jsx)(a.Z,{size:"block-title",noMargin:!0,children:(0,h.jsx)("span",{style:{textTransform:"uppercase"},children:(0,h.jsx)("b",{children:(0,j.a)(l,e.subscriptionPlanWithPricingSystems.nameByLocale)})})}),(0,h.jsx)(a.Z,{size:"section-title",noMargin:!0,align:"center",children:(0,h.jsx)("div",{style:{minHeight:82},children:(0,j.a)(l,e.subscriptionPlanWithPricingSystems.descriptionByLocale)})})]})]}),(0,h.jsx)(s.x1,{expand:!0,alignItems:"flex-start",children:(0,h.jsx)(s.sg,{noMargin:!0,children:e.subscriptionPlanWithPricingSystems.bulletPointsByLocale.map((function(n,i){return(0,h.jsx)(s.sg,{expand:!0,noMargin:!0,children:(0,h.jsxs)(s.x1,{noMargin:!0,alignItems:"center",children:[e.isHighlighted?(0,h.jsx)(u.Z,{style:(0,r.Z)((0,r.Z)({},Z.bulletIcon),{},{color:t.message.valid})}):(0,h.jsx)(u.Z,{style:Z.bulletIcon}),(0,h.jsx)(a.Z,{style:Z.bulletText,children:(0,j.a)(l,n)})]})},i)}))})}),g&&(0,h.jsxs)(d.Z,{background:"light",style:Z.planPricesPaper,children:[x&&(0,h.jsx)("span",{style:Z.discountedPrice,children:T({pricingSystems:[(o=x,(0,r.Z)((0,r.Z)({},o),{},{amountInCents:12*o.amountInCents,period:"year"}))]})}),T({pricingSystems:[g]})]}),(0,h.jsx)(s.LZ,{}),e.actions&&(0,h.jsx)(c.ak,{noMargin:!0,alignItems:"center",justifyContent:"flex-end",children:e.actions})]})]})}})}},79987:function(e,t,n){"use strict";var r=n(29439),i=n(36600),o=n(28381),a=n(67835),s=n(1773),l=n(85131),c=n(25256),u=n(71106),d=n(40243),p=n(62800),f=n(80856),h=n(86278),g=n(68151),x=n(48409),m=n(29343),v={icon:{width:40,height:40,marginRight:20},iconText:{flex:1}},b=o.forwardRef((function(e,t){var n=e.mode,b=e.id,C=e.title,j=e.onChangeSubscription,y=o.useContext(u.ZP),Z=o.useState(!1),k=(0,r.Z)(Z,2),w=k[0],T=k[1],S=o.useContext(f.o).openSubscriptionDialog,P=function(){(0,p.KT)(),T(!1)},E=function(){return(0,g.e_)(y.subscription)?(T(!1),!0):((0,x._F)()||(T(!0),(0,p.w1)({mode:n,id:b})),!1)},I=function(){return(0,g.e_)(y.subscription)};return o.useImperativeHandle(t,(function(){return{checkUserHasSubscription:E,hasUserSubscription:I}})),(0,m.jsx)(s.ZP,{open:w,title:"try"===n?(0,m.jsx)(i.Trans,{id:"We need your support!"}):C,actions:[(0,m.jsx)(a.Z,{label:"try"===n?(0,m.jsx)(i.Trans,{id:"Continue anyway"}):(0,m.jsx)(i.Trans,{id:"Not now, thanks!"}),primary:!1,onClick:P},"close"),(0,m.jsx)(s.vF,{label:(0,m.jsx)(i.Trans,{id:"Get a subscription or login"}),primary:!0,onClick:function(){j&&j(),T(!1),S({analyticsMetadata:{reason:b,preStep:"subscriptionChecker"}})}},"subscribe")],onRequestClose:P,maxWidth:"sm",children:(0,m.jsxs)(d.sg,{noMargin:!0,children:[(0,m.jsx)(d.x1,{noMargin:!0,alignItems:"center",children:"try"===n?(0,m.jsx)(h.Z,{children:(0,m.jsx)(i.Trans,{id:"Please get a subscription to keep GDevelop running."})}):(0,m.jsx)(h.Z,{children:(0,m.jsx)(i.Trans,{id:"To use this feature, you need a GDevelop subscription."})})}),(0,m.jsxs)(d.x1,{noMargin:!0,alignItems:"center",children:[(0,m.jsx)(l.Z,{style:v.icon}),(0,m.jsx)(h.Z,{style:v.iconText,children:(0,m.jsx)(i.Trans,{id:"Get a subscription to gain more one-click exports, cloud projects, leaderboards and remove the GDevelop splashscreen."})})]}),(0,m.jsxs)(d.x1,{noMargin:!0,alignItems:"center",children:[(0,m.jsx)(c.Z,{style:v.icon}),(0,m.jsx)(h.Z,{style:v.iconText,children:(0,m.jsx)(i.Trans,{id:"You're also supporting the development of GDevelop, an open-source software! In the future, more online services will be available for users with a subscription."})})]}),(0,m.jsx)(d.hS,{}),(0,m.jsx)(h.Z,{align:"right",children:(0,m.jsx)("b",{children:(0,m.jsx)(i.Trans,{id:"Thanks!"})})})]})})}));t.Z=b},80856:function(e,t,n){"use strict";n.d(t,{o:function(){return me},p:function(){return ve}});var r=n(1413),i=n(29439),o=n(28381),a=n(93433),s=n(74165),l=n(15861),c=n(36600),u=n(67835),d=n(1773),p=n(71106),f=n(68151),h=n(86578),g=n(30141),x=n(62800),m=n(40243),v=n(1589),b=n(49536),C=n(86278),j=n(21676),y=n(66789),Z=n(29277),k=n(93431),w=n(36262),T=n(63854),S=n(29343);function P(e){var t=e.onClose,n=e.authenticatedUser,r=o.useRef(n.subscription?n.subscription.planId:null),a=(n.subscription?n.subscription.planId:null)!==r.current,p=!!n&&(0,f.u0)(n.subscription);(0,j.Y)((function(){n.onRefreshSubscription().catch((function(){}))}),a?null:3900);var h=n&&n.profile?n.profile.discordUsername:null,g=o.useState(""),x=(0,i.Z)(g,2),P=x[0],E=x[1],I=o.useState(!1),M=(0,i.Z)(I,2),L=M[0],A=M[1],F=o.useContext(w.ZP).values,O=o.useCallback((0,l.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n.profile){e.next=2;break}return e.abrupt("return");case 2:if(P){e.next=4;break}return e.abrupt("return");case 4:return A(!0),e.prev=5,e.next=8,n.onEditProfile({discordUsername:P},F);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.error("Error while editing profile:",e.t0);case 13:return e.prev=13,A(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[5,10,13,16]])}))),[n,P,F]),R=o.useCallback((0,l.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=3;break}return e.next=3,O();case 3:t();case 4:case"end":return e.stop()}}),e)}))),[t,O,P]);return(0,S.jsx)(c.I18n,{children:function(e){var n=e.i18n;return(0,S.jsx)(d.ZP,{title:(0,S.jsx)(c.Trans,{id:"Confirming your subscription"}),actions:[a?(0,S.jsx)(T.Z,{isLoading:L,children:(0,S.jsx)(d.vF,{label:(0,S.jsx)(c.Trans,{id:"Done!"}),primary:!0,onClick:R,disabled:L})},"close"):(0,S.jsx)(u.Z,{label:(0,S.jsx)(c.Trans,{id:"Cancel and close"}),primary:!1,onClick:t,disabled:L},"close")],onRequestClose:t,maxWidth:"sm",open:!0,children:a?(0,S.jsxs)(m.sg,{noMargin:!0,children:[(0,S.jsx)(m.x1,{expand:!0,alignItems:"center",justifyContent:"center",children:(0,S.jsxs)(C.Z,{children:[(0,S.jsx)(c.Trans,{id:"Thanks for getting a subscription and supporting GDevelop!"})," ","\ud83d\udc9c"]})}),(0,S.jsxs)(m.x1,{justifyContent:"center",alignItems:"center",children:[(0,S.jsx)(b.Z,{}),(0,S.jsx)(m.LZ,{}),(0,S.jsx)(C.Z,{children:(0,S.jsx)("b",{children:(0,S.jsx)(c.Trans,{id:"Your new plan is now activated."})})})]}),(0,S.jsx)(m.LZ,{}),(0,S.jsx)(m.x1,{justifyContent:"center",children:(0,S.jsx)(v.Z,{children:(0,S.jsx)(c.Trans,{id:"Your account is upgraded, with the extra exports and online services. If you wish to change later, come back to your profile and choose another plan."})})}),!h&&p&&(0,S.jsx)(m.x1,{children:(0,S.jsx)(Z.ZP,{value:P,fullWidth:!0,translatableHintText:{id:"Enter your Discord username"},onChange:function(e,t){E(t)},disabled:L,maxLength:k.RR.maxLength,helperMarkdownText:n._({id:"Add your Discord username to get access to a dedicated channel! Join the [GDevelop Discord](https://discord.gg/gdevelop)."})})})]}):(0,S.jsxs)(m.sg,{noMargin:!0,children:[(0,S.jsx)(m.x1,{expand:!0,alignItems:"center",justifyContent:"center",children:(0,S.jsxs)(C.Z,{children:[(0,S.jsx)(c.Trans,{id:"Thanks for getting a subscription and supporting GDevelop!"})," ","\ud83d\udc9c"]})}),(0,S.jsx)(m.x1,{expand:!0,alignItems:"center",justifyContent:"center",noMargin:!0,children:(0,S.jsx)(C.Z,{children:(0,S.jsx)("b",{children:(0,S.jsx)(c.Trans,{id:"Your browser will now open to enter your payment details."})})})}),(0,S.jsxs)(m.x1,{justifyContent:"center",alignItems:"center",children:[(0,S.jsx)(y.Z,{size:20}),(0,S.jsx)(m.LZ,{}),(0,S.jsx)(C.Z,{children:(0,S.jsx)(c.Trans,{id:"Waiting for the subscription confirmation..."})})]}),(0,S.jsx)(m.LZ,{}),(0,S.jsx)(m.x1,{justifyContent:"center",children:(0,S.jsx)(v.Z,{children:(0,S.jsx)(c.Trans,{id:"Once you're done, come back to GDevelop and your account will be upgraded automatically, unlocking the extra exports and online services."})})})]})})}})}var E=n(2066),I=n(61325),M=n(78118),L=o.memo((function(e){return(0,S.jsxs)(M.Z,(0,r.Z)((0,r.Z)({},e),{},{viewBox:"0 0 17 16",style:{fill:"none"},children:[(0,S.jsx)("path",{d:"M10.6668 6.66663C11.035 6.66663 11.3334 6.36815 11.3334 5.99996C11.3334 5.63177 11.035 5.33329 10.6668 5.33329C10.2986 5.33329 10.0001 5.63177 10.0001 5.99996C10.0001 6.36815 10.2986 6.66663 10.6668 6.66663Z",fill:"currentColor"}),(0,S.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.32027 2.80616C8.41341 2.71663 8.53758 2.66663 8.66677 2.66663H13.5001C13.7762 2.66663 14.0001 2.89048 14.0001 3.16663V7.99996C14.0001 8.1329 13.9472 8.26037 13.853 8.35419L9.38864 12.8014C8.65615 13.531 7.46558 13.5111 6.758 12.7572L3.82881 9.63613C3.14175 8.90408 3.1713 7.75557 3.89511 7.05982L8.32027 2.80616ZM8.86811 3.66663L4.58811 7.78076C4.25911 8.09701 4.24567 8.61904 4.55797 8.95179L7.48713 12.0728C7.80876 12.4155 8.34992 12.4246 8.6829 12.0929L13.0001 7.79229V3.66663H8.86811Z",fill:"currentColor"})]}))})),A=n(65056),F=n(42986),O=n(91),R=n(82936),D=n(86567),_=function(e){if(e){var t=(0,O.T)(e);if(t){if(404===t.status)return(0,S.jsx)(c.Trans,{id:"This code is not valid - verify you've entered it properly."});if("redemption-code/cannot-be-redeemed-anymore"===t.code)return(0,S.jsx)(c.Trans,{id:"This code was valid but can't be redeemed anymore. If this is unexpected, contact us or the code provider."});if("user-redeemed-code/already-redeemed-by-user"===t.code)return(0,S.jsx)(c.Trans,{id:"You already used this code - you can't reuse a code multiple times."})}return(0,S.jsx)(c.Trans,{id:"There was an unknown error when trying to apply the code. Double check the code, try again later or contact us if this persists."})}};function B(e){var t=e.onClose,n=e.authenticatedUser,r=o.useState(""),a=(0,i.Z)(r,2),p=a[0],h=a[1],g=o.useState(!1),x=(0,i.Z)(g,2),m=x[0],v=x[1],b=o.useState(null),C=(0,i.Z)(b,2),j=C[0],y=C[1],Z=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(){var r,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v(!0),r=n.getAuthorizationHeader,i=n.profile,e.prev=2,i){e.next=5;break}throw new Error("User should be logged in");case 5:return e.next=7,(0,f.XT)(r,i.id,p.trim().toLowerCase());case 7:t(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),y(e.t0);case 13:return e.prev=13,v(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),k=!!p&&!m,w=n.subscription;return(0,S.jsx)(c.I18n,{children:function(e){var n=e.i18n;return(0,S.jsx)(d.ZP,{title:(0,S.jsx)(c.Trans,{id:"Redeem a code"}),actions:[(0,S.jsx)(u.Z,{label:(0,S.jsx)(c.Trans,{id:"Close"}),primary:!1,disabled:m,onClick:function(){return t(!1)}},"close"),(0,S.jsx)(T.Z,{isLoading:m,children:(0,S.jsx)(d.vF,{label:(0,S.jsx)(c.Trans,{id:"Redeem"}),disabled:!k,primary:!0,onClick:Z},"redeem")})],cannotBeDismissed:m,onRequestClose:function(){return t(!1)},onApply:function(){k&&Z()},maxWidth:"sm",open:!0,children:(0,S.jsx)(D.Z,{onSubmit:Z,name:"redeemSubscriptionCoupon",children:(0,S.jsxs)(I.ak,{noMargin:!0,children:[(0,S.jsx)(F.Z,{value:p,onChange:h,translatableHintText:{id:"Enter your code here"},floatingLabelText:(0,S.jsx)(c.Trans,{id:"Redemption code"}),floatingLabelFixed:!0,errorText:_(j),autoFocus:"desktop"}),w&&w.planId?w.redemptionCodeValidUntil?w.redemptionCodeValidUntil>Date.now()?(0,S.jsx)(R.Z,{kind:"warning",children:(0,S.jsx)(c.Trans,{id:"You currently have a subscription, applied thanks to a redemption code, valid until {0}. If you redeem another code, your existing subscription will be canceled and not redeemable anymore!",values:{0:n.date(w.redemptionCodeValidUntil)}})}):null:(0,S.jsx)(R.Z,{kind:"info",children:(0,S.jsx)(c.Trans,{id:"You currently have a subscription. If you redeem a code, the existing subscription will be cancelled and replaced by the one given by the code."})}):null]})})})}})}var N=n(68680),U=n(32484),H=n(78081),V=n(6996),z=n(96591),W=n(92078),G=n(60575),Y=n.n(G),q=n(24893),X=n(21601),K=o.memo((function(e){return(0,S.jsx)(M.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"27",height:"26",viewBox:"0 0 27 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("path",{d:"M13.5 0L17.5487 8.42749L26.8148 9.67376L20.0509 16.1285L21.729 25.3262L13.5 20.888L5.27101 25.3262L6.94912 16.1285L0.185208 9.67376L9.45133 8.42749L13.5 0Z",fill:"currentColor"})}))})),J=function(e){var t=e.onClose,n=e.onCloseAfterSuccess,r=o.useState(!1),a=(0,i.Z)(r,2),h=a[0],g=a[1],x=o.useState(!1),v=(0,i.Z)(x,2),b=v[0],j=v[1],y=o.useState(!1),k=(0,i.Z)(y,2),w=k[0],T=k[1],P=o.useState(!1),E=(0,i.Z)(P,2),M=E[0],L=E[1],F=o.useState(!1),O=(0,i.Z)(F,2),R=O[0],_=O[1],B=o.useState(!1),N=(0,i.Z)(B,2),U=N[0],H=N[1],V=o.useState(!1),z=(0,i.Z)(V,2),W=z[0],G=z[1],Y=o.useState(!1),J=(0,i.Z)(Y,2),Q=J[0],$=J[1],ee=o.useState(""),te=(0,i.Z)(ee,2),ne=te[0],re=te[1],ie=o.useContext(p.ZP),oe=(0,A.Z)().showAlert,ae=(w||M||R||W||U||Q)&&(!U&&!Q||ne.trim().length>0),se=o.useCallback((0,l.Z)((0,s.Z)().mark((function e(){var t,n,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h&&ae){e.next=2;break}return e.abrupt("return");case 2:if(t=ie.getAuthorizationHeader,n=ie.subscription,(r=ie.profile)&&n){e.next=5;break}return e.abrupt("return");case 5:return g(!0),e.prev=6,e.next=9,(0,f.YB)(t,r.id,{planId:null},{cancelImmediately:!1,cancelReasons:{"stopped-making-games":w,"struggling-with-gdevelop":M,"prefer-free-version":R,"missing-feature":U,"quality-issues":W,other:Q,freeText:ne}});case 9:return e.next=11,ie.onRefreshSubscription();case 11:j(!0),e.next=20;break;case 14:return e.prev=14,e.t0=e.catch(6),e.next=18,ie.onRefreshSubscription();case 18:console.error("Error while canceling subscription:",e.t0),oe({title:{id:"Could not cancel your subscription"},message:{id:"There was an error while canceling your subscription. Verify your internet connection or try again later."}});case 20:return e.prev=20,g(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[6,14,20,23]])}))),[ie,oe,h,ae,ne,w,M,R,W,U,Q]),le=!ie.subscription||!ie.profile||h,ce=b?[(0,S.jsx)(d.vF,{label:(0,S.jsx)(c.Trans,{id:"Close"}),onClick:n,primary:!0},"close")]:[(0,S.jsx)(d.vF,{label:(0,S.jsx)(c.Trans,{id:"Submit and cancel"}),onClick:se,disabled:!ae||le,primary:!0},"submit")],ue=b?[]:[(0,S.jsx)(u.Z,{label:(0,S.jsx)(c.Trans,{id:"Back"}),onClick:t,disabled:le},"back")];return(0,S.jsx)(c.I18n,{children:function(e){e.i18n;return(0,S.jsx)(d.ZP,{title:null,actions:ce,secondaryActions:ue,open:!0,cannotBeDismissed:!0,onApply:se,maxWidth:"sm",children:b?(0,S.jsxs)(I.ak,{expand:!0,justifyContent:"center",alignItems:"center",children:[(0,S.jsx)(q.Z,{fontSize:"large"}),(0,S.jsx)(C.Z,{size:"block-title",align:"center",children:(0,S.jsx)(c.Trans,{id:"Your subscription has been canceled"})}),(0,S.jsxs)(I.pJ,{noMargin:!0,alignItems:"center",children:[(0,S.jsx)(K,{}),(0,S.jsx)(C.Z,{size:"sub-title",align:"center",children:(0,S.jsx)(c.Trans,{id:"Thank you for your feedback"})})]})]}):(0,S.jsxs)(I.ak,{expand:!0,justifyContent:"center",alignItems:"center",children:[(0,S.jsx)(q.Z,{fontSize:"large"}),(0,S.jsx)(C.Z,{size:"block-title",align:"center",children:(0,S.jsx)(c.Trans,{id:"Before you go..."})}),(0,S.jsx)(C.Z,{size:"body2",noMargin:!0,align:"center",children:(0,S.jsx)(c.Trans,{id:"Your feedback is valuable to help us improve our premium services. Why are you canceling your subscription?"})}),(0,S.jsx)(m.LZ,{}),(0,S.jsx)(D.Z,{onSubmit:se,autoComplete:"off",name:"cancel",fullWidth:!0,children:(0,S.jsxs)(I.ak,{noMargin:!0,expand:!0,children:[(0,S.jsx)(X.Z,{label:(0,S.jsx)(c.Trans,{id:"I've stopped using GDevelop"}),checked:w,onCheck:function(e,t){return T(t)},disabled:le}),(0,S.jsx)(X.Z,{label:(0,S.jsx)(c.Trans,{id:"I'm struggling to create what I want"}),checked:M,onCheck:function(e,t){return L(t)},disabled:le}),(0,S.jsx)(X.Z,{label:(0,S.jsx)(c.Trans,{id:"The free version is enough for me"}),checked:R,onCheck:function(e,t){return _(t)},disabled:le}),(0,S.jsx)(X.Z,{label:(0,S.jsx)(c.Trans,{id:"It's missing a feature (please specify)"}),checked:U,onCheck:function(e,t){return H(t)},disabled:le}),(0,S.jsx)(X.Z,{label:(0,S.jsx)(c.Trans,{id:"I have encountered bugs or performance problems"}),checked:W,onCheck:function(e,t){return G(t)},disabled:le}),(0,S.jsx)(X.Z,{label:(0,S.jsx)(c.Trans,{id:"Other reason (please specify)"}),checked:Q,onCheck:function(e,t){return $(t)},disabled:le}),(0,S.jsx)(m.LZ,{}),(0,S.jsx)(Z.ZP,{autoFocus:"desktop",value:ne,multiline:!0,translatableHintText:{id:"Please tell us more"},floatingLabelText:(0,S.jsx)(c.Trans,{id:"Details"}),floatingLabelFixed:!0,onChange:function(e,t){re(t)},onBlur:function(e){re(e.currentTarget.value.trim())},fullWidth:!0,disabled:le,rows:4})]})})]})})}})},Q=n(78265),$=n(32694),ee=n(38295),te=n(38742),ne=n(74394),re=n(84900),ie=n(24910),oe={paper:{padding:10},buttonLabel:{fontWeight:"bold",cursor:"default"}},ae=function(e){var t=e.title,n=e.message,i=e.onClickRightButton,a=e.rightButtonLabel,s=o.useContext(ie.Z);return(0,S.jsx)($.Z,{style:(0,r.Z)((0,r.Z)({},oe.paper),{},{backgroundColor:s.message.hot.backgroundColor,color:s.message.hot.color}),children:(0,S.jsxs)(m.x1,{noMargin:!0,alignItems:"center",children:[(0,S.jsx)(ne.Z,{fontSize:"large"}),(0,S.jsxs)(m.sg,{expand:!0,children:[(0,S.jsx)(C.Z,{noMargin:!0,color:"inherit",size:"sub-title",children:t}),(0,S.jsx)(C.Z,{noMargin:!0,color:"inherit",children:n})]}),i&&a&&(0,S.jsxs)(m.x1,{alignItems:"center",children:[(0,S.jsx)(te.Z,{onClick:i,color:"inherit",children:(0,S.jsx)(ee.Z,{color:"inherit",style:oe.buttonLabel,children:a})}),(0,S.jsx)(re.Z,{})]})]})})},se={descriptionText:{marginLeft:16,marginRight:16},bulletIcon:{width:20,height:20,marginRight:10},bulletText:{flex:1},diamondIcon:{width:90,height:90,flexShrink:0,objectFit:"contain"},scrollablePlanCardsContainer:{display:"flex",flexDirection:"row",overflowX:"auto",justifyContent:"center"},planCardsContainer:{display:"inline-flex",flexDirection:"column",flex:1,gap:8,alignItems:"center",overflowY:"auto"},planCardsMobileContainer:{display:"inline-flex",flexDirection:"column",flex:1,gap:8,alignItems:"stretch",overflowY:"auto"},planCardsLineContainer:{display:"inline-flex",flexDirection:"row",alignItems:"stretch",gap:8,overflowY:"auto"}},le={title:{id:"Cancel your subscription?"},message:{id:"By canceling your subscription, you will lose all your premium features at the end of the period you already paid for. Continue?"},confirmButtonLabel:{id:"Continue"},dismissButtonLabel:{id:"Keep subscription"},maxWidth:"sm"},ce={title:{id:"Cancel your subscription?"},message:{id:"By canceling your subscription you will lose all your premium features IMMEDIATELY. Continue?"},confirmButtonLabel:{id:"Cancel my subscription now"},dismissButtonLabel:{id:"Keep subscription"},maxWidth:"sm"},ue={title:{id:"Update your subscription"},message:{id:"Are you sure you want to change your plan? Your next payment will be pro-rated."},confirmButtonLabel:{id:"Update my subscription"},dismissButtonLabel:{id:"Go back"},maxWidth:"sm"},de={title:{id:"Update your subscription"},message:{id:"To get this new subscription, we need to cancel your existing one before you can pay for the new one. The change will be immediate but your payment will NOT be pro-rated (you will have to pay as for a new subscription)."},confirmButtonLabel:{id:"Cancel my subscription"},dismissButtonLabel:{id:"Go back"},maxWidth:"sm"},pe={title:{id:"Update your subscription"},message:{id:"To get this new subscription, we need to cancel your existing one before you can pay for the new one. The change will be immediate. You will also lose your redeemed code."},confirmButtonLabel:{id:"Update my subscription"},dismissButtonLabel:{id:"Go back"},maxWidth:"sm"},fe=function(e,t){return t?Y()(t.map((function(t){return t.specificRequirementByLocale?(0,W.a)(e,t.specificRequirementByLocale):null})).filter(Boolean)):[]};function he(e){var t=e.open,n=e.onClose,r=e.analyticsMetadata,v=e.subscriptionPlansWithPricingSystems,b=e.userLegacySubscriptionPlanWithPricingSystem,j=e.filter,y=o.useState(!1),Z=(0,i.Z)(y,2),k=Z[0],w=Z[1],M=o.useState(20),O=(0,i.Z)(M,2),D=O[0],_=O[1],W=o.useState(!1),G=(0,i.Z)(W,2),Y=G[0],q=G[1],X=o.useState(!1),K=(0,i.Z)(X,2),$=K[0],ee=K[1],te=o.useContext(p.ZP),ne=o.useState(function(e,t){if(!e||!t)return null;var n=t.map((function(e){return e.pricingSystems})).flat().find((function(t){return t.id===e.pricingSystemId}));return n&&"week"!==n.period?n.period:null}(te.subscription,v)||"year"),re=(0,i.Z)(ne,2),ie=re[0],oe=re[1],he=(0,A.Z)().showConfirmation,ge=o.useState(!1),xe=(0,i.Z)(ge,2),me=xe[0],ve=xe[1];o.useEffect((function(){t&&(0,x.Bn)(r)}),[t,r]);var be=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t,n){var r,i,o,a,l,c,u,d,p,h;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=te.getAuthorizationHeader,i=te.subscription,(o=te.profile)&&i){e.next=3;break}return e.abrupt("return");case 3:if(n&&(0,x.Ct)({planId:n.planId,pricingSystemId:n.id}),i.planId||!n){e.next=10;break}return q(!0),a=n&&"gdevelop_education"===n.planId,l=a?D:void 0,E.ZP.openExternalURL((0,f.f3)({pricingSystemId:n.id,userId:o.id,userEmail:o.email,quantity:l})),e.abrupt("return");case 10:if(n){e.next=18;break}return e.next=13,he((0,f.iG)(i)?le:ce);case 13:if(e.sent){e.next=16;break}return e.abrupt("return");case 16:return ve(!0),e.abrupt("return");case 18:if(c=n.planId,u=!(0,f.Bg)(i,c),d=!!i.redemptionCodeValidUntil&&i.redemptionCodeValidUntil>Date.now(),p=!!i.redemptionCodeValidUntil&&i.redemptionCodeValidUntil<Date.now(),h=!u||p?ue:d?pe:de,p){e.next=30;break}return e.next=27,he(h);case 27:if(e.sent){e.next=30;break}return e.abrupt("return");case 30:if(u){e.next=33;break}e.next=51;break;case 33:return w(!0),e.next=36,(0,x.py)({planId:n.planId,pricingSystemId:n.id});case 36:return e.prev=36,e.next=39,(0,f.YB)(r,o.id,{planId:null},{cancelImmediately:!0,cancelReasons:{"changing-subscription":!0}});case 39:return e.next=41,te.onRefreshSubscription();case 41:e.next=46;break;case 43:e.prev=43,e.t0=e.catch(36),(0,g.gR)({message:t._({id:"Your subscription could not be cancelled. Please try again later!"}),rawError:e.t0,errorId:"subscription-update-error"});case 46:return e.prev=46,w(!1),e.finish(46);case 49:q(!0),E.ZP.openExternalURL((0,f.f3)({pricingSystemId:n.id,userId:o.id,userEmail:o.email}));case 51:case"end":return e.stop()}}),e,null,[[36,43,46,49]])})));return function(t,n){return e.apply(this,arguments)}}(),Ce=!te.subscription||!te.profile||k,je=(0,f.e_)(te.subscription),ye=!!te.subscription&&!!te.subscription.cancelAtPeriodEnd,Ze=te.subscription?te.subscription.planId:null,ke=te.subscription?te.subscription.pricingSystemId:null,we=(0,V.U)(),Te=we.windowSize,Se=we.isMobile,Pe=v?[b].concat((0,a.Z)(v)).filter(Boolean).filter((function(e){return"individual"===j?["free","gdevelop_silver","gdevelop_gold"].includes(e.id):"team"===j?["gdevelop_startup","gdevelop_enterprise"].includes(e.id):"education"===j?["gdevelop_education"].includes(e.id):"gdevelop_education"!==e.id})):null,Ee=Pe&&1!==Pe.length?Pe.length<4?"lg":Pe.length<5&&"xl":"md",Ie=function(e){var t=e.subscriptionPlansWithPricingSystems;if(!t)return 0;var n=0;return t.forEach((function(e){if(!e.isLegacy){var t=e.pricingSystems,r=t.find((function(e){return"month"===e.period})),i=t.find((function(e){return"year"===e.period}));if(r&&i){var o=100-i.amountInCents/(12*r.amountInCents)*100;o>n&&(n=o)}}})),n}({subscriptionPlansWithPricingSystems:v});return(0,S.jsx)(c.I18n,{children:function(e){var r=e.i18n;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(d.ZP,{title:null,fullHeight:!0,maxWidth:Ee,actions:[(0,S.jsx)(u.Z,{label:(0,S.jsx)(c.Trans,{id:"Close"}),primary:!1,onClick:n},"close")],secondaryActions:[(0,S.jsx)(u.Z,{leftIcon:(0,S.jsx)(L,{}),label:(0,S.jsx)(c.Trans,{id:"Redeem a code"}),disabled:!te.authenticated||Ce,primary:!1,onClick:function(){return ee(!0)}},"redeem-code")],open:t,fixedContent:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(m.x1,{justifyContent:"space-between",alignItems:"center",children:[(0,S.jsx)(C.Z,{size:"block-title",children:(0,S.jsx)(c.Trans,{id:"Subscription plans"})}),(0,S.jsx)(Q.Z,{value:ie,leftButton:{label:(0,S.jsx)(c.Trans,{id:"Monthly"}),value:"month"},rightButton:{label:(0,S.jsx)(c.Trans,{id:"Yearly"}),value:"year"},onChange:oe})]}),"year"!==ie&&Ie>0&&(0,S.jsx)(ae,{title:(0,S.jsx)(c.Trans,{id:"Up to {0}% discount",values:{0:Ie.toFixed(0)}}),message:(0,S.jsx)(c.Trans,{id:"Get a yearly subscription and enjoy discounts up to {0}%!",values:{0:Ie.toFixed(0)}}),onClickRightButton:function(){return oe("year")},rightButtonLabel:Se?(0,S.jsx)(c.Trans,{id:"Check out"}):(0,S.jsx)(c.Trans,{id:"See yearly subs"})})]}),children:(0,S.jsxs)(I.ak,{noMargin:!0,children:[ye&&(0,S.jsx)(R.Z,{kind:"warning",children:(0,S.jsx)(c.Trans,{id:"Your subscription is being cancelled: you will lose the benefits at the end of the period you already paid for."})}),Pe?(0,S.jsx)("div",{style:se.scrollablePlanCardsContainer,children:(0,S.jsx)("div",{style:"large"===Te||"xlarge"===Te?se.planCardsLineContainer:Se?se.planCardsMobileContainer:se.planCardsContainer,children:Pe.map((function(e){var t="free"===e.id,n=Ze===e.id,i=t?null:e.pricingSystems.find((function(e){return e.period===ie})),o=null;if(t||!i);else if("gdevelop_education"===e.id)if(n)o=[(0,S.jsx)(C.Z,{children:(0,S.jsx)(c.Trans,{id:"Contact us for more information."})},"contact")];else{var a=e.pricingSystems.find((function(e){return"year"===e.period})),s=e.pricingSystems.find((function(e){return"month"===e.period}));a&&s&&(o=[(0,S.jsx)(I.ak,{expand:!0,noMargin:!0,children:(0,S.jsx)(F.Z,{value:D.toString(),floatingLabelFixed:!0,fullWidth:!0,floatingLabelText:(0,S.jsx)(c.Trans,{id:"Number of seats"}),commitOnBlur:!0,type:"number",onChange:function(e){var t=parseInt(e);_(Math.min(f.VZ,Math.max(Number.isNaN(t)?f.Gs:t,f.Gs)))},min:f.Gs,max:f.VZ,step:1,helperMarkdownText:r._({id:"As a teacher, you will use one seat in the plan so make sure to include yourself!"})})},"options"),(0,S.jsx)(U.Z,{primary:!0,disabled:Ce,fullWidth:!0,label:(0,S.jsx)(T.Z,{isLoading:Ce,children:(0,S.jsx)(c.Trans,{id:"Choose this plan"})}),onClick:function(){return be(r,"year"===ie?a:s)}},"upgrade")])}else if(n&&je){var l=!!i&&i.id===ke;o=ye?[(0,S.jsx)(u.Z,{disabled:!0,fullWidth:!0,label:(0,S.jsx)(T.Z,{isLoading:Ce,children:(0,S.jsx)(c.Trans,{id:"Already cancelled - will expire in the future"})}),onClick:function(){}},"cancel")]:l?[(0,S.jsx)(u.Z,{disabled:Ce,fullWidth:!0,label:(0,S.jsx)(T.Z,{isLoading:Ce,children:(0,S.jsx)(c.Trans,{id:"Cancel your subscription"})}),onClick:function(){return be(r,null)}},"cancel")]:[(0,S.jsx)(U.Z,{disabled:Ce,fullWidth:!0,label:(0,S.jsx)(T.Z,{isLoading:Ce,children:"year"===ie?(0,S.jsx)(c.Trans,{id:"Switch to yearly pricing"}):(0,S.jsx)(c.Trans,{id:"Switch to monthly pricing"})}),onClick:function(){return be(r,i)}},"switch")]}else{var d=e.pricingSystems.find((function(e){return e.period===ie}));d&&(o=[(0,S.jsx)(U.Z,{primary:!0,disabled:Ce,fullWidth:!0,label:(0,S.jsx)(T.Z,{isLoading:Ce,children:(0,S.jsx)(c.Trans,{id:"Choose this plan"})}),onClick:function(){return be(r,d)}},"upgrade")])}return(0,S.jsx)(N.ZP,{subscriptionPlanWithPricingSystems:e,periodToDisplay:ie,actions:o,isPending:Ce,isHighlighted:n,background:"medium"},e.id||"free")}))})}):(0,S.jsx)(H.Z,{}),fe(r,Pe).map((function(e){return(0,S.jsx)(R.Z,{kind:"info",children:e},e.substring(0,25))})),(0,S.jsxs)(h.Z,{children:[(0,S.jsx)(c.Trans,{id:"No ties, cancel your subscription anytime. Payments done using Stripe.com and PayPal secure infrastructure."}),(0,S.jsx)("div",{children:(0,S.jsx)(c.Trans,{id:"Compare all the advantages of the different plans in this <0>big feature comparison table</0>.",components:[(0,S.jsx)(z.Z,{href:"https://gdevelop.io/pricing#feature-comparison",onClick:function(){return E.ZP.openExternalURL("https://gdevelop.io/pricing#feature-comparison")}})]})})]})]})}),!te.authenticated&&"loggingIn"!==te.loginState&&(0,S.jsx)(d.ZP,{open:!0,title:(0,S.jsx)(c.Trans,{id:"Create a GDevelop account to continue"}),maxWidth:"sm",cannotBeDismissed:!0,secondaryActions:[(0,S.jsx)(u.Z,{label:(0,S.jsx)(c.Trans,{id:"Maybe later"}),onClick:n},"later")],actions:[(0,S.jsx)(u.Z,{label:(0,S.jsx)(c.Trans,{id:"Login"}),onClick:te.onOpenLoginDialog},"login"),(0,S.jsx)(d.vF,{label:(0,S.jsx)(c.Trans,{id:"Create my account"}),primary:!0,onClick:te.onOpenCreateAccountDialog},"create-account")],children:(0,S.jsx)(C.Z,{children:(0,S.jsx)(c.Trans,{id:"Create an account to get started with GDevelop and access to cloud projects, cloud builds, game analytics, leaderboards and more."})})}),Y&&(0,S.jsx)(P,{authenticatedUser:te,onClose:function(){q(!1),te.onRefreshSubscription()}}),$&&(0,S.jsx)(B,{authenticatedUser:te,onClose:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee(!1),!t){e.next=10;break}return e.prev=2,w(!0),e.next=6,te.onRefreshSubscription();case 6:return e.prev=6,w(!1),q(!0),e.finish(6);case 10:case"end":return e.stop()}}),e,null,[[2,,6,10]])})));return function(t){return e.apply(this,arguments)}}()}),me&&(0,S.jsx)(J,{onClose:function(){ve(!1)},onCloseAfterSuccess:function(){ve(!1),n()}})]})}})}var ge=n(48409),xe=n(88585),me=o.createContext({openSubscriptionDialog:function(){}}),ve=function(e){var t=e.children,n=e.simulateMobileApp,a=o.useState(null),s=(0,i.Z)(a,2),l=s[0],c=s[1],u=o.useState(null),d=(0,i.Z)(u,2),h=d[0],g=d[1],x=o.useContext(p.ZP),m=(0,A.Z)().showAlert,v=(0,xe.Z)({includeLegacy:!0}).subscriptionPlansWithPricingSystems,b=o.useCallback((function(e){var t=e.analyticsMetadata,r=e.filter;if((0,ge._F)()||n){if((0,f.e_)(x.subscription)&&!(0,f.rq)(x.subscription))return void m({title:{id:"Subscription outside the app store"},message:{id:"The subscription of this account comes from outside the app store. Connect with your account on gdevelop.io from your web-browser to manage it."}})}else{if((0,f.rq)(x.subscription))return void m({title:{id:"Subscription with the Apple App store or Google Play store"},message:{id:"The subscription of this account was done using Apple or Google Play. Connect on your account on your Apple or Google device to manage it."}});g(r||null),c(t)}}),[x.subscription,m,n]),C=o.useMemo((function(){return{openSubscriptionDialog:b}}),[b]),j=o.useMemo((function(){return v?(0,xe.k)(v):null}),[v]),y=o.useMemo((function(){if(!x.subscription||!x.subscription.planId||!x.subscription.pricingSystemId||!v)return null;var e=x.subscription,t=e.planId,n=e.pricingSystemId,i=v.find((function(e){return e.id===t}));if(!i||!i.isLegacy)return null;var o=i.pricingSystems.find((function(e){return e.id===n}));return o?(0,r.Z)((0,r.Z)({},i),{},{pricingSystems:[o]}):null}),[v,x.subscription]);return(0,S.jsxs)(me.Provider,{value:C,children:[t,l&&(0,S.jsx)(he,{open:!0,subscriptionPlansWithPricingSystems:j,userLegacySubscriptionPlanWithPricingSystem:y,onClose:function(){return c(null)},analyticsMetadata:l,filter:h})]})}},45019:function(e,t,n){"use strict";n.d(t,{Jh:function(){return x},UT:function(){return g},js:function(){return h},uR:function(){return m}});var r=n(74165),i=n(15861),o=n(29439),a=n(36600),s=n(28381),l=n(66789),c=n(29277),u=n(93431),d=n(68009),p=n(29343),f={circularProgress:{height:20,width:20}},h=function(e,t){return!(!t||!t.allowEmpty||""!==e)||!!e&&/^[\w|-]+$/.test(e)&&e.length<31},g=(0,p.jsx)(a.Trans,{id:"Please pick a short username with only alphanumeric characters as well as _ and -"}),x=(0,p.jsx)(a.Trans,{id:"This username is already used, please pick another one."}),m=function(e){var t=e.initialUsername,n=e.value,m=e.onChange,v=e.errorText,b=e.allowEmpty,C=e.onAvailabilityChecked,j=e.onAvailabilityCheckLoading,y=e.isValidatingUsername,Z=e.disabled,k=h(n,{allowEmpty:!!b})?void 0:g,w=s.useState(null),T=(0,o.Z)(w,2),S=T[0],P=T[1],E=function(e){var t=e.usernameAvailability,n=e.error;C(t),P(n),j(!1)},I=(0,d.N)(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||t.toLowerCase()!==n.toLowerCase()){e.next=3;break}return E({usernameAvailability:{username:n,isAvailable:!0},error:null}),e.abrupt("return");case 3:if(n&&h(n,{allowEmpty:!!b})){e.next=6;break}return E({usernameAvailability:null,error:null}),e.abrupt("return");case 6:return e.prev=6,j(!0),e.next=10,(0,u.HW)(n);case 10:if(i=e.sent){e.next=15;break}throw new Error("Could not get username availability.");case 15:E({usernameAvailability:i,error:i.isAvailable?null:x});case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),console.error("Unable to check username availability.",e.t0),E({usernameAvailability:null,error:null});case 22:return e.prev=22,j(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[6,18,22,25]])})));return function(t){return e.apply(this,arguments)}}(),500);return s.useEffect((function(){I(n)}),[n,I]),(0,p.jsx)(c.ZP,{autoFocus:"desktop",value:n,floatingLabelText:(0,p.jsx)(a.Trans,{id:"Username"}),fullWidth:!0,onChange:m,errorText:k||S||v,endAdornment:y&&(0,p.jsx)(l.Z,{style:f.circularProgress}),disabled:Z,maxLength:50})}},10641:function(e,t,n){"use strict";n.d(t,{D:function(){return h}});var r=n(74165),i=n(15861),o=n(29439),a=n(28381),s=n(68009),l=n(98094),c=n(93431),u=n(38501),d=n(71106),p=n(29343),f=function(e){if(e)return"Error while loading users"},h=function(e){var t=e.userIds,n=e.onChange,h=e.floatingLabelText,g=e.helperText,x=e.disabled,m=(0,u.Z)(),v=a.useState([]),b=(0,o.Z)(v,2),C=b[0],j=b[1],y=(0,a.useState)(""),Z=(0,o.Z)(y,2),k=Z[0],w=Z[1],T=(0,a.useState)(!1),S=(0,o.Z)(T,2),P=S[0],E=S[1],I=a.useContext(d.ZP).profile,M=I?[{text:I.username||"Yourself (no username)",value:I.id}]:[],L=a.useState([]),A=(0,o.Z)(L,2),F=A[0],O=A[1],R=a.useState(null),D=(0,o.Z)(R,2),_=D[0],B=D[1],N=a.useRef(null),U=(0,s.N)((0,i.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B(null),k){e.next=4;break}return O([]),e.abrupt("return");case 4:return e.prev=4,E(!0),e.next=8,(0,c.me)(k);case 8:t=e.sent,n=I?t.filter((function(e){return e.id!==I.id})):t,O(n),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),B(e.t0),console.error("Could not load the users: ",e.t0);case 17:return e.prev=17,E(!1),V(),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[4,13,17,21]])}))),500);a.useEffect((function(){U()}),[U,k]);var H=a.useCallback((0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B(null),t.length){e.next=4;break}return j([]),e.abrupt("return");case 4:return e.prev=4,E(!0),e.next=8,(0,c.TL)(t);case 8:n=e.sent,j(t.map((function(e){var t=n[e];return t?{text:t.username||"".concat(I&&t.id===I.id?"Yourself":"Unknown"," (no username)"),value:t.id}:null})).filter(Boolean)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),B(e.t0),console.error("Could not load the users: ",e.t0);case 16:return e.prev=16,E(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[4,12,16,19]])}))),[t,I]),V=a.useCallback((function(){N.current&&N.current.focusInput()}),[]);return a.useEffect((function(){H()}),[H]),(0,p.jsx)(l.Z,{hintText:{id:"Start typing a username"},floatingLabelText:h,helperText:g,value:C,onChange:function(e,t){t&&(j(t),n(t.map((function(e){return{username:e.text,userId:e.value}}))),m())},inputValue:k,onInputChange:function(e,t){w(t)},ref:N,dataSource:M.concat(F.map((function(e){return e.username&&e.id?{text:e.username,value:e.id}:null})).filter(Boolean)),loading:P||x,fullWidth:!0,error:f(_),disableAutoTranslate:!0})}},794:function(e,t,n){"use strict";n.d(t,{Cf:function(){return j},Ke:function(){return m},cX:function(){return b},gr:function(){return y},rM:function(){return Z},uB:function(){return C}});var r,i=n(1413),o=n(74165),a=n(15861),s=n(43144),l=n(15671),c=n(97326),u=n(60136),d=n(29388),p=n(98737),f=n(34517),h=n(4964),g=n(1236),x="cache-autosave:",m=function(){return r||(r=new g.Z)},v=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;return(0,l.Z)(this,n),e=t.call(this),Error.captureStackTrace&&Error.captureStackTrace((0,c.Z)(e),n),e.name="CloudProjectReadingError",e}return(0,s.Z)(n)}((0,p.Z)(Error)),b=function(e){return function(){var t=(0,a.Z)((0,o.Z)().mark((function t(n,r){var i,a,s,l,c,u,d,p;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=n.fileIdentifier).startsWith(x)){t.next=17;break}if(g.Z.isAvailable()){t.next=4;break}throw new Error("Cache is not available.");case 4:if(a=e.profile){t.next=7;break}throw new Error("User seems to not be logged in. Cannot retrieve autosaved file from cache.");case 7:return s=n.fileIdentifier.replace(x,""),l=m(),t.next=11,l.get({userId:a.id,cloudProjectId:s});case 11:if(c=t.sent){t.next=14;break}throw new Error("Could not find cache entry for project id ".concat(s,"."));case 14:return t.next=16,(0,f.LG)(e,s);case 16:return t.abrupt("return",{content:JSON.parse(c)});case 17:if(r&&r(25,{id:"Calibrating sensors"}),!n.ownerId){t.next=24;break}return t.next=21,(0,f.Fz)(e,i,n.ownerId);case 21:u=t.sent,t.next=27;break;case 24:return t.next=26,(0,f.Xj)(e,i);case 26:u=t.sent;case 27:if(u){t.next=29;break}throw new Error("Cloud project couldn't be fetched.");case 29:return r&&r(50,{id:"Starting engine"}),t.next=32,(0,f.LG)(e,i);case 32:return r&&r(75,{id:"Checking tools"}),t.next=35,(0,f.Sx)(u,n.version);case 35:return d=t.sent,r&&r(100,{id:"Opening portal"}),t.prev=37,t.next=40,(0,h.H)(d);case 40:return p=t.sent,t.abrupt("return",{content:JSON.parse(p)});case 44:throw t.prev=44,t.t0=t.catch(37),new v;case 47:case"end":return t.stop()}}),t,null,[[37,44]])})));return function(e,n){return t.apply(this,arguments)}}()},C=function(e){return function(){var t=(0,a.Z)((0,o.Z)().mark((function t(n,r,i){var a;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.fileIdentifier,t.next=3,(0,f.LG)(e,a);case 3:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},j=function(e){return g.Z.isAvailable()?function(){var t=(0,a.Z)((0,o.Z)().mark((function t(n,r){var i,a,s,l,c;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.profile){t.next=3;break}return t.abrupt("return",null);case 3:return t.prev=3,a=n.fileIdentifier,s=m(),t.next=8,s.getCreationDate({userId:i.id,cloudProjectId:a});case 8:if(l=t.sent){t.next=11;break}return t.abrupt("return",null);case 11:if(r){t.next=13;break}return t.abrupt("return",l);case 13:if(c=n.lastModifiedDate){t.next=16;break}return t.abrupt("return",null);case 16:return t.abrupt("return",l>c+5e3?l:null);case 19:return t.prev=19,t.t0=t.catch(3),console.error("An error occurred while getting autosave creation date:",t.t0),t.abrupt("return",null);case 23:case"end":return t.stop()}}),t,null,[[3,19]])})));return function(e,n){return t.apply(this,arguments)}}():void 0},y=function(e){return g.Z.isAvailable()?function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)((0,i.Z)({},t),{},{fileIdentifier:x+t.fileIdentifier}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}():void 0},Z=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Z.burst();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},527:function(e,t,n){"use strict";n.d(t,{f:function(){return u}});var r=n(74165),i=n(15861),o=n(34517),a=n(81303),s=n(36465),l=n(57974),c=n(72702),u=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,u,d,p,f,h,g,x,m;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,i=t.fileMetadata,u=t.authenticatedUser,d=t.onProgress,p={erroredResources:[]},f=i.fileIdentifier,h=function(e){var t=e.getResourcesManager();return t.getAllResourceNames().toJSArray().map((function(e){var n=t.getResource(e),r=n.getFile();if((0,l.PX)(r)){if((0,s.bW)(r))return{resource:n,url:r,filename:(0,s.jV)(r)};if((0,l.Gu)(r)){var i=(0,l.OI)(n).extension;return{resource:n,url:r,filename:(0,c.B)(n.getName()+(i||""))}}return null}return p.erroredResources.push({resourceName:n.getName(),error:new Error("Unsupported relative file.")}),null})).filter(Boolean)},0!==(g=h(n)).length){e.next=7;break}return e.abrupt("return",p);case 7:return e.next=9,(0,a.R7)({urlContainers:g,onProgress:function(e,t){d(e,2*t)}});case 9:return x=e.sent,m=(0,a.At)(x,(function(e,t){p.erroredResources.push({resourceName:e,error:t})})),e.next=13,(0,o.LG)(u,f);case 13:return e.next=15,(0,o.ll)(u,f,m.map((function(e){return e.file})),(function(e,t){d(t+e,2*t)}));case 15:return e.sent.forEach((function(e,t){var n=e.url,r=e.error,i=m[t].resource;!r&&n?i.setFile(n):p.erroredResources.push({resourceName:i.getName(),error:r||new Error("Unknown error during upload.")})})),e.abrupt("return",p);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},10822:function(e,t,n){"use strict";n.d(t,{G:function(){return p},J:function(){return f}});var r=n(74165),i=n(15861),o=n(38428),a=n.n(o),s=n(34517),l=n(85919),c=n(81303),u=n(57974),d=n(36465),p=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,o,p,f,h,g,x,m,v,b,C,j;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.project,o=t.authenticatedUser,p=t.oldFileMetadata,f=t.newFileMetadata,t.oldStorageProvider,h=t.oldStorageProviderOperations,t.newStorageProvider,t.newStorageProviderOperations,g=t.onProgress,x={erroredResources:[]},m=f.fileIdentifier,v=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,c,p,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getResourcesManager(),c=n.getAllResourceNames().toJSArray(),p=[],e.next=5,(0,d._w)({authenticatedUser:o,allResourcePaths:c.map((function(e){return n.getResource(e).getFile()}))});case 5:return f=e.sent,e.next=8,a().withConcurrency(50).for(c).process(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i,o,a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.getResource(t),o=i.getFile(),!(0,u.PX)(o)){e.next=24;break}if(!(0,l.yk)(o)){e.next=9;break}if((0,s.u_)(o)!==m){e.next=6;break}return e.abrupt("return");case 6:p.push({resource:i,url:o,filename:(0,s.dh)(o)}),e.next=22;break;case 9:if(!(0,d.uG)(o)||!f){e.next=16;break}(a=new URL(o)).searchParams.set("token",f),c=a.href,p.push({resource:i,url:c,filename:(0,d.jV)(o)}),e.next=22;break;case 16:if(!(0,u.Gu)(o)){e.next=21;break}return x.erroredResources.push({resourceName:i.getName(),error:new Error("Unsupported blob URL.")}),e.abrupt("return");case 21:return e.abrupt("return");case 22:e.next=26;break;case 24:return x.erroredResources.push({resourceName:i.getName(),error:new Error("Unsupported relative file.")}),e.abrupt("return");case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:return e.abrupt("return",p);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=6,v(n);case 6:return b=e.sent,h.onEnsureCanAccessResources&&h.onEnsureCanAccessResources(n,p),e.next=10,(0,c.R7)({urlContainers:b,onProgress:function(e,t){g(e,2*t)}});case 10:return C=e.sent,j=(0,c.At)(C,(function(e,t){x.erroredResources.push({resourceName:e,error:t})})),e.next=14,(0,s.LG)(o,m);case 14:return e.next=16,(0,s.ll)(o,m,j.map((function(e){return e.file})),(function(e,t){g(t+e,2*t)}));case 16:return e.sent.forEach((function(e,t){var n=e.url,r=e.error,i=j[t].resource;!r&&n?i.setFile(n):x.erroredResources.push({resourceName:i.getName(),error:r||new Error("Unknown error during upload.")})})),e.abrupt("return",x);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.project,i={erroredResources:[]},o=n.getResourcesManager(),o.getAllResourceNames().toJSArray().forEach((function(e){var t=o.getResource(e),n=t.getFile();if((0,u.PX)(n))return(0,l.yk)(n)?void i.erroredResources.push({resourceName:t.getName(),error:new Error("Resources uploaded to GDevelop Cloud are not supported on Google Drive.")}):(0,u.Gu)(n)?void i.erroredResources.push({resourceName:t.getName(),error:new Error("Resources with Blob URLs are not supported.")}):void 0;i.erroredResources.push({resourceName:t.getName(),error:new Error("Relative files in resources are not supported.")})})),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},32438:function(e,t,n){"use strict";n.d(t,{Z:function(){return z}});var r=n(74165),i=n(15861),o=n(28381),a=n(1413),s=n(29439),l=n(34517),c=n(41006),u=n(36600),d=n(1773),p=n(67835),f=n(29277),h=n(29343),g=function(e){var t=o.useState(e.nameSuggestion),n=(0,s.Z)(t,2),r=n[0],i=n[1],a=o.useState(null),c=(0,s.Z)(a,2),g=c[0],x=c[1],m=function(t){x(null),r?e.onSave(r):x(t._({id:"Project name cannot be empty."}))};return(0,h.jsx)(u.I18n,{children:function(t){var n=t.i18n;return(0,h.jsx)(d.ZP,{title:(0,h.jsx)(u.Trans,{id:"Choose a name for your new project"}),onApply:function(){return m(n)},actions:[(0,h.jsx)(p.Z,{label:(0,h.jsx)(u.Trans,{id:"Cancel"}),primary:!1,onClick:e.onCancel},"cancel"),(0,h.jsx)(d.vF,{label:(0,h.jsx)(u.Trans,{id:"Save"}),primary:!0,onClick:function(){return m(n)}},"save")],open:!0,onRequestClose:e.onCancel,maxWidth:"sm",flexBody:!0,children:(0,h.jsx)(f.ZP,{autoFocus:"desktop",fullWidth:!0,maxLength:l.v9,errorText:g,translatableHintText:{id:"Project name"},type:"text",value:r,onChange:function(e,t){i(t)}})})}})},x=n(4964),m=n(1236),v=n(794),b=n(997),C=n(91),j=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,c.h_)(t),e.next=3,(0,x.G)(n,"game.json");case 3:return i=e.sent,e.abrupt("return",[i,n]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.H)(t);case 3:return i=e.sent,e.abrupt("return",i===n&&!!JSON.parse(i));case 7:return e.prev=7,e.t0=e.catch(0),console.error("An error occurred when checking zipped project.",e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o,a,c,u,d,p,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.authenticatedUser,i=t.project,o=t.cloudProjectId,a=t.options,e.next=3,j(i);case 3:return c=e.sent,u=(0,s.Z)(c,2),d=u[0],p=u[1],e.next=9,y(d,p);case 9:if(e.sent){e.next=12;break}throw new Error("Project compression failed before saving the project.");case 12:return e.next=14,(0,b.x)({times:2},(function(){return(0,l.Z7)({authenticatedUser:n,cloudProjectId:o,zippedProject:d,previousVersion:a?a.previousVersion:null,restoredFromVersionId:a?a.restoredFromVersionId:null})}));case 14:return f=e.sent,e.abrupt("return",f);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e){return function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,o){var s,c,u,d,p;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=i.fileIdentifier,c=n.getProjectUuid(),u=Date.now(),i.gameId){t.next=13;break}return console.info("Game id was never set, updating the cloud project."),t.prev=5,t.next=8,(0,l.np)(e,s,{gameId:c});case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(5),console.error("Could not update cloud project with gameId",t.t0);case 13:return t.next=15,Z({authenticatedUser:e,project:n,cloudProjectId:s,options:o});case 15:if(d=t.sent,p=(0,a.Z)((0,a.Z)({},i),{},{gameId:c,lastModifiedDate:u}),d){t.next=19;break}return t.abrupt("return",{wasSaved:!1,fileMetadata:p});case 19:return p.version=d,t.abrupt("return",{wasSaved:!0,fileMetadata:p});case 21:case"end":return t.stop()}}),t,null,[[5,10]])})));return function(e,n,r){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,o){var a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.authenticated){t.next=2;break}return t.abrupt("return",null);case 2:return t.prev=2,t.next=5,(0,l.np)(e,i.fileIdentifier,o);case 5:return t.next=7,Z({authenticatedUser:e,project:n,cloudProjectId:i.fileIdentifier});case 7:if(a=t.sent){t.next=10;break}throw new Error("Couldn't save project following property update.");case 10:return t.abrupt("return",{version:a,lastModifiedDate:Date.now()});case 13:return t.prev=13,t.t0=t.catch(2),console.warn("An error occurred while changing cloud project name. Ignoring.",t.t0),t.abrupt("return",null);case 17:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e,n,r){return t.apply(this,arguments)}}()},T=function(e){var t=(0,C.T)(e);return t&&"project-creation/too-many-projects"===t.code?{id:"You've reached the limit of cloud projects you can have. Delete some existing cloud projects of yours before trying again."}:{id:"An error occurred when saving the project, please verify your internet connection or try again later."}},S=function(e){var t=e.authenticatedUser,n=e.setDialog,o=e.closeDialog;return function(){var e=(0,i.Z)((0,r.Z)().mark((function e(i){var a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.project,i.fileMetadata,t.authenticated){e.next=3;break}return e.abrupt("return",{saveAsLocation:null});case 3:return e.next=5,new Promise((function(e){n((function(){return(0,h.jsx)(g,{onCancel:function(){o(),e(null)},nameSuggestion:a.getName(),onSave:function(t){o(),e(t)}})}))}));case 5:if(s=e.sent){e.next=8;break}return e.abrupt("return",{saveAsLocation:null});case 8:return e.abrupt("return",{saveAsLocation:{name:s}});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(e,t,n){return function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,o){var a,s,c,u,d,p;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i){t.next=2;break}throw new Error("A location was not chosen before saving as.");case 2:if(a=i.name,s=i.gameId,a){t.next=5;break}throw new Error("A name was not chosen before saving as.");case 5:if(e.authenticated){t.next=7;break}return t.abrupt("return",{wasSaved:!1,fileMetadata:null});case 7:return o.onStartSaving(),t.prev=8,t.next=11,(0,l.eM)(e,{name:a,gameId:s});case 11:if(c=t.sent){t.next=14;break}throw new Error("No cloud project was returned from creation api call.");case 14:return u=c.id,d={fileIdentifier:u,gameId:s},t.next=18,o.onMoveResources({newFileMetadata:d});case 18:return t.next=20,(0,l.LG)(e,u);case 20:return t.next=22,Z({authenticatedUser:e,project:n,cloudProjectId:u});case 22:if(p=t.sent){t.next=25;break}throw new Error("No version id was returned from committing api call.");case 25:return d.version=p,t.abrupt("return",{wasSaved:!0,fileMetadata:d});case 29:throw t.prev=29,t.t0=t.catch(8),console.error("An error occurred while creating a cloud project",t.t0),t.t0;case 33:case"end":return t.stop()}}),t,null,[[8,29]])})));return function(e,n,r){return t.apply(this,arguments)}}()},E=function(e){var t=e.projectName;e.saveAsLocation,e.newProjectsDefaultFolder;return{name:t}},I=function(e){return m.Z.isAvailable()?function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i){var o,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.profile){t.next=3;break}return t.abrupt("return");case 3:a=i.fileIdentifier,(0,v.Ke)().put({userId:o.id,cloudProjectId:a},n);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}():void 0},M=n(2066),L=n(78118),A=o.memo((function(e){return(0,h.jsx)(L.Z,(0,a.Z)((0,a.Z)({},e),{},{viewBox:"0 0 16 12",style:{fill:"none"},children:(0,h.jsx)("path",{d:"M0.75 8C0.75 9.7949 2.20507 11.25 4 11.25H12C13.7949 11.25 15.25 9.7949 15.25 8C15.25 6.2869 13.9246 4.8834 12.2433 4.759C12.1183 2.5239 10.2663 0.75 8 0.75C5.73368 0.75 3.88168 2.5239 3.75672 4.759C2.07542 4.8834 0.75 6.2869 0.75 8Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}))})),F=n(50057),O=n.n(F),R=n(19431),D=n(72410),_=O()("path"),B=O()("electron"),N=O()("@electron/remote"),U=N?N.app:null,H=n(20968),V=n(93431),z={internalName:"Cloud",name:{id:"GDevelop Cloud"},renderIcon:function(e){return(0,h.jsx)(A,{fontSize:e.size})},hiddenInOpenDialog:!0,needUserAuthentication:!0,getFileMetadataFromAppArguments:function(e){if(!e[M.rM])return null;if(!e[M.rM].length)return null;var t,n=e[M.rM][0];return(t=n).startsWith("http://")||t.startsWith("https://")||t.startsWith("ftp://")||t.startsWith("blob:")||t.startsWith("data:")?null:{fileIdentifier:n}},getProjectLocation:E,renderNewProjectSaveAsLocationChooser:function(e){var t=e.projectName,n=e.saveAsLocation,r=e.setSaveAsLocation,i=e.newProjectsDefaultFolder;return n&&n.name===t||r(E({projectName:t,saveAsLocation:n,newProjectsDefaultFolder:i})),null},createOperations:function(e){var t=e.setDialog,n=e.closeDialog,o=e.authenticatedUser;return{onOpen:(0,v.cX)(o),onEnsureCanAccessResources:(0,v.uB)(o),onSaveProject:k(o),onChooseSaveProjectAsLocation:S({authenticatedUser:o,setDialog:t,closeDialog:n}),onSaveProjectAs:P(o),onAutoSaveProject:I(o),getAutoSaveCreationDate:(0,v.Cf)(o),onGetAutoSave:(0,v.gr)(o),onChangeProjectProperty:w(o),getOpenErrorMessage:function(e){return{id:"An error occurred when opening the project. Check that your internet connection is working and that your browser allows the use of cookies."}},getWriteErrorMessage:T,canFileMetadataBeSafelySaved:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,s,c,u,d,p,f,h,g,x,m;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fileIdentifier,a=t.version,e.next=4,(0,l.Xj)(o,i);case 4:if(s=e.sent){e.next=9;break}return e.next=8,n.showAlert({title:{id:"Unable to save the project"},message:{id:"The project could not be saved. Please try again later."}});case 8:return e.abrupt("return",!1);case 9:if(c=s.currentVersion,u=s.committedAt,!(a&&c&&u&&c!==a)){e.next=25;break}if(d=null,p=new Date(u),f=(0,H.Z)(p,"dd-MM-yyyy"),h=(0,H.Z)(p,"HH:mm:ss"),!(g=s.lastCommittedBy)){e.next=21;break}return e.next=19,(0,V.D1)(g);case 19:(x=e.sent)&&(d=x.username);case 21:return e.next=23,n.showConfirmation({title:{id:"Project was modified"},message:d?{id:"This project was modified by {lastUsernameWhoModifiedProject} on the {formattedDate} at {formattedTime}. Do you want to overwrite their changes?",values:{lastUsernameWhoModifiedProject:d,formattedDate:f,formattedTime:h}}:{id:"This project was modified by someone else on the {formattedDate} at {formattedTime}. Do you want to overwrite their changes?",values:{formattedDate:f,formattedTime:h}},level:"warning",confirmButtonLabel:{id:"Overwrite"},makeDismissButtonPrimary:!0});case 23:return m=e.sent,e.abrupt("return",m);case 25:return e.abrupt("return",!0);case 26:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}},createResourceOperations:function(e){e.authenticatedUser;return function(e){var t=e.project,n=e.resource,o=e.i18n,a=(e.fileMetadata,e.informUser),s=U&&_?{id:'Save in the "Downloads" folder'}:{id:"Open resource in browser"},l=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(i){var o,s,l,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=i.askUserForDownloadDestination,s=D.Z.getResourceFullUrl(t,n.getName(),{}),!(U&&_&&B)){e.next=16;break}if(l=_.join(U.getPath("downloads"),n.getName()),!o){e.next=10;break}if(c=N.dialog.showSaveDialogSync(null,{defaultPath:l,properties:["createDirectory","showOverwriteConfirmation"]})){e.next=8;break}return e.abrupt("return");case 8:e.next=11;break;case 10:c=l;case 11:return e.next=13,(0,R.t)({urlContainers:[{url:s,filePath:c}],onProgress:function(){},throwIfAnyError:!1});case 13:a({actionLabel:(0,h.jsx)(u.Trans,{id:"Open folder"}),message:(0,h.jsx)(u.Trans,{id:"The resource has been downloaded"}),onActionClick:function(){return B.shell.showItemInFolder(_.resolve(c))}}),e.next=17;break;case 16:M.ZP.openExternalURL(s);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=[{label:o._(s),click:function(){return l({askUserForDownloadDestination:!1})}}];return U&&_&&c.push({label:o._({id:"Save as..."}),click:function(){return l({askUserForDownloadDestination:!0})}}),c}}}},56924:function(e,t,n){"use strict";n.d(t,{H:function(){return s}});var r=n(29439),i=n(28381),o=n(71106),a=n(29343),s={internalName:"Empty",name:"No storage",createOperations:function(){return{}}};t.Z=function(e){var t=i.useRef(null),n=i.useRef(null),l=i.useState(null),c=(0,r.Z)(l,2),u=c[0],d=c[1],p=function(e,t,n){var r=t.map((function(e){return{currentStorageProvider:e,initialFileMetadataToOpen:e.getFileMetadataFromAppArguments?e.getFileMetadataFromAppArguments(n):null}})).filter((function(e){return!!e.initialFileMetadataToOpen}));return 0===r.length?{currentStorageProvider:e,initialFileMetadataToOpen:null}:(r.length>1&&console.warn("More than one storage provider can understand the app arguments. Selecting the first one."),r[0])}(e.defaultStorageProvider,e.storageProviders,e.appArguments),f=i.useRef(p.currentStorageProvider),h=i.useContext(o.ZP),g=i.useCallback((function(e){d((function(){return e}))}),[d]),x=i.useCallback((function(){d(null)}),[]),m=i.useCallback((function(e){if(!e)return t.current||(f.current=s,n.current=null,t.current=s.createOperations({setDialog:g,closeDialog:x,authenticatedUser:h})),t.current;if(e===f.current&&t.current)return t.current;var r=e.createOperations({setDialog:g,closeDialog:x,authenticatedUser:h});return!!r.onOpen&&(f.current=e,t.current=r,n.current=e.createResourceOperations?e.createResourceOperations({authenticatedUser:h}):null),r}),[h,g,x]),v=i.useCallback((function(){return f.current||s}),[]),b=i.useCallback((function(){return n.current}),[]);return i.useEffect((function(){var e=f.current;e&&(t.current=e.createOperations({setDialog:g,closeDialog:x,authenticatedUser:h}),n.current=e.createResourceOperations?e.createResourceOperations({authenticatedUser:h}):null)}),[h,g,x]),(0,a.jsxs)(i.Fragment,{children:[e.children({storageProviders:e.storageProviders,getStorageProviderOperations:m,initialFileMetadataToOpen:p.initialFileMetadataToOpen,getStorageProvider:v,getStorageProviderResourceOperations:b}),u&&u()]})}},58271:function(e,t,n){"use strict";n.d(t,{j:function(){return u}});var r=n(74165),i=n(15861),o=n(38428),a=n.n(o),s=n(14446),l=n.n(s),c=n(57974),u=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,o,s,u,d,p,f,h,g,x;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,o=t.fileMetadata,s=t.onProgress,u=n.getResourcesManager(),d=u.getAllResourceNames().toJSArray(),p=[],f=o.fileIdentifier,h=f.substr(0,f.lastIndexOf("/")+1),(0,c.MX)(h)){e.next=8;break}return e.abrupt("return",{erroredResources:[]});case 8:return g=0,x=d.filter((function(e){var t=u.getResource(e);return!(0,c.PX)(t.getFile())})),e.next=12,a().withConcurrency(20).for(x).process(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.getResource(t),e.prev=1,i=new URL(n.getFile(),h).href,e.next=5,l().get(i,{timeout:3e3});case 5:n.setFile(i),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),p.push({resourceName:t,error:e.t0});case 11:s(g++,x.length);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}());case 12:return e.abrupt("return",{erroredResources:p});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},8018:function(e,t,n){"use strict";var r=n(74165),i=n(15861),o=n(14446),a=n.n(o),s=n(2066),l=function(e){return e.startsWith("example://")};t.Z={internalName:"UrlStorageProvider",name:{id:"URL"},hiddenInOpenDialog:!0,hiddenInSaveDialog:!0,getFileMetadataFromAppArguments:function(e){if(!e[s.rM])return null;if(!e[s.rM].length)return null;var t,n=e[s.rM][0];return(t=n).startsWith("http://")||t.startsWith("https://")||t.startsWith("ftp://")||t.startsWith("blob:")||t.startsWith("data:")||l(n)?{fileIdentifier:n}:null},createOperations:function(e){e.setDialog,e.closeDialog;return{onOpen:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fileIdentifier,l(n)&&(i=n.replace("example://",""),n="https://resources.gdevelop-app.com/examples/".concat(i,"/").concat(i,".json")),e.next=4,a().get(n);case 4:if((o=e.sent).data){e.next=7;break}throw new Error("Can't parse data from the URL (is it valid JSON?)");case 7:return e.abrupt("return",{content:o.data});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}}},13923:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(36600),i=(n(28381),n(40243)),o=n(86278),a=n(29343);function s(e){var t=e.label,n=e.description,s=e.elementsWithWords;return(0,a.jsxs)(i.sg,{noMargin:!0,children:[(0,a.jsx)(o.Z,{size:"sub-title",children:t}),n&&(0,a.jsx)(o.Z,{size:"body",children:n}),s&&(0,a.jsx)(o.Z,{size:"body",children:(0,a.jsx)("i",{children:(0,a.jsx)(r.Trans,{id:"in {elementsWithWords}",values:{elementsWithWords:s}})})})]})}},94258:function(e,t,n){"use strict";n.d(t,{j:function(){return f}});var r=n(93433),i=n(37762),o=(n(28381),n(18455)),a=n(13923),s=n(29343),l=function(e,t,n,r,i){var o=t.getDescription(),l=function(t){var r=n(t).get(e).getLabel();return r||e.charAt(0).toUpperCase()+e.slice(1).split(/(?=[A-Z])/).join(" ")},c=function(){return o},u=t.getType().toLowerCase();if("number"===u)return{name:e,valueType:u,getValue:function(t){return parseFloat(n(t).get(e).getValue())||0},setValue:function(t,n){r(t,e,""+n)},getLabel:l,getDescription:c,getEndAdornment:function(t){var r=n(t).get(e).getMeasurementUnit();return{label:f(r),tooltipContent:(0,s.jsx)(a.Z,{label:r.getLabel(),description:r.getDescription(),elementsWithWords:r.getElementsWithWords()})}}};if("string"===u||""===u)return{name:e,valueType:"string",getValue:function(t){return n(t).get(e).getValue()},setValue:function(t,n){r(t,e,n)},getLabel:l,getDescription:c};if("boolean"===u)return{name:e,valueType:u,getValue:function(t){return"true"===n(t).get(e).getValue()},setValue:function(t,n){r(t,e,n?"1":"0")},getLabel:l,getDescription:c};if("choice"===u){var d=t.getExtraInfo().toJSArray().map((function(e){return{value:e,label:e}}));return{name:e,valueType:"string",getChoices:function(){return d},getValue:function(t){return n(t).get(e).getValue()},setValue:function(t,n){r(t,e,n)},getLabel:l,getDescription:c}}if("behavior"===u){var p=t.getExtraInfo().size()>0?t.getExtraInfo().at(0):"";return{name:e,valueType:"string",getChoices:function(){return i&&""!==p?i.getAllBehaviorNames().toJSArray().map((function(e){return i.getBehavior(e).getTypeName()===p?e:null})).filter(Boolean).map((function(e){return{value:e,label:e}})):[]},getValue:function(t){return n(t).get(e).getValue()},setValue:function(t,n){r(t,e,n)},getLabel:l,getDescription:c}}if("resource"===u){var h=t.getExtraInfo().toJSArray(),g=h[0]||"",x=h[1]||"";return{name:e,valueType:"resource",resourceKind:g,fallbackResourceKind:x,getValue:function(t){return n(t).get(e).getValue()},setValue:function(t,n){r(t,e,n)},getLabel:l,getDescription:c}}return"color"===u?{name:e,valueType:"color",getValue:function(t){return n(t).get(e).getValue()},setValue:function(t,n){r(t,e,n)},getLabel:l,getDescription:c}:"textarea"===u?{name:e,valueType:"textarea",getValue:function(t){return n(t).get(e).getValue()},setValue:function(t,n){r(t,e,n)},getLabel:l,getDescription:c}:(console.error("A property with type=".concat(u," could not be mapped to a field. Ensure that this type is correct and understood by the IDE.")),null)},c=[["X","Y","Z"],["Width","Height","Depth"],["Top","Bottom"],["Left","Right"],["Front","Back"],["Up","Down"],["Min","Max"],["Low","High"],["Color","Opacity"],["Horizontal","Vertical"],["Acceleration","Deceleration"],["Duration","Easing"],["EffectName","EffectProperty"],["Gravity","MaxFallingSpeed"],["JumpSpeed","JumpSustainTime"],["XGrabTolerance","YGrabOffset"],["MaxSpeed","SlopeMaxAngle"]],u=function(e){return e?e[0].toLowerCase()+e.substr(1):e},d=function(e,t,n){if(!e.has(t))return!1;var r=e.get(t);return!r.isHidden()&&("All"===n||("Deprecated"===n?r.isDeprecated():"Advanced"===n?r.isAdvanced():"Basic"!==n||!r.isAdvanced()&&!r.isDeprecated()))},p=["\u2070","\xb9","\xb2","\xb3","\u2074","\u2075"],f=function(e){return(0,o.mapFor)(0,e.getElementsCount(),(function(t){var n=e.getElementBaseUnit(t),r=e.getElementPower(t),i=Math.abs(r),o=r<0||i>1&&i<6;return n.getSymbol()+(r<0?"\u207b":"")+(o?p[i]:"")})).join(" \xb7 ")};t.Z=function(e,t,n,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"All",p=e.keys(),f=new Map,h=new Set;if((0,o.mapFor)(0,p.size(),(function(r){var o=p.at(r),g=e.get(o);if(!d(e,o,s))return null;if(h.has(o))return null;var x=g.getGroup()||"",m=f.get(x);m||(m=[],f.set(x,m));for(var v=null,b=function(){for(var r=j[C],c=[],p=function(){var t=r[f];if(o.includes(t)){var n,a=r.map((function(e){return o.replace(t,e)})),l=(0,i.Z)(a);try{for(l.s();!(n=l.n()).done;){var p=n.value;d(e,p,s)&&c.push(p)}}catch(b){l.e(b)}finally{l.f()}}var h=u(t);if(o.startsWith(h)){var g,x=r.map((function(e){return o.replace(h,u(e))})),m=(0,i.Z)(x);try{for(m.s();!(g=m.n()).done;){var v=g.value;d(e,v,s)&&c.push(v)}}catch(b){m.e(b)}finally{m.f()}}},f=0;f<r.length;f++)p();if(c.length>1){var g=c.map((function(t){return e.get(t)}));if(g.every((function(e){return e.getGroup()===g[0].getGroup()}))){for(var x=[],m=0;m<g.length&&m<c.length;m++){var b=g[m],y=c[m],Z=l(y,b,t,n,a);Z&&x.push(Z)}x.length===g.length&&(v={name:c.join("-"),type:"row",children:x},c.forEach((function(e){h.add(e)})))}}},C=0,j=c;C<j.length;C++)b();v||(v=l(o,g,t,n,a)),v&&m.push(v)})),0===f.size)return[];var g=f.get("");return 1===f.size&&g?g:(0,r.Z)(f.keys()).sort((function(e,t){return e.localeCompare(t)})).map((function(e){return{name:e,type:"column",title:e,children:f.get(e)||[]}}))}},72611:function(e,t,n){"use strict";var r=n(36600),i=n(28381),o=n(42986),a=n(73693),s=n(3115),l=n(36607),c=n(81683),u=n(90242),d=n(90286),p=n(32832),f=n(11858),h=n(66733),g=n(51626),x=n(61325),m=n(32484),v=n(19174),b=n(40243),C=n(86278),j=n(38501),y=n(57244),Z=n(3781),k=n(37571),w=n(29343),T={columnContainer:{display:"flex",flexDirection:"column"},fieldContainer:{flex:1,display:"flex",flexDirection:"row",alignItems:"baseline"},field:{flex:1,width:"auto"},subHeader:{paddingLeft:0}},S=function(e){var t=e.instances,n=e.field;return"boolean"===typeof n.disabled?n.disabled:"function"===typeof n.disabled&&n.disabled(t)},P=function(e){var t=e.instances,n=e.field,r=e.defaultValue;if(!t[0])return console.log("getFieldValue was called with an empty list of instances (or containing undefined). This is a bug that should be fixed"),r;var i=n.getValue;if(!i)return null;for(var o=i(t[0]),a=1;a<t.length;++a)if(o!==i(t[a])){"undefined"!==typeof r&&(o=r);break}return o},E=function(e){var t=e.instances,n=e.field;return t[0]?n.getLabel?n.getLabel(t[0]):n.name:(console.log("PropertiesEditor._getFieldLabel was called with an empty list of instances (or containing undefined). This is a bug that should be fixed"),n.name)};t.Z=function e(t){var n=t.onInstancesModified,I=t.instances,M=t.schema,L=t.mode,A=t.renderExtraDescriptionText,F=t.unsavedChanges,O=t.project,R=t.resourceManagementProps,D=(0,j.Z)(),_=i.useCallback((function(e){F&&F.triggerUnsavedChanges(),n&&n(e),D()}),[F,n,D]),B=i.useCallback((function(e){if(I[0]){var t=[];return e.getDescription&&t.push(e.getDescription(I[0])),A&&e.getExtraDescription&&t.push(A(e.getExtraDescription(I[0]))),t.join("\n")||void 0}console.log("PropertiesEditor._getFieldDescription was called with an empty list of instances (or containing undefined). This is a bug that should be fixed")}),[I,A]),N=i.useCallback((function(e){if("PLEASE_ALSO_SHOW_EDIT_BUTTON_THANKS"===e.name)return null;if("boolean"===e.valueType){var t=e.setValue,n=B(e);return(0,w.jsx)(a.Z,{label:n?(0,w.jsxs)(i.Fragment,{children:[(0,w.jsx)(b.x1,{noMargin:!0,children:E({instances:I,field:e})}),(0,w.jsx)(h.Z,{style:{display:"inline"},children:(0,w.jsx)(p.r,{source:n})})]}):E({instances:I,field:e}),id:e.name,checked:P({instances:I,field:e}),onCheck:function(e,n){I.forEach((function(e){return t(e,!!n)})),_(I)},disabled:S({instances:I,field:e})},e.name)}if("number"===e.valueType){var s=e.setValue,l=e.getEndAdornment,c=l&&l(I[0]);return(0,w.jsx)(o.Z,{value:P({instances:I,field:e}),id:e.name,floatingLabelText:E({instances:I,field:e}),floatingLabelFixed:!0,helperMarkdownText:B(e),onChange:function(e){var t=parseFloat(e);isNaN(t)||(I.forEach((function(e){return s(e,t)})),_(I))},type:"number",style:T.field,disabled:S({instances:I,field:e}),endAdornment:c&&(0,w.jsx)(Z.ZP,{title:c.tooltipContent,children:(0,w.jsx)(g.Z,{position:"end",children:c.label})})},e.name)}if("color"===e.valueType){var u=e.setValue;return(0,w.jsx)(b.sg,{expand:!0,noMargin:!0,children:(0,w.jsx)(d.Z,{id:e.name,floatingLabelText:E({instances:I,field:e}),helperMarkdownText:B(e),disableAlpha:!0,fullWidth:!0,color:P({instances:I,field:e}),onChange:function(e){var t=0===e.length?"":(0,f.JO)(e);I.forEach((function(e){return u(e,t)})),_(I)}})},e.name)}if("textarea"===e.valueType){var v=e.setValue;return(0,w.jsx)(o.Z,{id:e.name,onChange:function(e){I.forEach((function(t){return v(t,e||"")})),_(I)},value:P({instances:I,field:e}),floatingLabelText:E({instances:I,field:e}),floatingLabelFixed:!0,helperMarkdownText:B(e),multiline:!0,style:T.field},e.name)}var C=e.onEditButtonBuildMenuTemplate,j=e.onEditButtonClick,M=e.setValue;return(0,w.jsx)(x.ad,{renderTextField:function(){return(0,w.jsx)(o.Z,{value:P({instances:I,field:e,defaultValue:"(Multiple values)"}),id:e.name,floatingLabelText:E({instances:I,field:e}),floatingLabelFixed:!0,helperMarkdownText:B(e),onChange:function(e){I.forEach((function(t){return M(t,e||"")})),_(I)},style:T.field,disabled:S({instances:I,field:e})})},renderButton:function(e){return j&&!C?(0,w.jsx)(m.Z,{style:e,primary:!0,disabled:1!==I.length,icon:(0,w.jsx)(k.Z,{}),label:(0,w.jsx)(r.Trans,{id:"Edit"}),onClick:j}):C?(0,w.jsx)(y.Z,{style:e,primary:!0,disabled:1!==I.length,icon:(0,w.jsx)(k.Z,{}),label:(0,w.jsx)(r.Trans,{id:"Edit"}),onClick:j,buildMenuTemplate:C}):null}},e.name)}),[I,B,_]),U=i.useCallback((function(e){if(e.getChoices&&e.getValue){var t=e.getChoices().map((function(e){var t=e.value,n=e.label,r=e.labelIsUserDefined;return(0,w.jsx)(u.Z,{value:t,label:n,shouldNotTranslate:r},t)}));if("number"===e.valueType){var n=e.setValue;return(0,w.jsx)(c.Z,{value:P({instances:I,field:e}),id:e.name,floatingLabelText:E({instances:I,field:e}),helperMarkdownText:B(e),onChange:function(e,t,r){I.forEach((function(e){return n(e,parseFloat(r)||0)})),_(I)},style:T.field,disabled:e.disabled,children:t},e.name)}if("string"===e.valueType){var r=e.setValue;return(0,w.jsx)(c.Z,{value:P({instances:I,field:e,defaultValue:"(Multiple values)"}),id:e.name,floatingLabelText:E({instances:I,field:e}),helperMarkdownText:B(e),onChange:function(e,t,n){I.forEach((function(e){return r(e,n||"")})),_(I)},style:T.field,disabled:S({instances:I,field:e}),children:t},e.name)}}}),[I,_,B]),H=i.useCallback((function(e){var t=!1;if("onValuesDifferent"===e.disabled){var n="DIFFERENT_VALUES";t=P({instances:I,field:e,defaultValue:n})===n}return(0,w.jsx)(m.Z,{fullWidth:!0,primary:!0,icon:(0,w.jsx)(k.Z,{}),disabled:t,label:e.label,onClick:function(){e.onClick(I[0])}},"button-".concat(e.label))}),[I]),V="row"===L?function(e){return(0,w.jsx)(x.ep,{noMargin:!0,children:e})}:function(e){return(0,w.jsx)(x.ak,{noMargin:!0,children:e})},z=i.useCallback((function(e){var t=null;if(e.getValue){var n=P({instances:I,field:e,defaultValue:e.defaultValue||"Multiple Values"});n&&(t=n)}return t?(0,w.jsxs)(b.x1,{alignItems:"baseline",children:[(0,w.jsx)(C.Z,{displayInlineAsSpan:!0,children:e.name}),(0,w.jsx)(b.LZ,{}),(0,w.jsx)(C.Z,{allowSelection:!0,displayInlineAsSpan:!0,size:"body2",children:"- ".concat(t)})]},"section-title-".concat(e.name)):(0,w.jsx)(b.x1,{children:(0,w.jsx)(C.Z,{displayInlineAsSpan:!0,children:e.name})},"section-title-".concat(e.name))}),[I]);return V(M.map((function(t){if(t.nonFieldType)return"sectionTitle"===t.nonFieldType?z(t):"button"===t.nonFieldType?H(t):null;if(t.children){if("row"===t.type){var r=(0,w.jsx)(v.Z.Consumer,{children:function(r){return(0,w.jsx)(e,{project:O,resourceManagementProps:R,schema:t.children,instances:I,mode:"row",unsavedChanges:r,onInstancesModified:n})}},t.name);return t.title?[(0,w.jsx)(C.Z,{size:"block-title",children:t.title},t.name+"-title"),r]:r}return(0,w.jsxs)("div",{children:[(0,w.jsx)(l.Z,{children:t.name}),(0,w.jsx)(v.Z.Consumer,{children:function(r){return(0,w.jsx)(e,{project:O,resourceManagementProps:R,schema:t.children,instances:I,mode:"column",unsavedChanges:r,onInstancesModified:n})}},t.name)]},t.name)}return"resource"===t.valueType?function(e){if(!O||!R)return console.error("You tried to display a resource field in a PropertiesEditor that does not support display resources. If you need to display resources, pass additional props (project, resourceManagementProps)."),null;var t=e.setValue;return(0,w.jsx)(s.Z,{project:O,resourceManagementProps:R,resourceKind:e.resourceKind,fallbackResourceKind:e.fallbackResourceKind,resourceName:P({instances:I,field:e,defaultValue:"(Multiple values)"}),onChange:function(e){I.forEach((function(n){return t(n,e)})),_(I)},floatingLabelText:E({instances:I,field:e}),helperMarkdownText:B(e)},e.name)}(t):t.getChoices&&t.getValue?U(t):t.getValue?N(t):null})))}},58893:function(e,t,n){"use strict";var r=n(28381),i=n(24910),o=n(29343);t.Z=function(){var e={position:"absolute",top:0,left:0,width:"100%",height:"100%",background:'url("res/transparentback.png") repeat',filter:r.useContext(i.Z).imagePreview.backgroundFilter||"none"};return(0,o.jsx)("div",{style:e})}},15684:function(e,t,n){"use strict";n.d(t,{V:function(){return T}});var r=n(74165),i=n(15861),o=n(29439),a=n(93433),s=n(36600),l=n(28381),c=n(70983),u=n.n(c),d=n(17037),p=n(71106),f=n(82936),h=n(61325),g=n(34517),x=n(40243),m=n(64480),v=n(20914),b=n(24910),C=n(32484),j=n(29343),y={audio:["audio/aac","audio/x-wav","audio/mpeg","audio/mp3","audio/ogg"],image:["image/jpeg","image/png","image/webp"],font:["font/ttf","font/otf"],video:["video/mp4","video/webm"],json:["application/json"],tilemap:["application/json"],tileset:["application/json"],bitmapFont:[],model3D:["file"],atlas:[],spine:["application/json"]},Z=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=d.Q.find((function(t){return t.kind===e}))||null;return n?t?n.fileExtensions.map((function(e){return"."+e})):n.fileExtensions:[]},k=function(e){return y[e]||[]},w=function(e){var t=Z(e),n=k(e);return[].concat((0,a.Z)(n),(0,a.Z)(t)).join(",")},T=function(e){var t=e.options,n=e.fileMetadata,a=e.getStorageProvider,c=e.onChooseResources,d=e.createNewResource,y=e.automaticallyOpenInput,T=l.useRef(null),S=l.useRef(!1),P=l.useContext(b.Z),E=l.useContext(p.ZP),I=l.useState(null),M=(0,o.Z)(I,2),L=M[0],A=M[1],F=l.useState(!1),O=(0,o.Z)(F,2),R=O[0],D=O[1],_=l.useState([]),B=(0,o.Z)(_,2),N=B[0],U=B[1],H=l.useState([]),V=(0,o.Z)(H,2),z=V[0],W=V[1],G=N.length>0,Y=l.useMemo(a,[a]),q=n?n.fileIdentifier:null,X=l.useState(0),K=(0,o.Z)(X,2),J=K[0],Q=K[1],$=l.useCallback((0,i.Z)((0,r.Z)().mark((function e(){var t,n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T.current){e.next=3;break}return e.abrupt("return");case 3:if(q){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,D(!0),A(null),Q(0),e.next=11,(0,g.ll)(E,q,N,(function(e,t){Q(e/t*100)}));case 11:if(t=e.sent,n=t.filter((function(e){return!!e.error})),i=t.filter((function(e){return!!e.url})),!n.length){e.next=18;break}throw n[0];case 18:i.length&&c(i.map((function(e){var t=e.url,n=e.resourceFile,r=d();return r.setFile(t||""),r.setName(n.name),r.setOrigin("cloud-project-resource",t||""),r})));case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(5),A(e.t0);case 24:return e.prev=24,D(!1),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[5,21,24,27]])}))),[N,E,c,d,q]),ee=N.map((function(e){return e.size>g.j4?{filename:e.name,error:"too-large"}:null})).filter(Boolean),te="Cloud"===Y.internalName&&!!n,ne=!!E.authenticated,re=!R&&ne&&te;l.useLayoutEffect((function(){y&&!S.current&&(S.current=!0,T.current&&T.current.click())}),[y]);var ie=!R&&re&&G&&0===ee.length;l.useEffect((function(){ie&&!L&&$()}),[ie,$,L]);var oe=l.useMemo((function(){var e=k(t.resourceKind);return 1===e.length&&"file"===e[0]}),[t.resourceKind]),ae=l.useCallback((function(e){return Z(t.resourceKind,!1).includes(u().extname(e.name).replace(/^\./,""))}),[t.resourceKind]);return(0,j.jsxs)(h.ak,{noMargin:!0,children:[ne?te?null:(0,j.jsx)(f.Z,{kind:"warning",children:(0,j.jsx)(s.Trans,{id:"Your need to first save your game on GDevelop Cloud to upload your own resources."})}):(0,j.jsx)(f.Z,{kind:"warning",children:(0,j.jsx)(s.Trans,{id:"Your need to first create your account, or login, to upload your own resources."})}),(0,j.jsx)(v.Z,{variant:"outlined",background:"medium",children:(0,j.jsx)(x.x1,{expand:!0,children:(0,j.jsxs)(x.sg,{expand:!0,children:[(0,j.jsx)("input",{accept:w(t.resourceKind),style:{color:P.text.color.primary},multiple:t.multiSelection,type:"file",ref:T,disabled:!re,onChange:function(e){for(var t=[],n=[],r=0;r<e.currentTarget.files.length;r++){var i=e.currentTarget.files[r];!oe||ae(i)?t.push(i):n.push(i)}W(n),U(t),A(null)}}),z.length>0&&(0,j.jsx)(f.Z,{kind:"warning",children:(0,j.jsx)(s.Trans,{id:"The following file(s) cannot be used for this kind of object: {0}",values:{0:z.map((function(e){return e.name})).join(", ")}})})]})})}),ee.map((function(e){return"too-large"===e.error?(0,j.jsx)(f.Z,{kind:"error",children:(0,j.jsx)(s.Trans,{id:"The file {0} is too large. Use files that are smaller for your game: each must be less than {1} MB.",values:{0:e.filename,1:g.j4/1e3/1e3}})}):(0,j.jsx)(f.Z,{kind:"error",children:(0,j.jsx)(s.Trans,{id:"The file {0} is invalid.",values:{0:e.filename}})})})),L&&(0,j.jsx)(f.Z,{kind:"error",children:(0,j.jsx)(s.Trans,{id:"There was an error while uploading some resources. Verify your internet connection or try again later."})}),(0,j.jsx)(h.pJ,{alignItems:"center",justifyContent:"stretch",expand:!0,children:R?(0,j.jsx)(m.Z,{value:J,variant:"determinate"}):null}),L&&(0,j.jsx)(x.x1,{noMargin:!0,expand:!0,justifyContent:"flex-end",children:(0,j.jsx)(C.Z,{primary:!0,label:(0,j.jsx)(s.Trans,{id:"Retry"}),onClick:$})})]})}},32705:function(e,t,n){"use strict";n.d(t,{$N:function(){return d},TD:function(){return p},Z2:function(){return f},Zv:function(){return u}});var r=n(4942),i=n(74165),o=n(15861),a=n(17037),s=n(79431),l=n(57974),c=n(81303),u=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,o,u,d,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.project,r=t.baseNameForNewResources,o=t.resources,u=t.resourceKind,d=n.getResourcesManager(),p=o.map((function(e){var t=e.name,i=e.dataUrl,o=e.localFilePath,p=e.extension,f=e.originalIndex,h=(0,c.Um)(i),g=h?URL.createObjectURL(h):"";if(t&&d.hasResource(t)){console.info("Updating resource "+t+".");var x=d.getResource(t);return x.setFile(g),(0,l.kX)(x,{localFilePath:o,extension:p}),{resource:x,originalIndex:f,blobUrl:g}}var m=(0,s.Z)(r,(function(e){return d.hasResource(e)}));console.info("Creating new resource "+m+"...");var v=(0,a.h)(u);return v?(v.setName(m),v.setFile(g),v.setMetadata(JSON.stringify({localFilePath:o,extension:p})),(0,l.r3)(n,v),d.addResource(v),v.delete(),{resource:d.getResource(m),originalIndex:f,blobUrl:g}):(console.error("Could not create a resource for kind: "+u),null)})).filter(Boolean),e.abrupt("return",p);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(e){var t=e.modifiedResources,n=e.metadataKey,i=e.metadata;t.forEach((function(e){var t=e.resource,o=e.blobUrl;URL.revokeObjectURL(o),i&&(0,l.kX)(t,(0,r.Z)({},n,i))}))},p=function(e,t){t&&"object"===typeof t&&Array.isArray(t.resourceNames)&&(t.resourceNames=e)},f=function(e,t){if(!t)return null;try{var n=JSON.parse(t);if(n&&"object"===typeof n&&n[e])return n[e]}catch(r){console.warn("Malformed metadata for a resource - ignoring it.",r)}return null}},3290:function(e,t,n){"use strict";n.d(t,{Z:function(){return L},X:function(){return M}});var r=n(1413),i=n(74165),o=n(15861),a=n(29439),s=n(36600),l=n(51598),c=n(50301),u=n(28381),d=n(94854),p=n(87199),f=n(78118),h=n(29343),g=u.memo((function(e){return(0,h.jsxs)(f.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.33332 3.66663C5.30828 3.66663 3.66666 5.30825 3.66666 7.33329C3.66666 9.35834 5.30828 11 7.33332 11C9.35837 11 11 9.35834 11 7.33329C11 5.30825 9.35837 3.66663 7.33332 3.66663ZM2.66666 7.33329C2.66666 4.75596 4.75599 2.66663 7.33332 2.66663C9.91065 2.66663 12 4.75596 12 7.33329C12 9.91062 9.91065 12 7.33332 12C4.75599 12 2.66666 9.91062 2.66666 7.33329Z",fill:"currentColor"}),(0,h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.97977 9.97974C10.175 9.78448 10.4916 9.78448 10.6869 9.97974L13.1869 12.4797C13.3821 12.675 13.3821 12.9916 13.1869 13.1868C12.9916 13.3821 12.675 13.3821 12.4798 13.1868L9.97977 10.6868C9.78451 10.4916 9.78451 10.175 9.97977 9.97974Z",fill:"currentColor"}),(0,h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33332 7.33329C5.33332 7.05715 5.55718 6.83329 5.83332 6.83329H8.83332C9.10947 6.83329 9.33332 7.05715 9.33332 7.33329C9.33332 7.60944 9.10947 7.83329 8.83332 7.83329H5.83332C5.55718 7.83329 5.33332 7.60944 5.33332 7.33329Z",fill:"currentColor"})]}))})),x=n(75268),m=n(41332),v=n(86278),b=n(23818),C=n(24910),j=n(58893),y=n(39909),Z=n(65111),k=n(91153),w=n(76683),T=n(5675),S=n(86268),P=n.g.gd,E=function(e,t){return[(e.x+t.x)/2,(e.y+t.y)/2]},I={previewImagePixelated:{imageRendering:(0,y.g)()},contentContainer:{position:"relative",height:"100%",overflow:"hidden"},container:{display:"flex",flexDirection:"column",alignItems:"stretch",flex:1,minHeight:0,width:"100%"},imagePreviewContainer:{position:"relative",width:"100%",height:"100%",boxSizing:"border-box",outline:"none",touchAction:"none"},spriteThumbnailImage:{},sliderContainer:{maxWidth:150,width:"100%",display:"flex",padding:"0 10px"}},M=function(e,t){var n=e.getResourcesManager().getResource(t);return"image"===n.getKind()&&P.asImageResource(n).isSmooth()},L=function(e){var t=e.resourceName,n=e.imageResourceSource,f=e.isImageResourceSmooth,y=e.fixedHeight,P=e.fixedWidth,M=e.renderOverlay,L=e.onImageSize,A=e.hideCheckeredBackground,F=e.deactivateControls,O=e.displaySpacedView,R=e.isImagePrivate,D=e.onImageLoaded,_=e.hideLoader,B=u.useState(!1),N=(0,a.Z)(B,2),U=N[0],H=N[1],V=u.useState(null),z=(0,a.Z)(V,2),W=z[0],G=z[1],Y=u.useState(null),q=(0,a.Z)(Y,2),X=q[0],K=q[1],J=u.useState(null),Q=(0,a.Z)(J,2),$=Q[0],ee=Q[1],te=u.useState(null),ne=(0,a.Z)(te,2),re=ne[0],ie=ne[1],oe=u.useState({factor:1,xOffset:0,yOffset:0}),ae=(0,a.Z)(oe,2),se=ae[0],le=ae[1],ce=se.xOffset,ue=se.yOffset,de=se.factor,pe=u.useRef(null),fe=u.useRef(null),he=u.useRef(null),ge=u.useRef(!1),xe=u.useRef(null),me=function(){H(!0)},ve=u.useState(!1),be=(0,a.Z)(ve,2),Ce=be[0],je=be[1],ye=u.useRef(new S.ZP({isActive:function(){return!F},shortcutCallbacks:{onToggleGrabbingTool:je}})),Ze=u.useCallback((function(){if(!W||!X||!re||!$)return 1;var e=Math.min($/W,re/X)*(O?.7:.95);return e>1&&(e=Math.floor(e)),e}),[W,X,re,$,O]),ke=u.useCallback((function(){if(!W||!X||!re||!$)return!1;var e=Ze();return le({factor:e,xOffset:($-W*e)/2,yOffset:(re-X*e)/2}),!0}),[W,X,re,$,Ze]),we=u.useCallback((function(e){var t=Ze();return Math.max(Math.min(e,4*t),.25*t)}),[Ze]),Te=u.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=we(de*t),se.factor!==r&&le((function(e){return{xOffset:e.xOffset+(n[0]-e.xOffset)*(1-r/e.factor),yOffset:e.yOffset+(n[1]-e.yOffset)*(1-r/e.factor),factor:r}}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[we,de,se.factor]),Se=u.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:le((function(e){return{xOffset:e.xOffset+(n[0]-e.xOffset)*(1-t/e.factor),yOffset:e.yOffset+(n[1]-e.yOffset)*(1-t/e.factor),factor:t}}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]),Pe=u.useCallback((function(e){var t=e.deltaY,n=e.deltaX,i=e.clientX,o=e.clientY;if(e.preventDefault(),e.stopPropagation(),(0,Z.DM)(e)&&xe.current){var a=xe.current.getBoundingClientRect();Te((0,T.$u)(-t),[i-a.left,o-a.top])}else le((function(e){return(0,r.Z)((0,r.Z)({},e),{},{xOffset:e.xOffset-n/4,yOffset:e.yOffset-t/4})}))}),[Te]),Ee=u.useCallback(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,o,s,l,c,u,d,p,f,h,g,x,m,v,b;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==t.touches.length||!xe.current){e.next=11;break}return n=xe.current.getBoundingClientRect(),t.preventDefault(),t.stopPropagation(),o=t.touches[0],s=o.clientX,l=o.clientY,c=t.touches[1],u=c.clientX,d=c.clientY,i={x:s,y:l},C={x:u,y:d},p=Math.sqrt(Math.pow(C.x-i.x,2)+Math.pow(C.y-i.y,2)),f=E({x:s-n.left,y:l-n.top},{x:u-n.left,y:d-n.top}),pe.current&&(le((function(e){return(0,r.Z)((0,r.Z)({},e),{},{xOffset:e.xOffset+(f[0]-pe.current.center[0]),yOffset:e.yOffset+(f[1]-pe.current.center[1])})})),Te(p/pe.current.distance,f)),pe.current={distance:p,center:f},e.abrupt("return");case 11:if(!(t.target&&(t.target instanceof HTMLElement||t.target instanceof SVGElement)&&t.target.dataset&&"draggable"in t.target.dataset)){e.next=13;break}return e.abrupt("return");case 13:h=t.touches[0],g=h.clientX,x=h.clientY,t.preventDefault(),t.stopPropagation(),fe.current&&(m=(0,a.Z)(fe.current,2),v=m[0],b=m[1],le((function(e){return(0,r.Z)((0,r.Z)({},e),{},{xOffset:e.xOffset+(g-v),yOffset:e.yOffset+(x-b)})}))),fe.current=[g,x];case 18:case"end":return e.stop()}var i,C}),e)})));return function(t){return e.apply(this,arguments)}}(),[Te]);u.useEffect((function(){if(!F)return xe.current?(xe.current.addEventListener("wheel",Pe,{passive:!1}),function(){xe.current&&xe.current.removeEventListener("wheel",Pe,{passive:!1})}):void 0}),[Pe,F]),u.useEffect((function(){ge.current=!1}),[n]);var Ie=u.useMemo((function(){return[($||0)/2,(re||0)/2]}),[$,re]);u.useEffect((function(){ge.current||(ge.current=ke())}),[ke]);var Me=u.useCallback((function(e){var t=e.target,n=t?t.naturalWidth||t.clientWidth:0,r=t?t.naturalHeight||t.clientHeight:0;K(r),G(n),L&&L([n,r]),D&&D()}),[D,L]),Le=u.useCallback((function(e){1===e.touches.length&&(fe.current=[e.touches[0].clientX,e.touches[0].clientY]),pe.current=null}),[]),Ae=u.useCallback((function(e){1===e.touches.length?fe.current=[e.touches[0].clientX,e.touches[0].clientY]:2===e.touches.length&&(fe.current=null)}),[]),Fe=u.useCallback((function(e){xe.current&&xe.current.focus(),Ce&&(he.current=[e.clientX,e.clientY])}),[Ce]),Oe=u.useCallback((function(e){if(Ce&&he.current){var t=(0,a.Z)(he.current,2),n=t[0],i=t[1],o=[e.clientX,e.clientY];he.current=o,le((function(e){return(0,r.Z)((0,r.Z)({},e),{},{xOffset:e.xOffset+(o[0]-n),yOffset:e.yOffset+(o[1]-i)})}))}}),[Ce]),Re=u.useCallback((function(e){he.current=null}),[]),De=u.useCallback((function(e){he.current=null,je(!1)}),[]),_e=u.useContext(C.Z).imagePreview.frameBorderColor||"#aaa",Be=!!$&&!!re,Ne=!!W&&!!X&&!U,Ue=Be?void 0:"hidden",He=Ce?"grab":null,Ve=He?{cursor:He}:{},ze={transform:"translate(".concat(ce,"px, ").concat(ue,"px)"),outline:M?"1px solid ".concat(_e):void 0,width:null!=W?W*de:null,height:null!=X?X*de:null,transformOrigin:"0 0"},We={transform:"scale(".concat(de,")"),width:W,height:X,transformOrigin:"0 0",display:"flex"},Ge=(0,r.Z)((0,r.Z)((0,r.Z)({},I.spriteThumbnailImage),{},{visibility:Ue},f?void 0:I.previewImagePixelated),{},{cursor:He}),Ye={position:"absolute",top:0,left:0,width:"100%",height:"100%",visibility:Ue};return(0,h.jsx)(c.Z,{bounds:!0,onResize:function(e){ee(e.bounds.width),ie(e.bounds.height)},children:function(e){var i=e.measureRef;return(0,h.jsxs)("div",{style:I.container,children:[!F&&(0,h.jsxs)(d.Z,{noPadding:!0,children:[(0,h.jsx)(l.Z,{onClick:function(){return Te(T.e_,Ie)},tooltip:{id:"Zoom out (you can also use Ctrl + Mouse wheel)"},children:(0,h.jsx)(g,{})}),(0,h.jsx)("div",{style:I.sliderContainer,children:(0,h.jsx)(k.Z,{min:Math.log2(.25*Ze()),max:Math.log2(4*Ze()),step:1/16,value:Math.log2(de),onChange:function(e){Se(Math.pow(2,e),Ie)}})}),(0,h.jsx)(l.Z,{onClick:function(){return Te(T.Qi,Ie)},tooltip:{id:"Zoom in (you can also use Ctrl + Mouse wheel)"},children:(0,h.jsx)(p.Z,{})}),(0,h.jsx)(l.Z,{onClick:function(){ke()},tooltip:{id:"Fit content to window"},children:(0,h.jsx)(x.Z,{})})]}),(0,h.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},I.contentContainer),{},{height:y||"100%",width:P}),children:[!A&&(0,h.jsx)(j.Z,{}),(0,h.jsxs)("div",{dir:"ltr",style:(0,r.Z)((0,r.Z)({},I.imagePreviewContainer),{},{overflow:Be?"unset":"hidden"},Ve),ref:function(e){i(e),xe.current=e},onTouchStart:F?null:Ae,onTouchMove:F?null:Ee,onTouchEnd:F?null:Le,tabIndex:0,onPointerDown:F?null:Fe,onPointerMove:F?null:Oe,onPointerUp:F?null:Re,onPointerLeave:F?null:De,onKeyDown:F?null:ye.current.onKeyDown,onKeyUp:F?null:ye.current.onKeyUp,children:[!!U&&(0,h.jsx)(m.Z,{children:(0,h.jsx)(v.Z,{children:(0,h.jsx)(s.Trans,{id:"Unable to load the image"})})}),!U&&(0,h.jsx)("div",{style:ze,children:(0,h.jsx)("div",{style:We,children:R?(0,h.jsx)(w.Z,{style:Ge,alt:t,url:n,onError:me,onLoad:Me,hideLoader:_}):(0,h.jsx)(b.W,{style:Ge,alt:t,src:n,onError:me,onLoad:Me})})}),Ne&&M&&(0,h.jsx)("div",{style:Ye,children:M({imageWidth:W||0,imageHeight:X||0,imageOffsetTop:ue,imageOffsetLeft:ce,imageZoomFactor:de,forcedCursor:He,deactivateControls:Ce})})]})]})]})}})}},74661:function(e,t,n){"use strict";n.d(t,{Z:function(){return L}});var r=n(74165),i=n(15861),o=n(93433),a=n(29439),s=n(28381),l=n(36600),c=n(72402),u=(n(72410),n(57974)),d=n(9383),p=n(61325),f=n(51598),h=n(32484),g=n(67835),x=n(40243),m=n(30141),v=n(85076),b=n(1491),C=n(37571),j=n(23198),y=n(23865),Z=n.n(y),k={},w=function(e){return k[e.ptr.toString()]},T=function(e){var t=e.project,n=e.callback,r=s.useCallback((function(e){var n=function(e){var t=e.ptr.toString();return k.hasOwnProperty(t)||(k[t]={}),k[t]}(t),r=Z()();return n[r]=e,r}),[t]),i=s.useCallback((function(e){var n=w(t);n&&delete n[e]}),[t]),o=s.useCallback((function(){var e=w(t);e&&Object.keys(e).forEach((function(t){try{e[t]()}catch(n){}}))}),[t]);return s.useEffect((function(){var e=r(n);return function(){i(e)}}),[n,r,i]),{triggerResourcesHaveChanged:o}},S=n(38501),P=n(65056),E=n(29343),I={textFieldStyle:{display:"flex",flex:1}},M=s.forwardRef((function(e,t){var n=e.project,y=e.initialResourceName,Z=e.defaultNewResourceName,k=e.resourceManagementProps,w=e.resourcesLoader,M=e.resourceKind,L=e.fallbackResourceKind,A=e.onChange,F=(0,S.Z)(),O=s.useRef(null),R=(0,P.Z)().showConfirmation,D=s.useRef(null),_=s.useRef([]),B=s.useState(!1),N=(0,a.Z)(B,2),U=N[0],H=N[1],V=s.useState(e.initialResourceName),z=(0,a.Z)(V,2),W=z[0],G=z[1],Y=s.useState(!1),q=(0,a.Z)(Y,2),X=q[0],K=q[1],J=s.useCallback((function(e){O.current&&O.current.focus(e)}),[]);s.useImperativeHandle(t,(function(){return{focus:J}})),s.useEffect((function(){G(y)}),[y]);var Q=s.useCallback((function(){G(""),H(!1),A&&A("")}),[A]),$=s.useCallback((function(e){if(""!==e){var t=-1===_.current.indexOf(e);t||A&&A(e),G(e),H(t)}else Q()}),[A,Q]),ee=s.useCallback((function(e){var t=e.getAllResourceNames().toJSArray();if(M){var n=t.filter((function(t){return e.getResource(t).getKind()===M}));L&&n.push.apply(n,(0,o.Z)(t.filter((function(t){return e.getResource(t).getKind()===L})))),_.current=n}}),[M,L]),te=s.useCallback((function(){n&&(ee(n.getResourcesManager()),F())}),[n,F,ee]);s.useEffect(te,[te]);var ne=T({project:n,callback:te}).triggerResourcesHaveChanged,re=s.useCallback(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i,o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,k.onChooseResource({initialSourceName:t.name,multiSelection:!1,resourceKind:M});case 5:if((i=e.sent).length){e.next=8;break}return e.abrupt("return");case 8:return o=i[0],(0,u.r3)(n,o),n.getResourcesManager().addResource(o),a=o.getName(),O.current&&O.current.forceInputValueTo(a),i.forEach((function(e){return e.delete()})),e.next=16,k.onFetchNewlyAddedResources();case 16:ne(),$(a),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.error("Unable to choose a resource",e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),[n,k,M,$,ne]),ie=s.useCallback((function(){var e=k.resourceSources||[],t=k.getStorageProvider();return[].concat((0,o.Z)(e.filter((function(e){return e.kind===M})).filter((function(e){var n=e.onlyForStorageProvider;return!n||n===t.internalName})).map((function(e){return{text:"",value:"",translatableValue:e.displayName,renderIcon:function(){return(0,E.jsx)(b.Z,{})},onClick:function(){return re(e)}}}))),[{type:"separator"}])}),[re,k,M]),oe=s.useCallback(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,i){var o,a,s,l,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D.current=new AbortController,o=D.current.signal,a=n.getResourcesManager(),s=a.getResource(W),e.prev=4,K(!0),e.next=8,i.edit({project:n,i18n:t,getStorageProvider:k.getStorageProvider,resourceManagementProps:k,resourceNames:[W],extraOptions:{existingMetadata:s.getMetadata(),singleFrame:!0,fps:0,name:W||Z,isLooping:!1},signal:o});case 8:if(l=e.sent,K(!1),l){e.next=12;break}return e.abrupt("return");case 12:if((c=l.resources).length){e.next=15;break}return e.abrupt("return");case 15:w.burstUrlsCacheForResources(n,[c[0].name]),A(c[0].name),ne(),F(),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(4),"UserCancellationError"!==e.t0.name&&(console.error("An exception was thrown when launching or reading resources from the external editor:",e.t0),(0,m.gR)({message:"There was an error while using the external editor. Try with another resource and if this persists, please report this as a bug.",rawError:e.t0,errorId:"external-editor-error"})),K(!1);case 25:return e.prev=25,D.current=null,e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[4,21,25,28]])})));return function(t,n){return e.apply(this,arguments)}}(),[Z,F,A,n,k,W,w,ne]),ae=s.useCallback((0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R({title:{id:"Cancel editing"},message:{id:"You will lose any progress made with the external editor. Do you wish to cancel?"},confirmButtonLabel:{id:"Cancel edition"},dismissButtonLabel:{id:"Continue editing"}});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:D.current?D.current.abort():console.error("Cannot cancel editing with external editor, abort controller is missing.");case 6:case"end":return e.stop()}}),e)}))),[R]),se=U?(0,E.jsx)(l.Trans,{id:"This resource does not exist in the game"}):null,le=k.resourceExternalEditors.filter((function(e){return e.kind===M})),ce=ie(),ue=_.current.map((function(e){return{text:e,value:e}})),de=[].concat((0,o.Z)(ce),(0,o.Z)(ue));return(0,E.jsx)(l.I18n,{children:function(t){var n=t.i18n;return(0,E.jsxs)(p.ep,{noMargin:!0,expand:!0,alignItems:"center",children:[(0,E.jsx)(x.sg,{expand:!0,noMargin:!0,children:(0,E.jsxs)(p.pJ,{expand:!0,noMargin:!0,alignItems:"center",children:[(0,E.jsx)(c.ZP,{style:e.style,textFieldStyle:I.textFieldStyle,floatingLabelText:e.floatingLabelText,helperMarkdownText:e.helperMarkdownText,hintText:e.hintText,openOnFocus:!0,dataSource:de,value:W,onChange:$,errorText:se,fullWidth:e.fullWidth,margin:e.margin,onRequestClose:e.onRequestClose,onApply:e.onApply,ref:O,id:e.id}),e.canBeReset&&(0,E.jsx)(f.Z,{size:"small",onClick:Q,children:(0,E.jsx)(j.Z,{})})]})}),(0,E.jsx)(h.Z,{label:W?(0,E.jsx)(l.Trans,{id:"Replace"}):(0,E.jsx)(l.Trans,{id:"Choose a file"}),onClick:function(){O.current&&O.current.focus()},primary:!0}),1===le.length&&(0,E.jsx)(g.Z,{leftIcon:(0,E.jsx)(C.Z,{fontSize:"small"}),label:n._(W?le[0].editDisplayName:le[0].createDisplayName),onClick:function(){return oe(n,le[0])}}),le.length>1?(0,E.jsx)(d.Z,{icon:(0,E.jsx)(C.Z,{fontSize:"small"}),label:n._(W?le[0].editDisplayName:le[0].createDisplayName),onClick:function(){return oe(n,le[0])},buildMenuTemplate:function(e){return le.map((function(t){return{label:e._(W?t.editDisplayName:t.createDisplayName),click:function(){return oe(e,t)}}}))}}):null,X&&(0,E.jsx)(v.G,{onClose:ae})]})}})})),L=M},3115:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});n(28381);var r=n(72410),i=n(74661),o=n(70729),a=n(29343),s=["image"],l=function(e){var t=e.project,n=e.resourceName,r=e.resourcesLoader,i=e.resourceKind,s=e.style,l=e.selectable,c=e.selected,u=e.onSelect,d=e.onContextMenu;return"image"===i?(0,a.jsx)(o.Z,{project:t,resourceName:n,resourcesLoader:r,style:s,selectable:l,selected:c,onSelect:u,onContextMenu:d}):null},c=n(61325),u=n(6996),d=n(40243),p=function(e){var t=e.project,n=e.resourceManagementProps,o=e.resourceKind,p=e.resourceName,f=e.defaultNewResourceName,h=e.onChange,g=e.floatingLabelText,x=e.hintText,m=e.helperMarkdownText,v=e.fallbackResourceKind,b=e.id,C=(0,u.U)().isMobile?"center":"flex-end",j=s.includes(o),y=(0,a.jsx)(i.Z,{project:t,resourceManagementProps:n,resourcesLoader:r.Z,resourceKind:o,fullWidth:!0,initialResourceName:p,defaultNewResourceName:f,onChange:h,floatingLabelText:g,hintText:x,helperMarkdownText:m,fallbackResourceKind:v,id:b});return j?(0,a.jsxs)(c.pJ,{noMargin:!0,expand:!0,alignItems:C,children:[(0,a.jsx)(l,{resourceName:p,resourcesLoader:r.Z,project:t,resourceKind:o}),y]}):(0,a.jsx)(d.x1,{noMargin:!0,expand:!0,children:y})}},17037:function(e,t,n){"use strict";n.d(t,{Q:function(){return i},h:function(){return d}});n(28381);for(var r=n.g.gd,i=[{kind:"audio",displayName:{id:"Audio"},fileExtensions:["aac","wav","mp3","ogg"],createNewResource:function(){return new r.AudioResource}},{kind:"image",displayName:{id:"Image"},fileExtensions:["png","jpg","jpeg","webp"],createNewResource:function(){return new r.ImageResource}},{kind:"font",displayName:{id:"Font"},fileExtensions:["ttf","otf"],createNewResource:function(){return new r.FontResource}},{kind:"video",displayName:{id:"Video"},fileExtensions:["mp4","webm"],createNewResource:function(){return new r.VideoResource}},{kind:"json",displayName:{id:"Json"},fileExtensions:["json"],createNewResource:function(){return new r.JsonResource}},{kind:"tilemap",displayName:{id:"Tile Map"},fileExtensions:["json","ldtk","tmj"],createNewResource:function(){return new r.TilemapResource}},{kind:"tileset",displayName:{id:"Tile Set"},fileExtensions:["json","tsj"],createNewResource:function(){return new r.TilesetResource}},{kind:"bitmapFont",displayName:{id:"Bitmap Font"},fileExtensions:["fnt","xml"],createNewResource:function(){return new r.BitmapFontResource}},{kind:"model3D",displayName:{id:"3D model"},fileExtensions:["glb"],createNewResource:function(){return new r.Model3DResource}},{kind:"atlas",displayName:{id:"Atlas"},fileExtensions:["atlas"],createNewResource:function(){return new r.AtlasResource}},{kind:"spine",displayName:{id:"Spine Json"},fileExtensions:["json"],createNewResource:function(){return new r.SpineResource}}],o={},a=0,s=i;a<s.length;a++){var l=s[a],c=l.kind,u=l.createNewResource;o[c]=u}function d(e){return o[e]?o[e]():null}},70729:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=(n(72410),n(21601)),a=n(23818),s=n(24910),l=n(39631),c=n(58893),u=n(29343),d=100,p={position:"relative",display:"inline-block",width:d,height:d,justifyContent:"center",alignItems:"center",lineHeight:d+"px",textAlign:"center"},f={spriteThumbnail:(0,r.Z)({},p),spriteThumbnailImage:{position:"relative",maxWidth:d,maxHeight:d,verticalAlign:"middle",pointerEvents:"none"},checkboxContainer:{textAlign:"initial",position:"absolute",width:34,height:64,bottom:0,right:0}};t.Z=function(e){var t=e.onContextMenu,n=e.resourcesLoader,d=e.resourceName,p=e.project,h=i.useContext(s.Z),g=(0,l.i)(i.useCallback((function(e){t&&t(e.clientX,e.clientY)}),[t])),x=h.imagePreview.borderColor,m=e.selected?h.palette.secondary:x,v=(0,r.Z)((0,r.Z)({},f.spriteThumbnail),{},{border:"2px solid ".concat(m),borderRadius:4},e.style);return(0,u.jsxs)("div",(0,r.Z)((0,r.Z)({title:d,style:v,onContextMenu:function(e){e.stopPropagation(),t&&t(e.clientX,e.clientY)}},g),{},{children:[(0,u.jsx)(c.Z,{}),(0,u.jsx)(a.W,{style:f.spriteThumbnailImage,alt:d,src:n.getResourceFullUrl(p,d,{})}),e.selectable&&(0,u.jsx)("div",{style:f.checkboxContainer,children:(0,u.jsx)(o.Z,{checked:!!e.selected,onCheck:function(t,n){return e.onSelect&&e.onSelect(n)}})})]}))}},57974:function(e,t,n){"use strict";n.d(t,{Gu:function(){return y},MX:function(){return C},OI:function(){return v},PX:function(){return j},Te:function(){return f},U3:function(){return p},ZC:function(){return h},iz:function(){return g},jJ:function(){return m},kX:function(){return b},r3:function(){return x}});var r=n(1413),i=n(72410),o=n(50057),a=n.n(o),s=n(79431),l=n(84360),c=a()("fs"),u=a()("path"),d=n.g.gd,p=function(e,t){var n=i.Z.getResourceFullUrl(e,t,{}).substring(7);return-1!==n.indexOf("?cache=")&&(n=n.substring(0,n.lastIndexOf("?cache="))),n},f=function(e,t){var n=u.dirname(e.getProjectFile());return t.includes(n)},h=function(e,t,n){if(!c||!u)return Promise.resolve(t);var r=u.dirname(e.getProjectFile());return Promise.all(t.map((function(t){if(f(e,t))return n.set(t,t),t;var i=u.basename(t),o=u.extname(i),a=u.basename(i,o),l=(0,s.Z)(a,(function(e){var t=u.join(r,e)+o;return c.existsSync(t)})),d=u.join(r,l+o);return new Promise((function(e){c.copyFile(t,d,(function(r){return r?(n.set(t,t),e(t)):(n.set(d,t),e(d))}))}))})))},g=function(e,t){if(!e.getResourcesManager().hasResource(t))return"";if(!c)return"";var n=e.getResourcesManager().getResource(t).getFile();if(j(n))return"";var r=u.resolve(u.dirname(e.getProjectFile()),n);return c.existsSync(r)?f(e,r)?"":"warning":"error"},x=function(e,t){t instanceof d.ImageResource&&t.setSmooth("nearest"!==e.getScaleMode())},m=function(e,t){var n=(0,l.R)(t),r=new d.ResourcesRenamer(e.getResourcesManager(),n);n.delete(),d.ResourceExposer.exposeWholeProjectResources(e,r),r.delete()},v=function(e){var t=e.getMetadata();if(t)try{var n=JSON.parse(t);if(n&&"object"===typeof n)return{localFilePath:n.localFilePath&&"string"===typeof n.localFilePath?n.localFilePath:null,extension:n.extension&&"string"===typeof n.extension?n.extension:null}}catch(r){console.warn("Malformed metadata for resource with name "+e.getName()+" - ignoring it.")}return{localFilePath:null,extension:null}},b=function(e,t){var n=e.getMetadata();try{var i=n?JSON.parse(n):{};return void e.setMetadata(JSON.stringify((0,r.Z)((0,r.Z)({},i),t)))}catch(o){}e.setMetadata(JSON.stringify(t))},C=function(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://")},j=function(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://")||e.startsWith("blob:")||e.startsWith("data:")},y=function(e){return e.startsWith("blob:")}},72410:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(15671),i=n(43144),o=n(85919),a=n(50057),s=n.n(a),l=s()("electron"),c=s()("path"),u=function(){function e(){(0,r.Z)(this,e),this.projectCache={}}return(0,i.Z)(e,[{key:"_getProjectCache",value:function(e){var t=this.projectCache[e.ptr];return t||(this.projectCache[e.ptr]={})}},{key:"getCachedUrl",value:function(e,t){return this._getProjectCache(e)[t]}},{key:"cacheUrl",value:function(e,t){return this._getProjectCache(e)[t]=t}},{key:"burstUrl",value:function(e,t){delete this._getProjectCache(e)[t]}},{key:"cacheLocalFileUrl",value:function(e,t,n,r){var i=this._getProjectCache(e);return i[t]=r?n:"".concat(n,"?cache=").concat(Date.now())}}]),e}(),d=function(){function e(){(0,r.Z)(this,e)}return(0,i.Z)(e,null,[{key:"burstUrlsCacheForResources",value:function(t,n){var r=t.getResourcesManager();n.forEach((function(n){r.hasResource(n)&&e._cache.burstUrl(t,r.getResource(n).getFile())}))}},{key:"burstAllUrlsCache",value:function(){e._cache=new u}},{key:"getFullUrl",value:function(t,n,r){var i=r.isResourceForPixi,a=r.disableCacheBurst;if(l&&function(e){return!(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://")||e.startsWith("blob:")||e.startsWith("data:"))}(n)){var s=e._cache.getCachedUrl(t,n);if(s)return s;var u=t.getProjectFile(),d=c.dirname(u),p=c.resolve(d,n).replace(/\\/g,"/");return console.info("Caching resolved local filename:",p),this._cache.cacheLocalFileUrl(t,n,"file://"+p,!!a)}var f=(0,o.WN)(n);i&&(f=function(e,t,n){if(e.startsWith("data:")||e.startsWith("blob:"))return e;var r=-1===e.indexOf("?")?"?":"&";return e+r+t+"="+n}(f,"gdUsage","pixi"));var h=e._cache.getCachedUrl(t,f);return h||(console.info("Caching resolved url:",f),this._cache.cacheUrl(t,f))}},{key:"getResourceFullUrl",value:function(t,n,r){if(t.getResourcesManager().hasResource(n)){var i=t.getResourcesManager().getResource(n).getFile();return e.getFullUrl(t,i,r)}return n}}]),e}();d._cache=new u},72291:function(e,t,n){"use strict";n.d(t,{b:function(){return u},n:function(){return c}});var r=n(74165),i=n(15861),o=n(29439),a=n(28381),s=n(94446),l=n(29343),c=a.createContext({tutorials:null,fetchTutorials:function(){},error:null}),u=function(e){var t=e.children,n=a.useState(null),u=(0,o.Z)(n,2),d=u[0],p=u[1],f=a.useState(null),h=(0,o.Z)(f,2),g=h[0],x=h[1],m=a.useRef(!1),v=a.useCallback((function(){d||m.current||(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(null),m.current=!0,e.prev=2,e.next=5,(0,s.Qp)();case 5:t=e.sent,console.info("Loaded ".concat(t?t.length:0," tutorials.")),p(t),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("Unable to load the tutorials:",e.t0),x(e.t0);case 14:m.current=!1;case 15:case"end":return e.stop()}}),e,null,[[2,10]])})))()}),[d,m]),b=a.useMemo((function(){return{tutorials:d,fetchTutorials:v,error:g}}),[d,v,g]);return(0,l.jsx)(c.Provider,{value:b,children:t})}},67412:function(e,t,n){"use strict";n.d(t,{Q:function(){return i}});var r=n(48409),i=function(e){return(0,r.tq)()?"":(0,r.z1)()?e.replace(/CmdOrCtrl\+/,"\u2318").replace(/CommandOrControl\+/,"\u2318").replace(/Super\+/,"\u2318").replace(/Shift\+/,"\u21e7").replace(/Alt\+/,"\u2325").replace(/Option\+/,"\u2325").replace(/Delete/,"\u2326").replace(/Backspace/,"\u232b").replace(/numadd/,"+").replace(/numsub/,"-").replace(/num1/,"1").replace(/num2/,"2").replace(/num3/,"3"):e.replace(/CmdOrCtrl\+/,"Ctrl+").replace(/CommandOrControl\+/,"Ctrl+").replace(/Super\+/,"Win+").replace(/Option\+/,"Alt+").replace(/Delete/,"DEL").replace(/numadd/,"+").replace(/numsub/,"-").replace(/num1/,"1").replace(/num2/,"2").replace(/num3/,"3")}},3108:function(e,t,n){"use strict";n.d(t,{UQ:function(){return v},X1:function(){return m},_m:function(){return x}});var r=n(45987),i=n(1413),o=n(28381),a=n(53220),s=n(35008),l=n(6180),c=n(51598),u=n(24910),d=n(40243),p=n(25638),f=n(29343),h=["costlyBody"],g={bodyRoot:{padding:0},accordionSummaryWithExpandOnLeft:{flexDirection:"row-reverse",paddingLeft:0,paddingRight:0},accordionSummaryContent:{flexGrow:1,display:"flex",alignItems:"center",marginLeft:16},actionsContainer:{flexGrow:0,flexShrink:0,alignSelf:"center"}},x=function(e){return(0,f.jsx)(d.sg,{noMargin:e.noMargin,expand:!0,children:(0,f.jsxs)(d.x1,{noMargin:!0,expand:!0,alignItems:"center",children:[(0,f.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,f.jsx)(s.Z,{style:g.accordionSummaryWithExpandOnLeft,expandIcon:e.expandIcon||(0,f.jsx)(c.Z,{size:"small",children:(0,f.jsx)(p.Z,{})}),children:(0,f.jsx)("div",{style:g.accordionSummaryContent,children:e.children})})}),e.actions&&(0,f.jsx)("div",{style:g.actionsContainer,children:e.actions})]})})},m=function(e){return(0,f.jsx)(l.Z,{style:(0,i.Z)((0,i.Z)({},e.disableGutters&&g.bodyRoot),e.style),children:e.children})},v=o.forwardRef((function(e,t){var n=e.costlyBody,s=(0,r.Z)(e,h),l=o.useContext(u.Z);return(0,f.jsx)(a.Z,(0,i.Z)((0,i.Z)({},s),{},{ref:t,square:!0,elevation:0,style:(0,i.Z)((0,i.Z)({},{border:!e.noMargin&&"1px solid ".concat(l.toolbar.separatorColor),backgroundColor:l.paper.backgroundColor.medium,marginLeft:0}),e.noMargin&&{border:"0px",padding:"0px",margin:"0px"}),TransitionProps:{unmountOnExit:!!n}}))}))},91739:function(e,t,n){"use strict";var r={showAlertDialog:function(e){},showConfirmDialog:function(e){},showConfirmDeleteDialog:function(e){},showYesNoCancelDialog:function(e){}},i=n(28381).createContext(r);t.Z=i},65056:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(91739);t.Z=function(){var e=i.useContext(o.Z),t=e.showAlertDialog,n=e.showConfirmDialog,a=e.showConfirmDeleteDialog,s=e.showYesNoCancelDialog;return{showAlert:i.useCallback((function(e){return new Promise((function(n){t((0,r.Z)({callback:n},e))}))}),[t]),showConfirmation:i.useCallback((function(e){return new Promise((function(t){n((0,r.Z)({callback:t},e))}))}),[n]),showDeleteConfirmation:i.useCallback((function(e){return new Promise((function(t){a((0,r.Z)({callback:t},e))}))}),[a]),showYesNoCancel:i.useCallback((function(e){return new Promise((function(t){s((0,r.Z)({callback:t},e))}))}),[s])}}},82936:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(1413),i=n(28381),o=n(40243),a=n(98411),s=n(89141),l=n(86278),c=n(24910),u=n(61325),d=n(51598),p=n(20914),f=n(23198),h=n(78118),g=n(29343),x=i.memo((function(e){return(0,g.jsxs)(h.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",children:[(0,g.jsx)("path",{d:"M2.96262 18.0041L10.2087 3.52252C11.2247 1.49207 14.1171 1.49261 15.1323 3.52342L22.3719 18.0051C23.2889 19.8397 21.9577 22 19.9099 22H5.42417C3.37586 22 2.04457 19.8389 2.96262 18.0041Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M12.667 8C13.2193 8 13.667 8.44772 13.667 9V12C13.667 12.5523 13.2193 13 12.667 13C12.1147 13 11.667 12.5523 11.667 12V9C11.667 8.44772 12.1147 8 12.667 8Z",fill:"#32323B"}),(0,g.jsx)("path",{d:"M12.667 17C13.2193 17 13.667 16.5523 13.667 16C13.667 15.4477 13.2193 15 12.667 15C12.1147 15 11.667 15.4477 11.667 16C11.667 16.5523 12.1147 17 12.667 17Z",fill:"#32323B"})]}))})),m=i.memo((function(e){return(0,g.jsx)(h.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,g.jsxs)("g",{id:"icon/Information",children:[(0,g.jsx)("path",{id:"Vector",d:"M2 12C2 6.47716 6.47716 2 12 2C17.5229 2 22 6.47716 22 12C22 17.5229 17.5229 22 12 22C6.47716 22 2 17.5229 2 12Z",fill:"#45D9A1"}),(0,g.jsx)("path",{id:"symbol",fillRule:"evenodd",clipRule:"evenodd",d:"M14.7477 8.88263C15.2267 9.15749 15.3922 9.76864 15.1174 10.2477L12.8238 14.245C12.0182 15.6487 9.96598 15.5643 9.27842 14.0992L8.84468 13.1747C8.6101 12.6747 8.82526 12.0793 9.32525 11.8447C9.82524 11.6101 10.4207 11.8253 10.6553 12.3252L11.089 13.2496L13.3826 9.25231C13.6575 8.77328 14.2686 8.60776 14.7477 8.88263Z",fill:"#32323B"})]})}))})),v=n(77791),b=n(47956),C={icon:{width:28,height:28,marginRight:10,marginLeft:10},topRightHideButton:{position:"absolute",right:0,top:0},paper:{position:"relative",overflow:"hidden"},content:{flex:1}},j=function(e){var t=e.kind,n=e.children,h=e.onHide,j=e.hideButtonSize,y=e.renderRightButton,Z=e.renderLeftIcon,k=e.markdownImageOnly,w=i.useContext(c.Z),T=(0,a.Z)(),S=(0,r.Z)({},C.paper),P={display:"flex",alignItems:"center",borderLeft:"1px solid ".concat(T.palette.divider)};return"error"!==t&&"warning"!==t&&"valid"!==t||(S.borderColor=w.message[t],"light"===T.palette.type&&(S.backgroundColor=(0,s.$n)(w.message[t],.9))),(0,g.jsxs)(p.Z,{variant:"outlined",style:S,background:"dark",children:[k?n:(0,g.jsxs)(o.x1,{noMargin:!0,children:[(0,g.jsx)(o.sg,{expand:!0,children:(0,g.jsx)(o.x1,{expand:!0,children:(0,g.jsxs)(u.ep,{alignItems:"center",justifyContent:"space-between",noMargin:!0,expand:!0,children:[(0,g.jsxs)(o.x1,{noMargin:!0,alignItems:"center",children:[Z?(0,g.jsxs)(i.Fragment,{children:[Z(),(0,g.jsx)(o.LZ,{})]}):(0,g.jsxs)(i.Fragment,{children:["info"===t&&(0,g.jsx)(b.Z,{style:C.icon}),"warning"===t&&(0,g.jsx)(x,{style:(0,r.Z)((0,r.Z)({},C.icon),{},{color:w.message.warning})}),"error"===t&&(0,g.jsx)(v.Z,{style:(0,r.Z)((0,r.Z)({},C.icon),{},{color:w.message.error})}),"valid"===t&&(0,g.jsx)(m,{style:(0,r.Z)((0,r.Z)({},C.icon),{},{color:w.message.valid})})]}),(0,g.jsx)(l.Z,{style:C.content,children:n})]}),y&&y()]})})}),h&&!("small"===j)&&(0,g.jsx)("div",{style:P,children:(0,g.jsx)(d.Z,{onClick:h,color:"default",children:(0,g.jsx)(f.Z,{fontSize:"small"})})})]}),h&&"small"===j&&(0,g.jsx)("div",{style:C.topRightHideButton,children:(0,g.jsx)(d.Z,{"aria-label":"hide",onClick:function(){return h()},size:"small",children:(0,g.jsx)(f.Z,{fontSize:"small"})})})]})}},1589:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(38295),a=n(24910),s=n(29343);t.Z=function(e){var t=i.useContext(a.Z);return(0,s.jsx)(o.Z,{variant:"body2",align:"center",component:"div",style:(0,r.Z)({opacity:.6,textShadow:"1px 1px 0px ".concat(t.emptyMessage.shadowColor),userSelect:e.allowSelection?"text":void 0,cursor:e.allowSelection?"text":void 0},e.style),title:e.tooltipText,children:e.children})}},24289:function(e,t,n){"use strict";n.d(t,{o:function(){return i}});var r=n(1412),i=function(e){var t=r.findDOMNode(e);if(t instanceof HTMLButtonElement)t.focus();else if(t instanceof HTMLElement){var n=t.getElementsByTagName("button");n&&n.length&&n[0]instanceof HTMLButtonElement&&n[0].focus()}}},18876:function(e,t,n){"use strict";n.d(t,{r:function(){return u}});var r=n(1413),i=n(28381),o=n(24910),a=n(61325),s=n(6996),l=n(29343),c={card:{display:"flex",borderRadius:10,alignItems:"center",padding:16,maxWidth:1300},xlargeImageSize:{width:280,height:110},largeImageSize:{width:250,height:110},mediumImageSize:{width:120,height:100},smallImageSize:{width:200,height:110}},u=function(e){var t=e.children,n=e.renderImage,u=i.useContext(o.Z),d=(0,s.U)().windowSize,p=(0,r.Z)((0,r.Z)({},c.card),{},{border:"1px solid ".concat(u.palette.secondary)});return(0,l.jsx)("div",{style:p,children:(0,l.jsxs)(a.ep,{noMargin:!0,expand:!0,children:[n("small"===d?c.smallImageSize:"medium"===d?c.mediumImageSize:"large"===d?c.largeImageSize:c.xlargeImageSize),t]})})}},87284:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(57216),a=n(58396),s=n(24910),l=n(40243),c=n(6996),u=n(29343),d={minWidth:0,flex:1,display:"flex",alignItems:"center"},p={paddingBottom:18,paddingTop:0,minWidth:0};t.Z=function(e){var t=e.children,n=e.header,f=e.background,h=e.cardCornerAction,g=e.isHighlighted,x=e.disabled,m=(0,c.U)().isMobile,v=i.useContext(s.Z);return(0,u.jsx)(o.Z,{style:(0,r.Z)({opacity:x?.5:1,backgroundColor:"dark"===f?v.paper.backgroundColor.dark:v.paper.backgroundColor.medium},g?{borderLeftWidth:4,borderLeftColor:v.palette.secondary}:{}),variant:"outlined",children:(0,u.jsxs)(l.sg,{expand:!0,noMargin:!0,children:[(0,u.jsxs)(l.x1,{justifyContent:"space-between",expand:!0,children:[(0,u.jsx)("div",{style:(0,r.Z)((0,r.Z)({},d),{},{paddingLeft:m?8:24,paddingRight:h?m?8:24:0}),children:n}),(0,u.jsx)(l.sg,{children:h})]}),(0,u.jsx)(a.Z,{style:(0,r.Z)((0,r.Z)({},p),{},{paddingRight:m?8:24,paddingLeft:m?8:24}),children:t})]})})}},21601:function(e,t,n){"use strict";var r=n(1413),i=(n(28381),n(69186)),o=n(19345),a=n(62802),s=n(7172),l=n(66733),c=n(29343),u=(0,i.Z)({root:{marginLeft:9,marginRight:9,marginTop:0,marginBottom:0,padding:0}}),d=(0,i.Z)({root:{display:"block"}});t.Z=function(e){var t=e.onCheck,n=u(),i=d(),p=(0,c.jsx)(s.Z,{className:n.root,disabled:e.disabled,checked:e.checked,onChange:t?function(e){return t(e,e.target.checked)}:void 0,icon:e.uncheckedIcon,checkedIcon:e.checkedIcon,style:e.label?void 0:e.style,id:e.id});return e.label?(0,c.jsxs)(a.Z,{classes:i,children:[(0,c.jsx)(o.Z,{control:p,label:e.label,style:(0,r.Z)((0,r.Z)({},e.style),{},{cursor:"default"})}),e.tooltipOrHelperText&&(0,c.jsx)(l.Z,{children:e.tooltipOrHelperText})]}):p}},8511:function(e,t,n){"use strict";var r=n(28381),i=n(33028),o=n(69186),a=n(29343),s=(0,o.Z)({root:{cursor:"default"},deleteIcon:{cursor:"default"}}),l=r.forwardRef((function(e,t){var n=r.useRef(null),o=function(){n.current&&n.current.focus()};return r.useImperativeHandle(t,(function(){return{focus:o}})),(0,a.jsx)(i.Z,{label:e.label,icon:e.icon,size:e.size,variant:e.variant,avatar:e.avatar,style:e.style,onClick:e.onClick,onBlur:e.onBlur,onFocus:e.onFocus,onDelete:e.onDelete,classes:s(),className:e.disableAutoTranslate?"notranslate":"",ref:n,color:e.color})}));t.Z=l},66789:function(e,t,n){"use strict";n(28381);var r=n(92709),i=n(29343);t.Z=function(e){return(0,i.jsx)(r.Z,{color:"secondary",style:e.style,size:e.size,disableShrink:e.disableShrink,variant:"determinate"===e.variant?"static":e.variant,value:e.value})}},37237:function(e,t,n){"use strict";var r=n(1413),i=n(29439),o=n(28381),a=n(14238),s=n(64684),l=n(80845),c=n(29343),u={color:{width:"36px",height:"14px",borderRadius:"2px",textAlign:"center",fontSize:"10px"},swatch:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},disabled:{opacity:.2,cursor:"default"},popover:{zIndex:l.default.tooltip+100}};t.Z=function(e){var t=e.color,n=e.style,l=e.onChange,d=e.onChangeComplete,p=e.disableAlpha,f=e.disabled,h=o.useRef(null),g=o.useState(!1),x=(0,i.Z)(g,2),m=x[0],v=x[1],b=t||{r:200,g:200,b:200,a:1};return(0,c.jsxs)("div",{style:n,children:[(0,c.jsx)("div",{style:(0,r.Z)((0,r.Z)({},u.swatch),f?u.disabled:{}),onClick:function(){f||v(!m)},ref:h,children:(0,c.jsx)("div",{style:(0,r.Z)((0,r.Z)({},u.color),{},{background:"rgba(".concat(b.r,", ").concat(b.g,", ").concat(b.b,", ").concat(b.a||1,")")}),children:t?null:"?"})}),m&&h.current?(0,c.jsx)(s.ZP,{open:!0,onClose:function(){v(!1)},anchorEl:h.current,style:u.popover,children:(0,c.jsx)(a.xS,{color:b,onChange:l,onChangeComplete:d,disableAlpha:p})}):null]})}},90286:function(e,t,n){"use strict";var r=n(1413),i=n(29439),o=n(36600),a=n(28381),s=n(29277),l=n(37237),c=n(11858),u=n(29343),d={container:{position:"relative",display:"inline-block"},picker:{position:"absolute",right:"8px",top:"19px"}};t.Z=function(e){var t=e.fullWidth,n=e.disableAlpha,p=e.id,f=e.floatingLabelText,h=e.helperMarkdownText,g=e.onChange,x=e.color,m=e.alpha,v=e.disabled,b=a.useState(x),C=(0,i.Z)(b,2),j=C[0],y=C[1],Z=a.useState(n||void 0===m?1:m),k=(0,i.Z)(Z,2),w=k[0],T=k[1],S=a.useRef(null),P=function(e,t){y(e),T(t)},E=function(){var e=parseFloat(w);e<0&&(e=0),e>1&&(e=1),T(e),g(j,e)};return(0,u.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},d.container),{},{width:t?"100%":void 0}),children:[(0,u.jsx)(s.ZP,{id:p,fullWidth:n,style:n?void 0:{width:"70%"},floatingLabelText:f,floatingLabelFixed:!v,helperMarkdownText:h,type:"text",translatableHintText:v?null:{id:"R;G;B, like 100;200;180"},value:j,onChange:function(e){return P(e.target.value,w)},onBlur:E,ref:S,disabled:v}),!n&&(0,u.jsx)(s.ZP,{id:"".concat(p||"","-alpha"),floatingLabelText:(0,u.jsx)(o.Trans,{id:"Alpha"}),floatingLabelFixed:!0,style:{width:"30%"},translatableHintText:{id:"Number between 0 and 1"},value:w.toString(),onChange:function(e,t){return P(j,parseFloat(t))},onBlur:E,ref:S,type:"number",step:.1,disabled:v}),(0,u.jsx)("div",{style:d.picker,children:(0,u.jsx)(l.Z,{disableAlpha:n,onChangeComplete:function(e){var t=(0,c.KC)(e.rgb),r=n?1:e.rgb.a;y(t),r&&T(r),g(t,r)},color:(0,c.A0)(j,w),disabled:v})})]})}},23818:function(e,t,n){"use strict";n.d(t,{W:function(){return a}});var r=n(1413),i=(n(28381),n(29343)),o=function(e,t,n){if(e.startsWith("data:")||e.startsWith("blob:"))return e;var r=-1===e.indexOf("?")?"?":"&";return e+r+t+"="+n},a=function(e){return(0,i.jsx)("img",(0,r.Z)((0,r.Z)({},e),{},{src:e.src?o(e.src,"gdUsage","img"):void 0}))}},1491:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99998 3.33337C8.27612 3.33337 8.49998 3.55723 8.49998 3.83337V12.1667C8.49998 12.4428 8.27612 12.6667 7.99998 12.6667C7.72384 12.6667 7.49998 12.4428 7.49998 12.1667V3.83337C7.49998 3.55723 7.72384 3.33337 7.99998 3.33337Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33331 8.00004C3.33331 7.7239 3.55717 7.50004 3.83331 7.50004H12.1666C12.4428 7.50004 12.6666 7.7239 12.6666 8.00004C12.6666 8.27618 12.4428 8.50004 12.1666 8.50004H3.83331C3.55717 8.50004 3.33331 8.27618 3.33331 8.00004Z",fill:"currentColor"})]}))}))},99221:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({width:"16",height:"16",viewBox:"-80 0 1078.6 515.1",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,a.jsx)("path",{d:"M918.6 515.1h-918.6c14.7-155.7 103.7-288.7 235.1-359.9l-76.2-132c-4.3-7.4-1.8-16.8 5.6-21.1s16.8-1.8 21.1 5.6l77.2 133.7c58.9-26.9 125.2-41.9 196.5-41.9s137.6 15 196.5 41.9l77.2-133.7c4.2-7.4 13.7-9.9 21-5.6s9.9 13.7 5.6 21.1l-76.2 132c131.5 71.2 220.5 204.2 235.2 359.9zm-248.5-129c21.3 0 38.6-17.3 38.5-38.5 0-21.2-17.2-38.5-38.5-38.5-21.2 0-38.5 17.2-38.5 38.5 0 21.2 17.2 38.5 38.5 38.5zm-421.7 0c21.3 0 38.6-17.3 38.5-38.5 0-21.2-17.2-38.5-38.5-38.5-21.2 0-38.5 17.2-38.5 38.5 0 21.2 17.2 38.5 38.5 38.5z"})}))}))},35638:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({width:"16",height:"16",viewBox:"-4 -4 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,a.jsx)("path",{fill:"currentColor",d:"M18.71,19.5C17.88,20.74 17,21.95 15.66,21.97C14.32,22 13.89,21.18 12.37,21.18C10.84,21.18 10.37,21.95 9.1,22C7.79,22.05 6.8,20.68 5.96,19.47C4.25,17 2.94,12.45 4.7,9.39C5.57,7.87 7.13,6.91 8.82,6.88C10.1,6.86 11.32,7.75 12.11,7.75C12.89,7.75 14.37,6.68 15.92,6.84C16.57,6.87 18.39,7.1 19.56,8.82C19.47,8.88 17.39,10.1 17.41,12.63C17.44,15.65 20.06,16.66 20.09,16.67C20.06,16.74 19.67,18.11 18.71,19.5M13,3.5C13.73,2.67 14.94,2.04 15.94,2C16.07,3.17 15.6,4.35 14.9,5.19C14.21,6.04 13.07,6.7 11.95,6.61C11.8,5.46 12.36,4.26 13,3.5Z"})}))}))},60274:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.16683 4.49996C8.16683 3.48744 8.98762 2.66663 10.0002 2.66663H12.8335C13.4778 2.66663 14.0002 3.18897 14.0002 3.83329V10.8333C14.0002 11.4776 13.4778 12 12.8335 12H11.1048C10.5301 12 9.97901 12.2282 9.57265 12.6346L9.02038 13.1868C8.87738 13.3298 8.66232 13.3726 8.47549 13.2952C8.28865 13.2178 8.16683 13.0355 8.16683 12.8333V4.49996ZM10.0002 3.66663C9.53991 3.66663 9.16683 4.03972 9.16683 4.49996V11.6622C9.71864 11.2352 10.3996 11 11.1048 11H12.8335C12.9256 11 13.0002 10.9253 13.0002 10.8333V3.83329C13.0002 3.74124 12.9255 3.66663 12.8335 3.66663H10.0002Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.50016 3.66663C4.40812 3.66663 4.3335 3.74125 4.3335 3.83329V10.8333C4.3335 10.9253 4.40811 11 4.50016 11H6.22893C6.93411 11 7.61502 11.2352 8.16683 11.6622V4.49996C8.16683 4.03972 7.79375 3.66663 7.3335 3.66663H4.50016ZM3.3335 3.83329C3.3335 3.18896 3.85583 2.66663 4.50016 2.66663H7.3335C8.34604 2.66663 9.16683 3.48744 9.16683 4.49996V12.8333C9.16683 13.0355 9.04501 13.2178 8.85817 13.2952C8.67133 13.3726 8.45627 13.3298 8.31328 13.1868L7.76101 12.6346C7.35464 12.2282 6.80356 12 6.22893 12H4.50016C3.85584 12 3.3335 11.4776 3.3335 10.8333V3.83329Z",fill:"currentColor"})]}))}))},24233:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{},{children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.4509 4.08872C12.6781 4.24571 12.735 4.55714 12.578 4.78431L8.14508 11.1986L8.14507 11.1987C7.42761 12.2368 5.90028 12.2566 5.15616 11.2374L5.55998 10.9426L5.15616 11.2374L3.42953 8.87255C3.26669 8.64953 3.31549 8.33673 3.53851 8.17389C3.76153 8.01106 4.07433 8.05985 4.23717 8.28288L5.9638 10.6477C6.30202 11.111 6.99628 11.102 7.32242 10.6301C7.32242 10.6301 7.32242 10.6301 7.32242 10.6301L11.7554 4.21578C11.9123 3.98861 12.2238 3.93172 12.4509 4.08872Z",fill:"currentColor"})}))}))},82422:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99999 3.66663C5.60676 3.66663 3.66666 5.60673 3.66666 7.99996C3.66666 10.3932 5.60676 12.3333 7.99999 12.3333C10.3932 12.3333 12.3333 10.3932 12.3333 7.99996C12.3333 5.60673 10.3932 3.66663 7.99999 3.66663ZM2.66666 7.99996C2.66666 5.05444 5.05447 2.66663 7.99999 2.66663C10.9455 2.66663 13.3333 5.05445 13.3333 7.99996C13.3333 10.9455 10.9455 13.3333 7.99999 13.3333C5.05448 13.3333 2.66666 10.9455 2.66666 7.99996Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.74883 6.06628C9.98835 6.20371 10.0711 6.50928 9.93367 6.7488L8.4046 9.41367C7.9347 10.2325 6.73757 10.1833 6.33649 9.32864L6.04733 8.71233C5.93004 8.46234 6.03762 8.16459 6.28762 8.0473C6.53761 7.93001 6.83536 8.03759 6.95265 8.28759L7.24176 8.90381C7.24175 8.9038 7.24177 8.90382 7.24176 8.90381C7.29909 9.0259 7.47008 9.03298 7.53724 8.91599C7.53724 8.916 7.53725 8.91598 7.53724 8.91599L9.06631 6.25112C9.20374 6.0116 9.50932 5.92885 9.74883 6.06628Z",fill:"currentColor"})]}))}))},25638:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.49309 6.80023C5.69544 6.61233 6.01181 6.62405 6.19971 6.8264L7.99998 8.76515L9.80025 6.8264C9.98815 6.62405 10.3045 6.61233 10.5069 6.80023C10.7092 6.98813 10.7209 7.3045 10.533 7.50685L8.36638 9.84019C8.27177 9.94207 8.13902 9.99996 7.99998 9.99996C7.86095 9.99996 7.72819 9.94207 7.63358 9.84019L5.46692 7.50685C5.27902 7.3045 5.29073 6.98813 5.49309 6.80023Z",fill:"currentColor"})}))}))},45047:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.19973 5.49315C9.38763 5.69551 9.37591 6.01187 9.17356 6.19977L7.23481 8.00004L9.17356 9.80031C9.37591 9.98821 9.38763 10.3046 9.19973 10.5069C9.01183 10.7093 8.69546 10.721 8.49311 10.5331L6.15977 8.36644C6.05789 8.27183 6 8.13908 6 8.00004C6 7.86101 6.05789 7.72825 6.15977 7.63365L8.49311 5.46698C8.69546 5.27908 9.01183 5.2908 9.19973 5.49315Z",fill:"currentColor"})}))}))},84900:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.80029 5.49309C6.98819 5.29073 7.30456 5.27902 7.50691 5.46692L9.84025 7.63358C9.94213 7.72819 10 7.86095 10 7.99998C10 8.13902 9.94213 8.27177 9.84025 8.36638L7.50691 10.533C7.30456 10.7209 6.98819 10.7092 6.80029 10.5069C6.61239 10.3045 6.62411 9.98815 6.82646 9.80025L8.76522 7.99998L6.82646 6.19971C6.62411 6.01181 6.61239 5.69544 6.80029 5.49309Z",fill:"currentColor"})}))}))},29324:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99998 6.66663C8.13902 6.66663 8.27177 6.72452 8.36638 6.8264L10.533 9.15973C10.7209 9.36209 10.7092 9.67845 10.5069 9.86636C10.3045 10.0543 9.98815 10.0425 9.80025 9.84018L7.99998 7.90143L6.19971 9.84018C6.01181 10.0425 5.69544 10.0543 5.49309 9.86636C5.29073 9.67845 5.27902 9.36209 5.46692 9.15973L7.63358 6.8264C7.72819 6.72452 7.86095 6.66663 7.99998 6.66663Z",fill:"currentColor"})}))}))},51375:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{children:(0,a.jsx)("path",{d:"M 12.008 20 L 15.468 14 L 15.458 14 C 15.798 13.4 16.008 12.73 16.008 12 C 16.008 10.8 15.468 9.73 14.628 9 L 19.418 9 C 19.798 9.93 20.008 10.94 20.008 12 C 20.008 16.418 16.426 20 12.008 20 M 4.008 12 C 4.008 10.54 4.398 9.18 5.078 8 L 8.548 14 L 8.558 14 C 9.248 15.19 10.508 16 12.008 16 C 12.458 16 12.888 15.91 13.298 15.77 L 10.898 19.91 C 7.008 19.37 4.008 16.04 4.008 12 M 15.008 12 C 15.008 13.657 13.665 15 12.008 15 C 10.351 15 9.008 13.657 9.008 12 C 9.008 10.343 10.351 9 12.008 9 C 13.665 9 15.008 10.343 15.008 12 M 12.008 4 C 14.968 4 17.548 5.61 18.928 8 L 12.008 8 C 10.068 8 8.458 9.38 8.088 11.21 L 5.708 7.08 C 7.168 5.21 9.448 4 12.008 4 M 12.008 3.054 C 7.684 3.054 3.008 6.477 3.008 12 C 3.008 16.341 6.485 21 12.008 21 C 17.531 21 20.883 16.5 20.883 12 C 20.883 6.571 16.469 3.054 12.008 3.054 Z"})}))}))},90264:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.49999 3.66663C4.03975 3.66663 3.66666 4.03972 3.66666 4.49996V8.99996C3.66666 9.36815 3.96513 9.66663 4.33332 9.66663C4.60947 9.66663 4.83332 9.89048 4.83332 10.1666C4.83332 10.4428 4.60947 10.6666 4.33332 10.6666C3.41285 10.6666 2.66666 9.92043 2.66666 8.99996V4.49996C2.66666 3.48744 3.48747 2.66663 4.49999 2.66663H8.99999C9.92047 2.66663 10.6667 3.41282 10.6667 4.33329C10.6667 4.60944 10.4428 4.83329 10.1667 4.83329C9.89051 4.83329 9.66666 4.60944 9.66666 4.33329C9.66666 3.9651 9.36818 3.66663 8.99999 3.66663H4.49999Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.16666 6.33329C6.70642 6.33329 6.33332 6.70639 6.33332 7.16663V11.5C6.33332 11.9602 6.70642 12.3333 7.16666 12.3333H11.5C11.9602 12.3333 12.3333 11.9602 12.3333 11.5V7.16663C12.3333 6.70639 11.9602 6.33329 11.5 6.33329H7.16666ZM5.33332 7.16663C5.33332 6.1541 6.15413 5.33329 7.16666 5.33329H11.5C12.5125 5.33329 13.3333 6.1541 13.3333 7.16663V11.5C13.3333 12.5125 12.5125 13.3333 11.5 13.3333H7.16666C6.15413 13.3333 5.33332 12.5125 5.33332 11.5V7.16663Z",fill:"currentColor"})]}))}))},23198:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"1 1 14 14",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.8536 4.14645C12.0488 4.34171 12.0488 4.65829 11.8536 4.85355L4.85355 11.8536C4.65829 12.0488 4.34171 12.0488 4.14645 11.8536C3.95118 11.6583 3.95118 11.3417 4.14645 11.1464L11.1464 4.14645C11.3417 3.95118 11.6583 3.95118 11.8536 4.14645Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.14645 4.14645C4.34171 3.95118 4.65829 3.95118 4.85355 4.14645L11.8536 11.1464C12.0488 11.3417 12.0488 11.6583 11.8536 11.8536C11.6583 12.0488 11.3417 12.0488 11.1464 11.8536L4.14645 4.85355C3.95118 4.65829 3.95118 4.34171 4.14645 4.14645Z",fill:"currentColor"})]}))}))},50583:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({width:"17",height:"16",viewBox:"0 0 17 16",fill:"none"},e),{},{children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33337 4.49996C3.33337 3.48744 4.15418 2.66663 5.16671 2.66663H12.1667C13.1793 2.66663 14 3.48744 14 4.49996V8.83329C14 9.84583 13.1792 10.6666 12.1667 10.6666H10.671C10.6819 10.8097 10.7023 10.9741 10.7389 11.1452C10.8512 11.669 11.0908 12.153 11.557 12.3861C11.7644 12.4898 11.8733 12.7225 11.82 12.9482C11.7667 13.1739 11.5653 13.3333 11.3334 13.3333H6.00004C5.76815 13.3333 5.56669 13.1739 5.51342 12.9482C5.46014 12.7225 5.56903 12.4898 5.77643 12.3861C6.24265 12.153 6.48223 11.669 6.59447 11.1452C6.63115 10.9741 6.65156 10.8097 6.66238 10.6666H5.16671C4.15419 10.6666 3.33337 9.84584 3.33337 8.83329V4.49996ZM7.66465 10.6666C7.65285 10.8628 7.62668 11.1008 7.57228 11.3547C7.50754 11.6568 7.3973 12.0046 7.20863 12.3333H10.1248C9.93611 12.0046 9.82588 11.6568 9.76114 11.3547C9.70673 11.1008 9.68056 10.8628 9.66876 10.6666H7.66465ZM10.1714 9.66663H12.1667C12.627 9.66663 13 9.29355 13 8.83329V4.49996C13 4.03972 12.627 3.66663 12.1667 3.66663H5.16671C4.70647 3.66663 4.33337 4.03972 4.33337 4.49996V8.83329C4.33337 9.29355 4.70646 9.66663 5.16671 9.66663H7.162C7.16552 9.66659 7.16903 9.66659 7.17253 9.66663H10.1609C10.1644 9.66659 10.1679 9.66659 10.1714 9.66663Z",fill:"currentColor"})}))}))},3570:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,a.jsx)("path",{d:"M16.9309 3.64148C15.6562 3.0566 14.2892 2.62566 12.86 2.37883C12.8339 2.37406 12.8079 2.38598 12.7945 2.40977C12.6187 2.72246 12.424 3.13035 12.2876 3.45098C10.7504 3.22082 9.22101 3.22082 7.7153 3.45098C7.5789 3.12324 7.3771 2.72246 7.2005 2.40977C7.1871 2.38676 7.16108 2.37484 7.13507 2.37883C5.70663 2.62484 4.33968 3.05578 3.06413 3.64148C3.05308 3.64625 3.04362 3.65418 3.03733 3.66449C0.444522 7.53813 -0.265791 11.3166 0.0826466 15.0481C0.0842091 15.0664 0.0944825 15.0838 0.108662 15.0949C1.81933 16.3512 3.47643 17.1139 5.10272 17.6194C5.12874 17.6273 5.15632 17.6179 5.17288 17.5964C5.55757 17.0711 5.9005 16.5171 6.19452 15.9346C6.21186 15.9005 6.1953 15.86 6.15983 15.8465C5.61589 15.6402 5.09796 15.3886 4.59972 15.1029C4.5603 15.0799 4.55714 15.0235 4.59343 14.9965C4.69827 14.918 4.80315 14.8362 4.90327 14.7537C4.9214 14.7386 4.94663 14.7354 4.96792 14.7449C8.24104 16.2393 11.7846 16.2393 15.0191 14.7449C15.0404 14.7346 15.0656 14.7378 15.0845 14.7529C15.1847 14.8354 15.2895 14.9179 15.3951 14.9965C15.4314 15.0235 15.429 15.0798 15.3896 15.1029C14.8914 15.3941 14.3735 15.6401 13.8287 15.8457C13.7933 15.8591 13.7775 15.9004 13.7949 15.9345C14.0952 16.5163 14.4382 17.0702 14.8157 17.5956C14.8315 17.6178 14.8599 17.6273 14.8859 17.6194C16.5201 17.1139 18.1772 16.3512 19.8878 15.0949C19.9028 15.0838 19.9123 15.0671 19.9139 15.0489C20.3309 10.7348 19.2154 6.9873 16.9568 3.66523C16.9514 3.65418 16.9419 3.64625 16.9309 3.64148ZM6.68339 12.776C5.69796 12.776 4.88597 11.8713 4.88597 10.7602C4.88597 9.6491 5.68218 8.74441 6.68339 8.74441C7.69241 8.74441 8.49655 9.65707 8.48077 10.7602C8.48077 11.8713 7.68452 12.776 6.68339 12.776ZM13.329 12.776C12.3436 12.776 11.5316 11.8713 11.5316 10.7602C11.5316 9.6491 12.3278 8.74441 13.329 8.74441C14.338 8.74441 15.1421 9.65707 15.1264 10.7602C15.1264 11.8713 14.3381 12.776 13.329 12.776Z",fill:"currentColor"})}))}))},17361:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.16666 9.33329C3.44281 9.33329 3.66666 9.55715 3.66666 9.83329V10.8333C3.66666 11.6617 4.33823 12.3333 5.16666 12.3333H10.8333C11.6618 12.3333 12.3333 11.6618 12.3333 10.8333V9.83329C12.3333 9.55715 12.5572 9.33329 12.8333 9.33329C13.1095 9.33329 13.3333 9.55715 13.3333 9.83329V10.8333C13.3333 12.214 12.2141 13.3333 10.8333 13.3333H5.16666C3.78596 13.3333 2.66666 12.214 2.66666 10.8333V9.83329C2.66666 9.55715 2.89052 9.33329 3.16666 9.33329Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2.66663C8.27614 2.66663 8.5 2.89048 8.5 3.16663V9.49996C8.5 9.7761 8.27614 9.99996 8 9.99996C7.72386 9.99996 7.5 9.7761 7.5 9.49996V3.16663C7.5 2.89048 7.72386 2.66663 8 2.66663Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.49311 6.80023C5.69546 6.61233 6.01183 6.62405 6.19973 6.8264L8 8.76515L9.80027 6.8264C9.98817 6.62405 10.3045 6.61233 10.5069 6.80023C10.7092 6.98813 10.721 7.3045 10.5331 7.50685L8.36639 9.84019C8.27179 9.94207 8.13903 9.99996 8 9.99996C7.86096 9.99996 7.72821 9.94207 7.6336 9.84019L5.46693 7.50685C5.27903 7.3045 5.29075 6.98813 5.49311 6.80023Z",fill:"currentColor"})]}))}))},37571:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5126 5.17677C15.196 4.49332 16.3041 4.49332 16.9875 5.17677L18.8232 7.01253C19.5066 7.69595 19.5066 8.80397 18.8233 9.48739L9.53034 18.7803C9.43172 18.8789 9.30756 18.9481 9.17179 18.98L4.92179 19.98C4.66896 20.0395 4.40335 19.964 4.21968 19.7803C4.03602 19.5966 3.96046 19.331 4.01995 19.0782L5.01995 14.8282C5.0519 14.6924 5.12106 14.5683 5.21969 14.4696L14.5126 5.17677ZM15.9268 6.23739C15.8292 6.13978 15.6709 6.13978 15.5733 6.23739L6.43121 15.3794L5.75757 18.2424L8.62055 17.5688L17.7626 8.42677C17.7626 8.42678 17.7626 8.42677 17.7626 8.42677C17.8602 8.32913 17.8602 8.17081 17.7626 8.07317L15.9268 6.23739Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 19.25C13 18.8358 13.3358 18.5 13.75 18.5H19.25C19.6642 18.5 20 18.8358 20 19.25C20 19.6642 19.6642 20 19.25 20H13.75C13.3358 20 13 19.6642 13 19.25Z",fill:"currentColor"})]}))}))},77791:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",children:[(0,a.jsx)("path",{d:"M2.66699 12C2.66699 6.47716 7.14415 2 12.667 2C18.1899 2 22.667 6.47716 22.667 12C22.667 17.5229 18.1899 22 12.667 22C7.14415 22 2.66699 17.5229 2.66699 12Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M15.9285 10.0114C16.28 9.6599 16.28 9.09005 15.9285 8.73858C15.577 8.38711 15.0072 8.38711 14.6557 8.73858L12.6671 10.7272L10.6785 8.73858C10.327 8.38711 9.75717 8.38711 9.40569 8.73858C9.05422 9.09005 9.05422 9.6599 9.40569 10.0114L11.3943 12L9.40569 13.9886C9.05422 14.3401 9.05422 14.9099 9.40569 15.2614C9.75717 15.6128 10.327 15.6128 10.6785 15.2614L12.6671 13.2728L14.6557 15.2614C15.0072 15.6128 15.577 15.6128 15.9285 15.2614C16.28 14.9099 16.28 14.3401 15.9285 13.9886L13.9399 12L15.9285 10.0114Z",fill:"#32323B"})]}))}))},22853:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,a.jsx)("path",{d:"M11.3916 18.6667V10.7607H14.1423L14.555 7.67868H11.3916V5.71127C11.3916 4.81923 11.6475 4.21132 12.9754 4.21132L14.6663 4.21065V1.45399C14.3739 1.41735 13.3701 1.33333 12.2018 1.33333C9.76223 1.33333 8.09203 2.76936 8.09203 5.40603V7.67868H5.33301V10.7607H8.09203V18.6667H11.3916Z",fill:"currentColor"})}))}))},62981:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.00024 4.49996C4.00024 3.48744 4.82106 2.66663 5.83358 2.66663H10.0002C10.1329 2.66663 10.26 2.7193 10.3538 2.81307L13.1871 5.64641C13.2809 5.74017 13.3336 5.86735 13.3336 5.99996V11.5C13.3336 12.5125 12.5128 13.3333 11.5002 13.3333H5.83358C4.82106 13.3333 4.00024 12.5125 4.00024 11.5V4.49996ZM5.83358 3.66663C5.37334 3.66663 5.00024 4.03972 5.00024 4.49996V11.5C5.00024 11.9602 5.37333 12.3333 5.83358 12.3333H11.5002C11.9605 12.3333 12.3336 11.9602 12.3336 11.5V6.20707L9.79314 3.66663H5.83358Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.83358 2.83329C10.1097 2.83329 10.3336 3.05715 10.3336 3.33329V5.66663H12.6669C12.9431 5.66663 13.1669 5.89048 13.1669 6.16663C13.1669 6.44277 12.9431 6.66663 12.6669 6.66663H9.83358C9.55743 6.66663 9.33358 6.44277 9.33358 6.16663V3.33329C9.33358 3.05715 9.55743 2.83329 9.83358 2.83329Z",fill:"currentColor"})]}))}))},9311:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.71604 2.95003C2.7993 2.7768 2.97449 2.66663 3.16669 2.66663H12.8334C13.0256 2.66663 13.2007 2.7768 13.284 2.95003C13.3673 3.12326 13.3439 3.32889 13.2238 3.47897L10.1827 7.28044C10.0644 7.42819 10 7.61179 10 7.80103V12.1666C10 12.811 9.4777 13.3333 8.83336 13.3333H7.16669C6.52235 13.3333 6.00003 12.811 6.00003 12.1666V7.80103C6.00003 7.61176 5.93562 7.42819 5.81743 7.28045L2.77626 3.47897C2.65619 3.32889 2.63278 3.12326 2.71604 2.95003ZM4.207 3.66663L6.59828 6.65573C6.59827 6.65573 6.59828 6.65574 6.59828 6.65573C6.85834 6.9808 7.00003 7.3847 7.00003 7.80103V12.1666C7.00003 12.2587 7.07463 12.3333 7.16669 12.3333H8.83336C8.92542 12.3333 9.00002 12.2587 9.00002 12.1666V7.80103C9.00002 7.38467 9.14175 6.98078 9.4018 6.65573L11.7931 3.66663H4.207Z",fill:"currentColor"})}))}))},24893:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"115",height:"93",viewBox:"-5 -1 115 93",fill:"none",children:[(0,a.jsx)("path",{d:"M60.9224 67.0771C52.3232 67.0771 44.0446 64.752 36.7313 59.6893C31.6337 56.1619 25.7339 48.197 25.7339 34.6939C25.7339 9.64282 38.5302 0.5 64.2455 0.5H110.542L115 14.7683H67.7736C50.801 14.7683 40.7089 16.0919 40.7089 34.6939C40.7089 40.8384 42.4416 45.2112 46.008 48.0604C52.0354 52.8764 63.7507 53.0813 70.9092 52.3913C70.9092 52.3913 73.8463 42.9467 74.33 41.4134C74.8966 39.6166 74.6485 39.188 72.881 39.188C70.328 39.188 65.7384 39.188 60.8673 39.188C57.4536 39.188 54.0998 37.4699 54.0998 33.3432C54.0998 29.3579 57.2201 27.0447 61.4974 27.0447C68.9034 27.0447 84.1565 27.0447 87.0113 27.0447C90.754 27.0447 94.5734 27.5814 92.6247 33.5063L82.3047 64.8043C82.3054 64.805 73.8741 67.0771 60.9224 67.0771V67.0771Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M89.8255 72.3901C84.6241 76.0318 76.9198 78.0446 63.8468 78.0446C41.3145 78.0446 24.8236 69.9479 18.0999 54.2515C14.9211 46.8323 15.227 38.4234 15.227 27.051H0.252679C0.252679 39.043 0.0463766 48.4458 3.25452 57.1063C11.6669 79.8247 33.3301 92.0307 62.4312 92.0307C90.5999 92.0307 102.273 83.9981 109.882 72.3901H89.8255Z",fill:"currentColor"})]}))}))},44378:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.82764 6.4557C3.82764 3.99488 5.81925 2 8.27603 2C10.7328 2 12.7244 3.99488 12.7244 6.4557L12.6938 9.97255C12.6938 12.4334 10.7328 14 8.27603 14C5.81925 14 3.85823 12.4334 3.85823 9.97255L3.82764 6.4557ZM8.26302 4.45359C7.05025 4.45359 6.22005 5.28379 6.22005 6.49657C6.22005 7.70934 7.05025 8.53954 8.26302 8.53954C9.30424 8.53954 10.0671 7.92706 10.2852 6.9267H9.08722C8.92372 7.20265 8.62294 7.44884 8.27894 7.44884C7.76043 7.44884 7.27892 6.96733 7.27892 6.44883C7.27892 5.93032 7.72984 5.4794 8.24835 5.4794C8.59276 5.4794 8.92445 5.66486 9.08781 5.94136L10.9363 5.97145C11.2 5.97145 11.4137 6.18518 11.4137 6.44883V6.44941C11.4134 8.17819 10.0138 9.64723 8.26302 9.64723C6.52296 9.64723 5.11236 8.23663 5.11236 6.49657C5.11236 4.7565 6.52296 3.3459 8.26302 3.3459C9.24584 3.3459 10.185 3.82706 10.762 4.53111C10.9292 4.73502 10.9659 5.18332 10.762 5.35044C10.5581 5.51757 10.1296 5.49317 9.96243 5.28927C9.55895 4.79698 8.94771 4.45359 8.26302 4.45359ZM5.16969 9.75624C5.47088 9.68225 5.77963 9.85803 5.85957 10.1433C5.85957 10.1433 5.90756 10.2714 5.94136 10.3403C6.00936 10.4788 6.12133 10.6653 6.29417 10.8513C6.62721 11.2097 7.21449 11.6304 8.26302 11.6304C9.31156 11.6304 9.89884 11.2097 10.2319 10.8513C10.4047 10.6653 10.5167 10.4788 10.5847 10.3403C10.6185 10.2714 10.6549 10.174 10.668 10.1384C10.7479 9.85321 11.0552 9.68225 11.3564 9.75625C11.6589 9.83058 11.8408 10.124 11.7626 10.4116L11.757 10.4269L11.757 10.4269C11.7282 10.5059 11.6586 10.6967 11.6102 10.7952C11.5069 11.0056 11.3396 11.2842 11.0802 11.5634C10.5488 12.1353 9.6602 12.7061 8.26302 12.7061C6.86584 12.7061 5.97726 12.1353 5.44587 11.5634C5.18649 11.2842 5.0191 11.0056 4.9158 10.7952C4.86394 10.6896 4.76343 10.4116 4.76343 10.4116C4.68522 10.124 4.86711 9.83058 5.16969 9.75624Z",fill:"currentColor"})}))}))},31370:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({width:"16",height:"16",viewBox:"-12 -12 70 70",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,a.jsx)("path",{d:"M24,1.9a21.6,21.6,0,0,0-6.8,42.2c1,.2,1.8-.9,1.8-1.8V39.4c-6,1.3-7.9-2.9-7.9-2.9a6.5,6.5,0,0,0-2.2-3.2C6.9,31.9,9,32,9,32a4.3,4.3,0,0,1,3.3,2c1.7,2.9,5.5,2.6,6.7,2.1a5.4,5.4,0,0,1,.5-2.9C12.7,32,9,28,9,22.6A10.7,10.7,0,0,1,11.9,15a6.2,6.2,0,0,1,.3-6.4,8.9,8.9,0,0,1,6.4,2.9,15.1,15.1,0,0,1,5.4-.8,17.1,17.1,0,0,1,5.4.7,9,9,0,0,1,6.4-2.8,6.5,6.5,0,0,1,.4,6.4A10.7,10.7,0,0,1,39,22.6C39,28,35.3,32,28.5,33.2a5.4,5.4,0,0,1,.5,2.9v6.2a1.8,1.8,0,0,0,1.9,1.8A21.7,21.7,0,0,0,24,1.9Z",fill:"currentColor"})}))}))},5295:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[(0,a.jsx)("path",{d:"M13 8.1C13 7.81727 12.9735 7.53428 12.921 7.25954C12.8973 7.13517 12.7883 7.04529 12.6619 7.04529H8.51758C8.37184 7.04529 8.25391 7.16322 8.25391 7.30897V8.891C8.25391 9.03674 8.37184 9.15467 8.51758 9.15467H10.644C10.5115 9.42288 10.3289 9.65559 10.1145 9.85138L11.6048 11.3417C12.4622 10.5247 13 9.3751 13 8.1Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M8.5 5.70937C9.01731 5.70937 9.50937 5.87366 9.9229 6.1847C10.0274 6.26324 10.175 6.25372 10.2677 6.16023L11.3929 5.03499C11.4452 4.98271 11.4733 4.91087 11.4699 4.83697C11.4666 4.76307 11.4326 4.69406 11.3759 4.64642C10.5708 3.97156 9.54927 3.6 8.5 3.6C6.95578 3.6 5.59156 4.38493 4.78509 5.57669L6.33281 7.12441C6.70206 6.29269 7.53283 5.70937 8.5 5.70937Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M8.5 12.6C9.50658 12.6 10.4335 12.2625 11.1825 11.7002L9.66422 10.182C9.31719 10.3774 8.92056 10.4906 8.5 10.4906C7.53283 10.4906 6.70206 9.90731 6.33281 9.07558L4.78509 10.6233C5.59156 11.8151 6.95578 12.6 8.5 12.6Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M6.14777 8.47977C6.12757 8.35534 6.10938 8.23002 6.10938 8.1C6.10938 7.96997 6.12757 7.84466 6.14777 7.72022L4.49324 6.0657C4.18021 6.67707 4 7.36727 4 8.1C4 8.83273 4.18021 9.52293 4.49326 10.1343L6.14777 8.47977Z",fill:"currentColor"})]}))}))},86065:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99999 3.66663C5.60676 3.66663 3.66666 5.60673 3.66666 7.99996C3.66666 10.3932 5.60676 12.3333 7.99999 12.3333C10.3932 12.3333 12.3333 10.3932 12.3333 7.99996C12.3333 5.60673 10.3932 3.66663 7.99999 3.66663ZM2.66666 7.99996C2.66666 5.05444 5.05447 2.66663 7.99999 2.66663C10.9455 2.66663 13.3333 5.05445 13.3333 7.99996C13.3333 10.9455 10.9455 13.3333 7.99999 13.3333C5.05448 13.3333 2.66666 10.9455 2.66666 7.99996Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.99689 6.72225C6.9968 6.72298 6.99672 6.72371 6.99664 6.72444C6.99658 6.72489 6.99661 6.72465 6.99664 6.72444L6.99677 6.72329L6.99689 6.72225ZM8.47298 7.42017C8.04992 7.58361 7.49999 7.99263 7.49999 8.66663V8.83329C7.49999 9.10944 7.72385 9.33329 7.99999 9.33329C8.27613 9.33329 8.49999 9.10944 8.49999 8.83329V8.66663C8.49999 8.63219 8.51235 8.58558 8.56778 8.52461C8.62638 8.46015 8.71978 8.39685 8.83338 8.35296C9.60577 8.05452 9.99999 7.35738 9.99999 6.66663C9.99999 6.31089 9.96035 5.80089 9.65686 5.37601C9.32845 4.91624 8.77702 4.66663 7.99999 4.66663C7.09835 4.66663 6.58004 5.19298 6.31291 5.6738C6.18242 5.9087 6.10646 6.13862 6.06287 6.30677C6.04081 6.39184 6.02636 6.46376 6.01721 6.51617C6.01262 6.54245 6.00933 6.56401 6.00707 6.5801L6.0044 6.60009L6.00357 6.60686L6.00327 6.60942L6.00315 6.61049C6.00313 6.61071 6.00305 6.61141 6.49999 6.66663L6.00305 6.61141C5.97255 6.88586 6.17032 7.13307 6.44477 7.16357C6.71836 7.19397 6.96488 6.99754 6.99664 6.72444L6.99731 6.71946C6.99814 6.71358 6.99973 6.70292 7.0023 6.68817C7.00748 6.65855 7.01646 6.61328 7.03086 6.55773C7.06019 6.44463 7.10923 6.29956 7.18707 6.15945C7.33661 5.89028 7.56829 5.66663 7.99999 5.66663C8.55629 5.66663 8.75486 5.83368 8.84312 5.95725C8.9563 6.11569 8.99999 6.35569 8.99999 6.66663C8.99999 6.9776 8.82964 7.28234 8.47298 7.42017Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.33332 10.6666C7.33332 10.2985 7.63183 9.99996 7.99999 9.99996C8.36815 9.99996 8.66666 10.2985 8.66666 10.6666C8.66666 11.0348 8.36815 11.3333 7.99999 11.3333C7.63183 11.3333 7.33332 11.0348 7.33332 10.6666Z",fill:"currentColor"})]}))}))},17581:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{children:(0,a.jsx)("path",{d:"M5.06 3C4.63 3 4.22 3.14 3.84 3.42C3.46 3.7 3.24 4.06 3.14 4.5L2.11 8.91C1.86 10 2.06 10.92 2.69 11.73C2.81 11.85 2.93 11.97 3.04 12.07C3.63 12.64 4.28 13 5.22 13C6.16 13 6.91 12.59 7.47 12.05C8.1 12.67 8.86 13 9.8 13C10.64 13 11.44 12.63 12 12.07C12.68 12.7 13.45 13 14.3 13C15.17 13 15.91 12.67 16.54 12.05C17.11 12.62 17.86 13 18.81 13C19.76 13 20.43 12.65 21 12.06C21.09 11.97 21.18 11.87 21.28 11.77C21.94 10.95 22.14 10 21.89 8.91L20.86 4.5C20.73 4.06 20.5 3.7 20.13 3.42C19.77 3.14 19.38 3 18.94 3M18.89 4.97L19.97 9.38C20.06 9.81 19.97 10.2 19.69 10.55C19.44 10.86 19.13 11 18.75 11C18.44 11 18.17 10.9 17.95 10.66C17.73 10.43 17.61 10.16 17.58 9.84L16.97 5M5.06 5H7.03L6.42 9.84C6.3 10.63 5.91 11 5.25 11C4.84 11 4.53 10.86 4.31 10.55C4.03 10.2 3.94 9.81 4.03 9.38M9.05 5H11V9.7C11 10.05 10.89 10.35 10.64 10.62C10.39 10.88 10.08 11 9.7 11C9.36 11 9.07 10.88 8.84 10.59C8.61 10.3 8.5 10 8.5 9.66V9.5M13 5H14.95L15.5 9.5C15.58 9.92 15.5 10.27 15.21 10.57C14.95 10.87 14.61 11 14.2 11C13.89 11 13.61 10.88 13.36 10.62C13.11 10.35 13 10.05 13 9.7M3 14.03V19C3 20.11 3.89 21 5 21C9.67 21 14.33 21 19 21C20.1 21 21 20.11 21 19V14.05C20.45 14.63 19.75 14.96 19 15C18 15.03 17.25 14.74 16.54 14.05C15.94 14.65 15.14 15 14.3 15C13.4 15 12.6 14.64 12 14.07C11.43 14.64 10.65 15 9.78 15C8.87 15 8.07 14.65 7.47 14.05C6.89 14.64 6.1 15 5.23 15C4.33 15 3.66 14.65 3 14.03Z"})}))}))},30268:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.4509 4.08872C12.6781 4.24571 12.735 4.55714 12.578 4.78431L8.14508 11.1986L8.14507 11.1987C7.42761 12.2368 5.90028 12.2566 5.15616 11.2374L5.55998 10.9426L5.15616 11.2374L3.42953 8.87255C3.26669 8.64953 3.31549 8.33673 3.53851 8.17389C3.76153 8.01106 4.07433 8.05985 4.23717 8.28288L5.9638 10.6477C6.30202 11.111 6.99628 11.102 7.32242 10.6301C7.32242 10.6301 7.32242 10.6301 7.32242 10.6301L11.7554 4.21578C11.9123 3.98861 12.2238 3.93172 12.4509 4.08872Z",fill:"currentColor"})}))}))},75268:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.83337 9.33329C4.10952 9.33329 4.33337 9.55715 4.33337 9.83329V11.5C4.33337 11.9602 4.70646 12.3333 5.16671 12.3333H6.83337C7.10952 12.3333 7.33337 12.5572 7.33337 12.8333C7.33337 13.1094 7.10952 13.3333 6.83337 13.3333H5.16671C4.15419 13.3333 3.33337 12.5125 3.33337 11.5V9.83329C3.33337 9.55715 3.55723 9.33329 3.83337 9.33329Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 9.33329C13.7762 9.33329 14 9.55715 14 9.83329V11.5C14 12.5125 13.1792 13.3333 12.1667 13.3333H10.5C10.2239 13.3333 10 13.1094 10 12.8333C10 12.5572 10.2239 12.3333 10.5 12.3333H12.1667C12.627 12.3333 13 11.9602 13 11.5V9.83329C13 9.55715 13.2239 9.33329 13.5 9.33329Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 3.16663C10 2.89048 10.2239 2.66663 10.5 2.66663H12.1667C13.1793 2.66663 14 3.48744 14 4.49996V6.16663C14 6.44277 13.7762 6.66663 13.5 6.66663C13.2239 6.66663 13 6.44277 13 6.16663V4.49996C13 4.03972 12.627 3.66663 12.1667 3.66663H10.5C10.2239 3.66663 10 3.44277 10 3.16663Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.16671 3.66663C4.70647 3.66663 4.33337 4.03972 4.33337 4.49996V6.16663C4.33337 6.44277 4.10952 6.66663 3.83337 6.66663C3.55723 6.66663 3.33337 6.44277 3.33337 6.16663V4.49996C3.33337 3.48744 4.15418 2.66663 5.16671 2.66663H6.83337C7.10952 2.66663 7.33337 2.89048 7.33337 3.16663C7.33337 3.44277 7.10952 3.66663 6.83337 3.66663H5.16671Z",fill:"currentColor"})]}))}))},58758:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.1666 4C10.4427 4 10.6666 4.22386 10.6666 4.5V11.5C10.6666 11.7761 10.4427 12 10.1666 12C9.89044 12 9.66659 11.7761 9.66659 11.5V4.5C9.66659 4.22386 9.89044 4 10.1666 4Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.83325 4C6.10939 4 6.33325 4.22386 6.33325 4.5V11.5C6.33325 11.7761 6.10939 12 5.83325 12C5.55711 12 5.33325 11.7761 5.33325 11.5V4.5C5.33325 4.22386 5.55711 4 5.83325 4Z",fill:"currentColor"})]}))}))},14331:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.23713 3.40805C4.38454 3.31695 4.56861 3.30866 4.72361 3.38616L13.0569 7.55283C13.2263 7.63752 13.3333 7.81066 13.3333 8.00004C13.3333 8.18943 13.2263 8.36256 13.0569 8.44726L4.72361 12.6139C4.56861 12.6914 4.38454 12.6831 4.23713 12.592C4.08973 12.5009 4 12.34 4 12.1667V3.83337C4 3.66009 4.08973 3.49915 4.23713 3.40805ZM5 4.64239V11.3577L11.7153 8.00004L5 4.64239Z",fill:"currentColor"})}))}))},45658:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,a.jsx)("path",{d:"M16.6664 10C16.6664 9.19299 16.0114 8.53802 15.2044 8.53802C14.8067 8.53802 14.4559 8.69007 14.1986 8.94738C13.2044 8.23393 11.8243 7.76609 10.3038 7.70761L10.9705 4.5848L13.1342 5.04094C13.1576 5.59065 13.6138 6.0351 14.1752 6.0351C14.7483 6.0351 15.2161 5.56726 15.2161 4.99416C15.2161 4.42106 14.7483 3.95322 14.1752 3.95322C13.7658 3.95322 13.4149 4.18714 13.2512 4.53802L10.8301 4.0234C10.76 4.0117 10.6898 4.0234 10.6313 4.05849C10.5728 4.09358 10.5377 4.15205 10.5143 4.22223L9.7775 7.70761C8.22194 7.75439 6.83013 8.21053 5.82428 8.94738C5.56697 8.70176 5.2044 8.53802 4.81843 8.53802C4.01142 8.53802 3.35645 9.19299 3.35645 10C3.35645 10.5965 3.70732 11.0994 4.22194 11.3333C4.19855 11.4737 4.18685 11.6257 4.18685 11.7778C4.18685 14.0234 6.79504 15.8363 10.0231 15.8363C13.2512 15.8363 15.8594 14.0234 15.8594 11.7778C15.8594 11.6257 15.8477 11.4854 15.8243 11.345C16.3038 11.1111 16.6664 10.5965 16.6664 10ZM6.66639 11.0409C6.66639 10.4678 7.13422 10 7.70732 10C8.28042 10 8.74826 10.4678 8.74826 11.0409C8.74826 11.614 8.28042 12.0819 7.70732 12.0819C7.13422 12.0819 6.66639 11.614 6.66639 11.0409ZM12.4793 13.7895C11.7658 14.5029 10.4091 14.5497 10.0114 14.5497C9.61376 14.5497 8.24533 14.4912 7.54358 13.7895C7.43832 13.6842 7.43832 13.5088 7.54358 13.4035C7.64884 13.2983 7.82428 13.2983 7.92954 13.4035C8.37399 13.848 9.33305 14.0117 10.0231 14.0117C10.7132 14.0117 11.6605 13.848 12.1167 13.4035C12.2219 13.2983 12.3974 13.2983 12.5026 13.4035C12.5845 13.5205 12.5845 13.6842 12.4793 13.7895ZM12.2921 12.0819C11.719 12.0819 11.2512 11.614 11.2512 11.0409C11.2512 10.4678 11.719 10 12.2921 10C12.8652 10 13.3331 10.4678 13.3331 11.0409C13.3331 11.614 12.8652 12.0819 12.2921 12.0819Z",fill:"currentColor"})}))}))},44439:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,a.jsx)("path",{d:"M2.5 8C2.5 4.96499 4.97482 2.5 8.03379 2.5C10.1843 2.5 12.0485 3.7193 12.9644 5.50003H10.8667C10.5905 5.50003 10.3667 5.72389 10.3667 6.00003C10.3667 6.27618 10.5905 6.50003 10.8667 6.50003H13.8C13.9045 6.50003 14.0097 6.48365 14.1104 6.45029C14.2109 6.41697 14.3084 6.36618 14.3952 6.29674C14.4821 6.22721 14.5585 6.13865 14.6136 6.03239C14.6689 5.92548 14.7 5.80533 14.7 5.68003V2.8667C14.7 2.59056 14.4761 2.3667 14.2 2.3667C13.9239 2.3667 13.7 2.59056 13.7 2.8667V4.76132C12.5718 2.81196 10.4562 1.5 8.03379 1.5C4.42784 1.5 1.5 4.40741 1.5 8C1.5 11.5926 4.42784 14.5 8.03379 14.5C11.3074 14.5 14.0208 12.1042 14.4944 8.97482C14.5357 8.70178 14.3478 8.44695 14.0748 8.40563C13.8018 8.36431 13.5469 8.55215 13.5056 8.82518C13.1055 11.469 10.8096 13.5 8.03379 13.5C4.97482 13.5 2.5 11.035 2.5 8Z",fill:"currentColor"})}))}))},72662:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{},{children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.33334 3.66663C5.30829 3.66663 3.66667 5.30825 3.66667 7.33329C3.66667 9.35835 5.30829 11 7.33334 11C9.3584 11 11 9.35835 11 7.33329C11 5.30825 9.3584 3.66663 7.33334 3.66663ZM2.66667 7.33329C2.66667 4.75596 4.75601 2.66663 7.33334 2.66663C9.91068 2.66663 12 4.75596 12 7.33329C12 8.44185 11.6135 9.46012 10.9678 10.2607L13.1869 12.4797C13.3822 12.675 13.3822 12.9916 13.1869 13.1868C12.9916 13.3821 12.675 13.3821 12.4798 13.1868L10.2607 10.9678C9.46017 11.6134 8.4419 12 7.33334 12C4.75601 12 2.66667 9.91064 2.66667 7.33329Z",fill:"currentColor"})}))}))},83689:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.55532 5.61476C9.93868 5.95799 10.445 6.16671 11 6.16671C12.1967 6.16671 13.1667 5.19666 13.1667 4.00004C13.1667 2.80342 12.1967 1.83337 11 1.83337C9.80342 1.83337 8.83337 2.80342 8.83337 4.00004C8.83337 4.27671 8.88523 4.54126 8.97975 4.78451L6.18159 6.18359C5.84176 5.96209 5.43593 5.83337 5.00004 5.83337C3.80342 5.83337 2.83337 6.80342 2.83337 8.00004C2.83337 9.19666 3.80342 10.1667 5.00004 10.1667C5.5437 10.1667 6.0406 9.96647 6.421 9.63572L8.99411 11.1796C8.89049 11.4326 8.83337 11.7097 8.83337 12C8.83337 13.1967 9.80342 14.1667 11 14.1667C12.1967 14.1667 13.1667 13.1967 13.1667 12C13.1667 10.8034 12.1967 9.83337 11 9.83337C10.4564 9.83337 9.95947 10.0336 9.57907 10.3644L7.00597 8.82051C7.10959 8.56744 7.16671 8.29041 7.16671 8.00004C7.16671 7.61733 7.06748 7.25779 6.89335 6.94575L9.55532 5.61476ZM11 2.83337C10.3557 2.83337 9.83337 3.35571 9.83337 4.00004C9.83337 4.25845 9.91739 4.49723 10.0596 4.69057C10.0642 4.69642 10.0687 4.70238 10.073 4.70847C10.2862 4.98704 10.6221 5.16671 11 5.16671C11.6444 5.16671 12.1667 4.64437 12.1667 4.00004C12.1667 3.35571 11.6444 2.83337 11 2.83337ZM5.00004 6.83337C4.35571 6.83337 3.83337 7.35571 3.83337 8.00004C3.83337 8.64437 4.35571 9.16671 5.00004 9.16671C5.3788 9.16671 5.71541 8.98621 5.92854 8.70655C5.93198 8.70178 5.9355 8.69709 5.93909 8.69248C6.08214 8.4988 6.16671 8.2593 6.16671 8.00004C6.16671 7.35571 5.64437 6.83337 5.00004 6.83337ZM9.83337 12C9.83337 11.7407 9.91797 11.5012 10.0611 11.3075C10.0646 11.303 10.0681 11.2983 10.0714 11.2937C10.2846 11.0139 10.6212 10.8334 11 10.8334C11.6444 10.8334 12.1667 11.3557 12.1667 12C12.1667 12.6444 11.6444 13.1667 11 13.1667C10.3557 13.1667 9.83337 12.6444 9.83337 12Z",fill:"currentColor"})}))}))},44634:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.66663 4.49996C2.66663 3.48744 3.48744 2.66663 4.49996 2.66663H6.16663C6.44277 2.66663 6.66663 2.89048 6.66663 3.16663C6.66663 3.44277 6.44277 3.66663 6.16663 3.66663H4.49996C4.03972 3.66663 3.66663 4.03972 3.66663 4.49996V11.5C3.66663 11.9602 4.03972 12.3333 4.49996 12.3333H11.5C11.9602 12.3333 12.3333 11.9602 12.3333 11.5V9.83329C12.3333 9.55715 12.5572 9.33329 12.8333 9.33329C13.1094 9.33329 13.3333 9.55715 13.3333 9.83329V11.5C13.3333 12.5125 12.5125 13.3333 11.5 13.3333H4.49996C3.48744 13.3333 2.66663 12.5125 2.66663 11.5V4.49996Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.33329 3.16663C9.33329 2.89048 9.55715 2.66663 9.83329 2.66663H12.8333C13.1094 2.66663 13.3333 2.89048 13.3333 3.16663V6.16663C13.3333 6.44277 13.1094 6.66663 12.8333 6.66663C12.5572 6.66663 12.3333 6.44277 12.3333 6.16663V3.66663H9.83329C9.55715 3.66663 9.33329 3.44277 9.33329 3.16663Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.0202 2.97974C13.2154 3.175 13.2154 3.49158 13.0202 3.68685L8.18685 8.52018C7.99158 8.71544 7.675 8.71544 7.47974 8.52018C7.28448 8.32492 7.28448 8.00834 7.47974 7.81307L12.3131 2.97974C12.5083 2.78448 12.8249 2.78448 13.0202 2.97974Z",fill:"currentColor"})]}))}))},47956:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.01074 4.6875C6.99145 4.6875 5.35449 6.32446 5.35449 8.34375V15.6562C5.35449 17.6755 6.99146 19.3125 9.01074 19.3125H16.3232C18.3425 19.3125 19.9795 17.6755 19.9795 15.6562V8.34375C19.9795 6.32446 18.3425 4.6875 16.3232 4.6875H9.01074ZM3.66699 8.34375C3.66699 5.39248 6.05947 3 9.01074 3H16.3232C19.2745 3 21.667 5.39247 21.667 8.34375V15.6562C21.667 18.6075 19.2745 21 16.3232 21H9.01074C6.05946 21 3.66699 18.6075 3.66699 15.6562V8.34375Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.667 12C13.2883 12 13.792 12.5037 13.792 13.125V15.375C13.792 15.9963 13.2883 16.5 12.667 16.5C12.0457 16.5 11.542 15.9963 11.542 15.375V13.125C11.542 12.5037 12.0457 12 12.667 12Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M12.667 9.75C13.2883 9.75 13.792 9.24632 13.792 8.625C13.792 8.00368 13.2883 7.5 12.667 7.5C12.0457 7.5 11.542 8.00368 11.542 8.625C11.542 9.24632 12.0457 9.75 12.667 9.75Z",fill:"currentColor"})]}))}))},61804:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("path",{d:"M8.66668 8.00002C8.66668 8.36822 8.36821 8.66669 8.00001 8.66669C7.63181 8.66669 7.33334 8.36822 7.33334 8.00002C7.33334 7.63182 7.63181 7.33335 8.00001 7.33335C8.36821 7.33335 8.66668 7.63182 8.66668 8.00002Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M8.66668 5.33335C8.66668 5.70154 8.36821 6.00002 8.00001 6.00002C7.63181 6.00002 7.33334 5.70154 7.33334 5.33335C7.33334 4.96517 7.63181 4.66669 8.00001 4.66669C8.36821 4.66669 8.66668 4.96517 8.66668 5.33335Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M8.66668 10.6667C8.66668 11.0349 8.36821 11.3334 8.00001 11.3334C7.63181 11.3334 7.33334 11.0349 7.33334 10.6667C7.33334 10.2985 7.63181 10 8.00001 10C8.36821 10 8.66668 10.2985 8.66668 10.6667Z",fill:"currentColor"})]}))}))},44023:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"32",height:"32",viewBox:"0 0 32 32",children:(0,a.jsx)("path",{fill:"currentColor",d:"M16.708 0.027c1.745-0.027 3.48-0.011 5.213-0.027 0.105 2.041 0.839 4.12 2.333 5.563 1.491 1.479 3.6 2.156 5.652 2.385v5.369c-1.923-0.063-3.855-0.463-5.6-1.291-0.76-0.344-1.468-0.787-2.161-1.24-0.009 3.896 0.016 7.787-0.025 11.667-0.104 1.864-0.719 3.719-1.803 5.255-1.744 2.557-4.771 4.224-7.88 4.276-1.907 0.109-3.812-0.411-5.437-1.369-2.693-1.588-4.588-4.495-4.864-7.615-0.032-0.667-0.043-1.333-0.016-1.984 0.24-2.537 1.495-4.964 3.443-6.615 2.208-1.923 5.301-2.839 8.197-2.297 0.027 1.975-0.052 3.948-0.052 5.923-1.323-0.428-2.869-0.308-4.025 0.495-0.844 0.547-1.485 1.385-1.819 2.333-0.276 0.676-0.197 1.427-0.181 2.145 0.317 2.188 2.421 4.027 4.667 3.828 1.489-0.016 2.916-0.88 3.692-2.145 0.251-0.443 0.532-0.896 0.547-1.417 0.131-2.385 0.079-4.76 0.095-7.145 0.011-5.375-0.016-10.735 0.025-16.093z"})}))}))},53162:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.315 7.00282C17.7276 7.0387 18.0331 7.40232 17.9972 7.81498L17.156 17.4882C17.156 17.4882 17.156 17.4882 17.156 17.4882C17.0325 18.9093 15.8428 20 14.4164 20H9.58363C8.15721 20 6.96754 18.9094 6.84397 17.4883L6.00282 7.81497C5.96694 7.40232 6.27237 7.0387 6.68503 7.00282C7.09768 6.96694 7.4613 7.27237 7.49718 7.68503L8.33833 17.3583C8.3945 18.0042 8.93523 18.5 9.58363 18.5H14.4164C15.0648 18.5 15.6055 18.0042 15.6616 17.3584L16.5028 7.68502C16.5387 7.27237 16.9023 6.96693 17.315 7.00282Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.75 5.5C11.0596 5.5 10.5 6.05964 10.5 6.75V7.5C10.5 7.91421 10.1642 8.25 9.75 8.25C9.33579 8.25 9 7.91421 9 7.5V6.75C9 5.23122 10.2312 4 11.75 4H12.25C13.7688 4 15 5.23122 15 6.75V7.5C15 7.91421 14.6642 8.25 14.25 8.25C13.8358 8.25 13.5 7.91421 13.5 7.5V6.75C13.5 6.05964 12.9404 5.5 12.25 5.5H11.75Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.25 7.75C4.25 7.33579 4.58579 7 5 7H19C19.4142 7 19.75 7.33579 19.75 7.75C19.75 8.16421 19.4142 8.5 19 8.5H5C4.58579 8.5 4.25 8.16421 4.25 7.75Z",fill:"currentColor"})]}))}))},42839:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{children:(0,a.jsx)("path",{fill:"currentColor",d:"M22.46,6C21.69,6.35 20.86,6.58 20,6.69C20.88,6.16 21.56,5.32 21.88,4.31C21.05,4.81 20.13,5.16 19.16,5.36C18.37,4.5 17.26,4 16,4C13.65,4 11.73,5.92 11.73,8.29C11.73,8.63 11.77,8.96 11.84,9.27C8.28,9.09 5.11,7.38 3,4.79C2.63,5.42 2.42,6.16 2.42,6.94C2.42,8.43 3.17,9.75 4.33,10.5C3.62,10.5 2.96,10.3 2.38,10C2.38,10 2.38,10 2.38,10.03C2.38,12.11 3.86,13.85 5.82,14.24C5.46,14.34 5.08,14.39 4.69,14.39C4.42,14.39 4.15,14.36 3.89,14.31C4.43,16 6,17.26 7.89,17.29C6.43,18.45 4.58,19.13 2.56,19.13C2.22,19.13 1.88,19.11 1.54,19.07C3.44,20.29 5.7,21 8.12,21C16,21 20.33,14.46 20.33,8.79C20.33,8.6 20.33,8.42 20.32,8.23C21.16,7.63 21.88,6.87 22.46,6Z"})}))}))},49536:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"11",height:"12",viewBox:"0 0 11 12",style:{fill:"none"},children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 1.66663C4.07953 1.66663 3.33333 2.41282 3.33333 3.33329C3.33333 4.25377 4.07953 4.99996 5 4.99996C5.92048 4.99996 6.66667 4.25377 6.66667 3.33329C6.66667 2.41282 5.92048 1.66663 5 1.66663ZM2.33333 3.33329C2.33333 1.86053 3.52724 0.666626 5 0.666626C6.47276 0.666626 7.66667 1.86053 7.66667 3.33329C7.66667 4.80605 6.47276 5.99996 5 5.99996C3.52724 5.99996 2.33333 4.80605 2.33333 3.33329Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.16667 7.83329C2.6693 7.83329 1.58173 8.88923 1.0908 9.71832C0.998733 9.8738 1.02215 9.99692 1.10056 10.1007C1.1926 10.2224 1.38217 10.3333 1.63302 10.3333H5.16667C5.44281 10.3333 5.66667 10.5572 5.66667 10.8333C5.66667 11.1094 5.44281 11.3333 5.16667 11.3333H1.63302C1.09754 11.3333 0.600568 11.0976 0.302804 10.7036C-0.00859044 10.2917 -0.0782384 9.72992 0.230335 9.2088C0.901565 8.07522 2.3165 6.83329 5.16667 6.83329C5.44281 6.83329 5.66667 7.05715 5.66667 7.33329C5.66667 7.60944 5.44281 7.83329 5.16667 7.83329Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.1261 7.42795C10.3499 7.58963 10.4004 7.90217 10.2387 8.12604L8.07201 11.126C7.98157 11.2513 7.83834 11.3276 7.68398 11.333C7.52961 11.3383 7.38144 11.272 7.28256 11.1534L6.44922 10.1534C6.27244 9.94125 6.3011 9.62596 6.51324 9.44918C6.72538 9.2724 7.04066 9.30106 7.21744 9.5132L7.63844 10.0184L9.42799 7.54055C9.58967 7.31668 9.90222 7.26627 10.1261 7.42795Z",fill:"currentColor"})]}))}))},81730:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.50002 3.66663C4.03978 3.66663 3.66669 4.03972 3.66669 4.49996V11.5C3.66669 11.9602 4.03978 12.3333 4.50002 12.3333H11.5C11.9603 12.3333 12.3334 11.9602 12.3334 11.5V4.49996C12.3334 4.03972 11.9603 3.66663 11.5 3.66663H4.50002ZM2.66669 4.49996C2.66669 3.48744 3.4875 2.66663 4.50002 2.66663H11.5C12.5126 2.66663 13.3334 3.48744 13.3334 4.49996V11.5C13.3334 12.5125 12.5126 13.3333 11.5 13.3333H4.50002C3.4875 13.3333 2.66669 12.5125 2.66669 11.5V4.49996Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.25221 5.39902C6.40815 5.31004 6.59982 5.31149 6.75438 5.40283L10.4211 7.5695C10.5733 7.65945 10.6667 7.82313 10.6667 7.99996C10.6667 8.17679 10.5733 8.34046 10.4211 8.43042L6.75438 10.5971C6.59982 10.6884 6.40815 10.6899 6.25221 10.6009C6.09628 10.5119 6.00002 10.3462 6.00002 10.1666V5.83329C6.00002 5.65376 6.09628 5.488 6.25221 5.39902ZM7.00002 6.70952V9.2904L9.18385 7.99996L7.00002 6.70952Z",fill:"currentColor"})]}))}))},57588:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo(i.forwardRef((function(e,t){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,width:"24",height:"24",viewBox:"0 0 24 24",children:(0,a.jsxs)("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",fill:"none",children:[(0,a.jsx)("path",{d:"m19.25 12c0 1-1.75 6.25-7.25 6.25s-7.25-5.25-7.25-6.25 1.75-6.25 7.25-6.25 7.25 5.25 7.25 6.25z"}),(0,a.jsx)("circle",{cx:"12",cy:"12",r:"2.25"})]})}))})))},75779:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo(i.forwardRef((function(e,t){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,a.jsx)("path",{d:"M8.66705 5.5C8.9432 5.5 9.16705 5.72386 9.16705 6V8C9.16705 8.27614 8.9432 8.5 8.66705 8.5C8.39091 8.5 8.16705 8.27614 8.16705 8V6C8.16705 5.72386 8.39091 5.5 8.66705 5.5Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M8.66703 11.3333C9.03522 11.3333 9.3337 11.0349 9.3337 10.6667C9.3337 10.2985 9.03522 10 8.66703 10C8.29884 10 8.00037 10.2985 8.00037 10.6667C8.00037 11.0349 8.29884 11.3333 8.66703 11.3333Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5935 2.69047C9.80011 1.10352 7.53887 1.10307 6.74495 2.68977L2.39727 11.3787C1.68083 12.8106 2.71895 14.5 4.32135 14.5H13.0128C14.6148 14.5 15.6529 12.8112 14.9372 11.3795L10.5935 2.69047ZM7.63925 3.13725C8.06446 2.28742 9.27407 2.28762 9.69902 3.13762L14.0427 11.8266C14.4275 12.5964 13.8681 13.5 13.0128 13.5H4.32135C3.46577 13.5 2.90635 12.5961 3.29157 11.8262L7.63925 3.13725Z",fill:"currentColor"})]}))})))},44579:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,a.jsx)("path",{d:"M18.9789 5.31353C18.7628 4.51027 18.1295 3.87707 17.3264 3.66077C15.8591 3.25932 9.99001 3.25932 9.99001 3.25932C9.99001 3.25932 4.12113 3.25932 2.65388 3.64555C1.86619 3.86162 1.21742 4.51038 1.00136 5.31353C0.615234 6.78066 0.615234 9.8233 0.615234 9.8233C0.615234 9.8233 0.615234 12.8813 1.00136 14.3331C1.21765 15.1362 1.85074 15.7694 2.654 15.9857C4.13658 16.3873 9.99023 16.3873 9.99023 16.3873C9.99023 16.3873 15.8591 16.3873 17.3264 16.0011C18.1296 15.7849 18.7628 15.1517 18.9791 14.3485C19.3651 12.8813 19.3651 9.83875 19.3651 9.83875C19.3651 9.83875 19.3806 6.78066 18.9789 5.31353ZM8.12141 12.6342V7.01241L13.0019 9.8233L8.12141 12.6342Z",fill:"currentColor"})}))}))},87199:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.33332 3.66663C5.30828 3.66663 3.66666 5.30825 3.66666 7.33329C3.66666 9.35834 5.30828 11 7.33332 11C9.35837 11 11 9.35834 11 7.33329C11 5.30825 9.35837 3.66663 7.33332 3.66663ZM2.66666 7.33329C2.66666 4.75596 4.75599 2.66663 7.33332 2.66663C9.91065 2.66663 12 4.75596 12 7.33329C12 9.91062 9.91065 12 7.33332 12C4.75599 12 2.66666 9.91062 2.66666 7.33329Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.97977 9.97974C10.175 9.78448 10.4916 9.78448 10.6869 9.97974L13.1869 12.4797C13.3821 12.675 13.3821 12.9916 13.1869 13.1868C12.9916 13.3821 12.675 13.3821 12.4798 13.1868L9.97977 10.6868C9.78451 10.4916 9.78451 10.175 9.97977 9.97974Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.33332 5.33329C7.60947 5.33329 7.83332 5.55715 7.83332 5.83329V8.83329C7.83332 9.10944 7.60947 9.33329 7.33332 9.33329C7.05718 9.33329 6.83332 9.10944 6.83332 8.83329V5.83329C6.83332 5.55715 7.05718 5.33329 7.33332 5.33329Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33332 7.33329C5.33332 7.05715 5.55718 6.83329 5.83332 6.83329H8.83332C9.10947 6.83329 9.33332 7.05715 9.33332 7.33329C9.33332 7.60944 9.10947 7.83329 8.83332 7.83329H5.83332C5.55718 7.83329 5.33332 7.60944 5.33332 7.33329Z",fill:"currentColor"})]}))}))},1773:function(e,t,n){"use strict";n.d(t,{pi:function(){return I},vF:function(){return F}});var r=n(4942),i=n(1413),o=n(28381),a=n(69186),s=n(37477),l=n(44827),c=n(97865),u=n(6996),d=n(82954),p=n.n(d),f=n(36262),h=n(65111),g=n(61325),x=n(32484),m=n(86278),v=n(23198),b=n(51598),C=n(40243),j=n(24910),y=n(50057),Z=n.n(y),k=n(38501),w=n(2066),T=n(64207),S=n(19131),P=n(29343),E=Z()("electron"),I=function(e){var t=e.backgroundColor,n=(0,k.Z)();(0,w.C)({onChanged:n});var r=navigator.windowControlsOverlay;return E||r&&r.visible?(0,P.jsx)("div",{className:"title-bar-draggable-part",style:{height:38,backgroundColor:t,flexShrink:0}}):null},M=function(e){switch(e){case"small":return!1;case"medium":case"large":default:return"md";case"xlarge":return"lg"}},L={dialogContainer:{display:"flex",flexDirection:"column",flex:1,overflowY:"auto"},dialogContent:{overflowX:"hidden",paddingLeft:0,paddingRight:0},flexColumnBody:{display:"flex",flexDirection:"column"},flexBody:{display:"flex"},titleContainer:{textAlign:"left",overflowWrap:"anywhere"},fixedContentContainer:{paddingBottom:8},actionsContainer:{paddingTop:24,paddingBottom:0,paddingLeft:0,paddingRight:0},actionsContainerWithSecondaryActions:{display:"flex",justifyContent:"space-between"},minHeightForFullHeightModal:"calc(100% - 64px)",minHeightForSmallHeightModal:"min(100% - 64px, 350px)",minHeightForLargeHeightModal:"min(100% - 64px, 800px)"},A=(0,a.Z)({root:{"&::-webkit-scrollbar":{width:11},"&::-webkit-scrollbar-track":{background:"rgba(0, 0, 0, 0.04)",borderRadius:6},"&::-webkit-scrollbar-thumb":{border:"3px solid rgba(0, 0, 0, 0)",backgroundClip:"padding-box",borderRadius:6}}}),F=x.Z;t.ZP=function(e){var t=e.onApply,n=e.secondaryActions,d=e.dangerLevel,x=e.actions,y=e.open,Z=e.onRequestClose,k=e.maxWidth,w=e.minHeight,E=e.title,F=e.fixedContent,O=e.children,R=e.flexColumnBody,D=e.flexBody,_=e.fullHeight,B=e.id,N=e.cannotBeDismissed,U=e.exceptionallyStillAllowRenderingInstancesEditors,H=e.noMobileFullScreen,V=o.useContext(f.ZP),z=o.useContext(j.Z),W=V.values.backdropClickBehavior,G=(0,u.U)(),Y=G.windowSize,q=G.isMobile,X=x&&x.filter(Boolean).length>0||n&&n.filter(Boolean).length>0,K=q&&!H,J=function(e){return(0,a.Z)((function(t){if(!e)return{};var n="warning"===e?t.palette.warning:t.palette.error;return{paper:{"&:before":{content:'""',height:60,background:"repeating-linear-gradient(110deg, ".concat(n.dark,", ").concat(n.dark," 25px, ").concat(n.main," 25px, ").concat(n.main," 40px)")}}}}))()}(d),Q=A(),$=o.useMemo((function(){return(0,P.jsxs)(o.Fragment,{children:[n&&(0,P.jsx)(g.pJ,{noMargin:!0,children:n},"secondary-actions"),x&&(0,P.jsx)(g.pJ,{noMargin:!0,children:x},"actions")]})}),[x,n]),ee=R?L.flexColumnBody:D?L.flexBody:{},te={paddingTop:E?0:16,paddingBottom:X?0:24},ne=(0,i.Z)((0,i.Z)((0,i.Z)({},L.dialogContent),ee),te),re=(0,i.Z)((0,i.Z)({},L.dialogContainer),{},{margin:K?8:"".concat(16,"px ").concat(24,"px ").concat(24,"px ").concat(24,"px")}),ie=o.useCallback((function(e,n){if(!N)if("escapeKeyDown"===n)Z&&Z();else if("backdropClick"===n)if("cancel"===W)Z&&Z();else if("apply"===W)t?t():Z&&Z();else if("nothing"===W)return}),[Z,t,W,N]),oe=o.useCallback((function(e){if((0,h.W$)(e))return ie(e,"escapeKeyDown"),void e.stopPropagation();if(t&&(0,h.Fc)(e)){e.stopPropagation();var n=document.activeElement;n&&n.blur(),t()}}),[ie,t]),ae=(0,S.T)();return(0,P.jsxs)(s.Z,{classes:J,open:y,onClose:ie,fullWidth:!0,fullScreen:K,className:p()((0,r.Z)({"safe-area-aware-container":K},T.zL,U)),PaperProps:{id:B,style:(0,i.Z)({backgroundColor:z.dialog.backgroundColor,minHeight:_?L.minHeightForFullHeightModal:"lg"===w?L.minHeightForLargeHeightModal:"sm"===w?L.minHeightForSmallHeightModal:void 0},(0,S.E)(ae))},maxWidth:void 0!==k?k:M(Y),disableBackdropClick:!1,onKeyDown:oe,children:[K&&(0,P.jsx)(I,{backgroundColor:z.titlebar.backgroundColor}),(0,P.jsxs)("div",{style:re,children:[(0,P.jsx)("div",{style:(0,i.Z)((0,i.Z)({},L.titleContainer),{},{paddingBottom:E?16:0}),children:(0,P.jsxs)(C.x1,{noMargin:!0,justifyContent:"space-between",alignItems:"flex-start",children:[(0,P.jsx)(m.Z,{noMargin:!0,size:"section-title",children:E}),Z&&!N&&(0,P.jsx)(b.Z,{onClick:Z,size:"small",disabled:N,children:(0,P.jsx)(v.Z,{})})]})}),F&&(0,P.jsx)("div",{style:L.fixedContentContainer,children:F}),(0,P.jsx)(c.Z,{classes:Q,style:ne,children:O}),X&&(0,P.jsx)(l.Z,{style:(0,i.Z)((0,i.Z)({},L.actionsContainer),n?L.actionsContainerWithSecondaryActions:{}),children:$})]})]})}},24830:function(e,t,n){"use strict";n(28381);var r=n(36262),i=n(82936),o=n(2066),a=n(29343);t.Z=function(e){var t=e.identifier,n=e.kind,s=e.children;return(0,a.jsx)(r.ZP.Consumer,{children:function(e){var r=e.values,l=e.showAlertMessage;return!r.hiddenAlertMessages[t]&&(0,a.jsx)(i.Z,{kind:n,children:s,onHide:function(){o.ZP.showConfirmDialog("Are you sure you want to hide this hint? You won't see it again, unless you re-activate it from the preferences.")&&l(t,!1)}})}})}},43228:function(e,t,n){"use strict";n.d(t,{x:function(){return s}});var r=n(1413),i=(n(28381),n(17777)),o=(0,n(48409)._F)()?null:function(e){var t=e.durationInMs;try{window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(t)}catch(n){console.warn("Vibration API not supported:",n)}},a=n(29343),s=function(e,t){var n={canDrag:function(e,t){var n=t.getItem(),r=e.canDrag||null;return!r||r(n)},beginDrag:function(e){return o&&t&&t.vibrate&&o({durationInMs:t.vibrate}),e.beginDrag()},endDrag:function(e,t){e.endDrag&&e.endDrag()}};var s=(0,i.DragSource)(e,n,(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}))((0,i.DropTarget)(e,{canDrop:function(e,t){var n=t.getItem();return n&&e.canDrop(n)},drop:function(e,t){t.didDrop()||e.drop()},hover:function(e,t){e.hover&&e.hover(t)}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver({shallow:!0}),isOverLazy:t.isOver({shallow:!1}),canDrop:t.canDrop()}}))((function(e){return(0,e.children)({connectDragSource:e.connectDragSource,connectDropTarget:e.connectDropTarget,connectDragPreview:e.connectDragPreview,isDragging:e.isDragging,isOver:e.isOver,isOverLazy:e.isOverLazy,canDrop:e.canDrop})})));return function(e){return(0,a.jsx)(s,(0,r.Z)({},e))}}},62572:function(e,t,n){"use strict";n.d(t,{V:function(){return s}});n(28381);var r=n(43662),i=n(59863),o=n(29343),a={handle:{display:"flex",cursor:"move"},disabledHandle:{display:"flex",opacity:.4},handleColor:"#DDD"},s=function(e){return(0,o.jsx)("span",{style:e.disabled?a.disabledHandle:a.handle,children:(0,o.jsx)(r.Z,{htmlColor:e.color||a.handleColor})})},l=(0,i.SortableHandle)(s);t.Z=l},18624:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(28381),i=n(51598),o=n(23198),a=n(99855),s=n(29343),l={container:{padding:0,width:32,height:32},icon:{width:16,height:16}};function c(e){var t=r.useContext(a.DF).mosaicActions,n=r.useContext(a.Jy).mosaicWindowActions;return(0,s.jsx)(i.Z,{onClick:function(){t.remove(n.getPath())},style:l.container,children:(0,s.jsx)(o.Z,{htmlColor:"inherit",style:l.icon})})}},29459:function(e,t,n){"use strict";n.d(t,{Z:function(){return y},J:function(){return f}});var r=n(29439),i=n(1413),o=n(36600),a=n(28381),s=n(99855),l=n(18624),c=n(68009),u=(n(2367),n(82954)),d=n.n(u),p=n(29343),f=function e(t,n){return!!t&&(t===n||!!t.first&&e(t.first,n)||!!t.second&&e(t.second,n))},h=function e(t,n,r,o,a){if(!t)return n;if("string"!==typeof t){if("end"===r&&t.second&&"string"!==typeof t.second)return(0,i.Z)((0,i.Z)({},t),{},{second:e(t.second,n,r,o,a)});if("start"===r&&t.first&&"string"!==typeof t.first)return(0,i.Z)((0,i.Z)({},t),{},{first:e(t.first,n,r,o,a)})}return{direction:"row"===a?"column":"row",first:"end"===r?t:n,second:"end"===r?n:t,splitPercentage:o}},g=function e(t,n,r){return t?"string"===typeof t?t===n?r:t:t===n?r:(0,i.Z)((0,i.Z)({},t),{},{first:e(t.first,n,r),second:e(t.second,n,r)}):t},x=function e(t,n){if(t){if("string"===typeof t)return t===n?null:t;if(t===n)return null;var r=e(t.first,n),o=e(t.second,n);return r&&o?(0,i.Z)((0,i.Z)({},t),{},{first:r,second:o}):r||o}return t},m=function e(t,n,r){return t?"string"===typeof t?t:t.first===n?(0,i.Z)((0,i.Z)({},t),{},{splitPercentage:r}):t.second===n?(0,i.Z)((0,i.Z)({},t),{},{splitPercentage:100-r}):(0,i.Z)((0,i.Z)({},t),{},{first:e(t.first,n,r),second:e(t.second,n,r)}):t},v=function e(t,n){return t?"string"===typeof t?0:t.first===n?t.splitPercentage:t.second===n?100-t.splitPercentage:e(t.first,n)||e(t.second,n):0},b=[(0,p.jsx)(l.Z,{},"close")],C=function(e){return(0,p.jsxs)("div",{className:"mosaic-preview",children:[(0,p.jsx)("div",{className:"mosaic-window-toolbar",children:(0,p.jsx)("div",{className:"mosaic-window-title",children:e.title})}),(0,p.jsx)("div",{className:"mosaic-window-body"})]})},j=function(e){return(0,p.jsx)(s.h1,(0,i.Z)((0,i.Z)({},e),{},{toolbarControls:e.toolbarControls||b,renderPreview:C}))},y=a.forwardRef((function(e,t){var n=e.initialNodes,i=e.editors,l=e.limitToOneSecondaryEditor,u=e.onOpenedEditorsChanged,f=e.onPersistNodes,b=a.useState(n),C=(0,r.Z)(b,2),y=C[0],Z=C[1],k=a.useRef(new Map),w=a.useCallback((function(e,t,n,r){var o=i[e];if(!o)return!1;var a=(0,s.fY)(y);if(-1!==a.indexOf(e))return!1;if(l&&"secondary"===o.type){var c=a.find((function(e){return"secondary"===i[e].type}));if(c)return Z(g(y,c,e)),!0}return Z(h(y,e,t,n,r)),!0}),[y,i,l]);a.useImperativeHandle(t,(function(){return{getOpenedEditorNames:function(){return(0,s.fY)(y)},toggleEditor:function(e,t,n,r){return!!i[e]&&(-1!==(0,s.fY)(y).indexOf(e)?(Z(x(y,e)),!1):w(e,t,n,r))},collapseEditor:function(e){return!!i[e]&&(v(y,e)>0&&k.current.set(e,v(y,e)),Z(m(y,e,0)),!0)},uncollapseEditor:function(e,t){return!!i[e]&&(0===v(y,e)&&(Z(m(y,e,k.current.get(e)||t)),!0))}}}));var T=(0,c.N)((function(){f&&y&&f(y)}),2e3);return a.useEffect((function(){u&&u(),T()}),[y,u,T]),(0,p.jsx)(o.I18n,{children:function(e){var t=e.i18n;return(0,p.jsx)(s.wB,{className:d()({"mosaic-gd-theme":!0,"mosaic-blueprint-theme":!0,"avoid-soft-keyboard":!0}),renderTile:function(e,n){var r=i[e];return r?r.noTitleBar?r.renderEditor():(0,p.jsx)(j,{path:n,title:t._(r.title),toolbarControls:r.toolbarControls,children:r.renderEditor()}):(console.error("Trying to render un unknown editor: "+e),null)},value:y,onChange:Z,onRelease:Z})}})}))},86578:function(e,t,n){"use strict";var r=n(1413),i=(n(28381),n(1589)),o=n(29343),a={display:"flex",alignItems:"center",justifyContent:"center",flex:1,padding:10};t.Z=function(e){return(0,o.jsx)("div",{style:(0,r.Z)((0,r.Z)({},a),e.style),children:(0,o.jsx)(i.Z,{style:e.messageStyle,children:e.children})})}},68196:function(e,t,n){"use strict";n.d(t,{$:function(){return x}});var r=n(36600),i=(n(28381),n(89317)),o=n(61325),a=n(32484),s=n(67835),l=n(40243),c=n(4076),u=n(86278),d=n(36595),p=n(66789),f=n(1491),h=n(29343),g=function(e){var t=e.helpPagePath,n=e.helpPageAnchor;return(0,h.jsx)(c.Z,{label:(0,h.jsx)(r.Trans,{id:"Read the doc"}),helpPagePath:t,anchor:n})},x=function(e){return(0,h.jsx)(l.sg,{alignItems:"center",children:(0,h.jsx)(i.Z,{style:{maxWidth:"480px",whiteSpace:"normal"},children:(0,h.jsxs)(l.sg,{children:[(0,h.jsx)(u.Z,{size:"block-title",align:"center",children:e.title}),(0,h.jsx)(u.Z,{align:"center",noMargin:!0,children:e.description}),(0,h.jsx)(l.hS,{}),(0,h.jsxs)(o.ak,{alignItems:"center",noMargin:!0,children:[(0,h.jsxs)(o.ep,{noMargin:!0,children:[e.secondaryActionLabel&&e.onSecondaryAction&&(0,h.jsx)(s.Z,{label:e.secondaryActionLabel,primary:!0,onClick:e.onSecondaryAction,disabled:!!e.isLoading,leftIcon:e.secondaryActionIcon}),(0,h.jsx)(a.Z,{label:e.actionLabel,primary:!0,onClick:e.onAction,disabled:!!e.isLoading,icon:e.isLoading?(0,h.jsx)(p.Z,{size:24}):e.actionIcon?e.actionIcon:(0,h.jsx)(f.Z,{}),id:e.actionButtonId})]}),e.tutorialId?(0,h.jsx)(d.Z,{tutorialId:e.tutorialId,label:(0,h.jsx)(r.Trans,{id:"Watch tutorial"}),renderIfNotFound:(0,h.jsx)(g,{helpPagePath:e.helpPagePath,helpPageAnchor:e.helpPageAnchor})}):(0,h.jsx)(g,{helpPagePath:e.helpPagePath,helpPageAnchor:e.helpPageAnchor})]})]})})})}},61651:function(e,t,n){"use strict";n.d(t,{Ap:function(){return Z}});var r=n(1413),i=n(36600),o=n(28381),a=n(27734),s=n(52975),l=n(41332),c=n(18930),u=n(62800),d=n(86278),p=n(40243),f=n(52578),h=n(48409),g=n(61325),x=n(82936),m=n(1589),v=n(95016),b=n(51598),C=n(23198),j=n(29343),y={errorMessage:{maxWidth:600,textAlign:"left"}},Z=function(e){return e.startsWith("debugger")?{componentTitle:(0,j.jsx)(i.Trans,{id:"Debugger"}),scope:"debugger"}:e.startsWith("start page")?{componentTitle:(0,j.jsx)(i.Trans,{id:"Home page"}),scope:"start-page"}:e.startsWith("resources")?{componentTitle:(0,j.jsx)(i.Trans,{id:"Resources"}),scope:"resources"}:e.startsWith("events functions extension")?{componentTitle:(0,j.jsx)(i.Trans,{id:"Events functions extension"}),scope:"extension-editor"}:e.startsWith("layout events")?{componentTitle:(0,j.jsx)(i.Trans,{id:"Events"}),scope:"scene-events"}:e.startsWith("layout")?{componentTitle:(0,j.jsx)(i.Trans,{id:"Scene"}),scope:"scene-editor"}:e.startsWith("external layout")?{componentTitle:(0,j.jsx)(i.Trans,{id:"External layout"}),scope:"external-layout-editor"}:e.startsWith("external events")?{componentTitle:(0,j.jsx)(i.Trans,{id:"External events"}),scope:"external-events-editor"}:{componentTitle:(0,j.jsx)(i.Trans,{id:"Editor"}),scope:"editor"}},k=function(e){var t=e.componentStack,n=e.error,r=e.componentTitle,o=e.uniqueErrorId,a=e.onClose,u=e.showOnTop,f=n.stack&&n.stack.includes(".wasm");return(0,j.jsx)(l.Z,{showOnTop:u,children:(0,j.jsxs)(g.ak,{children:[(0,j.jsxs)(p.x1,{justifyContent:"space-between",alignItems:"center",noMargin:!0,children:[(0,j.jsxs)(p.x1,{children:[(0,j.jsx)(s.Z,{fontSize:"large"}),(0,j.jsx)(p.LZ,{}),(0,j.jsx)(d.Z,{size:"block-title",children:f?(0,j.jsx)(i.Trans,{id:"A critical error occurred in the {componentTitle}.",values:{componentTitle:r}}):(0,j.jsx)(i.Trans,{id:"An error occurred in the {componentTitle}.",values:{componentTitle:r}})})]}),a&&(0,j.jsx)(b.Z,{onClick:a,size:"small",children:(0,j.jsx)(C.Z,{})})]}),(0,j.jsx)(c.Z,{}),(0,j.jsx)(p.x1,{children:(0,j.jsxs)(g.ak,{children:[(0,j.jsx)(x.Z,{kind:f?"error":"warning",children:(0,j.jsx)(i.Trans,{id:"Please <0>backup your game file</0> and save your game to ensure that you don't lose anything. You can try to reload this panel or restart GDevelop.",components:[(0,j.jsx)("b",{})]})}),(0,j.jsxs)(m.Z,{children:["Error ID: ",o]}),n&&n.stack&&(0,j.jsxs)(m.Z,{style:y.errorMessage,children:[n.stack.slice(0,200),"..."]}),t&&(0,j.jsxs)(m.Z,{style:y.errorMessage,children:[t.slice(0,200),"..."]})]})})]})})};t.ZP=function(e){var t=o.useRef((0,v.DO)());return(0,j.jsx)(a.ZP,{FallbackComponent:function(n){return(0,j.jsx)(k,(0,r.Z)((0,r.Z)({},n),{},{componentTitle:e.componentTitle,uniqueErrorId:t.current,onClose:e.onClose,showOnTop:e.showOnTop}))},onError:function(n,r){t.current=(0,v.DO)(),function(e,t,n,r){console.error("Error ".concat(t," caught by Boundary:"),e,n),(0,u.pl)("Error caught by error boundary","error-boundary_".concat(r),{error:e,uniqueErrorId:t,errorMessage:e.message||"",errorStack:e.stack||"",errorName:e.name||"",IDEVersion:(0,f.r1)(),IDEVersionWithHash:(0,f.Us)(),arch:(0,h.bj)(),platformName:(0,h.y8)(),systemVersion:(0,h.eP)(),userAgent:(0,h.ij)(),componentStack:n},"error-boundary-error")}(n,t.current,r,e.scope)},children:e.children})}},85076:function(e,t,n){"use strict";n.d(t,{G:function(){return d}});var r=n(36600),i=n(50057),o=n.n(i),a=n(1773),s=n(86278),l=n(67835),c=n(29343),u=o()("electron"),d=function(e){var t=e.onClose;return u?null:(0,c.jsx)(a.ZP,{title:(0,c.jsx)(r.Trans,{id:"An external editor is opened."}),cannotBeDismissed:!0,noMobileFullScreen:!0,open:!0,maxWidth:"sm",id:"external-editor-opened-dialog",actions:t?[(0,c.jsx)(l.Z,{label:(0,c.jsx)(r.Trans,{id:"Cancel"}),onClick:t},"close")]:null,children:(0,c.jsx)(s.Z,{children:(0,c.jsx)(r.Trans,{id:"Save your changes or close the external editor to continue."})})})}},67835:function(e,t,n){"use strict";var r=n(1413),i=n(45987),o=n(28381),a=n(51535),s=n(40243),l=n(29343),c=["label","primary","leftIcon","rightIcon","keyboardFocused","disabled","id"],u=o.forwardRef((function(e,t){var n=e.label,o=e.primary,u=e.leftIcon,d=e.rightIcon,p=e.keyboardFocused,f=e.disabled,h=e.id,g=(0,i.Z)(e,c);return(0,l.jsxs)(a.Z,(0,r.Z)((0,r.Z)({variant:"outlined",size:"small",color:o?"secondary":"default",autoFocus:p,focusRipple:!0,disabled:f,id:h},g),{},{ref:t,children:[u,u&&n&&(0,l.jsx)(s.LZ,{}),n?(0,l.jsx)("span",{children:n}):null,d&&n&&(0,l.jsx)(s.LZ,{}),d]}))}));t.Z=u},9383:function(e,t,n){"use strict";n(28381);var r=n(54168),i=n(89267),o=n(51535),a=n(40243),s=n(25638),l=n(29343),c=function(){throw new Error("This FlatButtonWithSplitMenu onClick should never be called")},u={mainButton:{flex:1},arrowDropDownButton:{minWidth:30,paddingLeft:0,paddingRight:0}};t.Z=function(e){var t=e.id,n=e.buildMenuTemplate,d=e.onClick,p=e.label,f=e.primary,h=e.icon,g=e.disabled;return(0,l.jsxs)(i.Z,{variant:"outlined",disableElevation:!0,color:f?"secondary":"default",disabled:g,size:"small",style:e.style,children:[(0,l.jsxs)(o.Z,{id:t,focusRipple:true,onClick:d,style:u.mainButton,children:[h,!!h&&!!p&&(0,l.jsx)(a.LZ,{}),p]}),(0,l.jsx)(r.Z,{passExtraProps:!0,element:(0,l.jsx)(o.Z,{onClick:c,focusRipple:true,style:u.arrowDropDownButton,children:(0,l.jsx)(s.Z,{})}),buildMenuTemplate:n})]})}},86567:function(e,t,n){"use strict";n(28381);var r=n(29343);t.Z=function(e){var t=e.onSubmit,n=e.autoComplete,i=void 0===n?"off":n,o=e.name,a=e.children,s=e.fullWidth;return(0,r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t()},autoComplete:i,name:o,style:{width:s?"100%":void 0},children:[a,(0,r.jsx)("input",{type:"submit",value:"Submit",style:{display:"none"}})]})}},73298:function(e,t,n){"use strict";n.d(t,{y:function(){return o}});var r=n(59847),i=n.n(r),o=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{size:40}).size,n=i()(e.trim().toLowerCase());return"https://www.gravatar.com/avatar/".concat(n,"?s=").concat(t,"&d=retro")}},40243:function(e,t,n){"use strict";n.d(t,{LZ:function(){return c},XW:function(){return o},hS:function(){return d},sg:function(){return s},x1:function(){return a}});var r=n(28381),i=n(29343),o=8,a=function(e){return(0,i.jsx)("div",{id:e.id,style:{display:"flex",marginTop:e.noMargin?0:o,marginBottom:e.noMargin?0:o,alignItems:e.alignItems,justifyContent:e.justifyContent,flex:e.expand?1:void 0,overflow:e.overflow,minHeight:e.useFullHeight?"0":void 0,minWidth:0},children:e.children})},s=function(e){return(0,i.jsx)("div",{id:e.id,style:{display:"flex",marginLeft:e.noMargin?0:o,marginRight:e.noMargin?0:o,flexDirection:"column",alignItems:e.alignItems||"stretch",justifyContent:e.justifyContent,flex:e.expand?1:void 0,minHeight:e.useFullHeight?"0":void 0,minWidth:e.noOverflowParent?0:void 0},children:e.children})},l={width:o,height:o,flexShrink:0},c=r.memo((function(){return(0,i.jsx)("span",{style:l})})),u={width:24,height:24,flexShrink:0},d=r.memo((function(){return(0,i.jsx)("span",{style:u})}))},4076:function(e,t,n){"use strict";var r=n(36600),i=(n(28381),n(42699)),o=n(2066),a=n(39949),s=n(6996),l=n(14932),c=n(86065),u=n(29343);t.Z=function(e){var t=(0,s.U)().isMobile;if(!e.helpPagePath)return null;var n=(0,a.vA)(e.helpPagePath,e.anchor);if(!n)return null;return t?(0,u.jsx)(l.Z,{size:"small",helpPagePath:e.helpPagePath}):(0,u.jsx)(i.Z,{onClick:function(){e.helpPagePath&&o.ZP.openExternalURL(n)},target:"_blank",label:e.label||(0,u.jsx)(r.Trans,{id:"Help"}),icon:(0,u.jsx)(c.Z,{})})}},14932:function(e,t,n){"use strict";n(28381);var r=n(51598),i=n(39949),o=n(2066),a=n(86065),s=n(29343);t.Z=function(e){var t=e.helpPagePath;return t?(0,s.jsx)(r.Z,{onClick:function(){return o.ZP.openExternalURL((0,i.vA)(t))},disabled:e.disabled,style:e.style,size:e.size,children:(0,s.jsx)(a.Z,{})}):null}},74394:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(78118),a=n(29343);t.Z=i.memo((function(e){return(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"39",height:"40",viewBox:"0 0 39 40",fill:"none",children:[(0,a.jsx)("g",{clipPath:"url(#clip0_1247_1919)",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28.1834 11.5444C29.4891 13.0111 30.9423 14.6434 32.1787 16.7728C33.6421 19.3072 34.3534 21.8642 34.3534 24.5902C34.3534 32.8115 27.6921 39.4999 19.5045 39.4999C11.3229 39.4999 4.66546 32.8213 4.65579 24.6083C4.40282 16.364 9.39071 11.7033 9.60338 11.5088C10.3125 10.86 11.4569 11.3239 11.5144 12.2835C11.515 12.2929 11.6073 13.5928 12.2475 15.0609C12.7417 16.1942 13.4126 17.109 14.2519 17.7975C13.9973 15.1227 14.204 12.6567 14.8708 10.4423C15.567 8.13015 16.7594 6.09423 18.4149 4.39126C21.2255 1.5 24.3943 0.58175 24.5278 0.544044C25.3715 0.306007 26.1577 1.06811 25.9464 1.9191C25.9336 1.97196 24.6396 7.48513 27.9492 11.2812C28.0267 11.3684 28.1048 11.4561 28.1834 11.5444ZM15.3449 21.3693C14.3616 21.3693 13.5645 22.0701 13.5645 22.9345C13.5645 23.799 14.3616 24.4997 15.3449 24.4997C16.3282 24.4997 17.1253 23.7989 17.1253 22.9345C17.1253 22.0701 16.3282 21.3693 15.3449 21.3693ZM15.0224 34.1895C15.8655 34.6342 16.9593 34.3939 17.4651 33.6526L24.5869 23.2182C25.0928 22.477 24.8194 21.5155 23.9762 21.0708C23.1331 20.6261 22.0393 20.8664 21.5334 21.6077L14.4117 32.0421C13.9058 32.7833 14.1792 33.7448 15.0224 34.1895ZM21.8731 32.3256C21.8731 33.19 22.6703 33.8907 23.6536 33.8907C24.6369 33.8907 25.434 33.1901 25.434 32.3256C25.434 31.4612 24.6369 30.7604 23.6536 30.7604C22.6703 30.7604 21.8731 31.4612 21.8731 32.3256Z",fill:"url(#paint0_linear_1247_1919)"})}),(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"paint0_linear_1247_1919",x1:"19.4999",y1:"39.4999",x2:"19.4999",y2:"0.499943",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#100C0B"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#541400"})]}),(0,a.jsx)("clipPath",{id:"clip0_1247_1919",children:(0,a.jsx)("rect",{width:"39",height:"39",fill:"white",transform:"translate(0 0.5)"})})]})]}))}))},51598:function(e,t,n){"use strict";var r=n(1413),i=n(45987),o=n(28381),a=n(65512),s=n(3781),l=n(36600),c=n(67412),u=n(84361),d=n(24910),p=n(69186),f=n(29343),h=["selected","tooltip","acceleratorString","color","style"],g=(0,p.Z)({root:function(e){return e.color?{color:e.color}:void 0},label:function(e){return e.backgroundColor?{backgroundColor:e.backgroundColor,borderRadius:4}:void 0}}),x=o.forwardRef((function(e,t){var n=e.selected,p=e.tooltip,x=e.acceleratorString,m=e.color,v=e.style,b=(0,i.Z)(e,h),C=o.useContext(d.Z),j=g({color:n?C.iconButton.selectedColor:void 0,backgroundColor:n?C.iconButton.selectedBackgroundColor:void 0}),y=(0,f.jsx)(a.Z,(0,r.Z)((0,r.Z)({},b),{},{classes:j,style:v,color:n?"inherit":m||"secondary",ref:t}));return p&&!e.disabled?(0,f.jsx)(l.I18n,{children:function(e){var t=e.i18n;return(0,f.jsx)(s.ZP,{title:t._(p)+(x?" ("+(0,c.Q)(x)+")":""),placement:"bottom",enterDelay:u.K,children:y})}}):y}));t.Z=x},33133:function(e,t,n){"use strict";n.d(t,{b:function(){return a},q:function(){return l}});var r=n(1413),i=(n(28381),n(23818)),o=n(29343),a={background:"linear-gradient(45deg, #FFFFFF33, #FFFFFF)",borderRadius:4},s={iconBackground:{flex:0,display:"flex",justifyContent:"center"},icon:a},l=function(e){var t=e.src,n=e.alt,a=e.size,l=a>24?4:2;return(0,o.jsx)("div",{style:s.iconBackground,children:(0,o.jsx)(i.W,{style:(0,r.Z)((0,r.Z)({},s.icon),{},{padding:l,width:a-2*l,height:a-2*l}),src:t,alt:n})})}},73693:function(e,t,n){"use strict";n(28381);var r=n(69186),i=n(19345),o=n(62802),a=n(66733),s=n(7172),l=n(3781),c=n(29343),u=(0,r.Z)({root:{cursor:"default"}}),d=(0,r.Z)({root:{display:"block"}}),p=(0,r.Z)({root:{padding:3}});t.Z=function(e){var t=e.id,n=e.onCheck,r=e.disabled,f=e.checked,h=e.label,g=e.uncheckedIcon,x=e.checkedIcon,m=e.tooltipOrHelperText,v=e.paddingSize,b=u(),C=d(),j=p(),y=(0,c.jsx)(s.Z,{id:t,disabled:r,checked:f,onChange:n?function(e){return n(e,e.target.checked)}:void 0,classes:"small"===v?j:null,icon:g,checkedIcon:x,color:"secondary"});return h?(0,c.jsxs)(o.Z,{classes:C,children:[(0,c.jsx)(i.Z,{control:y,label:h,classes:b}),m&&(0,c.jsx)(a.Z,{children:m})]}):m&&!r?(0,c.jsx)(l.ZP,{title:m,children:y}):y}},65111:function(e,t,n){"use strict";n.d(t,{DM:function(){return l},Fc:function(){return s},W$:function(){return r},Zq:function(){return o},_x:function(){return a},bo:function(){return u},ph:function(){return i},xj:function(){return c}});var r=function(e){return"Escape"===e.key},i=function(e){return"Enter"===e.key&&!e.shiftKey},o=function(e){return e.shiftKey&&"Enter"===e.key},a=function(e){return"Enter"===e.key||" "===e.key},s=function(e){return(e.metaKey||e.ctrlKey)&&"Enter"===e.key},l=function(e){return e.metaKey||e.ctrlKey},c=function(e){return"Tab"===e.key&&!e.shiftKey},u=function(e){return"Tab"===e.key&&e.shiftKey}},86268:function(e,t,n){"use strict";n.d(t,{KR:function(){return s},ZP:function(){return l},rA:function(){return a}});var r=n(15671),i=n(43144),o=n(48409),a=5,s=1,l=function(){function e(t){var n=this,i=t.isActive,o=t.shortcutCallbacks;(0,r.Z)(this,e),this._shiftPressed=!1,this._ctrlPressed=!1,this._altPressed=!1,this._metaPressed=!1,this._mouseMidButtonPressed=!1,this._spacePressed=!1,this.resetModifiers=function(){n._metaPressed=!1,n._altPressed=!1,n._ctrlPressed=!1,n._shiftPressed=!1,n._setMouseMidButtonPressed(!1),n._setSpacePressed(!1)},this._updateModifiersFromEvent=function(e){var t=n._metaPressed!==e.metaKey||n._altPressed!==e.altKey||n._ctrlPressed!==e.ctrlKey||n._shiftPressed!==e.shiftKey;return n._metaPressed=e.metaKey,n._altPressed=e.altKey,n._ctrlPressed=e.ctrlKey,n._shiftPressed=e.shiftKey,t},this._updateSpecialKeysStatus=function(e,t){32===e.which&&(n._shortcutCallbacks.onToggleGrabbingTool&&(e.preventDefault(),e.stopPropagation()),n._setSpacePressed(t))},this._isControlOrCmdPressed=function(){return n._metaPressed||n._ctrlPressed},this.onMouseDown=function(e){e.button===s?n._setMouseMidButtonPressed(!0):n._setMouseMidButtonPressed(!1)},this.onMouseUp=function(e){e.button===s&&n._setMouseMidButtonPressed(!1)},this.onDragOver=function(e){n._updateModifiersFromEvent(e)},this.onKeyUp=function(e){n._updateModifiersFromEvent(e),n._updateSpecialKeysStatus(e,!1)},this.onKeyDown=function(e){if(n._updateModifiersFromEvent(e),!n._isActive||n._isActive()){if(!e.target||!e.target.closest('textarea, input, [contenteditable="true"]')){n._updateSpecialKeysStatus(e,!0);var t=n._shortcutCallbacks,r=t.onDelete,i=t.onMove,o=t.onCopy,a=t.onCut,s=t.onPaste,l=t.onDuplicate,c=t.onUndo,u=t.onRedo,d=t.onSearch,p=t.onZoomOut,f=t.onZoomIn,h=t.onEscape,g=t.onShift1,x=t.onShift2,m=t.onShift3,v=t.onRename;i&&(38===e.which?(e.preventDefault(),n._shiftPressed?i(0,-5):i(0,-1)):40===e.which?(e.preventDefault(),n._shiftPressed?i(0,5):i(0,1)):37===e.which?(e.preventDefault(),n._shiftPressed?i(-5,0):i(-1,0)):39===e.which&&(e.preventDefault(),n._shiftPressed?i(5,0):i(1,0))),!r||8!==e.which&&46!==e.which||(e.preventDefault(),r()),v&&113===e.which&&(e.preventDefault(),v()),o&&n._isControlOrCmdPressed()&&67===e.which&&(e.preventDefault(),o()),a&&n._isControlOrCmdPressed()&&88===e.which&&(e.preventDefault(),a()),s&&n._isControlOrCmdPressed()&&86===e.which&&(e.preventDefault(),s()),l&&n._isControlOrCmdPressed()&&68===e.which&&(e.preventDefault(),l()),(c||u)&&n._isControlOrCmdPressed()&&90===e.which&&(e.preventDefault(),e.shiftKey?u&&u():c&&c()),u&&n._isControlOrCmdPressed()&&89===e.which&&(e.preventDefault(),u()),d&&n._isControlOrCmdPressed()&&70===e.which&&(e.preventDefault(),d()),h&&27===e.which&&(e.preventDefault(),h()),p&&n._isControlOrCmdPressed()&&189===e.which&&(e.preventDefault(),p(e)),p&&109===e.which&&(e.preventDefault(),p(e)),f&&n._isControlOrCmdPressed()&&187===e.which&&(e.preventDefault(),f(e)),f&&107===e.which&&(e.preventDefault(),f(e)),g&&n._shiftPressed&&(49===e.which||97===e.which)&&(e.preventDefault(),g()),x&&n._shiftPressed&&(50===e.which||98===e.which)&&(e.preventDefault(),x()),m&&n._shiftPressed&&(51===e.which||99===e.which)&&(e.preventDefault(),m())}}},this._shortcutCallbacks=o,this._isActive=i}return(0,i.Z)(e,[{key:"setShortcutCallback",value:function(e,t){this._shortcutCallbacks[e]=t}},{key:"shouldCloneInstances",value:function(){return this._isControlOrCmdPressed()}},{key:"shouldMultiSelect",value:function(){return this._shiftPressed}},{key:"shouldFollowAxis",value:function(){return this._shiftPressed}},{key:"shouldStartRectangleSelectionInsteadOfSelecting",value:function(){return this._shiftPressed}},{key:"shouldNotSnapToGrid",value:function(){return this._altPressed}},{key:"shouldResizeProportionally",value:function(){return this._shiftPressed}},{key:"shouldScrollHorizontally",value:function(){return this._altPressed}},{key:"shouldMoveView",value:function(){return this._spacePressed||this._mouseMidButtonPressed}},{key:"_setSpacePressed",value:function(e){var t=this.shouldMoveView();this._spacePressed=e,this._callOnToggleGrabbingToolIfNeeded(t)}},{key:"_setMouseMidButtonPressed",value:function(e){var t=this.shouldMoveView();this._mouseMidButtonPressed=e,this._callOnToggleGrabbingToolIfNeeded(t)}},{key:"_callOnToggleGrabbingToolIfNeeded",value:function(e){var t=this.shouldMoveView();if(t!==e){var n=this._shortcutCallbacks.onToggleGrabbingTool;n&&n(t)}}},{key:"shouldZoom",value:function(e){return!(!e.ctrlKey&&!e.metaKey)||((0,o.z1)()?this._isControlOrCmdPressed():!this._isControlOrCmdPressed()&&!this._altPressed&&!this._shiftPressed)}},{key:"shouldIgnoreDoubleClick",value:function(){return this._metaPressed||this._altPressed||this._ctrlPressed||this._shiftPressed}}]),e}()},61325:function(e,t,n){"use strict";n.d(t,{ad:function(){return u},ak:function(){return f},ep:function(){return p},pJ:function(){return d}});var r=n(1413),i=n(28381),o=n(40243),a=n(6996),s=n(29343),l={flexShrink:0},c={filledTextFieldWithLabelRightButtonMargins:(0,r.Z)((0,r.Z)({},l),{},{marginTop:15,marginLeft:8}),filledTextFieldWithoutLabelRightButtonMargins:(0,r.Z)((0,r.Z)({},l),{},{marginTop:6,marginLeft:8}),standardTextFieldWithLabelRightButtonMargins:(0,r.Z)((0,r.Z)({},l),{},{marginTop:17,marginLeft:8}),standardTextFieldWithoutLabelRightButtonMargins:(0,r.Z)((0,r.Z)({},l),{},{marginTop:0,marginLeft:8})},u=function(e){var t=e.margin,n=e.noFloatingLabelText,r=e.renderTextField,i=e.renderButton;return(0,s.jsxs)(p,{alignItems:"flex-start",expand:!0,noMargin:!0,children:[r(),i("none"===t?n?c.standardTextFieldWithoutLabelRightButtonMargins:c.standardTextFieldWithLabelRightButtonMargins:n?c.filledTextFieldWithoutLabelRightButtonMargins:c.filledTextFieldWithLabelRightButtonMargins)]})},d=function(e){var t=e.id,n=e.alignItems,r=e.justifyContent,a=e.expand,l=e.noMargin,c=e.children,u=e.useLargeSpacer,d=e.overflow,p=!0;return(0,s.jsx)(o.x1,{id:t,alignItems:n,justifyContent:r,expand:a,noMargin:l,overflow:d,children:i.Children.map(c,(function(e,t){if(!e)return null;var n=!p;return p=!1,(0,s.jsxs)(i.Fragment,{children:[n&&(u?(0,s.jsx)(o.hS,{}):(0,s.jsx)(o.LZ,{})),e]})}))})},p=function(e){var t=e.id,n=e.alignItems,r=e.justifyContent,i=e.expand,o=e.noMargin,l=e.noColumnMargin,c=e.forceMobileLayout,u=e.noResponsiveLandscape,p=e.useLargeSpacer,h=e.children,g=(0,a.U)(),x=g.isMobile,m=g.isLandscape;return(c||x)&&!(u&&m)?(0,s.jsx)(f,{id:t,noMargin:o||l,expand:!0,useLargeSpacer:p,children:h}):(0,s.jsx)(d,{id:t,alignItems:n,justifyContent:r,expand:i,noMargin:o,useLargeSpacer:p,children:h})},f=function(e){var t=e.id,n=e.alignItems,r=e.justifyContent,a=e.expand,l=e.noMargin,c=e.children,u=e.noOverflowParent,d=e.useFullHeight,p=e.useLargeSpacer,f=!0;return(0,s.jsx)(o.sg,{id:t,alignItems:n,justifyContent:r,expand:a,noMargin:l,noOverflowParent:u,useFullHeight:d,children:i.Children.map(c,(function(e,t){if(!e)return null;var n=!f;return f=!1,(0,s.jsxs)(i.Fragment,{children:[n&&(p?(0,s.jsx)(o.hS,{}):(0,s.jsx)(o.LZ,{})),e]})}))})}},63854:function(e,t,n){"use strict";n(28381);var r=n(66789),i=n(29343),o={progress:{marginRight:8,verticalAlign:"middle"}};t.Z=function(e){var t=e.children,n=e.isLoading;return(0,i.jsxs)("span",{children:[n&&(0,i.jsx)(r.Z,{size:18,style:o.progress}),t]})}},64480:function(e,t,n){"use strict";var r=n(1413),i=(n(28381),n(63307)),o=n(29343);t.Z=function(e){return(0,o.jsx)(i.Z,{color:"secondary",style:(0,r.Z)({flex:1},e.style),variant:e.variant,value:e.value})}},96591:function(e,t,n){"use strict";var r=n(28381),i=n(38742),o=n(24910),a=n(69186),s=n(29343);t.Z=function(e){var t,n,l=r.useContext(o.Z),c=(t=l,n=!!e.disabled,(0,a.Z)({root:{color:t.link.color.default,textDecoration:"underline","&:hover":{color:n?void 0:t.link.color.hover,cursor:n?"default":"pointer"},"&:focus":{color:n?void 0:t.link.color.hover}}})());return(0,s.jsx)(i.Z,{color:"secondary",href:e.href,onClick:function(t){t.preventDefault(),e.disabled||e.onClick()},classes:c,children:e.children})}},52970:function(e,t,n){"use strict";n.d(t,{aV:function(){return A},HC:function(){return L},xD:function(){return P},Sv:function(){return E}});var r=n(1413),i=n(29439),o=n(28381),a=n(69186),s=n(67674),l=n(71944),c=n(33620),u=n(81666),d=n(99415),p=n(61701),f=n(65512),h=n(54168),g=n(3781),x=n(16792),m=n(39631),v=n(87622),b=n(61804),C=n(44634),j=n(29324),y=n(25638),Z=n(44439),k=n(78118),w=n(29343),T=o.memo((function(e){return(0,w.jsx)(k.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,w.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33331 8.16663C3.33331 7.89048 3.55717 7.66663 3.83331 7.66663H12.1666C12.4428 7.66663 12.6666 7.89048 12.6666 8.16663C12.6666 8.44277 12.4428 8.66663 12.1666 8.66663H3.83331C3.55717 8.66663 3.33331 8.44277 3.33331 8.16663Z",fill:"currentColor"})}))})),S=!0,P=32,E=29,I={listItemText:{margin:"1px 0",wordBreak:"break-word"},listWithGap:{display:"flex",alignItems:"flex-start",gap:10,flexDirection:"column"},noLeftPaddingListItem:{paddingLeft:0},dot:{height:10,width:10,marginLeft:10,borderRadius:5,flexShrink:0}},M=(0,a.Z)((function(e){return(0,s.Z)({root:{color:e.palette.text.secondary}})})),L=o.forwardRef((function(e,t){var n=o.useState(!!e.initiallyOpen),a=(0,i.Z)(n,2),s=a[0],k=a[1],P=o.useRef(null),E=M(),L=o.useCallback((function(){P.current&&P.current.open()}),[P]),A=(0,m.i)(L),F=function(){return e.displayReloadButton?(0,w.jsx)(p.Z,{children:(0,w.jsx)(g.ZP,{title:e.reloadButtonTooltip,children:(0,w.jsx)(f.Z,{size:"small",edge:"end","aria-label":"reload",onClick:e.onReload,children:(0,w.jsx)(Z.Z,{})})})}):e.buildMenuTemplate?e.displayMenuButton?(0,w.jsx)(p.Z,{children:(0,w.jsx)(h.Z,{ref:P,element:(0,w.jsx)(f.Z,{size:"small",edge:"end","aria-label":"menu",children:(0,w.jsx)(b.Z,{style:{color:e.rightIconColor}})}),buildMenuTemplate:e.buildMenuTemplate})}):(0,w.jsx)(h.Z,{ref:P,element:(0,w.jsx)("div",{}),buildMenuTemplate:e.buildMenuTemplate}):e.displayLinkButton?(0,w.jsx)(p.Z,{children:(0,w.jsx)(f.Z,{size:"small",edge:"end","aria-label":"open link",onClick:e.onOpenLink,children:(0,w.jsx)(C.Z,{style:{color:e.rightIconColor}})})}):e.displayRemoveButton?(0,w.jsx)(p.Z,{children:(0,w.jsx)(f.Z,{size:"small",edge:"end","aria-label":"remove",onClick:e.onRemove,children:(0,w.jsx)(T,{style:{color:e.rightIconColor}})})}):e.displayDot?(0,w.jsx)("span",{style:(0,r.Z)((0,r.Z)({},I.dot),{},{backgroundColor:e.dotColor})}):null},O=e.noPadding?I.noLeftPaddingListItem:void 0,R=e.renderNestedItems;if(R){var D=void 0===e.open?s:e.open,_=function(){k(!D),e.onClick&&e.onClick()};return(0,w.jsxs)(o.Fragment,{children:[(0,w.jsxs)(c.Z,(0,r.Z)((0,r.Z)({button:!e.disableButtonBehaviorForParentItem,dense:S,disableRipple:!0,onClick:_,disabled:e.disabled,style:(0,r.Z)((0,r.Z)({},O),e.style),ref:t,id:e.id},(0,x.Y)(e.data)),{},{children:[e.leftIcon&&(0,w.jsx)(u.Z,{children:e.leftIcon}),(0,w.jsx)(d.Z,{style:I.listItemText,primary:e.primaryText,secondary:e.secondaryText,className:e.disableAutoTranslate?"notranslate":""}),e.autoGenerateNestedIndicator?D?(0,w.jsx)(p.Z,{children:(0,w.jsx)(f.Z,{size:"small",edge:"end","aria-label":"collapse",onClick:_,children:(0,w.jsx)(j.Z,{})})}):(0,w.jsx)(p.Z,{children:(0,w.jsx)(f.Z,{size:"small",edge:"end","aria-label":"expand",onClick:_,children:(0,w.jsx)(y.Z,{})})}):null,F()]})),(0,w.jsx)(v.Z,{in:D,timeout:"auto",unmountOnExit:!0,children:(0,w.jsx)(l.Z,{component:"div",disablePadding:!0,style:(0,r.Z)({paddingLeft:16},e.nestedListStyle),dense:S,children:R()})})]})}return(0,w.jsxs)(c.Z,(0,r.Z)((0,r.Z)((0,r.Z)({button:!0,dense:S,disableRipple:!0,ContainerComponent:"div",onClick:e.onClick,onDoubleClick:e.onDoubleClick,disabled:e.disabled,selected:e.selected,style:(0,r.Z)((0,r.Z)({},O),e.style),onContextMenu:e.buildMenuTemplate?L:void 0},A),{},{alignItems:2===e.secondaryTextLines?"flex-start":void 0,ref:t,id:e.id},(0,x.Y)(e.data)),{},{children:[e.leftIcon&&(0,w.jsx)(u.Z,{classes:e.isGreyed?E:void 0,style:{marginTop:0},children:e.leftIcon}),(0,w.jsx)(d.Z,{classes:e.isGreyed?E:void 0,style:I.listItemText,primary:e.primaryText,secondary:e.secondaryText,secondaryTypographyProps:(0,r.Z)({variant:"body-small"===e.secondaryTextSize?"caption":"body1"},e.isGreyed?{color:"inherit"}:void 0),primaryTypographyProps:e.isGreyed?{color:"inherit"}:void 0,className:e.disableAutoTranslate?"notranslate":""}),F()]}))})),A=function(e){var t=(0,r.Z)({},e.style);return e.useGap&&(t=(0,r.Z)((0,r.Z)({},t),I.listWithGap)),(0,w.jsx)(l.Z,{style:t,dense:S,children:e.children})}},74044:function(e,t,n){"use strict";var r=n(28381),i=n(23818),o=n(24910),a=n(29343);function s(e){var t=r.useContext(o.Z),n=t.palette.type,s=e.src,l=e.tooltip,c=e.disabled,u=e.isGDevelopIcon,d=e.cssAnimation,p=e.useExactIconSize,f=void 0!==e.iconWidth?e.iconWidth:e.iconSize,h=void 0!==e.iconHeight?e.iconHeight:e.iconSize,g=f>40?16:0,x=s.startsWith("data:image/svg+xml")||s.includes("_black"),m=void 0;"dark"===n&&x?m="grayscale(1) invert(1)":u&&!x&&(m=c?"grayscale(100%)":t.gdevelopIconsCSSFilter);var v={maxWidth:p?void 0:f,maxHeight:p?void 0:h,width:p?f:void 0,height:p?h:void 0,verticalAlign:"middle",animation:d,filter:m};return(0,a.jsx)("div",{style:{width:f,height:h,lineHeight:"".concat(h,"px"),textAlign:"center",paddingRight:g},children:u?(0,a.jsx)("img",{title:l,alt:l,src:s,style:v}):(0,a.jsx)(i.W,{title:l,alt:l,src:s,style:v})})}var l=r.memo(s);t.Z=l},73818:function(e,t,n){"use strict";var r=n(1413),i=n(74165),o=n(15861),a=n(29439),s=n(36600),l=n(28381),c=n(29277),u=n(50057),d=n.n(u),p=n(67835),f=n(29343),h=d()("electron"),g=d()("@electron/remote"),x=g?g.dialog:null,m={container:{position:"relative",display:"flex",alignItems:"baseline"},button:{marginLeft:10},textField:{flex:1}};t.Z=function(e){var t=e.type,n=e.value,u=e.onChange,d=e.defaultPath,v=e.fullWidth,b=l.useState(n),C=(0,a.Z)(b,2),j=C[0],y=C[1],Z=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,o,a,s,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.title,r=t.message,x&&h){e.next=3;break}return e.abrupt("return");case 3:return o=g.getCurrentWindow(),e.next=6,x.showOpenDialog(o,{title:n,properties:["openDirectory","createDirectory"],message:r,defaultPath:d});case 6:if(a=e.sent,(s=a.filePaths)&&s.length){e.next=10;break}return e.abrupt("return");case 10:l=s[0],u(l),y(l);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){u(j)};return(0,f.jsx)(s.I18n,{children:function(e){var n=function(e){return"export"===t?{title:e._({id:"Choose an export folder"}),message:e._({id:"Choose where to export the game"})}:"default-workspace"===t?{title:e._({id:"Choose a workspace folder"}),message:e._({id:"Choose where to create your projects"})}:{title:e._({id:"Choose a folder for the new game"}),message:e._({id:"Choose where to create the game"})}}(e.i18n);return(0,f.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},m.container),{},{width:v?"100%":void 0}),children:[(0,f.jsx)(c.ZP,{margin:"dense",style:m.textField,type:"text",hintText:n.title,value:j,onChange:function(e,t){return y(t)},onBlur:k}),(0,f.jsx)(p.Z,{label:(0,f.jsx)(s.Trans,{id:"Choose folder"}),style:m.button,onClick:function(){return Z(n)}})]})}})}},32832:function(e,t,n){"use strict";n.d(t,{r:function(){return h}});var r=n(1413),i=n(45987),o=n(28381),a=n(15092),s=n(62407),l=n(36600),c=n(82954),u=n.n(c),d=n(2066),p=n(29343),f=["node"],h=function(e){var t=o.useMemo((function(){return t=e.isStandaloneText||!1,n=e.allowParagraphs||!1,{a:function(e){return e.href?(0,p.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",onClick:function(t){t.preventDefault(),d.ZP.openExternalURL(e.href)},children:e.children}):e.children},p:function(e){return t||n?(0,p.jsx)("p",{children:e.children}):e.children},img:function(e){e.node;var t=(0,i.Z)(e,f);return(0,p.jsx)("img",(0,r.Z)({style:{display:"flex"}},t))}};var t,n}),[e.isStandaloneText,e.allowParagraphs]),n=(0,p.jsx)(l.I18n,{children:function(n){var r=n.i18n;return(0,p.jsx)(a.D,{components:t,remarkPlugins:[s.Z],children:e.translatableSource?r._(e.translatableSource):e.source})}}),c=u()({"gd-markdown":!0,"standalone-text-container":e.isStandaloneText});return e.isStandaloneText?(0,p.jsx)("div",{className:c,children:n}):(0,p.jsx)("span",{className:c,children:n})}},64207:function(e,t,n){"use strict";n.d(t,{BI:function(){return r},EU:function(){return o},NL:function(){return s},Rz:function(){return l},h$:function(){return u},le:function(){return c},yP:function(){return a},zL:function(){return i}});var r=1501,i="allow-rendering-instances",o=function(){var e=document.querySelector('body > div[role="presentation"].MuiDialog-root');return!!e&&!e.classList.contains(i)},a=function(e,t){return!("DIV"!==e.tagName||"presentation"!==e.getAttribute("role"))&&(!(!t||!t.isVisible)&&!e.getAttribute("aria-hidden"))},s=function(e){var t=e.attributes.getNamedItem("type");return t&&"checkbox"===t.value&&"indeterminate"in e.dataset},l=function(e){var t=e.parentElement;if(t){var n=t.parentElement;return!!n&&n.classList.contains("Mui-checked")}return!0},c=function(e){try{return a(e[e.length-5],{isVisible:!0})}catch(t){return console.error("An error occurred when determining if path ".concat(e&&e.join?e.join(" > "):"[not serializable]"," leads to a dialog"),t),!1}},u=function(e){return e.classList.contains("MuiInputBase-root")}},32628:function(e,t,n){"use strict";n.d(t,{Z:function(){return R}});var r=n(1413),i=n(29439),o=n(28381),a=n(36600),s=n(48556),l=n(89765),c=n(15671),u=n(43144),d=n(50057),p=n.n(d),f=p()("electron"),h=p()("@electron/remote"),g=function(){function e(){(0,c.Z)(this,e)}return(0,u.Z)(e,[{key:"buildFromTemplate",value:function(e){this.menuTemplate=e}},{key:"showMenu",value:function(e){if(f){var t=h.Menu,n=h.getCurrentWindow();this.menu=t.buildFromTemplate(this.menuTemplate),this.menu.popup({window:n,x:Math.round(e.left),y:Math.round(e.top+e.height),async:!0})}}},{key:"getMenuProps",value:function(){return{open:!1}}}]),e}(),x=n(74165),m=n(15861),v=n(58369),b=n(59239),C=n(67413),j=n(81666),y=n(99415),Z=n(18930),k=n(17358),w=n(67412),T=n(84900),S=n(29343),P=(0,k.Z)({backdropRootForMouse:{pointerEvents:"none"}}),E={divider:{marginLeft:16,marginRight:16},labelWithAccelerator:{width:"100%",display:"flex",justifyContent:"space-between"},accelerator:{opacity:.65,marginLeft:16},menuItemWithSubMenu:{height:32,justifyContent:"space-between"},menuItem:{height:32,paddingLeft:16,paddingRight:16}},I=function(e){var t=e.item,n=e.buildFromTemplate,r=P(),a=o.useState(null),c=(0,i.Z)(a,2),u=c[0],d=c[1],p=o.useRef(!1),f=o.useState(null),h=(0,i.Z)(f,2),g=h[0],x=h[1];function m(){x(null)}function b(e){"mouse"===e.pointerType&&(p.current=!1,setTimeout((function(){p.current||m()}),75))}return(0,S.jsxs)(o.Fragment,{children:[(0,S.jsxs)(v.Z,{dense:!0,style:E.menuItemWithSubMenu,disabled:!1===t.enabled,onClick:function(e){!1!==t.enabled&&(g||x(e.currentTarget))},onPointerOver:function(e){!1!==t.enabled&&(d("mouse"===e.pointerType?"mouse":"other"),"mouse"===e.pointerType&&(g||x(e.currentTarget)))},onPointerLeave:b,children:[t.label,(0,S.jsx)(T.Z,{})]},t.label),(0,S.jsx)(s.Z,{open:!!g,anchorEl:g,onClose:m,TransitionComponent:l.Z,MenuListProps:{onPointerEnter:function(){p.current=!0},onPointerLeave:b,style:{pointerEvents:"auto"}},getContentAnchorEl:null,anchorOrigin:{horizontal:"right",vertical:"top"},PopoverClasses:{root:"mouse"===u?r.backdropRootForMouse:void 0},children:n(t.submenu)})]})},M=function(){function e(t){var n=t.onClose;(0,c.Z)(this,e),this._onClose=n}return(0,u.Z)(e,[{key:"buildFromTemplate",value:function(e,t){var n=this;return e.map((function(e,r){if(!1===e.visible)return null;var i=e.accelerator?(0,w.Q)(e.accelerator):void 0;return"separator"===e.type?(0,S.jsx)(Z.Z,{style:E.divider},"separator"+r):"checkbox"===e.type?(0,S.jsxs)(v.Z,{dense:!0,checked:e.checked,disabled:!1===e.enabled,onClick:function(){var r=(0,m.Z)((0,x.Z)().mark((function r(i){return(0,x.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i.stopPropagation(),!1!==e.enabled){r.next=3;break}return r.abrupt("return");case 3:if(!e.click){r.next=9;break}return r.next=6,e.click();case 6:if("checkbox"!==e.type){r.next=9;break}return t&&t(),r.abrupt("return");case 9:n._onClose();case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),style:E.menuItem,children:[(0,S.jsx)(j.Z,{children:e.checked?(0,S.jsx)(b.Z,{fontSize:"small"}):(0,S.jsx)(C.Z,{fontSize:"small"})}),(0,S.jsx)(y.Z,{primary:e.label})]},"checkbox"+e.label):e.submenu?(0,S.jsx)(I,{item:e,buildFromTemplate:function(e){return n.buildFromTemplate(e,t)}},"submenu"+e.label):(0,S.jsx)(v.Z,{dense:!0,disabled:!1===e.enabled,onClick:function(t){t.stopPropagation(),!1!==e.enabled&&e.click&&(e.click(),n._onClose())},style:E.menuItem,children:i?(0,S.jsxs)("div",{style:E.labelWithAccelerator,children:[(0,S.jsx)("span",{children:e.label}),(0,S.jsx)("span",{style:E.accelerator,children:i})]}):e.label},"item"+e.label)})).filter(Boolean)}},{key:"showMenu",value:function(){}},{key:"getMenuProps",value:function(){return{}}}]),e}(),L=n(38501),A=p()("electron"),F=o.forwardRef((function(e,t){var n=o.useState([0,0]),c=(0,i.Z)(n,2),u=c[0],d=c[1],p=o.useState(!1),f=(0,i.Z)(p,2),h=f[0],g=f[1],x=o.useState({}),m=(0,i.Z)(x,2),v=m[0],b=m[1],C=(0,L.Z)(),j=new M({onClose:function(){return g(!1)}}),y=function(e,t,n){d([e,t]),b(n),g(!0)};return o.useImperativeHandle(t,(function(){return{open:y}})),h?(0,S.jsx)(a.I18n,{children:function(t){var n=t.i18n;return(0,S.jsx)(s.Z,(0,r.Z)((0,r.Z)({open:!0,anchorPosition:{left:u[0],top:u[1]},anchorReference:"anchorPosition",onClose:function(e,t){"backdropClick"===t&&e.stopPropagation(),g(!1)},TransitionComponent:l.Z},j.getMenuProps()),{},{children:j.buildFromTemplate(e.buildMenuTemplate(n,v),C)}))}}):null})),O=o.forwardRef((function(e,t){var n=new g,r=function(t,r,i){n.buildFromTemplate(e.buildMenuTemplate(e.i18n,i)),n.showMenu({left:t||0,top:r||0,width:0,height:0})};return o.useImperativeHandle(t,(function(){return{open:r}})),null})),R=A?o.forwardRef((function(e,t){var n=o.useRef(null);return o.useImperativeHandle(t,(function(){return{open:function(e,t,r){n.current&&n.current.open(e,t,r)}}})),(0,S.jsx)(a.I18n,{children:function(t){var i=t.i18n;return(0,S.jsx)(O,(0,r.Z)((0,r.Z)({},e),{},{i18n:i,ref:n}))}})})):F},54168:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(1413),i=n(45987),o=n(15671),a=n(43144),s=n(97326),l=n(60136),c=n(29388),u=n(28381),d=n(1412),p=n(32628),f=n(29343),h=["element","buildMenuTemplate","openMenuWithSecondaryClick","passExtraProps"],g=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,o.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).open=function(t){t&&t.stopPropagation&&t.stopPropagation();var n=(0,s.Z)(e)._contextMenu;if(n){var r=d.findDOMNode(e._wrappedElement);if(r instanceof HTMLElement){var i=r.getBoundingClientRect();n.open(Math.round(i.left+i.width/2),Math.round(i.top+i.height))}}},e}return(0,a.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.element,o=t.buildMenuTemplate,a=t.openMenuWithSecondaryClick,s=t.passExtraProps,l=(0,i.Z)(t,h);return(0,f.jsxs)(u.Fragment,{children:[u.cloneElement(n,(0,r.Z)((0,r.Z)({onContextMenu:this.open},a?{}:{onClick:this.open}),{},{ref:function(t){return e._wrappedElement=t}},s?l:{})),(0,f.jsx)(p.Z,{ref:function(t){return e._contextMenu=t},buildMenuTemplate:o})]})}}]),n}(u.Component)},22537:function(e,t,n){"use strict";var r=n(28381),i=n(51535),o=n(53385),a=n(35213),s=n(24910),l=n(29343);t.Z=function(e){var t=e.visible,n=e.touchScreenMessage,c=e.message,u=e.hide,d=e.actionLabel,p=e.onActionClick,f=e.duration,h=void 0===f?3e3:f,g=r.useContext(s.Z),x=(0,a.BF)();return r.useEffect((function(){if(t){var e=setTimeout((function(){u()}),h);return function(){return clearTimeout(e)}}}),[t,u,h]),(0,l.jsx)(o.Z,{open:t,message:"touch"===x&&n?n:c,action:d&&p?(0,l.jsx)(i.Z,{color:"light"===g.palette.type?"secondary":"primary",size:"small",onClick:p,children:d}):null})}},94854:function(e,t,n){"use strict";n.d(t,{c:function(){return c}});var r=n(1413),i=(n(28381),n(86278)),o=n(29343),a={display:"flex",alignItems:"center",paddingLeft:8,paddingRight:8},s={marginRight:4},l={marginLeft:4,marginRight:4},c=function(e){var t=e.children,n=e.firstChild;return(0,o.jsx)(i.Z,{noShrink:!0,style:n?s:l,children:t})};t.Z=function(e){var t=e.justifyContent,n=e.children,i=e.noPadding;return(0,o.jsx)("div",{style:(0,r.Z)((0,r.Z)((0,r.Z)({},a),i?{padding:0}:{}),{},{height:32,justifyContent:t}),children:n})}},19131:function(e,t,n){"use strict";n.d(t,{E:function(){return i},T:function(){return r}});var r=function(){return 0},i=function(e){return{transform:"translateY(0px)",transition:"transform 0.2s linear",willChange:"transform"}}},20914:function(e,t,n){"use strict";n.d(t,{d:function(){return l}});var r=n(1413),i=n(28381),o=n(32694),a=n(24910),s=n(29343),l=function(e,t){return"dark"===t?e.paper.backgroundColor.dark:"medium"===t?e.paper.backgroundColor.medium:e.paper.backgroundColor.light};t.Z=function(e){var t=e.id,n=e.children,c=e.background,u=e.elevation,d=e.variant,p=e.style,f=e.square,h=i.useContext(a.Z),g=l(h,c);return(0,s.jsx)(o.Z,{id:t,variant:d,elevation:u||0,style:(0,r.Z)({backgroundColor:g},p),square:!!f,children:n})}},75383:function(e,t,n){"use strict";var r=n(36600),i=(n(28381),n(40243)),o=n(32484),a=n(86578),s=n(61325),l=n(29343);t.Z=function(e){var t=e.onRetry,n=e.children;return(0,l.jsx)(i.sg,{expand:!0,alignItems:"center",justifyContent:"center",children:(0,l.jsx)(i.x1,{noMargin:!0,children:(0,l.jsxs)(s.ak,{noMargin:!0,alignItems:"center",children:[(0,l.jsx)(a.Z,{children:n}),(0,l.jsx)(i.x1,{noMargin:!0,children:t&&(0,l.jsx)(o.Z,{primary:!0,label:(0,l.jsx)(r.Trans,{id:"Retry"}),onClick:t})})]})})})}},78081:function(e,t,n){"use strict";var r=n(1413),i=(n(28381),n(66789)),o=n(29343),a={display:"flex",alignItems:"center",justifyContent:"center",flex:1,padding:10};t.Z=function(e){return(0,o.jsx)("div",{style:(0,r.Z)((0,r.Z)({},a),e.style),children:(0,o.jsx)(i.Z,{size:40})})}},41332:function(e,t,n){"use strict";n(28381);var r=n(20914),i=n(29343);t.Z=function(e){return(0,i.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:e.showOnTop?9999:void 0},children:(0,i.jsx)(r.Z,{elevation:3,style:{padding:10,width:"100%",maxWidth:600},background:"dark",children:e.children})})}},94553:function(e,t,n){"use strict";var r=n(28381),i=n(20715),o=n(24910),a=n(29343),s={qrCodeContainer:{imageRendering:"pixelated"}};t.Z=function(e){var t=e.url,n=e.size,l=void 0===n?128:n,c=r.useContext(o.Z),u=r.useRef(null);return r.useEffect((function(){var e=u.current;if(e)return i.Z.render({text:t,radius:0,ecLevel:"L",fill:c.palette.secondary,background:null,size:l},e),function(){e.firstChild&&e.removeChild(e.firstChild)}}),[t,l,c]),(0,a.jsx)("div",{ref:u,style:s.qrCodeContainer})}},32484:function(e,t,n){"use strict";var r=n(1413),i=n(45987),o=n(28381),a=n(51535),s=n(40243),l=n(29343),c=["label","primary","icon","disabled","keyboardFocused","style"],u=o.forwardRef((function(e,t){var n=e.label,o=e.primary,u=e.icon,d=e.disabled,p=e.keyboardFocused,f=e.style,h=(0,i.Z)(e,c);return(0,l.jsxs)(a.Z,(0,r.Z)((0,r.Z)({variant:"contained",size:"small",disableElevation:!0,color:o?"primary":"default",autoFocus:p,focusRipple:!0,disabled:d,style:f||!n?(0,r.Z)({minWidth:n?void 0:0},f):void 0},h),{},{ref:t,children:[u,!!u&&!!n&&(0,l.jsx)(s.LZ,{}),n?(0,l.jsx)("span",{children:n}):null]}))}));t.Z=u},57244:function(e,t,n){"use strict";n(28381);var r=n(54168),i=n(89267),o=n(51535),a=n(40243),s=n(25638),l=n(29343),c=function(){throw new Error("This RaisedButtonWithSplitMenu onClick should never be called")},u={mainButton:{flex:1},arrowDropDownButton:{minWidth:30,paddingLeft:0,paddingRight:0}};t.Z=function(e){var t=e.id,n=e.buildMenuTemplate,d=e.onClick,p=e.label,f=e.icon,h=e.disabled;return(0,l.jsxs)(i.Z,{variant:"contained",disableElevation:!0,color:"primary",disabled:h,size:"small",style:e.style,children:[(0,l.jsxs)(o.Z,{id:t,focusRipple:true,onClick:d,style:u.mainButton,children:[f,!!f&&!!p&&(0,l.jsx)(a.LZ,{}),p]}),(0,l.jsx)(r.Z,{passExtraProps:!0,element:(0,l.jsx)(o.Z,{onClick:c,focusRipple:true,style:u.arrowDropDownButton,children:(0,l.jsx)(s.Z,{})}),buildMenuTemplate:n})]})}},6996:function(e,t,n){"use strict";n.d(t,{I:function(){return l},U:function(){return c}});n(28381);var r=n(38501),i=n(51265),o=500,a=1150,s=1500,l=function(e){return(0,e.children)(c())},c=function(){if((0,i.Z)((0,r.Z)()),"undefined"===typeof window)return{windowSize:"medium",isMobile:!1,isMediumScreen:!0,isLandscape:!0};var e=window.innerWidth>window.innerHeight;return window.innerWidth<o||window.innerHeight<o?{windowSize:"small",isMobile:!0,isMediumScreen:!1,isLandscape:e}:window.innerWidth<a?{windowSize:"medium",isMobile:!1,isMediumScreen:!0,isLandscape:e}:window.innerWidth<s?{windowSize:"large",isMobile:!1,isMediumScreen:!1,isLandscape:e}:{windowSize:"xlarge",isMobile:!1,isMediumScreen:!1,isLandscape:e}}},35213:function(e,t,n){"use strict";n.d(t,{BF:function(){return a},bX:function(){return s},wh:function(){return o}});n(28381);var r=!1,i=!1;"undefined"!==typeof window&&(window.addEventListener("touchstart",(function e(){console.info("Touch detected, considering the screen as touch enabled."),r=!0,window.removeEventListener("touchstart",e,!1)}),!1),window.addEventListener("pointermove",(function e(t){console.info("Pointer move detected."),"mouse"===t.pointerType&&(console.info("Pointer type is mouse, considering the device is a desktop/laptop computer."),i=!0),window.removeEventListener("pointermove",e,!1)}),!1));var o=function(e){return(0,e.children)(a())},a=function(){return"undefined"===typeof window?"normal":r?"touch":"normal"},s=function(){return!("touch"===a()&&!i)}},2632:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(1412),a=n(16792),s=n(29343),l={flex:1};t.Z=i.forwardRef((function(e,t){var n=e.id,c=e.data,u=e.children,d=e.autoHideScrollbar,p=e.style,f=e.onScroll,h=i.useRef(null);i.useImperativeHandle(t,(function(){return{getScrollPosition:function(){var e=h.current;if(!e)return 0;var t=e.getBoundingClientRect().top;return e.scrollTop+t},scrollTo:function(e){var t=h.current;if(t){var n=o.findDOMNode(e);if(n instanceof HTMLElement){var r=n.getBoundingClientRect().top,i=t.getBoundingClientRect().top;t.scrollTop+=r-i}else console.error("Tried to scroll to something that is not a HTMLElement")}},scrollToPosition:function(e){var t=h.current;if(t){var n=t.getBoundingClientRect().top;t.scrollTop=e-n}},scrollToBottom:function(){var e=h.current;e&&(e.scrollTop=e.scrollHeight)}}}));var g=i.useCallback((function(){if(f){var e=h.current;e&&f({remainingScreensToBottom:(e.scrollHeight-(e.clientHeight+e.scrollTop))/e.clientHeight})}}),[f]);return(0,s.jsx)("div",(0,r.Z)((0,r.Z)({id:n},(0,a.Y)(c)),{},{style:(0,r.Z)((0,r.Z)({},l),{},{overflowY:d?"auto":"scroll"},p),onScroll:g,ref:h,children:u}))}))},81442:function(e,t,n){"use strict";n.d(t,{T:function(){return g},m:function(){return h}});var r=n(37762),i=n(29439),o=n(36600),a=n(28381),s=n(65522),l=n.n(s),c=n(73693),u=n(61325),d=n(78081),p=n(86578),f=n(29343),h=function(){var e=a.useState(null),t=(0,i.Z)(e,2),n=t[0],o=t[1],s=a.useState((function(){return new Set})),l=(0,i.Z)(s,2),c=l[0],u=l[1];return{chosenCategory:n,setChosenCategory:a.useCallback((function(e){if(e){var t,n=new Set,i=(0,r.Z)(c.keys());try{for(i.s();!(t=i.n()).done;){var a=t.value;e.node.allChildrenTags.includes(a)&&n.add(a)}}catch(s){i.e(s)}finally{i.f()}u(n),o(e)}else o(null)}),[c]),chosenFilters:c,addFilter:function(e){var t=new Set(c);t.add(e),u(t)},removeFilter:function(e){var t=new Set(c);t.delete(e),u(t)}}},g=function(e){var t=e.filtersState,n=e.allFilters,r=e.error;if(!n)return(0,f.jsx)(d.Z,{});if(r)return null;var i=t.chosenCategory?t.chosenCategory.node.allChildrenTags:n.defaultTags;return(0,f.jsx)(u.ak,{children:i?i.length?i.map((function(e){return(0,f.jsx)(c.Z,{label:l()(e),checked:t.chosenFilters.has(e),onCheck:function(){t.chosenFilters.has(e)?t.removeFilter(e):t.addFilter(e)}},e)})):(0,f.jsx)(p.Z,{children:(0,f.jsx)(o.Trans,{id:"No filters in this category."})}):(0,f.jsx)(p.Z,{children:(0,f.jsx)(o.Trans,{id:"Choose a category to display filters"})})})}},49819:function(e,t,n){"use strict";n.d(t,{az:function(){return h},hM:function(){return p}});var r=n(29439),i=n(37762),o=n(15671),a=n(43144),s=n(28381),l=n(16243),c=n.n(l),u=n(92417),d=n.n(u),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;(0,o.Z)(this,e),this.tags=t}return(0,a.Z)(e,[{key:"getPertinence",value:function(e){var t=this;return 0===this.tags.size||e.tags.some((function(e){return t.tags.has(e)}))?1:0}},{key:"hasFilters",value:function(){return this.tags.size>0}}]),e}(),f=function(e,t,n,r){if(!e)return null;var o=performance.now(),a=e.filter((function(e){if(!t)return!0;if(t&&!e.tags)return!1;if(!(t.node.isTagContainerOnly||e.tags&&e.tags.some((function(e){return e===t.node.name}))))return!1;var n,r=(0,i.Z)(t.parentNodes);try{var o,a=function(){var t=n.value;return t.isTagContainerOnly?{v:!0}:e.tags&&e.tags.some((function(e){return e===t.name}))?void 0:{v:!1}};for(r.s();!(n=r.n()).done;)if(o=a())return o.v}catch(s){r.e(s)}finally{r.f()}return!0})).filter((function(e){return!n||0===n.size||e.tags&&e.tags.some((function(e){return n.has(e)}))||e.categories&&e.categories.some((function(e){return n.has(e)}))})),s=a;if(r){var l=1,c=0,u=a.map((function(e){var t,n=1,o=(0,i.Z)(r);try{for(o.s();!(t=o.n()).done;){if(0===(n*=t.value.getPertinence(e)))return null}}catch(a){o.e(a)}finally{o.f()}return l=Math.min(l,n),c=Math.max(c,n),{pertinence:n,searchItem:e}})).filter(Boolean);!function(e,t,n,r){if(!(n>=r))for(var i=e.length-1,o=.5;o>1/128&&i>0;o/=2)for(var a=n+(r-n)*(1-o),s=-1,l=i+1;;){do{s++}while(s<i&&t(e[s])>a);if(s===i)break;do{l--}while(l>0&&t(e[l])<a);if(0===l)return;if(s>=l){i=l;break}var c=e[s];e[s]=e[l],e[l]=c}}(u,(function(e){return e.pertinence}),l,c),s=u.map((function(e){return e.searchItem}))}var d=performance.now()-o;return console.info("Filtered items by category/filters in ".concat(d.toFixed(3),"ms.")),s},h=function(e,t,n,i,o,a){var l=s.useRef(null),u=s.useState(null),p=(0,r.Z)(u,2),h=p[0],g=p[1],x=s.useMemo((function(){return e?c()(Object.keys(e).map((function(t){return e[t]}))):null}),[e]),m=s.useMemo((function(){return e?Object.keys(e).map((function(t){return e[t]})):null}),[e]);s.useEffect((function(){if(e){var n=performance.now();l.current&&(l.current.terminate(),l.current=null);try{var r=new(d()),i=Object.keys(e);i.forEach((function(n){var i=e[n];r.indexDocument(n,t(i))}));var o=performance.now()-n;console.info("Indexed ".concat(i.length," items in ").concat(o.toFixed(3),"ms.")),l.current=r}catch(a){console.error("Error while indexing items: ",a)}}}),[e,t]);var v=l.current;return s.useEffect((function(){var t=!1;if(n){if(!e||!v)return void console.info("Search for items skipped because items are not ready - will be retried when ready");var r=performance.now();v.search(n).then((function(n){if(t)console.info("Discarding search results as a new search was launched.");else{var s=n.map((function(t){return e[t]})).filter(Boolean),l=performance.now()-r;console.info("Found ".concat(s.length," items in ").concat(l.toFixed(3),"ms.")),g(f(s,i,o,a))}}))}else g(f(i?m:x,i,o,a));return function(){t=!0}}),[x,m,e,n,i,o,a,v]),h}},82069:function(e,t,n){"use strict";n.d(t,{G9:function(){return f},KE:function(){return d},dr:function(){return p},qg:function(){return m},zi:function(){return g}});var r=n(29439),i=n(93433),o=n(37762),a=n(4942),s=n(28381),l=n(16243),c=n.n(l),u=n(40755),d={minMatchCharLength:1,threshold:.35,includeMatches:!0,ignoreLocation:!0,useExtendedSearch:!0,findAllMatches:!0},p=function(e){var t=e.trim().split(" ");return"'".concat(t.join(" '"))},f=function(e,t){return{$or:e.trim().split(" ").map((function(e){return{$or:t.map((function(t){return(0,a.Z)({},t,e)}))}}))}},h=function(e,t){var n=t.toLowerCase();return e.indices.map((function(r){var i=e.value.slice(r[0],r[1]+1).toLowerCase();if(i===n)return r;var o=i.indexOf(n);return-1!==o?[r[0]+o,r[0]+o+t.length-1]:void 0})).filter(Boolean)},g=function(e,t){return e.matches.map((function(e){return{key:e.key,value:e.value,indices:h(e,t)}}))},x=function(e,t,n,r,a){if(!e)return null;var s=performance.now(),l=e.filter((function(e){var n=e.item;return!t||!!n.category&&n.category===t})).filter((function(e){var t=e.item;if(!n)return!0;if(!(n.node.isTagContainerOnly||t.tags&&t.tags.some((function(e){return e===n.node.name}))))return!1;var r,i=(0,o.Z)(n.parentNodes);try{var a,s=function(){var e=r.value;return e.isTagContainerOnly?{v:!0}:t.tags&&t.tags.some((function(t){return t===e.name}))?void 0:{v:!1}};for(i.s();!(r=i.n()).done;)if(a=s())return a.v}catch(l){i.e(l)}finally{i.f()}return!0})).filter((function(e){var t=e.item,n=!t.tier||!a.has(t.tier),o=new Set((0,i.Z)(r).map((function(e){return e.toLowerCase()}))),s=0===o.size||t.tags&&t.tags.some((function(e){return o.has(e.toLowerCase())}))||t.categories&&t.categories.some((function(e){return o.has(e.toLowerCase())}));return n&&s})),c=performance.now()-s;return console.info("Filtered items by category/filters/tier in ".concat(c.toFixed(3),"ms.")),l},m=function(e,t){var n=t.searchText,o=t.chosenItemCategory,a=t.chosenCategory,l=t.chosenFilters,d=t.excludedTiers,p=t.defaultFirstSearchItemIds,h=t.shuffleResults,m=void 0===h||h,v=s.useRef(null),b=s.useState(null),C=(0,r.Z)(b,2),j=C[0],y=C[1],Z=s.useMemo((function(){if(!e||!Object.keys(e).length)return null;var t=new Set(p),n=Object.keys(e).filter((function(e){return!t.has(e)}));return[].concat((0,i.Z)(p),(0,i.Z)(m?c()(n):n)).map((function(t){return{item:e[t],matches:[]}}))}),[e,p,m]);s.useEffect((function(){if(e){var t=performance.now();v.current&&(v.current=null);try{var n=new u.Z(Object.values(e),{keys:[{name:"name",weight:2},{name:"fullName",weight:5},{name:"shortDescription",weight:1},{name:"tags",weight:4}],minMatchCharLength:2,threshold:.35,includeMatches:!0,ignoreLocation:!0,useExtendedSearch:!0,findAllMatches:!0}),r=performance.now()-t;console.info("Indexed ".concat(Object.keys(e).length," items in ").concat(r.toFixed(3),"ms.")),v.current=n}catch(i){console.error("Error while indexing items: ",i)}}}),[e]);var k=v.current;return s.useEffect((function(){var t=!1;if(n){if(!e||!k)return void console.info("Search for items skipped because items are not ready - will be retried when ready");var r=performance.now(),i=k.search(f(n,["name","fullName","shortDescription","tags"])),s=performance.now()-r;if(console.info("Found ".concat(i.length," items in ").concat(s.toFixed(3),"ms.")),t)return void console.info("Discarding search results as a new search was launched.");y(x(i.map((function(e){return{item:e.item,matches:g(e,n)}})),o,a,l,d))}else y(x(Z,o,a,l,d));return function(){t=!0}}),[Z,e,n,o,a,l,k,d]),j}},6946:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(1413),i=n(29439),o=n(28381),a=n(29277),s=n(87622),l=n(39173),c=n(86278),u=n(98237),d=n(35213),p=n(65111),f=n(8511),h=n(29343),g={chipContainer:{display:"flex",flexWrap:"wrap",overflowX:"auto",marginTop:4},chip:{marginRight:4,marginBottom:4}},x=function(e){var t=e.tags,n=e.onRemove,a=o.useState(null),s=(0,i.Z)(a,2),l=s[0],c=s[1],u=o.useRef([]),d=o.useCallback((function(e){var t=!!l&&l===e;return(0,r.Z)((0,r.Z)({},g.chip),{},{filter:t?"brightness(1.2)":void 0})}),[l]),p=function(e){return function(r){var i=t.indexOf(e);if(u.current.splice(i,1),r.nativeEvent instanceof KeyboardEvent){var o=Math.min(u.current.length-1,i),a=u.current[o];a&&a.current&&a.current.focus()}n(e)}};return t.length?(0,h.jsx)("div",{style:g.chipContainer,children:t.map((function(e,t){var n=o.createRef();return u.current[t]=n,(0,h.jsx)(f.Z,{size:"small",style:d(e),onBlur:function(){return c(null)},onFocus:function(){return c(e)},onDelete:p(e),label:e,ref:n},e)}))}):null},m=n(36600),v=n(68009),b=n(35595),C=n(6996),j=function(){},y=o.forwardRef((function(e,t){var n=e.id,f=e.disabled,g=e.placeholder,y=e.onChange,Z=e.onRequestSearch,k=e.value,w=e.aspect,T=e.tagsHandler,S=e.tags,P=e.buildMenuTemplate,E=e.helpPagePath,I=e.autoFocus;o.useImperativeHandle(t,(function(){return{focus:M,blur:L}}));var M=function(){G.current&&G.current.focus()},L=function(){G.current&&G.current.blur()},A=(0,C.U)().isMobile,F=o.useState(!1),O=(0,i.Z)(F,2),R=O[0],D=O[1],_=o.useState(k),B=(0,i.Z)(_,2),N=B[0],U=B[1],H=o.useState(k),V=(0,i.Z)(H,2),z=V[0],W=V[1],G=o.useRef(null),Y=!!N&&N.length>0,q=(0,v.N)(y||j,250),X=o.useCallback((function(e){U(e),q(e)}),[q,U]),K=o.useCallback((function(e){U(e),y&&y(e)}),[y,U]);o.useEffect((function(){U(k)}),[k]);var J=(0,d.bX)(),Q=!!I&&("desktopAndMobileDevices"===I||J),$=o.useRef(T?T.chosenTags.size:0);o.useEffect((function(){Q&&T&&0===T.chosenTags.size&&$.current>0&&M()}),[T,Q]);var ee=function(){D(!1),N&&""!==N.trim()||K("")},te=function(){D(!0)},ne=function(e){X(e.target.value)},re=function(){K(""),A||M()},ie=function(e){(0,p.ph)(e)&&Z(N)},oe=function(e,t,n){"select-option"===n?(T&&T.add(t||""),K(""),W("")):K(t||"")},ae=function(e,t,n){"reset"===n?(K(""),W("")):X(t||"")};return(0,h.jsx)(m.I18n,{children:function(e){var t=e.i18n;return(0,h.jsx)(b.Z,{onCancel:re,isFocused:R,disabled:f,isSearchBarEmpty:!Y,helpPagePath:E,aspect:w,buildMenuTemplate:P,renderSubLine:T?function(){return(0,h.jsx)(s.Z,{in:T.chosenTags.size>0,children:(0,h.jsx)(x,{tags:Array.from(T.chosenTags),onRemove:function(e){1===T.chosenTags.size&&M(),T.remove(e)}})})}:null,renderContent:function(e){var i=e.inputStyle,o=e.popperContainerStyle;return S?(0,h.jsx)(u.ZP,{id:n,options:S,freeSolo:!0,fullWidth:!0,defaultValue:"",inputValue:N,value:z,onChange:oe,onInputChange:ae,onKeyPress:ie,onBlur:ee,onFocus:te,getOptionDisabled:function(e){return e.disabled||!!T&&!!T.chosenTags.has(e)},getOptionSelected:function(e,t){return!!T&&T.chosenTags.has(e)},PopperComponent:function(e){return(0,h.jsx)("div",{style:o,children:e.children})},renderOption:function(e){return(0,h.jsx)(c.Z,{noMargin:!0,children:e})},renderInput:function(e){return(0,h.jsx)(l.Z,(0,r.Z)((0,r.Z)({margin:"none"},e),{},{autoFocus:Q,inputRef:G,InputProps:(0,r.Z)((0,r.Z)({},e.InputProps),{},{disableUnderline:!0,endAdornment:null,placeholder:t._(g||{id:"Search"}),style:i})}))}}):(0,h.jsx)(a.ZP,{id:n,margin:"none",dataset:{searchBar:"true"},translatableHintText:g||{id:"Search"},onBlur:ee,value:N,onChange:ne,onKeyUp:ie,fullWidth:!0,underlineShow:!1,disabled:f,ref:G,inputStyle:i,onFocus:te,autoFocus:I})}})}})}))},35595:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(40243),a=n(32694),s=n(69186),l=n(24910),c=n(31318),u=n(72662),d=n(16792),p=n(9311),f=n(14932),h=n(51598),g=n(23198),x=n(54168),m=n(29343);t.Z=function(e){var t=e.renderContent,n=e.disabled,v=e.isSearchBarEmpty,b=e.isFocused,C=e.helpPagePath,j=e.aspect,y=e.buildMenuTemplate,Z=e.onCancel,k=e.renderSubLine,w=i.useContext(l.Z),T=function(e){var t=e.nonEmpty,n=e.disabled,i=e.theme,o=e.aspect,a=e.focused,s=e.hasHelpPage,l=n?.38:1;return{root:{height:30,display:"flex",flex:1,justifyContent:"space-between",backgroundColor:n?i.searchBar.backgroundColor.disabled:i.searchBar.backgroundColor.default,borderRadius:"integrated-search-bar"===o?0:4},iconButtonClose:{style:{opacity:l,visibility:t&&!n?"visible":"hidden",transition:"visibility 0s linear 0.1s"}},iconButtonSearch:{container:{padding:"5px 10px"},iconStyle:{fontSize:18,opacity:a?1:.5,transition:"opacity 200ms cubic-bezier(0.4, 0.0, 0.2, 1)"}},iconButtonFilter:{style:{opacity:l,transform:t?"translateX(0)":"translateX(".concat(30,"px)"),transition:"transform 200ms cubic-bezier(0.4, 0.0, 0.2, 1)"}},iconButtonHelp:{style:{opacity:l,transform:t?"translateX(0)":"translateX(".concat(30,"px)"),transition:"transform 200ms cubic-bezier(0.4, 0.0, 0.2, 1)"}},inputStyle:(0,r.Z)({padding:0,color:n?i.searchBar.textColor.disabled:t&&a?i.searchBar.textColor.focused:i.searchBar.textColor.default},c.t),searchContainer:{position:"relative",display:"flex",width:"100%"},inputContainer:{margin:"auto 4px",flex:1},popperContainer:{left:"-".concat(43,"px"),right:"-".concat(s?66:33,"px"),position:"absolute",zIndex:1}}}({nonEmpty:!v,disabled:!!n,theme:w,aspect:j,focused:b,hasHelpPage:!!C}),S=function(e){var t=e.theme,n=e.disabled,r=(e.nonEmpty,e.focused);return(0,s.Z)({root:{border:"1px solid ".concat(r?t.searchBar.borderColor.focused:"transparent"),"&:hover":{border:!r&&!n&&"1px solid ".concat(t.searchBar.borderColor.hovered)}}})()}({theme:w,disabled:!!n,nonEmpty:!v,focused:b}),P=i.useMemo((function(){return t({inputStyle:T.inputStyle,popperContainerStyle:T.popperContainer})}),[t,T.inputStyle,T.popperContainer]);return(0,m.jsxs)(o.sg,{noMargin:!0,children:[(0,m.jsx)(o.x1,{noMargin:!0,children:(0,m.jsxs)(a.Z,{classes:S,style:T.root,children:[(0,m.jsx)("div",{style:T.iconButtonSearch.container,children:(0,m.jsx)(u.Z,{style:T.iconButtonSearch.iconStyle,viewBox:"2 2 12 12"})}),(0,m.jsx)("div",(0,r.Z)((0,r.Z)({style:T.searchContainer},(0,d.Y)({searchBarContainer:"true"})),{},{children:(0,m.jsx)("div",{style:T.inputContainer,children:P})})),y&&(0,m.jsx)(x.Z,{element:(0,m.jsx)(h.Z,{style:T.iconButtonFilter.style,disabled:n,size:"small",children:(0,m.jsx)(p.Z,{})}),buildMenuTemplate:y}),C&&(0,m.jsx)(f.Z,{disabled:n,helpPagePath:C,style:T.iconButtonHelp.style,size:"small"}),(0,m.jsx)(h.Z,{onClick:Z,style:T.iconButtonClose.style,disabled:n,size:"small",children:(0,m.jsx)(g.Z,{})})]})}),k&&k()]})}},81683:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(36600),a=n(39173),s=n(29277),l=n(32832),c=n(69186),u=n(29343),d=function(e){return e.stopPropagation()},p=i.forwardRef((function(e,t){var n=i.useRef(null),p=function(e){n.current&&n.current.focus()};i.useImperativeHandle(t,(function(){return{focus:p}}));var f,h=(f=e.textAlign,(0,c.Z)({root:{textAlign:f||"left",cursor:"default"}})()),g=e.onChange||void 0,x=!0,m=i.Children.map(e.children,(function(e){return null!==e&&e.props?e.props.value:null}));m?x=0!==m.filter((function(t){return t===e.value})).length:console.error("SelectField has been passed no or invalid children. Only SelectOption and null are supported.");var v=x?e.value:"",b=e.errorText?e.errorText:e.helperMarkdownText?(0,u.jsx)(l.r,{source:e.helperMarkdownText}):null;return(0,u.jsx)(o.I18n,{children:function(t){var i=t.i18n;return(0,u.jsxs)(a.Z,(0,r.Z)((0,r.Z)({id:e.id,select:!0,color:"secondary"},(0,s.P8)(e)),{},{disabled:e.disabled,fullWidth:e.fullWidth,label:e.floatingLabelText,helperText:b,error:!!e.errorText,value:v,onClick:e.stopPropagationOnClick?d:void 0,onChange:g?function(e){g(e,-1,e.target.value)}:void 0,InputProps:{style:e.inputStyle,disableUnderline:!!e.disableUnderline},InputLabelProps:{shrink:!0},SelectProps:{native:!0,classes:h},style:e.style,inputRef:n,children:[x?null:(0,u.jsx)("option",{value:"",disabled:!0,children:e.translatableHintText?i._(e.translatableHintText):i._({id:"Choose an option"})}),e.children]}))}})}));t.Z=p},90242:function(e,t,n){"use strict";var r=n(28381),i=n(36600),o=n(24910),a=n(29343);t.Z=function(e){var t=r.useContext(o.Z);return(0,a.jsx)(i.I18n,{children:function(n){var r=n.i18n;return(0,a.jsx)("option",{value:e.value,disabled:e.disabled,style:{color:t.text.color.primary,backgroundColor:t.palette.canvasColor},children:e.shouldNotTranslate?e.label:r._(e.label)})}})}},72402:function(e,t,n){"use strict";n.d(t,{lp:function(){return Z},nT:function(){return k}});var r=n(29439),i=n(45987),o=n(1413),a=n(28381),s=n(36600),l=n(39173),c=(n(74044),n(81666)),u=n(99415),d=n(32832),p=n(98237),f=n(33620),h=n(29277),g=n(69186),x=n(80845),m=n(65111),v=n(31318),b=n(20914),C=n(29343),j=["InputProps","inputProps","InputLabelProps"],y=["InputProps","inputProps"],Z=function(e){return(0,C.jsx)(b.Z,(0,o.Z)((0,o.Z)({},e),{},{background:"light"}))},k={container:{position:"relative",width:"100%"},listItem:{padding:0,margin:0},listbox:{padding:0,margin:0},listItemText:{margin:"1px 0"}},w=(0,g.Z)({option:{cursor:"default"},listbox:k.listbox,input:{width:"auto",flexGrow:1},inputRoot:{flexWrap:"wrap"},popper:{zIndex:x.default.tooltip+100}}),T=function(e){return function(t,n){if(t.type&&"separator"===t.type)return(0,C.jsx)(f.Z,{divider:!0,disableGutters:!0,component:"div",style:k.listItem});var r=t.translatableValue?e._(t.translatableValue):t.value;return(0,C.jsxs)(f.Z,{dense:!0,component:"div",style:k.listItem,children:[t.renderIcon&&(0,C.jsx)(c.Z,{children:t.renderIcon()}),(0,C.jsx)(u.Z,{style:k.listItemText,primary:(0,C.jsx)("div",{title:r,style:v.t,children:r})})]})}},S=function(e){return"separator"===e.type};t.ZP=a.forwardRef((function(e,t){var n=a.useRef(null),c=(0,a.useState)(null),u=(0,r.Z)(c,2),f=u[0],g=u[1],x=(0,a.useState)(!1),v=(0,r.Z)(x,2),b=v[0],P=v[1],E=w(),I=function(e){var t=n.current;t&&(t.focus(),e&&e.selectAll&&t.select())};a.useImperativeHandle(t,(function(){return{focus:I,forceInputValueTo:function(e){null!==f&&g(e)}}}));var M=null!==f?f:e.value,L=e.helperMarkdownText?(0,C.jsx)(d.r,{source:e.helperMarkdownText}):null,A=function(t,n,r){g(n),b||P(!0),e.commitOnInputChange&&e.onChange(n)};return(0,C.jsx)(s.I18n,{children:function(t){var r=t.i18n;return(0,C.jsx)(p.ZP,{freeSolo:!0,classes:E,onChange:function(t,r){null!==r&&n.current&&(!function(e,t,n){"separator"!==t.type&&(t.onClick?t.onClick():(e.value=t.value,n.onChoose?n.onChoose(t.value):n.onChange(t.value),n.onApply?n.onApply():n.onRequestClose&&n.onRequestClose()))}(n.current,r,e),g(null),P(!1))},open:b,style:(0,o.Z)((0,o.Z)({},e.style),k.container),inputValue:M,value:M,onInputChange:A,PaperComponent:Z,options:e.dataSource,renderOption:T(r),getOptionDisabled:S,getOptionLabel:function(e){return function(e,t){return e.value?e.value:t}(e,M)},filterOptions:function(e,t){return function(e,t,n){var r=n.toLowerCase(),i=e.filter((function(e){return"separator"===e.type||!e.text||-1!==e.text.toLowerCase().indexOf(r)}));if(!i.filter((function(e){return"separator"!==e.type&&(e.value||e.translatableValue)})).length)return[];for(;void 0!==i[i.length-1]&&void 0!==i[i.length-1].type;)i.pop();for(;void 0!==i[0]&&void 0!==i[0].type;)i.shift();return i}(e,0,M)},id:e.id,renderInput:function(t){var a=function(e,t){var n=e.InputProps,r=e.inputProps,a=(e.InputLabelProps,(0,i.Z)(e,j));return(0,o.Z)((0,o.Z)({},a),{},{InputProps:(0,o.Z)((0,o.Z)({},n),{},{className:null,endAdornment:null,style:t.inputStyle}),inputProps:(0,o.Z)((0,o.Z)({},r),{},{className:null,disabled:t.disabled,onKeyDown:function(e){(0,m.W$)(e)?t.onRequestClose&&t.onRequestClose():(0,m.Fc)(e)?(t.onChange(e.currentTarget.value),t.onApply?t.onApply():t.onRequestClose&&t.onRequestClose()):(0,m.ph)(e)&&t.onChange(e.currentTarget.value)}})})}(t,e),s=a.InputProps,c=a.inputProps,u=(0,i.Z)(a,y);return(0,C.jsx)(l.Z,(0,o.Z)((0,o.Z)((0,o.Z)({color:"secondary",InputProps:(0,o.Z)((0,o.Z)({},s),{},{placeholder:"string"===typeof e.hintText?e.hintText:r._(e.hintText)}),inputProps:(0,o.Z)((0,o.Z)({},c),{},{onClick:e.onClick,onFocus:function(e){P(!0),n.current&&(n.current.selectionStart=n.current.value.length)},onBlur:function(t){g(null),P(!1),e.onChange(t.currentTarget.value),e.onBlur&&e.onBlur(t)},onMouseDown:function(e){n.current&&!n.current.value.length&&P(!b)}})},u),(0,h.P8)(e)),{},{style:e.textFieldStyle,label:e.floatingLabelText,inputRef:n,disabled:e.disabled,error:!!e.errorText,helperText:L||e.errorText,fullWidth:e.fullWidth}))}})}})}))},98094:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(36600),a=n(39173),s=n(98237),l=n(69186),c=n(72402),u=n(33620),d=n(99415),p=n(31318),f=n(86278),h=n(29343),g=function(e,t){return(0,h.jsx)(u.Z,{dense:!0,component:"div",style:c.nT.listItem,children:(0,h.jsx)(d.Z,{style:c.nT.listItemText,primary:(0,h.jsx)("div",{title:e.value,style:p.t,children:e.text})})})},x={maxHeight:250,overflowY:"scroll"},m=(0,l.Z)({root:{height:25},deleteIcon:{cursor:"default"}}),v=i.forwardRef((function(e,t){var n=m(),l=i.useRef(null);return i.useImperativeHandle(t,(function(){return{focusInput:function(){l.current&&l.current.focus()}}})),(0,h.jsx)(o.I18n,{children:function(t){var i=t.i18n;return(0,h.jsx)(s.ZP,{multiple:!0,value:e.value,onChange:e.onChange,inputValue:e.inputValue,onInputChange:e.onInputChange,options:e.dataSource,PaperComponent:c.lp,renderOption:g,getOptionLabel:function(e){return e.text},getOptionDisabled:function(t){return t.disabled||!!e.value.find((function(e){return e&&e.value===t.value}))||e.optionsLimit&&e.value.length>=e.optionsLimit},getOptionSelected:function(e,t){return e.value===t.value},loading:e.loading,ListboxProps:{className:e.disableAutoTranslate?"notranslate":"",style:(0,r.Z)((0,r.Z)({},c.nT.listbox),x)},renderInput:function(t){return(0,h.jsx)(a.Z,(0,r.Z)((0,r.Z)({},t),{},{color:"secondary",InputProps:(0,r.Z)((0,r.Z)({},t.InputProps),{},{placeholder:e.hintText&&i._(e.hintText)}),label:e.floatingLabelText,helperText:e.error||e.helperText,variant:"filled",error:!!e.error,inputRef:l,disabled:e.disabled||e.loading}))},fullWidth:e.fullWidth,disabled:e.disabled||e.loading,noOptionsText:(0,h.jsx)(f.Z,{noMargin:!0,children:(0,h.jsx)(o.Trans,{id:"No options"})}),loadingText:(0,h.jsx)(f.Z,{noMargin:!0,children:(0,h.jsx)(o.Trans,{id:"Loading..."})}),ChipProps:{classes:n,className:e.disableAutoTranslate?"notranslate":""}})}})}));t.Z=v},42986:function(e,t,n){"use strict";var r=n(1413),i=n(45987),o=n(29439),a=n(28381),s=n(29277),l=n(29343),c=["value","onChange","commitOnBlur","onFocus","onBlur","type"],u=a.forwardRef((function(e,t){var n=a.useState(!1),u=(0,o.Z)(n,2),d=u[0],p=u[1],f=a.useState(null),h=(0,o.Z)(f,2),g=h[0],x=h[1],m=a.useRef(null),v=function(e){x(e)},b=function(e,t){var n=j();n&&(n.selectionStart=e,n.selectionEnd=t)},C=function(e){m.current&&m.current.focus(e)},j=function(){if(m.current)return m.current.getInputNode()},y=function(){if(m.current)return m.current.getFieldWidth()},Z=function(){if(m.current)return m.current.getCaretPosition()};a.useImperativeHandle(t,(function(){return{focus:C,getInputNode:j,forceSetSelection:b,forceSetValue:v,getFieldWidth:y,getCaretPosition:Z}}));var k=e.value,w=e.onChange,T=e.commitOnBlur,S=e.onFocus,P=e.onBlur,E=e.type,I=(0,i.Z)(e,c);return(0,l.jsx)(s.ZP,(0,r.Z)((0,r.Z)({},I),{},{type:E||"text",ref:m,value:d?g:k,onFocus:function(e){p(!0),x(k),S&&S(e)},onChange:function(e,t){x(t),T||w(t)},onBlur:function(e){w(e.currentTarget.value),p(!1),x(null),P&&P(e)}}))}));t.Z=u},78966:function(e,t,n){"use strict";var r=n(74165),i=n(15861),o=n(36600),a=(n(28381),n(67835)),s=n(40243),l=n(83689),c=n(29343);t.Z=function(e){var t=e.url,n=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&navigator.share){e.next=2;break}return e.abrupt("return");case 2:return n={title:"My GDevelop game",text:"Try the game I just created with #gdevelop",url:t},e.prev=3,e.next=6,navigator.share(n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("Couldn't share the game",e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(){return e.apply(this,arguments)}}();return navigator.share?(0,c.jsx)(s.x1,{justifyContent:"flex-end",children:(0,c.jsx)(a.Z,{label:(0,c.jsx)(o.Trans,{id:"Share"}),onClick:n,leftIcon:(0,c.jsx)(l.Z,{})})}):null}},75087:function(e,t,n){"use strict";var r=n(29439),i=n(36600),o=n(28381),a=n(90264),s=n(51598),l=n(61325),c=n(32484),u=n(29277),d=n(2066),p=n(22537),f=n(29343);t.Z=function(e){var t=e.url,n=o.useState(!1),h=(0,r.Z)(n,2),g=h[0],x=h[1];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(l.ep,{alignItems:"center",noMargin:!0,children:[(0,f.jsx)(u.ZP,{value:t,readOnly:!0,fullWidth:!0,endAdornment:(0,f.jsx)(s.Z,{onClick:function(){t&&(navigator.clipboard.writeText(t),x(!0))},tooltip:{id:"Copy"},edge:"end",children:(0,f.jsx)(a.Z,{})})}),(0,f.jsx)(c.Z,{primary:!0,id:"open-online-export-button",label:(0,f.jsx)(i.Trans,{id:"Open"}),onClick:function(){t&&d.ZP.openExternalURL(t)}})]}),(0,f.jsx)(p.Z,{message:(0,f.jsx)(i.Trans,{id:"Copied to clipboard!"}),visible:g,hide:function(){return x(!1)}})]})}},65911:function(e,t,n){"use strict";n(28381);var r=n(83126),i=n(68518),o=n(7614),a=n(97599),s=n(48651),l=n(64739),c=n(81476),u=n(43473),d=n(91622),p=n(7123),f=n(40243),h=n(29343),g={icon:{padding:5}};t.Z=function(e){var t=e.url;return(0,h.jsxs)(f.x1,{children:[(0,h.jsx)(r.Z,{url:t,style:g.icon,quote:"Try the game I just created with GDevelop.io",hashtag:"#gdevelop",children:(0,h.jsx)(i.Z,{size:32,round:!0})}),(0,h.jsx)(o.Z,{url:t,title:"Try the game I just created with r/gdevelop",style:g.icon,children:(0,h.jsx)(a.Z,{size:32,round:!0})}),(0,h.jsx)(s.Z,{title:"Try the game I just created with GDevelop.io",hashtags:["gdevelop"],url:t,style:g.icon,children:(0,h.jsx)(l.Z,{size:32,round:!0})}),(0,h.jsx)(c.Z,{title:"Try the game I just created with GDevelop.io",url:t,style:g.icon,children:(0,h.jsx)(u.Z,{size:32,round:!0})}),(0,h.jsx)(d.Z,{subject:"My GDevelop game",body:"Try the game I just created with GDevelop.io",url:t,style:g.icon,children:(0,h.jsx)(p.Z,{size:32,round:!0})})]})}},91153:function(e,t,n){"use strict";n(28381);var r=n(26086),i=n(17358),o=n(29343),a=(0,i.Z)((function(e){return{valueLabel:{"& > span > span":{color:e.palette.secondary.contrastText}}}}));t.Z=function(e){var t=a();return(0,o.jsx)(r.Z,{classes:t,color:"secondary",marks:e.marks,valueLabelDisplay:e.valueLabelDisplay,value:e.value,scale:e.scale,track:!1,onChange:function(t,n){return e.onChange(n)},min:e.min,max:e.max,step:e.step})}},65752:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(1413),i=n(28381),o=n(24910),a=n(29343),s={dropIndicator:{borderTop:"2px solid black",height:0,marginTop:"-1px",marginBottom:"-1px",width:"100%",pointerEvents:"none",boxSizing:"border-box"}};function l(e){var t=e.canDrop,n=e.zIndex,l=i.useContext(o.Z);return(0,a.jsx)("div",{style:(0,r.Z)((0,r.Z)({},s.dropIndicator),{},{borderColor:t?l.dropIndicator.canDrop:l.dropIndicator.cannotDrop,zIndex:n||void 0})})}},36607:function(e,t,n){"use strict";n(28381);var r=n(38295),i=n(29343),o={paddingLeft:8};t.Z=function(e){var t=e.children;return t?(0,i.jsx)(r.Z,{variant:"overline",style:o,children:t}):null}},11374:function(e,t,n){"use strict";n.d(t,{Nn:function(){return C},RM:function(){return x},SC:function(){return b},bY:function(){return v},iA:function(){return g},xD:function(){return m}});var r=n(1413),i=n(15671),o=n(43144),a=n(60136),s=n(29388),l=n(28381),c=n(33114),u=n(38962),d=n(79337),p=n(98470),f=n(9940),h=n(29343),g=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){return(0,h.jsx)(c.Z,(0,r.Z)({size:"small"},this.props))}}]),n}(l.Component),x=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){return(0,h.jsx)(u.Z,(0,r.Z)({},this.props))}}]),n}(l.Component),m=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){return(0,h.jsx)(p.Z,(0,r.Z)({},this.props))}}]),n}(l.Component),v=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){return(0,h.jsx)(d.Z,(0,r.Z)({},this.props))}}]),n}(l.Component),b=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){return(0,h.jsx)(f.Z,(0,r.Z)({},this.props))}}]),n}(l.Component),C=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){return(0,h.jsx)(d.Z,(0,r.Z)({},this.props))}}]),n}(l.Component)},28894:function(e,t,n){"use strict";n.d(t,{m:function(){return h}});var r=n(1413),i=n(28381),o=n(93196),a=n(64623),s=n(69186),l=n(6996),c=n(24910),u=n(29343),d={tabs:{borderTopLeftRadius:5,borderTopRightRadius:5},tab:{flexGrow:1},selectedTab:{borderTopLeftRadius:5,borderTopRightRadius:5},tabIndicator:{height:3},tabScrollButton:{display:"none"}},p=(0,s.Z)({wrapper:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}});function f(e){var t=p();return(0,u.jsx)(a.Z,(0,r.Z)({classes:t},e))}function h(e){var t=e.value,n=e.onChange,a=e.options,s=e.variant,p=(0,l.U)().windowSize,h=i.useContext(c.Z),g="small"===p&&a.length>=2||"medium"===p&&a.length>=4||"large"===p&&a.length>=7||"xlarge"===p&&a.length>=8,x=g?"scrollable":"fullWidth";return(0,u.jsx)(o.Z,{variant:s||x,textColor:"primary",value:t,onChange:function(e,t){return n(t)},scrollButtons:s||g?"on":"off",style:d.tabs,TabIndicatorProps:{style:(0,r.Z)((0,r.Z)({},d.tabIndicator),{},{backgroundColor:h.tabs.indicator.backgroundColor})},TabScrollButtonProps:{style:d.tabScrollButton},children:a.map((function(e,n){var i=e.value===t,o=a.findIndex((function(e){return e.value===t})),s=0!==n&&(n-o>=2||o-n>=1);return(0,u.jsx)(f,{value:e.value,disabled:e.disabled,label:e.label,id:e.id,tabIndex:n,style:(0,r.Z)((0,r.Z)({},d.tab),i?d.selectedTab:s?{borderLeft:"1px solid ".concat(h.tabs.separator.color)}:{})},n)}))})}},86278:function(e,t,n){"use strict";var r=n(1413),i=n(45987),o=n(28381),a=n(38295),s=n(29343),l=["children","style","size","color","align","noShrink","noMargin","allowSelection","allowBrowserAutoTranslate","displayInlineAsSpan","displayAsListItem","tooltip"],c=function(e){switch(e){case"bold-title":return"h1";case"title":return"h2";case"section-title":return"h3";case"block-title":return"h4";case"sub-title":return"h5";case"body2":return"body2";case"body-small":return"caption";default:return"body1"}},u=function(e){switch(e){case"error":return"error";case"primary":default:return"textPrimary";case"secondary":return"textSecondary";case"inherit":return"inherit"}},d=o.forwardRef((function(e,t){var n=e.children,o=e.style,d=e.size,p=e.color,f=e.align,h=e.noShrink,g=e.noMargin,x=e.allowSelection,m=e.allowBrowserAutoTranslate,v=void 0===m||m,b=e.displayInlineAsSpan,C=e.displayAsListItem,j=e.tooltip,y=(0,i.Z)(e,l);return(0,s.jsx)(a.Z,(0,r.Z)((0,r.Z)({variant:c(d),ref:t,translate:v?void 0:"no",color:u(p),component:b?"span":C?"li":void 0,title:j,style:(0,r.Z)((0,r.Z)({},o),{},{display:b?"inline-block":C?"list-item":void 0,flexShrink:h?0:void 0,marginTop:g?0:6,marginBottom:g?0:6,userSelect:x?"text":void 0,cursor:x?"text":void 0}),align:f||"inherit"},y),{},{children:n}))}));t.Z=d},42699:function(e,t,n){"use strict";var r=n(1413),i=n(45987),o=n(28381),a=n(51535),s=n(40243),l=n(29343),c=["label","primary","secondary","icon","keyboardFocused","disabled","id","allowBrowserAutoTranslate"],u=o.forwardRef((function(e,t){var n=e.label,o=e.primary,u=e.secondary,d=e.icon,p=e.keyboardFocused,f=e.disabled,h=e.id,g=e.allowBrowserAutoTranslate,x=void 0===g||g,m=(0,i.Z)(e,c);return(0,l.jsxs)(a.Z,(0,r.Z)((0,r.Z)({variant:"text",size:"small",translate:x?void 0:"no",color:o?"primary":u?"secondary":"default",autoFocus:p,focusRipple:!0,disabled:f,id:h},m),{},{ref:t,children:[d,d&&(0,l.jsx)(s.LZ,{}),n?(0,l.jsx)("span",{children:n}):null]}))}));t.Z=u},31318:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});var r={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}},29277:function(e,t,n){"use strict";n.d(t,{B2:function(){return m},P8:function(){return g}});var r=n(1413),i=n(29439),o=n(28381),a=n(36600),s=n(65512),l=n(39173),c=n(51626),u=n(57588),d=n(32832),p=n(35213),f=n(16792),h=n(29343),g=function(e){return{variant:"none"===e.margin?"standard":"filled",margin:"none"===e.margin?"none":"dense",hiddenLabel:"none"!==e.margin&&!e.floatingLabelText}},x=o.forwardRef((function(e,t){var n=o.useRef(null),x=o.useRef(null),m=o.useState(!1),v=(0,i.Z)(m,2),b=v[0],C=v[1],j=function(t){var r=n.current;if(r&&(r.focus(),t&&t.selectAll&&r.select(),t&&"end"===t.caretPosition&&e.value&&r.setSelectionRange(e.value.toString().length,e.value.toString().length),t&&Number.isInteger(t.caretPosition)&&e.value)){var i=Number(t.caretPosition);r.setSelectionRange(i,i)}},y=function(){n.current&&n.current.blur()},Z=function(){return n.current?n.current:null},k=function(){return x.current?x.current.clientWidth:null},w=function(){return n.current?n.current.selectionStart:null};o.useImperativeHandle(t,(function(){return{focus:j,blur:y,getInputNode:Z,getFieldWidth:k,getCaretPosition:w}}));var T=e.onChange||void 0,S=e.helperMarkdownText?(0,h.jsx)(d.r,{source:e.helperMarkdownText}):null,P=(0,p.bX)(),E=!!e.autoFocus&&("desktopAndMobileDevices"===e.autoFocus||P);return(0,h.jsx)(a.I18n,{children:function(t){var i=t.i18n;return(0,h.jsx)(l.Z,(0,r.Z)((0,r.Z)({ref:x,color:"secondary",type:void 0!==e.type?"password"===e.type?b?"text":"password":e.type:void 0,value:void 0!==e.value?e.value:void 0,defaultValue:void 0!==e.defaultValue?e.defaultValue:void 0,onChange:T?function(e){return T(e,e.target.value)}:void 0,onContextMenu:e.stopContextMenuPropagation?function(e){return e.stopPropagation()}:void 0,error:!!e.errorText,helperText:e.errorText||S,disabled:e.disabled,required:e.required,InputLabelProps:{shrink:!!e.floatingLabelFixed||void 0},label:e.floatingLabelText,name:e.name,placeholder:e.hintText?e.hintText:e.translatableHintText?i._(e.translatableHintText):void 0,id:e.id,autoFocus:E,multiline:e.multiline,rows:e.rows,rowsMax:e.rowsMax},g(e)),{},{fullWidth:e.fullWidth,InputProps:{disableUnderline:void 0!==e.underlineShow&&!e.underlineShow,style:{fontSize:e.style?e.style.fontSize:void 0,fontStyle:e.style?e.style.fontStyle:void 0,padding:e.style?e.style.padding:void 0},readOnly:e.readOnly,inputProps:(0,r.Z)({onKeyPress:e.onKeyPress,onKeyUp:e.onKeyUp,onKeyDown:e.onKeyDown,onClick:e.onClick,maxLength:e.maxLength,max:e.max,min:e.min,step:e.step,autoCapitalize:"off",style:e.inputStyle},(0,f.Y)(e.dataset)),endAdornment:void 0!==e.type&&"password"===e.type?(0,h.jsx)(c.Z,{position:"end",children:(0,h.jsx)(s.Z,{size:"small",onClick:function(){return C(!b)},children:(0,h.jsx)(u.Z,{})})}):e.endAdornment?(0,h.jsx)(c.Z,{position:"end",style:e.multiline?{marginTop:-17}:void 0,children:e.endAdornment}):void 0,startAdornment:e.startAdornment?(0,h.jsx)(c.Z,{position:"start",children:e.startAdornment}):void 0},style:e.style?{width:e.style.width||void 0,flex:e.style.flex||void 0,top:e.style.top||void 0}:void 0,onFocus:e.onFocus,onBlur:e.onBlur,inputRef:n,spellCheck:"false"}))}})}));t.ZP=x;var m=0},24910:function(e,t,n){"use strict";var r=n(28381),i=n(66666),o=r.createContext(i.Z.gdevelopTheme);t.Z=o},57597:function(e,t,n){"use strict";var r=n(28381),i=n(19345),o=n(54204),a=n(69186),s=n(24910),l=n(29343),c=(0,a.Z)({root:{cursor:"default"},labelPlacementStart:{marginLeft:0},label:{flex:1}});t.Z=function(e){var t=e.label,n=e.toggled,u=e.onToggle,d=e.disabled,p=e.labelPosition,f=e.style,h=c(),g=function(e){var t=e.theme,n=e.toggled,r=e.disabled;return(0,a.Z)({thumb:{backgroundColor:r?t.switch.thumbColor.disabled:n?t.switch.thumbColor.toggled:t.switch.thumbColor.default},track:{backgroundColor:r?t.switch.trackColor.disabled:n?t.switch.trackColor.toggled:t.switch.trackColor.default,opacity:"1 !important"}})()}({theme:r.useContext(s.Z),toggled:n,disabled:!!d});return(0,l.jsx)(i.Z,{control:(0,l.jsx)(o.Z,{checked:n,onChange:function(e){return u(e,e.target.checked)},classes:g,color:"default"}),labelPlacement:"right"===p?"end":"start",label:t,disabled:d,classes:h,style:f})}},84361:function(e,t,n){"use strict";n.d(t,{K:function(){return r}});var r=300},36595:function(e,t,n){"use strict";var r=n(36600),i=n(28381),o=n(42699),a=n(2066),s=n(72291),l=n(81730),c=n(29343);t.Z=function(e){var t=i.useContext(s.n).tutorials;if(!t||!e.tutorialId)return e.renderIfNotFound||null;var n=t.find((function(t){return t.id===e.tutorialId}));return n?(0,c.jsx)(o.Z,{onClick:function(){n.link&&a.ZP.openExternalURL(n.link)},target:"_blank",label:e.label||(0,c.jsx)(r.Trans,{id:"Tutorial"}),icon:(0,c.jsx)(l.Z,{})}):(console.warn("Tutorial with id ".concat(e.tutorialId||""," not found")),e.renderIfNotFound||null)}},78265:function(e,t,n){"use strict";var r=n(1413),i=n(28381),o=n(89267),a=n(51535),s=n(16792),l=n(24289),c=n(29343),u=i.forwardRef((function(e,t){var n=e.leftButton,u=e.rightButton,d=e.onChange,p=e.value,f=i.useRef(null),h=i.useCallback((function(){f.current&&(0,l.o)(f.current)}),[]);i.useImperativeHandle(t,(function(){return{focusLeftButton:h}}));var g=p===n.value,x=g?{effective:"true"}:void 0,m=g?void 0:{effective:"true"};return(0,c.jsxs)(o.Z,{children:[(0,c.jsx)(a.Z,(0,r.Z)((0,r.Z)({id:n.id},(0,s.Y)(x)),{},{variant:g?"contained":"outlined",color:g?"secondary":"default",onClick:function(){return d(n.value)},ref:f,children:n.label})),(0,c.jsx)(a.Z,(0,r.Z)((0,r.Z)({id:u.id},(0,s.Y)(m)),{},{variant:g?"outlined":"contained",color:g?"default":"secondary",onClick:function(){return d(u.value)},children:u.label}))]})}));t.Z=u},51137:function(e,t,n){"use strict";n.d(t,{PN:function(){return o},ZA:function(){return s},e_:function(){return a}});var r=n(74165),i=n(15861),o=function(){return!1},a=function(e){return null},s=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},37054:function(e,t,n){"use strict";n.d(t,{j:function(){return o},z:function(){return a}});var r=n(29439),i=n(28381),o=function(e){var t=e.blob,n=e.children,o=i.useState(""),a=(0,r.Z)(o,2),s=a[0],l=a[1],c=i.useState(null),u=(0,r.Z)(c,2),d=u[0],p=u[1];return i.useEffect((function(){t&&t!==d&&(l(URL.createObjectURL(t)),p(t))}),[t,d]),i.useEffect((function(){return function(){s&&URL.revokeObjectURL(s)}}),[s]),n(s)},a=function(e,t){var n=document.body;if(n){var r=document.createElement("a");n.appendChild(r),r.style.display="none",r.href=e,r.download=t,r.click(),n.removeChild(r)}}},81303:function(e,t,n){"use strict";n.d(t,{At:function(){return u},R7:function(){return c},Um:function(){return p},oT:function(){return d}});var r=n(74165),i=n(15861),o=n(85919),a=n(38428),s=n.n(a),l=function(e,t,n){if(e.startsWith("data:")||e.startsWith("blob:"))return e;var r=-1===e.indexOf("?")?"?":"&";return e+r+t+"="+n},c=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,a,c,u,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.urlContainers,a=t.onProgress,c=0,e.next=4,s().withConcurrency(20).for(n).process(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i,s,u,d,p,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.url,e.prev=1,s=l(i,"gdUsage","export"),e.next=5,fetch(s,{credentials:(0,o.bc)(s)?"include":"same-origin"});case 5:if((u=e.sent).ok){e.next=8;break}throw new Error('Error while downloading "'.concat(s,'" (status: ').concat(u.status,")"));case 8:return e.next=10,u.blob();case 10:return d=e.sent,p={item:t,blob:d},e.abrupt("return",p);case 15:return e.prev=15,e.t0=e.catch(1),f={item:t,error:e.t0},e.abrupt("return",f);case 19:return e.prev=19,a(c++,n.length),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,15,19,22]])})));return function(t){return e.apply(this,arguments)}}());case 4:return u=e.sent,d=u.results,e.abrupt("return",d);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(e,t){return e.map((function(e){var n=e.item,r=e.blob,i=e.error;return i||!r?(t(n.resource.getName(),i||new Error("Unknown error during download")),null):{resource:n.resource,file:new File([r],n.filename,{type:r.type})}})).filter(Boolean)};function d(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){return t(r.result)},r.onerror=function(e){return n(r.error)},r.onabort=function(e){return n(new Error("Read aborted"))},r.readAsDataURL(e)}))}function p(e){var t=e.split(",");if(t.length<2)return null;for(var n=t[0].match(/:(.*?);/),r=n?n[1]:"application/octet-stream",i=atob(t[1]),o=i.length,a=new Uint8Array(o);o--;)a[o]=i.charCodeAt(o);return new Blob([a],{type:r})}},29514:function(){throw new Error("This is a fake @blueprintjs/core (or @blueprintjs/icons) package that is just throwing an error. It's used by react-mosaic, which will fallback to using something else.This is useful for avoiding webpack/create-react-app warnings in the developmentconsole about a missing package - while avoiding to import blueprint.")},96826:function(e,t,n){"use strict";n.d(t,{I:function(){return d},f:function(){return p}});var r=n(74165),i=n(15861),o=n(20392),a=n(81303),s=n(70983),l=n.n(s),c=n(95562);function u(e,t,n){if(e.length){var r=0;!function i(){t(e[r],(function(){++r>=e.length?n():i()}))}()}else n()}var d=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.urlFiles,i=t.onProgress,e.next=3,(0,a.R7)({urlContainers:n.filter((function(e){return-1===e.url.indexOf(".h")})),onProgress:i});case 3:if(o=e.sent,!(s=o.filter((function(e){return!!e.error||!e.blob}))).length){e.next=8;break}throw l=s.map((function(e){var t=e.error;return t?t.message:"Unknown error during download."})).filter(Boolean).join(",\n"),new Error("Could not download ".concat(s.length," files:\n ").concat((0,c.S)(l,300)));case 8:return e.abrupt("return",o.map((function(e){var t=e.item;return{blob:e.blob,filePath:t.filePath}})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,a,s,c,d,p,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.textFiles,i=t.blobFiles,a=t.basePath,s=t.onProgress,c=t.sizeLimit,e.next=3,(0,o.k)();case 3:return d=e.sent,p=0,f=i.length+n.length,e.abrupt("return",new Promise((function(e,t){d.createWriter(new d.BlobWriter("application/zip"),(function(r){u(i,(function(e,t){var n=e.filePath,i=e.blob,o=l().relative(a,n);r.add(o,new d.BlobReader(i),(function(){p++,s(p,f),t()}),(function(){}))}),(function(){u(n,(function(e,t){var n=e.filePath,i=e.text,o=l().relative(a,n);r.add(o,new d.TextReader(i),(function(){p++,s(p,f),t()}),(function(){}))}),(function(){r.close((function(n){var r=n.size;if(c&&r>c){var i=Math.round(r/1e6);t(new Error("Archive is of size ".concat(i," MB, which is above the limit allowed of ").concat(c/1e6," MB.")))}e(n)}))}))}))}),(function(e){console.error("Error while making zip:",e),t(e)}))})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},85919:function(e,t,n){"use strict";n.d(t,{WN:function(){return s},bc:function(){return a},yk:function(){return o}});var r=n(48409),i=n(34517),o=function(e){return e.startsWith("https://project-resources.gdevelop.io/")||e.startsWith("https://project-resources-dev.gdevelop.io/")},a=function(e){return!(0,r._F)()&&!!o(e)},s=function(e){return(0,r._F)()&&o(e)?(0,i.so)(e):e}},39909:function(e,t,n){"use strict";n.d(t,{g:function(){return i}});var r=null,i=function(){return r||(r=n.g.CSS.supports("image-rendering: crisp-edges")?"crisp-edges":"pixelated")}},58336:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});var r=function(e){return new Promise((function(t){return setTimeout(t,e)}))}},72702:function(e,t,n){"use strict";n.d(t,{B:function(){return d}});var r=/[/?<>\\:*|"]/g,i=/[\x00-\x1f\x80-\x9f]/g,o=/^\.+$/,a=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,s=/[. ]+$/,l=/[&$+/=?@#]/g,c=/[|^%]/g,u="_";function d(e){return e.replace(r,u).replace(l,u).replace(c,u).replace(i,u).replace(o,u).replace(a,u).replace(s,u)}},84140:function(e,t,n){"use strict";n.d(t,{$l:function(){return y},Dz:function(){return j},LG:function(){return g},Lj:function(){return O},N:function(){return T},O3:function(){return h},QR:function(){return I},R5:function(){return C},Tm:function(){return E},V0:function(){return S},WY:function(){return m},Xt:function(){return x},_N:function(){return v},bX:function(){return b},bq:function(){return M},d0:function(){return L},kI:function(){return k},kt:function(){return P},s0:function(){return f},sH:function(){return w},tL:function(){return Z}});var r=n(29439),i=n(74165),o=n(15861),a=n(14446),s=n.n(a),l=n(45911),c=n(55736),u=n.n(c),d=n(36465),p=s().create({baseURL:l.Ud.baseUrl}),f=function(e){var t=Object.keys(e.content);return 1===t.length&&"audio"===t[0]},h=function(e){return!!e.content.audio&&e.content.audio>0},g=function(e,t){return!t.gdevelopVersion||u()(e,t.gdevelopVersion,{includePrerelease:!0})},x=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,o,a,s,l,c,u,d,f;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.environment,e.next=3,p.get("/asset",{params:{environment:n}});case 3:return r=e.sent,o=r.data,a=o.assetShortHeadersUrl,s=o.filtersUrl,l=o.assetPacksUrl,e.next=7,Promise.all([p.get(a).then((function(e){return e.data})).catch((function(e){return e})),p.get(s).then((function(e){return e.data})).catch((function(e){return e})),p.get(l).then((function(e){return e.data})).catch((function(e){return e}))]);case 7:if(!(c=e.sent).some((function(e){return!e||e instanceof Error}))){e.next=10;break}throw new Error("Unexpected response from the assets endpoints.");case 10:if(u=c[0],d=c[1],(f=c[2]).starterPacks){e.next=15;break}throw new Error("Unexpected response from the public asset packs endpoint.");case 15:return e.abrupt("return",{publicAssetShortHeaders:u,publicFilters:d,publicAssetPacks:f});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.environment,e.next=3,p.get("/asset/".concat(t.id),{params:{environment:r}});case 3:if((o=e.sent).data.assetUrl){e.next=6;break}throw new Error("Unexpected response from the asset endpoint.");case 6:return e.next=8,p.get(o.data.assetUrl);case 8:return a=e.sent,e.abrupt("return",a.data);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,r){var o,a,s,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.environment,o=t.assetPackId){e.next=4;break}throw new Error("The asset does not have a private asset pack id.");case 4:return a="".concat(l.kw.baseUrl,"/").concat(o,"/").concat(t.id,".json"),s=(0,d.mR)(a,n),e.next=8,p.get(s);case 8:return c=e.sent,e.abrupt("return",c.data);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),b=function(e,t){var n="".concat(l.kw.baseUrl,"/").concat(e,"/resources/audio.zip");return(0,d.mR)(n,t)},C=function(e){var t=e.environment;return p.get("/resource",{params:{environment:t}}).then((function(e){return e.data})).then((function(e){var t=e.resourcesUrl,n=e.filtersUrl;if(!t||!n)throw new Error("Unexpected response from the resource endpoint.");return Promise.all([p.get(t).then((function(e){return e.data})),p.get(n).then((function(e){return e.data}))]).then((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];if(!n||!i)throw new Error("Unexpected response from the resources endpoints.");return{resources:n,filters:i}}))}))},j=function(e){var t=e.environment;return p.get("/author",{params:{environment:t}}).then((function(e){return e.data})).then((function(e){var t=e.authorsUrl;if(!t)throw new Error("Unexpected response from author endpoint.");return p.get(t)})).then((function(e){return e.data}))},y=function(e){var t=e.environment;return p.get("/license",{params:{environment:t}}).then((function(e){return e.data})).then((function(e){var t=e.licensesUrl;if(!t)throw new Error("Unexpected response from license endpoint.");return p.get(t)})).then((function(e){return e.data}))},Z=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.get("/asset-pack/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.get("/game-template/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o,a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.userId,o=n.tutorialId,e.next=3,t();case 3:return a=e.sent,e.next=6,p.get("/pdf-tutorial/".concat(o),{params:{userId:r},headers:{Authorization:a}});case 6:return s=e.sent,e.abrupt("return",s.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(l.sT.baseUrl,"/").concat(t.id,"/game.json"),o=(0,d.mR)(r,n),e.abrupt("return",o);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(e){return e.tags.some((function(e){return"pixel art"===e.toLowerCase()}))},P=function(e){var t=e.previewImageUrls[0];return!!t&&(0,d.SS)(t)},E=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.userId,e.next=3,t();case 3:return o=e.sent,e.next=6,p.get("/asset-short-header",{headers:{Authorization:o},params:{userId:r}});case 6:return a=e.sent,e.abrupt("return",a.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.userId,e.next=3,t();case 3:return o=e.sent,e.next=6,p.get("/asset-pack",{headers:{Authorization:o},params:{userId:r}});case 6:return a=e.sent,e.abrupt("return",a.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.userId,e.next=3,t();case 3:return o=e.sent,e.next=6,p.get("/game-template",{headers:{Authorization:o},params:{userId:r}});case 6:return a=e.sent,e.abrupt("return",a.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),L=function(e){return e.startsWith(l.Ck)||e.startsWith(l.vF)},A=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},F=new RegExp("(".concat(A(l.Ck),"|").concat(A(l.vF),")\\/public-resources\\/(.*)\\/([a-z0-9]{64})_(.*)")),O=function(e){var t=F.exec(e);if(!t)throw new Error("The URL is not a valid public asset resource URL: "+e);var n=t[4];return decodeURIComponent(n)}},1333:function(e,t,n){"use strict";n.d(t,{T:function(){return o},g:function(){return a}});var r,i=n(45911),o=function(e){var t=e.onConnectionEstablished,n=e.onTokenReceived,o=e.onError,a=e.onTimeout;r=new WebSocket(i.zB.baseUrl);var s=setTimeout(a,1e4);return r.onopen=function(){console.info("WebSocket - Open."),r&&r.send(JSON.stringify({action:"getConnectionId"}))},r.onclose=function(){console.info("WebSocket - Closed."),clearTimeout(s)},r.onerror=function(e){console.error("WebSocket - Error:",e),clearTimeout(s),o(e)},r.onmessage=function(e){if(e.data){if("string"!==typeof e.data)return void console.error("WebSocket - event data of type ".concat(typeof e.data," not supported."));var r=JSON.parse(e.data);if("authenticationResult"===r.type){var i=r.data;return void n(i)}if("connectionId"===r.type){var o=r.data.connectionId;return o?(clearTimeout(s),void t(o)):void console.error("WebSocket - No connectionId received.")}}},r},a=function(){r&&(r.close(),r=null)}},2861:function(e,t,n){"use strict";n.d(t,{$A:function(){return p},Ch:function(){return f},Ey:function(){return u},M7:function(){return j},OV:function(){return h},SH:function(){return d},gK:function(){return v},jy:function(){return C},l8:function(){return c},tP:function(){return y},vO:function(){return x},x9:function(){return g},zi:function(){return b}});var r=n(74165),i=n(15861),o=n(14446),a=n.n(o),s=n(45911),l=n(91),c="trivial_first-event",u="trivial_first-behavior",d="trivial_first-preview",p="trivial_first-web-export",f="trivial_first-extension",h="trivial_first-effect",g="trivial_first-debug",x=function(e){return"trivial_in-app-tutorial-completed_"+e},m=function(e,t){return e.map((function(e){return e.achievementId})).includes(t)},v=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,c,u,d,p,f,h;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.badges,o=t.profile,c=t.getAuthorizationHeader,u=t.onBadgesChanged,i&&o){e.next=3;break}return e.abrupt("return",null);case 3:if(!m(i,n)){e.next=5;break}return e.abrupt("return",null);case 5:return d=o.id,e.prev=6,e.next=9,c();case 9:return p=e.sent,e.next=12,a().post("".concat(s.ST.baseUrl,"/user/").concat(d,"/badge"),{achievementId:n},{params:{userId:d},headers:{Authorization:p}});case 12:return f=e.sent,u(),e.abrupt("return",f.data);case 17:if(e.prev=17,e.t0=e.catch(6),!(h=(0,l.T)(e.t0))||409!==h.status){e.next=24;break}console.warn("Badge already exists"),e.next=25;break;case 24:throw e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,17]])})));return function(t,n){return e.apply(this,arguments)}}(),b=function(e,t,n){var r=e.badges;return r?m(r,t)?n:function(){try{v(e,t)}catch(a){console.error("Couldn't create badge ".concat(t,"; ").concat(a))}for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n.apply(null,i)}:n},C=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("".concat(s.ST.baseUrl,"/achievement"));case 2:if(t=e.sent,n=t.data,Array.isArray(n)){e.next=6;break}throw new Error("Invalid response from the achievements API");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o,l,c,u,d,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.badges,i=t.firebaseUser,o=t.getAuthorizationHeader,l=t.onBadgesChanged,n&&i){e.next=3;break}return e.abrupt("return",null);case 3:if(0!==(c=n.filter((function(e){return!e.seen}))).length){e.next=6;break}return e.abrupt("return");case 6:return u=i.uid,e.prev=7,e.next=10,o();case 10:return d=e.sent,e.next=13,a().patch("".concat(s.ST.baseUrl,"/user/").concat(u,"/badge"),c.map((function(e){return{achievementId:e.achievementId,seen:!0}})),{params:{userId:u},headers:{Authorization:d}});case 13:return p=e.sent,l(),e.abrupt("return",p.data);case 18:e.prev=18,e.t0=e.catch(7),console.error("Couldn't mark badges as seen: ".concat(e.t0));case 21:case"end":return e.stop()}}),e,null,[[7,18]])})));return function(t){return e.apply(this,arguments)}}(),y=function(e,t){return t.unlockedAt&&e.unlockedAt?t.unlockedAt-e.unlockedAt:e.unlockedAt&&!t.unlockedAt?-1:!e.unlockedAt&&t.unlockedAt?1:0}},10959:function(e,t,n){"use strict";n.d(t,{$C:function(){return C},BY:function(){return Z},Bc:function(){return b},Bh:function(){return T},Fp:function(){return g},NZ:function(){return j},QX:function(){return k},UN:function(){return x},Xr:function(){return y},Zi:function(){return m},c8:function(){return w},ch:function(){return v},n2:function(){return S},oj:function(){return f},q7:function(){return p}});var r=n(1413),i=n(74165),o=n(15861),a=n(14446),s=n.n(a),l=n(28842),c=n(45911),u=n(68151),d=n(70983),p=function(e){return e?e.filter((function(e){return"apple-certificate"===e.type})):null},f=function(e){return e?e.filter((function(e){return"apple-auth-key"===e.type})):null},h=function(e){var t=e.gameName,n=e.gameVersion;try{var r=/[./\\[\]<>&$@=;:+,?^{}%#~|'"*]/g;return"".concat(t.slice(0,50).replace(r,"_"),"-").concat(n.slice(0,15).replace(r,"_"))}catch(i){return console.warn("An error happened when computing game extensionless filename:",i),"game"}},g=function(e,t){return e&&e[t]?"s3Key"===t?e.gameId?c.Zw.getInstantBuildUrl(e.id):"https://games.gdevelop-app.com/".concat(e[t],"/index.html"):"https://builds.gdevelop-app.com/".concat(e[t]):null},x=function(e,t){var n=e.getResourcesManager(),r=e.getPlatformSpecificAssets().get("liluo","thumbnail");if(!n.hasResource(r))return"";var i=n.getResource(r).getFile(),o=(0,d.basename)(i);if(!o)return"";var a="https://games.gdevelop-app.com/game-".concat(t,"/").concat(o);return encodeURI(a)},m=function(){var e="game-archive-"+(0,l._)(),t="application/zip",n=e+"/game-archive.zip";return(0,u.eu)({uploadType:"build",key:n,contentType:t}).then((function(e){return{signedUrl:e.signedUrl,contentType:t,key:n}}))},v=function(e,t,n,r,i,o,a){return e().then((function(e){return s().post("".concat(c.pB.baseUrl,"/build"),null,{params:{userId:t,key:n,type:"electron-build",targets:r.join(","),gameId:i,filename:h(o),payWithCredits:a},headers:{Authorization:e}})})).then((function(e){return e.data}))},b=function(e,t,n,r,i,o){return e().then((function(e){return s().post("".concat(c.pB.baseUrl,"/build"),null,{params:{userId:t,key:n,type:"web-build",targets:"s3",gameId:r,payWithCredits:o},headers:{Authorization:e}})})).then((function(e){return e.data}))},C=function(e,t,n,r,i,o,a,l){return e().then((function(e){return s().post("".concat(c.pB.baseUrl,"/build"),JSON.stringify({signing:{keystore:i}}),{params:{userId:t,key:n,type:"cordova-build",targets:r.join(","),gameId:o,filename:h(a),payWithCredits:l},headers:{Authorization:e}})})).then((function(e){return e.data}))},j=function(e,t,n,r,i,o,a,l){return e().then((function(e){return s().post("".concat(c.pB.baseUrl,"/build"),{signing:i},{params:{userId:t,key:n,type:"cordova-ios-build",targets:r.join(","),gameId:o,filename:h(a),payWithCredits:l},headers:{Authorization:e}})})).then((function(e){return e.data}))},y=function(e,t,n){return e().then((function(e){return s().get("".concat(c.pB.baseUrl,"/build/").concat(n),{params:{userId:t},headers:{Authorization:e}})})).then((function(e){return e.data}))},Z=function(e,t,n){return e().then((function(e){return s().get("".concat(c.pB.baseUrl,"/build"),{params:{userId:t,gameId:n},headers:{Authorization:e}})})).then((function(e){return e.data}))},k=function(e,t,n,r){var i=r.name,o=r.description;return e().then((function(e){return s().patch("".concat(c.pB.baseUrl,"/build/").concat(n),{name:i,description:o},{params:{userId:t},headers:{Authorization:e}})})).then((function(e){return e.data}))},w=function(e,t,n){return e().then((function(e){return s().delete("".concat(c.pB.baseUrl,"/build/").concat(n),{params:{userId:t},headers:{Authorization:e}})})).then((function(e){return e.data}))},T=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return r=e.sent,e.next=5,s().get("".concat(c.pB.baseUrl,"/signing-credential"),{params:{userId:n},headers:{Authorization:r}});case 5:if((o=e.sent).data&&Array.isArray(o.data)){e.next=8;break}throw new Error("Unexpected data returned by the endpoint.");case 8:return e.abrupt("return",o.data);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S={createCertificateSigningRequest:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,o){var a,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,s().post("".concat(c.pB.baseUrl,"/signing-credential/action/create-csr"),(0,r.Z)({},o),{params:{userId:n},headers:{Authorization:a}});case 5:return l=e.sent,e.abrupt("return",l.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),uploadCertificate:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,o){var a,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,s().post("".concat(c.pB.baseUrl,"/signing-credential/action/upload-certificate"),(0,r.Z)({},o),{params:{userId:n},headers:{Authorization:a}});case 5:return l=e.sent,e.abrupt("return",l.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),createCertificateP12:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,o){var a,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,s().post("".concat(c.pB.baseUrl,"/signing-credential/action/create-certificate-p12"),(0,r.Z)({},o),{params:{userId:n},headers:{Authorization:a}});case 5:return l=e.sent,e.abrupt("return",l.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),uploadMobileProvision:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,o){var a,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,s().post("".concat(c.pB.baseUrl,"/signing-credential/action/upload-mobile-provision"),(0,r.Z)({},o),{params:{userId:n},headers:{Authorization:a}});case 5:return l=e.sent,e.abrupt("return",l.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),uploadAuthKey:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,o){var a,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,s().post("".concat(c.pB.baseUrl,"/signing-credential/action/upload-auth-key"),(0,r.Z)({},o),{params:{userId:n},headers:{Authorization:a}});case 5:return l=e.sent,e.abrupt("return",l.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),deleteSigningCredential:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,o){var a,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,s().delete("".concat(c.pB.baseUrl,"/signing-credential"),{params:(0,r.Z)({userId:n},o),headers:{Authorization:a}});case 5:return l=e.sent,e.abrupt("return",l.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}},91:function(e,t,n){"use strict";n.d(t,{T:function(){return r}});var r=function(e){return e?"object"!=typeof e?null:"object"===typeof e.response&&e.response&&"number"===typeof e.response.status?{status:e.response.status,code:"object"===typeof e.response.data&&e.response.data&&"string"===typeof e.response.data.code?e.response.data.code:null}:null:null}},69197:function(e,t,n){"use strict";n.d(t,{Ex:function(){return u},W7:function(){return c},rx:function(){return l}});var r=n(74165),i=n(15861),o=n(14446),a=n.n(o),s=n(45911),l=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("".concat(s.Ud.baseUrl,"/example-short-header-and-filter"));case 2:if(t=e.sent,t.data){e.next=6;break}throw new Error("Unexpected response from examples endpoint.");case 6:return e.abrupt("return",t.data);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("".concat(s.Ud.baseUrl,"/example-v2/").concat(t.id));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("".concat(s.Ud.baseUrl,"/example-short-header"),{params:{authorId:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},39126:function(e,t,n){"use strict";n.d(t,{E:function(){return g},Fk:function(){return m},In:function(){return h},RT:function(){return v},a2:function(){return f},y7:function(){return b}});var r=n(74165),i=n(15861),o=n(1413),a=n(14446),s=n.n(a),l=n(45911),c=n(55736),u=n.n(c),d=n.g.gd,p=function(e){return Array.isArray(e.tags)?e:(0,o.Z)((0,o.Z)({},e),{},{tags:e.tags.split(",").map((function(e){return e.trim().toLowerCase()}))})},f=function(e,t){return!t.gdevelopVersion||u()(e,t.gdevelopVersion,{includePrerelease:!0})},h=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().get("".concat(l.Ud.baseUrl,"/extensions-registry"));case 2:if(t=e.sent,n=t.data){e.next=6;break}throw new Error("Unexpected response from the extensions endpoint.");case 6:return n.headers||(n.headers=n.extensionShortHeaders),n.views.default.firstIds||(n.views.default.firstIds=n.views.default.firstExtensionIds),e.abrupt("return",(0,o.Z)((0,o.Z)({},n),{},{headers:n.headers.map(p)}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().get("".concat(l.Ud.baseUrl,"/behaviors-registry"));case 2:if(t=e.sent,n=t.data){e.next=6;break}throw new Error("Unexpected response from the behaviors endpoint.");case 6:return e.abrupt("return",(0,o.Z)((0,o.Z)({},n),{},{headers:n.headers.map(x)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(e){return e.type=d.PlatformExtension.getBehaviorFullType(e.extensionNamespace||e.extensionName,e.name),e=p(e)},m=function(e){return s().get(e.headerUrl).then((function(e){var t=e.data;return p(t)}))},v=function(e){return s().get(e.url).then((function(e){var t=e.data;return p(t)}))},b=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().get("".concat(l.Ud.baseUrl,"/extension-short-header"),{params:{authorId:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},16999:function(e,t,n){"use strict";n.d(t,{Bi:function(){return g},IH:function(){return d},LK:function(){return k},Oo:function(){return u},Pv:function(){return j},TT:function(){return b},Ui:function(){return Z},WO:function(){return f},b:function(){return m},bb:function(){return y},cF:function(){return v},hO:function(){return p},lX:function(){return w},m7:function(){return C},n6:function(){return T},r$:function(){return h},wC:function(){return x}});var r=n(74165),i=n(15861),o=n(14446),a=n.n(o),s=n(65522),l=n.n(s),c=n(45911),u=function(e,t){switch(e){case"action":return t._({id:"Action"});case"adventure":return t._({id:"Adventure"});case"shooter":return t._({id:"Shooter"});case"platformer":return t._({id:"Platformer"});case"rpg":return t._({id:"RPG"});case"horror":return t._({id:"Horror"});case"strategy":return t._({id:"Strategy"});case"puzzle":return t._({id:"Puzzle"});case"racing":return t._({id:"Racing"});case"simulation":return t._({id:"Simulation"});case"sport":return t._({id:"Sport"});case"story-rich":return t._({id:"Story-Rich"});case"survival":return t._({id:"Survival"});case"building":return t._({id:"Building"});case"multiplayer":return t._({id:"Multiplayer"});case"leaderboard":return t._({id:"Leaderboard"});case"educational":return t._({id:"Educational"});default:return l()(e)}},d=function(e){if(!e)return null;var t=e.cachedCurrentSlug;return t?c.Zw.getGameUrlWithSlug(t.username,t.gameSlug):c.Zw.getGameUrl(e.id)},p=function(e){return e?e.gameSlug&&e.userSlug?c.Zw.getGameUrlWithSlug(e.userSlug,e.gameSlug):c.Zw.getGameUrl(e.id):null},f=function(e){return e.map((function(e){return{userId:e,level:"owner"}}))},h=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var o,s,l,u,d,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.gameId,s=i.gameName,l=i.authorName,u=i.templateSlug,e.next=3,t();case 3:return d=e.sent,e.next=6,a().post("".concat(c.qD.baseUrl,"/game/").concat(o),{gameName:s,authorName:l,templateSlug:u},{params:{userId:n},headers:{Authorization:d}});case 6:return p=e.sent,e.abrupt("return",p.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),g=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,o){var s,l,u,d,p,f,h,g,x,m,v,b,C,j,y,Z;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=o.gameName,l=o.categories,u=o.authorName,d=o.publicWebBuildId,p=o.description,f=o.playWithKeyboard,h=o.playWithGamepad,g=o.playWithMobile,x=o.orientation,m=o.thumbnailUrl,v=o.discoverable,b=o.acceptsBuildComments,C=o.acceptsGameComments,j=o.displayAdsOnGamePage,e.next=3,t();case 3:return y=e.sent,e.next=6,a().patch("".concat(c.qD.baseUrl,"/game/").concat(i),{gameName:s,categories:l,authorName:u,publicWebBuildId:d,description:p,playWithKeyboard:f,playWithGamepad:h,playWithMobile:g,orientation:x,thumbnailUrl:m,discoverable:v,acceptsBuildComments:b,acceptsGameComments:C,displayAdsOnGamePage:j},{params:{userId:n},headers:{Authorization:y}});case 6:return Z=e.sent,e.abrupt("return",Z.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),x=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,o){var s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return s=e.sent,e.next=5,a().post("".concat(c.qD.baseUrl,"/game/action/set-acls"),{gameId:i,newAcls:o},{params:{userId:n},headers:{Authorization:s}});case 5:return l=e.sent,e.abrupt("return",l.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),m=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,o,s){var l,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return l=e.sent,e.next=5,a().post("".concat(c.qD.baseUrl,"/game/action/set-slug"),{gameId:i,userSlug:o,gameSlug:s},{params:{userId:n},headers:{Authorization:l}});case 5:return u=e.sent,e.abrupt("return",u.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}(),v=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return o=e.sent,e.next=5,a().get("".concat(c.qD.baseUrl,"/game/").concat(i),{params:{userId:n},headers:{Authorization:o}});case 5:return s=e.sent,e.abrupt("return",s.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),b=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return o=e.sent,e.next=5,a().delete("".concat(c.qD.baseUrl,"/game/").concat(i),{params:{userId:n},headers:{Authorization:o}});case 5:return s=e.sent,e.abrupt("return",s.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),C=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return i=e.sent,e.next=5,a().get("".concat(c.qD.baseUrl,"/game"),{params:{userId:n},headers:{Authorization:i}});case 5:return o=e.sent,e.abrupt("return",o.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("".concat(c.qD.baseUrl,"/public-game/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("".concat(c.qD.baseUrl,"/game-category"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.gameId,o=n.userId,s=n.usageType,e.next=3,t();case 3:return l=e.sent,e.next=6,a().post("".concat(c.qD.baseUrl,"/game/action/buy-with-credits"),{},{params:{userId:o,gameId:i,usageType:s},headers:{Authorization:l}});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.gameId,o=n.userId,e.next=3,t();case 3:return s=e.sent,e.next=6,a().get("".concat(c.qD.baseUrl,"/game-featuring"),{params:{userId:o,gameId:i},headers:{Authorization:s}});case 6:return l=e.sent,e.abrupt("return",l.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("".concat(c.qD.baseUrl,"/marketing-plan"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("".concat(c.qD.baseUrl,"/game-comment-quality-ratings-leaderboard?leaderboardRegionName=global"));case 2:if(t=e.sent,Array.isArray(t.data)){e.next=5;break}throw new Error("Invalid response from the game leaderboard API");case 5:return e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},19817:function(e,t,n){"use strict";n.d(t,{EB:function(){return C},HD:function(){return j},PP:function(){return Z},Rv:function(){return y},TO:function(){return P},UO:function(){return v},W3:function(){return k},Xj:function(){return m},bs:function(){return x},d1:function(){return E},oO:function(){return S},yw:function(){return b}});var r=n(74165),i=n(15861),o=n(14446),a=n.n(o),s=n(45911),l=n(50057),c=n.n(l),u=n(2066),d=c()("fs"),p=d?d.promises:null,f=c()("path"),h=c()("@electron/remote"),g=h?h.app:null,x="flingGame",m="plinkoMultiplier",v="cameraParallax",b="healthBar",C="joystick",j="timer",y="object3d",Z=[m,j,v,b,C,y],k=[].concat(Z,[x]),w=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}throw new Error("Filesystem is not supported.");case 2:return e.prev=2,e.next=5,p.readFile(t,{encoding:"utf8"});case 5:return n=e.sent,i=JSON.parse(n),e.abrupt("return",i);case 10:throw e.prev=10,e.t0=e.catch(2),new Error(t+" is a corrupted/malformed file.");case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!!h&&!u.ZP.isDev()){e.next=3;break}return e.abrupt("return",null);case 3:return n=g?g.getAppPath():process.cwd(),i=f.join(n,"..","inAppTutorials/".concat(t,".json")),e.next=7,w(i);case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T("inAppTutorialShortHeaders");case 3:if(!(t=e.sent)){e.next=6;break}return e.abrupt("return",t);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.warn("Could not read the short headers stored locally. Trying to fetch the API.");case 11:return e.next=13,a().get("".concat(s.Ud.baseUrl,"/in-app-tutorial-short-header"));case 13:return n=e.sent,e.abrupt("return",n.data);case 15:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T(t.id);case 3:if(!(n=e.sent)){e.next=6;break}return e.abrupt("return",n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.warn("Could not read the in app tutorial stored locally. Trying to fetch the API.");case 11:return e.next=13,a().get(t.contentUrl);case 13:return i=e.sent,e.abrupt("return",i.data);case 15:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),E=function(e){return[m,j,v,b,C,y].includes(e)}},50631:function(e,t,n){"use strict";n.d(t,{nq:function(){return u},wd:function(){return c}});var r=n(74165),i=n(15861),o=n(14446),a=n.n(o),s=n(45911),l=a().create({baseURL:s.ST.baseUrl}),c=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,e.next=3,t();case 3:return o=e.sent,e.next=6,l.get("/notification",{headers:{Authorization:o},params:{userId:i,perPage:25}});case 6:return a=e.sent,e.abrupt("return",a.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a,s,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,o=n.notificationIds,a=n.allStartingFromNotificationId,e.next=3,t();case 3:if(s=e.sent,!o){e.next=8;break}c={notifications:o.map((function(e){return{notificationId:e,seen:!0}}))},e.next=13;break;case 8:if(!a){e.next=12;break}c={afterNotification:{notificationId:a}},e.next=13;break;case 12:throw new Error("Either parameter notificationIds or allStartingFromNotificationId must be defined.");case 13:return e.next=15,l.post("/notification/action/mark-as-seen",c,{headers:{Authorization:s},params:{userId:i}});case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},14737:function(e,t,n){"use strict";n.d(t,{BM:function(){return b},GA:function(){return c},QN:function(){return m},RE:function(){return g},Rc:function(){return f},VE:function(){return y},Wk:function(){return x},YJ:function(){return p},YO:function(){return Z},be:function(){return d},hO:function(){return C},mf:function(){return u},nI:function(){return v},uA:function(){return j},vW:function(){return h}});var r=n(74165),i=n(15861),o=n(14446),a=n.n(o),s=n(45911),l=n(11858),c=function(e){return"".concat(e.split("-")[0],"-...")},u=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,l,c,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.getAuthorizationHeader,o=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return l=o.uid,e.next=6,i();case 6:return c=e.sent,e.next=9,a().get("".concat(s.eU.baseUrl,"/game/").concat(n,"/leaderboard?deleted=false"),{headers:{Authorization:c},params:{userId:l}});case 9:return u=e.sent,e.abrupt("return",u.data);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(e){var t=e.split(",").map((function(e){return e.trim()})).reduce((function(e,t){var n=t.match(/;\srel="(\w*)"/),r=t.match(/^<(.*)>/);return e&&n&&r&&(e[n[1]]=r[1]),e}),{});return Object.keys(t).includes("next")?t.next:null},p=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var o,l,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.forceUri||"/game/".concat(t,"/leaderboard/").concat(n,"/entry"),e.next=3,a().get("".concat(s.eU.baseUrl).concat(o),{params:i.forceUri?null:{onlyBestEntry:i.onlyBestEntry,perPage:i.pageSize}});case 3:return l=e.sent,c=l.headers.link?d(l.headers.link):null,e.abrupt("return",{entries:l.data,nextPageUri:c});case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),f=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var o,l,c,u,d,p,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=i.name,l=i.sort,c=t.getAuthorizationHeader,u=t.firebaseUser){e.next=4;break}return e.abrupt("return");case 4:return d=u.uid,e.next=7,c();case 7:return p=e.sent,e.next=10,a().post("".concat(s.eU.baseUrl,"/game/").concat(n,"/leaderboard"),{name:o,sort:l},{headers:{Authorization:p},params:{userId:d}});case 10:return f=e.sent,e.abrupt("return",f.data);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),h=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var o,l,c,u,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.getAuthorizationHeader,l=t.firebaseUser){e.next=3;break}throw new Error("User is not authenticated.");case 3:return c=l.uid,e.next=6,o();case 6:return u=e.sent,e.next=9,a().post("".concat(s.eU.baseUrl,"/game/").concat(n,"/leaderboard/action/copy"),i,{headers:{Authorization:u},params:{userId:c}});case 9:return d=e.sent,e.abrupt("return",d.data);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),g=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,o){var l,c,u,d,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=t.getAuthorizationHeader,c=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return u=c.uid,e.next=6,l();case 6:return d=e.sent,e.next=9,a().patch("".concat(s.eU.baseUrl,"/game/").concat(n,"/leaderboard/").concat(i),o,{headers:{Authorization:d},params:{userId:u}});case 9:return p=e.sent,e.abrupt("return",p.data);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),x=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var o,l,c,u,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.getAuthorizationHeader,l=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return c=l.uid,e.next=6,o();case 6:return u=e.sent,e.next=9,a().put("".concat(s.eU.baseUrl,"/game/").concat(n,"/leaderboard/").concat(i,"/reset"),{},{headers:{Authorization:u},params:{userId:c}});case 9:return d=e.sent,e.abrupt("return",d.data);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),m=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var o,l,c,u,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.getAuthorizationHeader,l=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return c=l.uid,e.next=6,o();case 6:return u=e.sent,e.next=9,a().delete("".concat(s.eU.baseUrl,"/game/").concat(n,"/leaderboard/").concat(i),{headers:{Authorization:u},params:{userId:c}});case 9:return d=e.sent,e.abrupt("return",d.data);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),v=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,o){var l,c,u,d,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=t.getAuthorizationHeader,c=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return u=c.uid,e.next=6,l();case 6:return d=e.sent,e.next=9,a().delete("".concat(s.eU.baseUrl,"/game/").concat(n,"/leaderboard/").concat(i,"/entry/").concat(o),{headers:{Authorization:d},params:{userId:u}});case 9:return p=e.sent,e.abrupt("return",p.data);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),b=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var o,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.gameId,l=i.type,e.abrupt("return",t().then((function(e){return a().get("".concat(s.eU.baseUrl,"/game/").concat(o,"/comment"),{params:{userId:n,type:l},headers:{Authorization:e}})})).then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),C=function(e){return!!e.text},j=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var o,l,c,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.gameId,l=i.commentId,c=i.processed,u=i.qualityRating,e.abrupt("return",t().then((function(e){return a().patch("".concat(s.eU.baseUrl,"/game/").concat(o,"/comment/").concat(l),{processed:c,qualityRating:u},{params:{userId:n},headers:{Authorization:e}})})).then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),y=function(e){var t=e.limits;return{canUseTheme:!!t&&!!t.capabilities.leaderboards&&("BASIC"===t.capabilities.leaderboards.themeCustomizationCapabilities||"FULL"===t.capabilities.leaderboards.themeCustomizationCapabilities),canUseCustomCss:!!t&&!!t.capabilities.leaderboards&&!!t.capabilities.leaderboards.canUseCustomCss}},Z=function(e){var t=e&&e.theme?{backgroundColor:e.theme.backgroundColor,textColor:e.theme.textColor,highlightBackgroundColor:e.theme.highlightBackgroundColor,highlightTextColor:e.theme.highlightTextColor}:{backgroundColor:"#d0d1ff",textColor:"#000000",highlightBackgroundColor:"#5763dd",highlightTextColor:"#ffffff"};return{backgroundColor:(0,l.JO)(t.backgroundColor),textColor:(0,l.JO)(t.textColor),highlightBackgroundColor:(0,l.JO)(t.highlightBackgroundColor),highlightTextColor:(0,l.JO)(t.highlightTextColor)}}},34517:function(e,t,n){"use strict";n.d(t,{v9:function(){return V},XU:function(){return z},j4:function(){return W},so:function(){return J},nZ:function(){return re},Z7:function(){return oe},eM:function(){return ie},Dj:function(){return be},Hj:function(){return pe},ml:function(){return Ce},dh:function(){return me},u_:function(){return ve},Xj:function(){return ce},LG:function(){return ne},NC:function(){return K},MH:function(){return te},Fz:function(){return ue},Sx:function(){return ge},Rn:function(){return Q},Un:function(){return le},hj:function(){return je},xU:function(){return se},If:function(){return Ze},np:function(){return de},Gk:function(){return ye},ll:function(){return ae}});var r=n(74165),i=n(15861),o=n(14446),a=n.n(o),s=n(45911),l=n(38428),c=n.n(l),u=n(60136),d=n(29388),p=n(43144),f=n(15671),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function g(e,t,n,r){var i,o,a,s=t||[0],l=(n=n||0)>>>3,c=-1===r?3:0;for(i=0;i<e.length;i+=1)o=(a=i+l)>>>2,s.length<=o&&s.push(0),s[o]|=e[i]<<8*(c+r*(a%4));return{value:s,binLen:8*e.length+n}}function x(e,t,n){switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":return function(e,t,r){return function(e,t,n,r){var i,o,a,s;if(0!=e.length%2)throw new Error("String of HEX type must be in byte increments");var l=t||[0],c=(n=n||0)>>>3,u=-1===r?3:0;for(i=0;i<e.length;i+=2){if(o=parseInt(e.substr(i,2),16),isNaN(o))throw new Error("String of HEX type contains invalid characters");for(a=(s=(i>>>1)+c)>>>2;l.length<=a;)l.push(0);l[a]|=o<<8*(u+r*(s%4))}return{value:l,binLen:4*e.length+n}}(e,t,r,n)};case"TEXT":return function(e,r,i){return function(e,t,n,r,i){var o,a,s,l,c,u,d,p,f=0,h=n||[0],g=(r=r||0)>>>3;if("UTF8"===t)for(d=-1===i?3:0,s=0;s<e.length;s+=1)for(a=[],128>(o=e.charCodeAt(s))?a.push(o):2048>o?(a.push(192|o>>>6),a.push(128|63&o)):55296>o||57344<=o?a.push(224|o>>>12,128|o>>>6&63,128|63&o):(s+=1,o=65536+((1023&o)<<10|1023&e.charCodeAt(s)),a.push(240|o>>>18,128|o>>>12&63,128|o>>>6&63,128|63&o)),l=0;l<a.length;l+=1){for(c=(u=f+g)>>>2;h.length<=c;)h.push(0);h[c]|=a[l]<<8*(d+i*(u%4)),f+=1}else for(d=-1===i?2:0,p="UTF16LE"===t&&1!==i||"UTF16LE"!==t&&1===i,s=0;s<e.length;s+=1){for(o=e.charCodeAt(s),!0===p&&(o=(l=255&o)<<8|o>>>8),c=(u=f+g)>>>2;h.length<=c;)h.push(0);h[c]|=o<<8*(d+i*(u%4)),f+=2}return{value:h,binLen:8*f+r}}(e,t,r,i,n)};case"B64":return function(e,t,r){return function(e,t,n,r){var i,o,a,s,l,c,u=0,d=t||[0],p=(n=n||0)>>>3,f=-1===r?3:0,g=e.indexOf("=");if(-1===e.search(/^[a-zA-Z0-9=+/]+$/))throw new Error("Invalid character in base-64 string");if(e=e.replace(/=/g,""),-1!==g&&g<e.length)throw new Error("Invalid '=' found in base-64 string");for(i=0;i<e.length;i+=4){for(s=e.substr(i,4),a=0,o=0;o<s.length;o+=1)a|=h.indexOf(s.charAt(o))<<18-6*o;for(o=0;o<s.length-1;o+=1){for(l=(c=u+p)>>>2;d.length<=l;)d.push(0);d[l]|=(a>>>16-8*o&255)<<8*(f+r*(c%4)),u+=1}}return{value:d,binLen:8*u+n}}(e,t,r,n)};case"BYTES":return function(e,t,r){return function(e,t,n,r){var i,o,a,s,l=t||[0],c=(n=n||0)>>>3,u=-1===r?3:0;for(o=0;o<e.length;o+=1)i=e.charCodeAt(o),a=(s=o+c)>>>2,l.length<=a&&l.push(0),l[a]|=i<<8*(u+r*(s%4));return{value:l,binLen:8*e.length+n}}(e,t,r,n)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(h){throw new Error("ARRAYBUFFER not supported by this environment")}return function(e,t,r){return function(e,t,n,r){return g(new Uint8Array(e),t,n,r)}(e,t,r,n)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(h){throw new Error("UINT8ARRAY not supported by this environment")}return function(e,t,r){return g(e,t,r,n)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function m(e,t,n,r){switch(e){case"HEX":return function(e){return function(e,t,n,r){var i,o,a="0123456789abcdef",s="",l=t/8,c=-1===n?3:0;for(i=0;i<l;i+=1)o=e[i>>>2]>>>8*(c+n*(i%4)),s+=a.charAt(o>>>4&15)+a.charAt(15&o);return r.outputUpper?s.toUpperCase():s}(e,t,n,r)};case"B64":return function(e){return function(e,t,n,r){var i,o,a,s,l,c="",u=t/8,d=-1===n?3:0;for(i=0;i<u;i+=3)for(s=i+1<u?e[i+1>>>2]:0,l=i+2<u?e[i+2>>>2]:0,a=(e[i>>>2]>>>8*(d+n*(i%4))&255)<<16|(s>>>8*(d+n*((i+1)%4))&255)<<8|l>>>8*(d+n*((i+2)%4))&255,o=0;o<4;o+=1)c+=8*i+6*o<=t?h.charAt(a>>>6*(3-o)&63):r.b64Pad;return c}(e,t,n,r)};case"BYTES":return function(e){return function(e,t,n){var r,i,o="",a=t/8,s=-1===n?3:0;for(r=0;r<a;r+=1)i=e[r>>>2]>>>8*(s+n*(r%4))&255,o+=String.fromCharCode(i);return o}(e,t,n)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(h){throw new Error("ARRAYBUFFER not supported by this environment")}return function(e){return function(e,t,n){var r,i=t/8,o=new ArrayBuffer(i),a=new Uint8Array(o),s=-1===n?3:0;for(r=0;r<i;r+=1)a[r]=e[r>>>2]>>>8*(s+n*(r%4))&255;return o}(e,t,n)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(h){throw new Error("UINT8ARRAY not supported by this environment")}return function(e){return function(e,t,n){var r,i=t/8,o=-1===n?3:0,a=new Uint8Array(i);for(r=0;r<i;r+=1)a[r]=e[r>>>2]>>>8*(o+n*(r%4))&255;return a}(e,t,n)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}var v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],b=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],C=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function j(e){var t={outputUpper:!1,b64Pad:"=",outputLen:-1},n=e||{},r="Output length must be a multiple of 8";if(t.outputUpper=n.outputUpper||!1,n.b64Pad&&(t.b64Pad=n.b64Pad),n.outputLen){if(n.outputLen%8!=0)throw new Error(r);t.outputLen=n.outputLen}else if(n.shakeLen){if(n.shakeLen%8!=0)throw new Error(r);t.outputLen=n.shakeLen}if("boolean"!=typeof t.outputUpper)throw new Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw new Error("Invalid b64Pad formatting option");return t}var y=(0,p.Z)((function e(t,n){(0,f.Z)(this,e),this.t=t,this.i=n}));function Z(e,t){var n;return t<32?(n=32-t,new y(e.t>>>t|e.i<<n,e.i>>>t|e.t<<n)):(n=64-t,new y(e.i>>>t|e.t<<n,e.t>>>t|e.i<<n))}function k(e,t){return new y(e.t>>>t,e.i>>>t|e.t<<32-t)}function w(e,t,n){return new y(e.t&t.t^e.t&n.t^t.t&n.t,e.i&t.i^e.i&n.i^t.i&n.i)}function T(e){var t=Z(e,28),n=Z(e,34),r=Z(e,39);return new y(t.t^n.t^r.t,t.i^n.i^r.i)}function S(e,t){var n,r;n=(65535&e.i)+(65535&t.i);var i=(65535&(r=(e.i>>>16)+(t.i>>>16)+(n>>>16)))<<16|65535&n;return n=(65535&e.t)+(65535&t.t)+(r>>>16),r=(e.t>>>16)+(t.t>>>16)+(n>>>16),new y((65535&r)<<16|65535&n,i)}function P(e,t,n,r){var i,o;i=(65535&e.i)+(65535&t.i)+(65535&n.i)+(65535&r.i);var a=(65535&(o=(e.i>>>16)+(t.i>>>16)+(n.i>>>16)+(r.i>>>16)+(i>>>16)))<<16|65535&i;return i=(65535&e.t)+(65535&t.t)+(65535&n.t)+(65535&r.t)+(o>>>16),o=(e.t>>>16)+(t.t>>>16)+(n.t>>>16)+(r.t>>>16)+(i>>>16),new y((65535&o)<<16|65535&i,a)}function E(e,t,n,r,i){var o,a;o=(65535&e.i)+(65535&t.i)+(65535&n.i)+(65535&r.i)+(65535&i.i);var s=(65535&(a=(e.i>>>16)+(t.i>>>16)+(n.i>>>16)+(r.i>>>16)+(i.i>>>16)+(o>>>16)))<<16|65535&o;return o=(65535&e.t)+(65535&t.t)+(65535&n.t)+(65535&r.t)+(65535&i.t)+(a>>>16),a=(e.t>>>16)+(t.t>>>16)+(n.t>>>16)+(r.t>>>16)+(i.t>>>16)+(o>>>16),new y((65535&a)<<16|65535&o,s)}function I(e){var t=Z(e,19),n=Z(e,61),r=k(e,6);return new y(t.t^n.t^r.t,t.i^n.i^r.i)}function M(e){var t=Z(e,1),n=Z(e,8),r=k(e,7);return new y(t.t^n.t^r.t,t.i^n.i^r.i)}function L(e){var t=Z(e,14),n=Z(e,18),r=Z(e,41);return new y(t.t^n.t^r.t,t.i^n.i^r.i)}var A=[new y(v[0],3609767458),new y(v[1],602891725),new y(v[2],3964484399),new y(v[3],2173295548),new y(v[4],4081628472),new y(v[5],3053834265),new y(v[6],2937671579),new y(v[7],3664609560),new y(v[8],2734883394),new y(v[9],1164996542),new y(v[10],1323610764),new y(v[11],3590304994),new y(v[12],4068182383),new y(v[13],991336113),new y(v[14],633803317),new y(v[15],3479774868),new y(v[16],2666613458),new y(v[17],944711139),new y(v[18],2341262773),new y(v[19],2007800933),new y(v[20],1495990901),new y(v[21],1856431235),new y(v[22],3175218132),new y(v[23],2198950837),new y(v[24],3999719339),new y(v[25],766784016),new y(v[26],2566594879),new y(v[27],3203337956),new y(v[28],1034457026),new y(v[29],2466948901),new y(v[30],3758326383),new y(v[31],168717936),new y(v[32],1188179964),new y(v[33],1546045734),new y(v[34],1522805485),new y(v[35],2643833823),new y(v[36],2343527390),new y(v[37],1014477480),new y(v[38],1206759142),new y(v[39],344077627),new y(v[40],1290863460),new y(v[41],3158454273),new y(v[42],3505952657),new y(v[43],106217008),new y(v[44],3606008344),new y(v[45],1432725776),new y(v[46],1467031594),new y(v[47],851169720),new y(v[48],3100823752),new y(v[49],1363258195),new y(v[50],3750685593),new y(v[51],3785050280),new y(v[52],3318307427),new y(v[53],3812723403),new y(v[54],2003034995),new y(v[55],3602036899),new y(v[56],1575990012),new y(v[57],1125592928),new y(v[58],2716904306),new y(v[59],442776044),new y(v[60],593698344),new y(v[61],3733110249),new y(v[62],2999351573),new y(v[63],3815920427),new y(3391569614,3928383900),new y(3515267271,566280711),new y(3940187606,3454069534),new y(4118630271,4000239992),new y(116418474,1914138554),new y(174292421,2731055270),new y(289380356,3203993006),new y(460393269,320620315),new y(685471733,587496836),new y(852142971,1086792851),new y(1017036298,365543100),new y(1126000580,2618297676),new y(1288033470,3409855158),new y(1501505948,4234509866),new y(1607167915,987167468),new y(1816402316,1246189591)];function F(e){return"SHA-384"===e?[new y(3418070365,b[0]),new y(1654270250,b[1]),new y(2438529370,b[2]),new y(355462360,b[3]),new y(1731405415,b[4]),new y(41048885895,b[5]),new y(3675008525,b[6]),new y(1203062813,b[7])]:[new y(C[0],4089235720),new y(C[1],2227873595),new y(C[2],4271175723),new y(C[3],1595750129),new y(C[4],2917565137),new y(C[5],725511199),new y(C[6],4215389547),new y(C[7],327033209)]}function O(e,t){var n,r,i,o,a,s,l,c,u,d,p,f,h,g,x,m=[];for(n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],p=0;p<80;p+=1)p<16?(f=2*p,m[p]=new y(e[f],e[f+1])):m[p]=P(I(m[p-2]),m[p-7],M(m[p-15]),m[p-16]),u=E(c,L(a),(g=s,x=l,new y((h=a).t&g.t^~h.t&x.t,h.i&g.i^~h.i&x.i)),A[p],m[p]),d=S(T(n),w(n,r,i)),c=l,l=s,s=a,a=S(o,u),o=i,i=r,r=n,n=S(u,d);return t[0]=S(n,t[0]),t[1]=S(r,t[1]),t[2]=S(i,t[2]),t[3]=S(o,t[3]),t[4]=S(a,t[4]),t[5]=S(s,t[5]),t[6]=S(l,t[6]),t[7]=S(c,t[7]),t}var R=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i){var o;if((0,f.Z)(this,n),"SHA-384"!==e&&"SHA-512"!==e)throw new Error("Chosen SHA variant is not supported");var a=i||{};return(o=t.call(this,e,r,i)).S=o.k,o.N=!0,o.C=-1,o.g=x(o.o,o.h,o.C),o.H=O,o.L=function(e){return e.slice()},o.M=F,o.I=function(t,n,r,i){return function(e,t,n,r,i){for(var o,a=31+(t+129>>>10<<5),s=t+n;e.length<=a;)e.push(0);for(e[t>>>5]|=128<<24-t%32,e[a]=4294967295&s,e[a-1]=s/4294967296|0,o=0;o<e.length;o+=32)r=O(e.slice(o,o+32),r);return"SHA-384"===i?[r[0].t,r[0].i,r[1].t,r[1].i,r[2].t,r[2].i,r[3].t,r[3].i,r[4].t,r[4].i,r[5].t,r[5].i]:[r[0].t,r[0].i,r[1].t,r[1].i,r[2].t,r[2].i,r[3].t,r[3].i,r[4].t,r[4].i,r[5].t,r[5].i,r[6].t,r[6].i,r[7].t,r[7].i]}(t,n,r,i,e)},o.B=F(e),o.m=1024,o.v="SHA-384"===e?384:512,o.Y=!1,a.hmacKey&&o.X(function(e,t,n,r){var i="hmacKey must include a value and format";if(!t)throw new Error(i);if(void 0===t.value||!t.format)throw new Error(i);return x(t.format,t.encoding||"UTF8",n)(t.value)}(0,a.hmacKey,o.C)),o}return(0,p.Z)(n)}(function(){function e(t,n,r){(0,f.Z)(this,e);var i=r||{};if(this.o=n,this.h=i.encoding||"UTF8",this.numRounds=i.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.u=t,this.l=[],this.A=0,this.p=!1,this.R=0,this.U=!1,this.T=[],this.F=[]}return(0,p.Z)(e,[{key:"update",value:function(e){var t,n=0,r=this.m>>>5,i=this.g(e,this.l,this.A),o=i.binLen,a=i.value,s=o>>>5;for(t=0;t<s;t+=r)n+this.m<=o&&(this.B=this.H(a.slice(t,t+r),this.B),n+=this.m);return this.R+=n,this.l=a.slice(n>>>5),this.A=o%this.m,this.p=!0,this}},{key:"getHash",value:function(e,t){var n,r,i=this.v,o=j(t);if(this.Y){if(-1===o.outputLen)throw new Error("Output length must be specified in options");i=o.outputLen}var a=m(e,i,this.C,o);if(this.U&&this.S)return a(this.S(o));for(r=this.I(this.l.slice(),this.A,this.R,this.L(this.B),i),n=1;n<this.numRounds;n+=1)this.Y&&i%32!=0&&(r[r.length-1]&=16777215>>>24-i%32),r=this.I(r,i,0,this.M(this.u),i);return a(r)}},{key:"setHMACKey",value:function(e,t,n){if(!this.N)throw new Error("Variant does not support HMAC");if(this.p)throw new Error("Cannot set MAC key after calling update");var r=x(t,(n||{}).encoding||"UTF8",this.C);this.X(r(e))}},{key:"X",value:function(e){var t,n=this.m>>>3,r=n/4-1;if(1!==this.numRounds)throw new Error("Cannot set numRounds with MAC");if(this.U)throw new Error("MAC key already set");for(n<e.binLen/8&&(e.value=this.I(e.value,e.binLen,0,this.M(this.u),this.v));e.value.length<=r;)e.value.push(0);for(t=0;t<=r;t+=1)this.T[t]=909522486^e.value[t],this.F[t]=1549556828^e.value[t];this.B=this.H(this.T,this.B),this.R=this.m,this.U=!0}},{key:"getHMAC",value:function(e,t){var n=j(t);return m(e,this.v,this.C,n)(this.k())}},{key:"k",value:function(){var e;if(!this.U)throw new Error("Cannot call getHMAC without first setting MAC key");var t=this.I(this.l.slice(),this.A,this.R,this.L(this.B),this.v);return e=this.H(this.F,this.M(this.u)),e=this.I(t,this.v,this.m,e,this.v)}}]),e}()),D=function(e){crypto&&crypto.subtle&&crypto.subtle.digest("SHA-512",e).then((function(e){return Array.from(new Uint8Array(e)).map((function(e){return e.toString(16).padStart(2,"0")})).join("").substr(0,64)})),console.warn("crypto.subtle is not available in this environment - using jsSHA instead.");var t=new R("SHA-512","ARRAYBUFFER");t.update(e);var n=t.getHash("HEX");return Promise.resolve(n.substr(0,64))},_=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(t){var r=t.target?t.target.result:null;r instanceof ArrayBuffer?e(D(r)):n(new Error("Error reading file (arraybuffer issue)."))},r.onerror=function(){n(new Error("Error reading file (errored)."))},r.onabort=function(){n(new Error("Error reading file (aborted)."))},r.readAsArrayBuffer(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=n(48409),N=n(4964),U=n(91),H=n(14737),V=50,z=50,W=15e6,G=a().create({baseURL:s.O1.baseUrl,withCredentials:!(0,B._F)()}),Y=a().create({baseURL:s.Nx.baseUrl}),q=a().create({baseURL:s.Nx.baseUrl,withCredentials:!(0,B._F)()}),X=null,K=function(){return X},J=function(e){if(!X)return e;var t=-1===e.indexOf("?")?"?":"&";return e+t+"gd_resource_token="+encodeURIComponent(X)},Q=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(t,n,(function(){return G.get(J("/".concat(n,"/versions/").concat(i,".zip")),{responseType:"blob"})}));case 2:return o=e.sent,e.prev=3,e.next=6,(0,N.H)(o.data);case 6:return a=e.sent,JSON.parse(a),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n,r){return e.apply(this,arguments)}}(),$=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var o,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i();case 3:return o=e.sent,e.abrupt("return",o);case 7:if(e.prev=7,e.t0=e.catch(0),!(a=(0,U.T)(e.t0))||403!==a.status){e.next=17;break}return e.next=13,ne(t,n);case 13:return e.next=15,i();case 15:return s=e.sent,e.abrupt("return",s);case 17:throw e.t0;case 18:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),ee=function(e){var t=e,n=e.indexOf("?");n>=0&&(t=e.substring(0,n));var r=t.lastIndexOf("/")+1,i=t.indexOf(".zip");return e.substring(r,i)},te=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a,s,l,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.getAuthorizationHeader,o=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return a=o.uid,e.next=6,i();case 6:return s=e.sent,e.next=9,Y.get("/project/".concat(n,"/version"),{headers:{Authorization:s},params:{userId:a}});case 9:if(l=e.sent,c=l.data,Array.isArray(c)){e.next=13;break}throw new Error("Invalid response from the project versions API");case 13:return e.abrupt("return",c);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ne=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.getAuthorizationHeader,o=t.firebaseUser){e.next=3;break}return e.abrupt("return",!1);case 3:return a=o.uid,e.next=6,i();case 6:return s=e.sent,e.next=9,q.get("/project/".concat(n,"/action/authorize"),{headers:{Authorization:s},params:{userId:a},validateStatus:function(e){return!0}});case 9:return l=e.sent,(0,B._F)()&&l.data&&"string"===typeof l.data.gd_resource_jwt&&(r=l.data.gd_resource_jwt,X=r),e.abrupt("return",l.status>=200&&l.status<400);case 12:case"end":return e.stop()}var r}),e)})));return function(t,n){return e.apply(this,arguments)}}(),re=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,B._F)()){e.next=4;break}X=null,e.next=6;break;case 4:return e.next=6,q.get("/action/clear-authorization");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.getAuthorizationHeader,o=t.firebaseUser){e.next=3;break}return e.abrupt("return",null);case 3:return a=o.uid,e.next=6,i();case 6:return s=e.sent,e.next=9,Y.post("/project",n,{headers:{Authorization:s},params:{userId:a}});case 9:return l=e.sent,e.abrupt("return",l.data);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),oe=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o,a,s,l,c,u,d,p,f,h;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.authenticatedUser,i=t.cloudProjectId,o=t.zippedProject,a=t.previousVersion,s=t.restoredFromVersionId,l=n.getAuthorizationHeader,c=n.firebaseUser){e.next=4;break}return e.abrupt("return");case 4:return u=c.uid,e.next=7,l();case 7:return d=e.sent,e.next=10,fe(n,i);case 10:if(p=e.sent){e.next=13;break}return e.abrupt("return");case 13:return f=ee(p),e.next=16,$(n,i,(function(){return G.post(J(p),o,{headers:{"content-type":"application/zip"}})}));case 16:return h={newVersion:f},a&&(h.previousVersion=a),s&&(h.restoredFromVersionId=s),e.prev=19,e.next=22,Y.post("/project/".concat(i,"/action/commit"),h,{headers:{Authorization:d},params:{userId:u}});case 22:return e.abrupt("return",f);case 25:return e.prev=25,e.t0=e.catch(19),console.error("Error while committing version",e.t0),e.abrupt("return",null);case 29:case"end":return e.stop()}}),e,null,[[19,25]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,o,a){var l,u,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==o.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,he(t,n,o);case 4:return l=e.sent,u=Array(l.length),d=0,e.next=9,c().withConcurrency(10).for(l).process(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(i){var o,c,p,f,h;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.resourceFile,c=i.presignedUrl,p=i.index,e.prev=1,e.next=4,$(t,n,(function(){return G.post(J(c),o,{headers:{"content-type":o.type}})}));case 4:f="".concat(s.O1.baseUrl).concat(c),h=f.substr(0,f.indexOf("?")),u[p]={error:null,resourceFile:o,url:h},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),u[p]={error:e.t0,resourceFile:o,url:null};case 12:a(++d,l.length);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}());case 9:return e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),se=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return i=e.sent,e.next=5,Y.get("project",{headers:{Authorization:i},params:{userId:n}});case 5:if(o=e.sent,a=o.data,Array.isArray(a)){e.next=9;break}throw new Error("Invalid response from the projects API");case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),le=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var o,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return o=e.sent,e.next=5,Y.get("user/".concat(i,"/project"),{headers:{Authorization:o},params:{userId:n}});case 5:if(a=e.sent,s=a.data,Array.isArray(s)){e.next=9;break}throw new Error("Invalid response from the projects API");case 9:return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ce=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.getAuthorizationHeader,o=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return a=o.uid,e.next=6,i();case 6:return s=e.sent,e.next=9,Y.get("/project/".concat(n),{headers:{Authorization:s},params:{userId:a}});case 9:return l=e.sent,e.abrupt("return",l.data);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ue=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var o,a,s,l,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.getAuthorizationHeader,a=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return s=a.uid,e.next=6,o();case 6:return l=e.sent,e.next=9,Y.get("/user/".concat(i,"/project/").concat(n),{headers:{Authorization:l},params:{userId:s}});case 9:return c=e.sent,e.abrupt("return",c.data);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),de=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var o,a,s,l,c,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.getAuthorizationHeader,a=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return s={name:i.name?i.name.slice(0,V):void 0,gameId:i.gameId},l=a.uid,e.next=7,o();case 7:return c=e.sent,e.next=10,Y.patch("/project/".concat(n),s,{headers:{Authorization:c},params:{userId:l}});case 10:return u=e.sent,e.abrupt("return",u.data);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),pe=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.getAuthorizationHeader,o=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return a=o.uid,e.next=6,i();case 6:return s=e.sent,e.next=9,Y.delete("/project/".concat(n),{headers:{Authorization:s},params:{userId:a}});case 9:return l=e.sent,e.abrupt("return",l.data);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),fe=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.getAuthorizationHeader,o=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return a=o.uid,e.next=6,i();case 6:return s=e.sent,e.next=9,Y.post("/project/".concat(n,"/action/create-presigned-urls"),{resources:["newProjectVersion"]},{headers:{Authorization:s},params:{userId:a}});case 9:if((l=e.sent).data&&l.data[0]){e.next=12;break}return e.abrupt("return");case 12:return e.abrupt("return",l.data[0]);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),he=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,o){var a,s,l,c,u,d,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getAuthorizationHeader,s=t.firebaseUser){e.next=3;break}throw new Error("User is not authenticated.");case 3:if(0!==o.length){e.next=5;break}return e.abrupt("return",[]);case 5:return l=s.uid,e.next=8,a();case 8:return c=e.sent,e.next=11,Promise.all(o.map(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t.name,e.t1=t.size,e.next=4,_(t);case 4:return e.t2=e.sent,e.abrupt("return",{type:"project-resource",filename:e.t0,size:e.t1,sha512TruncatedTo256:e.t2});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:return u=e.sent,e.next=14,Y.post("/project/".concat(n,"/action/create-presigned-urls"),{requestedResources:u},{headers:{Authorization:c},params:{userId:l}});case 14:if((d=e.sent).data&&Array.isArray(d.data)){e.next=17;break}throw new Error("Response does not contain pre-signed urls for upload.");case 17:return p=d.data.map((function(e,t){return{resourceFile:o[t],presignedUrl:e,index:t}})),e.abrupt("return",p);case 19:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ge=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.currentVersion){e.next=2;break}throw new Error("Opening of project without current version not handled");case 2:return e.next=4,G.get(J("/".concat(t.id,"/versions/").concat(n||t.currentVersion,".zip")),{responseType:"blob"});case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),xe=new RegExp("".concat(s.O1.baseUrl.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"\\/(.*)\\/resources\\/(.*\\/)*([a-zA-Z0-9]+)-([^\\?\\n\\r]+)")),me=function(e){if(e.startsWith(s.O1.baseUrl)){var t=xe.exec(e);if(t)return decodeURIComponent(t[4])}return-1!==e.lastIndexOf("/")?decodeURIComponent(e.substring(e.lastIndexOf("/")+1)):e},ve=function(e){if(e.startsWith(s.O1.baseUrl)){var t=xe.exec(e);if(t)return t[1]}return null},be=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a,s,l,c,u,d,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.projectId,o=n.email,a=n.feature,s=n.level,l=t.getAuthorizationHeader,c=t.firebaseUser){e.next=4;break}return e.abrupt("return");case 4:return u=c.uid,e.next=7,l();case 7:return d=e.sent,e.next=10,Y.post("/project-user-acl",{userId:u,projectId:i,feature:a,level:s,email:o},{headers:{Authorization:d},params:{userId:u}});case 10:return p=e.sent,e.abrupt("return",p.data);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ce=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a,s,l,c,u,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.projectId,o=n.userId,a=n.feature,s=t.getAuthorizationHeader,l=t.firebaseUser){e.next=4;break}return e.abrupt("return");case 4:return c=l.uid,e.next=7,s();case 7:return u=e.sent,e.next=10,Y.delete("/project-user-acl",{headers:{Authorization:u},params:{userId:c,projectId:i,feature:a,targetUserId:o}});case 10:return d=e.sent,e.abrupt("return",d.data);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),je=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a,s,l,c,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.projectId,o=t.getAuthorizationHeader,a=t.firebaseUser){e.next=4;break}return e.abrupt("return",[]);case 4:return s=a.uid,e.next=7,o();case 7:return l=e.sent,e.next=10,Y.get("/project-user-acl",{headers:{Authorization:l},params:{userId:s,projectId:i}});case 10:if(c=e.sent,u=c.data,Array.isArray(u)){e.next=14;break}throw new Error("Invalid response from the project user acls API");case 14:return e.abrupt("return",u);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ye=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,o){var a,s,l,c,u,d,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getAuthorizationHeader,s=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return l=o.label.trim(),c={label:l?l.slice(0,z):""},u=s.uid,e.next=8,a();case 8:return d=e.sent,e.next=11,Y.patch("/project/".concat(n,"/version/").concat(i),c,{headers:{Authorization:d},params:{userId:u}});case 11:return p=e.sent,e.abrupt("return",p.data);case 13:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),Ze=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,o){var a,s,l,c,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,s=o.forceUri||"/project/".concat(i,"/version"),e.next=6,Y.get(s,{headers:{Authorization:a},params:o.forceUri?{userId:n}:{userId:n,goal:"history",perPage:15}});case 6:if(l=e.sent,c=l.headers.link?(0,H.be)(l.headers.link):null,u=l.data,Array.isArray(u)){e.next=11;break}throw new Error("Invalid response from the project versions API");case 11:return e.abrupt("return",{versions:u,nextPageUri:c});case 12:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},36465:function(e,t,n){"use strict";n.d(t,{Ab:function(){return h},Af:function(){return x},B$:function(){return v},GN:function(){return g},ID:function(){return E},LN:function(){return P},Po:function(){return I},RB:function(){return w},SS:function(){return j},W_:function(){return b},_w:function(){return T},bW:function(){return Z},cx:function(){return m},jV:function(){return k},mR:function(){return C},uG:function(){return y},yw:function(){return S}});var r=n(74165),i=n(15861),o=n(36600),a=(n(28381),n(14446)),s=n.n(a),l=n(70983),c=n.n(l),u=n(45911),d=n(57974),p=n(29343),f=s().create({baseURL:u.$e.baseUrl}),h=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("/asset-pack");case 2:if(t=e.sent,n=t.data,Array.isArray(n)){e.next=6;break}throw new Error("Invalid response from the asset packs API");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("/game-template");case 2:if(t=e.sent,n=t.data,Array.isArray(n)){e.next=6;break}throw new Error("Invalid response from the game templates API");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("/credits-package");case 2:if(t=e.sent,n=t.data,Array.isArray(n)){e.next=6;break}throw new Error("Invalid response from the credits packages API");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,o=n.productType,a=n.role,e.next=3,t();case 3:return s=e.sent,e.next=6,f.get("/purchase",{params:{userId:i,productType:o,role:a},headers:{Authorization:s}});case 6:return l=e.sent,e.abrupt("return",l.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,e.next=3,t();case 3:return o=e.sent,e.next=6,f.post("/asset-pack/action/authorize",{},{headers:{Authorization:o},params:{userId:i}});case 6:return a=e.sent,e.abrupt("return",a.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,e.next=3,t();case 3:return o=e.sent,e.next=6,f.post("/game-template/action/authorize",{},{headers:{Authorization:o},params:{userId:i}});case 6:return a=e.sent,e.abrupt("return",a.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(e,t){return-1!==e.indexOf("?")?"".concat(e,"&token=").concat(encodeURIComponent(t)):"".concat(e,"?token=").concat(encodeURIComponent(t))},j=function(e){return e.startsWith("https://private-assets.gdevelop.io/")||e.startsWith("https://private-assets-dev.gdevelop.io/")},y=function(e){return e.startsWith("https://private-game-templates.gdevelop.io/")||e.startsWith("https://private-game-templates-dev.gdevelop.io/")},Z=function(e){return j(e)||y(e)},k=function(e){var t=e.split("?")[0];return decodeURIComponent(c().basename(t))},w=function(e){var t=e.productId,n=e.priceName,r=e.userId,i=e.userEmail,o=e.password,a=new URL("".concat(u.$e.baseUrl,"/purchase/action/redirect-to-checkout"));return a.searchParams.set("productId",t),a.searchParams.set("priceName",n),a.searchParams.set("userId",r),a.searchParams.set("customerEmail",i),o&&a.searchParams.set("password",o),a.toString()},T=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.authenticatedUser,i=t.allResourcePaths,!i.some((function(e){return(0,d.PX)(e)&&y(e)}))){e.next=10;break}if(o=n.profile&&n.profile.id){e.next=6;break}throw new Error("Can not fetch resources from a private game template without being authenticated.");case 6:return e.next=8,b(n.getAuthorizationHeader,{userId:o});case 8:return a=e.sent,e.abrupt("return",a);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.productType,e.next=3,f.get("/product-license",{params:{productType:n}});case 3:if(i=e.sent,o=i.data,Array.isArray(o)){e.next=7;break}throw new Error("Invalid response from the product licenses API");case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.productId,o=n.usageType,a=n.userId,e.next=3,t();case 3:return s=e.sent,e.next=6,f.post("/product/".concat(i,"/action/buy-with-credits"),{usageType:"product-purchase",priceUsageType:o},{params:{userId:a},headers:{Authorization:s}});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(e){var t=e.subscription,n=e.privateAssetPackListingData;if(e.isAlreadyReceived||!n.redeemConditions)return null;if(t&&t.benefitsFromEducationPlan)return null;var r=n.redeemConditions.filter((function(e){return n.prices.some((function(t){return t.usageType===e.usageType&&"subscription"===e.reason}))}))[0];if(!r)return null;var i=function(e){var t=e.redeemCondition,n=e.subscription;if("subscription"===t.reason){var r=t.condition.split(",");if(n&&!n.benefitsFromEducationPlan)return r.includes(n.planId)?{canRedeem:!0}:{canRedeem:!1,canUpgrade:["gdevelop_indie","gdevelop_pro","gdevelop_silver","gdevelop_gold"].some((function(e){return n.planId===e&&!r.includes(e)}))}}return{canRedeem:!1}}({redeemCondition:r,subscription:t}),a=i.canRedeem?(0,p.jsx)(o.Trans,{id:"Claim this pack"}):t&&t.planId?i.canUpgrade?(0,p.jsx)(o.Trans,{id:"Upgrade"}):null:(0,p.jsx)(o.Trans,{id:"Get a Sub"});return"commercial"===r.usageType?{actionLabel:a,canRedeemAssetPack:i.canRedeem,message:(0,p.jsx)(o.Trans,{id:"Single commercial use license for claim with Gold or Pro subscription"})}:"personal"===r.usageType?{actionLabel:a,canRedeemAssetPack:i.canRedeem,message:(0,p.jsx)(o.Trans,{id:"Personal license for claim with Gold or Pro subscription"})}:"unlimited"===r.usageType?{actionLabel:a,canRedeemAssetPack:i.canRedeem,message:(0,p.jsx)(o.Trans,{id:"Unlimited commercial use license for claim with Gold or Pro subscription"})}:void 0},I=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o,a,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.privateAssetPackListingData,i=t.getAuthorizationHeader,o=t.userId,a=t.password,e.next=3,i();case 3:return s=e.sent,l={priceUsageType:"commercial"},a&&(l.password=a),e.next=8,f.post("/product/".concat(n.id,"/action/redeem"),l,{headers:{Authorization:s},params:{userId:o}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},94446:function(e,t,n){"use strict";n.d(t,{$S:function(){return a},Qp:function(){return s},cG:function(){return l},cT:function(){return u},r1:function(){return c}});var r=n(14446),i=n.n(r),o=n(45911),a=function(e,t){return!e.isPrivateTutorial||!!(t&&t.privateTutorials&&t.privateTutorials.allowedIdPrefixes.some((function(t){return e.id.startsWith(t)})))},s=function(){return i().get("".concat(o.Ud.baseUrl,"/tutorial")).then((function(e){return e.data}))},l=function(e){switch(e){case"ParticleSystem::ParticleEmitter":return["in-depth-tutorial-particle-emitter"];case"Lighting::LightObject":return["flickering-dynamic-light-effect"];case"BitmapText::BitmapTextObject":case"TileMap::TileMap":return["intermediate-bitmap-text-and-tilemap"];default:return[]}},c=function(e){switch(e){case"Tween::TweenBehavior":return["tween-behavior"];case"AnchorBehavior::AnchorBehavior":return["responsive-ui"];case"Physics2::Physics2Behavior":return["in-depth-tutorial-physics-engine-two"];case"PlatformBehavior::PlatformerObjectBehavior":case"PlatformBehavior::PlatformBehavior":return["in-depth-tutorial-platformer"];case"TopDownMovementBehavior::TopDownMovementBehavior":return["in-depth-tutorial-top-down-behavior"];default:return[]}},u=function(e){switch(e){case"CameraX":case"CameraY":case"RotateCamera":case"ZoomCamera":case"FixCamera":case"CentreCamera":return["smooth-camera-movement"];case"ChangeTimeScale":return["pause-menu"];case"EcrireFichierExp":case"EcrireFichierTxt":case"LireFichierExp":case"LireFichierTxt":return["intermediate-storage"];case"PlatformBehavior::SimulateJumpKey":return["simple-trampoline-platformer"];case"AjoutObjConcern":case"PickNearest":case"AjoutHasard":return["intermediate-object-picking"];case"ToggleObjectVariableAsBoolean":case"ToggleGlobalVariableAsBoolean":case"ToggleSceneVariableAsBoolean":return["iIntermediate-toggle-states-with-variable"];case"Scene":case"PushScene":case"PopScene":return["intermediate-level-select-menu"];case"Animation":case"AnimationName":case"ChangeAnimation":case"ChangeAnimationName":return["intermediate-changing-animations"];case"PopStartedTouch":case"MouseButtonPressed":return["intermediate-touchscreen-controls"];default:return[]}}},68151:function(e,t,n){"use strict";n.d(t,{Bg:function(){return j},Gs:function(){return u},K6:function(){return E},Lf:function(){return L},Mm:function(){return v},Ri:function(){return x},VZ:function(){return d},XT:function(){return I},Xp:function(){return m},YB:function(){return C},e_:function(){return w},eu:function(){return T},f3:function(){return P},iG:function(){return y},jj:function(){return S},kM:function(){return f},mX:function(){return k},nj:function(){return h},rE:function(){return b},rq:function(){return Z},tY:function(){return g},u0:function(){return M}});var r=n(1413),i=n(74165),o=n(15861),a=n(14446),s=n.n(a),l=n(45911),c=n(91),u=5,d=300,p=s().create({baseURL:l.l7.baseUrl}),f=function(e){return!["REDEMPTION_CODE","MANUALLY_ADDED","TEAM_MEMBER"].includes(e)&&!e.startsWith("PURCHASELY_")},h=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.get("/subscription-plan",{params:{includeLegacy:t.includeLegacy?"true":"false"}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.get("/subscription-plan-pricing-system/".concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:if(e.prev=7,e.t0=e.catch(0),!(r=(0,c.T)(e.t0))||404!==r.status){e.next=12;break}return e.abrupt("return",null);case 12:throw e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={includeLegacy:t.includeLegacy?"true":"false"},t.subscriptionPlanIds&&t.subscriptionPlanIds.length>0&&(n.subscriptionPlanIds=t.subscriptionPlanIds.join(",")),e.next=4,p.get("/subscription-plan-pricing-system",{params:n});case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return r=e.sent,e.next=5,p.get("/usage",{params:{userId:n},headers:{Authorization:r}});case 5:return o=e.sent,e.abrupt("return",o.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return r=e.sent,e.next=5,p.get("/limits",{params:{userId:n},headers:{Authorization:r}});case 5:return o=e.sent,e.abrupt("return",o.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return r=e.sent,e.next=5,p.get("/subscription-v2",{params:{userId:n},headers:{Authorization:r}});case 5:return o=e.sent,e.abrupt("return",o.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,o,a){var s,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return s=e.sent,e.next=5,p.post("/subscription-v2",(0,r.Z)((0,r.Z)({},o),{},{prohibitSeamlessUpdate:!0,cancelImmediately:a.cancelImmediately,cancelReasons:a.cancelReasons}),{params:{userId:n},headers:{Authorization:s}});case 5:return l=e.sent,e.abrupt("return",l.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),j=function(e,t){return!1},y=function(e){return!!e.stripeSubscriptionId},Z=function(e){return!!e&&!!e.purchaselyPlan},k=function(e){return!!e&&"MANUALLY_ADDED"===e.pricingSystemId},w=function(e){return!(!e||!e.planId||e.redemptionCodeValidUntil&&!(e.redemptionCodeValidUntil>Date.now()))},T=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.post("/upload-options/signed-url",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return r=e.sent,e.next=5,p.post("/subscription-v2/action/redirect-to-portal",{},{params:{userId:n},headers:{Authorization:r}});case 5:if(o=e.sent,(a=o.data.sessionPortalUrl)&&"string"===typeof a){e.next=9;break}throw new Error("Could not find the session portal url.");case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(e){var t=e.pricingSystemId,n=e.userId,r=e.userEmail,i=e.quantity,o=new URL("".concat(l.l7.baseUrl,"/subscription-v2/action/redirect-to-checkout-v2"));return o.searchParams.set("pricingSystemId",t),o.searchParams.set("userId",n),o.searchParams.set("customerEmail",r),void 0!==i&&i>1&&o.searchParams.set("quantity",i.toString()),o.toString()},E=function(e){return!!e&&(["gdevelop_startup","gdevelop_education"].includes(e.planId)||"gdevelop_gold"===e.planId&&!!e.benefitsFromEducationPlan)},I=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,r){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return o=e.sent,e.next=5,p.post("/redemption-code/action/redeem-code",{code:r},{params:{userId:n},headers:{Authorization:o}});case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),M=function(e){return!!e&&["gdevelop_education","gdevelop_startup","gdevelop_gold"].includes(e.planId)&&!e.benefitsFromEducationPlan},L=function(e){return!!e&&!["gdevelop_education","gdevelop_startup"].includes(e.planId)&&!e.benefitsFromEducationPlan}},93431:function(e,t,n){"use strict";n.d(t,{Ty:function(){return X},sS:function(){return I},iE:function(){return M},RR:function(){return Y},Pk:function(){return G},r0:function(){return k},Qv:function(){return B},D1:function(){return R},TL:function(){return O},HW:function(){return D},Lq:function(){return q},NV:function(){return A},HU:function(){return L},TA:function(){return P},on:function(){return T},YB:function(){return S},wO:function(){return w},me:function(){return Z},Zb:function(){return _},mD:function(){return E},GX:function(){return F}});var r=n(74165),i=n(15861),o=n(36600),a=n(28381),s=n(14446),l=n.n(s),c=n(3570),u=n(22853),d=n(1413),p=n(78118),f=n(29343),h=a.memo((function(e){return(0,f.jsxs)(p.Z,(0,d.Z)((0,d.Z)({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[(0,f.jsx)("path",{d:"M19.9437 5.8767C19.8957 4.81185 19.7237 4.08327 19.4796 3.44676C19.2236 2.79023 18.8835 2.22978 18.3274 1.67734C17.7713 1.1249 17.2152 0.776621 16.559 0.52442C15.9229 0.276221 15.1948 0.108086 14.1305 0.060048C13.0623 0.0120096 12.7223 0 10.0097 0C7.29317 0 6.95311 0.0120096 5.88889 0.060048C4.82468 0.108086 4.09654 0.280224 3.46041 0.52442C2.80028 0.780625 2.24016 1.1209 1.68805 1.67734C1.13594 2.23379 0.787874 2.79023 0.535824 3.44676C0.291775 4.08327 0.11974 4.81185 0.0717308 5.8767C0.0237211 6.94556 0.0117188 7.28583 0.0117188 10C0.0117188 12.7182 0.0237211 13.0584 0.0717308 14.1233C0.11974 15.1882 0.291775 15.9167 0.535824 16.5532C0.791875 17.2098 1.13194 17.7702 1.68805 18.3227C2.24016 18.8791 2.80028 19.2234 3.45641 19.4756C4.09253 19.7238 4.82068 19.8919 5.88489 19.94C6.95311 19.988 7.29317 20 10.0057 20C12.7223 20 13.0623 19.988 14.1265 19.94C15.1908 19.8919 15.9189 19.7198 16.555 19.4756C17.2112 19.2194 17.7713 18.8791 18.3234 18.3227C18.8755 17.7662 19.2236 17.2098 19.4756 16.5532C19.7237 15.9167 19.8917 15.1882 19.9397 14.1233C19.9877 13.0544 19.9997 12.7142 19.9997 10C19.9997 7.28583 19.9917 6.94155 19.9437 5.8767ZM18.1473 14.0432C18.1033 15.02 17.9393 15.5524 17.8033 15.9007C17.6232 16.3651 17.4032 16.7014 17.0511 17.0536C16.6991 17.4059 16.367 17.6181 15.8989 17.8062C15.5468 17.9424 15.0147 18.1065 14.0425 18.1505C12.9903 18.1986 12.6743 18.2106 10.0017 18.2106C7.32918 18.2106 7.01312 18.1986 5.96091 18.1505C4.98471 18.1065 4.45261 17.9424 4.10454 17.8062C3.64044 17.6261 3.30438 17.4059 2.95231 17.0536C2.60024 16.7014 2.38819 16.3691 2.20016 15.9007C2.06413 15.5484 1.9001 15.016 1.85609 14.0432C1.80808 12.9904 1.79608 12.6741 1.79608 10C1.79608 7.32586 1.80808 7.00961 1.85609 5.95677C1.9001 4.97998 2.06413 4.44756 2.20016 4.09928C2.38019 3.63491 2.60024 3.29864 2.95231 2.94636C3.30438 2.59408 3.63644 2.38191 4.10454 2.19376C4.45661 2.05765 4.98871 1.89351 5.96091 1.84948C7.01312 1.80144 7.32918 1.78943 10.0017 1.78943C12.6743 1.78943 12.9903 1.80144 14.0425 1.84948C15.0187 1.89351 15.5508 2.05765 15.8989 2.19376C16.363 2.3739 16.6991 2.59408 17.0511 2.94636C17.4032 3.29864 17.6152 3.63091 17.8033 4.09928C17.9393 4.45156 18.1033 4.98399 18.1473 5.95677C18.1954 7.00961 18.2074 7.32586 18.2074 10C18.2074 12.6741 18.1914 12.9904 18.1473 14.0432Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M10.0013 4.85989C7.16072 4.85989 4.86426 7.16173 4.86426 10C4.86426 12.8423 7.16472 15.1401 10.0013 15.1401C12.8379 15.1401 15.1383 12.8343 15.1383 10C15.1383 7.15772 12.8419 4.85989 10.0013 4.85989ZM10.0013 13.3347C8.16092 13.3347 6.66862 11.8415 6.66862 10C6.66862 8.15852 8.16092 6.66533 10.0013 6.66533C11.8417 6.66533 13.334 8.15852 13.334 10C13.334 11.8415 11.8417 13.3347 10.0013 13.3347Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M15.3389 5.86069C16.0018 5.86069 16.5392 5.323 16.5392 4.65973C16.5392 3.99646 16.0018 3.45877 15.3389 3.45877C14.676 3.45877 14.1387 3.99646 14.1387 4.65973C14.1387 5.323 14.676 5.86069 15.3389 5.86069Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M0 10C0 12.7182 0.0120024 13.0584 0.060012 14.1233C0.108022 15.1882 0.280056 15.9167 0.524105 16.5532C0.780156 17.2098 1.12022 17.7702 1.67634 18.3227C2.22845 18.8751 2.78856 19.2234 3.44469 19.4756C4.08082 19.7238 4.80896 19.8919 5.87318 19.94C6.94139 19.988 7.28146 20 9.994 20C12.7105 20 13.0506 19.988 14.1148 19.94C15.179 19.8919 15.9072 19.7198 16.5433 19.4756C17.1994 19.2194 17.7596 18.8791 18.3117 18.3227C18.8638 17.7702 19.2118 17.2098 19.4639 16.5532C19.7119 15.9167 19.88 15.1882 19.928 14.1233C19.976 13.0544 19.988 12.7142 19.988 10C19.988 7.28183 19.976 6.94155 19.928 5.8767C19.88 4.81185 19.7079 4.08327 19.4639 3.44676C19.2078 2.79023 18.8678 2.22978 18.3117 1.67734C17.7636 1.1209 17.2034 0.776621 16.5473 0.52442C15.9112 0.276221 15.183 0.108086 14.1188 0.060048C13.0506 0.0120096 12.7105 0 9.998 0C7.28146 0 6.94139 0.0120096 5.87718 0.060048C4.81296 0.108086 4.08482 0.280224 3.44869 0.52442C2.79256 0.780625 2.23245 1.1209 1.68034 1.67734C1.12823 2.23379 0.780156 2.79023 0.528106 3.44676C0.280056 4.08327 0.108022 4.81185 0.060012 5.8767C0.0120024 6.94155 0 7.28183 0 10ZM1.80436 10C1.80436 7.32986 1.81636 7.00961 1.86437 5.95677C1.90838 4.97998 2.07241 4.44756 2.20844 4.09928C2.38848 3.63491 2.60852 3.29864 2.96059 2.94636C3.31266 2.59408 3.64473 2.38191 4.11282 2.19376C4.46489 2.05765 4.997 1.89351 5.96919 1.84948C7.0214 1.80144 7.33747 1.78943 10.01 1.78943C12.6825 1.78943 12.9986 1.80144 14.0508 1.84948C15.027 1.89351 15.5591 2.05765 15.9072 2.19376C16.3713 2.3739 16.7073 2.59408 17.0594 2.94636C17.4115 3.29864 17.6235 3.63091 17.8116 4.09928C17.9476 4.45156 18.1116 4.98399 18.1556 5.95677C18.2036 7.00961 18.2156 7.32586 18.2156 10C18.2156 12.6741 18.2036 12.9904 18.1556 14.0432C18.1116 15.02 17.9476 15.5524 17.8116 15.9007C17.6315 16.3651 17.4115 16.7014 17.0594 17.0536C16.7073 17.4059 16.3753 17.6181 15.9072 17.8062C15.5551 17.9424 15.023 18.1065 14.0508 18.1505C12.9986 18.1986 12.6825 18.2106 10.01 18.2106C7.33747 18.2106 7.0214 18.1986 5.96919 18.1505C4.993 18.1065 4.46089 17.9424 4.11282 17.8062C3.64873 17.6261 3.31266 17.4059 2.96059 17.0536C2.60852 16.7014 2.39648 16.3691 2.20844 15.9007C2.07241 15.5484 1.90838 15.016 1.86437 14.0432C1.81236 12.9904 1.80436 12.6701 1.80436 10Z",fill:"currentColor"})]}))})),g=a.memo((function(e){return(0,f.jsx)(p.Z,(0,d.Z)((0,d.Z)({},e),{},{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,f.jsx)("path",{d:"M9.99 0C4.47 0 0 4.48 0 10C0 15.52 4.47 20 9.99 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 9.99 0ZM16.92 6H13.97C13.65 4.75 13.19 3.55 12.59 2.44C14.43 3.07 15.96 4.35 16.92 6ZM10 2.04C10.83 3.24 11.48 4.57 11.91 6H8.09C8.52 4.57 9.17 3.24 10 2.04ZM2.26 12C2.1 11.36 2 10.69 2 10C2 9.31 2.1 8.64 2.26 8H5.64C5.56 8.66 5.5 9.32 5.5 10C5.5 10.68 5.56 11.34 5.64 12H2.26ZM3.08 14H6.03C6.35 15.25 6.81 16.45 7.41 17.56C5.57 16.93 4.04 15.66 3.08 14ZM6.03 6H3.08C4.04 4.34 5.57 3.07 7.41 2.44C6.81 3.55 6.35 4.75 6.03 6ZM10 17.96C9.17 16.76 8.52 15.43 8.09 14H11.91C11.48 15.43 10.83 16.76 10 17.96ZM12.34 12H7.66C7.57 11.34 7.5 10.68 7.5 10C7.5 9.32 7.57 8.65 7.66 8H12.34C12.43 8.65 12.5 9.32 12.5 10C12.5 10.68 12.43 11.34 12.34 12ZM12.59 17.56C13.19 16.45 13.65 15.25 13.97 14H16.92C15.96 15.65 14.43 16.93 12.59 17.56ZM14.36 12C14.44 11.34 14.5 10.68 14.5 10C14.5 9.32 14.44 8.66 14.36 8H17.74C17.9 8.64 18 9.31 18 10C18 10.69 17.9 11.36 17.74 12H14.36Z",fill:"currentColor"})}))})),x=n(45658),m=a.memo((function(e){return(0,f.jsx)(p.Z,(0,d.Z)((0,d.Z)({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,f.jsx)("path",{d:"M17.5881 13.5462C17.4864 13.2694 17.2926 13.1213 17.0719 12.9986C17.0304 12.9743 16.9922 12.9548 16.9597 12.9399C16.8939 12.9058 16.8265 12.8729 16.7596 12.8381C16.0717 12.4734 15.5345 12.0133 15.162 11.4679C15.0562 11.3144 14.9644 11.1517 14.8878 10.9817C14.856 10.8908 14.8575 10.8392 14.8803 10.792C14.9029 10.7557 14.9329 10.7245 14.9682 10.7004C15.0864 10.6222 15.2084 10.5429 15.291 10.4894C15.4384 10.394 15.5551 10.3185 15.6303 10.265C15.9127 10.0675 16.1102 9.85762 16.2337 9.62309C16.3198 9.46105 16.37 9.28236 16.3809 9.09918C16.3918 8.916 16.3632 8.73262 16.2969 8.56151C16.1098 8.06925 15.6449 7.76364 15.0816 7.76364C14.9627 7.76353 14.8442 7.77607 14.7281 7.80105C14.697 7.80778 14.666 7.81489 14.6357 7.82274C14.6409 7.48609 14.6334 7.13073 14.6035 6.78099C14.4973 5.55146 14.0667 4.90695 13.6179 4.393C13.3304 4.07093 12.9918 3.79845 12.6158 3.58652C11.9346 3.1975 11.1622 3 10.3202 3C9.47815 3 8.70946 3.1975 8.02755 3.58652C7.65054 3.79852 7.31128 4.07154 7.02358 4.39449C6.5747 4.90845 6.14416 5.55407 6.03793 6.78248C6.00801 7.13223 6.00052 7.48946 6.00539 7.82424C5.97509 7.81638 5.94442 7.80928 5.91337 7.80254C5.7972 7.77756 5.67871 7.76502 5.55988 7.76514C4.99618 7.76514 4.53047 8.07074 4.34419 8.563C4.27761 8.73419 4.24866 8.91771 4.25931 9.10108C4.26996 9.28445 4.31996 9.46338 4.40591 9.62571C4.52973 9.86024 4.72723 10.0701 5.00964 10.2676C5.08445 10.32 5.20154 10.3955 5.34891 10.492C5.42859 10.5436 5.54492 10.6192 5.65901 10.6948C5.69893 10.7206 5.73285 10.7546 5.75851 10.7946C5.78245 10.8436 5.7832 10.8964 5.74766 10.9936C5.67208 11.1601 5.58182 11.3194 5.47796 11.4698C5.11363 12.0029 4.59219 12.4547 3.92637 12.8164C3.57363 13.0035 3.20705 13.1284 3.05219 13.5492C2.93549 13.8668 3.0118 14.2281 3.30842 14.5326C3.41729 14.6463 3.54356 14.7418 3.68248 14.8158C3.97155 14.9746 4.27893 15.0976 4.5978 15.182C4.66361 15.1989 4.72608 15.2269 4.78259 15.2646C4.89069 15.3593 4.87536 15.5018 5.01937 15.7105C5.09166 15.8184 5.18352 15.9118 5.29019 15.9858C5.59243 16.1946 5.93207 16.2076 6.29192 16.2215C6.61697 16.2338 6.98542 16.248 7.40624 16.3868C7.58055 16.4444 7.76159 16.5559 7.97144 16.6861C8.4753 16.9958 9.16506 17.4196 10.3194 17.4196C11.4738 17.4196 12.1684 16.9935 12.676 16.6827C12.8843 16.5548 13.0643 16.4444 13.2337 16.3883C13.6545 16.2492 14.023 16.2353 14.348 16.223C14.7079 16.2091 15.0475 16.1961 15.3497 15.9873C15.4761 15.8992 15.5813 15.7843 15.658 15.6507C15.7616 15.4745 15.759 15.3514 15.8562 15.2654C15.9092 15.2294 15.9679 15.2026 16.0298 15.1861C16.353 15.1015 16.6646 14.9773 16.9575 14.8165C17.1051 14.7373 17.2379 14.6333 17.3502 14.509L17.354 14.5046C17.6323 14.2068 17.7022 13.8559 17.5881 13.5462Z",fill:"currentColor"})}))})),v=n(44023),b=n(42839),C=n(44579),j=n(45911),y=l().create({baseURL:j.ST.baseUrl}),Z=function(e){return y.get("/user-public-profile/search",{params:{username:e,type:"creator"}}).then((function(e){return e.data}))},k=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/user/".concat(t,"/badge"));case 2:if(n=e.sent,i=n.data,Array.isArray(i)){e.next=6;break}throw new Error("Invalid response from the badges API");case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return i=e.sent,e.next=5,y.get("/team",{headers:{Authorization:i},params:{userId:n,role:"admin"}});case 5:return o=e.sent,e.abrupt("return",o.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return o=e.sent,e.next=5,y.get("/user",{headers:{Authorization:o},params:{userId:n,teamId:i,memberType:"basic"}});case 5:return a=e.sent,e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),S=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return o=e.sent,e.next=5,y.get("/team-membership",{headers:{Authorization:o},params:{userId:n,teamId:i}});case 5:return a=e.sent,e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),P=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return o=e.sent,e.next=5,y.get("/team/".concat(i,"/group"),{headers:{Authorization:o},params:{userId:n}});case 5:return a=e.sent,e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),E=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,o,a){var s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return s=e.sent,e.next=5,y.patch("/team/".concat(i,"/group/").concat(o),a,{headers:{Authorization:s},params:{userId:n}});case 5:return l=e.sent,e.abrupt("return",l.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}(),I=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,o){var a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,y.post("/team/".concat(i,"/group"),o,{headers:{Authorization:a},params:{userId:n}});case 5:return s=e.sent,e.abrupt("return",s.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),M=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,o){var a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,y.delete("/team/".concat(i,"/group/").concat(o),{headers:{Authorization:a},params:{userId:n}});case 5:return s=e.sent,e.abrupt("return",s.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),L=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,e.next=3,t();case 3:return o=e.sent,e.next=6,y.get("/recommendation",{headers:{Authorization:o},params:{userId:i}});case 6:return a=e.sent,e.abrupt("return",a.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/recommendation");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,o,a){var s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return s=e.sent,e.next=5,y.post("/team/".concat(i,"/action/update-members"),[{groupId:o,userId:a}],{headers:{Authorization:s},params:{userId:n}});case 5:return l=e.sent,e.abrupt("return",l.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}(),O=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",{});case 2:return e.next=4,y.get("/user-public-profile",{params:{id:t.join(",")}});case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/user-public-profile/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/username-availability/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return i=e.sent,e.next=5,y.post("/user/".concat(n,"/action/update-discord-role"),{},{headers:{Authorization:i},params:{userId:n}});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/user-comment-quality-ratings-leaderboard?leaderboardRegionName=global");case 2:if(t=e.sent,Array.isArray(t.data)){e.next=5;break}throw new Error("Invalid response from the user leaderboard API");case 5:return e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=/^https:\/\/[^ ]+$/,U=(0,f.jsx)(o.Trans,{id:"Please enter a valid URL, starting with https://"}),H=/^https:\/\/discord[^ ]+$/,V=(0,f.jsx)(o.Trans,{id:"Please enter a valid URL, starting with https://discord"}),z=/^$|^(?!@)/,W=(0,f.jsx)(o.Trans,{id:"You don't need to add the @ in your username"}),G={getFormattingError:function(e){return e&&!N.test(e)?U:void 0},maxLength:150},Y={maxLength:32},q={maxLength:39},X={personalWebsiteLink:{icon:(0,f.jsx)(g,{}),getFormattingError:function(e){return e&&!N.test(e)?U:void 0},maxLength:150},personalWebsite2Link:{icon:(0,f.jsx)(g,{}),getFormattingError:function(e){return e&&!N.test(e)?U:void 0},maxLength:150},twitterUsername:{icon:(0,f.jsx)(b.Z,{}),prefix:"https://twitter.com/",maxLength:15},facebookUsername:{icon:(0,f.jsx)(u.Z,{}),prefix:"https://facebook.com/",maxLength:50},youtubeUsername:{icon:(0,f.jsx)(C.Z,{}),prefix:"https://youtube.com/",maxLength:100},tiktokUsername:{icon:(0,f.jsx)(v.Z,{}),prefix:"https://tiktok.com/@",getFormattingError:function(e){return z.test(e)?void 0:W},maxLength:30},instagramUsername:{icon:(0,f.jsx)(h,{}),prefix:"https://instagram.com/",maxLength:30},redditUsername:{icon:(0,f.jsx)(x.Z,{}),prefix:"https://reddit.com/user/",maxLength:20},snapchatUsername:{icon:(0,f.jsx)(m,{}),prefix:"https://snapchat.com/add/",maxLength:15},discordServerLink:{icon:(0,f.jsx)(c.Z,{}),getFormattingError:function(e){return e&&!H.test(e)?V:void 0},maxLength:150}}},16792:function(e,t,n){"use strict";n.d(t,{Y:function(){return o}});var r=n(29439),i=n(95562),o=function(e){return e?Object.entries(e).reduce((function(e,t){var n=(0,r.Z)(t,2),o=n[0],a=n[1];return a&&(e["data-".concat((0,i.m)(o))]=a),e}),{}):void 0}},39949:function(e,t,n){"use strict";n.d(t,{KL:function(){return i},Q1:function(){return r},vA:function(){return o}});var r=function(e){return e.startsWith("/")},i=function(e){return e.startsWith("http://")||e.startsWith("https://")},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return r(e)?"https://wiki.gdevelop.io/gdevelop5".concat(e,"?utm_source=gdevelop&utm_medium=help-link").concat(t?"#".concat(t):""):i(e)?e:""}},19431:function(e,t,n){"use strict";n.d(t,{t:function(){return d}});var r=n(74165),i=n(15861),o=n(38428),a=n.n(o),s=n(997),l=n(50057),c=n.n(l)()("electron"),u=c?c.ipcRenderer:null,d=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,o,l,c,d,p,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlContainers,o=t.onProgress,l=t.throwIfAnyError,c=0,d=null,u){e.next=5;break}throw new Error("Download to local files is not supported.");case 5:return e.next=7,a().withConcurrency(20).for(n).process(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var a,l,p,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,l=t.filePath,e.prev=1,e.next=4,(0,s.x)({times:2},(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URL(a).href,e.next=3,u.invoke("local-file-download",t,l);case 3:case"end":return e.stop()}}),e)}))));case 4:return p={item:t},e.abrupt("return",p);case 8:return e.prev=8,e.t0=e.catch(1),console.error("Error while downloading file ".concat(a,":"),e.t0),d=e.t0,f={item:t,error:e.t0},e.abrupt("return",f);case 14:return e.prev=14,o(c++,n.length),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,8,14,17]])})));return function(t){return e.apply(this,arguments)}}());case 7:if(p=e.sent,f=p.results,!l||!d){e.next=11;break}throw d;case 11:return e.abrupt("return",f);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},18455:function(e){var t=function(e,t,n){for(var r=[],i=e;i<t;i++)r.push(n(i));return r};e.exports={mapFor:t,mapReverseFor:function(e,t,n){for(var r=[],i=t-1;i>=e;i--)r.push(n(i));return r},mapVector:function(e,n){return t(0,e.size(),(function(t){return n(e.at(t),t)}))}}},84360:function(e,t,n){"use strict";n.d(t,{R:function(){return i}});var r=n.g.gd,i=function(e){var t=new r.MapStringString;for(var n in e)t.set(n,e[n]);return t}},96355:function(e,t,n){"use strict";n.d(t,{R:function(){return r},q:function(){return i}});var r=function(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)},i=function(e,t){return Number.parseFloat(e.toFixed(t)).toString()}},83297:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});var r=n(29439),i=n(28381);var o=function(){var e=i.useState("undefined"===typeof navigator||"boolean"!==typeof navigator.onLine||navigator.onLine),t=(0,r.Z)(e,2),n=t[0],o=t[1],a=function(){return o(!0)},s=function(){return o(!1)};return i.useEffect((function(){return window.addEventListener("online",a),window.addEventListener("offline",s),function(){window.removeEventListener("online",a),window.removeEventListener("offline",s)}}),[]),n}},1236:function(e,t,n){"use strict";var r=n(4942),i=n(74165),o=n(15861),a=n(15671),s=n(43144),l=n(41006),c="gdevelop-cloud-project-autosave",u="cloud-project-autosaves",d="userProjectKey",p=function(){function e(){(0,a.Z)(this,e)}return(0,s.Z)(e,[{key:"_initializeDatabase",value:function(){return this.databasePromise||(this.databasePromise=new Promise((function(t,n){e._removeDatabaseIfCorrupt().then((function(){var e=window.indexedDB.open(c);e.onsuccess=function(e){var n=e.target.result;n.objectStoreNames.contains(u)||console.error("Couldn't find the object store ".concat(u,". An issue must have happened when creating the database.")),t(n)},e.onerror=function(e){console.error("IndexedDB could not be opened:",e),n(e)},e.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains(u)||t.createObjectStore(u,{keyPath:d})}}),(function(e){console.error("An error occurred while clearing a corrupt database.",e)}))}))),this.databasePromise}},{key:"_getEntry",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(n){var r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._initializeDatabase();case 2:return r=t.sent,t.abrupt("return",new Promise((function(t,i){try{var o=r.transaction(u,"readonly"),a=e._stringifyCacheKey(n),s=o.objectStore(u).get(a);s.onsuccess=function(e){t(e.target.result)},s.onerror=function(e){console.error("An error occurred while reading from indexedDB:",e),i(e)}}catch(l){console.error("An error occurred while reading from indexedDB:",l),i(l)}})));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"get",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getEntry(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return r=n.project,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCreationDate",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getEntry(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return r=n.createdAt,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"put",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(n,o){var a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._initializeDatabase();case 2:return a=t.sent,t.abrupt("return",new Promise((function(t,i){try{var s,c=a.transaction(u,"readwrite"),p=e._stringifyCacheKey(n);c.oncomplete=function(e){t()},c.onerror=function(e){console.error("An error occurred while writing to indexedDB:",e),i(e)},c.objectStore(u).put((s={},(0,r.Z)(s,d,p),(0,r.Z)(s,"project",(0,l.h_)(o)),(0,r.Z)(s,"createdAt",Date.now()),s))}catch(f){console.error("An error occurred while writing to indexedDB:",f),i(f)}})));case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()}],[{key:"isAvailable",value:function(){return"undefined"!==typeof window&&"indexedDB"in window}},{key:"burst",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isAvailable()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,window.indexedDB.databases();case 4:if(t.sent.find((function(e){return e.name===c}))){t.next=7;break}return t.abrupt("return");case 7:return t.abrupt("return",new Promise((function(e){window.indexedDB.open(c).onsuccess=function(t){var n=t.target.result;n.objectStoreNames.contains(u)||e();try{n.transaction(u,"readwrite").objectStore(u).clear()}catch(r){console.warn("An error occurred while clearing the cloud project autosave indexedDB:",r)}e()}})));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"_stringifyCacheKey",value:function(e){return"".concat(e.userId,"/").concat(e.cloudProjectId)}},{key:"_removeDatabaseIfCorrupt",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.indexedDB.databases();case 2:if(e.sent.find((function(e){return e.name===c}))){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,new Promise((function(e,t){window.indexedDB.open(c).onsuccess=function(n){var r=n.target.result;if(r.objectStoreNames.contains(u))e();else{console.warn("The cloud project autosave indexed db exist but the object store is not available. Deleting the indexedDB..."),r.close();var i=window.indexedDB.deleteDatabase(c);i.onsuccess=function(){console.warn("Deleted indexedDB successfully!"),e()},i.onerror=function(e){console.error("Couldn't delete indexedDB: ",e),t()},i.onblocked=function(){console.error("Couldn't delete indexedDB due to the operation being blocked."),t()}}}}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();t.Z=p},32921:function(e,t,n){"use strict";n.d(t,{IE:function(){return u},O8:function(){return s},nu:function(){return l},vv:function(){return c}});var r=n(30141),i=n(50394),o=n.n(i),a=n.g.gd,s=function(e){return/^([A-Za-z]{1}[A-Za-z\d_]*\.)+[A-Za-z][A-Za-z\d_]*$/i.test(e)},l=function(e,t){var n={},r=function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";n[e]||(n[e]=[]),n[e].push({type:t,message:r,extraExplanation:i})};return t.getPackageName()?t.getPackageName().length>=255?r("packageName","error",e._({id:"The package name is too long."}),e._({id:"Change the package name in the game properties."})):s(t.getPackageName())||r("packageName","error",e._({id:'The package name is containing invalid characters or not following the convention "xxx.yyy.zzz" (numbers allowed after a letter only).'}),e._({id:"Change the package name in the game properties."})):r("packageName","error",e._({id:"The package name is empty."}),e._({id:"Choose and enter a package name in the game properties."})),t.getName()||r("name","error",e._({id:"The name of your game is too long"}),e._({id:"Change the name in the game properties."})),(!t.getVersion()||t.getVersion().split(".").length<3)&&r("packageName","error",e._({id:"The version that you've set for the game is invalid."}),e._({id:"Enter a version in the game properties."})),n},c=function(e,t){return!Object.keys(t).length||((0,r.gR)({message:e._({id:"Your game has some invalid elements, please fix these before continuing:"})+"\n\n"+o()(t).map((function(e){return e.map((function(e){return"- ".concat(e.message)})).join("\n")})).join("\n"),rawError:void 0,errorId:"project-invalid-settings-error",doNotReport:!0}),!1)},u=function(e){for(var t=a.WholeProjectRefactorer.findInvalidRequiredBehaviorProperties(e),n=0;n<t.size();n++){var r=t.at(n),i=a.WholeProjectRefactorer.getBehaviorsWithType(r.getSourceObject(),r.getExpectedBehaviorTypeName()).toJSArray();console.error('Invalid value for required behavior property "'.concat(r.getSourcePropertyName(),'" in object ').concat(r.getSourceObject().getName()," for behavior ").concat(r.getSourceBehaviorContent().getName(),".")),console.info("Expected behavior of type ".concat(r.getExpectedBehaviorTypeName(),". Possibles values are: ").concat(i.join(", ")||"(none)","."))}}},997:function(e,t,n){"use strict";n.d(t,{x:function(){return o}});var r=n(74165),i=n(15861),o=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.times,o=0,a=null;case 3:if(!(o<i)){e.next=18;break}return o++,a=null,e.prev=6,e.next=9,n();case 9:return s=e.sent,e.abrupt("return",s);case 13:e.prev=13,e.t0=e.catch(6),a=e.t0;case 16:e.next=3;break;case 18:throw a;case 19:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t,n){return e.apply(this,arguments)}}()},41006:function(e,t,n){"use strict";n.d(t,{XH:function(){return i},ax:function(){return o},h_:function(){return a},qx:function(){return s}});var r=n.g.gd;function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"serializeTo",n=new r.SerializerElement;e[t](n);var i=JSON.parse(r.Serializer.toJSON(n));return n.delete(),i}function o(e,t,n,i){var o=new r.VectorString,a=new r.SerializerElement;r.ObjectAssetSerializer.serializeTo(e,t,n,a,o),i.push.apply(i,o.toJSArray()),o.delete();var s=JSON.parse(r.Serializer.toJSON(a));return a.delete(),s}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"serializeTo",n=new r.SerializerElement;e[t](n);var i=r.Serializer.toJSON(n);return n.delete(),i}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unserializeFrom",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=r.Serializer.fromJSObject(t);i?e[n](i,o):e[n](o),o.delete()}},95562:function(e,t,n){"use strict";n.d(t,{S:function(){return r},m:function(){return i}});var r=function(e,t){return e.length>t?e.substring(0,t)+"...":e},i=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()}},28842:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});var r=function(){return Date.now()+"-"+Math.floor(1e6*Math.random())}},68009:function(e,t,n){"use strict";n.d(t,{N:function(){return s}});var r=n(28381),i=n(12813),o=n(71046),a=n.n(o),s=function(e,t){var n=(0,i.t)(),o=(0,r.useRef)({cb:e,delay:t});return(0,r.useEffect)((function(){o.current={cb:e,delay:t}})),(0,r.useCallback)(a()((function(){var e;o.current.delay===t&&n.current&&(e=o.current).cb.apply(e,arguments)}),t,{leading:!1,trailing:!0}),[t,a()])}},38501:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(29439),i=n(28381);function o(){var e=i.useState(),t=(0,r.Z)(e,2)[1];return i.useCallback((function(){return t({})}),[])}},51063:function(e,t,n){"use strict";n.d(t,{s:function(){return v}});var r=n(74165),i=n(15861),o=n(29439),a=n(36600),s=n(28381),l=n(1773),c=n(67835),u=n(40243),d=n(86278),p=n(11374),f=n(61325),h=n(64480),g=n(29343),x={tableCell:{wordBreak:"break-word"}},m=function(e){var t=e.progress,n=e.result,r=e.onAbandon,i=e.onRetry,o=e.genericError,s=n&&n.erroredResources.length>0||!!o;return(0,g.jsx)(l.ZP,{title:(0,g.jsx)(a.Trans,{id:"Importing project resources"}),actions:[r?(0,g.jsx)(c.Z,{label:(0,g.jsx)(a.Trans,{id:"Ignore"}),disabled:!r,onClick:r},"close"):null,i?(0,g.jsx)(l.vF,{label:(0,g.jsx)(a.Trans,{id:"Retry"}),primary:!0,onClick:i},"retry"):null],cannotBeDismissed:!s,noMobileFullScreen:!s,open:!0,maxWidth:"sm",children:(0,g.jsxs)(f.ak,{noMargin:!0,expand:!0,children:[(0,g.jsx)(d.Z,{children:s?(0,g.jsx)(a.Trans,{id:"There were errors when importing resources for the project. You can retry (recommended) or continue despite the errors. In this case, the project will be missing some resources."}):null}),(0,g.jsx)(u.x1,{noMargin:!0,expand:!0,children:(0,g.jsx)(h.Z,{variant:t>0?"determinate":"indeterminate",value:t})}),s?(0,g.jsxs)(p.iA,{children:[(0,g.jsx)(p.xD,{children:(0,g.jsxs)(p.SC,{children:[(0,g.jsx)(p.bY,{children:(0,g.jsx)(a.Trans,{id:"Resource name"})}),(0,g.jsx)(p.bY,{children:(0,g.jsx)(a.Trans,{id:"Error"})})]})}),(0,g.jsxs)(p.RM,{children:[n?n.erroredResources.map((function(e){var t=e.resourceName,n=e.error;return(0,g.jsxs)(p.SC,{children:[(0,g.jsx)(p.Nn,{style:x.tableCell,children:t}),(0,g.jsx)(p.Nn,{style:x.tableCell,children:n.toString()})]},t)})):null,o?(0,g.jsxs)(p.SC,{children:[(0,g.jsx)(p.Nn,{style:x.tableCell,children:"-"}),(0,g.jsx)(p.Nn,{style:x.tableCell,children:o.toString()})]}):null]})]}):null]})})},v=function(e){var t=e.onDoProcess,n=s.useState(0),a=(0,o.Z)(n,2),l=a[0],c=a[1],u=s.useState(null),d=(0,o.Z)(u,2),p=d[0],f=d[1],h=s.useState(!1),x=(0,o.Z)(h,2),v=x[0],b=x[1],C=s.useState(null),j=(0,o.Z)(C,2),y=j[0],Z=j[1],k=s.useState(null),w=(0,o.Z)(k,2),T=w[0],S=w[1],P=s.useState(null),E=(0,o.Z)(P,2),I=E[0],M=E[1],L=s.useCallback(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(0),S(null),M(null),Z(null),f(null),b(!0),i=null,e.prev=7,e.next=10,t(n,(function(e,t){c(e/t*100)}));case 10:if(i=e.sent,c(100),0!==i.erroredResources.length){e.next=17;break}return b(!1),f(null),Z(null),e.abrupt("return");case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),f(e.t0);case 22:return e.abrupt("return",new Promise((function(e){S((function(){return function(){e(L(n))}})),M((function(){return function(){b(!1),f(null),Z(null),e()}})),Z(i),b(!1)})));case 23:case"end":return e.stop()}}),e,null,[[7,19]])})));return function(t){return e.apply(this,arguments)}}(),[t]),A=s.useCallback((function(){var e=y&&y.erroredResources.length>=0||!!p;return v||e?(0,g.jsx)(m,{progress:l,result:y,genericError:p,onAbandon:I,onRetry:T}):null}),[v,l,y,I,T,p]);return s.useMemo((function(){return{ensureProcessIsDone:L,renderProcessDialog:A}}),[L,A])}},21676:function(e,t,n){"use strict";n.d(t,{Y:function(){return i}});var r=n(28381),i=function(e,t){var n=(0,r.useRef)();(0,r.useEffect)((function(){n.current=e})),(0,r.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current&&n.current()}),t);return function(){return clearInterval(e)}}}),[t])}},12813:function(e,t,n){"use strict";n.d(t,{t:function(){return i}});var r=n(28381),i=function(){var e=r.useRef(!1);return r.useEffect((function(){return e.current=!0,function(){e.current=!1}}),[]),e}},39631:function(e,t,n){"use strict";n.d(t,{i:function(){return o}});var r=n(28381),i={},o=function(e,t){var n=r.useRef(null),o=t&&t.context?t.context:null,a=t&&t.delay?t.delay:600,s=r.useRef({clientX:0,clientY:0}),l=r.useCallback((function(){o&&delete i[o],n.current&&clearTimeout(n.current)}),[o]);return r.useEffect((function(){return document.addEventListener("scroll",l,{capture:!0}),function(){l(),document.removeEventListener("scroll",l,{capture:!0})}}),[l]),{onTouchStart:r.useCallback((function(t){if(n.current&&clearTimeout(n.current),o){if(i[o])return;i[o]=!0}s.current=function(e){return e.touches&&e.touches.length>0?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:{clientX:0,clientY:0}}(t),n.current=setTimeout((function(){e(s.current)}),a)}),[e,o,a]),onTouchMove:r.useCallback((function(e){if(1===e.touches.length){var t=e.touches[0],n=s.current,r=n.clientX,i=n.clientY;(Math.abs(t.clientX-r)>10||Math.abs(t.clientY-i)>10)&&l()}else l()}),[s,l]),onTouchEnd:l}}},51265:function(e,t,n){"use strict";var r=n(28381),i=new Set;if("undefined"!==typeof window){var o,a=function(){return i.forEach((function(e){return e()}))};window.addEventListener("resize",(function(){var e=document.activeElement;(!e||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName)&&(clearTimeout(o),o=setTimeout(a,200))}))}t.Z=function(e){r.useEffect((function(){return i.add(e),function(){i.delete(e)}}),[e])}},46771:function(e,t,n){"use strict";n.d(t,{B:function(){return i}});var r=n(28381);t.Z=function(e){var t=(0,r.useRef)(null),n=t.current;if(null!==n)return n;var i=e();return t.current=i,i};var i=function(e){var t=(0,r.useRef)(null);if(null!==t.current)return t;var n=e();return t.current=n,t}},85545:function(e,t,n){"use strict";n.d(t,{_:function(){return i},i:function(){return o}});var r=n(28381);function i(e){var t=r.useRef(e);r.useEffect((function(){t.current=e}),[e]);var n=r.useCallback((function(){return t.current.apply(t,arguments)}),[]);return n}function o(e){var t=r.useRef(e);return r.useEffect((function(){t.current=e}),[e]),t}},88585:function(e,t,n){"use strict";n.d(t,{k:function(){return u}});var r=n(74165),i=n(15861),o=n(29439),a=n(1413),s=n(28381),l=n(68151),c=function(e,t){return e.map((function(e){if("free"===e.id)return(0,a.Z)((0,a.Z)({},e),{},{pricingSystems:[]});var n=t.filter((function(t){return t.planId===e.id}));return 0===n.length?null:(0,a.Z)((0,a.Z)({},e),{},{pricingSystems:n})})).filter(Boolean)},u=function(e){return e.filter((function(e){return!e.isLegacy}))};t.Z=function(e){var t=e.includeLegacy,n=s.useState(null),a=(0,o.Z)(n,2),u=a[0],d=a[1],p=s.useCallback((0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,l.nj)({includeLegacy:t}),(0,l.Ri)({includeLegacy:t})]);case 2:n=e.sent,d(c(n[0],n[1]));case 4:case"end":return e.stop()}}),e)}))),[t]);return s.useEffect((function(){p()}),[p]),{subscriptionPlansWithPricingSystems:u}}},4964:function(e,t,n){"use strict";n.d(t,{G:function(){return s},H:function(){return a}});var r=n(74165),i=n(15861),o=n(20392),a=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.k)();case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,r){n.createReader(new n.BlobReader(t),(function(t){t.getEntries((function(t){t[0].getData(new n.TextWriter,(function(t){e(t)}))}))}),(function(e){console.error("An error occurred when unzipping blob",e),r(e)}))})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,a,s=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"file.txt",e.next=3,(0,o.k)();case 3:return i=e.sent,a=new i.TextReader(t),e.abrupt("return",new Promise((function(e,t){i.createWriter(new i.BlobWriter("application/zip"),(function(t){t.add(n,a,(function(){t.close((function(t){e(t)}))}))}),(function(e){console.error("An error occurred when zipping content",e),t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},20392:function(e,t,n){"use strict";n.d(t,{k:function(){return c}});var r=n(95018),i=".",o="/external/zip.js/WebContent",a="/external/zlib-asm",s=!1,l=null,c=function(){if(s){var e=n.g.zip;return Promise.resolve(e)}return l||(l=(0,r.v)(i+o+"/zip.js").then((function(){var e=n.g.zip;if(!e)throw new Error('Can not find "zip" in the global namespace after loading zip.js. Has the zip.js script being loaded properly?');return l=null,s=!0,e.workerScripts={deflater:[i+o+"/z-worker.js",i+a+"/zlib.js",i+o+"/zlib-asm/codecs.js"],inflater:[i+o+"/z-worker.js",i+a+"/zlib.js",i+o+"/zlib-asm/codecs.js"]},e})),l)}},5675:function(e,t,n){"use strict";n.d(t,{$u:function(){return l},Qi:function(){return o},e_:function(){return a},r9:function(){return c}});var r=1/16,i=Math.pow(2,.125),o=i,a=Math.pow(i,-1),s=Math.pow(1.7,r),l=function(e){return Math.pow(s,Math.sign(e))},c=function(e){return Math.max(Math.min(e,128),.0078125)}},92078:function(e,t,n){"use strict";n.d(t,{a:function(){return r}});var r=function(e,t){if(!t)return"";if("string"===typeof t)return t;if("object"!==typeof t)return"";var n=e.language;if(t[n])return t[n];var r=n.split("-")[0];if(t[r])return t[r];if(t.en)return t.en;var i=Object.keys(t)[0];return t[i]?t[i]:""}},88991:function(e,t,n){"use strict";n.d(t,{L:function(){return i},P:function(){return r}});var r=function(e){var t=e;return t?function(e){return t._(e)}:null},i=function(e){var t=e;return t?function(e){return t._(e)}:function(e){return e}}},91485:function(e,t,n){var r={"./af_ZA/messages":[39278,3190],"./ar_SA/messages":[94560,6067],"./az_AZ/messages":[46914,7902],"./bg_BG/messages":[31974,3883],"./bn_BD/messages":[46307,6337],"./br_FR/messages":[63195,2094],"./ca_ES/messages":[14692,683],"./cs_CZ/messages":[42947,1e3],"./da_DK/messages":[78356,3450],"./de_DE/messages":[50413,9569],"./el_GR/messages":[48435,5550],"./en/messages":[96781,2181],"./eo_UY/messages":[38909,2736],"./es_ES/messages":[35745,3458],"./fa_IR/messages":[42280,2548],"./fi_FI/messages":[22335,5897],"./fil_PH/messages":[62281,260],"./fr_FR/messages":[5155,8672],"./ha_HG/messages":[37288,9882],"./he_IL/messages":[94320,2402],"./hi_IN/messages":[19114,5719],"./hu_HU/messages":[40018,922],"./id_ID/messages":[34383,335],"./ig_NG/messages":[10374,7273],"./it_IT/messages":[88672,9840],"./ja_JP/messages":[94959,2855],"./ka_GE/messages":[54953,8680],"./km_KH/messages":[61072,7543],"./ko_KR/messages":[52488,4292],"./lt_LT/messages":[3157,1683],"./lv_LV/messages":[74372,3090],"./mr_IN/messages":[55850,7732],"./ms_MY/messages":[63596,8404],"./my_MM/messages":[27254,2247],"./nl_NL/messages":[35025,7274],"./no_NO/messages":[57657,7500],"./pl_PL/messages":[33102,3137],"./pseudo_LOCALE/messages":[98610,7699],"./pt_BR/messages":[30513,6163],"./pt_PT/messages":[22242,2437],"./ro_RO/messages":[23753,5229],"./ru_RU/messages":[46088,9917],"./si_LK/messages":[14313,2750],"./sk_SK/messages":[81651,7013],"./sl_SI/messages":[25413,6842],"./sq_AL/messages":[49622,3799],"./sr_CS/messages":[47207,9957],"./sr_SP/messages":[69323,7289],"./sv_SE/messages":[97400,9331],"./sw_KE/messages":[75457,4014],"./th_TH/messages":[91813,255],"./tr_TR/messages":[22415,1918],"./uk_UA/messages":[88582,5339],"./ur_PK/messages":[10472,6147],"./uz_UZ/messages":[44540,3418],"./vi_VN/messages":[12823,7883],"./yo_NG/messages":[79525,7018],"./zh_CN/messages":[70344,5188],"./zh_TW/messages":[66003,4003]};function i(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return n.e(t[1]).then((function(){return n.t(i,23)}))}i.keys=function(){return Object.keys(r)},i.id=91485,e.exports=i},97396:function(e){"use strict";e.exports=JSON.parse('{"\u0410":"A","\u0411":"B","\u0412":"V","\u0413":"G","\u0414":"D","\u0415":"E","\u0401":"E","\u0416":"Zh","\u0417":"Z","\u0418":"I","\u0419":"J","\u041a":"K","\u041b":"L","\u041c":"M","\u041d":"N","\u041e":"O","\u041f":"P","\u0420":"R","\u0421":"S","\u0422":"T","\u0423":"U","\u0424":"F","\u0425":"H","\u0426":"Ts","\u0427":"Ch","\u0428":"Sh","\u0429":"Shch","\u042b":"Y","\u042d":"E","\u042e":"Yu","\u042f":"Ya","\u0430":"a","\u0431":"b","\u0432":"v","\u0433":"g","\u0434":"d","\u0435":"e","\u0451":"e","\u0436":"zh","\u0437":"z","\u0438":"i","\u0439":"j","\u043a":"k","\u043b":"l","\u043c":"m","\u043d":"n","\u043e":"o","\u043f":"p","\u0440":"r","\u0441":"s","\u0442":"t","\u0443":"u","\u0444":"f","\u0445":"h","\u0446":"ts","\u0447":"ch","\u0448":"sh","\u0449":"shch","\u044b":"y","\u044d":"e","\u044e":"yu","\u044f":"ya","\u042a":"","\u044a":"","\u042c":"","\u044c":""}')}}]);
//# sourceMappingURL=164.58893000.chunk.js.map